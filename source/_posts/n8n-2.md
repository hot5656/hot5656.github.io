---
title: n8n - AI Agents, AI Automations & AI Voice Agents
abbrlink: f119
date: 2025-07-28 10:37:03
categories: AI
tags:
	n8n
	udemy
---

### install n8n
#### Hostinger n8n VPS hosting
``` bash
install as guide flow

# udgrade n8n for the Ubuntu 
docker compose pull
docker compose down
docker compose up -d
```

<!--more-->

#### install in windows(Node.js)
``` bash
1. search n8n github
2. Node.js install or nvm install(for Node.js version control)
3. npm install -g n8n
4. re-open cmd : run "n8n"
5. browser run : http://local:5678

# udgrade n8n 
1. npm update -g n8n
2. n8n
```

#### install in Mac(Node.js)
``` bash
1. node.js install
2. oper terminal : sudo npm install -g n8n 
3. n8n 
4. browser run: http://local:5678

# udgrade n8n 
1. npm update -g n8n
2. n8n
```

### Tool
#### Slack
##### Create : [Slack API](https://api.slack.com/apps)
``` bash
Slack 建立 channel : 要先建立工作空間

Slack token  申請 : [Slack API]
--> Creat an App
--> From scratch
--> App Name : n8n work, Pick a workspace to develop your app in: AI LAB
--> Create App
--> Generate token and Scopes : 含 Client ID,Client Secret 
--> OAuth & Permissions
	  Add New Redirect URL from n8n "OAuth Redirect URL"
		Bot Token Scopes  : chat:write , users:read, files:write 
		User Token Scopes : chat:write , users:read, files:write 
```

#### Google 
##### Google People API(for google Contracts):enable

#### [Telegram](https://web.telegram.org/) token
``` bash
login 
--> search "botfather" 
--> pick @BotFather 
--> Start 
--> press "/newbot " 
--> enter name "hot5656firstresponder_bot" 
--> copy token to n8n telegram node's credential 
```

#### [Airtable](https://www.airtable.com/) token
``` bash
# add a base
Create 
--> Create a app 
-> Untitled Base 
--> Field: File ID,Creation Time,Recipient Email

# API KEY
Account
--> go to developer hub 
--> create token
--> scopr:data.records:read,data.records:write,schema.bases:read,access:all
```

#### google Gimini  API key - [ Google AI Studio](https://aistudio.google.com/) 
``` bash
login 
--> get API key 
--> Create API key

# 免費方案有流量和次數限制（如每日或每分鐘請求數、Token數），但一般個人用途足夠，超額才需付費
```

#### [Notion](https://www.notion.com/)
##### [Notion Integrations](https://www.notion.so/profile/integrations) 建立 內部整合密鑰
``` bash
# 建立 內部整合密鑰
--> 新整合
整合名稱:Demo
關聯工作空間: Robert Kao Notion
類型:Internal
--> 儲存
功能: 閱讀評論,插入評論 eneable , copy 內部整合密鑰
--> 儲存
你的整合尚無任何頁面的存取權限
如欲開始使用整合，請從以下位置新增頁面和資料庫：Access Tab
--> 選取頁面
--> 私人
--> select all 
--> 更新選取權限

# 建立新 page
# 另 許權限也要加入
+開始協作 
-->建立新page : n8n transcribe
```

``` bash
# 建立 File Uploaded - Google Drive(表格)
notion home - https://www.notion.so/
--> +建立協作 set name: File Uploaded - Google Drive
--> 設定為表格, 欄位 Ｎame(文字), File URL(link)
```

#### peplexity API key
``` bash
User
--> Account
--> API Key
--> create 
```

### Setting 

#### API return code
``` bash
2xx(success): 200
4xx(client Error) : request error
5xx(Server error)
```

#### This message was sent automatically with n8n
n8n cloud telegrame send a text message 除非自架才可移除

#### n8n Community
##### enable
``` bash
# enable Community node support
n8n home
--> Admin Panel (see version : Running version n8n@1.104.2)
--> setup
    Verified community nodes: on (can install community nodes)
    also can change version, Zone
--> save change 
--> Dashboard
--> Open Instance (return n8n home)

# see install community node
--> User --> setting (can see Cmmunity Notes)
--> can see installed community nodes
```

##### install by n8n cloud
``` bash
# Conver text to speetch(11 labs)
+ search "elevenlabs" 
--> install 
--> Conver text to speetch(11 labs)

# web search, can use for I Agent's tool
# tavily Tool
+ search "tavily" 
--> install (有時失敗,再試一次就好了)
```

##### install by n8n hosting
``` bash
User --> setting -->  Cmmunity Nodes --> install searching 
```

### node
#### n8n form : on form submission
``` bash
Form Title : Contact Form
Form Description : Contact us when you have any problem to solver
Add form Elemant:
	Field:Name
	Placholder: Enter your name(required)

 	Field:Last Name
	Placholder: Enter your last name(required)

 	Field:Email
	Element type : Email
	Placholder: Enter your email(required)

	Field:Description
	Placholder: Provide information about the problem(required)

	Field:Course Type
	Element type : Dropdown List:n8n course, Zapier course, Midjourney course
```

#### send a message to Slack : Slack --> send a message
``` bash 
# Slack OAuth2 API
OAuth Redirect URL --> copy to Slach
Client ID : put Slack Id
Client Secret : put Slack Secret

Send Message To : channel
Channel: n8n-work
message type : simple Text Message
Message Text :
	Client as request
	Name:{{ $json.Name }}
	Email:{{ $json.Email }}
	Phone number:{{ $json['Phone Number'] }}
	Description:{{ $json.Description }}
```

#### add user to google contract : google contracts --> create a contract
``` bash
operation : Create 
Give Name : {{ $('Google Sheets Trigger').item.json.Name }}
Add field:
	Email: Type:work, value:{{ $('Google Sheets Trigger').item.json.Email }}
	Phone: Type:mobil(有些值會 check number format), value:{{ $('Google Sheets Trigger').item.json['Phone Number'] }}
```

#### wait message from Telegram's bot " on app event -> telegram --> on message 
``` bash
-> set credential (hugginFace cannot support telegram, change to n8n cloud) 
```

#### AI Ａgent framework :AI agent node 
``` bash
# n8n 針對 AI Agent 節點（AI Agent / OpenAI Chat Model 等）設定了每日免費請求次數限制。當你觸發超過這個免費次數，就會看到這類 rate limit exceeded 或 too many requests 的訊息。
# 若需額外使用量，系統會提示你加購點數（credits）：根據錯誤訊息和官方社群解釋，購買 10 credits 可解鎖每天 1,000 次免費模型請求額度。
# 這個限制是 n8n 針對其自家/託管的 AI 服務設下，無論你是在 n8n Cloud 還是自架 n8n，只要用 n8n 內建（非自己 API Key）的 AI Agent 模組，都會受這個免費額度天花板約束。
# 如果你想要完全自訂額度或無限制，需在節點改成自行填入自己的 LLM API Key（如 OpenAI API Key）來直連，這樣限制就來自你購買的 API 配額，與 n8n 無關
# 額度提升方式
# 依照系統錯誤訊息，進入 n8n 的 credit 購買流程，加入 10 credits 可每天解鎖 1,000 次免費模型呼叫（不單次，而是每日）。一般會要求你綁信用卡或付費帳戶。
# 若你不加購，隔天會自動恢復基礎的免費額度（約 50 次左右，會依官方政策調整）。
Source for Prompt : Define below 
Prompt : {{ $json.message.text }}, output not over 1200 letters, and not use markdown format
```

#### Gemini response ask : Google Gemini Chat model(link to AIn Agent Chat Model)
``` bash
--> set API key
Model : gemini-2,5-flash (也可選其他看看)
```

#### Sen to Telgram : Telegram --> send a text message
``` bash
# Telegram 文字訊息的長度限制是 最多 4,096 個字元（字符）。這個限制適用於單條文字訊息，不論是純文字還是帶格式的內容17。
# 此外，附件描述文字的長度上限是 1,024 到 2,048 字元，檔案大小限制普通用戶是 2 GB，Telegram Premium 用戶可達 4 GB1。
Chat ID :{{ $('Telegram Trigger').item.json.message.chat.id }}
Text: {{ $json.output }}
```

#### Code example 
``` js
// n8n code node 轉換前面資料
return items.map(item => {
  let text = item.json.output; // 取得前面節點傳來的 output 文字

  // 範例：把所有文字轉成大寫
  // text = text.toUpperCase();

  // 範例：跳脫 Telegram MarkdownV2 的特殊字元（部分）
  text = text.replace(/([_*[\]()~`>#+-=|{}.!])/g, '\\$1');

  // 將處理後的文字存回新的欄位或覆蓋原本欄位
  item.json.processedText = text;

  return item;
});
``` 

#### Google Driver --> On change involving a specific Folder
``` bash
Folder : Demo
Watch For : File Created
```

#### Google Driver--> Share File 
``` bash
# 若對方非 gmail email, access 時會回送 mail 要求設定權限

File : By Id-{{ $json.id }} 
--> add permission 
--> Role: Writer, Type:User, Email address: ...
```

#### [Airtable](https://www.airtable.com/) -->Create a record 
``` bash
Base:Untitled Base, 
Table:Table 1
File ID:{{ $('Google Drive Trigger').item.json.id }}
Creation Time:{{ $('Google Drive Trigger').item.json.createdTime }}
Recipient Email:..
```

#### download file from google drive : google drive--> download file
``` bash
File : {{ $json.id }}
```

#### Gemini Transcribe : Gogle Gemini --> Transcribe a recoding
``` bash
Model: gemini-2.5.flash or Flash Live
Input Type: Binary File
```

#### Gemini Summarize : Gogle Gemini --> Message a model
``` bash
Model: gemini-2.5.flash or Pro
Prompt: Transcript:  {{ $json.content.parts[0].text }}

--> Add Message
Prompt: 
Instruction: 
Summarize the audio content into plain text, following the structure below.
Rules:
The entire summary must not exceed 1500 characters.
Include and label all the following sections: title, summary, main_ points, action_items, follow_up, stories, references, arguments, related_topics.
Keep the style clear, concise, and organized.
Use short, natural-sounding bullet points for lists.
Example formtating:
title: Notion Button
Summary: A collection of buttons for Notion that streamline workflow and save time.
main_points:
- Overview of Notion buttons
- Example of button use cases
- Best practices for setup 
action_items:
- Test different button templates\n
- Implement buttons in daily workflows
- Share templates with team
follow_up:
- Explore advanced button integrations
- Gather team feedback on usage
stories:
- A team improved productivity by 30% using custom buttons
references:
- Official Notion documentation
- Community tutorials on Notion workflows
arguments:
- Buttons reduce repetitive tasks
- Custom buttons enhance flexibility
related_topics:
- Notion automations
- Workflow optimization
-Team collaboration tools
```

#### save to Notion : Notion --> Append a block
``` bash
Credential : Internal Integration Secret: 
parent Page : Notion's create page...
Title:{{ $('Google Drive Trigger').item.json.originalFilename }}

--> add Block
Type name: Heading1
Text:Summary

--> add Block
Type name: Paragraph
Rich Text: off
Text:{{ $json.content.parts[0].text }}

# error -> when data generate from Ai change --> The entire summary must not exceed 1200 characters.
Bad request - please check your parameters
body failed validation: body.children[1].paragraph.rich_text[0].text.content.length should be ≤ 2000, instead was 2406.
```

#### update to Notion database : Notion --> Create a database page
``` bash
# from node : Google Driver –> On change involving a specific Folder(Demo)
DataBase:From List: File Uploaded - Google Drive
--> Add Property
	key name or ID : Name 
	Title : {{ $json.originalFilename }}
--> Add Property
	key name or ID : File URL
	URL: {{ $json.webViewLink }}
```

#### get a google doc : Google Docs --> Get document
``` bash
# from node : Google Driver –> On change involving a specific Folder(n8n testing)
Doc ID or URL : {{ $json.id }}
```

#### precess by Gemini : Gemini --> Meessage a modem
``` bash
Model : gemini-2.5-flash 
Prompt: Summarise this content into 3-5 sentences: {{ $json.content }}

Tools : add Wikipedia
```

### workflow
#### Perplexity 
##### Smart Perlexity AI Agent
``` bash
On chat message :

Ai Agent 
  chat model: Google Gemini Chat model(gemini-2.5.flash)
  Tools: Perplexity Tool
         text : let the model define it

# input
chat input : "What are the 5 best AI tools for video editing until now (2025/08/08) 
```

##### Perlexity Node
``` bash
On chat message : 

Perplexity --> Message a model
	Model : Sonar or Sonar Pro more good
	text : {{ $json.action }}

# input
chat input : give me 5 marketing ai tools in 2005 
```

##### Perplexity Node(HTTP Request)
``` bash
On chat message : 

HTTP request
	URL: https://api.perplexity.ai/chat/completions
	Send Headers: Enabled
	Name: Authorization
	Value: Bearer YOUR_API_KEY
	Send Body: Enabled
	Body Content Type: JSON
	Specify Body: Using JSON
	JSON:
	{
		"model": "sonar",
		"messages": [
			{
			"role": "system",
			"content": "Be precise and concise."
			},
			{
			"role": "user",
			"content": ""{{ $json.chatInput }}"
			}
		]
	}

# input
chat input : give me 5 marketing ai tools in 2005 
```




### wait workflow 
+ if length limite add flow for it : Telegrame, Notion
+ Line Bot
+ Audio Transcribe : NotebookLM 
+ scan youtube some channge upgrade, down mp3 file

###  Ref
+ [n8n Cheat Sheet uploaded by Superb_Net_7426 on Reddit](https://www.reddit.com/r/n8n/comments/1jy1wdc/i_made_an_n8n_cheat_sheet/)
+ [Workflow Automation Templates](https://n8n.io/workflows/)
+ [Hostinger n8n VPS hosting](https://www.hostinger.com/vps/n8n-hosting): easiest to work
+ [n8n github](https://github.com/n8n-io/n8n)
+ [Awesome N8N: Top 100 Community Nodes](https://github.com/restyler/awesome-n8n)
+ [ Official n8n Update on Community Nodes](https://blog.n8n.io/community-nodes-available-on-n8n-cloud/)
+ [Prplexity API documentation - Sonar](https://docs.perplexity.ai/getting-started/models/models/sonar)


