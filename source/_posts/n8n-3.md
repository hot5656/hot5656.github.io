---
title: n8n - AI Agents, AI Automations & AI Voice Agents (2)<br> Business & Support AI Agents
abbrlink: 31d8
date: 2025-09-28 15:10:15
categories: AI
tags:
	- n8n
	- udemy
---

### workflow

<!--more-->

#### 11_107 Onboarding System Automation
``` bash
# n8n form
name
Email
Company Industry : Real Esltates
What do you want to achieve with us in 5 months : I would liked to increase my revenue by 300%

# path 1 ============
# Gemini --> Message a model 
Can you generate a warm and professional welcome email for a new client based on the information provided?
The message should be friendly, brief, and personalizedâ€”while still sounding professional.
It should reflect the clientâ€™s industry and their goals for our collaboration. Below is the clientâ€™s information:
Name: {{ $json.name }}
Email: {{ $json.Email }}
Company Industry: {{ $json['Company Industry'] }}
Goals for the Partnership: {{ $json['What do you want to achieve with us in 5 months'] }}
Make sure to always end the email with the following sign-off:
Best regards,
Bob Bob
VP of Internal Relations
ABC Corp
Do not use placeholders like [Your Name] or
[Your Contact Information] under any circumstances, even if some information is missing.
Return the result in 3 separate fields:
Subject: The emailâ€™s subject line
Body: The main email content
Email: {{ $json.Email }}

The output just include 3 fields for jason object: Subject,Body,Email

# Set Field
mail(object):{{ JSON.parse( $json.content.parts[0].text.replaceAll('`','').replaceAll('json', '')) }}

# Gmail --> send a message
To: {{ $json.mail.Email }}
Subject: {{ $json.mail.Subject }}
Message : {{ $json.mail.Body }}

# path 2 ============
# Gemini --> Message a model 
Use the client details below to generate a clear summary of their profile. Here is the information provided:
Name:{{ $json.name }}
Company Industry:{{ $json["Company Industry"] }}
Goals with Us: {{ $json["What do you want to achieve with us in 5 months"] }}
Return the following fields separately:
Name:{{ $json.name }}
Email:{{ $json.Email }}
Summary: A concise overview of the client based on the information provided above
The output just include 3 fields for jason object: Name,Emai,Summary


# Set Field
profile: {{ JSON.parse( $json.content.parts[0].text.replaceAll('`','').replaceAll('json', '')) }}

# shett --> Append row in sheet
Document : Client's Onboarding
Name:{{ $json.profile.Name }}
Email: {{ $json.profile.Email }}
Summary: {{ $json.profile.Summary }}
```

#### 11_108 Customer+Feedback+Sentiment+Analysis
```bash
# n8n form
name
Email
Feedback: 
  The service was excellent and the staff were very helpful
  The project delivery was delayed, and the communication was poor throughout

# Sendtiment Analysis 
Text to Analyze : {{ $json.Feedback }}
Sentiment Categories: Positive, Negative

# Positive path ============
# sheet --> append or update row
Document: Custom Feedback Form
Sheet: Positive
Column to match on: Email
Email (using to match): {{ $('On form submission').item.json.Email }}
Name: {{ $('On form submission').item.json.Name }}
Feedback: {{ $('On form submission').item.json.Feedback }}

# Basic LLM chain(Write Positive response)
Prompt (User Message):
You are a customer support representative for an AI automation Agency known as AdaptifyAI, specializing in helping small and medium enterprises implement AI Agents and AI Automation solutions. 

Write a friendly response to the customer feedback below. 
format as HTML email ans sign from Marc AdsptifyAI. 
Return by json format inciude 2 fields: title and email content. email content format as HTML and sign from Marc AdsptifyAI.
The jason not include ``` and json string

Customer Name:
{{ $json.Name }}
Feedback:
{{ $json.Feedback }}

# Set Field
email(Object): {{ JSON.parse($json.text) }}

# Gmail --> Send a merssage
To:{{ $('Sentiment Analysis').item.json.Email }}
Subject: {{ $json.email.title }}
Email Type: HTML
Message: {{ $json.email.email_content }}

# Nagetive Path ============
# Basic LLM chain(Suggests improvement)
Prompt (User Message):
You are a customer support representative for an AI automation Agency known as AdaptifyAI, specializing in helping small and medium enterprises implement AI Agents and AI Automation solutions. 

A client just submited feedback about our services which you can see below.
Please provide a concise suggestion on waht AdaptifyAI can do to address their concerns and improve client satisfaction in the future.

Customer Name:
{{ $json.Name }}
Feedback:
{{ $json.Feedback }}

# sheet --> append or update row
Document: Custom Feedback Form
Sheet: Negative
Column to match on: Email
Email (using to match): {{ $('On form submission').item.json.Email }}
Name: {{ $('On form submission').item.json.Name }}
Feedback: {{ $('On form submission').item.json.Feedback }}
AI Suggestion: {{ $json.text }}

# Basic LLM chain(Write Apology Response)
Prompt (User Message):
You are a customer support representative for an AI automation Agency known as AdaptifyAI, specializing in helping small and medium enterprises implement AI Agents and AI Automation solutions. 

Write a friendly and concise response to the customer feedback.
The email should thanks the client for their feedback about service and acknowledge their concerns, and inform that this has been escated to our management. Offer to extend their automation package with additional AI Agent integration at no extra charge. 

format as HTML email ans sign from Marc AdsptifyAI. 
Return by json format inciude 2 fields: title and email content. email content format as HTML and sign from Marc AdsptifyAI.

Customer Name:
{{ $json.Name }}
Feedback:
{{ $json.Feedback }}
+ Require Specific Output Format:  Enable
+ Structured Output Parser
  {
    "title":"",
    "email_content": ""
  }

# Gmail --> Send a merssage
To: {{ $('Add Negative feedback').item.json.Email }}
Subject: {{ $json.output.title }}
Email Type: HTML
Message: {{ $json.output.email_content }}
```

#### 11_109 Finance_Tracker
``` bash
# on chat message
  I bought a bike for 1500$ on June 16th
  I earned 2000$ on June 1st
  I receive 500$ from my side hustle on june 12th

# AI Agent
Prompt (User Message): {{ $json.chatInput }}
System Message: You are a helpful assistant. We are used to saving expenses or income. Always refer to the year 2025.
+ Memory: simple Memoty 
+ Tools: Call n8n Workflow Tool
  Description: Call this tool to save expenses or the income in the database
  Source:Database
  Workflow:By ID: å–æœ¬èº« workflow Id
  å¦‚ workflow:https://hot5656.app.n8n.cloud/workflow/qgzznD8Jh8XcXNda å– qgzznD8Jh8XcXNda

# set field
response : response {{ $('When chat message received').item.json.chatInput }}

# Execute sub_workflow --> when executed by another workflow ==== 
1. input data mode:Define using field below
first set mock data --> save
  [
    {
      "query": "I bought a bike for 1500$ on June 16th"
    }
  ]
2. æ¸¬è©¦ ok å¾Œ, set Input data mode:Accept all data
3. å†ç”±chatè¼¸å…¥å³å¯


# Informtion Extractor
Text : convert expense to JSON {{ $json.query }}
Attributes
  Name: cost
  Description: expense or income cost
  Required: enable

  Name: description
  Description: expense or income description
  Required: enable

  Name:Date
  Type:Date
  Description:date of the operation
  Required: enable

  Name:type 
  Description: either expense or income
  Required: enable

# sheet --> append a row
Document: My Expenses [Template]
Description: {{ $json.output.description }}
Cost:{{ $json.output.cost }}
Date: {{ $json.output.Date.toDateTime().format('yyyy-MM-dd') }}
Type: {{ $json.output["type "] }}
```

#### 11_110 Update Bella Vista KB(save docuemnt)
``` bash
# on from submission
Form Title: Upload the document to the knowledge base.
Form Elements:
	Filed Name: File
	Element type: File
	Required: Enable

# Simple Vector Store --> Add  documents to vector store
Operation Mode: Insert Documents
Memory Key: vector_store_key (ä¹Ÿå¯å¡«å…¶ä»–å€¼)
+ Embedding: Embeddings google Gemini/Embedding OpenAI(ç”¨ä¾†ç”Ÿæˆæ–‡æœ¬çš„å‘é‡åµŒå…¥)
+ Document: default Data lload
	Type of Data: Binary
	Mode: Load All Input Data
	Data Format: Automatically Detect by Mime Type
	Text Splitting :Simple
```

``` bash
# simple Vector Store --> supabase
# Postgres PGVector Store --> add document to vector store
Table Name: n8n_vectors
```

#### 11_110 Bella Vista Customer Bookings & Support 
``` bash
# on chat message
	do you support kid meal?
	I want to book a table

# AI Agent(Rachel)
System Message:
	## Role
	Your name is Rachel, a customer support agent for an Italian restaurant called Bella Vista.

	You are responsible for providing information about the restaurant using the knowledge base	system

	Please ensure your communication style is friendly and to the point

	## Tools
	When a customer wants to make a booking, follow these steps.

	Collect essentials details: customer name, email address, party size, preferred date and time, 	and special requests they may have.

	Please let the customer know that their booking request has been submitted to the restaurant, 	and they will receive a confirmation shortly.(the email must HTM format)

	When a customer wants to speak with a real person
	Get their name, email and phone number
	Use the Human Support tool to send their details and send a email tell their request was 	submitted, and staff will contact them soon.
+ Chat model: Google Gemini Chat model
+ Memory: 
+ Tools:
	Gmail Tool(Human support):
		To: kyp001@...
		Subject: auto
		Message: auto
	Gmail Tool(Making booking email):
		To: auto
		Subject: auto
		Message: auto
	Simple Vector Store(Bella Vista KB):
	Operation Mode: Retrieve Documents (As Tool for AI Agent)
		Description: Use this tool to retrieve documents related to the Bella Vista restaurant
		Memory Key: vector_store_key (æˆ–å¡«å°æ‡‰å€¼)
		+ Embedding: Embeddings google Gemini/Embedding OpenAI(ç”¨ä¾†ç”Ÿæˆæ–‡æœ¬çš„å‘é‡åµŒå…¥)
```

``` bash
# simple Vector Store --> supabase
# Postgres PGVector Store" ç¯€é»žæ˜¯ç”¨ä¾†èˆ‡ PostgreSQL è³‡æ–™åº«ä¸­çš„ PGVector æ“´å±•çµåˆï¼Œç®¡ç†å’Œæ“ä½œå‘é‡è³‡æ–™
# Postgres PGVector Store --> retrieve documents for AI Agent as Tool 
Description: Use this tool to fetch the document related to the restaurant knowledge base
Table Name: n8n_vectors
```

```bash
# on chat message
	manual triger --> Make Chat Publicly Availabl : enable(create a public URL)
	Mode: Hosted Chat
	Initial Message(s):
		Hi there! ðŸ‘‹
		My name is Nathan. How can I assist you today?
		===================
		<link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
		<script type="module">
			import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';
			createChat({ webhookUrl: 'YOUR_PRODUCTION_WEBHOOK_URL' });
		</script>
		===================


# put in web site
	Mode: Embedded Chat
	Reference Docuemnt:ã€€https://www.npmjs.com/package/@n8n/chat
# ask LLM the example 
	I use wordpress for my website, please integrate my n8n rag bot into my website, here is the official  documentation for doing this.
	https://www.npmjs.com/package/@n8n/chat


# set workflow active --> the the url can accept chat
```

#### 11_111 Build WhatsApp Ai Agent that Rembers You & Your Conversations
``` bash
# WahtsApp Business cloud --> On message(receive WhatsApp)
	Credential:
		Client ID: from æ‡‰ç”¨ç¨‹å¼è¨­å®š --> åŸºæœ¬è³‡æ–™'s æ‡‰ç”¨ç¨‹å¼ç·¨è™Ÿ
		Client Secret: from æ‡‰ç”¨ç¨‹å¼è¨­å®š --> åŸºæœ¬è³‡æ–™'s æ‡‰ç”¨ç¨‹å¼å¯†é‘°

# Supabase --> get many rows(get memory)
Table Name or ID: ChatMemory
Return All: Enable
Field Name or ID: sender - (string) (select database, å–å›žåŒä¸€äººè³‡æ–™)
Condition: Equals Field Value

# Aggregate (åˆä½µå¤šç­†è³‡æ–™ç‚ºä¸€ç­†)
Aggregate: All Item Data (Into a Single List)
Put Output in Field: ChatMemory (set output field name)
Include: Specified Fields (åªåˆä½µéœ€è¦çš„è³‡æ–™)
Fields To Include: message, created_at

# AI Agent
	Source for Prompt (User Message): 	Define below
	Prompt (User Message): {{ $('WhatsApp Trigger').item.json.messages[0].text.body }}
	System Message:
		# ROLE
		You are a friendly AI assistant.
		You are currently chatting with a user on WhatsApp.

		# RULES
		When the user sends a new message, check if they shared any 
		**important information** that should be **saved in memory** for later.

		If yes, use the Save Memory tool to save it.
		Do NOT tell the user that you are saving anything.

		Just keep the conversation going as usual.

		# Tools
		Use this tool to **store any important facts** shared by the user.
		Summarize the information clearly and pass it to this tool. 

		# Memories
		These are the **last saved facts** from the user (with date and time):
		{{ $json.ChatMemory.toJsonString() }}

		!! IMPORTANT !!
		Use this stored info when replying.
		If something is already saved, donâ€™t ask for it again.
		Keep your responses natural and friendly.
	+ Chat Model: Google Gemini Chat Model
	+ Tool: Supabase Tool
		Table Name or ID: ChatMemory (é¸æ“‡ DB)
		Data to Send: Define Below for Each Column
			Field Name or ID: message - (string)
			Field Value: auto
			
			Field Name or ID: sender - (string)
			Field Value: {{ $('WhatsApp Trigger').item.json.messages[0].from }}

			Field Name or ID: recipient - (string)
			Field Value: {{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}
		Credential:
			URL Data: Supabase --> Project Settings --> API's URL
			Service Role Secret: Supabase --> Project Settings --> Data API's service_rolesecret

# WahtsApp Business cloud -->send message(receive WhatsApp)
	Sender Phone Number (or ID): 	15556391873 - Test Number (æ¸¬è©¦ä¸­é¸æ“‡ Test Number)
	Recipient's Phone Number:	{{ $('WhatsApp Trigger').item.json.messages[0].from }}
	MessageType: 	Text
	Text Body: {{ $json.output }}
	Credential:
		Access Token: from API è¨­å®š - å­˜å–æ¬Šæ–
		Business Account ID: from API è¨­å®š - WhatsApp Business å¸³è™Ÿç·¨è™Ÿï¼š4189925184599952
```

#### 11_112 inbox manager - sort incoming Emails
+ [Cron Expression - Schedule Trigger node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger/#days-trigger-interval)

``` bash
# Gmail --> on message received
Poll Times
	Mode: Custom (è‡ªè¨‚ trigger time)
	Cron Expression: */15 * * * * (15 minutes)
	Simplify: Disable

# Filter(Label Checker) - æª¢æŸ¥æ˜¯å¦å« Label string
{{ $json.labelIds.join(',').includes('Label') }} "is false"

# AI Agent(Give a Label)
Prompt (User Message):
	Topic: {{ $json.subject }}
	Description: {{ $json.text }}
	Sender: {{ $json.from.text }}
Require Specific Output Format : Enable
System Message:
	** Your Role **
	You are an intelligent email assistant responsible for sorting incoming messages.
	Your task is to analyze the content, subject, and sender of each email and assign it to the appropriate categor
	y.

	** Categories **
	Categories for sorting:
	- priority: messages requiring immediate attention (from supervisors, clients)
	- business: correspondence related to current projects, contracts, meetings
	- newsletters: newsletter issues
	- administrative: invoices, contracts, formal documents
	- personal: private messages not related to work
	- notifications: messages from social media, Substack, Coinbase, YouTube
	- spam: unwanted messages, suspicious offers

	** Instructions **
	For each email:
	- Analyze the content, subject, and sender
	- Assign it to the appropriate category
	- Add a label with the category
	- If you are unsure, do not label the message

	** Response Format **
	Always return the result in JSON format:
	{
	"email_label": "business"
	}

	IMPORTANT â€“ the response must always be in lowercase.
+ Chat Mode: Google Gemini Chat Model
+ Output Parser: Structure Output Parser
	{
		"email_label": "business"
	}

# switch
	{{ $json.output.email_label }} "is equal to" priority
	Rename Output(Enable), Output Name: Priority

	{{ $json.output.email_label }} "is equal to" personal
	Rename Output(Enable), Output Name: Personal

	{{ $json.output.email_label }} "is equal to" notifications
	Rename Output(Enable), Output Name: Notifications

	{{ $json.output.email_label }} "is equal to" administrative
	Rename Output(Enable), Output Name: Administrative

	{{ $json.output.email_label }} "is equal to" business
	Rename Output(Enable), Output Name: Business

	{{ $json.output.email_label }} "is equal to" newsletters
	Rename Output(Enable), Output Name: Newsletters

	{{ $json.output.email_label }} "is equal to" spam
	Rename Output(Enable), Output Name: Spam

# Gmai --> add label to message(Priority) - å»º7å€‹ Priority,Personal ..
Message ID: {{ $('Gmail Trigger').item.json.id }}
Label Names or IDs: Priority (select, Gmail éœ€å…ˆå»º label)
```

#### 11_112 inbox manager - sort old Emails
``` bash
# manual trigger

# Gmail --> get many messages
# æŠ“æ¬Šä¸å¤ªè²»æ™‚é–“, get many message ä¸ support loop()-å¯ç”¨ HTTP Request éœ€è¦å†ç ”ç©¶,å…ˆåšæ¸¬è©¦
Return All: Disable
Limit: 10
Simplify: Disable
Filters: 
	Label Names or IDs: INBOX

# AI Agent(Give a Label)
System Message:(change below)
	** Instructions **
	For each email:
	- Analyze the content, subject, and sender
	- Assign it to the appropriate category
	- Add a label with the category
	- If you are unsure, do not label the message
	- output laso include email id from {{ $json.id }}

	** Response Format **
	Always return the result in JSON format:
	{
	"email_label": "business",
	"id":{{ $json.id }}
	}
+ Output Parser: Structure Output Parser
	{
	"email_label": "business",
	"id":""
	}

# Gmai --> add label to message(Priority) - å»º7å€‹ Priority,Personal ..
Message ID: {{ $json.output.id }}
Label Names or IDs: Priority (select, Gmail éœ€å…ˆå»º label)
```

#### 11_113 Analyze Resumes
``` bash
# Gmail --> on message receive
Poll Times:
	Mode: Every Hour
Simpllify: Disable
Filters --> Search: has:attachment filename:pdf
Options:
	Attachment Prefix: cv
	Download Attachments: Enable

# Text Classifier
Text to Classify:
	Email Classify:
		Email Title: {{ $json.subject }}
		Email Content: {{ $json.text }}
	Categories:
	Job application : if this email is a *Job Application* (for example, it includes a resume, CV, or a message applying for a job).
	Other : Emails that donâ€™t clearly fit into the other categories.
Categories:
	Category: Job application
	Description: Job application
	
	Category: Other
	Description: Other
Options
	System Prompt Template:(default is ok)
		"Please classify the text provided by the user into one of the following categories: {categories}, and use the provided formatting instructions below. Don't explain, and only output the json."
+ Model: Google Gemini Chat Model

# Google Drive --> upload file
Input Data Field Name: cv0 (å‚³ä¾† file name)
File Name: {{ $json.from.value[0].name }}_{{ $node['Text Classifier'].binary["cv0"].fileName }}
Parent Drive: My Drive
Parent Folder: Job_resume (å·²å»ºç›®éŒ„)

# Google Drive --> download file
File(By ID): {{ $json.id }}

# Extract from File --> Extract from PDF

# Information  Extractor
Text: {{ $json.text }}
Schema Type: Define using JSON Schema
Input Schema:
	{
		"type": "object",
		"properties": {
			"name": {
				"type": "string"
			},
			"email": {
				"type": "string",
				"format": "email"
			},
			"phone_number": {
				"type": "string",
				"pattern": "^(\\+\\d{1,3}[- ]?)?\\d{10}$"
			}
		},
		"required": ["name", "email", "phone_number"]
	}
+ Model: Google Gemini Chat Model

# AI Agent
Source for Prompt (User Message): Define below
Prompt (User Message) :
	Email title : {{ $('Gmail Trigger').item.json.subject }}
	Email content : {{ $('Gmail Trigger').item.json.text }}
	Resume: {{  $('Extract from File').item.json.text }} 
Require Specific Output Format: Enable
System Message:
	** Purpose **
	You are a CV Evaluation and Summarization Agent. Your task is to extract key information from a CV and output it in a clean, structured format.
	You must also evaluate how well the candidate fits a specified job role and assign a relevance score (1â€“10), followed by a short justification.

	** How It Works **
	When provided with a CV and job description, follow this process:

	1. Extract & Summarize Information from the CV

	- Educational Qualifications
	Include degrees, institutions, and graduation years. only output by 1 string field

	- Job History
	List job titles, company names, employment dates, and 1 short sentence summarizing key responsibilities or achievements.
	each Job histroy output by 1 string field and add job index, for example 1. , between job add \n 

	- Skill Set
	List technical, soft, or role-specific skills â€” separated by commas.


	2. Evaluate the Candidate for the Job Role

	- Compare the candidateâ€™s qualifications and experience with the job requirements.
	- Assign a score from 1â€“10 based on relevance:
	1â€“3: Weak match
	4â€“6: Moderate match
	7â€“8: Strong match
	9â€“10: Excellent match

	- Provide a brief justification for the score. Mention strengths and gaps directly related to the role â€” no assumptions or interpretations.

	- output as json format
+ Chat model:  Google Gemini Chat Model
+ Output Parse: Structured Output Parser
	{
			"applied_for": "",
		"educational_qualifications": "",
		"job_history": "",
			"skill_set": "",
			"score":2,
			"justification": ""
	}

# sheet --> append row in sheet
Document : List of candidates
Values to Send
	Name: {{ $('Information Extractor').item.json.output.name }}
	Email: {{ $('Information Extractor').item.json.output.email }}
	Number: {{ $('Information Extractor').item.json.output.phone_number }}
	Skill Set: {{ $json.output.skill_set }}
	Qualifications: {{ $json.output.educational_qualifications }}
	Job History: {{ $json.output.job_history }}
	Score : {{ $json.output.score }}
	Justification: {{ $json.output.justification }}
```

#### 11_114 Build AI Invoice Processing System
``` bash
# Gmail --> On message received(Gmail Trigger)
Poll Times:
	Mode: Every Hour
Simpllify: Disable
Filters --> Search: has:attachment filename:pdf
Options:
	Download Attachments: Enable

# Set Fieled
attachments(Array): {{$('Gmail Trigger').first().binary.keys()}}
message_id(String): {{ $json.id }}
 
# Split Out
Fields To Split Out: attachments
Include: All Other Fields

# Merge (å…©è€…åˆä½µæˆä¸€ç­†è³‡æ–™)
Mode: Combine
Combine By: Matching Fields
Fields To Match Have Different Names: Enable
Fields to Match:
	Input 1 Field: message_id
	Input 2 Field: id

# Google Drive --> upload file
Input Data Field Name: {{ $json.attachments }}
File Name: {{ $json.subject }}_{{ $json.attachments }}
Parent Drive: My Drive
Parent Folder: Invoices From Gmail(å·²å»ºç›®éŒ„)

# Google Drive --> download file
File(By ID): {{ $json.id }}

# Extra from File -> Extract from PDF

# Basic LLM Chain
Source for Prompt (User Message): Define below
Prompt (User Message): 
	"Based on the text decide if the text is about an invoice or not: {{ $json.text }}
	Make sure not have string "invoice" is invoice file, maybe just show some information about invoice 

	If yes return "yes", if no return "no". Don't provide any additional information. Use only small letters"
Require Specific Output Format: Enable
+ Model: Google Gemini Model
+ Output Parser: Structured Output Parser
	{
		"status": ""
	}

# if 
+ true: next
+ false: # Google Drive --> delete a file
	File(By ID): {{ $('Upload file').item.json.id }}

# Basic LLM Chain
Source for Prompt (User Message): Define below
Prompt (User Message): 
	## Task Overview
	Youâ€™ll receive raw text extracted from PDF invoices. Your job is to identify the key details listed below and return them in a structured JSON object.

	## Information to Capture
	+ invoice_name â€“ the identifier or title of the invoice
	+ company_name â€“ the name of the business that issued the invoice
	+ total_invoice_amount â€“ the grand total shown on the invoice
	+ line_items â€“ an array where each entry includes:
		+ description â€“ the item or service label
		+ amount â€“ the cost for that item

	Output Format (example)
	json
	{
		"invoice_name": "Invoice ABC-123",
		"company_name": "Acme Corp",
		"total_invoice_amount": 1000,
		"line_items": [
			{ 
				"description": "Consulting services", "amount": 100 
			},
			{ 
				"description": "Software license", "amount": 800 
			},
			{ 
				"description": "Sales tax", "amount": 100 
			}
		]
	}

	## Guidelines
	If any detail is missing or unclear, make your best estimate or use null.
	Provide the most specific line-item labels available; use generic placeholders only when no description exists.
	Verify that the line-item amounts add up to the total invoice amount (minor rounding differences are acceptable).

	Input Placeholder
	Text: {{ $('Extract from File').item.json.text }}{{ $('Extract from File').item.json.text }}
Require Specific Output Format: Enable
+ Model: Google Gemini Model
+ Output Parser: Structured Output Parser
{
  "invoice_name": "Invoice ABC-123",
  "company_name": "Acme Corp",
  "total_invoice_amount": 1000,
  "line_items": [
    { 
      "description": "Consulting services", "amount": 100 
    },
    { 
      "description": "Software license", "amount": 800 
    },
    { 
      "description": "Sales tax", "amount": 100 
    }
  ]
}

# Notion --> Create a database
Database: Invoice Tracking Database
Properties
	Key Name or ID: Subject
	Title: {{ $('Gmail Trigger').item.json.subject }}
	
	Key Name or ID: Email
	Text: {{ $('Gmail Trigger').item.json.from.value[0].address }}
	
	Key Name or ID: Invoice URL
	URL: {{ $('Upload file').item.json.webViewLink }}
	
	Key Name or ID: Amount
	Number: {{ $json.output.total_invoice_amount }}
 
# Set Field
line_items(Array): {{ $('Basic LLM Chain1').item.json.output.line_items }}
subject_id(String): {{ $json.id }}

# Split out
Fields To Split Out: line_items
Include: No Other Fields

# Notion --> Create a database
Properties
	Key Name or ID: Invoice Subject
	Title: {{ $('Gmail Trigger').item.json.subject }}
	
	Key Name or ID: Invoice Item
	Text: {{ $json.description }}
	
	Key Name or ID: Amount
	Number: {{ $json.amount }}
 

```


