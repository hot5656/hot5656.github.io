---
title: n8n - local setup
abbrlink: f059
date: 2025-06-19 09:44:22
categories: AI
tags:
	n8n
---

### 基本
#### 節點
+ 命令執行節點:執行特定任務
	+ 傳送郵件(Send Email)
	+ 創建紀錄(Create Record)
	+ 提出API要求(Make API Request)
	+ 取得問自訊息(Get Text Messages)
	+ 設定行事曆事件(Set CAlendar Event)
+ 資料傳輸節點:變更或處理傳輸中的資料
	+ 資料設定(Set):新增資料(Add fields),變更值(change values),減少資料(reduce data)
	+ 彙總(Aggregate):將資料合併為單一輸出
	+ 合併(Merge):結合兩個來源資料
+ 邏輯節點:條件決策
	+ If
	+ Switch
	+ Wait

<!--more-->

#### 
+ google cloud


### Issue 
#### windows container 不見了
``` bash
D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker ps -a
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker volume ls
DRIVER    VOLUME NAME
local     basic-sqlite_n8n_data

# fix container 不見了, -d 容器在背景執行, 終端機不會被佔用
D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker-compose up -d
[+] Running 5/5
 ✔ Network basic-sqlite_traefik-public  Created                            0.0s
 ✔ Network basic-sqlite_internal        Created                            0.0s
 ✔ Container basic-sqlite-n8n-1         Started                            0.8s
 ✔ Container basic-sqlite-traefik-1     Started                            0.7s
 ✔ Container basic-sqlite-ngrok-1       Started

# 只可以看到, container 以下的 image
D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker ps
CONTAINER ID   IMAGE                COMMAND                   CREATED          STATUS              PORTS                                                                          NAMES
00eed5ad2100   ngrok/ngrok:latest   "/nix/store/1qpvcjc0…"   15 minutes ago   Up About a minute   0.0.0.0:4040->4040/tcp, [::]:4040->4040/tcp                                    basic-sqlite-ngrok-1
08e122d2135a   traefik:latest       "/entrypoint.sh --pr…"   15 minutes ago   Up About a minute   0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   basic-sqlite-traefik-1
fb7cede0fd33   n8nio/n8n:latest     "tini -- /docker-ent…"   15 minutes ago   Up About a minute   0.0.0.0:5678->5678/tcp, [::]:5678->5678/tcp                                    basic-sqlite-n8n-1
```

### Install
#### Tool
+ Ngrok(安全隧道服務):免費但有流量限制
	+ 將localhost服務變成公開網址工具
	+ 建立安全加密通道，方便外部訪問
	+ 適合測試、演示、臨時共享
+ Trefix:反向代理服務器
	+ 智慧型網路流量總管，自動管理路由
	+ 簡單多個後端服務訪問入口
	+ 輕鬆實現 HTTPS 加密與負載平衡
+ n8n:AI自動化工作留
	+ 視覺化自動化平台，用節點串接服務與API
	+ 將AI能力嵌入日常工作流程
	+ 開源、可自行部署、掌握控制權

#### Template(模板)
1. Ngrok + Traefix + n8n + SQLITE
2. Ngrok + Traefix + n8n + PostgreSQL(PostgreSQL 工作流可以並行, 提升性能)
3. Ngrok + Traefix + n8n + PostgreSQL + pgAdminQL(pgAdminQL 為 PostgreSQL後台)



#### Windows Install
##### 安裝 Docker
不用登入(登入可有較多的下載,但目前只下載3個 Ngrok + Traefix + n8n,所以不用登入)

##### Ngrok setup
``` bash
1. 註冊登入(認證可 skip) --> Docker
2. "Static Domain" 按 Claim yout free static doman(即可產生 Ngrok 給的帳號網址)
3. url 即為 Ngrok 網址
4. copy NGROK_AUTHTOKEN and url, put to .env
	# Ngrok Settings
	NGROK_DOMAIN=your_ngrok_domain
	NGROK_AUTHTOKEN=your_ngrok_authtoken
```

<div style="max-width:700px">
	{% asset_img pic1.jpg pic1 %}
</div>

##### Trefix 設定密碼
+ 產生 MD5 密碼 : [Dan's Tools](https://www.md5hashgenerator.com/) 輸入任意字串,產生MD5 Hash

<div style="max-width:700px">
	{% asset_img pic2.jpg pic2 %}
</div>

+ copy MD5 Hash to .env

``` bash
TRAEFIK_DASHBOARD_PASSWORD_HASH=$$apr1$$MD5_Hash
```

##### 安裝 n8n(.env set already, 啟動模板)
``` bash
docker-compose up -d
```

##### 登入 n8n
+ 記的驗證,可提供一些功能以後使用
<div style="max-width:200px">
	{% asset_img pic3.jpg pic3 %}
</div>

+ local http://localhost:5678/ 或遠端使用 Ngrok url 登入




#### Ngro
##### register	
``` bash
	+ Testing Webhooks on local
	+ Docker -> Static Domain -> Claim your free static domain

docker run --net=host -it -e NGROK_AUTHTOKEN=2yhzB9ZU9VM02iQUbuvFd92DAEf_73B5rSVYaadFupDd4LboX ngrok/ngrok:latest http --url=fun-burro-trusted.ngrok-free.app 80

# entry address
https://fun-burro-trusted.ngrok-free.app/
```

``` bash
PS C:\Windows\system32> wsl --list
Windows 子系統 Linux 版發佈:
docker-desktop-data (預設值)
Ubuntu-20.04
PS C:\Windows\system32> wsl --update
正在安裝：Windows 子系統 Linux 版
已完成安裝 Windows 子系統 Linux 版。
PS C:\Windows\system32> wsl --list
WSL 正在完成升級...
Windows 子系統 Linux 版發佈:
docker-desktop-data (預設)
Ubuntu-20.04
PS C:\Windows\system32> wsl --list  --verbose
  NAME                   STATE           VERSION
* docker-desktop-data    Stopped         2
  Ubuntu-20.04           Stopped         2
PS C:\Windows\system32> wsl --version
WSL 版本： 2.5.9.0
核心版本： 6.6.87.2-1
WSLg 版本： 1.0.66
MSRDC 版本： 1.2.6074
Direct3D 版本： 1.611.1-81528511
DXCore 版本： 10.0.26100.1-240331-1435.ge-release
Windows 版本： 10.0.19045.5854
PS C:\Windows\system32>

D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker-compose pull
[+] Pulling 3/3
 ✘ ngrok Error Get "https://registry-1.docker.io/v2/": net/http: TLS handshake timeout                            14.5s
 ! n8n         Interrupted                                                                                        14.6s
 ! traefik     Interrupted                                                                                        14.6s
Error response from daemon: Get "https://registry-1.docker.io/v2/": net/http: TLS handshake timeout

D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>ping registry-1.docker.io

Ping registry-1.docker.io [44.208.254.194] (使用 32 位元組的資料):
要求等候逾時。

44.208.254.194 的 Ping 統計資料:
    封包: 已傳送 = 1，已收到 = 0, 已遺失 = 1 (100% 遺失)，




D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker ps -a
CONTAINER ID   IMAGE                COMMAND                   CREATED          STATUS          PORTS                                                                          NAMES
573eaf244e8b   ngrok/ngrok:latest   "/nix/store/1qpvcjc0…"   11 minutes ago   Up 11 minutes   0.0.0.0:4040->4040/tcp, [::]:4040->4040/tcp                                    basic-sqlite-ngrok-1
454593b3414e   traefik:latest       "/entrypoint.sh --pr…"   11 minutes ago   Up 11 minutes   0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   basic-sqlite-traefik-1
0a9da31e19ba   n8nio/n8n:latest     "tini -- /docker-ent…"   11 minutes ago   Up 11 minutes   0.0.0.0:5678->5678/tcp, [::]:5678->5678/tcp                                    basic-sqlite-n8n-1

# show n8n log
docker logs basic-sqlite-n8n-1

http://localhost:80（traefik）

http://localhost:4040（ngrok）

http://localhost:5678（n8n）
```

#### Mac Install
``` bash
https://www.youtube.com/watch?v=aDLsAGuG69c&list=PLHVtEmJ9fgyDWqtZ4I-8PPRXrHupm6_lq&index=4
```

#### 配備
+ 輕型:Nogrok+Traefik+n8n+SQLITE
+ 性能ok:Nogrok+Traefik+n8n+postgreSQL
+ 含管理數據::Nogrok+Traefik+n8n+postgreSQL+pgAdmin(postgreSQL管理)

#### 維護
+ n8n快速連結
+ 版本update/環境update
	docker compose pull
	yarm 檔案更新
+ 檔案備分
	docker volume export

``` bash
gaoyiping@gaoyipingdeMacBook-Pro minimal-postgres % docker --version
Docker version 28.1.1, build 4eba377

# RAG
enbedding Model:OpenAi,Google,microsoft 都有

compress HTML
```
###  參考
+ [微軟注音輸入法］如何輸入中文標點符號](https://www.tsjh.ntpc.edu.tw/p/404-1000-6387.php?Lang=zh-tw)
+ [本地安裝 n8n](https://www.youtube.com/watch?v=aDLsAGuG69c&list=PLHVtEmJ9fgyDWqtZ4I-8PPRXrHupm6_lq&index=4)
+ [n8n AI 實作0基礎入門到進階](https://www.youtube.com/watch?v=vvqhzbp4J5A&list=PLHVtEmJ9fgyDWqtZ4I-8PPRXrHupm6_lq&index=2)
+ [JSON Editor Online](https://jsoneditoronline.org/)

Ngrok , https://dashboard.ngrok.com/, google


+ container 不見了
D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker ps -a
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

D:\work_temp\to_run\basic-sqlite v1.0.2\basic-sqlite>docker volume ls
DRIVER    VOLUME NAME
local     basic-sqlite_n8n_data