<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hot5656.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"},"path":"/search.json","localsearch":{"enable":"enable","trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="說明 Nginx : 非同步框架的網頁伺服器，也可以用作反向代理、負載平衡器和HTTP快取">
<meta property="og:type" content="article">
<meta property="og:title" content="docker 說明">
<meta property="og:url" content="https://hot5656.github.io/2023/03/28/docker-1/index.html">
<meta property="og:site_name" content="Robert 雜記">
<meta property="og:description" content="說明 Nginx : 非同步框架的網頁伺服器，也可以用作反向代理、負載平衡器和HTTP快取">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2023-03-28T02:09:59.000Z">
<meta property="article:modified_time" content="2023-04-13T06:31:09.153Z">
<meta property="article:author" content="Robert Kao">
<meta property="article:tag" content="docker">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hot5656.github.io/2023/03/28/docker-1/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>
<title>docker 說明 | Robert 雜記</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Robert 雜記</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔列表</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AA%AA%E6%98%8E"><span class="nav-number">1.</span> <span class="nav-text">說明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Command"><span class="nav-number">2.</span> <span class="nav-text">Command</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#inatsll"><span class="nav-number">2.1.</span> <span class="nav-text">inatsll</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#inatsll-compose"><span class="nav-number">2.2.</span> <span class="nav-text">inatsll compose</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#search-docker-image-at-dockerhub"><span class="nav-number">2.3.</span> <span class="nav-text">search docker image at dockerhub</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#direct-run-image"><span class="nav-number">2.4.</span> <span class="nav-text">direct run image</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#image-save-to-a-file"><span class="nav-number">2.5.</span> <span class="nav-text">image save to a file</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#add-new-docker-image-tag-point-to-same-IMAGE-ID"><span class="nav-number">2.6.</span> <span class="nav-text">add new docker image tag(point to same IMAGE_ID)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rename-container"><span class="nav-number">2.7.</span> <span class="nav-text">rename container</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#show-container-logs"><span class="nav-number">2.8.</span> <span class="nav-text">show container logs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ENTRYPOINT-and-CMD"><span class="nav-number">2.9.</span> <span class="nav-text">ENTRYPOINT and CMD</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#network"><span class="nav-number">2.10.</span> <span class="nav-text">network</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#multiple-command"><span class="nav-number">2.11.</span> <span class="nav-text">multiple command</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete-network"><span class="nav-number">2.12.</span> <span class="nav-text">delete network</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#some-parameter-for-dockerfile"><span class="nav-number">2.13.</span> <span class="nav-text">some parameter for dockerfile</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#application"><span class="nav-number">3.</span> <span class="nav-text">application</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#run-dockerhub-docker-image"><span class="nav-number">3.1.</span> <span class="nav-text">run dockerhub docker image</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#containers-communication"><span class="nav-number">3.2.</span> <span class="nav-text">containers communication</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map-directory-to-container"><span class="nav-number">3.3.</span> <span class="nav-text">map directory to container</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#clone-volumes-from-other-container"><span class="nav-number">3.4.</span> <span class="nav-text">clone volumes from other container</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#create-image-by-container-modify"><span class="nav-number">3.5.</span> <span class="nav-text">create image by container modify</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#push-docker-image-to-dockerhub"><span class="nav-number">3.6.</span> <span class="nav-text">push docker image to dockerhub</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#create-image-by-docker-file"><span class="nav-number">3.7.</span> <span class="nav-text">create image by docker file</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#switch-user-in-container-not-root"><span class="nav-number">3.8.</span> <span class="nav-text">switch user in container(not root)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#run-docker-compose"><span class="nav-number">3.9.</span> <span class="nav-text">run docker compose</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#multiple-compose"><span class="nav-number">3.10.</span> <span class="nav-text">multiple compose</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#build-image-from-compose"><span class="nav-number">3.11.</span> <span class="nav-text">build image from compose</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Wrodpress-Mysql-componse"><span class="nav-number">3.12.</span> <span class="nav-text">Wrodpress + Mysql componse</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#REST-API"><span class="nav-number">3.13.</span> <span class="nav-text">REST API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CI-continuous-integration-with-github-and-dockerhub"><span class="nav-number">3.14.</span> <span class="nav-text">CI(continuous integration) with github and dockerhub</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#build-from-VirtualBox-share-folder"><span class="nav-number">3.15.</span> <span class="nav-text">build from VirtualBox share folder</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#other-build"><span class="nav-number">4.</span> <span class="nav-text">other build</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#awesome-compose-x2F-react-nginx"><span class="nav-number">4.1.</span> <span class="nav-text">awesome-compose&#x2F;react-nginx</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dockerizing-a-react-app"><span class="nav-number">4.2.</span> <span class="nav-text">dockerizing-a-react-app</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dockerfile-compare"><span class="nav-number">5.</span> <span class="nav-text">dockerfile compare</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1st-case"><span class="nav-number">5.1.</span> <span class="nav-text">1st case</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#build-by-host"><span class="nav-number">5.2.</span> <span class="nav-text">build by host</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#original"><span class="nav-number">5.2.1.</span> <span class="nav-text">original</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#copy-from-build-already"><span class="nav-number">5.2.2.</span> <span class="nav-text">copy from build already</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#simple-build"><span class="nav-number">5.2.3.</span> <span class="nav-text">simple build</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#the-image-size"><span class="nav-number">5.2.4.</span> <span class="nav-text">the image size</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tool"><span class="nav-number">6.</span> <span class="nav-text">Tool</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#dive"><span class="nav-number">6.1.</span> <span class="nav-text">dive</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#install"><span class="nav-number">6.1.1.</span> <span class="nav-text">install</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#run"><span class="nav-number">6.1.2.</span> <span class="nav-text">run</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ref"><span class="nav-number">7.</span> <span class="nav-text">Ref</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Robert Kao"
      src="/images/head.png">
  <p class="site-author-name" itemprop="name">Robert Kao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">170</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">66</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://hot5656.github.io/2023/03/28/docker-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.png">
      <meta itemprop="name" content="Robert Kao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Robert 雜記">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          docker 說明
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2023-03-28 10:09:59" itemprop="dateCreated datePublished" datetime="2023-03-28T10:09:59+08:00">2023-03-28</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2023-04-13 14:31:09" itemprop="dateModified" datetime="2023-04-13T14:31:09+08:00">2023-04-13</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2023/03/28/docker-1/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/03/28/docker-1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>52k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>47 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h3 id="說明"><a href="#說明" class="headerlink" title="說明"></a>說明</h3><ul>
<li>Nginx : 非同步框架的網頁伺服器，也可以用作反向代理、負載平衡器和HTTP快取</li>
</ul>
<span id="more"></span>

<h3 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h3><h4 id="inatsll"><a href="#inatsll" class="headerlink" title="inatsll"></a>inatsll</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Rancher&#x27;s Docker installation scripts</span></span><br><span class="line"><span class="comment"># install docker 20.10</span></span><br><span class="line">curl https://releases.rancher.com/install-docker/20.10.sh | sh</span><br><span class="line"><span class="comment"># check docker version</span></span><br><span class="line">docker version</span><br><span class="line">	Docker version 20.10.21, build baeda1f</span><br><span class="line"></span><br><span class="line"><span class="comment"># modify not add sudo for docker command</span></span><br><span class="line">kyp@u2204s:/demo$ sudo chmod 666 /var/run/docker.sock</span><br><span class="line"><span class="comment"># this is more importent</span></span><br><span class="line"><span class="comment"># remove group : sudo usermod -d vboxsf kyp</span></span><br><span class="line">kyp@u2204s:/demo$ sudo usermod -aG docker kyp</span><br><span class="line">  [sudo] password <span class="keyword">for</span> kyp:</span><br><span class="line">kyp@u2204s:/demo$ docker image ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># load docker insatll and see</span></span><br><span class="line">wget curl https://releases.rancher.com/install-docker/20.10.sh | sh</span><br><span class="line"><span class="comment"># see by nano</span></span><br><span class="line">nano 20.10.sh</span><br></pre></td></tr></table></figure>

<h4 id="inatsll-compose"><a href="#inatsll-compose" class="headerlink" title="inatsll compose"></a>inatsll compose</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install </span></span><br><span class="line">kyp@u2204s:~/v33$ sudo apt-get update</span><br><span class="line">	Hit:1 http://tw.archive.ubuntu.com/ubuntu focal InRelease</span><br><span class="line">	Hit:2 http://tw.archive.ubuntu.com/ubuntu focal-updates InRelease</span><br><span class="line">	Hit:3 http://tw.archive.ubuntu.com/ubuntu focal-backports InRelease</span><br><span class="line">	Hit:4 https://download.docker.com/linux/ubuntu focal InRelease</span><br><span class="line">	Hit:5 http://tw.archive.ubuntu.com/ubuntu focal-security InRelease</span><br><span class="line">	Reading package lists... Done</span><br><span class="line">kyp@u2204s:~/v33$ sudo apt-get install docker-compose-plugin</span><br><span class="line">	Reading package lists... Done</span><br><span class="line">	Building dependency tree</span><br><span class="line">	Reading state information... Done</span><br><span class="line">	docker-compose-plugin is already the newest version (2.17.2-1~ubuntu.20.04~focal).</span><br><span class="line">	0 upgraded, 0 newly installed, 0 to remove and 12 not upgraded.</span><br><span class="line"><span class="comment"># show version</span></span><br><span class="line">kyp@u2204s:~/v33$ docker compose version</span><br><span class="line">	Docker Compose version v2.17.2</span><br></pre></td></tr></table></figure>

<h4 id="search-docker-image-at-dockerhub"><a href="#search-docker-image-at-dockerhub" class="headerlink" title="search docker image at dockerhub"></a>search docker image at dockerhub</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">kyp@u2204s:~/app/my-app$ docker search ubuntu -f is-official=<span class="literal">true</span></span><br><span class="line">	NAME                 DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">	ubuntu               Ubuntu is a Debian-based Linux operating sys   15791     [OK]</span><br><span class="line">	websphere-liberty    WebSphere Liberty multi-architecture images    293       [OK]</span><br><span class="line">	ubuntu-upstart       DEPRECATED, as is Upstart (find other proces   112       [OK]</span><br><span class="line">	neurodebian          NeuroDebian provides neuroscience research s   99        [OK]</span><br><span class="line">	open-liberty         Open Liberty multi-architecture images based   59        [OK]</span><br><span class="line">	ubuntu-debootstrap   DEPRECATED; use <span class="string">&quot;ubuntu&quot;</span> instead                50        [OK]</span><br><span class="line"></span><br><span class="line"><span class="comment"># see image layer (need pull 1st)</span></span><br><span class="line">kyp@u2204s:~/v1$ docker pull node:16-alpine</span><br><span class="line">	16-alpine: Pulling from library/node</span><br><span class="line">	f56be85fc22e: Pull complete</span><br><span class="line">	4e21e25411da: Pull complete</span><br><span class="line">	9890dc0be345: Pull complete</span><br><span class="line">	61d1890b04b0: Pull complete</span><br><span class="line">	Digest: sha256:b4a72f83f52bbe3970bb74a15e44ec4cf6e873ad4787473dfc8a26f5b4e29dd2</span><br><span class="line">	Status: Downloaded newer image <span class="keyword">for</span> node:16-alpine</span><br><span class="line">	docker.io/library/node:16-alpine</span><br><span class="line">kyp@u2204s:~/v1$ docker <span class="built_in">history</span> node:16-alpine</span><br><span class="line">	IMAGE          CREATED      CREATED BY                                      SIZE      COMMENT</span><br><span class="line">	8cf71856f96e   7 days ago   /bin/sh -c <span class="comment">#(nop)  CMD [&quot;node&quot;]                 0B</span></span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c <span class="comment">#(nop)  ENTRYPOINT [&quot;docker-entry   0B</span></span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c <span class="comment">#(nop) COPY file:4d192565a7220e13   388B</span></span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c apk add --no-cache --virtual .bui   7.77MB</span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c <span class="comment">#(nop)  ENV YARN_VERSION=1.22.19     0B</span></span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c addgroup -g 1000 node     &amp;&amp; addu   102MB</span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c <span class="comment">#(nop)  ENV NODE_VERSION=16.20.0     0B</span></span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c <span class="comment">#(nop)  CMD [&quot;/bin/sh&quot;]              0B</span></span><br><span class="line">	&lt;missing&gt;      7 days ago   /bin/sh -c <span class="comment">#(nop) ADD file:9a4f77dfaba7fd2aa   7.05MB</span></span><br><span class="line"><span class="comment"># see image layer all descript</span></span><br><span class="line">docker <span class="built_in">history</span> --no-trunc node:16-alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># direct run the enter shell</span></span><br><span class="line">docker run -it node:16-alpine sh</span><br></pre></td></tr></table></figure>

<h4 id="direct-run-image"><a href="#direct-run-image" class="headerlink" title="direct run image"></a>direct run image</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run and enter shell</span></span><br><span class="line">docker run -it ubuntu bash</span><br></pre></td></tr></table></figure>

<h4 id="image-save-to-a-file"><a href="#image-save-to-a-file" class="headerlink" title="image save to a file"></a>image save to a file</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list image</span></span><br><span class="line">docker images</span><br><span class="line">	REPOSITORY   TAG         IMAGE ID       CREATED          SIZE</span><br><span class="line">	react-app1   latest      92d8fb9b8254   17 seconds ago   258MB</span><br><span class="line">	node         16-alpine   8cf71856f96e   2 weeks ago      117MB</span><br><span class="line"><span class="comment"># save to file</span></span><br><span class="line">docker save react-app1 &gt; react-app1.tar</span><br><span class="line">du -sh react-app1.tar</span><br><span class="line">	266M    react-app1.tar</span><br><span class="line"><span class="comment"># remove all image</span></span><br><span class="line">docker rmi -f $(docker image ls -a -q)</span><br><span class="line">docker images</span><br><span class="line">	REPOSITORY   TAG       IMAGE ID   CREATED   SIZE</span><br><span class="line"><span class="comment"># 展開 image tar</span></span><br><span class="line">	f1417ff83b31: Loading layer  7.338MB/7.338MB</span><br><span class="line">	1d8bcb7a961e: Loading layer  104.8MB/104.8MB</span><br><span class="line">	b951f8a113f5: Loading layer  7.806MB/7.806MB</span><br><span class="line">	3cddc64f59e2: Loading layer  3.584kB/3.584kB</span><br><span class="line">	a93e00947ff6: Loading layer  2.048kB/2.048kB</span><br><span class="line">	4d9eba5ebde1: Loading layer  25.33MB/25.33MB</span><br><span class="line">	70c82472bdf8: Loading layer  133.1MB/133.1MB</span><br><span class="line">	879d9422df55: Loading layer    150kB/150kB</span><br><span class="line">	Loaded image: react-app1:latest</span><br><span class="line">docker images</span><br><span class="line">	REPOSITORY   TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">	react-app1   latest    92d8fb9b8254   16 minutes ago   258MB</span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">docker run -d -p 3000:3000 react-app1</span><br><span class="line"></span><br><span class="line"><span class="comment"># http://192.168.126.187:3000/</span></span><br></pre></td></tr></table></figure>

<h4 id="add-new-docker-image-tag-point-to-same-IMAGE-ID"><a href="#add-new-docker-image-tag-point-to-same-IMAGE-ID" class="headerlink" title="add new docker image tag(point to same IMAGE_ID)"></a>add new docker image tag(point to same IMAGE_ID)</h4><p>docker image tag robert:v1 application:1.0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list image</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker image ls</span><br><span class="line">	REPOSITORY   TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">	robert       v1        0fef41bffdcf   9 minutes ago   162MB</span><br><span class="line">	nginx        latest    080ed0ed8312   8 hours ago     142MB</span><br><span class="line"><span class="comment"># add new docker image tag</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker image tag robert:v1 application:1.0</span><br><span class="line">kyp@u2204s:/demo$ sudo docker image ls</span><br><span class="line">	REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">	application   1.0       0fef41bffdcf   9 minutes ago   162MB</span><br><span class="line">	robert        v1        0fef41bffdcf   9 minutes ago   162MB</span><br><span class="line">	nginx         latest    080ed0ed8312   8 hours ago     142MB</span><br></pre></td></tr></table></figure>

<h4 id="rename-container"><a href="#rename-container" class="headerlink" title="rename container"></a>rename container</h4><p>docker container rename c5 frontend</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># same &quot;docker ps&quot; </span></span><br><span class="line">kyp@u2204s:/demo$ docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE       COMMAND                  CREATED             STATUS             PORTS     NAMES</span><br><span class="line">	8d58bf58306b   robert:v1   <span class="string">&quot;/docker-entrypoint.&quot;</span>   About an hour ago   Up About an hour   80/tcp    c5</span><br><span class="line"><span class="comment"># rename container</span></span><br><span class="line">kyp@u2204s:/demo$ docker container rename c5 frontend</span><br><span class="line">kyp@u2204s:/demo$ docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE       COMMAND                  CREATED             STATUS             PORTS     NAMES</span><br><span class="line">	8d58bf58306b   robert:v1   <span class="string">&quot;/docker-entrypoint.&quot;</span>   About an hour ago   Up About an hour   80/tcp    frontend</span><br></pre></td></tr></table></figure>

<h4 id="show-container-logs"><a href="#show-container-logs" class="headerlink" title="show container logs"></a>show container logs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kyp@u2204s:&#x2F;demo$ docker logs c10</span><br><span class="line">AH00558: apache2: Could not reliably determine the server&#39;s fully qualified domain name, using 172.17.0.3. Set the &#39;ServerName&#39; directive globally to suppress this message</span><br></pre></td></tr></table></figure>

<h4 id="ENTRYPOINT-and-CMD"><a href="#ENTRYPOINT-and-CMD" class="headerlink" title="ENTRYPOINT and CMD"></a>ENTRYPOINT and CMD</h4><p>CMD can by overwrite, but ENTRYPOINT not</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dockerfile - CMD</span></span><br><span class="line">kyp@u2204s:~/v1$ cat dockerfile</span><br><span class="line">	FROM ubuntu</span><br><span class="line">	RUN apt update</span><br><span class="line">	CMD     [<span class="string">&quot;echo&quot;</span>, <span class="string">&quot;CMD&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># build image</span></span><br><span class="line">kyp@u2204s:~/v1$ docker build -t v1 .</span><br><span class="line">kyp@u2204s:~/v1$ docker image ls</span><br><span class="line">	REPOSITORY     TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">	v1             latest    657c10191368   44 seconds ago   121MB</span><br><span class="line">	apache2        4.0       bc6570680688   30 minutes ago   228MB</span><br><span class="line">	testdemo3      1.0       aa38a211dffd   16 hours ago     228MB</span><br><span class="line">	hot5656/<span class="built_in">test</span>   1.0       0fef41bffdcf   19 hours ago     162MB</span><br><span class="line">	robert         v1        0fef41bffdcf   19 hours ago     162MB</span><br><span class="line">	nginx          latest    080ed0ed8312   27 hours ago     142MB</span><br><span class="line">	ubuntu         latest    08d22c0ceb15   3 weeks ago      77.8MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">kyp@u2204s:~/v1$ docker run -it v1:latest</span><br><span class="line">	CMD</span><br><span class="line">kyp@u2204s:~/v1$ docker run -it v1:latest whoami</span><br><span class="line">	root</span><br><span class="line">kyp@u2204s:~/v1$ docker run -it v1:latest <span class="built_in">pwd</span></span><br><span class="line">	/</span><br><span class="line"></span><br><span class="line"><span class="comment"># dockerfile - ENTRYPOINT</span></span><br><span class="line">kyp@u2204s:~/v2$ cat ./dockerfile</span><br><span class="line">	FROM ubuntu</span><br><span class="line">	RUN apt update</span><br><span class="line">	ENTRYPOINT      [<span class="string">&quot;echo&quot;</span>, <span class="string">&quot;CMD&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># build image</span></span><br><span class="line">kyp@u2204s:~/v2$ docker build -t v2 .</span><br><span class="line"></span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">kyp@u2204s:~/v2$ docker run -it v2:latest</span><br><span class="line">	CMD</span><br><span class="line">kyp@u2204s:~/v2$ docker run -it v2:latest ls -al</span><br><span class="line">	CMD ls -al</span><br><span class="line">kyp@u2204s:~/v2$ docker run -it v2:latest <span class="built_in">pwd</span></span><br><span class="line">	CMD <span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>

<h4 id="network"><a href="#network" class="headerlink" title="network"></a>network</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create docker network </span></span><br><span class="line">  robert@ununtu220402:~$ sudo docker network create --driver=bridge --subnet=192.168.10.0/24 --gateway=192.168.10.10 <span class="built_in">test</span></span><br><span class="line">  267432fb1cbb872b4a6079a7d7488db86d6bc0fa47144983fcd66b48b6e47ec6</span><br><span class="line"><span class="comment"># display docker network</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker network list</span><br><span class="line">  NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">  f693fe394599   bridge    bridge    <span class="built_in">local</span></span><br><span class="line">  7102b42969ff   host      host      <span class="built_in">local</span></span><br><span class="line">  2ff6001e5549   none      null      <span class="built_in">local</span></span><br><span class="line">  267432fb1cbb   <span class="built_in">test</span>      bridge    <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># another container for cl2</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker run -itd --name cl2 --network <span class="built_in">test</span> nginx</span><br><span class="line"><span class="comment"># inspect network</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker inspect <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<h4 id="multiple-command"><a href="#multiple-command" class="headerlink" title="multiple command"></a>multiple command</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#delete multi container</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker rm -f $(sudo docker container ls -a -q)</span><br><span class="line"><span class="comment">#delete multi image</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker rmi -f $(sudo docker image ls -a -q)</span><br></pre></td></tr></table></figure>

<h4 id="delete-network"><a href="#delete-network" class="headerlink" title="delete network"></a>delete network</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list network and container </span></span><br><span class="line">kyp@u2204s:~$ docker network ls</span><br><span class="line">  NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">  423837e7274a   bridge    bridge    <span class="built_in">local</span></span><br><span class="line">  91fa76507520   host      host      <span class="built_in">local</span></span><br><span class="line">  c48b89fb08d9   none      null      <span class="built_in">local</span></span><br><span class="line">  486cf88f917d   <span class="built_in">test</span>      bridge    <span class="built_in">local</span></span><br><span class="line">kyp@u2204s:~$ docker container ls</span><br><span class="line">  CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS       PORTS                                   NAMES</span><br><span class="line">  a64306987152   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   5 hours ago   Up 5 hours   0.0.0.0:8082-&gt;80/tcp, :::8082-&gt;80/tcp   c2</span><br><span class="line">  eb9f2a857dfa   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   6 hours ago   Up 6 hours   0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   c1</span><br><span class="line"></span><br><span class="line"><span class="comment"># the container use network test,so need stop container befor remove network</span></span><br><span class="line">kyp@u2204s:~$ docker stop c1</span><br><span class="line">  c1</span><br><span class="line">kyp@u2204s:~$ docker stop c2</span><br><span class="line">  c2</span><br><span class="line"><span class="comment"># delete network test</span></span><br><span class="line">kyp@u2204s:~$ docker network rm <span class="built_in">test</span></span><br><span class="line">  <span class="built_in">test</span></span><br><span class="line">kyp@u2204s:~$ docker network ls</span><br><span class="line">  NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">  423837e7274a   bridge    bridge    <span class="built_in">local</span></span><br><span class="line">  91fa76507520   host      host      <span class="built_in">local</span></span><br><span class="line">  c48b89fb08d9   none      null      <span class="built_in">local</span></span><br></pre></td></tr></table></figure>

<h4 id="some-parameter-for-dockerfile"><a href="#some-parameter-for-dockerfile" class="headerlink" title="some parameter for dockerfile"></a>some parameter for dockerfile</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FROM</span></span><br><span class="line"><span class="comment"># RUN</span></span><br><span class="line"><span class="comment"># ENTRYPOINT</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># USER</span></span><br><span class="line"><span class="comment"># 指定執行時的 user</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CMD  </span></span><br><span class="line"><span class="comment"># docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span></span><br><span class="line"><span class="comment"># [COMMAND] 指的就是 CMD</span></span><br><span class="line">	CMD [<span class="string">&quot;/bin/sh&quot;</span>]</span><br><span class="line">	CMD [<span class="string">&quot;php&quot;</span>, <span class="string">&quot;-a&quot;</span>]</span><br><span class="line">	ocker run --rm -it alpine:3.12 /bin/sh</span><br><span class="line">	docker run --rm -it php:7.4-alpine php -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># ARG </span></span><br><span class="line"><span class="comment"># ARG在build時候是可以從外部以--build-arg帶入的變數</span></span><br><span class="line"><span class="comment"># dockerfile</span></span><br><span class="line">	From resin/rpi-raspbian</span><br><span class="line">	ARG NODE_VER</span><br><span class="line">	ADD ./<span class="variable">$&#123;NODE_VER:-node-v5.9.1-linux-armv7l&#125;</span> /</span><br><span class="line">	RUN ln -s /<span class="variable">$&#123;NODE_VER&#125;</span> /node</span><br><span class="line">	ENV PATH=/node/bin:<span class="variable">$PATH</span></span><br><span class="line">	CMD [<span class="string">&quot;node&quot;</span>]</span><br><span class="line"><span class="comment"># build</span></span><br><span class="line">	docker build --build-arg NODE_VER=node-v5.9.0-linux-armv7l .</span><br><span class="line"></span><br><span class="line"><span class="comment"># WORKDIR			/tmp</span></span><br><span class="line"><span class="comment"># 工作執行目錄</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># COPY				copy the content from source to Destination</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ADD					It can be URL/LINK</span></span><br><span class="line"><span class="comment"># 相似 COPY, 但可以是 url or tar 解黨</span></span><br><span class="line">	ADD http://example.com/font.js /opt/</span><br><span class="line">	ADD my_big_lib.tar.gz /var/lib/myapp</span><br><span class="line"></span><br><span class="line"><span class="comment"># ENV					key=value user=robert</span></span><br><span class="line"><span class="comment">#	ENV是在build的時候，可以定義一些變數，讓後面指令在執行時候可以參考</span></span><br><span class="line">	From resin/rpi-raspbian</span><br><span class="line">	ENV NODE_VER=node-v5.9.1-linux-armv7l</span><br><span class="line">	ADD ./<span class="variable">$&#123;NODE_VER&#125;</span> /</span><br><span class="line">	RUN ln -s /<span class="variable">$&#123;NODE_VER&#125;</span> /node</span><br><span class="line">	ENV PATH=/node/bin:<span class="variable">$PATH</span></span><br><span class="line">	CMD [<span class="string">&quot;node&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># MAINTAINER	robert</span></span><br><span class="line"><span class="comment"># 用來說明，撰寫和維護這個 Dockerfile 的人是誰，也可以給 E-mail的資訊</span></span><br><span class="line">	MAINTAINER jack</span><br><span class="line"></span><br><span class="line"><span class="comment"># EXPOSE			80</span></span><br><span class="line"><span class="comment"># 宣告在執行 Docker Container時需要把它開放出去</span></span><br></pre></td></tr></table></figure>

<h3 id="application"><a href="#application" class="headerlink" title="application"></a>application</h3><h4 id="run-dockerhub-docker-image"><a href="#run-dockerhub-docker-image" class="headerlink" title="run dockerhub docker image"></a>run dockerhub docker image</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pull nginx</span></span><br><span class="line">robert@ununtu220402:~$ docker pull nginx</span><br><span class="line">  Using default tag: latest</span><br><span class="line">  Got permission denied <span class="keyword">while</span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post <span class="string">&quot;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/images/create?fromImage=nginx&amp;tag=latest&quot;</span>: dial unix /var/run/docker.sock: connect: permission denied</span><br><span class="line">  robert@ununtu220402:~$ sudo docker pull nginx</span><br><span class="line">  Using default tag: latest</span><br><span class="line">  latest: Pulling from library/nginx</span><br><span class="line">  f1f26f570256: Pull complete </span><br><span class="line">  84181e80d10e: Pull complete </span><br><span class="line">  1ff0f94a8007: Pull complete </span><br><span class="line">  d776269cad10: Pull complete </span><br><span class="line">  e9427fcfa864: Pull complete </span><br><span class="line">  d4ceccbfc269: Pull complete </span><br><span class="line">  Digest: sha256:f4e3b6489888647ce1834b601c6c06b9f8c03dee6e097e13ed3e28c01ea3ac8c</span><br><span class="line">  Status: Downloaded newer image <span class="keyword">for</span> nginx:latest</span><br><span class="line">  docker.io/library/nginx:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># list image</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker image ls</span><br><span class="line">  REPOSITORY   TAG       IMAGE ID       CREATED      SIZE</span><br><span class="line">  nginx        latest    ac232364af84   4 days ago   142MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker run -itd nginx</span><br><span class="line">  2c2b3ab3539953f9587706a37f4afa9206853cce794b098c56a13a9007d9a54a</span><br><span class="line"></span><br><span class="line"><span class="comment"># list container</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker container ls</span><br><span class="line">  CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES</span><br><span class="line">  2c2b3ab35399   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   2 minutes ago   Up 2 minutes   80/tcp    elastic_hodgkin</span><br><span class="line"></span><br><span class="line"><span class="comment"># container stop</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker stop elastic_hodgkin</span><br><span class="line">  elastic_hodgkin</span><br><span class="line"></span><br><span class="line"><span class="comment"># run 2nd times</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker run -itd nginx</span><br><span class="line">  7be82924063d482c40334ed6e79e94af9694e1ac6c1ca8568f3429b3a98ee83b</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove stop container</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker rm elastic_hodgkin</span><br><span class="line">  elastic_hodgkin</span><br><span class="line"></span><br><span class="line"><span class="comment"># list container</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker container ls</span><br><span class="line">  CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES</span><br><span class="line">  7be82924063d   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   4 minutes ago   Up 4 minutes   80/tcp    pensive_swanson</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># force remove container </span></span><br><span class="line">robert@ununtu220402:~$ sudo docker rm -f pensive_swanson</span><br><span class="line">  pensive_swanson</span><br><span class="line"></span><br><span class="line"><span class="comment"># list docker image</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker image ls</span><br><span class="line">  REPOSITORY   TAG       IMAGE ID       CREATED      SIZE</span><br><span class="line">  nginx        latest    ac232364af84   4 days ago   142MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># detete image</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker rmi nginx</span><br><span class="line">  Untagged: nginx:latest</span><br><span class="line">  Untagged: nginx@sha256:f4e3b6489888647ce1834b601c6c06b9f8c03dee6e097e13ed3e28c01ea3ac8c</span><br><span class="line">  Deleted: sha256:ac232364af842735579e922641ae2f67d5b8ea97df33a207c5ea05f60c63a92d</span><br><span class="line">  Deleted: sha256:31888883f307f2ea78ac1dd1abd26ddae38ebe9aacfbb0250995a636b8531d8f</span><br><span class="line">  Deleted: sha256:d413a106f5d462ce56547539d6e8a6402a38631e8312690144be16c2101dda74</span><br><span class="line">  Deleted: sha256:64ee442aa082c659c502136dbcc60998aa970f569ff26b0098d4e7c463623660</span><br><span class="line">  Deleted: sha256:a7a27d87cf3ba004765cbb692a4584256dcd1eb7aff0049f8e1d4d45a3e50e4d</span><br><span class="line">  Deleted: sha256:cc6b5ded0d53019de2911c55226548c7707a29af8cd6a90eb51a437255aa0b42</span><br><span class="line">  Deleted: sha256:3af14c9a24c941c626553628cf1942dcd94d40729777f2fcfbcd3b8a3dfccdd6</span><br><span class="line"></span><br><span class="line"><span class="comment"># check docker image remove already</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker image ls</span><br><span class="line">  REPOSITORY   TAG       IMAGE ID   CREATED   SIZE</span><br><span class="line"></span><br><span class="line"><span class="comment"># image not in local, auto load and run</span></span><br><span class="line">robert@ununtu220402:~$ sudo docker run -itd --name cl nginx</span><br><span class="line">  Unable to find image <span class="string">&#x27;nginx:latest&#x27;</span> locally</span><br><span class="line"></span><br><span class="line">  latest: Pulling from library/nginx</span><br><span class="line">  f1f26f570256: Pull complete </span><br><span class="line">  84181e80d10e: Pull complete </span><br><span class="line">  1ff0f94a8007: Pull complete </span><br><span class="line">  d776269cad10: Pull complete </span><br><span class="line">  e9427fcfa864: Pull complete </span><br><span class="line">  d4ceccbfc269: Pull complete </span><br><span class="line">  Digest: sha256:f4e3b6489888647ce1834b601c6c06b9f8c03dee6e097e13ed3e28c01ea3ac8c</span><br><span class="line">  Status: Downloaded newer image <span class="keyword">for</span> nginx:latest</span><br><span class="line">  1d7e7bce6be6e42cbc3e35536a04887abda55cb2617aa897fbb24ca49ace8b5c</span><br><span class="line"></span><br><span class="line"><span class="comment"># list docker container </span></span><br><span class="line">robert@ununtu220402:~$ sudo docker container ls</span><br><span class="line">  CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">  1d7e7bce6be6   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   32 seconds ago   Up 23 seconds   80/tcp    cl</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove docker container </span></span><br><span class="line">robert@ununtu220402:~$ sudo docker rm -f cl</span><br><span class="line">  cl</span><br><span class="line">robert@ununtu220402:~$ sudo docker container ls</span><br><span class="line">  CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line"><span class="comment"># start image and map port to 8081</span></span><br><span class="line">kyp@u2204s:~$ docker run -itd --name c1 -p 8081:80 nginx</span><br><span class="line">  eb9f2a857dfac9d39c3597a4d02657e01c6985c087dadbe96b393dfb264d2667</span><br><span class="line">kyp@u2204s:~$ docker container ls</span><br><span class="line">  CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                   NAMES</span><br><span class="line">  eb9f2a857dfa   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   5 seconds ago   Up 3 seconds   0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   c1</span><br><span class="line"></span><br><span class="line"><span class="comment"># browser : http://192.168.18.6:8081/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># show log by id</span></span><br><span class="line">kyp@u2204s:~$ docker logs eb9f2a857dfac</span><br><span class="line">  /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration</span><br><span class="line">  /docker-entrypoint.sh: Looking <span class="keyword">for</span> shell scripts <span class="keyword">in</span> /docker-entrypoint.d/</span><br><span class="line">  /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh</span><br><span class="line">  ......</span><br><span class="line"></span><br><span class="line"><span class="comment"># show log by name</span></span><br><span class="line">kyp@u2204s:~$ docker logs c1</span><br><span class="line">  /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration</span><br><span class="line">  /docker-entrypoint.sh: Looking <span class="keyword">for</span> shell scripts <span class="keyword">in</span> /docker-entrypoint.d/</span><br><span class="line">  ......</span><br><span class="line"></span><br><span class="line"><span class="comment"># show container detail </span></span><br><span class="line">kyp@u2204s:~$ docker inspect c1</span><br><span class="line">  [</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="string">&quot;Id&quot;</span>: <span class="string">&quot;eb9f2a857dfac9d39c3597a4d02657e01c6985c087dadbe96b393dfb264d2667&quot;</span>,</span><br><span class="line">          <span class="string">&quot;Created&quot;</span>: <span class="string">&quot;2023-04-05T08:07:13.76917322Z&quot;</span>,</span><br><span class="line">          <span class="string">&quot;Path&quot;</span>: <span class="string">&quot;/docker-entrypoint.sh&quot;</span>,</span><br><span class="line">          <span class="string">&quot;Args&quot;</span>: [</span><br><span class="line">              <span class="string">&quot;nginx&quot;</span>,</span><br><span class="line">              <span class="string">&quot;-g&quot;</span>,</span><br><span class="line">              <span class="string">&quot;daemon off;&quot;</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">&quot;State&quot;</span>: &#123;</span><br><span class="line">              <span class="string">&quot;Status&quot;</span>: <span class="string">&quot;running&quot;</span>,</span><br><span class="line">              <span class="string">&quot;Running&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="string">&quot;Paused&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="string">&quot;Restarting&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="string">&quot;OOMKilled&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="string">&quot;Dead&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="string">&quot;Pid&quot;</span>: 7023,</span><br><span class="line">              <span class="string">&quot;ExitCode&quot;</span>: 0,</span><br><span class="line">              <span class="string">&quot;Error&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">              <span class="string">&quot;StartedAt&quot;</span>: <span class="string">&quot;2023-04-05T08:07:14.822503331Z&quot;</span>,</span><br><span class="line">              <span class="string">&quot;FinishedAt&quot;</span>: <span class="string">&quot;0001-01-01T00:00:00Z&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">  ......</span><br><span class="line"></span><br><span class="line"><span class="comment"># show image detail</span></span><br><span class="line">kyp@u2204s:~$ docker inspect nginx</span><br><span class="line">  [</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="string">&quot;Id&quot;</span>: <span class="string">&quot;sha256:080ed0ed8312deca92e9a769b518cdfa20f5278359bd156f3469dd8fa532db6b&quot;</span>,</span><br><span class="line">          <span class="string">&quot;RepoTags&quot;</span>: [</span><br><span class="line">              <span class="string">&quot;nginx:latest&quot;</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">&quot;RepoDigests&quot;</span>: [</span><br><span class="line">              <span class="string">&quot;nginx@sha256:2ab30d6ac53580a6db8b657abf0f68d75360ff5cc1670a85acb5bd85ba1b19c0&quot;</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">&quot;Parent&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;Comment&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;Created&quot;</span>: <span class="string">&quot;2023-03-28T22:20:09.76950724Z&quot;</span>,</span><br><span class="line">          <span class="string">&quot;Container&quot;</span>: <span class="string">&quot;2e6cfff5afd6bd5a85faf12b14aa18cc04ed32b06732965bb133022ef85ba5c2&quot;</span>,</span><br><span class="line">  ......</span><br><span class="line"></span><br><span class="line"><span class="comment"># show docker proxy port</span></span><br><span class="line">kyp@u2204s:~$ sudo netstat -tulnp</span><br><span class="line">  Active Internet connections (only servers)</span><br><span class="line">  Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">  tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      716/systemd-resolve</span><br><span class="line">  tcp        0      0 0.0.0.0:23              0.0.0.0:*               LISTEN      738/inetd</span><br><span class="line">  tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN      6977/docker-proxy</span><br><span class="line">  tcp6       0      0 :::21                   :::*                    LISTEN      768/vsftpd</span><br><span class="line">  tcp6       0      0 :::8081                 :::*                    LISTEN      6983/docker-proxy</span><br><span class="line">  udp        0      0 127.0.0.53:53           0.0.0.0:*                           716/systemd-resolve</span><br><span class="line">  udp        0      0 192.168.18.6:68         0.0.0.0:*                           714/systemd-network</span><br><span class="line">  udp6       0      0 fe80::a00:27ff:fe1a:546 :::*                                714/systemd-network</span><br><span class="line"></span><br><span class="line"><span class="comment"># show docker network </span></span><br><span class="line"><span class="comment"># bridge: This is the default network that Docker sets up on a host machine. It is used for container-to-container communication within a single host.</span></span><br><span class="line"><span class="comment"># host: This network setting removes network isolation between the Docker host and the containers, and allows the containers to use the host&#x27;s network stack directly.</span></span><br><span class="line"><span class="comment"># none: This network disables networking for the container.</span></span><br><span class="line">kyp@u2204s:~$ docker network ls</span><br><span class="line">  NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">  423837e7274a   bridge    bridge    <span class="built_in">local</span></span><br><span class="line">  91fa76507520   host      host      <span class="built_in">local</span></span><br><span class="line">  c48b89fb08d9   none      null      <span class="built_in">local</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="containers-communication"><a href="#containers-communication" class="headerlink" title="containers communication"></a>containers communication</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add docker network(192.168.10.10 need change to 192.168.10.1)</span></span><br><span class="line">kyp@u2204s:~$ sudo docker network create --driver=bridge --subnet=192.168.10.0/24 --gateway=192.168.10.10 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># list docker network</span></span><br><span class="line">kyp@u2204s:~$ sudo docker network ls</span><br><span class="line">  NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">  428b0a58b3c9   bridge    bridge    <span class="built_in">local</span></span><br><span class="line">  ce47799cf7e3   host      host      <span class="built_in">local</span></span><br><span class="line">  72f0cc8b9157   none      null      <span class="built_in">local</span></span><br><span class="line">  120b0f810efd   <span class="built_in">test</span>      bridge    <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># run c1 </span></span><br><span class="line">kyp@u2204s:~$ sudo docker run -itd --name c1 -p 8081:80 nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># run c2 in network test</span></span><br><span class="line">kyp@u2204s:~$ sudo docker run -itd --name c2 --network <span class="built_in">test</span> -p 8082:80 nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># llst container</span></span><br><span class="line">kyp@u2204s:~$ sudo docker container ls</span><br><span class="line">  CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                   NAMES</span><br><span class="line">  01fef9135358   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   4 minutes ago    Up 4 minutes    0.0.0.0:8082-&gt;80/tcp, :::8082-&gt;80/tcp   c2</span><br><span class="line">  84ac6ea02d87   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   10 minutes ago   Up 10 minutes   0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   c1</span><br><span class="line"></span><br><span class="line"><span class="comment"># check c1 ip 172.17.0.2</span></span><br><span class="line">sudo docker inspect c1</span><br><span class="line"><span class="comment"># check c2 ip 192.168.10.1</span></span><br><span class="line">sudo docker inspect c2</span><br><span class="line"></span><br><span class="line"><span class="comment"># enter c1 container</span></span><br><span class="line">docker <span class="built_in">exec</span> -it c1 bash</span><br><span class="line"><span class="comment"># install package</span></span><br><span class="line">root@eb9f2a857dfa:/<span class="comment"># apt update</span></span><br><span class="line">root@eb9f2a857dfa:/<span class="comment"># apt install iputils-ping -y</span></span><br><span class="line">root@eb9f2a857dfa:/<span class="comment"># apt install net-tools -y</span></span><br><span class="line">root@eb9f2a857dfa:/<span class="comment"># ifconfig</span></span><br><span class="line">  eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">          inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line"><span class="comment"># ping c2 --&gt; can not success</span></span><br><span class="line">root@84ac6ea02d87:/&gt;  ping 192.168.10.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># link test to c1</span></span><br><span class="line">kyp@u2204s:~$ sudo docker network connect <span class="built_in">test</span> c1</span><br><span class="line"><span class="comment"># check netwrok test : c1,c2</span></span><br><span class="line"><span class="comment"># c2 ip 192.168.10.1</span></span><br><span class="line"><span class="comment"># c1 ip 192.168.10.2</span></span><br><span class="line">kyp@u2204s:~$ sudo docker inspect <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># c1 ping c2 success</span></span><br><span class="line">kyp@u2204s:~$ sudo docker <span class="built_in">exec</span> -it c1 bash</span><br><span class="line">root@84ac6ea02d87:/&gt; ping 192.168.10.1</span><br><span class="line">  PING 192.168.10.1 (192.168.10.1) 56(84) bytes of data.</span><br><span class="line">  64 bytes from 192.168.10.1: icmp_seq=1 ttl=64 time=0.102 ms</span><br><span class="line">  64 bytes from 192.168.10.1: icmp_seq=2 ttl=64 time=0.120 ms</span><br></pre></td></tr></table></figure>

<h4 id="map-directory-to-container"><a href="#map-directory-to-container" class="headerlink" title="map directory to container"></a>map directory to container</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># map directory to container</span></span><br><span class="line">kyp@u2204s:~$ mkdir demo</span><br><span class="line">kyp@u2204s:~$ <span class="built_in">cd</span> demo</span><br><span class="line">kyp@u2204s:~/demo$ docker run  -itd --name c1 -v $(<span class="built_in">pwd</span>):/usr/share/nginx/html -p 8081:80 nginx</span><br><span class="line">  1bf2697873e03faaba609862f2296784582167a010b1c24aaf703a9db570a33</span><br><span class="line"><span class="comment"># add index.html</span></span><br><span class="line">kyp@u2204s:~/demo$ <span class="built_in">echo</span> <span class="string">&quot;&lt;h1&gt;map local directry to container&lt;/h1&gt;&quot;</span> &gt; index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># browser : http://192.168.18.6:8081/</span></span><br><span class="line"><span class="comment"># map local directry to container</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># modify by container </span></span><br><span class="line">kyp@u2204s:~/demo$ docker <span class="built_in">exec</span> -it c1 bash</span><br><span class="line">root@11bf2697873e:/<span class="comment"># cd /usr/share/nginx/html/</span></span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># apt update</span></span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># apt install nano</span></span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># nano index.html</span></span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># cat ./index.html</span></span><br><span class="line">  &lt;h1&gt;map <span class="built_in">local</span> directry to container-container modify&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># browser : http://192.168.18.6:8081/</span></span><br><span class="line"><span class="comment"># map local directry to container-container modify</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># check directory also modify</span></span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">kyp@u2204s:~/demo$ cat ./index.html</span><br><span class="line">&lt;h1&gt;map <span class="built_in">local</span> directry to container-container modify&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># change container read only for directory</span></span><br><span class="line">kyp@u2204s:~/demo$ docker rm  -f c1</span><br><span class="line">  c1</span><br><span class="line">kyp@u2204s:~/demo$ docker run  -itd --name c1 -v $(<span class="built_in">pwd</span>):/usr/share/nginx/html:ro  -p 8081:80 nginx</span><br><span class="line">  f8788b8a33b8b859f1c3ee2f2b95d4ca942c4208a6d1e575029243be135f260b</span><br><span class="line">kyp@u2204s:~/demo$ docker <span class="built_in">exec</span> -it c1 bash</span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># apt update</span></span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># apt install nano</span></span><br><span class="line"><span class="comment"># index.html cannot modify</span></span><br><span class="line">root@11bf2697873e:/usr/share/nginx/html<span class="comment"># nano index.html</span></span><br></pre></td></tr></table></figure>

<h4 id="clone-volumes-from-other-container"><a href="#clone-volumes-from-other-container" class="headerlink" title="clone volumes from other container"></a>clone volumes from other container</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clone volumes from other container</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker run -itd --name c2 --volumes-from c1 -p 8082:80 nginx</span><br><span class="line">b8802a1a314eeda933f9e28669fb0b7e352cdb175208eef1d639962698cc4109</span><br><span class="line"></span><br><span class="line"><span class="comment"># browser : http://192.168.18.6:8082/</span></span><br><span class="line"><span class="comment"># map local directry to container-container modify</span></span><br></pre></td></tr></table></figure>

<h4 id="create-image-by-container-modify"><a href="#create-image-by-container-modify" class="headerlink" title="create image by container modify"></a>create image by container modify</h4><p>docker commit c1 robert:v1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create container</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker run -itd --name c1 -p 8081:80 nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># enter container </span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker <span class="built_in">exec</span> -it c1 bash</span><br><span class="line">root@9ee699e55910:/<span class="comment"># ls</span></span><br><span class="line">	bin   dev                  docker-entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">	boot  docker-entrypoint.d  etc                   lib   media  opt  root  sbin  sys  usr</span><br><span class="line"><span class="comment"># add some firectory and file</span></span><br><span class="line">root@9ee699e55910:/<span class="comment"># mkdir robert</span></span><br><span class="line">root@9ee699e55910:/<span class="comment"># mkdir docker</span></span><br><span class="line">root@9ee699e55910:/<span class="comment"># touch application</span></span><br><span class="line">root@9ee699e55910:/<span class="comment"># touch frontend</span></span><br><span class="line">root@9ee699e55910:/<span class="comment"># exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># show container</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                   NAMES</span><br><span class="line">	9ee699e55910   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   8 minutes ago   Up 7 minutes   0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   c1</span><br><span class="line"><span class="comment"># create image from container</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker commit c1 robert:v1</span><br><span class="line">	sha256:0fef41bffdcf0dac8dd4c2d8ec97fb3d3800182536148a5c49998b47585d555f</span><br><span class="line"><span class="comment"># list image</span></span><br><span class="line">kyp@u2204s:/demo$ sudo image ls</span><br><span class="line">sudo: image: <span class="built_in">command</span> not found</span><br><span class="line">kyp@u2204s:/demo$ sudo docker image ls</span><br><span class="line">	REPOSITORY   TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">	robert       v1        0fef41bffdcf   22 seconds ago   162MB</span><br><span class="line">	nginx        latest    080ed0ed8312   8 hours ago      142MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove old container </span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker rm -f c1</span><br><span class="line">	c1</span><br><span class="line"><span class="comment"># create container c5</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker run -itd --name c5 robert:v1</span><br><span class="line">	8d58bf58306be10c0f261e60b441d0a0a00f2999756ea43d36b322ee18ebfe0f</span><br><span class="line"><span class="comment"># ls container</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">	8d58bf58306b   robert:v1   <span class="string">&quot;/docker-entrypoint.&quot;</span>   18 seconds ago   Up 16 seconds   80/tcp    c5</span><br><span class="line"><span class="comment"># enter container c6</span></span><br><span class="line">kyp@u2204s:/demo$ sudo docker <span class="built_in">exec</span> -it c5 bash</span><br><span class="line"><span class="comment"># check the containe inclde add directory and file</span></span><br><span class="line">root@8d58bf58306b:/<span class="comment"># ls</span></span><br><span class="line">	application  boot  docker               docker-entrypoint.sh  frontend  lib    media  opt   robert  run   srv  tmp  var</span><br><span class="line">	bin          dev   docker-entrypoint.d  etc                   home      lib64  mnt    proc  root    sbin  sys  usr</span><br><span class="line">root@8d58bf58306b:/<span class="comment"># nano index.html</span></span><br><span class="line">root@8d58bf58306b:/<span class="comment"># exit</span></span><br></pre></td></tr></table></figure>

<h4 id="push-docker-image-to-dockerhub"><a href="#push-docker-image-to-dockerhub" class="headerlink" title="push docker image to dockerhub"></a>push docker image to dockerhub</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># login dockerhub</span></span><br><span class="line">kyp@u2204s:/demo$ docker login</span><br><span class="line">	<span class="comment"># Login with your Docker ID to push and pull images from Docker Hub. If you don&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line">	Username: hotxx</span><br><span class="line">	Password:</span><br><span class="line">	WARNING! Your password will be stored unencrypted <span class="keyword">in</span> /home/kyp/.docker/config.json.</span><br><span class="line">	Configure a credential helper to remove this warning. See</span><br><span class="line">	https://docs.docker.com/engine/reference/commandline/login/<span class="comment">#credentials-store</span></span><br><span class="line"></span><br><span class="line">	Login Succeeded</span><br><span class="line"></span><br><span class="line"><span class="comment"># must create image repsitory at dockerhub 1st</span></span><br><span class="line"><span class="comment"># I add hot5656/test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add image same as dockerhub repsitory</span></span><br><span class="line">kyp@u2204s:/demo$ docker tag application:1.0 hot5656/<span class="built_in">test</span>:1.0</span><br><span class="line">kyp@u2204s:/demo$ docker image ls</span><br><span class="line">	REPOSITORY     TAG       IMAGE ID       CREATED             SIZE</span><br><span class="line">	hot5656/<span class="built_in">test</span>   1.0       0fef41bffdcf   About an hour ago   162MB</span><br><span class="line">	application    1.0       0fef41bffdcf   About an hour ago   162MB</span><br><span class="line">	robert         v1        0fef41bffdcf   About an hour ago   162MB</span><br><span class="line">	nginx          latest    080ed0ed8312   9 hours ago         142MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># push to dockerhub</span></span><br><span class="line">kyp@u2204s:/demo$ docker push hot5656/<span class="built_in">test</span>:1.0</span><br><span class="line">	The push refers to repository [docker.io/hot5656/<span class="built_in">test</span>]</span><br><span class="line">	07f972031d3d: Pushed</span><br><span class="line">	ff4557f62768: Pushed</span><br><span class="line">	4d0bf5b5e17b: Pushed</span><br><span class="line">	95457f8a16fd: Pushed</span><br><span class="line">	a0b795906dc1: Pushed</span><br><span class="line">	af29ec691175: Pushed</span><br><span class="line">	3af14c9a24c9: Pushed</span><br><span class="line">	1.0: digest: sha256:4fc16fffa780fc5ea7330c32ac044ac30f756ab189aeed56ca4941a05f986da0 size: 178</span><br></pre></td></tr></table></figure>


<h4 id="create-image-by-docker-file"><a href="#create-image-by-docker-file" class="headerlink" title="create image by docker file"></a>create image by docker file</h4><p>docker build -t firstimage:1.0 .</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">kyp@u2204s:/demo$ sudo nano dockerfile</span><br><span class="line">	[sudo] password <span class="keyword">for</span> kyp:</span><br><span class="line"></span><br><span class="line"><span class="comment"># dockerfile as below </span></span><br><span class="line">==================</span><br><span class="line">FROM ubuntu</span><br><span class="line">RUN     apt update</span><br><span class="line">RUN     apt install apache2 -y</span><br><span class="line">COPY    .       /var/www/html</span><br><span class="line">ENTRYPOINT      apachectl -D FOREGROUND</span><br><span class="line">====================</span><br><span class="line">沒有修改亦ok</span><br><span class="line">====================</span><br><span class="line">FROM ubuntu</span><br><span class="line">ARG DEBIAN_FRONTEND=noniteractive</span><br><span class="line">RUN     apt update</span><br><span class="line">RUN     apt install apache2 -y</span><br><span class="line">RUN <span class="built_in">echo</span> <span class="string">&quot;ServerName localhost&quot;</span> &gt;&gt; /etc/apache2/apache2.conf</span><br><span class="line">COPY    .       /var/www/html</span><br><span class="line">ENTRYPOINT      apachectl -D FOREGROUND</span><br><span class="line">====================</span><br><span class="line"></span><br><span class="line"><span class="comment"># warning as below,add &quot;RUN echo &quot;ServerName localhost&quot; &gt;&gt; /etc/apache2/apache2.conf&quot; the not found</span></span><br><span class="line"><span class="comment"># AH00558: apache2: Could not reliably determine the server&#x27;s fully qualified domain name, using 172.17.0.3. Set the &#x27;ServerName&#x27; directive globally to suppress this message</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create dockerfile and index.html</span></span><br><span class="line">kyp@u2204s:/demo$ cat dockerfile</span><br><span class="line">	FROM ubuntu</span><br><span class="line">	RUN     apt update</span><br><span class="line">	RUN     apt install apache2 -y</span><br><span class="line">	COPY    .       /var/www/html</span><br><span class="line">	ENTRYPOINT      apachectl -D FOREGEROUND</span><br><span class="line">kyp@u2204s:/demo$ ls</span><br><span class="line">	dockerfile  index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># build image</span></span><br><span class="line">kyp@u2204s:/demo$ docker build -t firstimage:1.0 .</span><br><span class="line">	....</span><br><span class="line"><span class="comment"># image list</span></span><br><span class="line">kyp@u2204s:/demo$ docker image list</span><br><span class="line">	REPOSITORY     TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">	firstimage     1.0       04de0efc7c90   5 minutes ago   228MB</span><br><span class="line">	robert         v1        0fef41bffdcf   2 hours ago     162MB</span><br><span class="line">	hot5656/<span class="built_in">test</span>   1.0       0fef41bffdcf   2 hours ago     162MB</span><br><span class="line">	application    1.0       0fef41bffdcf   2 hours ago     162MB</span><br><span class="line">	nginx          latest    080ed0ed8312   9 hours ago     142MB</span><br><span class="line">	ubuntu         latest    08d22c0ceb15   3 weeks ago     77.8MB</span><br><span class="line"><span class="comment"># run image</span></span><br><span class="line">kyp@u2204s:/demo$ docker run -itd --name cl4 -p 8084:80 apache2:4.0</span><br></pre></td></tr></table></figure>

<h4 id="switch-user-in-container-not-root"><a href="#switch-user-in-container-not-root" class="headerlink" title="switch user in container(not root)"></a>switch user in container(not root)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dockerfile (switch to user nobody)</span></span><br><span class="line">kyp@u2204s:~/v3$ cat ./dockerfile</span><br><span class="line">FROM ubuntu</span><br><span class="line">	RUN apt update</span><br><span class="line">	RUN     whoami</span><br><span class="line">	RUN     mkdir /tmp/root-app</span><br><span class="line">	RUN     touch /tmp/root-file</span><br><span class="line">	USER    nobody</span><br><span class="line">	RUN     whoami</span><br><span class="line">	RUN     mkdir /tmp/nobody-app</span><br><span class="line">	RUN     touch /tmp/nobody-file</span><br><span class="line"></span><br><span class="line"><span class="comment"># build image</span></span><br><span class="line">kyp@u2204s:~/v3$ docker build v3:1.0 .</span><br><span class="line">	<span class="string">&quot;docker build&quot;</span> requires exactly 1 argument.</span><br><span class="line">	See <span class="string">&#x27;docker build --help&#x27;</span>.</span><br><span class="line">	Usage:  docker build [OPTIONS] PATH | URL | -</span><br><span class="line">	Build an image from a Dockerfile</span><br><span class="line">	kyp@u2204s:~/v3$ docker build -t v3:1.0 .</span><br><span class="line">	Sending build context to Docker daemon  2.048kB</span><br><span class="line">	Step 1/9 : FROM ubuntu</span><br><span class="line">	---&gt; 08d22c0ceb15</span><br><span class="line">	Step 2/9 : RUN apt update</span><br><span class="line">	---&gt; Using cache</span><br><span class="line">	---&gt; f312ea4ab153</span><br><span class="line">	Step 3/9 : RUN  whoami</span><br><span class="line">	---&gt; Running <span class="keyword">in</span> 6921b67e61d0</span><br><span class="line">	root</span><br><span class="line">	Removing intermediate container 6921b67e61d0</span><br><span class="line">	---&gt; 359caae01c49</span><br><span class="line">	Step 4/9 : RUN  mkdir /tmp/root-app</span><br><span class="line">	---&gt; Running <span class="keyword">in</span> 2a3750cca39a</span><br><span class="line">	Removing intermediate container 2a3750cca39a</span><br><span class="line">	---&gt; cfb055096529</span><br><span class="line">	Step 5/9 : RUN  touch /tmp/root-file</span><br><span class="line">	---&gt; Running <span class="keyword">in</span> fe5e86b3d49c</span><br><span class="line">	Removing intermediate container fe5e86b3d49c</span><br><span class="line">	---&gt; 363f5637b260</span><br><span class="line">	Step 6/9 : USER nobody</span><br><span class="line">	---&gt; Running <span class="keyword">in</span> 575a15647d62</span><br><span class="line">	Removing intermediate container 575a15647d62</span><br><span class="line">	---&gt; e6a11a260269</span><br><span class="line">	Step 7/9 : RUN  whoami</span><br><span class="line">	---&gt; Running <span class="keyword">in</span> 9b2c0cc76478</span><br><span class="line">	nobody</span><br><span class="line">	Removing intermediate container 9b2c0cc76478</span><br><span class="line">	---&gt; 9338c4e99a39</span><br><span class="line">	Step 8/9 : RUN  mkdir /tmp/nobody-app</span><br><span class="line">	---&gt; Running <span class="keyword">in</span> 63a86e84ecce</span><br><span class="line">	Removing intermediate container 63a86e84ecce</span><br><span class="line">	---&gt; 68dafaf60556</span><br><span class="line">	Step 9/9 : RUN  touch /tmp/nobody-file</span><br><span class="line">	---&gt; Running <span class="keyword">in</span> 3b51a933c072</span><br><span class="line">	Removing intermediate container 3b51a933c072</span><br><span class="line">	---&gt; f2aee89412a7</span><br><span class="line">	Successfully built f2aee89412a7</span><br><span class="line">	Successfully tagged v3:1.0</span><br><span class="line">kyp@u2204s:~/v3$</span><br><span class="line"></span><br><span class="line"><span class="comment"># run </span></span><br><span class="line">kyp@u2204s:~/v3$ docker run -itd --name c1 v3:1.0</span><br><span class="line">	769bbaf1cb87dedc60fe8d3086fa4d7ce3646851ade978ae847c1fe5f2e263a3</span><br><span class="line"></span><br><span class="line"><span class="comment"># enter container</span></span><br><span class="line">kyp@u2204s:~/v3$ docker <span class="built_in">exec</span> -it c1 bash</span><br><span class="line">nobody@769bbaf1cb87:/$ ls -al /tmp</span><br><span class="line">	total 16</span><br><span class="line">	drwxrwxrwt 1 root   root    4096 Mar 30 02:12 .</span><br><span class="line">	drwxr-xr-x 1 root   root    4096 Mar 30 02:15 ..</span><br><span class="line">	drwxr-xr-x 2 nobody nogroup 4096 Mar 30 02:12 nobody-app</span><br><span class="line">	-rw-r--r-- 1 nobody nogroup    0 Mar 30 02:12 nobody-file</span><br><span class="line">	drwxr-xr-x 2 root   root    4096 Mar 30 02:12 root-app</span><br><span class="line">	-rw-r--r-- 1 root   root       0 Mar 30 02:12 root-file</span><br><span class="line">nobody@769bbaf1cb87:/$ <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#dockerfile (add user robert,user then switch to user robert)</span></span><br><span class="line">kyp@u2204s:~/v32$ cat ./dockerfile</span><br><span class="line">	FROM ubuntu</span><br><span class="line">	RUN apt update -y</span><br><span class="line">	RUN apt-get install openssl -y</span><br><span class="line">	RUN apt-get install apt-utils -y</span><br><span class="line">	RUN useradd -m -d /home/user1 -s /bin/bash -g root -G sudo -u 1002 user1 -p <span class="string">&quot;<span class="subst">$(echo &#x27;user1&#x27; | openssl passwd -6 -stdin)</span>&quot;</span></span><br><span class="line">	RUN useradd -m -d /home/robert -s /bin/bash -g root -G sudo -u 1001 robert -p <span class="string">&quot;<span class="subst">$(echo &#x27;robert&#x27; | openssl passwd -6 -stdin)</span>&quot;</span></span><br><span class="line">	USER robert</span><br><span class="line">	RUN     mkdir /tmp/robert</span><br><span class="line"></span><br><span class="line"><span class="comment"># build image</span></span><br><span class="line">kyp@u2204s:~/v32$ docker build -t v3:2.0 .</span><br><span class="line"></span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">kyp@u2204s:~/v32$ docker run -itd --name c3 v3:2.0</span><br><span class="line">	f07e86919041372e959e3b5aa9deeec299bb7facbaf07ca5d9d5a808b122d096</span><br><span class="line"></span><br><span class="line"><span class="comment"># enter container(switch user to user, robert by password)</span></span><br><span class="line">kyp@u2204s:~/v32$ docker <span class="built_in">exec</span> -it  c3 bash</span><br><span class="line">robert@f07e86919041:/$ su user1</span><br><span class="line">	Password:</span><br><span class="line">user1@f07e86919041:/$ su robert</span><br><span class="line">	Password:</span><br><span class="line">robert@f07e86919041:/$ <span class="built_in">exit</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line">user1@f07e86919041:/$ <span class="built_in">exit</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line">robert@f07e86919041:/$ ls /tmp -al</span><br><span class="line">	total 12</span><br><span class="line">	drwxrwxrwt 1 root   root 4096 Mar 30 03:51 .</span><br><span class="line">	drwxr-xr-x 1 root   root 4096 Mar 30 03:53 ..</span><br><span class="line">	drwxr-xr-x 2 robert root 4096 Mar 30 03:51 robert</span><br><span class="line">robert@f07e86919041:/$ <span class="built_in">exit</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dockerfile(remove some warning only)</span></span><br><span class="line">kyp@u2204s:~/v33$ cat ./dockerfile</span><br><span class="line">	FROM ubuntu</span><br><span class="line">	RUN apt-get update -y</span><br><span class="line">	RUN apt-get install openssl -y</span><br><span class="line">	RUN useradd -m -d /home/user1 -s /bin/bash -g root -G sudo -u 1002 user1 -p <span class="string">&quot;<span class="subst">$(echo &#x27;user1&#x27; | openssl passwd -6 -stdin)</span>&quot;</span></span><br><span class="line">	RUN useradd -m -d /home/robert -s /bin/bash -g root -G sudo -u 1001 robert -p <span class="string">&quot;<span class="subst">$(echo &#x27;robert&#x27; | openssl passwd -6 -stdin)</span>&quot;</span></span><br><span class="line">	USER robert</span><br><span class="line">	RUN     mkdir /tmp/robert</span><br><span class="line"></span><br><span class="line"><span class="comment"># -m: create the user&#x27;s home directory if it doesn&#x27;t exist.</span></span><br><span class="line"><span class="comment"># -d /home/robert: set the home directory for the user to /home/robert.</span></span><br><span class="line"><span class="comment"># -s /bin/bash: set the default shell for the user to /bin/bash.</span></span><br><span class="line"><span class="comment"># -g root: set the primary group for the user to root.</span></span><br><span class="line"><span class="comment"># -G sudo: add the user to the sudo group.</span></span><br><span class="line"><span class="comment"># -u 1001: set the user&#x27;s UID to 1001.</span></span><br><span class="line"><span class="comment"># robert: set the username for the new user.</span></span><br><span class="line"><span class="comment"># -p &quot;$(echo &#x27;robert&#x27; | openssl passwd -6 -stdin)&quot;: set the password for the user to the output of the openssl passwd -6 -stdin &lt;&lt;&lt; robert command, which generates a hashed password for the user.</span></span><br><span class="line"><span class="comment"># apt-get : not show some terminal message when build</span></span><br><span class="line"><span class="comment"># openssl : for add user password</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># build</span></span><br><span class="line">kyp@u2204s:~/v33$ docker build -t v3:3.0 .</span><br><span class="line"></span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">kyp@u2204s:~/v33$ docker run -itd --name c5 v3:3.0</span><br><span class="line">	c8a0a274c3b3452ef4e1a6859bf015de3decff1d66160b25b98350c78c2ac1d8</span><br><span class="line"><span class="comment"># enter container</span></span><br><span class="line">kyp@u2204s:~/v33$ docker <span class="built_in">exec</span> -it c5 bash</span><br><span class="line">robert@c8a0a274c3b3:/$ su user1</span><br><span class="line">	Password:</span><br><span class="line">user1@c8a0a274c3b3:/$ su robert</span><br><span class="line">	Password:</span><br><span class="line">robert@c8a0a274c3b3:/$ ls /tmp -al</span><br><span class="line">total 12</span><br><span class="line">	drwxrwxrwt 1 root   root 4096 Mar 30 04:15 .</span><br><span class="line">	drwxr-xr-x 1 root   root 4096 Mar 30 04:17 ..</span><br><span class="line">	drwxr-xr-x 2 robert root 4096 Mar 30 04:15 robert</span><br><span class="line">	robert@c8a0a274c3b3:/$</span><br></pre></td></tr></table></figure>

<h4 id="run-docker-compose"><a href="#run-docker-compose" class="headerlink" title="run docker compose"></a>run docker compose</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose.yml</span></span><br><span class="line">kyp@u2204s:~/compose$ cat ./docker-compose.yml</span><br><span class="line">	version: <span class="string">&quot;3&quot;</span></span><br><span class="line">	services:</span><br><span class="line">		application:</span><br><span class="line">			image: nginx</span><br><span class="line">			ports:</span><br><span class="line">				- <span class="string">&quot;8081:80&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">kyp@u2204s:~/compose$ sudo docker compose up -d</span><br><span class="line">	[+] Running 2/2</span><br><span class="line">	? Network compose_default          Created                                                    0.1s</span><br><span class="line">	? Container compose-application-1  Started                                                    0.9s</span><br><span class="line"></span><br><span class="line"><span class="comment"># compose</span></span><br><span class="line">kyp@u2204s:~/compose$ docker compose ps</span><br><span class="line">	NAME                    IMAGE               COMMAND                  SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">	compose-application-1   nginx               <span class="string">&quot;/docker-entrypoint.&quot;</span>   application         2 minutes ago       Up 2 minutes        0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp</span><br><span class="line"><span class="comment"># container</span></span><br><span class="line">kyp@u2204s:~/compose$ docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                   NAMES</span><br><span class="line">	f3b8f73706db   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   4 minutes ago   Up 4 minutes   0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   compose-application-1</span><br><span class="line"></span><br><span class="line"><span class="comment"># browser open : http://192.168.126.187:8081/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ip</span></span><br><span class="line">kyp@u2204s:~/compose$ ip a</span><br><span class="line">	......</span><br><span class="line">	100: br-e99673d6d53b: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default</span><br><span class="line">			link/ether 02:42:3d:fa:01:ca brd ff:ff:ff:ff:ff:ff</span><br><span class="line">			inet 172.18.0.1/16 brd 172.18.255.255 scope global br-e99673d6d53b</span><br><span class="line">				valid_lft forever preferred_lft forever</span><br><span class="line">			inet6 fe80::42:3dff:fefa:1ca/64 scope link</span><br><span class="line">				valid_lft forever preferred_lft forever</span><br><span class="line"></span><br><span class="line"><span class="comment"># network :　compose_default</span></span><br><span class="line">kyp@u2204s:~/compose$ docker network ls</span><br><span class="line">	NETWORK ID     NAME              DRIVER    SCOPE</span><br><span class="line">	cc7598d6c9a3   bridge            bridge    <span class="built_in">local</span></span><br><span class="line">	e99673d6d53b   compose_default   bridge    <span class="built_in">local</span></span><br><span class="line">	ce47799cf7e3   host              host      <span class="built_in">local</span></span><br><span class="line">	72f0cc8b9157   none              null      <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># compose down</span></span><br><span class="line">kyp@u2204s:~/compose$ docker compose down</span><br><span class="line">	[+] Running 2/2</span><br><span class="line">	? Container compose-application-1 Removed  0.6s</span><br><span class="line">	? Network compose_default         Removed  0.1s</span><br><span class="line"><span class="comment"># network ls</span></span><br><span class="line">kyp@u2204s:~/compose$ docker network ls</span><br><span class="line">	NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">	cc7598d6c9a3   bridge    bridge    <span class="built_in">local</span></span><br><span class="line">	ce47799cf7e3   host      host      <span class="built_in">local</span></span><br><span class="line">	72f0cc8b9157   none      null      <span class="built_in">local</span></span><br><span class="line"><span class="comment"># ip all (no br-xxx )</span></span><br><span class="line">kyp@u2204s:~/compose$ ip a</span><br><span class="line">	1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">			link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">			inet 127.0.0.1/8 scope host lo</span><br><span class="line">				valid_lft forever preferred_lft forever</span><br><span class="line">			inet6 ::1/128 scope host</span><br><span class="line">				valid_lft forever preferred_lft forever</span><br><span class="line">	2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000</span><br><span class="line">			link/ether 08:00:27:<span class="built_in">cd</span>:9f:7e brd ff:ff:ff:ff:ff:ff</span><br><span class="line">			inet 192.168.126.187/24 brd 192.168.126.255 scope global dynamic enp0s3</span><br><span class="line">				valid_lft 62088sec preferred_lft 62088sec</span><br><span class="line">			inet6 fe80::a00:27ff:fecd:9f7e/64 scope link</span><br><span class="line">				valid_lft forever preferred_lft forever</span><br><span class="line">	3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default</span><br><span class="line">			link/ether 02:42:e0:cf:3f:9c brd ff:ff:ff:ff:ff:ff</span><br><span class="line">			inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">				valid_lft forever preferred_lft forever</span><br><span class="line">			inet6 fe80::42:e0ff:fecf:3f9c/64 scope link</span><br><span class="line">				valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h4 id="multiple-compose"><a href="#multiple-compose" class="headerlink" title="multiple compose"></a>multiple compose</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose.yml</span></span><br><span class="line"><span class="comment"># user docker compose version 3 format(docker-compose.yml or docker-compose.yaml)</span></span><br><span class="line">kyp@u2204s:~/compose2$ cat ./docker-compose.yml</span><br><span class="line">	version: <span class="string">&quot;3&quot;</span></span><br><span class="line">	services:</span><br><span class="line">		application:</span><br><span class="line">			image: nginx</span><br><span class="line">			ports:</span><br><span class="line">				- <span class="string">&quot;8081:80&quot;</span></span><br><span class="line">		application-2:</span><br><span class="line">			image: nginx</span><br><span class="line">			ports:</span><br><span class="line">				- <span class="string">&quot;8082:80&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># compose up</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose up -d</span><br><span class="line">	[+] Running 3/3</span><br><span class="line">	? Network compose2_default            Created  0.5s</span><br><span class="line">	? Container compose2-application-2-1  Started 1.0s</span><br><span class="line">	? Container compose2-application-1    Started  0.9s</span><br><span class="line"></span><br><span class="line"><span class="comment"># compose ps and container ls</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose ps</span><br><span class="line">	NAME                       IMAGE               COMMAND                  SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">	compose2-application-1     nginx               <span class="string">&quot;/docker-entrypoint.&quot;</span>   application         35 seconds ago      Up 34 seconds       0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp</span><br><span class="line">	compose2-application-2-1   nginx               <span class="string">&quot;/docker-entrypoint.&quot;</span>   application-2       35 seconds ago      Up 34 seconds       0.0.0.0:8082-&gt;80/tcp, :::8082-&gt;80/tcp</span><br><span class="line">kyp@u2204s:~/compose2$ docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS              PORTS                                   NAMES</span><br><span class="line">	3cda852326a4   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   About a minute ago   Up About a minute   0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   compose2-application-1</span><br><span class="line">	ae2a6cd241a8   nginx     <span class="string">&quot;/docker-entrypoint.&quot;</span>   About a minute ago   Up About a minute   0.0.0.0:8082-&gt;80/tcp, :::8082-&gt;80/tcp   compose2-application-2-1	</span><br><span class="line"><span class="comment"># network</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker network ls</span><br><span class="line">	NETWORK ID     NAME               DRIVER    SCOPE</span><br><span class="line">	5cd12cc9620e   bridge             bridge    <span class="built_in">local</span></span><br><span class="line">	cdaa29412bdf   compose2_default   bridge    <span class="built_in">local</span></span><br><span class="line">	ce47799cf7e3   host               host      <span class="built_in">local</span></span><br><span class="line">	72f0cc8b9157   none               null      <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># browser open : http://192.168.126.187:8081/</span></span><br><span class="line"><span class="comment"># browser open : http://192.168.126.187:8082/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># support compose stop then start</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose stop</span><br><span class="line">	[+] Running 2/2</span><br><span class="line">	? Container compose2-application-2-1  Stopped  0.8s</span><br><span class="line">	? Container compose2-application-1    Stopped  0.8s</span><br><span class="line">kyp@u2204s:~/compose2$ docker compose start</span><br><span class="line">	[+] Running 2/2</span><br><span class="line">	? Container compose2-application-1  0.7s</span><br><span class="line">	? Container compose2-application-2-1  0.9s</span><br><span class="line">kyp@u2204s:~/compose2$ docker compose down</span><br><span class="line">	[+] Running 3/3</span><br><span class="line">	? Container compose2-application-1    Removed 1.0s</span><br><span class="line">	? Container compose2-application-2-1  Removed 1.0s</span><br><span class="line">	? Network compose2_default            Removed</span><br><span class="line"></span><br><span class="line"><span class="comment"># suport specific docker componse name</span></span><br><span class="line">kyp@u2204s:~/compose2$ mv docker-compose.yml v1.yaml</span><br><span class="line">kyp@u2204s:~/compose2$ ls</span><br><span class="line">	v1.yaml</span><br><span class="line">kyp@u2204s:~/compose2$ docker compose -f v1.yaml up -d</span><br><span class="line">	[+] Running 3/3</span><br><span class="line">	? Network compose2_default            Created  0.4s</span><br><span class="line">	? Container compose2-application-1 0.8s</span><br><span class="line">	? Container compose2-application-2-1  0.9s</span><br><span class="line">kyp@u2204s:~/compose2$ docker compose -f v1.yaml down</span><br><span class="line">	[+] Running 3/3</span><br><span class="line">	? Container compose2-application-1    Removed 1.0s</span><br><span class="line">	? Container compose2-application-2-1  Removed  1.0s</span><br><span class="line">	? Network compose2_default            Removed  0.1s</span><br><span class="line">	kyp@u2204s:~/compose2$</span><br><span class="line"></span><br><span class="line"><span class="comment"># support direct run and see logs</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose -f v1.yaml up</span><br><span class="line">	^CGracefully stopping... (press Ctrl+C again to force)</span><br><span class="line">	Aborting on container <span class="built_in">exit</span>...</span><br><span class="line">	[+] Running 2/2</span><br><span class="line">	? Container compose2-application-1    Stopped  1.0s</span><br><span class="line">	? Container compose2-application-2-1  Stopped  1.0s</span><br><span class="line">	canceled</span><br><span class="line"></span><br><span class="line"><span class="comment"># run specific docker componse</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose -f v1.yaml up -d</span><br><span class="line">	[+] Running 2/2</span><br><span class="line">	? Container compose2-application-2-1  Started 0.6s</span><br><span class="line">		? Container compose2-application-2-1  Removed 1.0s</span><br><span class="line">		? Network compose2_default            Removed</span><br><span class="line"><span class="comment"># &quot;compose ps&quot; also need specific compose name </span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose -f v1.yaml ps</span><br><span class="line">	NAME                       IMAGE               COMMAND                  SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">	compose2-application-1     nginx               <span class="string">&quot;/docker-entrypoint.&quot;</span>   application         5 minutes ago       Up 18 seconds       0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp</span><br><span class="line">	compose2-application-2-1   nginx               <span class="string">&quot;/docker-entrypoint.&quot;</span>   application-2       5 minutes ago       Up 18 seconds       0.0.0.0:8083-&gt;80/tcp, :::8083-&gt;80/tcp </span><br><span class="line"><span class="comment"># &quot;compose down&quot; also need specific compose name </span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose -f v1.yaml down</span><br><span class="line">	[+] Running 3/3</span><br><span class="line">	? Container compose2-application-2-1  Removed  0.7s</span><br><span class="line">	? Container compose2-application-1    Removed  0.7s</span><br><span class="line">	? Network compose2_default            Removed</span><br></pre></td></tr></table></figure>


<h4 id="build-image-from-compose"><a href="#build-image-from-compose" class="headerlink" title="build image from compose"></a>build image from compose</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># show no image and container</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker image ls</span><br><span class="line">REPOSITORY   TAG       IMAGE ID   CREATED   SIZE</span><br><span class="line">kyp@u2204s:~/compose2$ docker container ls -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"><span class="comment"># dockfile</span></span><br><span class="line">kyp@u2204s:~/compose2$ cat ./dockerfile</span><br><span class="line">	FROM ubuntu</span><br><span class="line">	RUN     apt update</span><br><span class="line">	ADD     . /var/www/html</span><br><span class="line">	RUN     apt install apache2 -y</span><br><span class="line">	ENTRYPOINT      apachectl -D FOREGROUND</span><br><span class="line"><span class="comment"># dock-cpopose</span></span><br><span class="line">kyp@u2204s:~/compose2$ cat ./docker-compose.yaml</span><br><span class="line">	version: <span class="string">&quot;3&quot;</span></span><br><span class="line">	services:</span><br><span class="line">		frontend:</span><br><span class="line">			build: .</span><br><span class="line">			ports:</span><br><span class="line">				- <span class="string">&quot;8085:80&quot;</span></span><br><span class="line"><span class="comment"># index.html</span></span><br><span class="line">kyp@u2204s:~/compose2$ cat ./index.html</span><br><span class="line">	&lt;h1&gt;Hi this is the image whicj we have created with Docker-compose&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># compose up</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose up -d</span><br><span class="line"><span class="comment"># show image and container </span></span><br><span class="line">kyp@u2204s:~/compose2$ docker image ls</span><br><span class="line">	REPOSITORY          TAG       IMAGE ID       CREATED              SIZE</span><br><span class="line">	compose2-frontend   latest    939c638c92fe   About a minute ago   229MB</span><br><span class="line">kyp@u2204s:~/compose2$ docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE               COMMAND                  CREATED         STATUS         PORTS                                   NAMES</span><br><span class="line">	6a382cc76473   compose2-frontend   <span class="string">&quot;/bin/sh -c &#x27;apachec&quot;</span>   2 minutes ago   Up 2 minutes   0.0.0.0:8085-&gt;80/tcp, :::8085-&gt;80/tcp   compose2-frontend-1</span><br><span class="line"></span><br><span class="line"><span class="comment"># open browser: http://192.168.126.187:8085/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># down and see image</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose down</span><br><span class="line">kyp@u2204s:~/compose2$ docker image ls</span><br><span class="line">	REPOSITORY          TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">	compose2-frontend   latest    939c638c92fe   19 minutes ago   229MB</span><br><span class="line">	kyp@u2204s:~/compose2$ docker rmi -f $(docker image ls -a -q)</span><br><span class="line">	Untagged: compose2-frontend:latest</span><br><span class="line">	Deleted: sha256:939c638c92fefa52b8e4ce3399feec3aedbfc88d5451068ffe99739e0e9db750</span><br><span class="line"></span><br><span class="line"><span class="comment"># give image name</span></span><br><span class="line">kyp@u2204s:~/compose2$ cat ./docker-compose.yaml</span><br><span class="line">	version: <span class="string">&quot;3&quot;</span></span><br><span class="line">	services:</span><br><span class="line">		frontend:</span><br><span class="line">			build: .</span><br><span class="line">			ports:</span><br><span class="line">				- <span class="string">&quot;8085:80&quot;</span></span><br><span class="line">			image: composeimage:1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># compose up</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker compose up -d</span><br><span class="line"><span class="comment"># see image - composeimage:1.0</span></span><br><span class="line">kyp@u2204s:~/compose2$ docker image ls</span><br><span class="line">	REPOSITORY     TAG       IMAGE ID       CREATED              SIZE</span><br><span class="line">	composeimage   1.0       2bf3a001bb1f   About a minute ago   229MB</span><br><span class="line">kyp@u2204s:~/compose2$ docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE              COMMAND                  CREATED              STATUS              PORTS                                   NAMES</span><br><span class="line">	c95414d1f043   composeimage:1.0   <span class="string">&quot;/bin/sh -c &#x27;apachec&quot;</span>   About a minute ago   Up About a minute   0.0.0.0:8085-&gt;80/tcp, :::8085-&gt;80/tcp   compose2-frontend-1</span><br><span class="line"></span><br><span class="line"><span class="comment"># open browser: http://192.168.126.187:8085/</span></span><br></pre></td></tr></table></figure>

<h4 id="Wrodpress-Mysql-componse"><a href="#Wrodpress-Mysql-componse" class="headerlink" title="Wrodpress + Mysql componse"></a>Wrodpress + Mysql componse</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose</span></span><br><span class="line">kyp@u2204s:~/worldpress$ cat ./docker-compose.yaml</span><br><span class="line">	services:</span><br><span class="line">		db:</span><br><span class="line">			image: mariadb:10.6.4-focal</span><br><span class="line">			environment:</span><br><span class="line">				MYSQL_ROOT_PASSWORD: example</span><br><span class="line">				MYSQL_DATABASE: wordpress</span><br><span class="line">				MYSQL_USER: wordpress</span><br><span class="line">				MYSQL_PASSWORD: password</span><br><span class="line">			volumes:</span><br><span class="line">				- db_data:/var/lib/mysql</span><br><span class="line">			restart: always</span><br><span class="line"></span><br><span class="line">		wordpress:</span><br><span class="line">			depends_on:</span><br><span class="line">				- db</span><br><span class="line">			image: wordpress:latest</span><br><span class="line">			ports:</span><br><span class="line">				- 8080:80</span><br><span class="line">			restart: always</span><br><span class="line">			environment:</span><br><span class="line">				WORDPRESS_DB_HOST: db:3306</span><br><span class="line">				WORDPRESS_DB_USER: wordpress</span><br><span class="line">				WORDPRESS_DB_PASSWORD: password</span><br><span class="line">				WORDPRESS_DB_NAME: wordpress</span><br><span class="line">	volumes:</span><br><span class="line">		db_data:</span><br><span class="line"><span class="comment"># compose ls</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose up -d</span><br><span class="line"><span class="comment"># show compose</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose ls</span><br><span class="line">	NAME                STATUS              CONFIG FILES</span><br><span class="line">	worldpress          running(2)          /home/kyp/worldpress/docker-compose.yaml</span><br><span class="line"><span class="comment"># show compose ps</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose ps</span><br><span class="line">	NAME                     IMAGE                  COMMAND                  SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">	worldpress-db-1          mariadb:10.6.4-focal   <span class="string">&quot;docker-entrypoint.s&quot;</span>   db                  20 seconds ago      Up 19 seconds       3306/tcp</span><br><span class="line">	worldpress-wordpress-1   wordpress:latest       <span class="string">&quot;docker-entrypoint.s&quot;</span>   wordpress           20 seconds ago      Up 18 seconds       0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># down</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose down</span><br><span class="line">	[+] Running 3/3</span><br><span class="line">	? Container worldpress-wordpress-1  Removed                                                   1.6s</span><br><span class="line">	? Container worldpress-db-1         Removed                                                   1.2s</span><br><span class="line">	? Network worldpress_default        Removed                                                   0.1s</span><br><span class="line"><span class="comment"># show pose and container</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose ps</span><br><span class="line">NAME                IMAGE               COMMAND             SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">kyp@u2204s:~/worldpress$ docker container ls</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">kyp@u2204s:~/worldpress$ docker container ls -a</span><br><span class="line">CONTAINER ID   IMAGE              COMMAND                  CREATED        STATUS                      PORTS     NAMES</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># next </span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker rmi -f $(docker image ls -a -q)</span><br><span class="line"><span class="comment"># include insert data, because volume not remove</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose up -d</span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose ps</span><br><span class="line">	NAME                     IMAGE                  COMMAND                  SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">	worldpress-db-1          mariadb:10.6.4-focal   <span class="string">&quot;docker-entrypoint.s&quot;</span>   db                  2 minutes ago       Up 2 minutes        3306/tcp</span><br><span class="line">	worldpress-wordpress-1   wordpress:latest       <span class="string">&quot;docker-entrypoint.s&quot;</span>   wordpress           2 minutes ago       Up 2 minutes        0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp</span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose ps -a</span><br><span class="line">	NAME                     IMAGE                  COMMAND                  SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">	worldpress-db-1          mariadb:10.6.4-focal   <span class="string">&quot;docker-entrypoint.s&quot;</span>   db                  2 minutes ago       Up 2 minutes        3306/tcp</span><br><span class="line">	worldpress-wordpress-1   wordpress:latest       <span class="string">&quot;docker-entrypoint.s&quot;</span>   wordpress           2 minutes ago       Up 2 minutes        0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># down volume</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose down --volumes</span><br><span class="line">	[+] Running 4/4</span><br><span class="line">	? Container worldpress-wordpress-1  Removed                                                   1.7s</span><br><span class="line">	? Container worldpress-db-1         Removed                                                   0.9s</span><br><span class="line">	? Volume worldpress_db_data         Removed                                                   0.0s</span><br><span class="line">	? Network worldpress_default        Removed                                                   0.1s</span><br><span class="line"><span class="comment"># up compose</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker compose up -d</span><br><span class="line">[+] Running 4/4</span><br><span class="line"> ? Network worldpress_default        Created                                                   0.2s</span><br><span class="line"> ? Volume <span class="string">&quot;worldpress_db_data&quot;</span>       Created                                                   0.0s</span><br><span class="line"> ? Container worldpress-db-1         Started                                                   1.6s</span><br><span class="line"> ? Container worldpress-wordpress-1  Started</span><br><span class="line"><span class="comment"># see all volume</span></span><br><span class="line">kyp@u2204s:~/worldpress$ docker volume ls</span><br><span class="line">	DRIVER    VOLUME NAME</span><br><span class="line">	<span class="built_in">local</span>     7ad5fb69ccd51064dbe1f5c709925f26e98f1256aa7d60ff456cdab358af5cc7</span><br><span class="line">	<span class="built_in">local</span>     830a150b47b6434c66a09766c086defe47a80793f9575e029ed9b2d1c39075ae</span><br><span class="line">	<span class="built_in">local</span>     6892341e4d898108168f962de19aabecc82d32ecb50d965d529c538b9f07b142</span><br><span class="line">	<span class="built_in">local</span>     b81a54122bffcf2780380dda78d2bca3f4d77c6e3419186cf6ccc59b729853be</span><br><span class="line">	<span class="built_in">local</span>     e5ab93ff1977459b722e658a3463332055a734706bf1069280fb7498f5fafec4</span><br><span class="line">	<span class="built_in">local</span>     e9c0bcbebebe8ba4b2f6c3aaf1cc7e1eb2b2cafd3953c755599f1da610a7ddb6</span><br><span class="line">	<span class="built_in">local</span>     worldpress_db_data</span><br></pre></td></tr></table></figure>

<h4 id="REST-API"><a href="#REST-API" class="headerlink" title="REST API"></a>REST API</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># show docker control port</span></span><br><span class="line">kyp@u2204s:~/worldpress$ ps -ef | grep docker</span><br><span class="line">	root        1021       1 22 00:47 ?        00:21:53 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br><span class="line">	kyp         5390    1352  0 02:23 pts/0    00:00:00 grep --color=auto docker</span><br><span class="line">kyp@u2204s:~/worldpress$ sudo nano /lib/systemd/system/docker.service</span><br><span class="line"><span class="comment"># [Service]</span></span><br><span class="line"><span class="comment"># Type=notify</span></span><br><span class="line"><span class="comment"># # the default is not to use systemd for cgroups because the delegate issues still</span></span><br><span class="line"><span class="comment"># # exists and systemd currently does not support the cgroup feature set required</span></span><br><span class="line"><span class="comment"># # for containers run by docker</span></span><br><span class="line"><span class="comment"># ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2375 is default port</span></span><br><span class="line"><span class="comment"># [Service]</span></span><br><span class="line"><span class="comment"># Type=notify</span></span><br><span class="line"><span class="comment"># # the default is not to use systemd for cgroups because the delegate issues still</span></span><br><span class="line"><span class="comment"># # exists and systemd currently does not support the cgroup feature set required</span></span><br><span class="line"><span class="comment"># # for containers run by docker</span></span><br><span class="line"><span class="comment"># ExecStart=/usr/bin/dockerd -H fd:// -H=tcp://192.168.126.187:2375</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># change </span></span><br><span class="line"><span class="comment"># [Service]</span></span><br><span class="line"><span class="comment"># Type=notify</span></span><br><span class="line"><span class="comment"># # the default is not to use systemd for cgroups because the delegate issues still</span></span><br><span class="line"><span class="comment"># # exists and systemd currently does not support the cgroup feature set required</span></span><br><span class="line"><span class="comment"># # for containers run by docker</span></span><br><span class="line"><span class="comment"># ==================== change this line ==================</span></span><br><span class="line"><span class="comment"># ExecStart=/usr/bin/dockerd -H fd:// -H=tcp://192.168.126.187:5689</span></span><br><span class="line"><span class="comment"># =========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># clcal windows cmd command</span></span><br><span class="line">C:\Users\robertkao&gt;<span class="built_in">set</span> DOCKER_HOST=tcp://192.168.126.187:5689</span><br><span class="line"><span class="comment"># remote info</span></span><br><span class="line">C:\Users\robertkao&gt;docker info</span><br><span class="line">	Client:</span><br><span class="line">	Context:    default</span><br><span class="line">	Debug Mode: <span class="literal">false</span></span><br><span class="line">	Plugins:</span><br><span class="line">		buildx: Docker Buildx (Docker Inc., v0.9.1)</span><br><span class="line">		compose: Docker Compose (Docker Inc., v2.13.0)</span><br><span class="line">		dev: Docker Dev Environments (Docker Inc., v0.0.5)</span><br><span class="line">		extension: Manages Docker extensions (Docker Inc., v0.2.16)</span><br><span class="line">		sbom: View the packaged-based Software Bill Of Materials (SBOM) <span class="keyword">for</span> an image (Anchore Inc., 0.6.0)</span><br><span class="line">		scan: Docker Scan (Docker Inc., v0.22.0)</span><br><span class="line"></span><br><span class="line">	Server:</span><br><span class="line">	Containers: 0</span><br><span class="line">		Running: 0</span><br><span class="line">		Paused: 0</span><br><span class="line">		Stopped: 0</span><br><span class="line">	Images: 2</span><br><span class="line">	Server Version: 20.10.21</span><br><span class="line">	Storage Driver: overlay2</span><br><span class="line">		Backing Filesystem: extfs</span><br><span class="line">		Supports d_type: <span class="literal">true</span></span><br><span class="line">		Native Overlay Diff: <span class="literal">true</span></span><br><span class="line">		userxattr: <span class="literal">false</span></span><br><span class="line">	Logging Driver: json-file</span><br><span class="line">	Cgroup Driver: cgroupfs</span><br><span class="line">	Cgroup Version: 1</span><br><span class="line">	Plugins:</span><br><span class="line">		Volume: <span class="built_in">local</span></span><br><span class="line">		Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">		Log: awslogs fluentd gcplogs gelf journald json-file <span class="built_in">local</span> logentries splunk syslog</span><br><span class="line">	Swarm: inactive</span><br><span class="line">	Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux</span><br><span class="line">	Default Runtime: runc</span><br><span class="line">	Init Binary: docker-init</span><br><span class="line">	containerd version: 1e1ea6e986c6c86565bc33d52e34b81b3e2bc71f</span><br><span class="line">	runc version: v1.1.4-0-g5fd4c4d</span><br><span class="line">	init version: de40ad0</span><br><span class="line">	Security Options:</span><br><span class="line">		apparmor</span><br><span class="line">		seccomp</span><br><span class="line">		Profile: default</span><br><span class="line">	Kernel Version: 5.4.0-146-generic</span><br><span class="line">	Operating System: Ubuntu 20.04.6 LTS</span><br><span class="line">	OSType: linux</span><br><span class="line">	Architecture: x86_64</span><br><span class="line">	CPUs: 4</span><br><span class="line">	Total Memory: 3.839GiB</span><br><span class="line">	Name: u2204s</span><br><span class="line">	ID: XHSQ:JQBF:7Q5B:E5BR:RX7U:PQR7:JMGX:5C6O:B7XA:BHW2:544B:DCFN</span><br><span class="line">	Docker Root Dir: /var/lib/docker</span><br><span class="line">	Debug Mode: <span class="literal">false</span></span><br><span class="line">	Registry: https://index.docker.io/v1/</span><br><span class="line">	Labels:</span><br><span class="line">	Experimental: <span class="literal">false</span></span><br><span class="line">	Insecure Registries:</span><br><span class="line">		127.0.0.0/8</span><br><span class="line">	Live Restore Enabled: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">	WARNING: API is accessible on http://192.168.126.187:5689 without encryption.</span><br><span class="line">					Access to the remote API is equivalent to root access on the host. Refer</span><br><span class="line">					to the <span class="string">&#x27;Docker daemon attack surface&#x27;</span> section <span class="keyword">in</span> the documentation <span class="keyword">for</span></span><br><span class="line">					more information: https://docs.docker.com/go/attack-surface/</span><br><span class="line">	WARNING: No swap <span class="built_in">limit</span> support</span><br><span class="line"></span><br><span class="line"><span class="comment"># remote imahe ls</span></span><br><span class="line">C:\Users\robertkao&gt;docker image ls</span><br><span class="line">	REPOSITORY   TAG            IMAGE ID       CREATED         SIZE</span><br><span class="line">	wordpress    latest         3d55a510c77e   3 hours ago     616MB</span><br><span class="line">	mariadb      10.6.4-focal   12e05d5da3c5   17 months ago   409MB</span><br><span class="line"><span class="comment"># remote image pull</span></span><br><span class="line">C:\Users\robertkao&gt;docker pull httpd</span><br><span class="line">C:\Users\robertkao&gt;docker pull ubuntu</span><br><span class="line">C:\Users\robertkao&gt;docker image ls</span><br><span class="line">	REPOSITORY   TAG            IMAGE ID       CREATED         SIZE</span><br><span class="line">	wordpress    latest         3d55a510c77e   3 hours ago     616MB</span><br><span class="line">	httpd        latest         192d41583429   7 days ago      145MB</span><br><span class="line">	ubuntu       latest         08d22c0ceb15   3 weeks ago     77.8MB</span><br><span class="line">	mariadb      10.6.4-focal   12e05d5da3c5   17 months ago   409MB</span><br><span class="line"><span class="comment"># remote remove image</span></span><br><span class="line">C:\Users\robertkao&gt;docker rmi -f ubuntu</span><br><span class="line">	Untagged: ubuntu:latest</span><br><span class="line">	Untagged: ubuntu@sha256:67211c14fa74f070d27cc59d69a7fa9aeff8e28ea118ef3babc295a0428a6d21</span><br><span class="line">	Deleted: sha256:08d22c0ceb150ddeb2237c5fa3129c0183f3cc6f5eeb2e7aa4016da3ad02140a</span><br><span class="line"><span class="comment"># remote image ls</span></span><br><span class="line">C:\Users\robertkao&gt;docker image ls</span><br><span class="line">	REPOSITORY   TAG            IMAGE ID       CREATED         SIZE</span><br><span class="line">	wordpress    latest         3d55a510c77e   3 hours ago     616MB</span><br><span class="line">	httpd        latest         192d41583429   7 days ago      145MB</span><br><span class="line">	mariadb      10.6.4-focal   12e05d5da3c5   17 months ago   409MB</span><br></pre></td></tr></table></figure>

<h4 id="CI-continuous-integration-with-github-and-dockerhub"><a href="#CI-continuous-integration-with-github-and-dockerhub" class="headerlink" title="CI(continuous integration) with github and dockerhub"></a>CI(continuous integration) with github and dockerhub</h4><p>it doesn’t support dockerhub free account</p>
<h4 id="build-from-VirtualBox-share-folder"><a href="#build-from-VirtualBox-share-folder" class="headerlink" title="build from VirtualBox share folder"></a>build from VirtualBox share folder</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># show all disk</span></span><br><span class="line">sudo df -h</span><br><span class="line">	Filesystem                         Size  Used Avail Use% Mounted on</span><br><span class="line">	udev                               1.9G     0  1.9G   0% /dev</span><br><span class="line">	tmpfs                              394M  1.2M  393M   1% /run</span><br><span class="line">	/dev/mapper/ubuntu--vg-ubuntu--lv   29G   21G  6.6G  76% /</span><br><span class="line">	tmpfs                              2.0G     0  2.0G   0% /dev/shm</span><br><span class="line">	tmpfs                              5.0M     0  5.0M   0% /run/lock</span><br><span class="line">	tmpfs                              2.0G     0  2.0G   0% /sys/fs/cgroup</span><br><span class="line">	/dev/loop1                          64M   64M     0 100% /snap/core20/1828</span><br><span class="line">	/dev/loop2                          50M   50M     0 100% /snap/snapd/18596</span><br><span class="line">	/dev/loop0                          64M   64M     0 100% /snap/core20/1852</span><br><span class="line">	/dev/loop4                          92M   92M     0 100% /snap/lxd/24061</span><br><span class="line">	/dev/loop3                          50M   50M     0 100% /snap/snapd/18357</span><br><span class="line">	/dev/sda2                          2.0G  108M  1.7G   6% /boot</span><br><span class="line">	share                              932G  265G  668G  29% /media/sf_share</span><br><span class="line">	temp_share                         932G  265G  668G  29% /media/sf_temp_share</span><br><span class="line">	tmpfs                              394M     0  394M   0% /run/user/1000</span><br><span class="line"><span class="comment"># kyp add to GROUP vboxsf</span></span><br><span class="line">	sudo	usermod	-a -G	vboxsf	kyp</span><br><span class="line"><span class="comment"># show user kyp&#x27;s group</span></span><br><span class="line">groups kyp</span><br><span class="line">	kyp : kyp adm cdrom sudo dip plugdev lxd vboxsf docker</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># add symbolic sym_share to /media/sf_share</span></span><br><span class="line"><span class="comment"># remove symbolic as below </span></span><br><span class="line"><span class="comment"># rm -r sym_share</span></span><br><span class="line">ln -s /media/sf_share sym_share</span><br><span class="line">ls ./sym_share -al</span><br><span class="line">	lrwxrwxrwx 1 kyp kyp 15 Apr 11 01:57 ./sym_share -&gt; /media/sf_share</span><br><span class="line"><span class="built_in">cd</span> sym_share</span><br><span class="line">ls -al</span><br><span class="line">	total 4</span><br><span class="line">	drwxrwx--- 1 root vboxsf    0 Apr 10 08:46 .</span><br><span class="line">	drwxr-xr-x 6 root root   4096 Apr 10 08:49 ..</span><br><span class="line">	drwxrwx--- 1 root vboxsf    0 Apr 10 08:46 awesome-compose</span><br><span class="line"></span><br><span class="line"><span class="comment"># try build docker compose</span></span><br><span class="line"><span class="built_in">cd</span> awesome-compose/react-nginx/</span><br><span class="line">ls</span><br><span class="line">	compose.yaml  Dockerfile  output.png  package.json  package-lock.json  public  README.md  src</span><br><span class="line">docker compose up -d</span><br><span class="line"></span><br><span class="line"><span class="comment">#browser :　http://192.168.126.187</span></span><br></pre></td></tr></table></figure>

<h3 id="other-build"><a href="#other-build" class="headerlink" title="other build"></a>other build</h3><h4 id="awesome-compose-x2F-react-nginx"><a href="#awesome-compose-x2F-react-nginx" class="headerlink" title="awesome-compose&#x2F;react-nginx"></a><a target="_blank" rel="noopener" href="https://github.com/docker/awesome-compose">awesome-compose&#x2F;react-nginx</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># awesome-compose/react-nginx</span></span><br><span class="line">docker compose up -d</span><br><span class="line"><span class="comment">#browser open :　http://192.168.18.3:8085/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># compose ls</span></span><br><span class="line">kyp@u2204s:~/awesome-compose/react-nginx$ docker compose ls</span><br><span class="line">	NAME                STATUS              CONFIG FILES</span><br><span class="line">	compose_frontend    running(1)          /home/kyp/compose_frontend/docker-compose.yaml</span><br><span class="line">	react-nginx         running(1)          /home/kyp/awesome-compose/react-nginx/compose.yaml</span><br><span class="line"><span class="comment"># volume ls</span></span><br><span class="line">kyp@u2204s:~/awesome-compose/react-nginx$ docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line"><span class="comment"># compose down</span></span><br><span class="line">kyp@u2204s:~/awesome-compose/react-nginx$ docker compose down</span><br><span class="line">	[+] Running 2/2</span><br><span class="line">	? Container frontend           Removed                                    1.0s</span><br><span class="line">	? Network react-nginx_default  Removed                                    0.2s</span><br><span class="line">kyp@u2204s:~/awesome-compose/react-nginx$ docker compose ls</span><br><span class="line">	NAME                STATUS              CONFIG FILES</span><br><span class="line">	compose_frontend    running(1)          /home/kyp/compose_frontend/docker-compose.yaml</span><br></pre></td></tr></table></figure>

<h4 id="dockerizing-a-react-app"><a href="#dockerizing-a-react-app" class="headerlink" title="dockerizing-a-react-app"></a><a target="_blank" rel="noopener" href="https://jsramblings.com/dockerizing-a-react-app/">dockerizing-a-react-app</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clone react project from : https://github.com/jsramblings/react-webpack-setup</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dockerfile</span></span><br><span class="line">cat ./Dockerfile</span><br><span class="line">	<span class="comment"># ==== CONFIGURE =====</span></span><br><span class="line">	<span class="comment"># Use a Node 16 base image</span></span><br><span class="line">	FROM node:16-alpine</span><br><span class="line">	<span class="comment"># Set the working directory to /app inside the container</span></span><br><span class="line">	WORKDIR /app</span><br><span class="line">	<span class="comment"># Copy app files</span></span><br><span class="line">	COPY . .</span><br><span class="line">	<span class="comment"># ==== BUILD =====</span></span><br><span class="line">	<span class="comment"># Install dependencies (npm ci makes sure the exact versions in the lockfile gets installed)</span></span><br><span class="line">	RUN npm ci</span><br><span class="line">	<span class="comment"># Build the app</span></span><br><span class="line">	RUN npm run build</span><br><span class="line">	<span class="comment"># ==== RUN =======</span></span><br><span class="line">	<span class="comment"># Set the env to &quot;production&quot;</span></span><br><span class="line">	ENV NODE_ENV production</span><br><span class="line">	<span class="comment"># Expose the port on which the app will be running (3000 is the default that `serve` uses)</span></span><br><span class="line">	EXPOSE 3000</span><br><span class="line">	<span class="comment"># Start the app</span></span><br><span class="line">	CMD [ <span class="string">&quot;npx&quot;</span>, <span class="string">&quot;serve&quot;</span>, <span class="string">&quot;build&quot;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># dockerfile(yarn)</span></span><br><span class="line">cat ./Dockerfile</span><br><span class="line">	<span class="comment"># ==== CONFIGURE =====</span></span><br><span class="line">	<span class="comment"># Use a Node 16 base image</span></span><br><span class="line">	FROM node:16-alpine</span><br><span class="line">	<span class="comment"># Set the working directory to /app inside the container</span></span><br><span class="line">	WORKDIR /app</span><br><span class="line">	<span class="comment"># Copy app files</span></span><br><span class="line">	COPY . .</span><br><span class="line">	<span class="comment"># ==== BUILD =====</span></span><br><span class="line">	<span class="comment"># Install dependencies (npm ci makes sure the exact versions in the lockfile gets installed)</span></span><br><span class="line">	<span class="comment"># RUN npm ci</span></span><br><span class="line">	RUN yarn install --immutable --immutable-cache --check-cache</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Build the app</span></span><br><span class="line">	<span class="comment"># RUN npm run build</span></span><br><span class="line">	RUN yarn build</span><br><span class="line"></span><br><span class="line">	<span class="comment"># ==== RUN =======</span></span><br><span class="line">	<span class="comment"># Set the env to &quot;production&quot;</span></span><br><span class="line">	ENV NODE_ENV production</span><br><span class="line">	<span class="comment"># Expose the port on which the app will be running (3000 is the default that `serve` uses)</span></span><br><span class="line">	EXPOSE 3000</span><br><span class="line">	<span class="comment"># Start the app</span></span><br><span class="line">	CMD [ <span class="string">&quot;npx&quot;</span>, <span class="string">&quot;serve&quot;</span>, <span class="string">&quot;build&quot;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># build</span></span><br><span class="line"><span class="comment"># docker build -t my-app:2.0 .</span></span><br><span class="line">docker build  -t dockerized-react .</span><br><span class="line"><span class="comment"># images ls</span></span><br><span class="line">docker images</span><br><span class="line">	REPOSITORY             TAG         IMAGE ID       CREATED          SIZE</span><br><span class="line">	dockerized-react       latest      669dd6f91099   11 seconds ago   179MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># run</span></span><br><span class="line"><span class="comment"># docker run -d --name m20 -p 3000:3000 my-app:2.0</span></span><br><span class="line">docker run -p 3000:3000 -d dockerized-react</span><br><span class="line">docker container ls</span><br><span class="line">	CONTAINER ID   IMAGE              COMMAND                  CREATED          STATUS          PORTS                                       NAMES</span><br><span class="line">	d95649978f3c   dockerized-react   <span class="string">&quot;docker-entrypoint.s&quot;</span>   13 seconds ago   Up 11 seconds   0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp   jovial_wu</span><br><span class="line"></span><br><span class="line"><span class="comment"># browser : http://192.168.126.187:3000/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - itd not work</span></span><br><span class="line"><span class="comment"># -d：run指令的無數值參數，背景執行</span></span><br><span class="line"><span class="comment"># -i, --interactive=false     Keep STDIN open even if not attached</span></span><br><span class="line"><span class="comment"># -t, --tty=false             Allocate a pseudo-TTY</span></span><br></pre></td></tr></table></figure>

<h3 id="dockerfile-compare"><a href="#dockerfile-compare" class="headerlink" title="dockerfile compare"></a>dockerfile compare</h3><h4 id="1st-case"><a href="#1st-case" class="headerlink" title="1st case"></a>1st case</h4><h4 id="build-by-host"><a href="#build-by-host" class="headerlink" title="build by host"></a>build by host</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yarn install : not success</span></span><br><span class="line">yarn install --immutable --immutable-cache --check-cache</span><br><span class="line"><span class="comment"># build</span></span><br><span class="line">yarn build</span><br><span class="line"><span class="comment"># run </span></span><br><span class="line">sudo yarn start</span><br><span class="line"></span><br><span class="line"><span class="comment"># http://192.168.126.187:3000/</span></span><br></pre></td></tr></table></figure>
<h5 id="original"><a href="#original" class="headerlink" title="original"></a>original</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker build -t me:1.0 .</span></span><br><span class="line"><span class="comment"># docker run -d -p 3000:3000 me:1.0</span></span><br><span class="line"><span class="comment"># http://192.168.126.187:3000/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Node.js 16</span></span><br><span class="line">FROM  node:16-alpine as install</span><br><span class="line"></span><br><span class="line"><span class="comment"># work directory</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># copy package.json</span></span><br><span class="line">COPY package*.json ./</span><br><span class="line"></span><br><span class="line"><span class="comment"># yarn install </span></span><br><span class="line">RUN yarn install --silents</span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">FROM  node:16-alpine  as build</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY --from=install /app .</span><br><span class="line"></span><br><span class="line">RUN yarn build</span><br><span class="line"></span><br><span class="line">FROM  node:16-alpine </span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line">COPY --from=build /app .</span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">CMD [ <span class="string">&quot;yarn&quot;</span>, <span class="string">&quot;start&quot;</span> ]</span><br></pre></td></tr></table></figure>

<h5 id="copy-from-build-already"><a href="#copy-from-build-already" class="headerlink" title="copy from build already"></a>copy from build already</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># must build already</span></span><br><span class="line"><span class="comment"># docker build -t me:2.1 .</span></span><br><span class="line"><span class="comment"># docker run -d -p 3000:80 me:2.1</span></span><br><span class="line"><span class="comment"># http://192.168.126.187:3000/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use below nginx version</span></span><br><span class="line">FROM nginx:1.15.2-alpine</span><br><span class="line"><span class="comment"># Copy the build folder of the react app</span></span><br><span class="line">COPY ./build /var/www</span><br><span class="line"><span class="comment"># Copy the ngnix configrations</span></span><br><span class="line">COPY deployments/nginx.conf /etc/nginx/nginx.conf</span><br><span class="line"><span class="comment"># Expose it on port 80</span></span><br><span class="line"><span class="comment">#EXPOSE 3000</span></span><br><span class="line">ENTRYPOINT [<span class="string">&quot;nginx&quot;</span>,<span class="string">&quot;-g&quot;</span>,<span class="string">&quot;daemon off;&quot;</span>]</span><br></pre></td></tr></table></figure>

<h5 id="simple-build"><a href="#simple-build" class="headerlink" title="simple build"></a>simple build</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 產生如下錯誤,可能要修改 code, 可能內外 build 有差異</span></span><br><span class="line"><span class="comment"># docker build -t me:3.0 .</span></span><br><span class="line"><span class="comment">#		Step 9/11 : RUN yarn build</span></span><br><span class="line"><span class="comment">#		---&gt; Running in 298ba1f84b72</span></span><br><span class="line"><span class="comment">#		yarn run v1.22.19</span></span><br><span class="line"><span class="comment">#		$ react-scripts build</span></span><br><span class="line"><span class="comment">#		Creating an optimized production build...</span></span><br><span class="line"><span class="comment">#		Failed to compile.</span></span><br><span class="line"><span class="comment">#			Module not found: Error: Can&#x27;t resolve &#x27;config/CONSTANTS&#x27; in &#x27;/app/src/services/vote/2022highschooluniform&#x27;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#			info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.</span></span><br><span class="line"><span class="comment">#			error Command failed with exit code 1.</span></span><br><span class="line"><span class="comment">#			The command &#x27;/bin/sh -c yarn build&#x27; returned a non-zero code: 1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Node.js 18</span></span><br><span class="line">FROM  node:18-alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># work directory</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"><span class="comment"># Copy app files</span></span><br><span class="line"><span class="comment"># COPY . .</span></span><br><span class="line">COPY package*.json ./</span><br><span class="line">COPY *.js ./</span><br><span class="line">COPY deployments ./deployments</span><br><span class="line">COPY public ./public</span><br><span class="line">COPY src ./src</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ==== BUILD =====</span></span><br><span class="line"><span class="comment"># Install dependencies (npm ci makes sure the exact versions in the lockfile gets installed)</span></span><br><span class="line"><span class="comment"># RUN yarn install --immutable --immutable-cache --check-cache</span></span><br><span class="line">RUN yarn install --silents</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the app</span></span><br><span class="line">RUN yarn build</span><br><span class="line"></span><br><span class="line"><span class="comment"># ==== RUN =======</span></span><br><span class="line"><span class="comment"># Set the env to &quot;production&quot;</span></span><br><span class="line"><span class="comment"># ENV NODE_ENV production</span></span><br><span class="line"><span class="comment"># Expose the port on which the app will be running (3000 is the default that `serve` uses)</span></span><br><span class="line">EXPOSE 3000</span><br><span class="line"><span class="comment"># Start the app</span></span><br><span class="line">CMD [ <span class="string">&quot;npx&quot;</span>, <span class="string">&quot;serve&quot;</span>, <span class="string">&quot;build&quot;</span> ]</span><br></pre></td></tr></table></figure>

<h5 id="the-image-size"><a href="#the-image-size" class="headerlink" title="the image size"></a>the image size</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line">	REPOSITORY   TAG             IMAGE ID       CREATED          SIZE</span><br><span class="line">	me           2.1             0ffde4282fa4   32 minutes ago   96.4MB</span><br><span class="line">	me           1.0             062745f0e5e9   4 hours ago      790MB</span><br><span class="line">	node         16-alpine       8cf71856f96e   2 weeks ago      117MB</span><br><span class="line">	node         18-alpine       305c985a481f   2 weeks ago      175MB</span><br><span class="line">	nginx        1.15.2-alpine   36f3464a2197   4 years ago      18.6MB</span><br></pre></td></tr></table></figure>

<h3 id="Tool"><a href="#Tool" class="headerlink" title="Tool"></a>Tool</h3><h4 id="dive"><a href="#dive" class="headerlink" title="dive"></a><a target="_blank" rel="noopener" href="https://github.com/wagoodman/dive/blob/master/README.md">dive</a></h4><h5 id="install"><a href="#install" class="headerlink" title="install"></a>install</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/wagoodman/dive/releases/download/v0.9.2/dive_0.9.2_linux_amd64.deb</span><br><span class="line">sudo apt install ./dive_0.9.2_linux_amd64.deb</span><br><span class="line"><span class="comment"># check version</span></span><br><span class="line">dive --version</span><br><span class="line">	dive 0.9.2</span><br></pre></td></tr></table></figure>

<h5 id="run"><a href="#run" class="headerlink" title="run"></a>run</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dive node:16-alpine</span><br></pre></td></tr></table></figure>


<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">Install Docker Engine</a></li>
<li><a target="_blank" rel="noopener" href="https://ranchermanager.docs.rancher.com/v2.5/getting-started/installation-and-upgrade/installation-requirements/install-docker">Installing Docker script</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/docker/awesome-compose">Awesome Compose</a></li>
<li><a target="_blank" rel="noopener" href="https://cutejaneii.gitbook.io/docker/">Jennifer Docker 筆記本</a></li>
<li><a target="_blank" rel="noopener" href="https://www.copycat.dev/blog/reactjs-build-production/">Reactjs Build Production</a></li>
<li><a target="_blank" rel="noopener" href="https://peihsinsu.gitbooks.io/docker-note-book/content/">Docker學習筆記</a></li>
<li><a target="_blank" rel="noopener" href="https://hub.docker.com/search?q=">dockerhub</a></li>
<li><a target="_blank" rel="noopener" href="https://philipzheng.gitbook.io/docker_practice/">Docker 入門到實踐</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/docker/" rel="tag"># docker</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/03/22/ai-3/" rel="prev" title="chatgpt for web coding">
                  <i class="fa fa-chevron-left"></i> chatgpt for web coding
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/03/31/linux-1/" rel="next" title="Linux 說明">
                  Linux 說明 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Robert Kao</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="總字數">2.7m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">40:58</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>






  




  


<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://hot5656-blog.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://hot5656.github.io/2023/03/28/docker-1/";
    this.page.identifier = "2023/03/28/docker-1/";
    this.page.title = "docker 說明";
    };
  NexT.utils.loadComments('#disqus_thread', () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://hot5656-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
