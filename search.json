[{"title":"chrome Issue","url":"/2021/05/06/chrome-1/","content":"<h3 id=\"Chrome-local-test-使用-network-monitor-有問題\"><a href=\"#Chrome-local-test-使用-network-monitor-有問題\" class=\"headerlink\" title=\"Chrome local test 使用 network monitor 有問題\"></a>Chrome local test 使用 network monitor 有問題</h3><h4 id=\"改用-Brave-正常\"><a href=\"#改用-Brave-正常\" class=\"headerlink\" title=\"改用 Brave 正常\"></a>改用 Brave 正常</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// http_server1.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> server = http.createServer(handleRequest)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">req, res</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(req.url)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.write(<span class=\"string\">&#x27;welcome&#x27;</span>)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/hello&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.write(<span class=\"string\">&#x27;hello&#x27;</span>)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/redirect&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.writeHead(<span class=\"number\">200</span>, &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;Robert&#x27;</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/redirect2&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.writeHead(<span class=\"number\">302</span>, &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;location&#x27;</span>: <span class=\"string\">&#x27;/hello&#x27;</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tres.writeHead(<span class=\"number\">404</span>)</span><br><span class=\"line\">\tres.end()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server.listen(<span class=\"number\">5000</span>)</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node http_server1.js</span><br><span class=\"line\">/redirect</span><br></pre></td></tr></table></figure>\n\n<div style=\"width:650px\">\n    <img src=\"/2021/05/06/chrome-1/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<div style=\"width:700px\">\n    <img src=\"/2021/05/06/chrome-1/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<h4 id=\"看不到-network-monitor-是因為選JS-應選All\"><a href=\"#看不到-network-monitor-是因為選JS-應選All\" class=\"headerlink\" title=\"看不到 network monitor 是因為選JS(應選All)\"></a>看不到 network monitor 是因為選JS(應選All)</h4><p>總是有 util.js 和 pagejs.js 是因為 chrome 安裝了 SmartPKI 多憑證安控模組擴充套件</p>\n<div style=\"width:650px\">\n    <img src=\"/2021/05/06/chrome-1/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n\n","categories":["Front End"],"tags":["chrome"]},{"title":"Git 使用參考","url":"/2021/03/14/git-1/","content":"<h2 id=\"git-命令\"><a href=\"#git-命令\" class=\"headerlink\" title=\"git 命令\"></a>git 命令</h2><h3 id=\"git-init\"><a href=\"#git-init\" class=\"headerlink\" title=\"git init\"></a>git init</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Branch\"><a href=\"#Branch\" class=\"headerlink\" title=\"Branch\"></a>Branch</h3><h4 id=\"建立新分支-backup\"><a href=\"#建立新分支-backup\" class=\"headerlink\" title=\"建立新分支 backup\"></a>建立新分支 backup</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 建立新分支 issue1</span></span><br><span class=\"line\">git branch issue1</span><br><span class=\"line\"><span class=\"comment\"># 建立新分支 backup 同時切過去</span></span><br><span class=\"line\">git checkout -b backup</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h4 id=\"see-branch\"><a href=\"#see-branch\" class=\"headerlink\" title=\"see branch\"></a>see branch</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># see local branch</span></span><br><span class=\"line\">git branch</span><br><span class=\"line\"><span class=\"comment\"># see remote branch</span></span><br><span class=\"line\">git branch -r</span><br><span class=\"line\"><span class=\"comment\"># see local and remote branch</span></span><br><span class=\"line\">git branch -a</span><br><span class=\"line\"><span class=\"comment\"># see branch 詳細</span></span><br><span class=\"line\">git branch -v </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"本地參考儲存庫\"><a href=\"#本地參考儲存庫\" class=\"headerlink\" title=\"本地參考儲存庫\"></a>本地參考儲存庫</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git show-ref</span><br><span class=\"line\">\td9c9e57d12c9dbdc1b9445fa3333cd7e637c888d refs&#x2F;heads&#x2F;master</span><br><span class=\"line\">\td9c9e57d12c9dbdc1b9445fa3333cd7e637c888d refs&#x2F;heads&#x2F;serverfix</span><br><span class=\"line\">\t7369a897219619143420b24c9df7383ddca643a2 refs&#x2F;remotes&#x2F;origin&#x2F;HEAD</span><br><span class=\"line\">\t7369a897219619143420b24c9df7383ddca643a2 refs&#x2F;remotes&#x2F;origin&#x2F;master</span><br><span class=\"line\">\t37d73f1a945ece85dffe798ba7ae43733bf1f4aa refs&#x2F;remotes&#x2F;team&#x2F;master</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"更改-branch-名稱\"><a href=\"#更改-branch-名稱\" class=\"headerlink\" title=\"更改 branch 名稱\"></a>更改 branch 名稱</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># m 大小寫皆可</span></span><br><span class=\"line\">git branch -M main</span><br><span class=\"line\">git branch -m main</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"刪除-branch\"><a href=\"#刪除-branch\" class=\"headerlink\" title=\"刪除 branch\"></a>刪除 branch</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git branch -d work1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"checkout-to-branch\"><a href=\"#checkout-to-branch\" class=\"headerlink\" title=\"checkout to branch\"></a>checkout to branch</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout backup</span><br><span class=\"line\"><span class=\"comment\">### checkout 某一個 commit</span></span><br><span class=\"line\">git checkout 1f0aa12</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Commit\"><a href=\"#Commit\" class=\"headerlink\" title=\"Commit\"></a>Commit</h3><h4 id=\"add-all-file\"><a href=\"#add-all-file\" class=\"headerlink\" title=\"add all file\"></a>add all file</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 所有這個目錄(含子層)</span></span><br><span class=\"line\">git add .</span><br><span class=\"line\"><span class=\"comment\"># 所有專案(兩個命令相同)</span></span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git add --all </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"還原檔案修改\"><a href=\"#還原檔案修改\" class=\"headerlink\" title=\"還原檔案修改\"></a>還原檔案修改</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout -- branch_test.txt</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-commit\"><a href=\"#add-commit\" class=\"headerlink\" title=\"add commit\"></a>add commit</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># commit</span></span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;1st commit&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># add modify and commit</span></span><br><span class=\"line\"><span class=\"comment\"># 僅加入修改,不會加入新檔案</span></span><br><span class=\"line\">git commit -am <span class=\"string\">&quot;update 2021/04/12&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"更動最後一筆-commit-說明\"><a href=\"#更動最後一筆-commit-說明\" class=\"headerlink\" title=\"更動最後一筆 commit 說明\"></a>更動最後一筆 commit 說明</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git commit --amend</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"移除最後一次-commit\"><a href=\"#移除最後一次-commit\" class=\"headerlink\" title=\"移除最後一次 commit\"></a>移除最後一次 commit</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 移除最後一次 commit,檔案修改不保留</span></span><br><span class=\"line\">git reset HEAD^ --hard</span><br><span class=\"line\"><span class=\"comment\"># 移除最後一次 commit,保留檔案修改</span></span><br><span class=\"line\"><span class=\"comment\"># 兩個命令完全一樣</span></span><br><span class=\"line\">git reset HEAD^ --soft</span><br><span class=\"line\">git reset HEAD^</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"list-commit\"><a href=\"#list-commit\" class=\"headerlink\" title=\"list commit\"></a>list commit</h4><blockquote>\n<p>但只列出雜湊碼,所以不清楚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># list remote commit</span></span><br><span class=\"line\">git rev-list --remotes</span><br><span class=\"line\"><span class=\"comment\"># list all commit</span></span><br><span class=\"line\">git rev-list -–all</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"dump-modify-status\"><a href=\"#dump-modify-status\" class=\"headerlink\" title=\"dump modify status\"></a>dump modify status</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git status</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"list-all-file\"><a href=\"#list-all-file\" class=\"headerlink\" title=\"list all file\"></a>list all file</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git ls-files</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"復原已staged的檔案-unstage\"><a href=\"#復原已staged的檔案-unstage\" class=\"headerlink\" title=\"復原已staged的檔案 unstage\"></a>復原已staged的檔案 unstage</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 單一檔案</span></span><br><span class=\"line\">git reset HEAD &lt;file&gt;</span><br><span class=\"line\"><span class=\"comment\"># 所有檔案</span></span><br><span class=\"line\">git reset</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看被修改檔案的內容\"><a href=\"#查看被修改檔案的內容\" class=\"headerlink\" title=\"查看被修改檔案的內容\"></a>查看被修改檔案的內容</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git diff <span class=\"built_in\">source</span>/_posts/os-1.md</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Remote\"><a href=\"#Remote\" class=\"headerlink\" title=\"Remote\"></a>Remote</h3><h4 id=\"push-origin-to-remote\"><a href=\"#push-origin-to-remote\" class=\"headerlink\" title=\"push origin to remote\"></a>push origin to remote</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 若 remote 無 backup</span></span><br><span class=\"line\">git push -u origin backup</span><br><span class=\"line\"><span class=\"comment\"># 若 remote 有 backup</span></span><br><span class=\"line\">git push origin backup</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"fetch\"><a href=\"#fetch\" class=\"headerlink\" title=\"fetch\"></a>fetch</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 抓回遠端分支</span></span><br><span class=\"line\">git fetch</span><br><span class=\"line\"><span class=\"comment\"># 抓回遠端分支 origin/backup</span></span><br><span class=\"line\">git fetch origin backup</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"pull\"><a href=\"#pull\" class=\"headerlink\" title=\"pull\"></a>pull</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># git pull = git fetch + git merge</span></span><br><span class=\"line\">git pull</span><br><span class=\"line\"><span class=\"comment\"># pull 遠端分支 origin/backup</span></span><br><span class=\"line\">git pull origin/backup</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-origin-remote-server\"><a href=\"#add-origin-remote-server\" class=\"headerlink\" title=\"add origin(remote server)\"></a>add origin(remote server)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/hot5656/blog.git</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"change-origin-setting\"><a href=\"#change-origin-setting\" class=\"headerlink\" title=\"change origin setting\"></a>change origin setting</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote set-url origin https://github.com/hot5656/blog.git</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"更改-遠端儲存庫名\"><a href=\"#更改-遠端儲存庫名\" class=\"headerlink\" title=\"更改 遠端儲存庫名\"></a>更改 遠端儲存庫名</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote rename pb paul</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"移除-遠端儲存庫\"><a href=\"#移除-遠端儲存庫\" class=\"headerlink\" title=\"移除 遠端儲存庫\"></a>移除 遠端儲存庫</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote rm paul</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"dump-remote-server-setting\"><a href=\"#dump-remote-server-setting\" class=\"headerlink\" title=\"dump remote server setting\"></a>dump remote server setting</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Other\"><a href=\"#Other\" class=\"headerlink\" title=\"Other\"></a>Other</h3><h4 id=\"dump-log-commit-紀錄\"><a href=\"#dump-log-commit-紀錄\" class=\"headerlink\" title=\"dump log (commit 紀錄)\"></a>dump log (commit 紀錄)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span></span><br><span class=\"line\"><span class=\"comment\"># 每一個 commint 僅列一行</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --oneline</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"merge\"><a href=\"#merge\" class=\"headerlink\" title=\"merge\"></a>merge</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># merge 其他 branch</span></span><br><span class=\"line\">git merge new-feature</span><br><span class=\"line\"><span class=\"comment\"># origin/master 分支 合併到 master 分支</span></span><br><span class=\"line\">git merge origin/master</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"remove-刪除檔案\"><a href=\"#remove-刪除檔案\" class=\"headerlink\" title=\"remove 刪除檔案\"></a>remove 刪除檔案</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git rm home/week6/hw1/css/index.css.map</span><br><span class=\"line\"><span class=\"comment\"># 若以改過要刪除</span></span><br><span class=\"line\">git rm -f home/week6/hw1/css/index.css.map</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"undo-1st-commit-not-lose-data\"><a href=\"#undo-1st-commit-not-lose-data\" class=\"headerlink\" title=\"undo 1st commit - not lose data\"></a>undo 1st commit - not lose data</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 會刪除所有中間 commit 資料</span></span><br><span class=\"line\">git update-ref -d HEAD</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"undo-1-commit-not-lose-data\"><a href=\"#undo-1-commit-not-lose-data\" class=\"headerlink\" title=\"undo 1 commit - not lose data\"></a>undo 1 commit - not lose data</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git reset --soft HEAD~1</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"git-相關檔案\"><a href=\"#git-相關檔案\" class=\"headerlink\" title=\"git 相關檔案\"></a>git 相關檔案</h2><h3 id=\"gitignore\"><a href=\"#gitignore\" class=\"headerlink\" title=\".gitignore\"></a>.gitignore</h3><p>指定忽略的規則 : 資料庫的存取密碼, AWS 伺服器的存取金鑰, 或編譯產生檔案…</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 忽略 secret.yml 檔案</span></span><br><span class=\"line\">secret.yml</span><br><span class=\"line\"><span class=\"comment\"># 忽略 config 目錄下的 database.yml 檔案</span></span><br><span class=\"line\">config/database.yml</span><br><span class=\"line\"><span class=\"comment\"># 忽略所有 db 目錄下附檔名是 .sqlite3 的檔案</span></span><br><span class=\"line\">/db/*.sqlite3</span><br><span class=\"line\"><span class=\"comment\"># 忽略所有附檔名是 .tmp 的檔案</span></span><br><span class=\"line\">*.tmp</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"gitkeep\"><a href=\"#gitkeep\" class=\"headerlink\" title=\".gitkeep\"></a>.gitkeep</h3><p>可提交一個空目錄</p>\n","categories":["Coding"],"tags":["git"]},{"title":"Git 在windows 下中文亂碼的問題","url":"/2021/03/23/git-3/","content":"<h3 id=\"gitk-中文亂碼\"><a href=\"#gitk-中文亂碼\" class=\"headerlink\" title=\"gitk 中文亂碼\"></a>gitk 中文亂碼</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global core.quotepath <span class=\"literal\">false</span>   \t\t <span class=\"comment\">#顯示status編碼</span></span><br><span class=\"line\">git config --global gui.encoding utf-8\t\t\t <span class=\"comment\">#圖形界面編碼</span></span><br><span class=\"line\">git config --global i18n.commit.encoding utf-8   \t <span class=\"comment\">#提交信息編碼</span></span><br><span class=\"line\">git config --global i18n.logoutputencoding utf-8\t <span class=\"comment\">#輸出log編碼</span></span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n<h3 id=\"warning-LF-will-be-replaced-by-CRLF-in-xxxxx\"><a href=\"#warning-LF-will-be-replaced-by-CRLF-in-xxxxx\" class=\"headerlink\" title=\"warning: LF will be replaced by CRLF in xxxxx\"></a>warning: LF will be replaced by CRLF in xxxxx</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global core.autocrlf <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"hexo-d-or-git-commit-m-含中文-Warning\"><a href=\"#hexo-d-or-git-commit-m-含中文-Warning\" class=\"headerlink\" title=\"hexo d or git commit -m 含中文 Warning\"></a>hexo d or git commit -m 含中文 Warning</h3><p>Warning: Your console font probably doesn’t support Unicode.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global core.quotepath off</span><br><span class=\"line\">git config --global --<span class=\"built_in\">unset</span> i18n.logoutputencoding</span><br><span class=\"line\">git config --global --<span class=\"built_in\">unset</span> i18n.commitencoding</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"git-log-中文亂碼\"><a href=\"#git-log-中文亂碼\" class=\"headerlink\" title=\"git log 中文亂碼\"></a>git log 中文亂碼</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span> --oneline</span><br><span class=\"line\">9a4c0ad (HEAD -&gt; master) add react/todolist-simulate</span><br><span class=\"line\">67e1fd1 (origin/master) add home/week17/draw <span class=\"keyword\">for</span> lottery api</span><br><span class=\"line\">83067f7 1. add be2 add ex2,ex3  by express 2. add home/week17/blog by expres</span><br><span class=\"line\">03332c5 b02 add bootstrap</span><br><span class=\"line\">eb2da5b add be2</span><br><span class=\"line\">8d22b8d update 2021/7/30 <span class=\"keyword\">for</span> some mysql DB update</span><br><span class=\"line\">9064c08 1. week11/blog fix issue strtval() and add sftp.json</span><br><span class=\"line\">78725c8 1. gulp, sass, webpack practice 2. blog change to scss 3. week8/hw2 change to fetch 4. add comment_api plogin</span><br><span class=\"line\">39285c6 Todo List BS4 update 2021/7/7-2</span><br><span class=\"line\">2668226 1. Todo List BS4 update 2021/7/7 2. comment_api &lt;E5&gt;&lt;85&gt;&lt;8D&gt;&lt;E8&gt;&lt;A8&gt;&lt;BB&gt;&lt;E5&gt;&lt;86&gt;&lt;8A&gt;&lt;E7&gt;&lt;95&gt;&lt;99&gt;&lt;E8&gt;&lt;A8&gt;&lt;80&gt;&lt;E6&gt;&lt;9D&gt;&lt;BF&gt;(API) update 2021/7/7</span><br><span class=\"line\">c8362fe Todo List BS4 update fix some issue</span><br><span class=\"line\">6c1e5c9 comment_api &lt;E5&gt;&lt;85&gt;&lt;8D&gt;&lt;E8&gt;&lt;A8&gt;&lt;BB&gt;&lt;E5&gt;&lt;86&gt;&lt;8A&gt;&lt;E7&gt;&lt;95&gt;&lt;99&gt;&lt;E8&gt;&lt;A8&gt;&lt;80&gt;&lt;E6&gt;&lt;9D&gt;&lt;BF&gt;(API) update 2021/7/6</span><br><span class=\"line\">4332e80 Todo List BS4 modify checkbox change event<span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">b57753b Todo List BS4 add todo edit</span></span><br><span class=\"line\"><span class=\"string\">d8cf243 1. add comment_api &lt;E5&gt;&lt;85&gt;&lt;8D&gt;&lt;E8&gt;&lt;A8&gt;&lt;BB&gt;&lt;E5&gt;&lt;86&gt;&lt;8A&gt;&lt;E7&gt;&lt;95&gt;&lt;99&gt;&lt;E8&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;A8&gt;&lt;80&gt;&lt;E6&gt;&lt;9D&gt;&lt;BF&gt;(API) 2. add BS4 todo list</span></span><br><span class=\"line\"><span class=\"string\">489779a add jQuery and Bootstrap 4 practice</span></span><br><span class=\"line\"><span class=\"string\">a164f76 update blog 1. &lt;E9&gt;&lt;A6&gt;&lt;96&gt;&lt;E9&gt;&lt;A0&gt;&lt;81&gt;,&lt;E5&gt;&lt;88&gt;&lt;86&gt;&lt;E9&gt;&lt;A1&gt;&lt;9E&gt;,more</span></span><br><span class=\"line\"><span class=\"string\">&lt;E9&gt;&lt;A0&gt;&lt;81&gt;&lt;E9&gt;&lt;9D&gt;&lt;A2&gt;&lt;E5&gt;&lt;8A&gt;&lt;A0&gt;&lt;E7&gt;&lt;B7&gt;&lt;A8&gt;&lt;E8&gt;&lt;BC&gt;&lt;AF&gt;&lt;E5&gt;&lt;8A&gt;&lt;9F&gt;&lt;E8&gt;&lt;83&gt;&lt;BD&gt; 2. Header &lt;E6&gt;&lt;8F&gt;&lt;90&gt;&lt;E5&gt;&lt;87&gt;&lt;BA&gt;&lt;E4&gt;&lt;BE&gt;&lt;86&gt;&lt;E6&gt;&lt;88&gt;&lt;90&gt;&lt;E5&gt;&lt;8F&gt;&lt;A6&gt;&lt;E4&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;B8&gt;&lt;80&gt;&lt;E5&gt;&lt;80&gt;&lt;8B&gt;&lt;E6&gt;&lt;AA&gt;&lt;94&gt;&lt;E6&gt;&lt;A1&gt;&lt;88&gt; 3. edit &lt;E5&gt;&lt;B0&gt;&lt;8E&gt;&lt;E8&gt;&lt;87&gt;&lt;B3&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> LC_ALL=C.UTF-8</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">D:\\work_google\\share\\li&gt;git <span class=\"built_in\">log</span> --oneline</span><br><span class=\"line\">9a4c0ad (HEAD -&gt; master) add react/todolist-simulate</span><br><span class=\"line\">67e1fd1 (origin/master) add home/week17/draw <span class=\"keyword\">for</span> lottery api</span><br><span class=\"line\">83067f7 1. add be2 add ex2,ex3  by express 2. add home/week17/blog by expres</span><br><span class=\"line\">03332c5 b02 add bootstrap</span><br><span class=\"line\">eb2da5b add be2</span><br><span class=\"line\">8d22b8d update 2021/7/30 <span class=\"keyword\">for</span> some mysql DB update</span><br><span class=\"line\">9064c08 1. week11/blog fix issue strtval() and add sftp.json</span><br><span class=\"line\">78725c8 1. gulp, sass, webpack practice 2. blog change to scss 3. week8/hw2 change to fetch 4. add comment_api plogin</span><br><span class=\"line\">39285c6 Todo List BS4 update 2021/7/7-2</span><br><span class=\"line\">2668226 1. Todo List BS4 update 2021/7/7 2. comment_api 免註冊留言板(API) update 2021/7/7</span><br><span class=\"line\">c8362fe Todo List BS4 update fix some issue</span><br><span class=\"line\">6c1e5c9 comment_api 免註冊留言板(API) update 2021/7/6</span><br><span class=\"line\">4332e80 Todo List BS4 modify checkbox change event<span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">b57753b Todo List BS4 add todo edit</span></span><br><span class=\"line\"><span class=\"string\">d8cf243 1. add comment_api 免註冊留言板(API) 2. add BS4 todo list</span></span><br><span class=\"line\"><span class=\"string\">489779a add jQuery and Bootstrap 4 practice</span></span><br><span class=\"line\"><span class=\"string\">a164f76 update blog 1. 首頁,分類,more頁面加編輯功能 2. Header 提出來成另一個檔案 3. edit 導至原進入網頁 4. 顯示部分限制 by php md_substr()</span></span><br><span class=\"line\"><span class=\"string\">2e826fe update blog 1. add CKEditor 2. 分類功能 3. 分頁功能 4. 關於我頁面</span></span><br><span class=\"line\"><span class=\"string\">b0b349c blog add php code</span></span><br><span class=\"line\"><span class=\"string\">655cc8f add blog</span></span><br><span class=\"line\"><span class=\"string\">5280ef3 commit 權限管理改為可彈性設定</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"參考文件\"><a href=\"#參考文件\" class=\"headerlink\" title=\"參考文件\"></a>參考文件</h3><ul>\n<li><a href=\"https://gist.github.com/nightire/5069597\">解决 Git 在windows 下中文亂碼的問題</a></li>\n</ul>\n","categories":["Coding"],"tags":["git","issue"]},{"title":"Git install","url":"/2021/03/24/git-4/","content":"<h2 id=\"git-install-windowns\"><a href=\"#git-install-windowns\" class=\"headerlink\" title=\"git install(windowns)\"></a>git install(windowns)</h2><div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n<span id=\"more\"></span>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n\n\n<h2 id=\"git-update-windowns\"><a href=\"#git-update-windowns\" class=\"headerlink\" title=\"git update(windowns)\"></a>git update(windowns)</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># git version 2.31.0.windows.1(2021/03/24)</span></span><br><span class=\"line\">git update-git-for-windows</span><br></pre></td></tr></table></figure>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic22.png\" class=\"\" title=\"pic22\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic23.png\" class=\"\" title=\"pic23\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic24.png\" class=\"\" title=\"pic24\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/24/git-4/pic25.png\" class=\"\" title=\"pic25\">\n</div>\n\n","categories":["Coding"],"tags":["git"]},{"title":"GitHub 使用","url":"/2021/04/14/git-5/","content":"<h3 id=\"Show-History\"><a href=\"#Show-History\" class=\"headerlink\" title=\"Show History\"></a>Show History</h3><div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<span id=\"more\"></span>\n\n<ul>\n<li>顯示修改內容</li>\n</ul>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<h3 id=\"Put-code-to-GitHub\"><a href=\"#Put-code-to-GitHub\" class=\"headerlink\" title=\"Put code to GitHub\"></a>Put code to GitHub</h3><h4 id=\"GitHub-generate-a-respsitory\"><a href=\"#GitHub-generate-a-respsitory\" class=\"headerlink\" title=\"GitHub generate a respsitory\"></a>GitHub generate a respsitory</h4><div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic31.png\" class=\"\" title=\"pic31\">\n</div>\n\n<h4 id=\"Create-a-new-repository-on-the-command-line\"><a href=\"#Create-a-new-repository-on-the-command-line\" class=\"headerlink\" title=\"Create a new repository on the command line\"></a>Create a new repository on the command line</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git add README.md</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;first commit&quot;</span></span><br><span class=\"line\">git remote add origin https://github.com/hot5656/html_demo.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Push-an-existing-repository-from-the-command-line\"><a href=\"#Push-an-existing-repository-from-the-command-line\" class=\"headerlink\" title=\"Push an existing repository from the command line\"></a>Push an existing repository from the command line</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/hot5656/html_demo.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Pull-Request（PR）\"><a href=\"#Pull-Request（PR）\" class=\"headerlink\" title=\"Pull Request（PR）\"></a>Pull Request（PR）</h3><h4 id=\"Setting-request\"><a href=\"#Setting-request\" class=\"headerlink\" title=\"Setting request\"></a>Setting request</h4><blockquote>\n<p>Compare &amp; pull request</p>\n</blockquote>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic22.png\" class=\"\" title=\"pic22\">\n</div>\n\n<h4 id=\"Checking-merge-status\"><a href=\"#Checking-merge-status\" class=\"headerlink\" title=\"Checking merge status\"></a>Checking merge status</h4><div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic23.png\" class=\"\" title=\"pic23\">\n</div>\n\n<blockquote>\n<p>Nwe pull request : 未加入等待 merge<br>Open   : 待 merge<br>Merged : merge 完成</p>\n</blockquote>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic24.png\" class=\"\" title=\"pic24\">\n</div>\n\n\n<h4 id=\"Complete-merge\"><a href=\"#Complete-merge\" class=\"headerlink\" title=\"Complete merge\"></a>Complete merge</h4><div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic25.png\" class=\"\" title=\"pic25\">\n</div>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic26.png\" class=\"\" title=\"pic26\">\n</div>\n\n<blockquote>\n<p>Check modify </p>\n</blockquote>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic27.png\" class=\"\" title=\"pic27\">\n</div>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic28.png\" class=\"\" title=\"pic28\">\n</div>\n\n<blockquote>\n<p>Run merge  </p>\n</blockquote>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic29.png\" class=\"\" title=\"pic29\">\n</div>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic2a.png\" class=\"\" title=\"pic2a\">\n</div>\n<div style=\"width:700px\">\n    <img src=\"/2021/04/14/git-5/pic2b.png\" class=\"\" title=\"pic2b\">\n</div>\n\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><p><a href=\"https://gitbook.tw/chapters/github/pull-request.html\">使用 Pull Request（PR）</a><br><a href=\"https://guides.github.com/introduction/flow/\">GitHub flow</a><br><a href=\"https://dotblogs.com.tw/AceLee/2020/04/07/002126\">使用 Git Hooks 驗證 local commit 資料</a></p>\n","categories":["Coding"],"tags":["git","github"]},{"title":"Git Issue","url":"/2021/04/19/git-6/","content":"<h3 id=\"stdin-is-not-a-tty-Windows-Git-Bash\"><a href=\"#stdin-is-not-a-tty-Windows-Git-Bash\" class=\"headerlink\" title=\"stdin is not a tty (Windows Git Bash)\"></a>stdin is not a tty (Windows Git Bash)</h3><h4 id=\"先進入-bash-再執行\"><a href=\"#先進入-bash-再執行\" class=\"headerlink\" title=\"先進入 bash 再執行\"></a>先進入 bash 再執行</h4><div style=\"width:500px\">\n    <img src=\"/2021/04/19/git-6/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<span id=\"more\"></span>\n\n<h4 id=\"其他執行方法\"><a href=\"#其他執行方法\" class=\"headerlink\" title=\"其他執行方法\"></a>其他執行方法</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat input.txt | env node lioj_1014.js</span><br><span class=\"line\">cat input.txt | <span class=\"built_in\">command</span> node lioj_1014.js</span><br></pre></td></tr></table></figure>\n","categories":["Coding"],"tags":["git"]},{"title":"Put Hexo to GitHub","url":"/2021/03/12/hexo-1/","content":"<h2 id=\"基本設定\"><a href=\"#基本設定\" class=\"headerlink\" title=\"基本設定\"></a>基本設定</h2><h3 id=\"Install-Hexo\"><a href=\"#Install-Hexo\" class=\"headerlink\" title=\"Install Hexo\"></a>Install Hexo</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Dump-version\"><a href=\"#Dump-version\" class=\"headerlink\" title=\"Dump version\"></a>Dump version</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo version</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h3 id=\"inition-Blog\"><a href=\"#inition-Blog\" class=\"headerlink\" title=\"inition Blog\"></a>inition Blog</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo init robert_blog</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Install-all-package-for-Blog\"><a href=\"#Install-all-package-for-Blog\" class=\"headerlink\" title=\"Install all package for Blog\"></a>Install all package for Blog</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> robert_blog</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"GitHub-generate-a-respsitory-使用自己的帳號名稱\"><a href=\"#GitHub-generate-a-respsitory-使用自己的帳號名稱\" class=\"headerlink\" title=\"GitHub generate a respsitory(使用自己的帳號名稱)\"></a>GitHub generate a respsitory(使用自己的帳號名稱)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hot5656.github.io</span><br></pre></td></tr></table></figure>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/12/hexo-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h3 id=\"編輯部落格下檔案-config-yml\"><a href=\"#編輯部落格下檔案-config-yml\" class=\"headerlink\" title=\"編輯部落格下檔案 _config.yml\"></a>編輯部落格下檔案 _config.yml</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repository:</span> <span class=\"string\">&#x27;https://github.com/hot5656/hot5656.github.io.git&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"install-hexo-deployer-git-for-config-yml’s-type-git\"><a href=\"#install-hexo-deployer-git-for-config-yml’s-type-git\" class=\"headerlink\" title=\"install hexo-deployer-git(for _config.yml’s type: git)\"></a>install hexo-deployer-git(for _config.yml’s type: git)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"部署上-GitHub\"><a href=\"#部署上-GitHub\" class=\"headerlink\" title=\"部署上 GitHub\"></a>部署上 GitHub</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"run-web-browser-https-hot5656-github-io\"><a href=\"#run-web-browser-https-hot5656-github-io\" class=\"headerlink\" title=\"run web browser https://hot5656.github.io/\"></a>run web browser <a href=\"https://hot5656.github.io/\">https://hot5656.github.io/</a></h3><div style=\"width:800px\">\n    <img src=\"/2021/03/12/hexo-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n\n<h3 id=\"本地執行\"><a href=\"#本地執行\" class=\"headerlink\" title=\"本地執行\"></a>本地執行</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:4000/\">http://localhost:4000/</a></p>\n<div style=\"width:800px\">\n    <img src=\"/2021/03/12/hexo-1/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<h3 id=\"建立新文章\"><a href=\"#建立新文章\" class=\"headerlink\" title=\"建立新文章\"></a>建立新文章</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo new win7-1</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"設定檔案編輯-config-yml\"><a href=\"#設定檔案編輯-config-yml\" class=\"headerlink\" title=\"設定檔案編輯(_config.yml)\"></a>設定檔案編輯(_config.yml)</h2><h3 id=\"更改匯總\"><a href=\"#更改匯總\" class=\"headerlink\" title=\"更改匯總\"></a>更改匯總</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Site</span></span><br><span class=\"line\"><span class=\"attr\">title:</span> <span class=\"string\">Robert</span> <span class=\"string\">雜記</span>  <span class=\"comment\"># 部落格標題</span></span><br><span class=\"line\"><span class=\"attr\">subtitle:</span> <span class=\"string\">&#x27;&#x27;</span>        <span class=\"comment\"># 副標題</span></span><br><span class=\"line\"><span class=\"attr\">description:</span> <span class=\"string\">&#x27;&#x27;</span>     <span class=\"comment\"># 網站描述 </span></span><br><span class=\"line\"><span class=\"attr\">keywords:</span>           <span class=\"comment\"># 網站關鍵字(以逗號隔開)，方便 SEO </span></span><br><span class=\"line\"><span class=\"attr\">author:</span> <span class=\"string\">Robert</span> <span class=\"string\">Kao</span>  <span class=\"comment\"># 姓名或暱稱</span></span><br><span class=\"line\"><span class=\"attr\">language:</span> <span class=\"string\">zh-TW</span>     <span class=\"comment\"># 使用的語言</span></span><br><span class=\"line\"><span class=\"attr\">timezone:</span> <span class=\"string\">&#x27;&#x27;</span>        <span class=\"comment\"># 留空以使用系統時間</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">abbrlink:</span></span><br><span class=\"line\">  <span class=\"attr\">alg:</span> <span class=\"string\">crc16</span>  <span class=\"comment\">#support crc16(default) and crc32  </span></span><br><span class=\"line\">  <span class=\"attr\">rep:</span> <span class=\"string\">hex</span>    <span class=\"comment\">#support dec(default) and hex</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">https://hot5656.github.io/</span></span><br><span class=\"line\"><span class=\"attr\">permalink_defaults:</span></span><br><span class=\"line\">  <span class=\"attr\">author_name:</span> <span class=\"string\">&quot;Robert&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># permalink: :year/:month/:day/:title/</span></span><br><span class=\"line\"><span class=\"attr\">permalink:</span> <span class=\"string\">:author_name/:abbrlink/</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Extensions</span></span><br><span class=\"line\"><span class=\"comment\">## Plugins: https://hexo.io/plugins/</span></span><br><span class=\"line\"><span class=\"comment\">## Themes: https://hexo.io/themes/</span></span><br><span class=\"line\"><span class=\"comment\"># theme: landscape</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">next</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Deployment</span></span><br><span class=\"line\"><span class=\"comment\">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repository:</span> <span class=\"string\">&#x27;https://github.com/hot5656/hot5656.github.io.git&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">sitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">sitemap.xml</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"attr\">search:</span></span><br><span class=\"line\">  <span class=\"comment\"># path: search.xml</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">search.json</span></span><br><span class=\"line\">  <span class=\"attr\">field:</span> <span class=\"string\">post</span></span><br><span class=\"line\">  <span class=\"attr\">content:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"網頁基本設定\"><a href=\"#網頁基本設定\" class=\"headerlink\" title=\"網頁基本設定\"></a>網頁基本設定</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Site</span></span><br><span class=\"line\"><span class=\"attr\">title:</span> <span class=\"string\">Robert</span> <span class=\"string\">雜記</span>  <span class=\"comment\"># 部落格標題</span></span><br><span class=\"line\"><span class=\"attr\">subtitle:</span> <span class=\"string\">&#x27;&#x27;</span>        <span class=\"comment\"># 副標題</span></span><br><span class=\"line\"><span class=\"attr\">description:</span> <span class=\"string\">&#x27;&#x27;</span>     <span class=\"comment\"># 網站描述 </span></span><br><span class=\"line\"><span class=\"attr\">keywords:</span>           <span class=\"comment\"># 網站關鍵字(以逗號隔開)，方便 SEO </span></span><br><span class=\"line\"><span class=\"attr\">author:</span> <span class=\"string\">Robert</span> <span class=\"string\">Kao</span>  <span class=\"comment\"># 姓名或暱稱</span></span><br><span class=\"line\"><span class=\"attr\">language:</span> <span class=\"string\">zh-TW</span>     <span class=\"comment\"># 使用的語言</span></span><br><span class=\"line\"><span class=\"attr\">timezone:</span> <span class=\"string\">&#x27;&#x27;</span>        <span class=\"comment\"># 留空以使用系統時間</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設定圖片放於對應的目錄下\"><a href=\"#設定圖片放於對應的目錄下\" class=\"headerlink\" title=\"設定圖片放於對應的目錄下\"></a>設定圖片放於對應的目錄下</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">post_asset_folder: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設定-next-theme\"><a href=\"#設定-next-theme\" class=\"headerlink\" title=\"設定 next theme\"></a>設定 next theme</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># theme: landscape</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">next</span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"next-theme-主題-設定\"><a href=\"#next-theme-主題-設定\" class=\"headerlink\" title=\"next theme(主題) 設定\"></a>next theme(主題) 設定</h2><h3 id=\"更改匯總-1\"><a href=\"#更改匯總-1\" class=\"headerlink\" title=\"更改匯總\"></a>更改匯總</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Schemes 外觀</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Muse</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Mist</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Pisces</span></span><br><span class=\"line\"><span class=\"attr\">scheme:</span> <span class=\"string\">Gemini</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Dark Mode</span></span><br><span class=\"line\"><span class=\"attr\">darkmode:</span> <span class=\"literal\">false</span> <span class=\"comment\"># 黑暗效果</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\">  <span class=\"attr\">home:</span> <span class=\"string\">/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-home</span></span><br><span class=\"line\">  <span class=\"comment\">#about: /about/ || fa fa-user</span></span><br><span class=\"line\">  <span class=\"attr\">tags:</span> <span class=\"string\">/tags/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-tags</span></span><br><span class=\"line\">  <span class=\"attr\">categories:</span> <span class=\"string\">/categories/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-th</span></span><br><span class=\"line\">  <span class=\"attr\">archives:</span> <span class=\"string\">/archives/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-archive</span></span><br><span class=\"line\">  <span class=\"comment\">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class=\"line\">  <span class=\"comment\">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class=\"line\">  <span class=\"comment\">#commonweal: /404/ || fa fa-heartbeat</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">local_search:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"string\">enable</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">motion:</span> <span class=\"comment\"># 動畫效果</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Custom-file-paths\"><a href=\"#Custom-file-paths\" class=\"headerlink\" title=\"Custom file paths\"></a>Custom file paths</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Define custom file paths.</span></span><br><span class=\"line\"><span class=\"comment\"># Create your custom files in site directory `source/_data` and uncomment needed files below.</span></span><br><span class=\"line\"><span class=\"attr\">custom_file_path:</span></span><br><span class=\"line\">  <span class=\"comment\">#head: source/_data/head.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#header: source/_data/header.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#sidebar: source/_data/sidebar.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#postMeta: source/_data/post-meta.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#postBodyEnd: source/_data/post-body-end.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#footer: source/_data/footer.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#bodyEnd: source/_data/body-end.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#variable: source/_data/variables.styl</span></span><br><span class=\"line\">  <span class=\"comment\">#mixin: source/_data/mixins.styl</span></span><br><span class=\"line\">  <span class=\"comment\">#style: source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設置菜單\"><a href=\"#設置菜單\" class=\"headerlink\" title=\"設置菜單\"></a>設置菜單</h3><h4 id=\"需安裝-hexo-theme-next\"><a href=\"#需安裝-hexo-theme-next\" class=\"headerlink\" title=\"需安裝 hexo-theme-next\"></a>需安裝 hexo-theme-next</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-theme-next --save</span><br><span class=\"line\"><span class=\"comment\"># copy next config to local</span></span><br><span class=\"line\"><span class=\"comment\"># windows command</span></span><br><span class=\"line\">copy node_modules\\hexo-theme-next\\_config.yml _config.next.yml</span><br><span class=\"line\"><span class=\"comment\"># linux command</span></span><br><span class=\"line\">cp node_modules/hexo-theme-next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure>\n<p>or </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/next-theme/hexo-theme-next themes/next</span><br><span class=\"line\"><span class=\"comment\"># copy next config to local</span></span><br><span class=\"line\"><span class=\"comment\"># windows command</span></span><br><span class=\"line\">copy themes\\next\\_config.yml _config.next.yml</span><br><span class=\"line\"><span class=\"comment\"># linux command</span></span><br><span class=\"line\">cp themes/next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"config-next-yml\"><a href=\"#config-next-yml\" class=\"headerlink\" title=\"_config.next.yml\"></a>_config.next.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\">  <span class=\"attr\">home:</span> <span class=\"string\">/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-home</span></span><br><span class=\"line\">  <span class=\"comment\">#about: /about/ || fa fa-user</span></span><br><span class=\"line\">  <span class=\"attr\">tags:</span> <span class=\"string\">/tags/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-tags</span></span><br><span class=\"line\">  <span class=\"attr\">categories:</span> <span class=\"string\">/categories/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-th</span></span><br><span class=\"line\">  <span class=\"attr\">archives:</span> <span class=\"string\">/archives/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-archive</span></span><br><span class=\"line\">  <span class=\"comment\">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class=\"line\">  <span class=\"comment\">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class=\"line\">  <span class=\"comment\">#commonweal: /404/ || fa fa-heartbeat</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設置頭像\"><a href=\"#設置頭像\" class=\"headerlink\" title=\"設置頭像\"></a>設置頭像</h3><p>放於 source/images/</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Sidebar Avatar</span></span><br><span class=\"line\"><span class=\"attr\">avatar:</span></span><br><span class=\"line\">  <span class=\"comment\"># Replace the default image and set the url here.</span></span><br><span class=\"line\">  <span class=\"attr\">url:</span> <span class=\"string\">/images/head.png</span> <span class=\"comment\">#/images/avatar.gif</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"刪除歸檔頁-嗯-目前共有-17-篇文章。-繼續努力。\"><a href=\"#刪除歸檔頁-嗯-目前共有-17-篇文章。-繼續努力。\" class=\"headerlink\" title=\"刪除歸檔頁 - 嗯..! 目前共有 17 篇文章。 繼續努力。\"></a>刪除歸檔頁 - 嗯..! 目前共有 17 篇文章。 繼續努力。</h3><p>source_data\\styles.styl</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 刪除歸檔頁 - 嗯..! 目前共有 <span class=\"number\">17</span> 篇文章。 繼續努力。</span><br><span class=\"line\"><span class=\"selector-class\">.archive</span> <span class=\"selector-class\">.collection-title</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: none;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改-tab-size\"><a href=\"#修改-tab-size\" class=\"headerlink\" title=\"修改 tab size\"></a>修改 tab size</h3><p>source_data\\styles.styl</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 修改 tab size 為 <span class=\"number\">2</span></span><br><span class=\"line\">pre &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">tab-size</span>: <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設定-tag-code-style\"><a href=\"#設定-tag-code-style\" class=\"headerlink\" title=\"設定 tag code style\"></a>設定 tag code style</h3><p>source_data\\styles.styl</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 設定 tag <span class=\"selector-tag\">code</span> style</span><br><span class=\"line\"><span class=\"selector-tag\">code</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: <span class=\"number\">#ff3860</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>: transparent;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"特定功能\"><a href=\"#特定功能\" class=\"headerlink\" title=\"特定功能\"></a>特定功能</h2><h3 id=\"文章搜尋功能\"><a href=\"#文章搜尋功能\" class=\"headerlink\" title=\"文章搜尋功能\"></a>文章搜尋功能</h3><h4 id=\"需安裝-hexo-generator-searchdb\"><a href=\"#需安裝-hexo-generator-searchdb\" class=\"headerlink\" title=\"需安裝 hexo-generator-searchdb\"></a>需安裝 hexo-generator-searchdb</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>\n<h4 id=\"config-next-yml-1\"><a href=\"#config-next-yml-1\" class=\"headerlink\" title=\"_config.next.yml\"></a>_config.next.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">local_search:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"config-next-yml-增加設定-因github-搜尋-path-僅接受-json-format\"><a href=\"#config-next-yml-增加設定-因github-搜尋-path-僅接受-json-format\" class=\"headerlink\" title=\"_config.next.yml 增加設定(因github 搜尋 path 僅接受 json format)\"></a>_config.next.yml 增加設定(因github 搜尋 path 僅接受 json format)</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">search:</span></span><br><span class=\"line\">  <span class=\"comment\"># path: search.xml</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">search.json</span></span><br><span class=\"line\">  <span class=\"attr\">field:</span> <span class=\"string\">post</span></span><br><span class=\"line\">  <span class=\"attr\">content:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"必須先做-hexo-clean\"><a href=\"#必須先做-hexo-clean\" class=\"headerlink\" title=\"必須先做 hexo clean\"></a>必須先做 hexo clean</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n<h4 id=\"顯示畫面\"><a href=\"#顯示畫面\" class=\"headerlink\" title=\"顯示畫面\"></a>顯示畫面</h4><div style=\"width:500px\">\n    <img src=\"/2021/03/12/hexo-1/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<h3 id=\"加入-categories-和-tags\"><a href=\"#加入-categories-和-tags\" class=\"headerlink\" title=\"加入 categories 和 tags\"></a>加入 categories 和 tags</h3><h4 id=\"修改-scaffolds-post-md\"><a href=\"#修改-scaffolds-post-md\" class=\"headerlink\" title=\"修改 scaffolds/post.md\"></a>修改 scaffolds/post.md</h4><p>新增文章時,自動加入 categories, tags 項目</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">categories: </span><br><span class=\"line\">tags:</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"產生-categories-tags-頁\"><a href=\"#產生-categories-tags-頁\" class=\"headerlink\" title=\"產生 categories, tags 頁\"></a>產生 categories, tags 頁</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo new page categories</span><br><span class=\"line\">hexo new page tags</span><br></pre></td></tr></table></figure>\n<!--more-->\n\n<h4 id=\"source-categories-index-md-修改\"><a href=\"#source-categories-index-md-修改\" class=\"headerlink\" title=\"source/categories/index.md 修改\"></a>source/categories/index.md 修改</h4><figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: categories</span><br><span class=\"line\">date: 2021-03-15 12:17:46</span><br><span class=\"line\">type: categories # 不加入不能選擇 categories(next theme)</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"source-tags-index-md-修改\"><a href=\"#source-tags-index-md-修改\" class=\"headerlink\" title=\"source/tags/index.md 修改\"></a>source/tags/index.md 修改</h4><figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: tags</span><br><span class=\"line\">date: 2021-03-15 12:17:59</span><br><span class=\"line\">type: tags # 不加入不能選擇 tags(next theme)</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"文章設定-categories-tags\"><a href=\"#文章設定-categories-tags\" class=\"headerlink\" title=\"文章設定 categories, tags\"></a>文章設定 categories, tags</h4><p>可包含多 tag</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">categories: 程序</span><br><span class=\"line\">tags: </span><br><span class=\"line\"><span class=\"bullet\">\t-</span> hexo</span><br><span class=\"line\"><span class=\"bullet\">\t-</span> github</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h3 id=\"sitemap-xml-製作-應用未加入-……\"><a href=\"#sitemap-xml-製作-應用未加入-……\" class=\"headerlink\" title=\"sitemap.xml 製作(應用未加入 ……)\"></a>sitemap.xml 製作(應用未加入 ……)</h3><p>安裝 hexo-generator-sitemap</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>\n<p>_config.next.yml (新加入)</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">sitemap.xml</span></span><br></pre></td></tr></table></figure>\n<p>部署至 github</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 若有一些異常, 先執行 hexo clean</span></span><br><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n<p>檢查是否部署完成<br><a href=\"https://hot5656.github.io/sitemap.xml\">https://hot5656.github.io/sitemap.xml</a></p>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/12/hexo-1/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<p>向Google Search Console提交<br><a href=\"https://search.google.com/search-console/welcome\">https://search.google.com/search-console/welcome</a><br>… 待處理</p>\n<h3 id=\"設定hexo-abbrlink\"><a href=\"#設定hexo-abbrlink\" class=\"headerlink\" title=\"設定hexo-abbrlink\"></a>設定hexo-abbrlink</h3><h4 id=\"install-hexo-abbrlink\"><a href=\"#install-hexo-abbrlink\" class=\"headerlink\" title=\"install hexo-abbrlink\"></a>install hexo-abbrlink</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"set-config-yml\"><a href=\"#set-config-yml\" class=\"headerlink\" title=\"set _config.yml\"></a>set _config.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">abbrlink:</span></span><br><span class=\"line\">  <span class=\"attr\">alg:</span> <span class=\"string\">crc16</span>  <span class=\"comment\">#support crc16(default) and crc32  </span></span><br><span class=\"line\">  <span class=\"attr\">rep:</span> <span class=\"string\">hex</span>    <span class=\"comment\">#support dec(default) and hex</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">https://hot5656.github.io/</span></span><br><span class=\"line\"><span class=\"attr\">permalink_defaults:</span></span><br><span class=\"line\">  <span class=\"attr\">author_name:</span> <span class=\"string\">&quot;Robert&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># permalink: :year/:month/:day/:title/</span></span><br><span class=\"line\"><span class=\"attr\">permalink:</span> <span class=\"string\">:author_name/:abbrlink/</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"閱讀次數統計（LeanCloud）…待研究\"><a href=\"#閱讀次數統計（LeanCloud）…待研究\" class=\"headerlink\" title=\"閱讀次數統計（LeanCloud）…待研究\"></a>閱讀次數統計（LeanCloud）…待研究</h3><h3 id=\"客製化設定\"><a href=\"#客製化設定\" class=\"headerlink\" title=\"客製化設定\"></a>客製化設定</h3><h4 id=\"設定代碼風格-config-next-yml\"><a href=\"#設定代碼風格-config-next-yml\" class=\"headerlink\" title=\"設定代碼風格 - _config.next.yml\"></a>設定代碼風格 - _config.next.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">codeblock:</span></span><br><span class=\"line\">  <span class=\"comment\"># Code Highlight theme</span></span><br><span class=\"line\">  <span class=\"comment\"># All available themes: https://theme-next.js.org/highlight/</span></span><br><span class=\"line\">  <span class=\"attr\">theme:</span></span><br><span class=\"line\">    <span class=\"comment\"># light: default</span></span><br><span class=\"line\">    <span class=\"comment\"># dark: tomorrow-night</span></span><br><span class=\"line\">    <span class=\"attr\">light:</span> <span class=\"string\">gml</span></span><br><span class=\"line\">    <span class=\"attr\">dark:</span> <span class=\"string\">gml</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"設定客製化路徑-config-next-yml\"><a href=\"#設定客製化路徑-config-next-yml\" class=\"headerlink\" title=\"設定客製化路徑 - _config.next.yml\"></a>設定客製化路徑 - _config.next.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Define custom file paths.</span></span><br><span class=\"line\"><span class=\"comment\"># Create your custom files in site directory `source/_data` and uncomment needed files below.</span></span><br><span class=\"line\"><span class=\"attr\">custom_file_path:</span></span><br><span class=\"line\">  <span class=\"comment\">#head: source/_data/head.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#header: source/_data/header.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#sidebar: source/_data/sidebar.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#postMeta: source/_data/post-meta.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#postBodyEnd: source/_data/post-body-end.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#footer: source/_data/footer.njk</span></span><br><span class=\"line\">  <span class=\"comment\">#bodyEnd: source/_data/body-end.njk</span></span><br><span class=\"line\">  <span class=\"attr\">variable:</span> <span class=\"string\">source/_data/variables.styl</span> <span class=\"comment\"># 更改變數值</span></span><br><span class=\"line\">  <span class=\"comment\">#mixin: source/_data/mixins.styl</span></span><br><span class=\"line\">  <span class=\"attr\">style:</span> <span class=\"string\">source/_data/styles.styl</span> <span class=\"comment\"># 更改 css </span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"設定變數-variables-styl\"><a href=\"#設定變數-variables-styl\" class=\"headerlink\" title=\"設定變數 - variables.styl\"></a>設定變數 - variables.styl</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">基本色系</span> <span class=\"bullet\">-</span> <span class=\"string\">由淺至深</span> <span class=\"string\">https://colorhunt.co/palette/252860</span></span><br><span class=\"line\"><span class=\"string\">$web-color-l1</span> <span class=\"string\">=</span> <span class=\"comment\">#f0e5d8;</span></span><br><span class=\"line\"><span class=\"string\">$web-color-l2</span> <span class=\"string\">=</span> <span class=\"comment\">#bbdfc8;</span></span><br><span class=\"line\"><span class=\"string\">$web-color-l3</span> <span class=\"string\">=</span> <span class=\"comment\">#75cfb8;</span></span><br><span class=\"line\"><span class=\"string\">$web-color-l4</span> <span class=\"string\">=</span> <span class=\"comment\">#ffc478;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">背景颜色</span></span><br><span class=\"line\"><span class=\"string\">$body-bg-color</span> <span class=\"string\">=</span> <span class=\"string\">$web-color-l1;</span></span><br><span class=\"line\"><span class=\"string\">$header-bg-color</span> <span class=\"string\">=</span> <span class=\"string\">$web-color-l1;</span></span><br><span class=\"line\"><span class=\"string\">$footer-bg-color</span> <span class=\"string\">=</span> <span class=\"string\">$web-color-l1;</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">貼文背景顏色</span></span><br><span class=\"line\"><span class=\"string\">$content-bg-color</span> <span class=\"string\">=</span> <span class=\"string\">$web-color-l2;</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">選項背景顏色</span></span><br><span class=\"line\"><span class=\"string\">$menu-item-bg-color</span> <span class=\"string\">=</span> <span class=\"string\">$web-color-l3;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"設定-styles-styles-styl\"><a href=\"#設定-styles-styles-styl\" class=\"headerlink\" title=\"設定 styles - styles.styl\"></a>設定 styles - styles.styl</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">設定</span> <span class=\"string\">brand</span> <span class=\"string\">background</span></span><br><span class=\"line\"><span class=\"string\">.site-brand-container</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">background:</span> <span class=\"string\">$web-color-l4;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">刪除頭像邊框</span></span><br><span class=\"line\"><span class=\"string\">.site-author-image</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">border:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">設定貼文內</span> <span class=\"string\">h2</span> <span class=\"string\">顏色(清楚分項用)</span></span><br><span class=\"line\"><span class=\"string\">.post-body</span> <span class=\"string\">&gt;</span> <span class=\"string\">h2</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">color:</span> <span class=\"string\">orange;</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">設定貼文內</span> <span class=\"string\">tag</span> <span class=\"string\">a顏色(一般</span> <span class=\"string\">web</span> <span class=\"string\">link</span> <span class=\"string\">用)</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">.post-body</span> <span class=\"string\">a</span> &#123;</span><br><span class=\"line\"><span class=\"string\">//</span> \t<span class=\"attr\">color:</span> <span class=\"string\">blue;</span></span><br><span class=\"line\"><span class=\"string\">//</span> \t<span class=\"attr\">border-bottom:</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\"><span class=\"string\">//</span> &#125;</span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">.post-body</span> <span class=\"string\">a:hover</span> &#123;</span><br><span class=\"line\"><span class=\"string\">//</span> \t<span class=\"attr\">text-decoration:</span> <span class=\"string\">underline;</span></span><br><span class=\"line\"><span class=\"string\">//</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">設定貼文內</span> <span class=\"string\">button,</span> <span class=\"string\">tag</span> <span class=\"string\">a</span> <span class=\"string\">文字顏色(閱讀全文)</span></span><br><span class=\"line\"><span class=\"string\">//.post-body</span> <span class=\"string\">.post-button</span> <span class=\"string\">a</span> &#123;</span><br><span class=\"line\"><span class=\"string\">//</span>\t<span class=\"attr\">color:</span> <span class=\"string\">$btn-default-color;</span></span><br><span class=\"line\"><span class=\"string\">//</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">設定貼文內</span> <span class=\"string\">button</span> <span class=\"string\">background</span> <span class=\"string\">顏色(閱讀全文)</span></span><br><span class=\"line\"><span class=\"string\">.post-body</span> <span class=\"string\">.btn</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">background:</span> <span class=\"string\">$web-color-l2;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">刪除歸檔頁</span> <span class=\"bullet\">-</span> <span class=\"string\">嗯..!</span> <span class=\"string\">目前共有</span> <span class=\"number\">17</span> <span class=\"string\">篇文章。</span> <span class=\"string\">繼續努力。</span></span><br><span class=\"line\"><span class=\"string\">.archive</span> <span class=\"string\">.collection-title</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">display:</span> <span class=\"string\">none;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">class</span> <span class=\"string\">內</span> <span class=\"string\">rect</span> </span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">for</span> <span class=\"string\">時序圖(sequence)</span> <span class=\"string\">文字背景</span></span><br><span class=\"line\"><span class=\"string\">.sequence</span> <span class=\"string\">rect</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">fill:</span> <span class=\"string\">$content-bg-color;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">修改</span> <span class=\"string\">tab</span> <span class=\"string\">size</span> <span class=\"string\">為</span> <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"string\">pre</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">tab-size:</span> <span class=\"number\">2</span><span class=\"string\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">更改</span> <span class=\"string\">table</span> <span class=\"string\">head背景</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">更改</span> <span class=\"string\">table</span> <span class=\"string\">偶數列背景</span></span><br><span class=\"line\"><span class=\"string\">.table-container</span> <span class=\"string\">thead</span> <span class=\"string\">tr,</span></span><br><span class=\"line\"><span class=\"string\">.table-container</span> <span class=\"string\">tbody</span> <span class=\"string\">tr:nth-child(2n)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">background:</span> <span class=\"comment\">#d4d4d4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">設定</span> <span class=\"string\">tag</span> <span class=\"string\">code</span> <span class=\"string\">style</span></span><br><span class=\"line\"><span class=\"string\">code</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">color:</span> <span class=\"comment\">#ff3860;</span></span><br><span class=\"line\">\t<span class=\"attr\">background-color:</span> <span class=\"string\">transparent;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"字數統計\"><a href=\"#字數統計\" class=\"headerlink\" title=\"字數統計\"></a>字數統計</h3><h4 id=\"install-by-npm\"><a href=\"#install-by-npm\" class=\"headerlink\" title=\"install by npm\"></a>install by npm</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-word-counter --save</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"config-yml-新加入\"><a href=\"#config-yml-新加入\" class=\"headerlink\" title=\"_config.yml(新加入)\"></a>_config.yml(新加入)</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># symbols_count_time:</span></span><br><span class=\"line\"><span class=\"attr\">symbols_count_time:</span></span><br><span class=\"line\">  <span class=\"attr\">symbols:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">time:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">total_symbols:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">total_time:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">exclude_codeblock:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">awl:</span> <span class=\"number\">4</span></span><br><span class=\"line\">  <span class=\"attr\">wpm:</span> <span class=\"number\">275</span></span><br><span class=\"line\">  <span class=\"attr\">suffix:</span> <span class=\"string\">&quot;mins.&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"config-next-yml-2\"><a href=\"#config-next-yml-2\" class=\"headerlink\" title=\"_config.next.yml\"></a>_config.next.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Post wordcount display settings</span></span><br><span class=\"line\"><span class=\"comment\"># Dependencies: https://github.com/next-theme/hexo-word-counter</span></span><br><span class=\"line\"><span class=\"attr\">symbols_count_time:</span></span><br><span class=\"line\">  <span class=\"attr\">separated_meta:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">item_text_total:</span> <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"顯示閱讀百分比\"><a href=\"#顯示閱讀百分比\" class=\"headerlink\" title=\"顯示閱讀百分比\"></a>顯示閱讀百分比</h3><h4 id=\"config-next-yml-3\"><a href=\"#config-next-yml-3\" class=\"headerlink\" title=\"_config.next.yml\"></a>_config.next.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">back2top:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># Back to top in sidebar.</span></span><br><span class=\"line\">  <span class=\"attr\">sidebar:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># Scroll percent label in b2t button.</span></span><br><span class=\"line\">  <span class=\"attr\">scrollpercent:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"更改-menu-說明-zh-TW-繁體中文\"><a href=\"#更改-menu-說明-zh-TW-繁體中文\" class=\"headerlink\" title=\"更改 menu 說明 (zh-TW 繁體中文)\"></a>更改 menu 說明 (zh-TW 繁體中文)</h3><h4 id=\"新增-source-data-languages-yml\"><a href=\"#新增-source-data-languages-yml\" class=\"headerlink\" title=\"新增 source/_data/languages.yml\"></a>新增 source/_data/languages.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">zh-TW:</span></span><br><span class=\"line\">  <span class=\"attr\">menu:</span></span><br><span class=\"line\">    <span class=\"attr\">home:</span> <span class=\"string\">首頁</span></span><br><span class=\"line\">    <span class=\"attr\">archives:</span> <span class=\"string\">歸檔列表</span></span><br><span class=\"line\">    <span class=\"attr\">categories:</span> <span class=\"string\">分類</span></span><br><span class=\"line\">    <span class=\"attr\">tags:</span> <span class=\"string\">標籤</span></span><br><span class=\"line\">    <span class=\"attr\">about:</span> <span class=\"string\">關於</span></span><br><span class=\"line\">    <span class=\"attr\">search:</span> <span class=\"string\">搜尋</span></span><br><span class=\"line\">    <span class=\"attr\">schedule:</span> <span class=\"string\">時間表</span></span><br><span class=\"line\">    <span class=\"attr\">sitemap:</span> <span class=\"string\">網站地圖</span></span><br><span class=\"line\">    <span class=\"attr\">commonweal:</span> <span class=\"string\">公益</span> <span class=\"number\">404</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"markdown-支持-流程圖\"><a href=\"#markdown-支持-流程圖\" class=\"headerlink\" title=\"markdown 支持 流程圖\"></a>markdown 支持 流程圖</h3><h4 id=\"install-by-npm-1\"><a href=\"#install-by-npm-1\" class=\"headerlink\" title=\"install by npm\"></a>install by npm</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-filter-flowchart</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"畫圖\"><a href=\"#畫圖\" class=\"headerlink\" title=\"畫圖\"></a>畫圖</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 設程式碼為 flow</span></span><br><span class=\"line\"><span class=\"comment\"># 設定 元素</span></span><br><span class=\"line\">st=&gt;start: 開始</span><br><span class=\"line\"><span class=\"keyword\">in</span>=&gt;inputoutput: 输入</span><br><span class=\"line\">e=&gt;end: 結束</span><br><span class=\"line\">op=&gt;operation: 操作</span><br><span class=\"line\">cond=&gt;condition: 條件</span><br><span class=\"line\">sub=&gt;subroutine: 子程序</span><br><span class=\"line\">out=&gt;inputoutput: 输出</span><br><span class=\"line\"><span class=\"comment\"># 畫圖</span></span><br><span class=\"line\">st(right)-&gt;<span class=\"keyword\">in</span>-&gt;op-&gt;cond</span><br><span class=\"line\">cond(yes,right)-&gt;out-&gt;e</span><br><span class=\"line\">cond(no)-&gt;sub</span><br></pre></td></tr></table></figure>\n\n<div id=\"flowchart-0\" class=\"flow-chart\"></div>\n\n<h3 id=\"markdown-支持-時序圖\"><a href=\"#markdown-支持-時序圖\" class=\"headerlink\" title=\"markdown 支持 時序圖\"></a>markdown 支持 時序圖</h3><h4 id=\"install-by-npm-2\"><a href=\"#install-by-npm-2\" class=\"headerlink\" title=\"install by npm\"></a>install by npm</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-filter-sequence</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"source-data-styles-styl\"><a href=\"#source-data-styles-styl\" class=\"headerlink\" title=\"source/_data/styles.styl\"></a>source/_data/styles.styl</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">// class sequence 內 rect </span><br><span class=\"line\">// for 時序圖(sequence) 文字背景</span><br><span class=\"line\"><span class=\"selector-class\">.sequence</span> rect &#123;</span><br><span class=\"line\">  fill: $content-bg-color;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"範例\"><a href=\"#範例\" class=\"headerlink\" title=\"範例\"></a>範例</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 加入 class sequence</span></span><br><span class=\"line\">&lt;div class=<span class=\"string\">&quot;sequence&quot;</span>&gt;</span><br><span class=\"line\"><span class=\"comment\"># 設程式碼為 sequence</span></span><br><span class=\"line\">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class=\"line\">Note right of Bob: Bob thinks</span><br><span class=\"line\">Bob--&gt;Alice: I am good thanks!</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<div class=\"sequence\">\n<div id=\"sequence-0\"></div>\n</div>\n\n<h3 id=\"markdown-支持-數學公式\"><a href=\"#markdown-支持-數學公式\" class=\"headerlink\" title=\"markdown 支持 數學公式\"></a>markdown 支持 數學公式</h3><h4 id=\"install-by-npm-3\"><a href=\"#install-by-npm-3\" class=\"headerlink\" title=\"install by npm\"></a>install by npm</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 不用安裝, 只是留下紀錄</span></span><br><span class=\"line\"><span class=\"comment\"># npm install hexo-filter-mathjax --save</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"config-next-yml-4\"><a href=\"#config-next-yml-4\" class=\"headerlink\" title=\"_config.next.yml\"></a>_config.next.yml</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mathjax:</span><br><span class=\"line\">  <span class=\"built_in\">enable</span>: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"文章-md\"><a href=\"#文章-md\" class=\"headerlink\" title=\"文章.md\"></a>文章.md</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mathjax: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"範例-1\"><a href=\"#範例-1\" class=\"headerlink\" title=\"範例\"></a>範例</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下標 _ 改為 \\_</span></span><br><span class=\"line\"><span class=\"comment\"># 條件表達式 每列 \\\\ 改為 \\\\\\\\</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 行內公式</span></span><br><span class=\"line\">質能方程式<span class=\"variable\">$E</span> = mc^2$</span><br><span class=\"line\"><span class=\"comment\"># 獨立公式</span></span><br><span class=\"line\">質能方程式$<span class=\"variable\">$E</span> = mc^2$$</span><br><span class=\"line\"><span class=\"comment\"># ^ 上標, _ 下標</span></span><br><span class=\"line\">$<span class=\"variable\">$x</span> = a\\_&#123;1&#125;^n + a\\_&#123;2&#125;^n + a\\_&#123;3&#125;^n$$</span><br><span class=\"line\"><span class=\"comment\"># 分數使用\\frac&#123;分母&#125;&#123;分子&#125; 不過推薦使用\\cfrac來代替\\frac，顯示公式不會太擠</span></span><br><span class=\"line\">$$\\frac&#123;1&#125;&#123;3&#125; 與\\cfrac&#123;1&#125;&#123;3&#125;$$</span><br><span class=\"line\"><span class=\"comment\"># &#123;&#125;因為有特殊作用因此當需要顯示大括號時一般使用\\lbrace \\rbrace來表示</span></span><br><span class=\"line\">$<span class=\"variable\">$f</span>(x, y) = 100 * \\lbrace[(x + y) * 3] - 5\\rbrace$$</span><br><span class=\"line\"><span class=\"comment\"># 開根號 \\sqrt[次数]&#123;被开方数&#125;</span></span><br><span class=\"line\">$$\\sqrt[3]&#123;X&#125; \\sqrt&#123;5 - x&#125;$$ </span><br><span class=\"line\"><span class=\"comment\"># 極限</span></span><br><span class=\"line\"><span class=\"variable\">$g</span>. \\lim\\limits_&#123;n \\rightarrow a&#125; [f(x)/g(x)]=L/M$</span><br><span class=\"line\"><span class=\"comment\"># 條件表達式</span></span><br><span class=\"line\">$$</span><br><span class=\"line\">y=</span><br><span class=\"line\">\\begin&#123;cases&#125;</span><br><span class=\"line\">-x,\\quad x\\leq 0 \\\\\\\\</span><br><span class=\"line\">x,\\quad x&gt;0</span><br><span class=\"line\">\\end&#123;cases&#125;</span><br><span class=\"line\">$$</span><br><span class=\"line\"></span><br><span class=\"line\">\\begin&#123;equation&#125;</span><br><span class=\"line\">    f(n) =</span><br><span class=\"line\">    \\begin&#123;cases&#125;</span><br><span class=\"line\">    n/2, &amp; \\text&#123;<span class=\"keyword\">if</span> $n$ is even&#125; \\\\\\\\</span><br><span class=\"line\">    3n+1, &amp; \\text&#123;<span class=\"keyword\">if</span> $n$ is odd&#125;</span><br><span class=\"line\">    \\end&#123;cases&#125;</span><br><span class=\"line\">\\end&#123;equation&#125;</span><br></pre></td></tr></table></figure>\n\n<p>質能方程式$E = mc^2$<br>質能方程式$$E = mc^2$$<br>上標,下標<br>$$x = a_{1}^n + a_{2}^n + a_{3}^n$$<br>分數使用<br>$$\\frac{1}{3} 與\\cfrac{1}{3}$$<br>括號<br>$$f(x, y) = 100 * \\lbrace[(x + y) * 3] - 5\\rbrace$$<br>開根號<br>$$\\sqrt[3]{X} \\sqrt{5 - x}$$<br>極限<br>$\\lim\\limits_{n \\rightarrow a} [f(x)/g(x)]=L/M$<br>條件表達式<br>$$<br>y=<br>\\begin{cases}<br>-x,\\quad x\\leq 0 \\\\<br>x,\\quad x&gt;0<br>\\end{cases}<br>$$</p>\n<p>\\begin{equation}<br>    f(n) =<br>    \\begin{cases}<br>    n/2, &amp; \\text{if $n$ is even} \\\\<br>    3n+1, &amp; \\text{if $n$ is odd}<br>    \\end{cases}<br>\\end{equation}</p>\n<h3 id=\"加入-Disqus-留言版\"><a href=\"#加入-Disqus-留言版\" class=\"headerlink\" title=\"加入 Disqus 留言版\"></a>加入 Disqus 留言版</h3><h4 id=\"申請留言版帳號\"><a href=\"#申請留言版帳號\" class=\"headerlink\" title=\"申請留言版帳號\"></a>申請留言版帳號</h4><p>到 <a href=\"https://disqus.com/\">Disqus</a> 註冊帳號後並登入</p>\n<ul>\n<li><p>I wnat to install Disqus on my site</p>\n<div style=\"width:500px\">\n  <img src=\"/2021/03/12/hexo-1/pic21.png\" class=\"\" title=\"pic21\">\n</div></li>\n<li><p>基本設定</p>\n<div style=\"width:500px\">\n  <img src=\"/2021/03/12/hexo-1/pic22.png\" class=\"\" title=\"pic22\">\n</div></li>\n</ul>\n<h4 id=\"set-hexo’s-config-next-yml\"><a href=\"#set-hexo’s-config-next-yml\" class=\"headerlink\" title=\"set hexo’s _config.next.yml\"></a>set hexo’s _config.next.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Disqus</span></span><br><span class=\"line\"><span class=\"comment\"># For more information: https://disqus.com</span></span><br><span class=\"line\"><span class=\"attr\">disqus:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"string\">enable</span> <span class=\"comment\"># enable Disqus</span></span><br><span class=\"line\">  <span class=\"attr\">shortname:</span> <span class=\"string\">hot5656-blog</span> <span class=\"comment\"># Disqus Website Name for you</span></span><br><span class=\"line\">  <span class=\"attr\">count:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n\n<br>\n\n<h2 id=\"md檔-設定\"><a href=\"#md檔-設定\" class=\"headerlink\" title=\"md檔 設定\"></a>md檔 設定</h2><h3 id=\"顯示圖片-相關的圖片放於對應的目錄下\"><a href=\"#顯示圖片-相關的圖片放於對應的目錄下\" class=\"headerlink\" title=\"顯示圖片(相關的圖片放於對應的目錄下)\"></a>顯示圖片(相關的圖片放於對應的目錄下)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% asset_img test.png This is an example image %&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"顯示圖片-設定寬度\"><a href=\"#顯示圖片-設定寬度\" class=\"headerlink\" title=\"顯示圖片(設定寬度)\"></a>顯示圖片(設定寬度)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div style=<span class=\"string\">&quot;width:500px&quot;</span>&gt;</span><br><span class=\"line\">\t&#123;% asset_img pic3.png pic3 %&#125;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"顯示圖片-Markdown-規則-install-hexo-image-link\"><a href=\"#顯示圖片-Markdown-規則-install-hexo-image-link\" class=\"headerlink\" title=\"顯示圖片(Markdown 規則-install hexo-image-link)\"></a>顯示圖片(Markdown 規則-install hexo-image-link)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-image-link --save</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"顯示圖片-Markdown-規則\"><a href=\"#顯示圖片-Markdown-規則\" class=\"headerlink\" title=\"顯示圖片(Markdown 規則)\"></a>顯示圖片(Markdown 規則)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">![picture 1](hexo/test.png)</span><br></pre></td></tr></table></figure>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js\"></script><textarea id=\"flowchart-0-code\" style=\"display: none\">st=>start: 開始\nin=>inputoutput: 输入\ne=>end: 結束\nop=>operation: 操作\ncond=>condition: 條件\nsub=>subroutine: 子程序\nout=>inputoutput: 输出\n\nst(right)->in->op->cond\ncond(yes,right)->out->e\ncond(no)->sub</textarea><textarea id=\"flowchart-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"flowchart-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value));  var diagram = flowchart.parse(code);  diagram.drawSVG(\"flowchart-0\", options);</script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js\"></script><textarea id=\"sequence-0-code\" style=\"display: none\">Alice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!</textarea><textarea id=\"sequence-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"sequence-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"sequence-0-options\").value));  var diagram = Diagram.parse(code);  diagram.drawSVG(\"sequence-0\", options);</script>","categories":["Blog"],"tags":["github","hexo"]},{"title":"Put Hexo to GitHub(第二個)","url":"/2021/03/14/hexo-2/","content":"<h3 id=\"預先安裝-Git-和-Node-js\"><a href=\"#預先安裝-Git-和-Node-js\" class=\"headerlink\" title=\"預先安裝 Git 和 Node.js\"></a>預先安裝 Git 和 Node.js</h3><h3 id=\"Install-Hexo\"><a href=\"#Install-Hexo\" class=\"headerlink\" title=\"Install Hexo\"></a>Install Hexo</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Dump-version\"><a href=\"#Dump-version\" class=\"headerlink\" title=\"Dump version\"></a>Dump version</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo version</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h3 id=\"inition-Blog\"><a href=\"#inition-Blog\" class=\"headerlink\" title=\"inition Blog\"></a>inition Blog</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo init blog</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Install-all-package-for-Blog\"><a href=\"#Install-all-package-for-Blog\" class=\"headerlink\" title=\"Install all package for Blog\"></a>Install all package for Blog</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"GitHub-generate-a-respsitory\"><a href=\"#GitHub-generate-a-respsitory\" class=\"headerlink\" title=\"GitHub generate a respsitory\"></a>GitHub generate a respsitory</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/14/hexo-2/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h3 id=\"設定-GitHub-respsitory-可執行-Setting-–-gt-GitHub-Pages-–-gt-Source-–-gt-master-–-gt-Save\"><a href=\"#設定-GitHub-respsitory-可執行-Setting-–-gt-GitHub-Pages-–-gt-Source-–-gt-master-–-gt-Save\" class=\"headerlink\" title=\"設定 GitHub respsitory 可執行(Setting –&gt; GitHub Pages –&gt; Source –&gt; master –&gt; Save)\"></a>設定 GitHub respsitory 可執行(Setting –&gt; GitHub Pages –&gt; Source –&gt; master –&gt; Save)</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/14/hexo-2/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<h3 id=\"編輯部落格下檔案-config-yml-for-GitHub\"><a href=\"#編輯部落格下檔案-config-yml-for-GitHub\" class=\"headerlink\" title=\"編輯部落格下檔案 _config.yml(for GitHub)\"></a>編輯部落格下檔案 _config.yml(for GitHub)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repository:</span> <span class=\"string\">https://github.com/hot5656/blog.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"編輯部落格下檔案-config-yml-for-圖片放於對應的目錄下\"><a href=\"#編輯部落格下檔案-config-yml-for-圖片放於對應的目錄下\" class=\"headerlink\" title=\"編輯部落格下檔案 _config.yml(for 圖片放於對應的目錄下)\"></a>編輯部落格下檔案 _config.yml(for 圖片放於對應的目錄下)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"編輯部落格下檔案-config-yml-網址設定\"><a href=\"#編輯部落格下檔案-config-yml-網址設定\" class=\"headerlink\" title=\"編輯部落格下檔案 _config.yml(網址設定)\"></a>編輯部落格下檔案 _config.yml(網址設定)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">https://hot5656.github.io/blog/</span></span><br><span class=\"line\"><span class=\"attr\">root:</span> <span class=\"string\">/blog/</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"install-hexo-deployer-git-for-config-yml’s-type-git\"><a href=\"#install-hexo-deployer-git-for-config-yml’s-type-git\" class=\"headerlink\" title=\"install hexo-deployer-git(for _config.yml’s type: git)\"></a>install hexo-deployer-git(for _config.yml’s type: git)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"建立新文章\"><a href=\"#建立新文章\" class=\"headerlink\" title=\"建立新文章\"></a>建立新文章</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo new hexo-1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"md-檔案顯示圖片-含設定寬度\"><a href=\"#md-檔案顯示圖片-含設定寬度\" class=\"headerlink\" title=\"md 檔案顯示圖片(含設定寬度)\"></a>md 檔案顯示圖片(含設定寬度)</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:500px&quot;</span>&gt;</span></span><br><span class=\"line\">\t&#123;% asset_img pic1.png pic1 %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"部署上-GitHub\"><a href=\"#部署上-GitHub\" class=\"headerlink\" title=\"部署上 GitHub\"></a>部署上 GitHub</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"run-web-browser-https-hot5656-github-io-blog-使用自己的帳號-respsitory-名稱\"><a href=\"#run-web-browser-https-hot5656-github-io-blog-使用自己的帳號-respsitory-名稱\" class=\"headerlink\" title=\"run web browser https://hot5656.github.io/blog/ (使用自己的帳號, respsitory 名稱 )\"></a>run web browser <a href=\"https://hot5656.github.io/blog/\">https://hot5656.github.io/blog/</a> (使用自己的帳號, respsitory 名稱 )</h3><h3 id=\"本地執行\"><a href=\"#本地執行\" class=\"headerlink\" title=\"本地執行\"></a>本地執行</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"run-web-browser-http-localhost-4000-blog\"><a href=\"#run-web-browser-http-localhost-4000-blog\" class=\"headerlink\" title=\"run web browser http://localhost:4000/blog/\"></a>run web browser <a href=\"http://localhost:4000/blog/\">http://localhost:4000/blog/</a></h3>","categories":["Blog"],"tags":["github","hexo"]},{"title":"Hexo 使用","url":"/2021/03/14/hexo-3/","content":"<style>\n.post-image {\n    border: 1px solid black;\n}\n</style>\n\n<h2 id=\"command\"><a href=\"#command\" class=\"headerlink\" title=\"command\"></a>command</h2><h3 id=\"Install-Hexo\"><a href=\"#Install-Hexo\" class=\"headerlink\" title=\"Install Hexo\"></a>Install Hexo</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Install Hexo</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Dump-version\"><a href=\"#Dump-version\" class=\"headerlink\" title=\"Dump version\"></a>Dump version</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo version</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h3 id=\"inition-Blog\"><a href=\"#inition-Blog\" class=\"headerlink\" title=\"inition Blog\"></a>inition Blog</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo init blog</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"產生靜態檔後部署\"><a href=\"#產生靜態檔後部署\" class=\"headerlink\" title=\"產生靜態檔後部署\"></a>產生靜態檔後部署</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo d -g </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"產生靜態檔後預覽\"><a href=\"#產生靜態檔後預覽\" class=\"headerlink\" title=\"產生靜態檔後預覽\"></a>產生靜態檔後預覽</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo s -g </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"啟動伺服器\"><a href=\"#啟動伺服器\" class=\"headerlink\" title=\"啟動伺服器\"></a>啟動伺服器</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo server (hexo s)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"啟動伺服器-含-debug-data\"><a href=\"#啟動伺服器-含-debug-data\" class=\"headerlink\" title=\"啟動伺服器(含 debug data)\"></a>啟動伺服器(含 debug data)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo s --debug</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"產生靜態檔案\"><a href=\"#產生靜態檔案\" class=\"headerlink\" title=\"產生靜態檔案\"></a>產生靜態檔案</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo generate (hexo g)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"變更連接埠\"><a href=\"#變更連接埠\" class=\"headerlink\" title=\"變更連接埠\"></a>變更連接埠</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo server -p 5000</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"部署網站\"><a href=\"#部署網站\" class=\"headerlink\" title=\"部署網站\"></a>部署網站</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo deploy (hexo d)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"清除靜態檔案與快取\"><a href=\"#清除靜態檔案與快取\" class=\"headerlink\" title=\"清除靜態檔案與快取\"></a>清除靜態檔案與快取</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"產生文章\"><a href=\"#產生文章\" class=\"headerlink\" title=\"產生文章\"></a>產生文章</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo new post_name</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"產生草稿\"><a href=\"#產生草稿\" class=\"headerlink\" title=\"產生草稿\"></a>產生草稿</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo new draft <span class=\"string\">&quot;new draft&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 啟動看到草稿文章</span></span><br><span class=\"line\">hexo server --draft</span><br><span class=\"line\"><span class=\"comment\"># 草稿變成文章</span></span><br><span class=\"line\">hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"產生-page\"><a href=\"#產生-page\" class=\"headerlink\" title=\"產生 page\"></a>產生 page</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo new page about</span><br></pre></td></tr></table></figure>\n\n<br> \n\n<h2 id=\"npm-安裝\"><a href=\"#npm-安裝\" class=\"headerlink\" title=\"npm 安裝\"></a>npm 安裝</h2><h3 id=\"install-hexo-deployer-git-for-config-yml’s-type-git\"><a href=\"#install-hexo-deployer-git-for-config-yml’s-type-git\" class=\"headerlink\" title=\"install hexo-deployer-git(for _config.yml’s type: git)\"></a>install hexo-deployer-git(for _config.yml’s type: git)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"install-hexo-image-link-Markdown-顯示圖片-規則\"><a href=\"#install-hexo-image-link-Markdown-顯示圖片-規則\" class=\"headerlink\" title=\"install hexo-image-link(Markdown 顯示圖片 規則)\"></a>install hexo-image-link(Markdown 顯示圖片 規則)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-image-link --save</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">![<span class=\"string\">picture 1</span>](<span class=\"link\">hexo/test.png</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"instrall-管理文章的後台插件-不好用-也會產生很多-npm-vulnerabilities-漏洞\"><a href=\"#instrall-管理文章的後台插件-不好用-也會產生很多-npm-vulnerabilities-漏洞\" class=\"headerlink\" title=\"instrall 管理文章的後台插件(不好用,也會產生很多 npm vulnerabilities-漏洞)\"></a>instrall 管理文章的後台插件(不好用,也會產生很多 npm vulnerabilities-漏洞)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-admin --save</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:4000/admin\">http://localhost:4000/admin</a></p>\n<br> \n\n<h2 id=\"設定檔案編輯\"><a href=\"#設定檔案編輯\" class=\"headerlink\" title=\"設定檔案編輯\"></a>設定檔案編輯</h2><h3 id=\"config-yml-for-GitHub\"><a href=\"#config-yml-for-GitHub\" class=\"headerlink\" title=\"_config.yml(for GitHub)\"></a>_config.yml(for GitHub)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repository:</span> <span class=\"string\">&#x27;https://github.com/hot5656/hot5656.github.io.git&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"config-yml-for-圖片放於對應的目錄下\"><a href=\"#config-yml-for-圖片放於對應的目錄下\" class=\"headerlink\" title=\"_config.yml(for 圖片放於對應的目錄下)\"></a>_config.yml(for 圖片放於對應的目錄下)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"config-yml-for-網址設定\"><a href=\"#config-yml-for-網址設定\" class=\"headerlink\" title=\"_config.yml(for 網址設定)\"></a>_config.yml(for 網址設定)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">https://hot5656.github.io/blog/</span></span><br><span class=\"line\"><span class=\"attr\">root:</span> <span class=\"string\">/blog/</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"config-yml-for-網頁基本設定\"><a href=\"#config-yml-for-網頁基本設定\" class=\"headerlink\" title=\"_config.yml(for 網頁基本設定)\"></a>_config.yml(for 網頁基本設定)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Site</span></span><br><span class=\"line\"><span class=\"attr\">title:</span> <span class=\"string\">Robert</span> <span class=\"string\">雜記</span>  <span class=\"comment\"># 部落格標題</span></span><br><span class=\"line\"><span class=\"attr\">subtitle:</span> <span class=\"string\">&#x27;&#x27;</span>        <span class=\"comment\"># 副標題</span></span><br><span class=\"line\"><span class=\"attr\">description:</span> <span class=\"string\">&#x27;&#x27;</span>     <span class=\"comment\"># 網站描述 </span></span><br><span class=\"line\"><span class=\"attr\">keywords:</span>           <span class=\"comment\"># 網站關鍵字(以逗號隔開)，方便 SEO </span></span><br><span class=\"line\"><span class=\"attr\">author:</span> <span class=\"string\">Robert</span> <span class=\"string\">Kao</span>  <span class=\"comment\"># 姓名或暱稱</span></span><br><span class=\"line\"><span class=\"attr\">language:</span> <span class=\"string\">zh-TW</span>     <span class=\"comment\"># 使用的語言</span></span><br><span class=\"line\"><span class=\"attr\">timezone:</span> <span class=\"string\">&#x27;&#x27;</span>        <span class=\"comment\"># 留空以使用系統時間</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"config-yml-for-首頁一頁要顯示幾篇文章\"><a href=\"#config-yml-for-首頁一頁要顯示幾篇文章\" class=\"headerlink\" title=\"_config.yml(for 首頁一頁要顯示幾篇文章)\"></a>_config.yml(for 首頁一頁要顯示幾篇文章)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">index_generator:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">per_page:</span> <span class=\"number\">10</span>  <span class=\"comment\">#一頁顯示的文章量 (0 = 關閉分頁功能)</span></span><br><span class=\"line\">  <span class=\"attr\">order_by:</span> <span class=\"string\">-date</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"config-next-yml-for-列出所有搜尋結果\"><a href=\"#config-next-yml-for-列出所有搜尋結果\" class=\"headerlink\" title=\"_config.next.yml (for 列出所有搜尋結果)\"></a>_config.next.yml (for 列出所有搜尋結果)</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Show top n results per article, show all results by setting to -1</span></span><br><span class=\"line\"><span class=\"comment\"># top_n_per_article: 1</span></span><br><span class=\"line\"><span class=\"comment\"># change show all result</span></span><br><span class=\"line\"><span class=\"attr\">top_n_per_article:</span> <span class=\"number\">-1</span></span><br></pre></td></tr></table></figure>\n\n<br> \n\n<h2 id=\"md檔-設定\"><a href=\"#md檔-設定\" class=\"headerlink\" title=\"md檔 設定\"></a>md檔 設定</h2><h3 id=\"加入-繼續閱讀-截斷文章\"><a href=\"#加入-繼續閱讀-截斷文章\" class=\"headerlink\" title=\"加入 繼續閱讀 截斷文章\"></a>加入 繼續閱讀 截斷文章</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"page-改成一般-HTML-格式\"><a href=\"#page-改成一般-HTML-格式\" class=\"headerlink\" title=\"page 改成一般 HTML 格式\"></a>page 改成一般 HTML 格式</h3><h4 id=\"index-md-change-to-index-html\"><a href=\"#index-md-change-to-index-html\" class=\"headerlink\" title=\"index.md change to index.html\"></a>index.md change to index.html</h4><h4 id=\"整頁完全受page-layout-影響-填入以下\"><a href=\"#整頁完全受page-layout-影響-填入以下\" class=\"headerlink\" title=\"整頁完全受page layout 影響(填入以下)\"></a>整頁完全受page layout 影響(填入以下)</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">layout:false</span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設定-Hexo-本地連結\"><a href=\"#設定-Hexo-本地連結\" class=\"headerlink\" title=\"設定 Hexo 本地連結\"></a>設定 Hexo 本地連結</h3><p><code>&#123;% post_link filename [title] [escape] %&#125;</code></p>\n<h4 id=\"show-hexo’s-post-title\"><a href=\"#show-hexo’s-post-title\" class=\"headerlink\" title=\"show hexo’s post title\"></a>show hexo’s post title</h4><figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% post<span class=\"emphasis\">_link hexo-1 %&#125;</span></span><br></pre></td></tr></table></figure>\n<a href=\"/2021/03/12/hexo-1/\" title=\"Put Hexo to GitHub\">Put Hexo to GitHub</a>\n\n<h4 id=\"show-指定文字\"><a href=\"#show-指定文字\" class=\"headerlink\" title=\"show 指定文字\"></a>show 指定文字</h4><figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% post<span class=\"emphasis\">_link hexo-1 &#x27;Hexo 製作部落格&#x27; %&#125;</span></span><br></pre></td></tr></table></figure>\n<a href=\"/2021/03/12/hexo-1/\" title=\"Hexo 製作部落格\">Hexo 製作部落格</a>\n\n<h4 id=\"Escape-title-don’t-care-tag\"><a href=\"#Escape-title-don’t-care-tag\" class=\"headerlink\" title=\"Escape title(don’t care tag)\"></a>Escape title(don’t care tag)</h4><figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% post<span class=\"emphasis\">_link hexo-1 &#x27;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span></span>Hexo<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span></span> 製作部落格&#x27; %&#125;</span></span><br></pre></td></tr></table></figure>\n<a href=\"/2021/03/12/hexo-1/\" title=\"&lt;b&gt;Hexo&lt;&#x2F;b&gt; 製作部落格\">&lt;b&gt;Hexo&lt;&#x2F;b&gt; 製作部落格</a>\n\n<h4 id=\"Do-not-Escape-title-care-tag\"><a href=\"#Do-not-Escape-title-care-tag\" class=\"headerlink\" title=\"Do not Escape title(care tag)\"></a>Do not Escape title(care tag)</h4><figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% post<span class=\"emphasis\">_link hexo-1 &#x27;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span></span>Hexo<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span></span> 製作部落格&#x27; false %&#125;</span></span><br></pre></td></tr></table></figure>\n<a href=\"/2021/03/12/hexo-1/\" title=\"&lt;b&gt;Hexo&lt;&#x2F;b&gt; 製作部落格\"><b>Hexo</b> 製作部落格</a>\n\n<h3 id=\"顯示圖檔\"><a href=\"#顯示圖檔\" class=\"headerlink\" title=\"顯示圖檔\"></a>顯示圖檔</h3><h4 id=\"default-顯示\"><a href=\"#default-顯示\" class=\"headerlink\" title=\"default 顯示\"></a>default 顯示</h4><figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% asset<span class=\"emphasis\">_img pic2.jpg pic2 %&#125;</span></span><br></pre></td></tr></table></figure>\n<img src=\"/2021/03/14/hexo-3/pic2.jpg\" class=\"\" title=\"pic2\">\n\n<h4 id=\"設定外框寬度-可靠左或縮小圖片\"><a href=\"#設定外框寬度-可靠左或縮小圖片\" class=\"headerlink\" title=\"設定外框寬度(可靠左或縮小圖片)\"></a>設定外框寬度(可靠左或縮小圖片)</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:500px&quot;</span>&gt;</span></span><br><span class=\"line\">\t&#123;% asset_img pic2.jpg pic2&quot;%&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/14/hexo-3/pic2.jpg\" class=\"\" title=\"pic2\">\n</div>\n\n<h4 id=\"加入自訂-class\"><a href=\"#加入自訂-class\" class=\"headerlink\" title=\"加入自訂 class\"></a>加入自訂 class</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.post-image &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% asset_img post-image pic2.jpg pic2&quot;%&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"/2021/03/14/hexo-3/pic2.jpg\" class=\"post-image\" title=\"pic2\">\n\n<h4 id=\"指定寬度-高度\"><a href=\"#指定寬度-高度\" class=\"headerlink\" title=\"指定寬度,高度\"></a>指定寬度,高度</h4><figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% asset<span class=\"emphasis\">_img pic2.jpg 300 300 &quot;pic2&quot;%&#125;</span></span><br></pre></td></tr></table></figure>\n<img src=\"/2021/03/14/hexo-3/pic2.jpg\" class=\"\" width=\"300\" height=\"300\" title=\"pic2\">\n\n<h4 id=\"指定寬度-自動調整高度\"><a href=\"#指定寬度-自動調整高度\" class=\"headerlink\" title=\"指定寬度(自動調整高度)\"></a>指定寬度(自動調整高度)</h4><figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% asset<span class=\"emphasis\">_img pic2.jpg 300 &quot;pic2&quot;%&#125;</span></span><br></pre></td></tr></table></figure>\n<img src=\"/2021/03/14/hexo-3/pic2.jpg\" class=\"\" width=\"300\" title=\"pic2\">\n\n<h4 id=\"指定-Title-amp-Alt\"><a href=\"#指定-Title-amp-Alt\" class=\"headerlink\" title=\"指定 Title &amp; Alt\"></a>指定 Title &amp; Alt</h4><blockquote>\n<p>alt 圖片替代文字<br>title 滑鼠移經顯示文字標示</p>\n</blockquote>\n<figure class=\"highlight md\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% asset<span class=\"emphasis\">_img pic2.jpg &quot;pic2 title&#x27;pic2 alt&#x27;&quot; %&#125;</span></span><br></pre></td></tr></table></figure>\n<img src=\"/2021/03/14/hexo-3/pic2.jpg\" class=\"\" title=\"pic2 title\" alt=\"pic2 alt\">\n\n\n\n\n\n\n\n\n\n","categories":["Blog"],"tags":["hexo"]},{"title":"hexo 備份","url":"/2021/03/14/hexo-4/","content":"<h2 id=\"第一次備份\"><a href=\"#第一次備份\" class=\"headerlink\" title=\"第一次備份\"></a>第一次備份</h2><h3 id=\"git-init\"><a href=\"#git-init\" class=\"headerlink\" title=\"git init\"></a>git init</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog</span><br><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"建立新分支-backup\"><a href=\"#建立新分支-backup\" class=\"headerlink\" title=\"建立新分支 backup\"></a>建立新分支 backup</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout -b backup</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h3 id=\"hexo-本身已建立-gitignore\"><a href=\"#hexo-本身已建立-gitignore\" class=\"headerlink\" title=\"hexo 本身已建立 .gitignore\"></a>hexo 本身已建立 .gitignore</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">.DS_Store</span><br><span class=\"line\">Thumbs.db</span><br><span class=\"line\">db.json</span><br><span class=\"line\">*.<span class=\"built_in\">log</span></span><br><span class=\"line\">node_modules/</span><br><span class=\"line\">public/</span><br><span class=\"line\">.deploy*/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-file-and-commit\"><a href=\"#add-file-and-commit\" class=\"headerlink\" title=\"add file and commit\"></a>add file and commit</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;1st commit&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"push-to-remote\"><a href=\"#push-to-remote\" class=\"headerlink\" title=\"push to remote\"></a>push to remote</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/hot5656/blog.git</span><br><span class=\"line\">git push -u origin backup</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"修改更新\"><a href=\"#修改更新\" class=\"headerlink\" title=\"修改更新\"></a>修改更新</h2><h3 id=\"查看修改內容\"><a href=\"#查看修改內容\" class=\"headerlink\" title=\"查看修改內容\"></a>查看修改內容</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git status</span><br><span class=\"line\">  On branch backup</span><br><span class=\"line\">  Your branch is up to date with <span class=\"string\">&#x27;origin/backup&#x27;</span>.</span><br><span class=\"line\">  Changes not staged <span class=\"keyword\">for</span> commit:</span><br><span class=\"line\">    (use <span class=\"string\">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class=\"line\">    (use <span class=\"string\">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class=\"keyword\">in</span> working directory)</span><br><span class=\"line\">          modified:   <span class=\"built_in\">source</span>/_posts/hexo-1.md</span><br><span class=\"line\">          modified:   <span class=\"built_in\">source</span>/_posts/hexo-4.md</span><br><span class=\"line\">  no changes added to commit (use <span class=\"string\">&quot;git add&quot;</span> and/or <span class=\"string\">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"加入全部異動檔案\"><a href=\"#加入全部異動檔案\" class=\"headerlink\" title=\"加入全部異動檔案\"></a>加入全部異動檔案</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add -A</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-commit\"><a href=\"#add-commit\" class=\"headerlink\" title=\"add commit\"></a>add commit</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git commit -m <span class=\"string\">&quot;update 2021/03/16&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"push-origin-to-remote\"><a href=\"#push-origin-to-remote\" class=\"headerlink\" title=\"push origin to remote\"></a>push origin to remote</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git push origin backup</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"同步遠端-最新內容\"><a href=\"#同步遠端-最新內容\" class=\"headerlink\" title=\"同步遠端 最新內容\"></a>同步遠端 最新內容</h2><h3 id=\"fetch-merge\"><a href=\"#fetch-merge\" class=\"headerlink\" title=\"fetch + merge\"></a>fetch + merge</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 抓回遠端分支</span></span><br><span class=\"line\">git fetch origin backup</span><br><span class=\"line\"><span class=\"comment\"># merge 遠端分支</span></span><br><span class=\"line\">git merge origin/backup</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"簡短顯示-commit\"><a href=\"#簡短顯示-commit\" class=\"headerlink\" title=\"簡短顯示 commit\"></a>簡短顯示 commit</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span> --oneline</span><br><span class=\"line\">\t4f52de2 (HEAD -&gt; backup, origin/backup) update 2021/03/28-2</span><br><span class=\"line\">\t9bb92eb update 2021/03/28</span><br><span class=\"line\">\t5a09926 update 2021/03/25</span><br><span class=\"line\">\taabcf2b update 2021/3/24</span><br><span class=\"line\">\t8ad28b8 update 2021/3/23</span><br><span class=\"line\">\t155415a update 2021/03/22</span><br><span class=\"line\">\t5e79348 update 2021/3/21</span><br><span class=\"line\">\t0d82e9b update 2021/03/20</span><br><span class=\"line\">\t3d7d128 update 2021/03/19</span><br><span class=\"line\">\tb115098 update 2021/03/18</span><br><span class=\"line\">\t943a44a update 2021/2/17</span><br><span class=\"line\">\tc16e900 update 1021/02/16</span><br><span class=\"line\">\t7bf66fc add some hexo, categories and tags</span><br><span class=\"line\">\t83a54ad 1st commit</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"顯示所有-respsitory\"><a href=\"#顯示所有-respsitory\" class=\"headerlink\" title=\"顯示所有 respsitory\"></a>顯示所有 respsitory</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git show-ref</span><br><span class=\"line\">\t4f52de2bb6a363eed5ff816aed641b26722d2b07 refs/heads/backup</span><br><span class=\"line\">\t4f52de2bb6a363eed5ff816aed641b26722d2b07 refs/remotes/origin/backup</span><br><span class=\"line\">\tee599a173055bef88086941c5a96277a2cc34340 refs/remotes/origin/master</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"備份-clone\"><a href=\"#備份-clone\" class=\"headerlink\" title=\"備份 clone\"></a>備份 clone</h2><h3 id=\"clone\"><a href=\"#clone\" class=\"headerlink\" title=\"clone\"></a>clone</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/hot5656/blog.git</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"check-to-backup\"><a href=\"#check-to-backup\" class=\"headerlink\" title=\"check to backup\"></a>check to backup</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog</span><br><span class=\"line\">git branch -a</span><br><span class=\"line\">git checkout backup</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Install-Hexo\"><a href=\"#Install-Hexo\" class=\"headerlink\" title=\"Install Hexo\"></a>Install Hexo</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Install-all-package-for-Blog\"><a href=\"#Install-all-package-for-Blog\" class=\"headerlink\" title=\"Install all package for Blog\"></a>Install all package for Blog</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"產生靜態檔-本地執行\"><a href=\"#產生靜態檔-本地執行\" class=\"headerlink\" title=\"產生靜態檔 + 本地執行\"></a>產生靜態檔 + 本地執行</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo s -g</span><br></pre></td></tr></table></figure>\n\n\n","categories":["Blog"],"tags":["github","hexo"]},{"title":"hexo 更換 theme(主題)","url":"/2021/03/15/hexo-7/","content":"<h2 id=\"next\"><a href=\"#next\" class=\"headerlink\" title=\"next\"></a>next</h2><h3 id=\"clone-next-theme\"><a href=\"#clone-next-theme\" class=\"headerlink\" title=\"clone next theme\"></a>clone next theme</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-theme-next --save</span><br><span class=\"line\"><span class=\"comment\"># copy next config to local</span></span><br><span class=\"line\"><span class=\"comment\"># windows command</span></span><br><span class=\"line\">copy node_modules\\hexo-theme-next\\_config.yml _config.next.yml</span><br><span class=\"line\"><span class=\"comment\"># linux command</span></span><br><span class=\"line\">cp node_modules/hexo-theme-next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure>\n<p>or </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/next-theme/hexo-theme-next themes/next</span><br><span class=\"line\"><span class=\"comment\"># copy next config to local</span></span><br><span class=\"line\"><span class=\"comment\"># windows command</span></span><br><span class=\"line\">copy themes\\next\\_config.yml _config.next.yml</span><br><span class=\"line\"><span class=\"comment\"># linux command</span></span><br><span class=\"line\">cp themes/next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"config-yml-設定\"><a href=\"#config-yml-設定\" class=\"headerlink\" title=\"_config.yml 設定\"></a>_config.yml 設定</h3><h4 id=\"設定-theme\"><a href=\"#設定-theme\" class=\"headerlink\" title=\"設定 theme\"></a>設定 theme</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># theme: landscape</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">next</span></span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h3 id=\"config-next-yml-設定\"><a href=\"#config-next-yml-設定\" class=\"headerlink\" title=\"_config.next.yml 設定\"></a>_config.next.yml 設定</h3><h4 id=\"設置菜單\"><a href=\"#設置菜單\" class=\"headerlink\" title=\"設置菜單\"></a>設置菜單</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\">  <span class=\"attr\">home:</span> <span class=\"string\">/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-home</span></span><br><span class=\"line\">  <span class=\"comment\">#about: /about/ || fa fa-user</span></span><br><span class=\"line\">  <span class=\"attr\">tags:</span> <span class=\"string\">/tags/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-tags</span></span><br><span class=\"line\">  <span class=\"attr\">categories:</span> <span class=\"string\">/categories/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-th</span></span><br><span class=\"line\">  <span class=\"attr\">archives:</span> <span class=\"string\">/archives/</span> <span class=\"string\">||</span> <span class=\"string\">fa</span> <span class=\"string\">fa-archive</span></span><br><span class=\"line\">  <span class=\"comment\">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class=\"line\">  <span class=\"comment\">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class=\"line\">  <span class=\"comment\">#commonweal: /404/ || fa fa-heartbeat</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"更改外觀\"><a href=\"#更改外觀\" class=\"headerlink\" title=\"更改外觀\"></a>更改外觀</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Schemes 外觀</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Muse</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Mist</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Pisces</span></span><br><span class=\"line\"><span class=\"attr\">scheme:</span> <span class=\"string\">Gemini</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"設定側欄\"><a href=\"#設定側欄\" class=\"headerlink\" title=\"設定側欄\"></a>設定側欄</h4><ul>\n<li>left - 靠左放置</li>\n<li>right - 靠右放置</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sidebar:</span></span><br><span class=\"line\">  <span class=\"comment\"># Sidebar Position.</span></span><br><span class=\"line\">  <span class=\"attr\">position:</span> <span class=\"string\">left</span></span><br><span class=\"line\">  <span class=\"comment\">#position: right</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"設置側欄顯示的時機-only-for-Muse-Mist\"><a href=\"#設置側欄顯示的時機-only-for-Muse-Mist\" class=\"headerlink\" title=\"設置側欄顯示的時機(only for Muse | Mist)\"></a>設置側欄顯示的時機(only for Muse | Mist)</h4><ul>\n<li>post - 默認行為，在文章頁面（擁有目錄列表）時顯示</li>\n<li>always - 在所有頁面中都顯示</li>\n<li>hide - 在所有頁面中都隱藏（可以手動展開）</li>\n<li>remove - 完全移除</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Sidebar Display (only for Muse | Mist), available values:</span></span><br><span class=\"line\"><span class=\"comment\">#  - post    expand on posts automatically. Default.</span></span><br><span class=\"line\"><span class=\"comment\">#  - always  expand for all pages automatically.</span></span><br><span class=\"line\"><span class=\"comment\">#  - hide    expand only when click on the sidebar toggle icon.</span></span><br><span class=\"line\"><span class=\"comment\">#  - remove  totally remove sidebar including sidebar toggle.</span></span><br><span class=\"line\"><span class=\"attr\">display:</span> <span class=\"string\">post</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"設置頭像\"><a href=\"#設置頭像\" class=\"headerlink\" title=\"設置頭像\"></a>設置頭像</h4><p>放於 source/images/</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Sidebar Avatar</span></span><br><span class=\"line\"><span class=\"attr\">avatar:</span></span><br><span class=\"line\">  <span class=\"comment\"># Replace the default image and set the url here.</span></span><br><span class=\"line\">  <span class=\"attr\">url:</span> <span class=\"string\">/images/head.png</span> <span class=\"comment\">#/images/avatar.gif</span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"inside\"><a href=\"#inside\" class=\"headerlink\" title=\"inside\"></a>inside</h2><h3 id=\"install-inside-theme\"><a href=\"#install-inside-theme\" class=\"headerlink\" title=\"install inside theme\"></a>install inside theme</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-theme-inside --save</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"config-yml-設定-theme\"><a href=\"#config-yml-設定-theme\" class=\"headerlink\" title=\"_config.yml 設定 theme\"></a>_config.yml 設定 theme</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># theme: landscape</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">inside</span></span><br></pre></td></tr></table></figure>","categories":["Blog"],"tags":["hexo"]},{"title":"HTTP\tAPI","url":"/2021/05/06/http-1/","content":"<h3 id=\"簡介\"><a href=\"#簡介\" class=\"headerlink\" title=\"簡介\"></a>簡介</h3><p>HTTP API(Application Programming interface) 即 Web API,串接 API 即使用 API 提供者提供的 API</p>\n<span id=\"more\"></span>\n\n<h3 id=\"API-using-QueryString\"><a href=\"#API-using-QueryString\" class=\"headerlink\" title=\"API using QueryString\"></a>API using QueryString</h3><div style=\"width:650px\">\n    <img src=\"/2021/05/06/http-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n\n\n<h3 id=\"API-test\"><a href=\"#API-test\" class=\"headerlink\" title=\"API test\"></a>API test</h3><h4 id=\"REQ-RES\"><a href=\"#REQ-RES\" class=\"headerlink\" title=\"REQ | RES\"></a><a href=\"https://reqres.in/\">REQ | RES</a></h4><h5 id=\"GET-SINGLE-USER-Request\"><a href=\"#GET-SINGLE-USER-Request\" class=\"headerlink\" title=\"GET - SINGLE USER (Request)\"></a>GET - SINGLE USER (Request)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// api1.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> process = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;process&#x27;</span>)</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"comment\">// console.log(process.argv)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// request(&#x27;https://reqres.in/api/products/3&#x27;, </span></span><br><span class=\"line\"><span class=\"comment\">// \tfunction (error, response, body) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\tconsole.log(body)</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// );</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://reqres.in/api/products/&#x27;</span> + process.argv[<span class=\"number\">2</span>], </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> body)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api1.js 2</span><br><span class=\"line\">&#123;&quot;data&quot;:&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;fuchsia rose&quot;,&quot;year&quot;:2001,&quot;color&quot;:&quot;#C74375&quot;,&quot;pantone_value&quot;:&quot;17-2031&quot;&#125;,&quot;support&quot;:&#123;&quot;url&quot;:&quot;https:&#x2F;</span><br><span class=\"line\">&#x2F;reqres.in&#x2F;#support-heading&quot;,&quot;text&quot;:&quot;To keep ReqRes free, contributions towards server costs are appreciated!&quot;&#125;&#125;</span><br><span class=\"line\">string</span><br><span class=\"line\"></span><br><span class=\"line\">$ node api1.js 3</span><br><span class=\"line\">&#123;&quot;data&quot;:&#123;&quot;id&quot;:3,&quot;name&quot;:&quot;true red&quot;,&quot;year&quot;:2002,&quot;color&quot;:&quot;#BF1932&quot;,&quot;pantone_value&quot;:&quot;19-1664&quot;&#125;,&quot;support&quot;:&#123;&quot;url&quot;:&quot;https:&#x2F;&#x2F;req</span><br><span class=\"line\">res.in&#x2F;#support-heading&quot;,&quot;text&quot;:&quot;To keep ReqRes free, contributions towards server costs are appreciated!&quot;&#125;&#125;</span><br><span class=\"line\">string</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"POST-CREATE-Request\"><a href=\"#POST-CREATE-Request\" class=\"headerlink\" title=\"POST - CREATE (Request)\"></a>POST - CREATE (Request)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// api2.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">request.post(</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\turl:<span class=\"string\">&#x27;https://reqres.in/api/users&#x27;</span>, </span><br><span class=\"line\">\t\tform: &#123;</span><br><span class=\"line\">\t\t\tname:<span class=\"string\">&#x27;Robert&#x27;</span>,</span><br><span class=\"line\">\t\t\tjob: <span class=\"string\">&#x27;engineer&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, response, body</span>)</span>&#123; </span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api2.js</span><br><span class=\"line\">&#123;<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;Robert&quot;</span>,<span class=\"string\">&quot;job&quot;</span>:<span class=\"string\">&quot;engineer&quot;</span>,<span class=\"string\">&quot;id&quot;</span>:<span class=\"string\">&quot;806&quot;</span>,<span class=\"string\">&quot;createdAt&quot;</span>:<span class=\"string\">&quot;2021-05-07T04:31:50.023Z&quot;</span>&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"DELETE-Request\"><a href=\"#DELETE-Request\" class=\"headerlink\" title=\"DELETE (Request)\"></a>DELETE (Request)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// api2.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> process = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;process&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">request.delete(</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\turl:<span class=\"string\">&#x27;https://reqres.in/api/products/&#x27;</span> + process.argv[<span class=\"number\">2</span>], </span><br><span class=\"line\">\t&#125;, </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, response, body</span>)</span>&#123; </span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;status code : &quot;</span> + response.statusCode)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api12.js 2</span><br><span class=\"line\">status code : 204</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"PATCH-Request\"><a href=\"#PATCH-Request\" class=\"headerlink\" title=\"PATCH (Request)\"></a>PATCH (Request)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ap22.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> process = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;process&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">request.patch(</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\turl:<span class=\"string\">&#x27;https://reqres.in/api/products/2&#x27;</span>, </span><br><span class=\"line\">\t\tform: &#123;</span><br><span class=\"line\">\t\t\tname:<span class=\"string\">&#x27;Robert&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, response, body</span>)</span>&#123; </span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;status code : &quot;</span> + response.statusCode)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api22.js</span><br><span class=\"line\">status code : 200</span><br><span class=\"line\">&#123;<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;Robert&quot;</span>,<span class=\"string\">&quot;updatedAt&quot;</span>:<span class=\"string\">&quot;2021-05-07T13:53:34.158Z&quot;</span>&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"GET-SINGLE-USER-axios\"><a href=\"#GET-SINGLE-USER-axios\" class=\"headerlink\" title=\"GET - SINGLE USER (axios)\"></a>GET - SINGLE USER (axios)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// api3.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> axios  = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;axios&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> process = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;process&#x27;</span>)</span><br><span class=\"line\">\t</span><br><span class=\"line\">axios.get(<span class=\"string\">&#x27;https://reqres.in/api/products/&#x27;</span> + process.argv[<span class=\"number\">2</span>])</span><br><span class=\"line\">\t.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(response.data)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> response.data)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">\t\tConstantSourceNode.log(error)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// always executed</span></span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api3.js  1</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    id: 1,</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;cerulean&#x27;</span>,</span><br><span class=\"line\">    year: 2000,</span><br><span class=\"line\">    color: <span class=\"string\">&#x27;#98B2D1&#x27;</span>,</span><br><span class=\"line\">    pantone_value: <span class=\"string\">&#x27;15-4020&#x27;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  support: &#123;</span><br><span class=\"line\">    url: <span class=\"string\">&#x27;https://reqres.in/#support-heading&#x27;</span>,</span><br><span class=\"line\">    text: <span class=\"string\">&#x27;To keep ReqRes free, contributions towards server costs are appreciated!&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">object</span><br><span class=\"line\"></span><br><span class=\"line\">$ node api3.js  2</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    id: 2,</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;fuchsia rose&#x27;</span>,</span><br><span class=\"line\">    year: 2001,</span><br><span class=\"line\">    color: <span class=\"string\">&#x27;#C74375&#x27;</span>,</span><br><span class=\"line\">    pantone_value: <span class=\"string\">&#x27;17-2031&#x27;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  support: &#123;</span><br><span class=\"line\">    url: <span class=\"string\">&#x27;https://reqres.in/#support-heading&#x27;</span>,</span><br><span class=\"line\">    text: <span class=\"string\">&#x27;To keep ReqRes free, contributions towards server costs are appreciated!&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">object</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"POST-CREATE-axios\"><a href=\"#POST-CREATE-axios\" class=\"headerlink\" title=\"POST - CREATE (axios)\"></a>POST - CREATE (axios)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// api4.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> axios  = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;axios&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">axios.post(<span class=\"string\">&#x27;https://reqres.in/api/users&#x27;</span>, &#123;</span><br><span class=\"line\">\tname:<span class=\"string\">&#x27;Robert&#x27;</span>,</span><br><span class=\"line\">\tjob: <span class=\"string\">&#x27;engineer&#x27;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(response.data);</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> response.data)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api4.js</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  name: <span class=\"string\">&#x27;Robert&#x27;</span>,</span><br><span class=\"line\">  job: <span class=\"string\">&#x27;engineer&#x27;</span>,</span><br><span class=\"line\">  id: <span class=\"string\">&#x27;672&#x27;</span>,</span><br><span class=\"line\">  createdAt: <span class=\"string\">&#x27;2021-05-07T06:09:59.647Z&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">object</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"DELETE-axios\"><a href=\"#DELETE-axios\" class=\"headerlink\" title=\"DELETE (axios)\"></a>DELETE (axios)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// api5.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> axios  = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;axios&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> process = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;process&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">axios.delete(<span class=\"string\">&#x27;https://reqres.in/api/products/&#x27;</span> + process.argv[<span class=\"number\">2</span>])</span><br><span class=\"line\">\t.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(response)</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;status code : &quot;</span> + response.status)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">\t\tConstantSourceNode.log(error)</span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api5.js 2</span><br><span class=\"line\">status code :204</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"PATCH-axios\"><a href=\"#PATCH-axios\" class=\"headerlink\" title=\"PATCH (axios)\"></a>PATCH (axios)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// api6.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> axios  = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;axios&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">axios.patch(<span class=\"string\">&#x27;https://reqres.in/api/products/2&#x27;</span>, &#123;</span><br><span class=\"line\">\t\tname:<span class=\"string\">&#x27;Robert&#x27;</span>,</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(response)</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;status code : &quot;</span> + response.status)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(response.data)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">\t\tConstantSourceNode.log(error)</span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node api6.js</span><br><span class=\"line\">status code : 200</span><br><span class=\"line\">&#123; name: <span class=\"string\">&#x27;Robert&#x27;</span>, updatedAt: <span class=\"string\">&#x27;2021-05-07T07:39:29.788Z&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Twitch-API-v5\"><a href=\"#Twitch-API-v5\" class=\"headerlink\" title=\"Twitch API v5\"></a><a href=\"https://dev.twitch.tv/docs/v5\">Twitch API v5</a></h4><h5 id=\"Get-Top-Games\"><a href=\"#Get-Top-Games\" class=\"headerlink\" title=\"Get Top Games\"></a><a href=\"https://dev.twitch.tv/docs/v5/reference/games#get-top-games\">Get Top Games</a></h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  url: <span class=\"string\">&#x27;https://api.twitch.tv/kraken/games/top?limit=20&#x27;</span>,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    Accept: <span class=\"string\">&#x27;application/vnd.twitchtv.v5+json&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Client-ID&#x27;</span>: <span class=\"string\">&#x27;just_test_id...&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">(error, response, body) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> bodyObj = <span class=\"built_in\">JSON</span>.parse(body)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; bodyObj.top.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(bodyObj.top[i].viewers, bodyObj.top[i].game.name)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node hw4.js</span><br><span class=\"line\">361259 Just Chatting</span><br><span class=\"line\">250115 Resident Evil Village</span><br><span class=\"line\">229862 Grand Theft Auto V</span><br><span class=\"line\">125651 League of Legends</span><br><span class=\"line\">108203 Minecraft</span><br><span class=\"line\">96315 Call of Duty: Warzone</span><br><span class=\"line\">81721 VALORANT</span><br><span class=\"line\">77601 FIFA 21</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Lidemy-HTTP-Challenge\"><a href=\"#Lidemy-HTTP-Challenge\" class=\"headerlink\" title=\"Lidemy HTTP Challenge\"></a><a href=\"https://lidemy-http-challenge.herokuapp.com/start\">Lidemy HTTP Challenge</a></h4><h5 id=\"issue-紀錄\"><a href=\"#issue-紀錄\" class=\"headerlink\" title=\"issue 紀錄\"></a>issue 紀錄</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># process 參數含 &amp; 要加 “ 才不會有問題</span></span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv1?token=&#123;GOGOGO&#125;&amp;name=Robert&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 輸入中文要編碼</span></span><br><span class=\"line\">node challeng.js getbook <span class=\"string\">&quot;?q=%E4%B8%96%E7%95%8C&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 設定 origin</span></span><br><span class=\"line\"><span class=\"comment\">#\t\theaders: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t\t&#x27;User-Agent&#x27;: &#x27;Googlebot&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t\tOrigin: &#x27;https://lidemy.com&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t&#125;</span></span><br><span class=\"line\">node challeng.js bookv3 hello</span><br><span class=\"line\"><span class=\"comment\"># 設定 User Agent for IE6</span></span><br><span class=\"line\"><span class=\"comment\">#&#123;</span></span><br><span class=\"line\"><span class=\"comment\">#\theaders: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t&#x27;X-Library-Number&#x27;: &#x27;20&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t&#x27;User-Agent&#x27;: &#x27;MSIE 6.0&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#\t&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">#\t&#x27;auth&#x27;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t&#x27;user&#x27;: &#x27;admin&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t&#x27;pass&#x27;: &#x27;admin123&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#\t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">#&#125;</span></span><br><span class=\"line\">node challeng.js infobook2</span><br><span class=\"line\"><span class=\"comment\">#  設定 User Agent for google search</span></span><br><span class=\"line\"><span class=\"comment\">#\theaders: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#\t\t&#x27;User-Agent&#x27;: &#x27;Googlebot&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">#\t\tOrigin: &#x27;https://lidemy.com&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#\t&#125;</span></span><br><span class=\"line\">node challeng.js bookv3 index</span><br><span class=\"line\"><span class=\"comment\"># process 參數含 ! 使用 &quot; 會有問題 要改為 &#x27;</span></span><br><span class=\"line\">node challeng.js <span class=\"string\">&#x27;lv15?token=&#123;ILOVELIdemy!!!&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"js-code\"><a href=\"#js-code\" class=\"headerlink\" title=\"js code\"></a>js code</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// challenge.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> parameter = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">\tparameter = process.argv[<span class=\"number\">2</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;book&quot;</span>) &#123;</span><br><span class=\"line\">\trequest(<span class=\"string\">&#x27; https://lidemy-http-challenge.herokuapp.com/api/books/&#x27;</span> + process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;addbook&quot;</span>) &#123;</span><br><span class=\"line\">\trequest.post(&#123;</span><br><span class=\"line\">\t\t\turl: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/books&#x27;</span>,</span><br><span class=\"line\">\t\t\tform: &#123;</span><br><span class=\"line\">\t\t\t\tname: process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t\t\tISBN: process.argv[<span class=\"number\">4</span>]</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;getbook&quot;</span>) &#123;</span><br><span class=\"line\">\trequest(<span class=\"string\">&#x27; https://lidemy-http-challenge.herokuapp.com/api/books&#x27;</span> + process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;delbook&quot;</span>) &#123;</span><br><span class=\"line\">\trequest.delete(&#123;</span><br><span class=\"line\">\t\t\turl: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/books/&#x27;</span> + process.argv[<span class=\"number\">3</span>]</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;getme&quot;</span>) &#123;</span><br><span class=\"line\">\trequest.get(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/me&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;delbook2&quot;</span>) &#123;</span><br><span class=\"line\">\trequest.delete(&#123;</span><br><span class=\"line\">\t\t\turl: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/books/&#x27;</span> + process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;getbook2&quot;</span>) &#123;</span><br><span class=\"line\">\trequest(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/books&#x27;</span> + process.argv[<span class=\"number\">3</span>], &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;updatebook2&quot;</span>) &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/books/&#x27;</span> + process.argv[<span class=\"number\">3</span>])</span><br><span class=\"line\">\trequest.patch(&#123;</span><br><span class=\"line\">\t\t\turl: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/books/&#x27;</span> + process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\tform: &#123;</span><br><span class=\"line\">\t\t\t\tISBN: <span class=\"string\">&#x27;9981835423&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// console.log(httpResponse)</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;infobook2&quot;</span>) &#123;</span><br><span class=\"line\">\trequest(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/sys_info&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\theaders: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;X-Library-Number&#x27;</span>: <span class=\"string\">&#x27;20&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;MSIE 6.0&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;bookv3&quot;</span>) &#123;</span><br><span class=\"line\">\trequest(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v3/&#x27;</span> + process.argv[<span class=\"number\">3</span>], &#123;</span><br><span class=\"line\">\t\t\theaders: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;Googlebot&#x27;</span>,</span><br><span class=\"line\">\t\t\t\tOrigin: <span class=\"string\">&#x27;https://lidemy.com&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;, </span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// console.log(response)</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.argv[<span class=\"number\">2</span>] === <span class=\"string\">&quot;lv15&quot;</span>) &#123;</span><br><span class=\"line\">\trequest(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/lv15?token=&#123;ILOVELIdemy!!!&#125;&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// console.log(process.argv)</span></span><br><span class=\"line\"><span class=\"comment\">// console.log(parameter) </span></span><br><span class=\"line\"><span class=\"comment\">// console.log(&#x27;---------&#x27;)</span></span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/&#x27;</span> + parameter,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h5><p><a href=\"https://lidemy-http-challenge.herokuapp.com/start\">Challeng Start</a><br><a href=\"https://gist.github.com/aszx87410/3873b3d9cbb28cb6fcbb85bf493b63ba\">Book API</a><br><a href=\"https://gist.github.com/aszx87410/1e5e5105c1c35197f55c485a88b0328a\">Book API v2</a><br><a href=\"https://gist.github.com/aszx87410/0b0d3cabf32c4e44084fadf5180d0cf4\">Book API v3</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Chrome --&gt; https://lidemy-http-challenge.herokuapp.com/start</span><br><span class=\"line\">\t第一關的 token 為：&#123;GOGOGO&#125;</span><br><span class=\"line\">\t附註：所以第一關網址為 /lv1?token=&#123;GOGOGO&#125;，不是 /lv1?token=GOGOGO，之後的關卡也是一樣</span><br><span class=\"line\">\t如果你需要提示的話，在網址最後面加上 &amp;hint=1 就會看到提示了，例如說：/lv1?token=&#123;GOGOGO&#125;&amp;hint=1</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv1?token=&#123;GOGOGO&#125;&quot;</span></span><br><span class=\"line\">\t啊...好久沒有看到年輕人到我這個圖書館了，我叫做 lib，是這個圖書館的管理員</span><br><span class=\"line\">\t很開心看到有年輕人願意來幫忙，最近圖書館剛換了資訊系統，我都搞不清楚怎麼用了...</span><br><span class=\"line\">\t這是他們提供給我的文件，我一個字都看不懂，但對你可能會有幫助：</span><br><span class=\"line\">\thttps://gist.github.com/aszx87410/3873b3d9cbb28cb6fcbb85bf493b63ba</span><br><span class=\"line\"></span><br><span class=\"line\">\t先把這文件放一旁吧，這個待會才會用到</span><br><span class=\"line\">\t你叫做什麼名字呢？用 GET 方法跟我說你的 name 叫做什麼吧！</span><br><span class=\"line\">\t除了 token 以外順便把 name 一起帶上來就可以了</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv1?token=&#123;GOGOGO&#125;&amp;name=Robert&quot;</span></span><br><span class=\"line\">\t啊...原來你叫 Robert 啊！下一關的 token 是 &#123;HellOWOrld&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv2?token=&#123;HellOWOrld&#125;&quot;</span></span><br><span class=\"line\">\t那本書的 id 是兩位數，介於 54~58 之間，你可以幫幫我嗎？</span><br><span class=\"line\">\t找到是哪一本之後把書的 id 用 GET 傳給我就行了。</span><br><span class=\"line\">node challeng.js book 55</span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;id&quot;</span>:55,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;心向群山：人類如何從畏懼高山，走到迷戀登山&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;羅伯特‧麥克法倫&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;2421169689&quot;</span>&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv2?token=&#123;HellOWOrld&#125;&amp;id=55&quot;</span></span><br><span class=\"line\">\t好像不是這本書耶...</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv2?token=&#123;HellOWOrld&#125;&amp;id=56&quot;</span></span><br><span class=\"line\">\t啊！就是這本書，太謝謝你了。下一關的 token 為：&#123;5566NO1&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv3?token=&#123;5566NO1&#125;&quot;</span></span><br><span class=\"line\">\t真是太感謝你幫我找到這本書了！</span><br><span class=\"line\">\t剛剛在你找書的時候有一批新的書籍送來了，是這次圖書館根據讀者的推薦買的新書，其中</span><br><span class=\"line\">\t有一本我特別喜歡，想要優先上架。</span><br><span class=\"line\">\t書名是《大腦喜歡這樣學》，ISBN 為 9789863594475。</span><br><span class=\"line\">\t就拜託你了。</span><br><span class=\"line\">\t新增完之後幫我把書籍的 id 用 GET 告訴我。</span><br><span class=\"line\">node challeng.js addbook 《大腦喜歡這樣學》 9789863594475</span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;message&quot;</span>:<span class=\"string\">&quot;新增成功&quot;</span>,<span class=\"string\">&quot;id&quot;</span>:<span class=\"string\">&quot;1989&quot;</span>&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv3?token=&#123;5566NO1&#125;&amp;id=1989&quot;</span></span><br><span class=\"line\">\t下一關的 token 為 &#123;LEarnHOWtoLeArn&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv4?token=&#123;LEarnHOWtoLeArn&#125;&quot;</span></span><br><span class=\"line\">\t我翻了一下你之前幫我找的那本書，發現我記錯了...這不是我朝思暮想的那一本。</span><br><span class=\"line\">\t我之前跟你講的線索好像都是錯的，我記到別本書去了，真是抱歉啊。</span><br><span class=\"line\">\t我記得我想找的那本書，書名有：「世界」兩字，而且是村上春樹寫的，可以幫我找到書的</span><br><span class=\"line\">\tid 並傳給我嗎？</span><br><span class=\"line\">\t世界 = %E4%B8%96%E7%95%8C</span><br><span class=\"line\">node challeng.js getbook <span class=\"string\">&quot;?q=%E4%B8%96%E7%95%8C&quot;</span></span><br><span class=\"line\">\t[&#123;<span class=\"string\">&quot;id&quot;</span>:2,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;當我想你時，全世界都救不了我&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;肆一&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;5549173495&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:27,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;從你的全世界路過&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;張嘉佳&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;8426216529&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:79,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;世界末日與冷酷異境&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;村上春樹&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;9571313408&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:90,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;文學的40堂公開課：從神話到當代暢銷書，文學如何影響我們、帶領我們理解這個世界&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;約翰．薩德蘭&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;7978376866&quot;</span>&#125;]</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv4?token=&#123;LEarnHOWtoLeArn&#125;&amp;id=79&quot;</span></span><br><span class=\"line\">\t！下一關的 token 為 &#123;HarukiMurakami&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv5?token=&#123;HarukiMurakami&#125;&quot;</span></span><br><span class=\"line\">\t昨天有個人匆匆忙忙跑過來說他不小心捐錯書了，想要來問可不可以把書拿回去。</span><br><span class=\"line\">\t跟他溝通過後，我就把他捐過來的書還他了，所以現在要把這本書從系統裡面刪掉才行。</span><br><span class=\"line\">\t那本書的 id 是 23，你可以幫我刪掉嗎？</span><br><span class=\"line\">node challeng.js delbook <span class=\"string\">&quot;23&quot;</span></span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;message&quot;</span>:<span class=\"string\">&quot;\\n咦...是刪掉了沒錯，但總覺得哪裡怪怪的，算了，先這樣吧！下一關的 token 為 &#123;CHICKENCUTLET&#125;\\n&quot;</span>&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv6?token=&#123;CHICKENCUTLET&#125;&quot;</span></span><br><span class=\"line\">\t我終於知道上次哪裡怪怪的了！</span><br><span class=\"line\"></span><br><span class=\"line\">\t照理來說要進入系統應該要先登入才對，怎麼沒有登入就可以新增刪除...</span><br><span class=\"line\">\t這太奇怪了，我已經回報給那邊的工程師了，他們給了我一份新的文件：</span><br><span class=\"line\">\thttps://gist.github.com/aszx87410/1e5e5105c1c35197f55c485a88b0328a</span><br><span class=\"line\"></span><br><span class=\"line\">\t這邊是帳號密碼，你先登入試試看吧，可以呼叫一個 /me 的 endpoint，裡面會給你一個 email。</span><br><span class=\"line\">\t把 email 放在 query string 上面帶過來，我看看是不是對的。</span><br><span class=\"line\"></span><br><span class=\"line\">\t帳號：admin</span><br><span class=\"line\">\t密碼：admin123</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;getme&quot;</span></span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;username&quot;</span>:<span class=\"string\">&quot;admin&quot;</span>,<span class=\"string\">&quot;email&quot;</span>:<span class=\"string\">&quot;lib@lidemy.com&quot;</span>&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv6?token=&#123;CHICKENCUTLET&#125;&amp;email=lib@lidemy.com&quot;</span></span><br><span class=\"line\">\t對對對，就是這個，這樣才對嘛！下一關的 token 為 &#123;SECurityIsImPORTant&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv7?token=&#123;SECurityIsImPORTant&#125;&quot;</span></span><br><span class=\"line\">\t那邊的工程師說系統整個修復完成了，剛好昨天我們發現有一本書被偷走了...</span><br><span class=\"line\">\t這本書我們已經買第五次了，每次都被偷走，看來這本書很熱門啊。</span><br><span class=\"line\">\t我們要把這本書從系統裡面刪掉，就拜託你了。</span><br><span class=\"line\"></span><br><span class=\"line\">\t對了！記得要用新的系統喔，舊的已經完全廢棄不用了。</span><br><span class=\"line\"></span><br><span class=\"line\">\t書的 id 是 89。</span><br><span class=\"line\">node challeng.js delbook2 <span class=\"string\">&quot;89&quot;</span></span><br><span class=\"line\">\t下一關的 token 為 &#123;HsifnAerok&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv8?token=&#123;HsifnAerok&#125;&quot;</span></span><br><span class=\"line\">\t我昨天在整理書籍的時候發現有一本書的 ISBN 編號跟系統內的對不上，仔細看了一下發現我當時輸入系統時 key 錯了。</span><br><span class=\"line\">\t哎呀，人老了就是這樣，老是會看錯。</span><br><span class=\"line\"></span><br><span class=\"line\">\t那本書的名字裡面有個「我」，作者的名字是四個字，key 錯的 ISBN 最後一碼為 7，只要把最後一碼改成 3 就行了。</span><br><span class=\"line\">\t對了！記得要用新的系統喔，舊的已經完全廢棄不用了。</span><br><span class=\"line\">node challeng.js getbook2 <span class=\"string\">&quot;?q=%E6%88%91&quot;</span></span><br><span class=\"line\">\t[&#123;<span class=\"string\">&quot;id&quot;</span>:2,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;當我想你時，全世界都救不了我&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;肆一&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;5549173495&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:3,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;我殺的人與殺我的人&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;東山彰良&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;9262228645&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:7,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;你已走遠，我還在練習道別&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;渺渺&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;3722233689&quot;</span>&#125;,</span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;id&quot;</span>:9,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;你是我最熟悉的陌生人&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;Middle&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;9765734253&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:22,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;我輩中人：寫給中年人的情書</span></span><br><span class=\"line\"><span class=\"string\">\t&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;張曼娟&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;7241428897&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:38,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;我和我追逐的垃圾車&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;謝子凡&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;7797349452&quot;</span>&#125;,&#123;<span class=\"string\">&quot;i</span></span><br><span class=\"line\"><span class=\"string\">\td&quot;</span>:57,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;我的櫻花戀人&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;宇山佳佑&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;2947749939&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:60,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;你走慢了我的時間&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;張西&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;8811544334&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:66,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;我是許涼涼&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;李維菁&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;8389193464&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:72,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;日日好日：茶道</span></span><br><span class=\"line\"><span class=\"string\">\t教我的幸福15味【電影書腰版】&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;森下典子&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;9981835427&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:90,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;文學的40堂公開課：從神話到當代暢</span></span><br><span class=\"line\"><span class=\"string\">\t銷書，文學如何影響我們、帶領我們理解這個世界&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;約翰．薩德蘭&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;7978376866&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:95,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;我想吃掉你的</span></span><br><span class=\"line\"><span class=\"string\">\t胰臟【電影珍藏版】&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;住野夜&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;2615985356&quot;</span>&#125;,&#123;<span class=\"string\">&quot;id&quot;</span>:100,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;慢情書：我們會在更好的地方相遇嗎？&quot;</span>,<span class=\"string\">&quot;author</span></span><br><span class=\"line\"><span class=\"string\">\t&quot;</span>:<span class=\"string\">&quot;林達陽&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;7418527246&quot;</span>&#125;]</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;id&quot;</span>:72,<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;日日好日：茶道教我的幸福15味【電影書腰版】&quot;</span>,<span class=\"string\">&quot;author&quot;</span>:<span class=\"string\">&quot;森下典子&quot;</span>,<span class=\"string\">&quot;ISBN&quot;</span>:<span class=\"string\">&quot;9981835427&quot;</span>&#125;</span><br><span class=\"line\">node challeng.js updatebook2 <span class=\"string\">&quot;72&quot;</span></span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;message&quot;</span>:<span class=\"string\">&quot;\\n希望之後他們能引進語音輸入系統，我就只要講講話就好。下一關的 token 為 &#123;NeuN&#125;\\n&quot;</span>&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv9?token=&#123;NeuN&#125;&quot;</span></span><br><span class=\"line\">\tAPI 文件裡面有個獲取系統資訊的 endpoint 你記得嗎？</span><br><span class=\"line\">\t工程師跟我說這個網址不太一樣，用一般的方法是沒辦法成功拿到回傳值的。</span><br><span class=\"line\">\t想要存取的話要符合兩個條件：</span><br><span class=\"line\">\t\t1. 帶上一個 X-Library-Number 的 header，我們圖書館的編號是 20</span><br><span class=\"line\">\t\t2. 伺服器會用 user agent 檢查是否是從 IE6 送出的 Request，不是的話會擋掉</span><br><span class=\"line\">\t順利拿到系統資訊之後應該會有個叫做 version 的欄位，把裡面的值放在 query string 給我吧。</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv9?token=&#123;NeuN&#125;&amp;hint=1&quot;</span></span><br><span class=\"line\">\t試著去想想看，伺服器是怎麼知道 request 是什麼版本的瀏覽器？</span><br><span class=\"line\">\t只要能知道伺服器是怎麼檢查的，就有方法可以騙過它，原本的敘述裡面也有給關鍵字了</span><br><span class=\"line\">node challeng.js infobook2</span><br><span class=\"line\">\t&#123;<span class=\"string\">&quot;message&quot;</span>:<span class=\"string\">&quot;success&quot;</span>,<span class=\"string\">&quot;version&quot;</span>:<span class=\"string\">&quot;1A4938Jl7&quot;</span>,<span class=\"string\">&quot;owner&quot;</span>:<span class=\"string\">&quot;lib&quot;</span>,<span class=\"string\">&quot;createdAt&quot;</span>:<span class=\"string\">&quot;121290329301&quot;</span>&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv9?token=&#123;NeuN&#125;&amp;version=1A4938Jl7&quot;</span></span><br><span class=\"line\">\t限制這麼多都被你突破了，真有你的。要不要考慮以後來我們圖書館當工程師啊？下一關的 token 為 &#123;duZDsG3tvoA&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&quot;</span></span><br><span class=\"line\">\t時間過得真快啊，今天是你在這邊幫忙的最後一天了。</span><br><span class=\"line\">\t我們來玩個遊戲吧？你有玩過猜數字嗎？</span><br><span class=\"line\">\t出題者會出一個四位數不重複的數字，例如說 9487。</span><br><span class=\"line\">\t你如果猜 9876，我會跟你說 1A2B，1A 代表 9 位置對數字也對，2B 代表 8 跟 7 你猜對了但位置錯了。</span><br><span class=\"line\">\t開始吧，把你要猜的數字放在 query string 用 num 當作 key 傳給我。</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=1234&quot;</span></span><br><span class=\"line\">\t0A2B</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=5678&quot;</span></span><br><span class=\"line\">\t1A0B</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=5690&quot;</span></span><br><span class=\"line\">\t1A1B</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=9056&quot;</span></span><br><span class=\"line\">\t1A1B</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=1357&quot;</span></span><br><span class=\"line\">\t0A2B</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=6789&quot;</span></span><br><span class=\"line\">\t0A2B</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=9612&quot;</span></span><br><span class=\"line\">\t3A0B</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv10?token=&#123;duZDsG3tvoA&#125;&amp;num=9613&quot;</span></span><br><span class=\"line\">\t很開心在這裡的時光能有你一起陪伴，讓我的生活不再那麼一成不變，很開心認識你，下次有機會再一起玩吧！</span><br><span class=\"line\">\tThe End，恭喜破關！</span><br><span class=\"line\">\tauthor: huli@lidemy.com</span><br><span class=\"line\">\thttps://www.facebook.com/lidemytw/</span><br><span class=\"line\">\t附註：</span><br><span class=\"line\">\t原本遊戲只規劃到這邊，第十關就是最後一關。</span><br><span class=\"line\">\t後來我有加了一些新關卡但難度較高，如果你還想挑戰看看，下一關的 token 為 &#123;IhateCORS&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv11?token=&#123;IhateCORS&#125;&quot;</span></span><br><span class=\"line\">\t嘿！很開心看到你願意回來繼續幫忙，這次我們接到一個新的任務，要跟在菲律賓的一個中文圖書館資訊系統做串連</span><br><span class=\"line\">\t這邊是他們的 API 文件，你之後一定會用到：</span><br><span class=\"line\">\thttps://gist.github.com/aszx87410/0b0d3cabf32c4e44084fadf5180d0cf4</span><br><span class=\"line\">\t現在就讓我們先跟他們打個招呼吧，只是我記得他們的 API 好像會限制一些東西就是了...</span><br><span class=\"line\">node challeng.js bookv3 hello</span><br><span class=\"line\">\t您的 origin 不被允許存取此資源，請確認您是從 lidemy.com 送出 request。</span><br><span class=\"line\">node challeng.js bookv3 deliver_token</span><br><span class=\"line\">\t我已經把運送要用的 token 給你囉，請你仔細找找</span><br><span class=\"line\">node challeng.js bookv3 logs</span><br><span class=\"line\">\t此 request 不是來自菲律賓，禁止存取系統資訊。</span><br><span class=\"line\">node challeng.js bookv3 index</span><br><span class=\"line\">  &lt;html&gt;</span><br><span class=\"line\">    &lt;h1&gt;Library&lt;/h1&gt;</span><br><span class=\"line\">    &lt;p&gt;Hello, here is the website <span class=\"keyword\">for</span> lidemy library&lt;/p&gt;</span><br><span class=\"line\">\t&lt;/html&gt;</span><br><span class=\"line\">node challeng.js bookv3 hello</span><br><span class=\"line\">\tHello! 下一關的 token 為 &#123;r3d1r3c7&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv12?token=&#123;r3d1r3c7&#125;&quot;</span></span><br><span class=\"line\">\t打完招呼之後我們要開始送一些書過去了，不過其實運送沒有你想像中的簡單，不是單純的 A 到 B 而已</span><br><span class=\"line\">\t而是像轉機那樣，A 到 C，C 才到 B，中間會經過一些轉運點才會到達目的地...算了，我跟你說那麼多幹嘛</span><br><span class=\"line\">\t現在請你幫我把運送要用的 token 給拿回來吧，要有這個 token 我們才能繼續往下一步走</span><br><span class=\"line\">node challeng.js bookv3 deliver_token</span><br><span class=\"line\">\t我已經把運送要用的 token 給你囉，請你仔細找找</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv12?token=&#123;r3d1r3c7&#125;&amp;hint=1&quot;</span></span><br><span class=\"line\">\t你會發現你呼叫 API 以後它並沒有直接回傳結果，而是轉址到其他地方（或許中間還經歷不只一個地方）</span><br><span class=\"line\">\t仔細研究這些地方吧！</span><br><span class=\"line\">\t--&gt; 用 Chrome debug mode 看 response &#123;qspyz&#125;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv13?token=&#123;qspyz&#125;&quot;</span></span><br><span class=\"line\">\t太好了！自從你上次把運送用的 token 拿回來以後，我們就密切地與菲律賓在交換書籍</span><br><span class=\"line\">\t可是最近碰到了一些小問題，不知道為什麼有時候會傳送失敗</span><br><span class=\"line\">\t我跟他們反映過後，他們叫我們自己去拿 <span class=\"built_in\">log</span> 來看，你可以幫我去看看嗎？</span><br><span class=\"line\">\t從系統日誌裡面應該可以找到一些端倪</span><br><span class=\"line\">node challeng.js bookv3 logs</span><br><span class=\"line\">\t此 request 不是來自菲律賓，禁止存取系統資訊。</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv13?token=&#123;qspyz&#125;&amp;hint=1&quot;</span></span><br><span class=\"line\">\t你有聽過代理伺服器 proxy 嗎？</span><br><span class=\"line\">電腦設定 菲律賓 proxy : 180.232.123.251:3128</span><br><span class=\"line\">Chrome --&gt; https://lidemy-http-challenge.herokuapp.com/api/v3/logs</span><br><span class=\"line\">\t[</span><br><span class=\"line\">\t&#123; logType: <span class=\"string\">&#x27;token&#x27;</span>, value: <span class=\"string\">&#x27;&#123;SEOisHard&#125;&#x27;</span> &#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv14?token=&#123;SEOisHard&#125;&quot;</span></span><br><span class=\"line\">\t跟那邊的溝通差不多都搞定了，真是太謝謝你了，關於這方面沒什麼問題了！</span><br><span class=\"line\">\t不過我老大昨天給了我一個任務，他希望我去研究那邊的首頁內容到底是怎麼做的</span><br><span class=\"line\">\t為什麼用 Google 一搜尋關鍵字就可以排在第一頁，真是太不合理了</span><br><span class=\"line\">\t他們的網站明明就什麼都沒有，怎麼會排在那麼前面？</span><br><span class=\"line\">\t難道說他們偷偷動了一些手腳？讓 Google 搜尋引擎看到的內容跟我們看到的不一樣？</span><br><span class=\"line\">\t算了，還是不要瞎猜好了，你幫我們研究一下吧！</span><br><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv14?token=&#123;SEOisHard&#125;&amp;hint=1&quot;</span></span><br><span class=\"line\">\t伺服器是怎麼辨識是不是 Google 搜尋引擎的？仔細想想之前我們怎麼偽裝自己是 IE6 的</span><br><span class=\"line\">node challeng.js bookv3 index</span><br><span class=\"line\">\t&lt;html&gt;</span><br><span class=\"line\">\t\t&lt;h1&gt;I Love Google&lt;/h1&gt;</span><br><span class=\"line\">\t\t&lt;p&gt;Google please rank our website higher, PLEASE!&lt;/p&gt;</span><br><span class=\"line\">\t\t&lt;!-- token <span class=\"keyword\">for</span> lv15：&#123;ILOVELIdemy!!!&#125;  --&gt;</span><br><span class=\"line\">\t&lt;/html&gt;</span><br><span class=\"line\">node challeng.js <span class=\"string\">&#x27;lv15?token=&#123;ILOVELIdemy!!!&#125;&#x27;</span></span><br><span class=\"line\">\t還真的是我猜的那樣...不過還是要謝謝你幫我們完成這麼多任務！</span><br><span class=\"line\">\t今天是我在這職位的最後一天啦，之後我要升官了，應該就不用處理這麼多小事情了</span><br><span class=\"line\">\t這段期間感謝你的幫忙，我們以後有緣再相見啦！</span><br><span class=\"line\">\tThe End，恭喜破關！</span><br><span class=\"line\">\t這次是真的破關了，這是最後一關，感謝你願意參與這個遊戲</span><br><span class=\"line\">\t也希望這遊戲是有趣的，希望你在玩的時候有學到東西</span><br><span class=\"line\">\t也歡迎把這個遊戲分享給親朋好友們</span><br><span class=\"line\">\t感謝！</span><br><span class=\"line\">\t我開了一個 gist，大家可以在這邊隨意留言，或是講一下破關感言</span><br><span class=\"line\">\thttps://gist.github.com/aszx87410/1dbde92876ba253a45654988ca829ebb</span><br><span class=\"line\">\t最後，感謝所有幫我測試的朋友們</span><br><span class=\"line\">\tAuthor: huli@lidemy.com</span><br><span class=\"line\">\thttps://www.facebook.com/lidemytw/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"資料格式\"><a href=\"#資料格式\" class=\"headerlink\" title=\"資料格式\"></a>資料格式</h3><h4 id=\"XML-Extensible-Markup-Language-可延伸標示語言\"><a href=\"#XML-Extensible-Markup-Language-可延伸標示語言\" class=\"headerlink\" title=\"XML(Extensible Markup Language) 可延伸標示語言\"></a>XML(Extensible Markup Language) 可延伸標示語言</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">data</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>cerulean<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2000<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">color</span>&gt;</span>#98B2D1<span class=\"tag\">&lt;/<span class=\"name\">color</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">pantone_value</span>&gt;</span>15-4020<span class=\"tag\">&lt;/<span class=\"name\">pantone_value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">data</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">support</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://reqres.in/#support-heading<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>To keep ReqRes free, contributions towards server costs are appreciated!<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">support</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JSON\"><a href=\"#JSON\" class=\"headerlink\" title=\"JSON\"></a>JSON</h4><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;data&quot;</span>:&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;name&quot;</span>:<span class=\"string\">&quot;cerulean&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;year&quot;</span>:<span class=\"number\">2000</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;color&quot;</span>:<span class=\"string\">&quot;#98B2D1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;pantone_value&quot;</span>:<span class=\"string\">&quot;15-4020&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;support&quot;</span>:&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;url&quot;</span>:<span class=\"string\">&quot;https://reqres.in/#support-heading&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;text&quot;</span>:<span class=\"string\">&quot;To keep ReqRes free, contributions towards server costs are appreciated!&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"SOAP-Simple-Object-Access-Protocol\"><a href=\"#SOAP-Simple-Object-Access-Protocol\" class=\"headerlink\" title=\"SOAP(Simple Object Access Protocol)\"></a><a href=\"https://zh.wikipedia.org/wiki/%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE\">SOAP(Simple Object Access Protocol)</a></h4><h3 id=\"RESETful\"><a href=\"#RESETful\" class=\"headerlink\" title=\"RESETful\"></a>RESETful</h3><p>RESTful API，表示符合 REST(Representational State Transfer) 架構的 API<br>RESTful API是一種設計風格，這種風格使API設計具有整體一致性</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># API 設計舉例</span></span><br><span class=\"line\">新增使用者 \t\t\tPOST \t\t/user</span><br><span class=\"line\">刪除使用者 \t\t\tDELETE \t/user/n</span><br><span class=\"line\">查詢使用者 \t\t\tGET\t\t\t/user/n</span><br><span class=\"line\">更改使用者 \t\t\tPATCH\t\t/user/n</span><br><span class=\"line\">查詢使用者列表\t  GET\t\t /users</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"User-Agent-browser\"><a href=\"#User-Agent-browser\" class=\"headerlink\" title=\"User-Agent(browser)\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/HTTP/Headers/User-Agent\">User-Agent</a>(browser)</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">request(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/sys_info&#x27;</span>, &#123;</span><br><span class=\"line\">\t\theaders: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;X-Library-Number&#x27;</span>: <span class=\"string\">&#x27;20&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;MSIE 6.0&#x27;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n\n","categories":["Front End"],"tags":["api","http"]},{"title":"Hexo Issue","url":"/2021/03/14/issue-hexo-2/","content":"<h2 id=\"hexo-d-“ERROR-Deployer-not-found-git”\"><a href=\"#hexo-d-“ERROR-Deployer-not-found-git”\" class=\"headerlink\" title=\"hexo d - “ERROR Deployer not found git”\"></a>hexo d - “ERROR Deployer not found git”</h2><h3 id=\"Install-hexo-deployer-git\"><a href=\"#Install-hexo-deployer-git\" class=\"headerlink\" title=\"Install hexo-deployer-git\"></a>Install hexo-deployer-git</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h2 id=\"Hexo-No-layout-index-html-theme-next\"><a href=\"#Hexo-No-layout-index-html-theme-next\" class=\"headerlink\" title=\"Hexo - No layout index.html(theme-next)\"></a>Hexo - No layout index.html(theme-next)</h2><h3 id=\"clone-hexo-theme-next\"><a href=\"#clone-hexo-theme-next\" class=\"headerlink\" title=\"clone hexo-theme-next\"></a>clone hexo-theme-next</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/next-theme/hexo-theme-next themes/next</span><br><span class=\"line\"><span class=\"comment\"># if insyall by npm - unistall it</span></span><br><span class=\"line\">npm uninstall hexo-theme-next --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"highlight-lang-code-…args-has-been-deprecated\"><a href=\"#highlight-lang-code-…args-has-been-deprecated\" class=\"headerlink\" title=\"highlight(lang, code, …args) has been deprecated\"></a>highlight(lang, code, …args) has been deprecated</h2><blockquote>\n<p>Deprecated as of 10.7.0. highlight(lang, code, …args) has been deprecated.<br>Deprecated as of 10.7.0. Please use highlight(code, options) instead.<br><a href=\"https://github.com/highlightjs/highlight.js/issues/2277\">https://github.com/highlightjs/highlight.js/issues/2277</a></p>\n</blockquote>\n<h3 id=\"Install-hexo-util\"><a href=\"#Install-hexo-util\" class=\"headerlink\" title=\"Install hexo-util\"></a>Install hexo-util</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-util --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Hexo-localhost-打不開\"><a href=\"#Hexo-localhost-打不開\" class=\"headerlink\" title=\"Hexo localhost 打不開\"></a>Hexo localhost 打不開</h2><p><a href=\"http://localhost:4000/\">http://localhost:4000</a></p>\n<h3 id=\"port-被占用\"><a href=\"#port-被占用\" class=\"headerlink\" title=\"port 被占用\"></a>port 被占用</h3><h3 id=\"查-port-被占用情形\"><a href=\"#查-port-被占用情形\" class=\"headerlink\" title=\"查 port 被占用情形\"></a>查 port 被占用情形</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">netstat -ano | findstr 0.0:4000</span><br><span class=\"line\">  TCP    0.0.0.0:4000           0.0.0.0:0              LISTENING       5976</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查被誰占用\"><a href=\"#查被誰占用\" class=\"headerlink\" title=\"查被誰占用\"></a>查被誰占用</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tasklist | findstr 5976</span><br><span class=\"line\">  Code.exe                      5976 Console                    1     92,008 K</span><br></pre></td></tr></table></figure>\n<!--more-->\n\n<h3 id=\"變更連接埠\"><a href=\"#變更連接埠\" class=\"headerlink\" title=\"變更連接埠\"></a>變更連接埠</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo server -p 5000</span><br></pre></td></tr></table></figure>\n<p><br> <br></p>\n<h3 id=\"localhost-的-http-網站被強制導向-https-edge適用\"><a href=\"#localhost-的-http-網站被強制導向-https-edge適用\" class=\"headerlink\" title=\"localhost 的 http 網站被強制導向 https(edge適用)\"></a>localhost 的 http 網站被強制導向 https(edge適用)</h3><h3 id=\"開啟瀏覽器\"><a href=\"#開啟瀏覽器\" class=\"headerlink\" title=\"開啟瀏覽器\"></a>開啟瀏覽器</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">chrome://net-internals/<span class=\"comment\">#hsts</span></span><br><span class=\"line\">edge://net-internals/<span class=\"comment\">#hsts</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"到最下方找到-Delete-domain-security-policies-設定，輸入localhost按下Delete\"><a href=\"#到最下方找到-Delete-domain-security-policies-設定，輸入localhost按下Delete\" class=\"headerlink\" title=\"到最下方找到 Delete domain security policies 設定，輸入localhost按下Delete\"></a>到最下方找到 Delete domain security policies 設定，輸入localhost按下Delete</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/14/issue-hexo-2/pic1.png\" class=\"\" title=\"pic1\">\n</div>","categories":["Blog"],"tags":["issue","hexo"]},{"title":"Node.js issue","url":"/2021/03/12/issue-npm-1/","content":"<h2 id=\"npm-WARN-npm-does-not-support-Node-js-v14-16-0-windows\"><a href=\"#npm-WARN-npm-does-not-support-Node-js-v14-16-0-windows\" class=\"headerlink\" title=\"npm WARN npm does not support Node.js v14.16.0 (windows)\"></a>npm WARN npm does not support Node.js v14.16.0 (windows)</h2><h3 id=\"刪除目錄\"><a href=\"#刪除目錄\" class=\"headerlink\" title=\"刪除目錄\"></a>刪除目錄</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">C:\\Users\\yourname\\AppData\\Roaming</span><br><span class=\"line\">目錄 npm and npm-cache</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安裝npm\"><a href=\"#安裝npm\" class=\"headerlink\" title=\"安裝npm\"></a>安裝npm</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g npm@latest </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Cannot-use-import-statement-outside-a-module-node-js\"><a href=\"#Cannot-use-import-statement-outside-a-module-node-js\" class=\"headerlink\" title=\"Cannot use import statement outside a module (node.js)\"></a>Cannot use import statement outside a module (node.js)</h2><p>參考 <a href=\"https://nodejs.org/api/packages.html#packages_type\">Node.js v16.0.0 document type</a></p>\n<h3 id=\"package-json-加入-“type”-“module”\"><a href=\"#package-json-加入-“type”-“module”\" class=\"headerlink\" title=\"package.json 加入 “type”: “module”,\"></a>package.json 加入 “type”: “module”,</h3><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;node_test&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;module&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;dependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo&quot;</span>: <span class=\"string\">&quot;^5.4.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-theme-next&quot;</span>: <span class=\"string\">&quot;^8.3.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;lodash&quot;</span>: <span class=\"string\">&quot;^4.17.21&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;mathjs&quot;</span>: <span class=\"string\">&quot;^9.3.2&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"require-is-not-defined-node-js\"><a href=\"#require-is-not-defined-node-js\" class=\"headerlink\" title=\"require is not defined (node.js)\"></a>require is not defined (node.js)</h2><p>package.json 移除 “type”: “module”,</p>\n<h2 id=\"process-參數含-amp-要加-“-才不會有問題\"><a href=\"#process-參數含-amp-要加-“-才不會有問題\" class=\"headerlink\" title=\"process 參數含 &amp; 要加 “ 才不會有問題\"></a>process 參數含 &amp; 要加 “ 才不會有問題</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;---------&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(process.argv[<span class=\"number\">2</span>])</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node index.js &amp;01</span><br><span class=\"line\">[35] 3164</span><br><span class=\"line\">bash: 01: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\"></span><br><span class=\"line\">$ node index.js &amp;</span><br><span class=\"line\">[36] 15224</span><br><span class=\"line\"></span><br><span class=\"line\">$ node index.js <span class=\"string\">&quot;&amp;01&quot;</span></span><br><span class=\"line\">---------</span><br><span class=\"line\">&amp;01</span><br><span class=\"line\">[35]+  Stopped                 winpty node.exe index.js</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"process-參數含-使用-“-會有問題-要改為-‘\"><a href=\"#process-參數含-使用-“-會有問題-要改為-‘\" class=\"headerlink\" title=\"process 參數含 ! 使用 “ 會有問題 要改為 ‘\"></a>process 參數含 ! 使用 “ 會有問題 要改為 ‘</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">node challeng.js <span class=\"string\">&quot;lv15?token=&#123;ILOVELIdemy!!!&#125;&quot;</span></span><br><span class=\"line\">\tbash: !&#125;: event not found</span><br><span class=\"line\"></span><br><span class=\"line\">node challeng.js <span class=\"string\">&#x27;lv15?token=&#123;ILOVELIdemy!!!&#125;&#x27;</span></span><br><span class=\"line\">\t還真的是我猜的那樣...不過還是要謝謝你幫我們完成這麼多任務！</span><br><span class=\"line\">\t......</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"npm-install-一直處於-sill-install-loadAllDepsIntoIdealTree\"><a href=\"#npm-install-一直處於-sill-install-loadAllDepsIntoIdealTree\" class=\"headerlink\" title=\"npm install 一直處於 sill install loadAllDepsIntoIdealTree\"></a>npm install 一直處於 sill install loadAllDepsIntoIdealTree</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 不知何時設定 https-proxy, 刪除即 ok</span></span><br><span class=\"line\">npm config get https-proxy</span><br><span class=\"line\">  http://103.253.27.108:80/</span><br><span class=\"line\">npm config get proxy</span><br><span class=\"line\">  null</span><br><span class=\"line\">npm config delete https-proxy</span><br><span class=\"line\">npm config list</span><br><span class=\"line\">  ; <span class=\"string\">&quot;builtin&quot;</span> config from C:\\Users\\win10\\AppData\\Roaming\\npm\\node_modules\\npm\\npmrc</span><br><span class=\"line\">  prefix = <span class=\"string\">&quot;C:\\\\Users\\\\win10\\\\AppData\\\\Roaming\\\\npm&quot;</span></span><br><span class=\"line\">  ; <span class=\"string\">&quot;cli&quot;</span> config from <span class=\"built_in\">command</span> line options</span><br><span class=\"line\">  omit = []</span><br><span class=\"line\">  user-agent = <span class=\"string\">&quot;npm/7.6.3 node/v14.17.0 win32 x64&quot;</span></span><br><span class=\"line\">  ; node bin location = D:\\app\\nodejs\\node.exe</span><br><span class=\"line\">  ; cwd = D:\\work\\git\\test-npm</span><br><span class=\"line\">  ; HOME = C:\\Users\\win10</span><br><span class=\"line\">  ; Run `npm config ls -l` to show all defaults.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"node-js-server-中文亂碼\"><a href=\"#node-js-server-中文亂碼\" class=\"headerlink\" title=\"node.js server 中文亂碼\"></a>node.js server 中文亂碼</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// &#x27;Content-Type&#x27;: &#x27;text/html;charset=utf-8&#x27; 修正中文亂碼</span></span><br><span class=\"line\"><span class=\"comment\">// demo_module.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> dt = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./myfirstmodule&#x27;</span>);</span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">  res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;text/html;charset=utf-8&#x27;</span>&#125;);</span><br><span class=\"line\">  res.write(<span class=\"string\">&quot;The date and time are currently: &quot;</span> + dt.myDateTime());</span><br><span class=\"line\">  res.end();</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// myfirstmodule.js</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.myDateTime = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"found-vulnerabilities-漏洞\"><a href=\"#found-vulnerabilities-漏洞\" class=\"headerlink\" title=\"found vulnerabilities-漏洞\"></a>found vulnerabilities-漏洞</h2><ul>\n<li>未找到一致解決方法<blockquote>\n<p>9 vulnerabilities (4 low, 5 moderate)<br>9 high severity vulnerabilities</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"body-parser-被標記為棄用-body-parser-as-deprecated\"><a href=\"#body-parser-被標記為棄用-body-parser-as-deprecated\" class=\"headerlink\" title=\"body-parser 被標記為棄用(body-parser as deprecated)\"></a>body-parser 被標記為棄用(body-parser as deprecated)</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 原來</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;body-parser&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(bodyParser.json());</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 更新</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(express.json());</span><br></pre></td></tr></table></figure>\n\n\n","categories":["Front End"],"tags":["issue","node.js"]},{"title":"VirtualBox 6 – install windows 螢幕自動調整問題","url":"/2021/03/12/issue-virtualbox-1/","content":"<h3 id=\"插入-Guest-Additions-CD\"><a href=\"#插入-Guest-Additions-CD\" class=\"headerlink\" title=\"插入 Guest Additions CD\"></a>插入 Guest Additions CD</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/12/issue-virtualbox-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n<span id=\"more\"></span>\n\n<h3 id=\"執行-VBoxWindowsAdditions\"><a href=\"#執行-VBoxWindowsAdditions\" class=\"headerlink\" title=\"執行 VBoxWindowsAdditions\"></a>執行 VBoxWindowsAdditions</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/12/issue-virtualbox-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<h3 id=\"不勾選-Direct3D-Support\"><a href=\"#不勾選-Direct3D-Support\" class=\"headerlink\" title=\"不勾選 Direct3D Support\"></a>不勾選 Direct3D Support</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/12/issue-virtualbox-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n\n","categories":["application"],"tags":["virtualbox"]},{"title":"Language codes list","url":"/2021/03/14/markdown-1/","content":"<ul>\n<li><p>Bash lang-bash, lang-sh, lang-zsh</p>\n</li>\n<li><p>C, C++, and other C-likes lang-c, lang-h, lang-cpp, lang-hpp, lang-c++, lang-h++, lang-cc, lang-hh, lang-cxx, lang-hxx, lang-c-like</p>\n</li>\n<li><p>C# lang-cs, lang-csharp, lang-c#</p>\n<span id=\"more\"></span></li>\n<li><p>Clojure lang-clojure, lang-clj</p>\n</li>\n<li><p>CoffeeScript lang-coffee, lang-coffeescript, lang-cson, lang-iced</p>\n</li>\n<li><p>CSS lang-css</p>\n</li>\n<li><p>Dart lang-dart</p>\n</li>\n<li><p>Erlang lang-erl, lang-erlang</p>\n</li>\n<li><p>Go lang-go, lang-golang</p>\n</li>\n<li><p>Haskell lang-hs, lang-haskell</p>\n</li>\n<li><p>HTML, XML, XSL, et al. lang-html, lang-xml, lang-xsl, lang-xhtml, lang-rss, lang-atom, lang-xjb, lang-xsd, lang-plist, lang-wsf, lang-svg</p>\n</li>\n<li><p>HTTP Headers lang-http, lang-https</p>\n</li>\n<li><p>Ini and TOML lang-ini, lang-toml</p>\n</li>\n<li><p>Java lang-java, lang-jsp</p>\n</li>\n<li><p>JavaScript lang-js, lang-javascript, lang-jsx, lang-mjs, lang-cjs</p>\n</li>\n<li><p>JSON lang-json</p>\n</li>\n<li><p>Kotlin lang-kotlin, lang-kt</p>\n</li>\n<li><p>LaTeX, TeX lang-latex, lang-tex</p>\n</li>\n<li><p>Less lang-less</p>\n</li>\n<li><p>Lisp lang-lisp</p>\n</li>\n<li><p>Lua lang-lua</p>\n</li>\n<li><p>Makefile lang-makefile, lang-mk, lang-mak</p>\n</li>\n<li><p>Markdown lang-markdown, lang-md, lang-mkdown, lang-mkd</p>\n</li>\n<li><p>MATLAB lang-matlab</p>\n</li>\n<li><p>Objective-C lang-objectivec, lang-mm, lang-objc, lang-obj-c</p>\n</li>\n<li><p>OCaml lang-ocaml, lang-ml</p>\n</li>\n<li><p>Pascal, Delphi lang-pascal, lang-delphi, lang-dpr, lang-dfm, lang-pas, lang-freepascal, lang-lazarus, lang-lpr, lang-lfm</p>\n</li>\n<li><p>Perl lang-pl, lang-perl, lang-pm</p>\n</li>\n<li><p>PHP lang-php, lang-php3, lang-php4, lang-php5, lang-php6, lang-php7</p>\n</li>\n<li><p>PHP Template lang-php-template</p>\n</li>\n<li><p>Protocol Buffers lang-protobuf</p>\n</li>\n<li><p>Python lang-py, lang-python, lang-gyp, lang-ipython</p>\n</li>\n<li><p>R lang-r</p>\n</li>\n<li><p>Ruby lang-rb, lang-ruby, lang-gemspec, lang-podspec, lang-thor, lang-irb</p>\n</li>\n<li><p>Rust lang-rs, lang-rust</p>\n</li>\n<li><p>Scala lang-scala</p>\n</li>\n<li><p>Scheme lang-scheme</p>\n</li>\n<li><p>SCSS lang-scss</p>\n</li>\n<li><p>Shell lang-shell, lang-console</p>\n</li>\n<li><p>SQL lang-sql</p>\n</li>\n<li><p>Swift lang-swift</p>\n</li>\n<li><p>TypeScript lang-typescript, lang-ts</p>\n</li>\n<li><p>VHDL lang-vhdl</p>\n</li>\n<li><p>VB.NET lang-vbnet, lang-vb</p>\n</li>\n<li><p>YAML lang-yaml, lang-yml</p>\n</li>\n</ul>\n","categories":["Front End"],"tags":["markdown"]},{"title":"Markdown 使用","url":"/2021/03/14/markdown-2/","content":"<h3 id=\"分隔線\"><a href=\"#分隔線\" class=\"headerlink\" title=\"分隔線\"></a>分隔線</h3><p>使用三個連續符號表示（-、*)</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"strong\">**<span class=\"emphasis\">*</span></span></span><br></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n<hr>\n<span id=\"more\"></span>\n\n<h3 id=\"標題\"><a href=\"#標題\" class=\"headerlink\" title=\"標題\"></a>標題</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 標題 1</span></span><br><span class=\"line\"><span class=\"comment\">## 標題 2</span></span><br><span class=\"line\"><span class=\"comment\">### 標題 3</span></span><br><span class=\"line\"><span class=\"comment\">#### 標題 4</span></span><br><span class=\"line\"><span class=\"comment\">##### 標題 5</span></span><br><span class=\"line\"><span class=\"comment\">###### 標題 6</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"標題-1\"><a href=\"#標題-1\" class=\"headerlink\" title=\"標題 1\"></a>標題 1</h1><h2 id=\"標題-2\"><a href=\"#標題-2\" class=\"headerlink\" title=\"標題 2\"></a><font color=#555555>標題 2</font></h2><h4 id=\"標題-4\"><a href=\"#標題-4\" class=\"headerlink\" title=\"標題 4\"></a>標題 4</h4><h5 id=\"標題-5\"><a href=\"#標題-5\" class=\"headerlink\" title=\"標題 5\"></a>標題 5</h5><h6 id=\"標題-6\"><a href=\"#標題-6\" class=\"headerlink\" title=\"標題 6\"></a>標題 6</h6><hr>\n<h3 id=\"設定標題-2-的顏色\"><a href=\"#設定標題-2-的顏色\" class=\"headerlink\" title=\"設定標題 2 的顏色\"></a>設定標題 2 的顏色</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-tag\">h2</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">color</span>: orange; </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"清單\"><a href=\"#清單\" class=\"headerlink\" title=\"清單\"></a>清單</h3><p>一般列表的使用彈性較高，-、+、* 等符號後方加上一個空白後都可以轉為列表，要表示下一個層級可多一個縮排或是兩個空白即可</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> 這是清單</span><br><span class=\"line\"><span class=\"bullet\">+</span> 這也是清單</span><br><span class=\"line\"><span class=\"bullet\">*</span> 這同樣是清單</span><br><span class=\"line\"><span class=\"bullet\">\t-</span> 清單子項目</span><br></pre></td></tr></table></figure>\n<ul>\n<li>這是清單</li>\n</ul>\n<ul>\n<li>這也是清單</li>\n</ul>\n<ul>\n<li>這同樣是清單<ul>\n<li>清單子項目</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"數字清單\"><a href=\"#數字清單\" class=\"headerlink\" title=\"數字清單\"></a>數字清單</h3><p>數字 + .作為開頭</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">1.</span> 數字型清單</span><br><span class=\"line\"><span class=\"bullet\">2.</span> 第二個數字清單</span><br><span class=\"line\"><span class=\"bullet\">2.</span> 數字清單不需要連續數字</span><br><span class=\"line\"><span class=\"bullet\">\t3.</span> 數字清單子項目</span><br></pre></td></tr></table></figure>\n<ol>\n<li>數字型清單</li>\n<li>第二個數字清單</li>\n<li>數字清單不需要連續數字<ol start=\"3\">\n<li>數字清單子項目</li>\n</ol>\n</li>\n</ol>\n<p>如果段落文字需要以數字 + . 作為開頭，可以改為 數字 + 反斜線 + .</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">2020\\. 不平靜的一年</span><br></pre></td></tr></table></figure>\n<p>2020. 不平靜的一年</p>\n<h3 id=\"區塊程式碼\"><a href=\"#區塊程式碼\" class=\"headerlink\" title=\"區塊程式碼\"></a>區塊程式碼</h3><p>三個連續的反引號（`）開頭及結尾做為區塊的程式碼，並且可以在首行的位置補上該段程式碼的語言類別，藉此輸出具有 Highlight 的程式碼。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"code\">``` c </span></span><br><span class=\"line\"><span class=\"code\">while (condition) &#123;</span></span><br><span class=\"line\"><span class=\"code\">\tstatements;</span></span><br><span class=\"line\"><span class=\"code\">&#125;</span></span><br><span class=\"line\"><span class=\"code\">...</span></span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span> (condition) &#123;</span><br><span class=\"line\">\tstatements;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"表格\"><a href=\"#表格\" class=\"headerlink\" title=\"表格\"></a>表格</h3><figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">| thead 1 | thrad 2 | thread 3 |</span><br><span class=\"line\">|---------|---------|----------|</span><br><span class=\"line\">| td      | td      | td       |</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>thead 1</th>\n<th>thrad 2</th>\n<th>thread 3</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>td</td>\n<td>td</td>\n<td>td</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">| 預設對齊 | 靠左對齊 | 靠右對齊 | 置中對齊 |</span><br><span class=\"line\">|----- | :----- | -----: | :-----: |</span><br><span class=\"line\">| Text1 | Text2 | Text3 | Text4 |</span><br><span class=\"line\">| Text5 | Text6 | Text7 | Text8 |</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>預設對齊</th>\n<th align=\"left\">靠左對齊</th>\n<th align=\"right\">靠右對齊</th>\n<th align=\"center\">置中對齊</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Text1</td>\n<td align=\"left\">Text2</td>\n<td align=\"right\">Text3</td>\n<td align=\"center\">Text4</td>\n</tr>\n<tr>\n<td>Text5</td>\n<td align=\"left\">Text6</td>\n<td align=\"right\">Text7</td>\n<td align=\"center\">Text8</td>\n</tr>\n</tbody></table>\n<h3 id=\"連結\"><a href=\"#連結\" class=\"headerlink\" title=\"連結\"></a>連結</h3><p>前者為 [ ]：中括號內需要補上連結的顯示文字。<br>後者為 ( )：小括號內補上的是連結路徑。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">Google</span>](<span class=\"link\">https://www.google.com.tw/</span>)</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.google.com.tw/\">Google</a></p>\n<h3 id=\"圖片\"><a href=\"#圖片\" class=\"headerlink\" title=\"圖片\"></a>圖片</h3><p>圖片也與連結結構接近，只不過前方多了 !</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\">![<span class=\"string\">picture 1</span>](<span class=\"link\">test.png</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"文字字體\"><a href=\"#文字字體\" class=\"headerlink\" title=\"文字字體\"></a>文字字體</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">**我是粗體**</span><br><span class=\"line\">*我是斜體*</span><br><span class=\"line\">***我是粗斜體***</span><br><span class=\"line\">~~我是刪除線~~</span><br><span class=\"line\">&lt;u&gt;我是底線&lt;/u&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>我是粗體</strong><br><em>我是斜體</em><br><em><strong>我是粗斜體</strong></em><br><del>我是刪除線</del><br><u>我是底線</u></p>\n<h3 id=\"文字顏色\"><a href=\"#文字顏色\" class=\"headerlink\" title=\"文字顏色\"></a>文字顏色</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">red</span>&gt;</span>紅色<span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">yellow</span>&gt;</span>黃色<span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">green</span>&gt;</span>綠色<span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">blue</span>&gt;</span>藍色<span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">purple</span>&gt;</span>紫色<span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><font color=red>紅色</font><br><font color=yellow>黃色</font><br><font color=green>綠色</font><br><font color=blue>藍色</font><br><font color=purple>紫色</font></p>\n<h3 id=\"待辦事項\"><a href=\"#待辦事項\" class=\"headerlink\" title=\"待辦事項\"></a>待辦事項</h3><figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> [ ] 香蕉</span><br><span class=\"line\"><span class=\"bullet\">-</span> [x] 玉米</span><br><span class=\"line\"><span class=\"bullet\">-</span> [x] 蘋果</span><br><span class=\"line\"><span class=\"bullet\">-</span> [ ] 番茄</span><br></pre></td></tr></table></figure>\n<ul>\n<li><input disabled=\"\" type=\"checkbox\"> 香蕉</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 玉米</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> 蘋果</li>\n<li><input disabled=\"\" type=\"checkbox\"> 番茄</li>\n</ul>\n<h3 id=\"引用區塊\"><a href=\"#引用區塊\" class=\"headerlink\" title=\"引用區塊\"></a>引用區塊</h3><figure class=\"highlight markdown\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"quote\">&gt; 我勸你不要顧惜華貴的金縷衣，</span></span><br><span class=\"line\"><span class=\"quote\">&gt; 我勸你一定要珍惜青春少年時。</span></span><br><span class=\"line\"><span class=\"quote\">&gt; 花開宜折的時候就要抓緊去折，</span></span><br><span class=\"line\"><span class=\"quote\">&gt; 不要等到花謝時只折了個空枝。</span></span><br><span class=\"line\"><span class=\"quote\">&gt; &gt;作者：杜秋娘(第二層)</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>我勸你不要顧惜華貴的金縷衣，<br>我勸你一定要珍惜青春少年時。<br>花開宜折的時候就要抓緊去折，<br>不要等到花謝時只折了個空枝。</p>\n<blockquote>\n<p>作者：杜秋娘(第二層)</p>\n</blockquote>\n</blockquote>\n<h3 id=\"行內程式碼\"><a href=\"#行內程式碼\" class=\"headerlink\" title=\"行內程式碼\"></a>行內程式碼</h3><p>如果要標記一小段行內程式碼，你可以用反引號把它包起來</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Use the `<span class=\"built_in\">printf</span>()` <span class=\"keyword\">function</span>.</span><br></pre></td></tr></table></figure>\n<p>Use the <code>printf()</code> function.</p>\n<h3 id=\"流程圖\"><a href=\"#流程圖\" class=\"headerlink\" title=\"流程圖\"></a>流程圖</h3><p>設程式碼為 flow<br>設定 元素 tag=&gt;type: content<br>基本型別</p>\n<ul>\n<li>start</li>\n<li>end</li>\n<li>operation</li>\n<li>subroutine</li>\n<li>condition</li>\n<li>inputoutput </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 設定 元素</span></span><br><span class=\"line\">st=&gt;start: 開始</span><br><span class=\"line\"><span class=\"keyword\">in</span>=&gt;inputoutput: 输入</span><br><span class=\"line\">e=&gt;end: 結束</span><br><span class=\"line\">op=&gt;operation: 操作</span><br><span class=\"line\">cond=&gt;condition: 條件</span><br><span class=\"line\">sub=&gt;subroutine: 子程序</span><br><span class=\"line\">out=&gt;inputoutput: 输出</span><br><span class=\"line\"><span class=\"comment\"># 畫圖</span></span><br><span class=\"line\">st(right)-&gt;<span class=\"keyword\">in</span>-&gt;op-&gt;cond</span><br><span class=\"line\">cond(yes,right)-&gt;out-&gt;e</span><br><span class=\"line\">cond(no)-&gt;sub</span><br></pre></td></tr></table></figure>\n\n<div id=\"flowchart-0\" class=\"flow-chart\"></div>\n\n<h3 id=\"時序圖\"><a href=\"#時序圖\" class=\"headerlink\" title=\"時序圖\"></a>時序圖</h3><p>styles.styl 要做相對設定<br>加入 tag div(set class sequence)<br>設程式碼為 sequence</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 加入 class sequence</span></span><br><span class=\"line\">&lt;div class=<span class=\"string\">&quot;sequence&quot;</span>&gt;</span><br><span class=\"line\"><span class=\"comment\"># 設程式碼為 sequence</span></span><br><span class=\"line\">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class=\"line\">Note right of Bob: Bob thinks</span><br><span class=\"line\">Bob--&gt;Alice: I am good thanks!</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<div class=\"sequence\">\n<div id=\"sequence-0\"></div>\n</div>\n\n<h3 id=\"數學公式\"><a href=\"#數學公式\" class=\"headerlink\" title=\"數學公式\"></a>數學公式</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下標 _ 改為 \\_</span></span><br><span class=\"line\"><span class=\"comment\"># 條件表達式 每列 \\\\ 改為 \\\\\\\\</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 行內公式</span></span><br><span class=\"line\">質能方程式<span class=\"variable\">$E</span> = mc^2$</span><br><span class=\"line\"><span class=\"comment\"># 獨立公式</span></span><br><span class=\"line\">質能方程式$<span class=\"variable\">$E</span> = mc^2$$</span><br><span class=\"line\"><span class=\"comment\"># ^ 上標, _ 下標</span></span><br><span class=\"line\">$<span class=\"variable\">$x</span> = a\\_&#123;1&#125;^n + a\\_&#123;2&#125;^n + a\\_&#123;3&#125;^n$$</span><br><span class=\"line\"><span class=\"comment\"># 分數使用\\frac&#123;分母&#125;&#123;分子&#125; 不過推薦使用\\cfrac來代替\\frac，顯示公式不會太擠</span></span><br><span class=\"line\">$$\\frac&#123;1&#125;&#123;3&#125; 與\\cfrac&#123;1&#125;&#123;3&#125;$$</span><br><span class=\"line\"><span class=\"comment\"># &#123;&#125;因為有特殊作用因此當需要顯示大括號時一般使用\\lbrace \\rbrace來表示</span></span><br><span class=\"line\">$<span class=\"variable\">$f</span>(x, y) = 100 * \\lbrace[(x + y) * 3] - 5\\rbrace$$</span><br><span class=\"line\"><span class=\"comment\"># 開根號 \\sqrt[次数]&#123;被开方数&#125;</span></span><br><span class=\"line\">$$\\sqrt[3]&#123;X&#125; \\sqrt&#123;5 - x&#125;$$ </span><br><span class=\"line\"><span class=\"comment\"># 極限</span></span><br><span class=\"line\"><span class=\"variable\">$g</span>. \\lim\\limits_&#123;n \\rightarrow a&#125; [f(x)/g(x)]=L/M$</span><br><span class=\"line\"><span class=\"comment\"># 條件表達式</span></span><br><span class=\"line\">$$</span><br><span class=\"line\">y=</span><br><span class=\"line\">\\begin&#123;cases&#125;</span><br><span class=\"line\">-x,\\quad x\\leq 0 \\\\\\\\</span><br><span class=\"line\">x,\\quad x&gt;0</span><br><span class=\"line\">\\end&#123;cases&#125;</span><br><span class=\"line\">$$</span><br><span class=\"line\"></span><br><span class=\"line\">\\begin&#123;equation&#125;</span><br><span class=\"line\">    f(n) =</span><br><span class=\"line\">    \\begin&#123;cases&#125;</span><br><span class=\"line\">    n/2, &amp; \\text&#123;<span class=\"keyword\">if</span> $n$ is even&#125; \\\\\\\\</span><br><span class=\"line\">    3n+1, &amp; \\text&#123;<span class=\"keyword\">if</span> $n$ is odd&#125;</span><br><span class=\"line\">    \\end&#123;cases&#125;</span><br><span class=\"line\">\\end&#123;equation&#125;</span><br></pre></td></tr></table></figure>\n\n<p>質能方程式$E = mc^2$<br>質能方程式$$E = mc^2$$<br>上標,下標<br>$$x = a_{1}^n + a_{2}^n + a_{3}^n$$<br>分數使用<br>$$\\frac{1}{3} 與\\cfrac{1}{3}$$<br>括號<br>$$f(x, y) = 100 * \\lbrace[(x + y) * 3] - 5\\rbrace$$<br>開根號<br>$$\\sqrt[3]{X} \\sqrt{5 - x}$$<br>極限<br>$\\lim\\limits_{n \\rightarrow a} [f(x)/g(x)]=L/M$<br>條件表達式<br>$$<br>y=<br>\\begin{cases}<br>-x,\\quad x\\leq 0 \\\\<br>x,\\quad x&gt;0<br>\\end{cases}<br>$$</p>\n<p>\\begin{equation}<br>    f(n) =<br>    \\begin{cases}<br>    n/2, &amp; \\text{if $n$ is even} \\\\<br>    3n+1, &amp; \\text{if $n$ is odd}<br>    \\end{cases}<br>\\end{equation}</p>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js\"></script><textarea id=\"flowchart-0-code\" style=\"display: none\">st=>start: 開始\nin=>inputoutput: 输入\ne=>end: 結束\nop=>operation: 操作\ncond=>condition: 條件\nsub=>subroutine: 子程序\nout=>inputoutput: 输出\n\nst(right)->in->op->cond\ncond(yes,right)->out->e\ncond(no)->sub</textarea><textarea id=\"flowchart-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"flowchart-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value));  var diagram = flowchart.parse(code);  diagram.drawSVG(\"flowchart-0\", options);</script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js\"></script><textarea id=\"sequence-0-code\" style=\"display: none\">Alice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!</textarea><textarea id=\"sequence-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"sequence-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"sequence-0-options\").value));  var diagram = Diagram.parse(code);  diagram.drawSVG(\"sequence-0\", options);</script>","categories":["Front End"],"tags":["markdown"]},{"title":"網路概念","url":"/2021/05/05/network-1/","content":"<h3 id=\"TCP-IP\"><a href=\"#TCP-IP\" class=\"headerlink\" title=\"TCP/IP\"></a>TCP/IP</h3><h4 id=\"基本架構\"><a href=\"#基本架構\" class=\"headerlink\" title=\"基本架構\"></a>基本架構</h4><div style=\"width:650px\">\n    <img src=\"/2021/05/05/network-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<span id=\"more\"></span>\n\n<div style=\"width:650px\">\n    <img src=\"/2021/05/05/network-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<h4 id=\"內網-IP-address\"><a href=\"#內網-IP-address\" class=\"headerlink\" title=\"內網 IP address\"></a>內網 IP address</h4><ul>\n<li>A類10.0.0.0    ~  10.255.255.255</li>\n<li>B類172.16.0.0  ~  172.31.255.255</li>\n<li>C類192.168.0.0 ~ 192.168.255.255</li>\n</ul>\n<h4 id=\"常用-port\"><a href=\"#常用-port\" class=\"headerlink\" title=\"常用 port\"></a><a href=\"https://zh.wikipedia.org/wiki/TCP/UDP%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8\">常用 port</a></h4><ul>\n<li>DHCP (Ports 67/68 + 546/547)：自動取得 IP</li>\n<li>DNS (Port 53)：域名解析</li>\n<li>FTP (Port 20/21)：文件傳輸協定</li>\n<li>HTTP (Port 80)：超文件傳輸協定</li>\n<li>HTTPS (Port 443 + 445)：超級文字傳輸安全協定</li>\n<li>NTP (Port 123)：網路時間協定P,電腦時鐘與世界標準時間同步</li>\n<li>POP3 (Port 110 + 995)：接收電郵的伺服器端口。</li>\n<li>SMTP (Port 25)：寄送電郵的伺服器端口。</li>\n<li>Telnet (Port 23)：遠端文字登錄模式</li>\n</ul>\n<h4 id=\"special-IP-address\"><a href=\"#special-IP-address\" class=\"headerlink\" title=\"special IP address\"></a>special IP address</h4><ul>\n<li>127.0.0.1 : 本機 address</li>\n</ul>\n<h3 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h3><h4 id=\"url-中文編碼-Url-Encode-Decode\"><a href=\"#url-中文編碼-Url-Encode-Decode\" class=\"headerlink\" title=\"url 中文編碼(Url Encode / Decode)\"></a>url 中文編碼(Url Encode / Decode)</h4><p>url 若含中文要轉為 UTF-8(8-bit Unicode Transformation Format) </p>\n<h4 id=\"HTTP-version\"><a href=\"#HTTP-version\" class=\"headerlink\" title=\"HTTP version\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Evolution_of_HTTP\">HTTP version</a></h4><h4 id=\"HTTP-message\"><a href=\"#HTTP-message\" class=\"headerlink\" title=\"HTTP message\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages\">HTTP message</a></h4><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent\">User-Agent</a></p>\n<ul>\n<li><a href=\"https://developers.whatismybrowser.com/useragents/explore/\">List of User Agents</a></li>\n<li><a href=\"https://developers.google.com/search/docs/advanced/crawling/overview-google-crawlers\">google User-Agent</a></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// GET </span></span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/sys_info&#x27;</span>, &#123;</span><br><span class=\"line\">\t\theaders: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;X-Library-Number&#x27;</span>: <span class=\"string\">&#x27;20&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;MSIE 6.0&#x27;</span>,</span><br><span class=\"line\">\t\t\tOrigin: <span class=\"string\">&#x27;https://lidemy.com&#x27;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"><span class=\"comment\">// POST</span></span><br><span class=\"line\">request.post(&#123;</span><br><span class=\"line\">\t\turl: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/books&#x27;</span>,</span><br><span class=\"line\">\t\tform: &#123;</span><br><span class=\"line\">\t\t\tname: process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t\tISBN: process.argv[<span class=\"number\">4</span>]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"><span class=\"comment\">// DELETE </span></span><br><span class=\"line\">request.delete(&#123;</span><br><span class=\"line\">\t\turl: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/books/&#x27;</span> + process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"><span class=\"comment\">// PATCH</span></span><br><span class=\"line\">request.patch(&#123;</span><br><span class=\"line\">\t\turl: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v2/books/&#x27;</span> + process.argv[<span class=\"number\">3</span>],</span><br><span class=\"line\">\t\t<span class=\"string\">&#x27;auth&#x27;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;user&#x27;</span>: <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;pass&#x27;</span>: <span class=\"string\">&#x27;admin123&#x27;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tform: &#123;</span><br><span class=\"line\">\t\t\tISBN: <span class=\"string\">&#x27;9981835423&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, httpResponse, body</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(httpResponse)</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"HTTP-method\"><a href=\"#HTTP-method\" class=\"headerlink\" title=\"HTTP method\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/HTTP/Methods\">HTTP method</a></h4><ul>\n<li>GET    　  : 請求指定的頁面信息，並返回實體主體。</li>\n<li>HEAD      : 類似於get請求，只不過返回的響應中沒有具體的內容，用於獲取報頭</li>\n<li>POST      : 向指定資源提交數據進行處理請求（例如提交表單或者上傳文件）。 數據被包含在請求體中。 POST請求可能會導致新的資源的建立和/或已有資源的修改。</li>\n<li>PUT        : 從客戶端向服務器傳送的數據取代指定的文檔的內容。</li>\n<li>DELETE  : 請求服務器刪除指定的頁面。</li>\n<li>CONNECT    : HTTP/1.1協議中預留給能夠將連接改為管道方式的代理服務器。</li>\n<li>OPTIONS    : 允許客戶端查看服務器的性能。</li>\n<li>TRACE      : 回顯服務器收到的請求，主要用於測試或診斷。</li>\n</ul>\n<h4 id=\"HTTP-狀態碼\"><a href=\"#HTTP-狀態碼\" class=\"headerlink\" title=\"HTTP 狀態碼\"></a><a href=\"https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81\">HTTP 狀態碼</a></h4><ul>\n<li><p>1xx訊息</p>\n</li>\n<li><p>2xx 成功<br>  200 OK<br>  201 Created<br>  202 Accepted</p>\n</li>\n<li><p>3xx 重新導向<br>  301 永久導向<br>  302 暫時導向<br>  304 未改變,不需要再傳輸請求的內容，可以使用緩存的內容</p>\n</li>\n<li><p>4xx客戶端錯誤<br>  400 Bad Request<br>  401 Unauthorized(未認證)<br>  404 Not Found<br>  405 Method Not Allowed<br>  410 Gone - 表示所請求的資源不再可用，將不再可用 </p>\n</li>\n<li><p>5xx伺服器錯誤<br>  500 Internal Server Error<br>  501 Not Implemented<br>  503 Service Unavailable</p>\n</li>\n</ul>\n<h3 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h3><h4 id=\"Charles-封包抓取工具\"><a href=\"#Charles-封包抓取工具\" class=\"headerlink\" title=\"Charles 封包抓取工具\"></a><a href=\"https://www.charlesproxy.com/download/\">Charles</a> 封包抓取工具</h4><h4 id=\"POSTMAN\"><a href=\"#POSTMAN\" class=\"headerlink\" title=\"POSTMAN\"></a><a href=\"https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=zh-TW\">POSTMAN</a></h4><h4 id=\"Wireshark\"><a href=\"#Wireshark\" class=\"headerlink\" title=\"Wireshark\"></a><a href=\"https://www.wireshark.org/download.html\">Wireshark</a></h4><h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"http://linux.vbird.org/linux_server/0110network_basic.php#whatisnetwork_osi\">基礎網路概念</a></li>\n<li><a href=\"https://kknews.cc/zh-tw/code/b83bma9.html\">徹底了解TCP三次握手與四次揮手</a></li>\n</ul>\n","categories":["知識"],"tags":["http","network"]},{"title":"Node.js 說明","url":"/2021/03/12/nodejs-1/","content":"<h3 id=\"基本\"><a href=\"#基本\" class=\"headerlink\" title=\"基本\"></a>基本</h3><h4 id=\"Dump-version\"><a href=\"#Dump-version\" class=\"headerlink\" title=\"Dump version\"></a>Dump version</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">node -v</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"simple-run-js\"><a href=\"#simple-run-js\" class=\"headerlink\" title=\"simple run js\"></a>simple run js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> msg = <span class=\"string\">&quot;hello World&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(msg);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">node app.js</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"API-中文文件\"><a href=\"#API-中文文件\" class=\"headerlink\" title=\"API 中文文件\"></a><a href=\"https://nodejs.org/docs/latest-v14.x/api/index.html\">API</a> <a href=\"http://nodejs.cn/api/\">中文文件</a></h3><h4 id=\"OS\"><a href=\"#OS\" class=\"headerlink\" title=\"OS\"></a>OS</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// test1.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> os = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;os&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(os.platform())</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node test1.js</span><br><span class=\"line\">win32</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// http_server1.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> server = http.createServer(handleRequest)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">req, res</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(req.url)</span><br><span class=\"line\">\tres.write(<span class=\"string\">&#x27;hello&#x27;</span>)</span><br><span class=\"line\">\tres.end()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server.listen(<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node http_server1.js</span><br><span class=\"line\">/</span><br><span class=\"line\">/favicon.ico</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Process\"><a href=\"#Process\" class=\"headerlink\" title=\"Process\"></a>Process</h4><p>process存在於全域性物件上，不需要使用require()載入即可使用</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// const process = require(&#x27;process&#x27;)</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(process.argv)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"File-system\"><a href=\"#File-system\" class=\"headerlink\" title=\"File system\"></a><a href=\"https://nodejs.org/docs/latest-v14.x/api/fs.html#fs_file_system\">File system</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// __dirname 為目前的目錄</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;fs&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(__dirname)</span><br><span class=\"line\"></span><br><span class=\"line\">fs.readFile(__dirname + <span class=\"string\">&#x27;/bus921_temp.html&#x27;</span>, <span class=\"string\">&#x27;utf8&#x27;</span>,</span><br><span class=\"line\">\t(err, data) =&gt; &#123;</span><br><span class=\"line\">\t\tparseBusData(data)</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(data)</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"export-my-module\"><a href=\"#export-my-module\" class=\"headerlink\" title=\"export my module\"></a>export my module</h3><h4 id=\"export-1\"><a href=\"#export-1\" class=\"headerlink\" title=\"export #1\"></a>export #1</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// myMouble.js - myModule export #1</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">double</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> n * <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = double</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// test1.js - myModule export #1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myModule = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./myModule&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myModule(<span class=\"number\">3</span>))</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node test1.js</span><br><span class=\"line\">6</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"export-2-常用\"><a href=\"#export-2-常用\" class=\"headerlink\" title=\"export #2 (常用)\"></a>export #2 (常用)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// myMouble.js - myModule export #2</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">double</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> n * <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">\tdouble: double,</span><br><span class=\"line\">\ttriple: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> n * <span class=\"number\">3</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = obj</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// test1.js - myModule export #2</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myModule = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./myModule&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myModule.double(<span class=\"number\">3</span>), myModule.triple(<span class=\"number\">5</span>))</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node test1.js</span><br><span class=\"line\">6 15</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HTPP-server-and-client\"><a href=\"#HTPP-server-and-client\" class=\"headerlink\" title=\"HTPP server and client\"></a>HTPP server and client</h3><h4 id=\"request-Simplified-HTTP-client\"><a href=\"#request-Simplified-HTTP-client\" class=\"headerlink\" title=\"request - - Simplified HTTP client\"></a><a href=\"https://www.npmjs.com/package/request\">request</a> - - Simplified HTTP client</h4><h5 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install request</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"show-status\"><a href=\"#show-status\" class=\"headerlink\" title=\"show status\"></a>show status</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>);</span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://github.com/hot5656/AboutMe&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(<span class=\"string\">&#x27;error:&#x27;</span>, error); </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;statusCode:&#x27;</span>, response &amp;&amp; response.statusCode); </span><br><span class=\"line\">  <span class=\"comment\">// console.log(&#x27;body:&#x27;, body); </span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node request_1.js</span><br><span class=\"line\">error: null</span><br><span class=\"line\">statusCode: 200</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"get-body\"><a href=\"#get-body\" class=\"headerlink\" title=\"get body\"></a>get body</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>);</span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://github.com/hot5656/AboutMe&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.error(&#x27;error:&#x27;, error); </span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&#x27;statusCode:&#x27;, response &amp;&amp; response.statusCode); </span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;body:&#x27;</span>, body); </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">command</span> node request_1.js  &gt; ho5656.html</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"shwo-header\"><a href=\"#shwo-header\" class=\"headerlink\" title=\"shwo header\"></a>shwo header</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>);</span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://github.com/hot5656/AboutMe&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(response.headers)</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&#x27;body:&#x27;, body); </span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node request_1.js</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  server: <span class=\"string\">&#x27;GitHub.com&#x27;</span>,</span><br><span class=\"line\">  date: <span class=\"string\">&#x27;Wed, 05 May 2021 07:45:16 GMT&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;text/html; charset=utf-8&#x27;</span>,</span><br><span class=\"line\">  vary: <span class=\"string\">&#x27;X-PJAX, Accept-Encoding, Accept, X-Requested-With&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;permissions-policy&#x27;</span>: <span class=\"string\">&#x27;interest-cohort=()&#x27;</span>,</span><br><span class=\"line\">  etag: <span class=\"string\">&#x27;W/&quot;6c2b56ff86dccd4690557cb83915b549&quot;&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;cache-control&#x27;</span>: <span class=\"string\">&#x27;max-age=0, private, must-revalidate&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;strict-transport-security&#x27;</span>: <span class=\"string\">&#x27;max-age=31536000; includeSubdomains; preload&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;x-frame-options&#x27;</span>: <span class=\"string\">&#x27;deny&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;x-content-type-options&#x27;</span>: <span class=\"string\">&#x27;nosniff&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;x-xss-protection&#x27;</span>: <span class=\"string\">&#x27;0&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;referrer-policy&#x27;</span>: <span class=\"string\">&#x27;no-referrer-when-downgrade&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;expect-ct&#x27;</span>: <span class=\"string\">&#x27;max-age=2592000, report-uri=&quot;https://api.github.com/_private/browser/errors&quot;&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;content-security-policy&#x27;</span>: <span class=\"string\">&quot;default-src &#x27;none&#x27;; base-uri &#x27;self&#x27;; block-all-mixed-content; connect-src &#x27;self&#x27; uploads.g</span></span><br><span class=\"line\"><span class=\"string\">ithub.com www.githubstatus.com collector.githubapp.com api.github.com github-cloud.s3.amazonaws.com github-production-re</span></span><br><span class=\"line\"><span class=\"string\">pository-file-5c1aeb.s3.amazonaws.com github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-u</span></span><br><span class=\"line\"><span class=\"string\">ser-asset-6210df.s3.amazonaws.com cdn.optimizely.com logx.optimizely.com/v1/events wss://alive.github.com *.actions.gith</span></span><br><span class=\"line\"><span class=\"string\">ubusercontent.com wss://*.actions.githubusercontent.com online.visualstudio.com/api/v1/locations insights.github.com; fo</span></span><br><span class=\"line\"><span class=\"string\">nt-src github.githubassets.com; form-action &#x27;self&#x27; github.com gist.github.com; frame-ancestors &#x27;none&#x27;; frame-src render.</span></span><br><span class=\"line\"><span class=\"string\">githubusercontent.com; img-src &#x27;self&#x27; data: github.githubassets.com identicons.github.com collector.githubapp.com github</span></span><br><span class=\"line\"><span class=\"string\">-cloud.s3.amazonaws.com secured-user-images.githubusercontent.com/ *.githubusercontent.com; manifest-src &#x27;self&#x27;; media-s</span></span><br><span class=\"line\"><span class=\"string\">rc github.com user-images.githubusercontent.com/; script-src github.githubassets.com; style-src &#x27;unsafe-inline&#x27; github.g</span></span><br><span class=\"line\"><span class=\"string\">ithubassets.com; worker-src github.com/socket-worker-3f088aa2.js gist.github.com/socket-worker-3f088aa2.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;set-cookie&#x27;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&#x27;_gh_sess=NI97SaBBGcExrVqC%2FAInwNqd%2FJ8kyr3QWl8aWLyXTQ02WCNaZnTA%2FBLbI9UUPfKJYc6dOc2J8Q9RObRql78r9q3D%2B5tLwpDh0j</span></span><br><span class=\"line\"><span class=\"string\">a%2FGjn4WsjGm1XH1z7CWvkYyVQfOP%2FQx6n2pm95ePiwSwtITnj27BY7cteKvBzGlMKJNYqVuMzSXcxyMr9Tu4zVG99JDTU6oOOW1WQAPARk2t8Y%2F%2B</span></span><br><span class=\"line\"><span class=\"string\">SLWBxcIAuEEAoBPH%2FoaBbI0G3IHtvvobWiCQodRvyeXJ30h0qui2ZQs8O8WNTsBdR4Jw%3D%3D--eZlEDQ1ebZKKm2Jh--H8LZRSxWEwmES%2F54qujq%2</span></span><br><span class=\"line\"><span class=\"string\">Fw%3D%3D; Path=/; HttpOnly; Secure; SameSite=Lax&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;_octo=GH1.1.1400842276.1620200716; Path=/; Domain=github.com; Expires=Thu, 05 May 2022 07:45:16 GMT; Secure; SameSi</span></span><br><span class=\"line\"><span class=\"string\">te=Lax&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;logged_in=no; Path=/; Domain=github.com; Expires=Thu, 05 May 2022 07:45:16 GMT; HttpOnly; Secure; SameSite=Lax&#x27;</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&#x27;accept-ranges&#x27;</span>: <span class=\"string\">&#x27;bytes&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;transfer-encoding&#x27;</span>: <span class=\"string\">&#x27;chunked&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">&#x27;x-github-request-id&#x27;</span>: <span class=\"string\">&#x27;F317:1E82:12B4AA:163825:60924D0B&#x27;</span>,</span><br><span class=\"line\">  connection: <span class=\"string\">&#x27;close&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"http-server-node-js-內含\"><a href=\"#http-server-node-js-內含\" class=\"headerlink\" title=\"http-server - node.js  內含\"></a><a href=\"https://nodejs.org/dist/latest-v14.x/docs/api/http.html#http_class_http_server\">http-server</a> - node.js  內含</h4><h5 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// http_server1.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> server = http.createServer(handleRequest)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">req, res</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(req.url)</span><br><span class=\"line\">\tres.write(<span class=\"string\">&#x27;hello&#x27;</span>)</span><br><span class=\"line\">\tres.end()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server.listen(<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node http_server1.js</span><br><span class=\"line\">/</span><br><span class=\"line\">/favicon.ico</span><br></pre></td></tr></table></figure>\n\n<div style=\"width:300px\">\n    <img src=\"/2021/03/12/nodejs-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h5 id=\"example-2\"><a href=\"#example-2\" class=\"headerlink\" title=\"example 2\"></a>example 2</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// http_server1.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> server = http.createServer(handleRequest)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleRequest</span>(<span class=\"params\">req, res</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(req.url)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.write(<span class=\"string\">&#x27;welcome&#x27;</span>)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/hello&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.write(<span class=\"string\">&#x27;hello&#x27;</span>)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/redirect&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.writeHead(<span class=\"number\">200</span>, &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;Robert&#x27;</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/redirect2&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.writeHead(<span class=\"number\">302</span>, &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;location&#x27;</span>: <span class=\"string\">&#x27;/hello&#x27;</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t\tres.end()</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tres.writeHead(<span class=\"number\">404</span>)</span><br><span class=\"line\">\tres.end()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server.listen(<span class=\"number\">5000</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node http_server1.js</span><br><span class=\"line\">/</span><br><span class=\"line\">/hello</span><br><span class=\"line\">/redirect</span><br><span class=\"line\">/new</span><br><span class=\"line\">/redirect2</span><br></pre></td></tr></table></figure>\n\n<div style=\"width:300px\">\n    <img src=\"/2021/03/12/nodejs-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<div style=\"width:300px\">\n    <img src=\"/2021/03/12/nodejs-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<div style=\"width:650px\">\n    <img src=\"/2021/03/12/nodejs-1/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<div style=\"width:650px\">\n    <img src=\"/2021/03/12/nodejs-1/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<div style=\"width:650px\">\n    <img src=\"/2021/03/12/nodejs-1/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n\n<p>因 Chrome 使用 network monitor 有問題, 改用 Brave 正常</p>\n<div style=\"width:700px\">\n    <img src=\"/2021/03/12/nodejs-1/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<p>看不到 network monitor 是因為選JS(應選All)<br>總是有 util.js 和 pagejs.js 是因為 chrome 安裝了 SmartPKI 多憑證安控模組擴充套件</p>\n<div style=\"width:650px\">\n    <img src=\"/2021/03/12/nodejs-1/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n\n\n\n\n\n\n\n\n\n","categories":["Front End"],"tags":["node.js"]},{"title":"npm 說明","url":"/2021/03/12/npm-1/","content":"<h3 id=\"Commans\"><a href=\"#Commans\" class=\"headerlink\" title=\"Commans\"></a>Commans</h3><h4 id=\"Dump-version\"><a href=\"#Dump-version\" class=\"headerlink\" title=\"Dump version\"></a>Dump version</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm -v</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ping-npmjs-registry\"><a href=\"#ping-npmjs-registry\" class=\"headerlink\" title=\"ping npmjs registry\"></a>ping npmjs registry</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm ping</span><br><span class=\"line\">\tnpm notice PING https://registry.npmjs.org/</span><br><span class=\"line\">\tnpm notice PONG 0.358ms</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Dump-all-npm-installed-models\"><a href=\"#Dump-all-npm-installed-models\" class=\"headerlink\" title=\"Dump all npm installed models\"></a>Dump all npm installed models</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm list</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h4 id=\"檢查-node-modules-有相關資安漏洞\"><a href=\"#檢查-node-modules-有相關資安漏洞\" class=\"headerlink\" title=\"檢查 node_modules 有相關資安漏洞\"></a>檢查 node_modules 有相關資安漏洞</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm audit</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"自動修正相關漏洞\"><a href=\"#自動修正相關漏洞\" class=\"headerlink\" title=\"自動修正相關漏洞\"></a>自動修正相關漏洞</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm audit fix</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"更新可更新的-node-modules\"><a href=\"#更新可更新的-node-modules\" class=\"headerlink\" title=\"更新可更新的 node_modules\"></a>更新可更新的 node_modules</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm update</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"清理-node-modules-中不需要的檔案\"><a href=\"#清理-node-modules-中不需要的檔案\" class=\"headerlink\" title=\"清理 node_modules 中不需要的檔案\"></a>清理 node_modules 中不需要的檔案</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm prune</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-module\"><a href=\"#install-module\" class=\"headerlink\" title=\"install module\"></a>install module</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安裝最新版本：</span></span><br><span class=\"line\">npm install hexo-theme-next@latest</span><br><span class=\"line\"><span class=\"comment\"># 指定特定版本：</span></span><br><span class=\"line\">npm install hexo-theme-next@8.0.0</span><br><span class=\"line\"><span class=\"comment\"># 安裝目前版本：</span></span><br><span class=\"line\">npm install hexo-theme-next</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"npx-執行-project-安裝-module\"><a href=\"#npx-執行-project-安裝-module\" class=\"headerlink\" title=\"npx : 執行 project 安裝 module\"></a>npx : 執行 project 安裝 module</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npx jest</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"專案-npm-初始化\"><a href=\"#專案-npm-初始化\" class=\"headerlink\" title=\"專案 npm 初始化\"></a>專案 npm 初始化</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 會要求你輸入關於這個專案的相關資訊</span></span><br><span class=\"line\">npm init</span><br><span class=\"line\"><span class=\"comment\"># 專案全部載入預設資料</span></span><br><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"本地、本機安裝-共用-module\"><a href=\"#本地、本機安裝-共用-module\" class=\"headerlink\" title=\"本地、本機安裝(共用 module)\"></a>本地、本機安裝(共用 module)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br><span class=\"line\">or</span><br><span class=\"line\">npm install hexo-cli –g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"專案-modle-安裝\"><a href=\"#專案-modle-安裝\" class=\"headerlink\" title=\"專案 modle 安裝\"></a>專案 modle 安裝</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># dependencies (依賴套件): 專案 production or build 之後仍然會使用的套件，例如 jQuery、swiper 等等套件</span></span><br><span class=\"line\">npm install --save hexo-generator-feed</span><br><span class=\"line\"><span class=\"comment\"># devDependencies (開發依賴套件): devDependencies 就是只有在我們開發時，才會使用的套件，舉例來講 babel、esling 等</span></span><br><span class=\"line\">npm install --save-dev hexo-generator-feed</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"移除套件\"><a href=\"#移除套件\" class=\"headerlink\" title=\"移除套件\"></a>移除套件</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm uninstall -g [套件名稱]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"還原專案套件\"><a href=\"#還原專案套件\" class=\"headerlink\" title=\"還原專案套件\"></a>還原專案套件</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"run-script\"><a href=\"#run-script\" class=\"headerlink\" title=\"run script\"></a>run script</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> leftPad = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;left-pad&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// insert 0 before number </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(leftPad(<span class=\"number\">123</span>, <span class=\"number\">10</span>, <span class=\"string\">&#x27;0&#x27;</span>))</span><br></pre></td></tr></table></figure>\n\n<p>package.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;js102&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;start&quot;</span>: <span class=\"string\">&quot;node index.js&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;dependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;left-pad&quot;</span>: <span class=\"string\">&quot;^1.3.0&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ npm run start</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; js102@1.0.0 start</span><br><span class=\"line\">&gt; node index.js</span><br><span class=\"line\"></span><br><span class=\"line\">0000000123</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"module-version\"><a href=\"#module-version\" class=\"headerlink\" title=\"module version\"></a>module version</h3><h4 id=\"package-json\"><a href=\"#package-json\" class=\"headerlink\" title=\"package.json\"></a>package.json</h4><ul>\n<li>^version: Compatible with version<br>鎖住第一碼(即A) 不得變更。如^1.2.2，則安裝範圍是&gt;=1.2.2 且 &lt;2.0.0。即須符合1.*.*。</li>\n<li>&sim;version: Approximately equivalent to version<br>鎖住第二碼(即B) 不得變更。如&sim;1.2.2，則安裝範圍是&gt;=1.2.2且&lt;1.3.0。即須符合1.2.*。</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;express&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;start&quot;</span>: <span class=\"string\">&quot;nodemon app.js&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;keywords&quot;</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;dependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;body-parser&quot;</span>: <span class=\"string\">&quot;^1.19.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;cookie-parser&quot;</span>: <span class=\"string\">&quot;^1.4.5&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dotenv&quot;</span>: <span class=\"string\">&quot;^10.0.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;express&quot;</span>: <span class=\"string\">&quot;^4.17.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;mongodb&quot;</span>: <span class=\"string\">&quot;^4.1.4&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;mongoose&quot;</span>: <span class=\"string\">&quot;^6.0.12&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;morgan&quot;</span>: <span class=\"string\">&quot;^1.10.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;nodemon&quot;</span>: <span class=\"string\">&quot;^2.0.14&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;uuid&quot;</span>: <span class=\"string\">&quot;^8.3.2&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"安裝特定版本\"><a href=\"#安裝特定版本\" class=\"headerlink\" title=\"安裝特定版本\"></a>安裝特定版本</h4><ul>\n<li><p>查詢最後版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm info express-validator version</span><br><span class=\"line\">  6.13.0</span><br></pre></td></tr></table></figure></li>\n<li><p>查詢所有版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm view express-validator versions</span><br><span class=\"line\">  [</span><br><span class=\"line\">    <span class=\"string\">&#x27;0.1.0&#x27;</span>,   <span class=\"string\">&#x27;0.1.1&#x27;</span>,  <span class=\"string\">&#x27;0.1.2&#x27;</span>,  <span class=\"string\">&#x27;0.1.3&#x27;</span>,  <span class=\"string\">&#x27;0.2.0&#x27;</span>,  <span class=\"string\">&#x27;0.2.1&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;0.2.2&#x27;</span>,   <span class=\"string\">&#x27;0.2.3&#x27;</span>,  <span class=\"string\">&#x27;0.2.4&#x27;</span>,  <span class=\"string\">&#x27;0.3.0&#x27;</span>,  <span class=\"string\">&#x27;0.3.1&#x27;</span>,  <span class=\"string\">&#x27;0.3.2&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;0.4.0&#x27;</span>,   <span class=\"string\">&#x27;0.4.1&#x27;</span>,  <span class=\"string\">&#x27;0.5.0&#x27;</span>,  <span class=\"string\">&#x27;0.6.0&#x27;</span>,  <span class=\"string\">&#x27;0.7.0&#x27;</span>,  <span class=\"string\">&#x27;0.8.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;1.0.0&#x27;</span>,   <span class=\"string\">&#x27;1.0.1&#x27;</span>,  <span class=\"string\">&#x27;2.0.0&#x27;</span>,  <span class=\"string\">&#x27;2.1.0&#x27;</span>,  <span class=\"string\">&#x27;2.1.1&#x27;</span>,  <span class=\"string\">&#x27;2.1.2&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;2.2.0&#x27;</span>,   <span class=\"string\">&#x27;2.3.0&#x27;</span>,  <span class=\"string\">&#x27;2.4.0&#x27;</span>,  <span class=\"string\">&#x27;2.5.0&#x27;</span>,  <span class=\"string\">&#x27;2.6.0&#x27;</span>,  <span class=\"string\">&#x27;2.7.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;2.8.0&#x27;</span>,   <span class=\"string\">&#x27;2.9.0&#x27;</span>,  <span class=\"string\">&#x27;2.9.1&#x27;</span>,  <span class=\"string\">&#x27;2.10.0&#x27;</span>, <span class=\"string\">&#x27;2.11.0&#x27;</span>, <span class=\"string\">&#x27;2.12.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;2.12.1&#x27;</span>,  <span class=\"string\">&#x27;2.12.2&#x27;</span>, <span class=\"string\">&#x27;2.13.0&#x27;</span>, <span class=\"string\">&#x27;2.14.0&#x27;</span>, <span class=\"string\">&#x27;2.14.1&#x27;</span>, <span class=\"string\">&#x27;2.14.2&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;2.15.0&#x27;</span>,  <span class=\"string\">&#x27;2.15.1&#x27;</span>, <span class=\"string\">&#x27;2.16.0&#x27;</span>, <span class=\"string\">&#x27;2.17.0&#x27;</span>, <span class=\"string\">&#x27;2.17.1&#x27;</span>, <span class=\"string\">&#x27;2.18.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;2.19.0&#x27;</span>,  <span class=\"string\">&#x27;2.19.1&#x27;</span>, <span class=\"string\">&#x27;2.19.2&#x27;</span>, <span class=\"string\">&#x27;2.20.1&#x27;</span>, <span class=\"string\">&#x27;2.20.2&#x27;</span>, <span class=\"string\">&#x27;2.20.3&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;2.20.4&#x27;</span>,  <span class=\"string\">&#x27;2.20.5&#x27;</span>, <span class=\"string\">&#x27;2.20.6&#x27;</span>, <span class=\"string\">&#x27;2.20.7&#x27;</span>, <span class=\"string\">&#x27;2.20.8&#x27;</span>, <span class=\"string\">&#x27;2.20.9&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;2.20.10&#x27;</span>, <span class=\"string\">&#x27;2.21.0&#x27;</span>, <span class=\"string\">&#x27;3.0.0&#x27;</span>,  <span class=\"string\">&#x27;3.1.0&#x27;</span>,  <span class=\"string\">&#x27;3.1.1&#x27;</span>,  <span class=\"string\">&#x27;3.1.2&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;3.1.3&#x27;</span>,   <span class=\"string\">&#x27;3.2.0&#x27;</span>,  <span class=\"string\">&#x27;3.2.1&#x27;</span>,  <span class=\"string\">&#x27;4.0.0&#x27;</span>,  <span class=\"string\">&#x27;4.1.0&#x27;</span>,  <span class=\"string\">&#x27;4.1.1&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;4.2.0&#x27;</span>,   <span class=\"string\">&#x27;4.2.1&#x27;</span>,  <span class=\"string\">&#x27;4.3.0&#x27;</span>,  <span class=\"string\">&#x27;5.0.0&#x27;</span>,  <span class=\"string\">&#x27;5.0.1&#x27;</span>,  <span class=\"string\">&#x27;5.0.2&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;5.0.3&#x27;</span>,   <span class=\"string\">&#x27;5.1.0&#x27;</span>,  <span class=\"string\">&#x27;5.1.1&#x27;</span>,  <span class=\"string\">&#x27;5.1.2&#x27;</span>,  <span class=\"string\">&#x27;5.2.0&#x27;</span>,  <span class=\"string\">&#x27;5.3.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;5.3.1&#x27;</span>,   <span class=\"string\">&#x27;6.0.0&#x27;</span>,  <span class=\"string\">&#x27;6.0.1&#x27;</span>,  <span class=\"string\">&#x27;6.1.0&#x27;</span>,  <span class=\"string\">&#x27;6.1.1&#x27;</span>,  <span class=\"string\">&#x27;6.2.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;6.3.0&#x27;</span>,   <span class=\"string\">&#x27;6.3.1&#x27;</span>,  <span class=\"string\">&#x27;6.4.0&#x27;</span>,  <span class=\"string\">&#x27;6.4.1&#x27;</span>,  <span class=\"string\">&#x27;6.5.0&#x27;</span>,  <span class=\"string\">&#x27;6.6.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;6.6.1&#x27;</span>,   <span class=\"string\">&#x27;6.7.0&#x27;</span>,  <span class=\"string\">&#x27;6.8.0&#x27;</span>,  <span class=\"string\">&#x27;6.8.1&#x27;</span>,  <span class=\"string\">&#x27;6.8.2&#x27;</span>,  <span class=\"string\">&#x27;6.9.0&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;6.9.1&#x27;</span>,   <span class=\"string\">&#x27;6.9.2&#x27;</span>,  <span class=\"string\">&#x27;6.10.0&#x27;</span>, <span class=\"string\">&#x27;6.10.1&#x27;</span>, <span class=\"string\">&#x27;6.11.0&#x27;</span>, <span class=\"string\">&#x27;6.11.1&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;6.12.0&#x27;</span>,  <span class=\"string\">&#x27;6.12.1&#x27;</span>, <span class=\"string\">&#x27;6.12.2&#x27;</span>, <span class=\"string\">&#x27;6.13.0&#x27;</span></span><br><span class=\"line\">  ]</span><br></pre></td></tr></table></figure></li>\n<li><p>查詢現在安裝 ndoe module 版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm list</span><br><span class=\"line\">  express@1.0.0 D:\\work\\git\\li\\project\\ecommerce\\express</span><br><span class=\"line\">  +-- body-parser@1.19.0</span><br><span class=\"line\">  +-- cookie-parser@1.4.5</span><br><span class=\"line\">  +-- dotenv@10.0.0</span><br><span class=\"line\">  +-- express@4.17.1</span><br><span class=\"line\">  +-- mongodb@4.1.4</span><br><span class=\"line\">  +-- mongoose@6.0.12</span><br><span class=\"line\">  +-- morgan@1.10.0</span><br><span class=\"line\">  +-- nodemon@2.0.14</span><br><span class=\"line\">  `-- uuid@8.3.2</span><br></pre></td></tr></table></figure></li>\n<li><p>安裝特定版號 ndoe module</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># npm install [package-name]@[version-number]</span></span><br><span class=\"line\">npm install renovate@20.5.1</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"Unit-test\"><a href=\"#Unit-test\" class=\"headerlink\" title=\"Unit test\"></a>Unit test</h3><h4 id=\"call-function-test\"><a href=\"#call-function-test\" class=\"headerlink\" title=\"call function test\"></a>call function test</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">repeat</span>(<span class=\"params\">str, times</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> result= <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;times ; i++) &#123;</span><br><span class=\"line\">\t\tresult += str</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// test by code</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeat(<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"number\">5</span>) === <span class=\"string\">&#x27;aaaaa&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeat(<span class=\"string\">&#x27;abc&#x27;</span>, <span class=\"number\">2</span>) === <span class=\"string\">&#x27;abcabc&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeat(<span class=\"string\">&#x27;1!a&#x27;</span>, <span class=\"number\">2</span>) === <span class=\"string\">&#x27;1!a1!a&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeat(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"number\">3</span>) === <span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeat(<span class=\"string\">&#x27;abc&#x27;</span>, <span class=\"number\">0</span>) === <span class=\"string\">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node index.js</span><br><span class=\"line\"><span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"jest-test\"><a href=\"#jest-test\" class=\"headerlink\" title=\"jest test\"></a><a href=\"https://jestjs.io/docs/getting-started\">jest test</a></h4><h5 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h5><p>jest 會自動找 xxx.test.js 測試 </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">repeat</span>(<span class=\"params\">str, times</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> result= <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;times ; i++) &#123;</span><br><span class=\"line\">\t\tresult += str</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// export for test</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = repeat</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> repeat = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./index&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&#x27;a 重複 5 次為 aaaaa&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\texpect(repeat(<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"number\">5</span>)).toBe(<span class=\"string\">&#x27;aaaaa&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ npx jest</span><br><span class=\"line\"> PASS  ./index.test.js</span><br><span class=\"line\">  √ a 重複 5 次為 aaaaa (3 ms)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:14:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:15:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:16:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:17:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:18:9)</span><br><span class=\"line\"></span><br><span class=\"line\">Test Suites: 1 passed, 1 total</span><br><span class=\"line\">Tests:       1 passed, 1 total</span><br><span class=\"line\">Snapshots:   0 total</span><br><span class=\"line\">Time:        4.857 s</span><br><span class=\"line\">Ran all <span class=\"built_in\">test</span> suites matching /index.test.js/i.</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"test-by-script\"><a href=\"#test-by-script\" class=\"headerlink\" title=\"test by script\"></a>test by script</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">&quot;start&quot;: &quot;node index.js&quot;,</span><br><span class=\"line\"> &quot;test&quot;: &quot;jest&quot;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ yarn run <span class=\"built_in\">test</span></span><br><span class=\"line\">yarn run v1.22.10</span><br><span class=\"line\">$ jest</span><br><span class=\"line\"> PASS  ./index.test.js</span><br><span class=\"line\">  √ a 重複 5 次為 aaaaa (4 ms)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:14:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:15:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:16:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:17:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:18:9)</span><br><span class=\"line\"></span><br><span class=\"line\">Test Suites: 1 passed, 1 total</span><br><span class=\"line\">Tests:       1 passed, 1 total</span><br><span class=\"line\">Snapshots:   0 total</span><br><span class=\"line\">Time:        2.822 s</span><br><span class=\"line\">Ran all <span class=\"built_in\">test</span> suites.</span><br><span class=\"line\">Done <span class=\"keyword\">in</span> 4.23s.</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"test-multi-items\"><a href=\"#test-multi-items\" class=\"headerlink\" title=\"test multi items\"></a>test multi items</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> repeat = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./index&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&#x27;a 重複 5 次為 aaaaa&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\texpect(repeat(<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"number\">5</span>)).toBe(<span class=\"string\">&#x27;aaaaa&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">test(<span class=\"string\">&#x27;1!a 重複 2 次為 1!a1!a&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\texpect(repeat(<span class=\"string\">&#x27;1!a&#x27;</span>, <span class=\"number\">2</span>)).toBe(<span class=\"string\">&#x27;1!a1!a&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">test(<span class=\"string\">&#x27;空字串 重複 3 次為 空字串&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\texpect(repeat(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"number\">3</span>)).toBe(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">test(<span class=\"string\">&#x27;abc 重複 0 次為 空字串&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\texpect(repeat(<span class=\"string\">&#x27;abc&#x27;</span>, <span class=\"number\">0</span>)).toBe(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ npm run <span class=\"built_in\">test</span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; js102@1.0.0 <span class=\"built_in\">test</span></span><br><span class=\"line\">&gt; jest</span><br><span class=\"line\"></span><br><span class=\"line\"> PASS  ./index.test.js</span><br><span class=\"line\">  √ a 重複 5 次為 aaaaa (5 ms)</span><br><span class=\"line\">  √ 1!a 重複 2 次為 1!a1!a (1 ms)</span><br><span class=\"line\">  √ 空字串 重複 3 次為 空字串 (1 ms)</span><br><span class=\"line\">  √ abc 重複 0 次為 空字串 (1 ms)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:14:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:15:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:16:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:17:9)</span><br><span class=\"line\"></span><br><span class=\"line\">  console.log</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">      at Object.&lt;anonymous&gt; (index.js:18:9)</span><br><span class=\"line\"></span><br><span class=\"line\">Test Suites: 1 passed, 1 total</span><br><span class=\"line\">Tests:       4 passed, 4 total</span><br><span class=\"line\">Snapshots:   0 total</span><br><span class=\"line\">Time:        3.628 s</span><br><span class=\"line\">Ran all <span class=\"built_in\">test</span> suites.</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"TDD-Test-Driven-Development-測試驅動開發\"><a href=\"#TDD-Test-Driven-Development-測試驅動開發\" class=\"headerlink\" title=\"TDD (Test-Driven Development) 測試驅動開發\"></a>TDD (Test-Driven Development) 測試驅動開發</h4><p>先寫 test pattern 再寫 code</p>\n<h3 id=\"npm-apos-s-node-module\"><a href=\"#npm-apos-s-node-module\" class=\"headerlink\" title=\"npm&apos;s node module\"></a>npm&apos;s node module</h3><h4 id=\"mathjs\"><a href=\"#mathjs\" class=\"headerlink\" title=\"mathjs\"></a><a href=\"https://www.npmjs.com/package/mathjs\">mathjs</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// npm install mathjs</span></span><br><span class=\"line\"><span class=\"comment\">// require </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> maths = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mathjs&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(maths.round(maths.e, <span class=\"number\">3</span>))\t<span class=\"comment\">// 2.718</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(maths.log(<span class=\"number\">10000</span>, <span class=\"number\">10</span>))\t\t\t<span class=\"comment\">// 4</span></span><br><span class=\"line\"><span class=\"comment\">// import </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  atan2, chain, derivative, e, evaluate, log, pi, pow, round, sqrt</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;mathjs&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(round(e, <span class=\"number\">3</span>))\t\t\t\t<span class=\"comment\">// 2.718</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(log(<span class=\"number\">10000</span>, <span class=\"number\">10</span>))\t\t\t<span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"lodash-reference-document\"><a href=\"#lodash-reference-document\" class=\"headerlink\" title=\"lodash reference document\"></a><a href=\"https://www.npmjs.com/package/lodash\">lodash</a> reference <a href=\"https://lodash.com/docs#assignIn\">document</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// npm install lodash</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> _ = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;lodash&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 反轉陣列</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> array = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\">_.reverse(array);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(array)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &#123; &#x27;a&#x27;: 0 &#125; 被 new Foo 蓋過, 再被 new Bar蓋過</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.a = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Bar</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.c = <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Foo.prototype.b = <span class=\"number\">2</span>;</span><br><span class=\"line\">Bar.prototype.d = <span class=\"number\">4</span>;</span><br><span class=\"line\">_.assign(&#123; <span class=\"string\">&#x27;a&#x27;</span>: <span class=\"number\">0</span> &#125;, <span class=\"keyword\">new</span> Foo, <span class=\"keyword\">new</span> Bar);</span><br><span class=\"line\"><span class=\"comment\">// =&gt; &#123; &#x27;a&#x27;: 1, &#x27;c&#x27;: 3 &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"left-pad\"><a href=\"#left-pad\" class=\"headerlink\" title=\"left-pad\"></a><a href=\"https://www.npmjs.com/package/left-pad\">left-pad</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> leftPad = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;left-pad&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// insert 0 before number </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(leftPad(<span class=\"number\">123</span>, <span class=\"number\">10</span>, <span class=\"string\">&#x27;0&#x27;</span>))</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Request-Simplified-HTTP-client\"><a href=\"#Request-Simplified-HTTP-client\" class=\"headerlink\" title=\"Request - Simplified HTTP client\"></a><a href=\"https://www.npmjs.com/package/request\">Request</a> - Simplified HTTP client</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install request</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>);</span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://github.com/hot5656/AboutMe&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(<span class=\"string\">&#x27;error:&#x27;</span>, error); </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;statusCode:&#x27;</span>, response &amp;&amp; response.statusCode); </span><br><span class=\"line\">  <span class=\"comment\">// console.log(&#x27;body:&#x27;, body); </span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node request_1.js</span><br><span class=\"line\">error: null</span><br><span class=\"line\">statusCode: 200</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"axios-Promise-based-HTTP-client-for-the-browser-and-node-js\"><a href=\"#axios-Promise-based-HTTP-client-for-the-browser-and-node-js\" class=\"headerlink\" title=\"axios - Promise based HTTP client for the browser and node.js\"></a><a href=\"https://www.npmjs.com/package/axios\">axios</a> - Promise based HTTP client for the browser and node.js</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install axios</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"NODE-ENV-dotenv-環境變數集中在-env-檔\"><a href=\"#NODE-ENV-dotenv-環境變數集中在-env-檔\" class=\"headerlink\" title=\"NODE_ENV [dotenv] - 環境變數集中在 env 檔\"></a>NODE_ENV [dotenv] - 環境變數集中在 env 檔</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install dotenv --save</span><br></pre></td></tr></table></figure>\n\n<p>.env</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CHRIS&#x3D;chris</span><br><span class=\"line\">DB_HOST&#x3D;DB_HOST</span><br><span class=\"line\">DB_PORT&#x3D;DB_PORT</span><br><span class=\"line\">DB_USER&#x3D;DB_USER</span><br><span class=\"line\">DB_PASS&#x3D;DB_PASS</span><br></pre></td></tr></table></figure>\n\n<p>app.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&#x27;dotenv&#x27;</span>).config();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(process.env.CHRIS); <span class=\"comment\">//chris</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(process.env[<span class=\"string\">&quot;DB_HOST&quot;</span>]); <span class=\"comment\">//DB_HOST</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(process.env[<span class=\"string\">&quot;DB_PORT&quot;</span>]); <span class=\"comment\">//DB_PORT</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(process.env[<span class=\"string\">&quot;DB_USER&quot;</span>]); <span class=\"comment\">//DB_USER</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(process.env[<span class=\"string\">&quot;DB_PASS&quot;</span>]); <span class=\"comment\">//DB_PASS</span></span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"jest\"><a href=\"#jest\" class=\"headerlink\" title=\"jest\"></a>jest</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yarn add --dev jest</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"babel-node\"><a href=\"#babel-node\" class=\"headerlink\" title=\"babel-node\"></a><a href=\"https://babeljs.io/docs/en/babel-node\">babel-node</a></h4><ol>\n<li>模擬 ES6 執行</li>\n<li>效率不好僅測試時使用</li>\n<li>使用 import 也是要設 “type”: “module”</li>\n</ol>\n<h5 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install --save-dev @babel/core @babel/node</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"add-config-file-babelrc\"><a href=\"#add-config-file-babelrc\" class=\"headerlink\" title=\"add config file - .babelrc\"></a>add config file - .babelrc</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;presents&quot;</span>: [<span class=\"string\">&quot;Qbabel/preset-env&quot;</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"test\"><a href=\"#test\" class=\"headerlink\" title=\"test\"></a>test</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> PI = <span class=\"number\">3.14</span> </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// test1.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;add, PI&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils.js&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(add(<span class=\"number\">3</span>, <span class=\"number\">5</span>), PI)\t\t<span class=\"comment\">// 8 3.14</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ npx babel-node test1.js</span><br><span class=\"line\">8 3.14</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"request-debug-monitor-HTTP-S-requests-performed-by-the-request-module\"><a href=\"#request-debug-monitor-HTTP-S-requests-performed-by-the-request-module\" class=\"headerlink\" title=\"request-debug : monitor HTTP(S) requests performed by the request module\"></a><a href=\"https://www.npmjs.com/package/request-debug\">request-debug</a> : monitor HTTP(S) requests performed by the request module</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// npm install request-debug</span></span><br><span class=\"line\"><span class=\"comment\">// challeng-2.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 只要加入這一行,就可以 monitor</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&#x27;request-debug&#x27;</span>)(request)</span><br><span class=\"line\"></span><br><span class=\"line\">request(<span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v3/hello&#x27;</span>,</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, response, body</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(body)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node challeng-2.js</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  request: &#123;</span><br><span class=\"line\">    debugId: 1,</span><br><span class=\"line\">    uri: <span class=\"string\">&#x27;https://lidemy-http-challenge.herokuapp.com/api/v3/hello&#x27;</span>,</span><br><span class=\"line\">    method: <span class=\"string\">&#x27;GET&#x27;</span>,</span><br><span class=\"line\">    headers: &#123; host: <span class=\"string\">&#x27;lidemy-http-challenge.herokuapp.com&#x27;</span> &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  response: &#123;</span><br><span class=\"line\">    debugId: 1,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      server: <span class=\"string\">&#x27;Cowboy&#x27;</span>,</span><br><span class=\"line\">      connection: <span class=\"string\">&#x27;close&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;x-powered-by&#x27;</span>: <span class=\"string\">&#x27;Express&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;text/plain; charset=utf-8&#x27;</span>,</span><br><span class=\"line\">      date: <span class=\"string\">&#x27;Thu, 13 May 2021 07:27:38 GMT&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;content-length&#x27;</span>: <span class=\"string\">&#x27;93&#x27;</span>,</span><br><span class=\"line\">      via: <span class=\"string\">&#x27;1.1 vegur&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    statusCode: 200,</span><br><span class=\"line\">    body: <span class=\"string\">&#x27;\\n您的 origin 不被允許存取此資源，請確認您是從 lidemy.com 送出 request。\\n&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">您的 origin 不被允許存取此資源，請確認您是從 lidemy.com 送出 request。</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"dotenv-env-設定\"><a href=\"#dotenv-env-設定\" class=\"headerlink\" title=\"dotenv : env 設定\"></a>dotenv : env 設定</h4><p>.env</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">PORT=<span class=\"number\">8</span></span><br></pre></td></tr></table></figure>\n\n<p>*.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"nodemon-node-修改自動重啟\"><a href=\"#nodemon-node-修改自動重啟\" class=\"headerlink\" title=\"nodemon : node 修改自動重啟\"></a>nodemon : node 修改自動重啟</h4><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">  &quot;start&quot;: &quot;nodemon app.js&quot;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"uuid-create-uuid-Universally-Unique-Identifier-通用唯一辨識碼\"><a href=\"#uuid-create-uuid-Universally-Unique-Identifier-通用唯一辨識碼\" class=\"headerlink\" title=\"uuid : create uuid(Universally Unique Identifier) 通用唯一辨識碼\"></a>uuid : create uuid(Universally Unique Identifier) 通用唯一辨識碼</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// v4 uuid </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; v4 <span class=\"keyword\">as</span> uuidv4 &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;uuid&#x27;</span>;</span><br><span class=\"line\">uuidv4(); <span class=\"comment\">// ⇨ &#x27;9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// v1 uuid</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"attr\">v1</span>: uuidv1 &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;uuid&quot;</span>);</span><br><span class=\"line\">salt = uuidv1();</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">``</span> </span><br><span class=\"line\"></span><br><span class=\"line\">#### body-parser : Node.js body parsing middleware.</span><br><span class=\"line\"><span class=\"string\">``</span><span class=\"string\">` js</span></span><br><span class=\"line\"><span class=\"string\">const bodyParser = require(&quot;body-parser&quot;);</span></span><br><span class=\"line\"><span class=\"string\">app.use(bodyParser.json());</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">// 可取出 req.body, 其他 middleware 也才可以 check body</span></span><br><span class=\"line\"><span class=\"string\">// (req, res) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">// console.log(req.body)</span></span><br><span class=\"line\"><span class=\"string\">//  &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"morgan-HTTP-request-logger-middleware-for-node-js\"><a href=\"#morgan-HTTP-request-logger-middleware-for-node-js\" class=\"headerlink\" title=\"morgan : HTTP request logger middleware for node.js\"></a>morgan : HTTP request logger middleware for node.js</h4><p>print log in console for debug</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// dev - status 會 show 不同顏色</span></span><br><span class=\"line\"><span class=\"comment\">// :method :url :status :response-time ms - :res[content-length]</span></span><br><span class=\"line\">POST /api/signup <span class=\"number\">400</span> <span class=\"number\">101.068</span> ms - <span class=\"number\">86</span></span><br><span class=\"line\"><span class=\"comment\">// common - start log </span></span><br><span class=\"line\"><span class=\"comment\">// :remote-addr - :remote-user [:date[clf]] &quot;:method :url HTTP/:http-version&quot; :status :res[content-length]</span></span><br><span class=\"line\">::<span class=\"number\">1</span> - - [<span class=\"number\">08</span>/Nov/<span class=\"number\">2021</span>:<span class=\"number\">09</span>:<span class=\"number\">16</span>:<span class=\"number\">21</span> +<span class=\"number\">0000</span>] <span class=\"string\">&quot;POST /api/signup HTTP/1.1&quot;</span> <span class=\"number\">400</span> <span class=\"number\">86</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"cookie-express-有提供-不需要用cookie-parser\"><a href=\"#cookie-express-有提供-不需要用cookie-parser\" class=\"headerlink\" title=\"cookie : express 有提供,不需要用cookie-parser :\"></a>cookie : <a href=\"http://expressjs.com/zh-tw/4x/api.html#res.cookie\">express</a> 有提供,不需要用cookie-parser :</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// set cookie</span></span><br><span class=\"line\">res.cookie(<span class=\"string\">&quot;t&quot;</span>, token, &#123; <span class=\"attr\">expire</span>: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() + <span class=\"number\">9999</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// clear cookie</span></span><br><span class=\"line\">res.clearCookie(<span class=\"string\">&quot;t&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"x65-120-112-x72-101-115-x73-45-118-x61-108-x69-100-97-x74-x6f-114-64-x35-46-51-46-49-express-js-validate-middlewares\"><a href=\"#x65-120-112-x72-101-115-x73-45-118-x61-108-x69-100-97-x74-x6f-114-64-x35-46-51-46-49-express-js-validate-middlewares\" class=\"headerlink\" title=\"&#x65;&#120;&#112;&#x72;&#101;&#115;&#x73;&#45;&#118;&#x61;&#108;&#x69;&#100;&#97;&#x74;&#x6f;&#114;&#64;&#x35;&#46;&#51;&#46;&#49; :  express.js validate middlewares\"></a><a href=\"mailto:&#x65;&#120;&#112;&#x72;&#101;&#115;&#x73;&#45;&#118;&#x61;&#108;&#x69;&#100;&#97;&#x74;&#x6f;&#114;&#64;&#x35;&#46;&#51;&#46;&#49;\">&#x65;&#120;&#112;&#x72;&#101;&#115;&#x73;&#45;&#118;&#x61;&#108;&#x69;&#100;&#97;&#x74;&#x6f;&#114;&#64;&#x35;&#46;&#51;&#46;&#49;</a> :  express.js validate middlewares</h4><ul>\n<li>6.x 會有 “typeError: express Validator is not a function” error </li>\n<li>document 參考 6.x <a href=\"https://express-validator.github.io/docs/validation-chain-api.html#notempty\">express-validator</a></li>\n<li>./app.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"comment\">// express-validator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expressValidator = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express-validator&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\">app.use(expressValidator()); <span class=\"comment\">// express-validator</span></span><br></pre></td></tr></table></figure></li>\n<li>./routes/user.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/user.js</span></span><br><span class=\"line\"><span class=\"comment\">// valid</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userSignupValidator &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../validator/index&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/signup&quot;</span>, userSignupValidator, signup);</span><br></pre></td></tr></table></figure></li>\n<li>./validator/index.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./validator/index.js</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.userSignupValidator = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.check(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;Name is required&quot;</span>).notEmpty();</span><br><span class=\"line\">  req</span><br><span class=\"line\">    .check(<span class=\"string\">&quot;email&quot;</span>, <span class=\"string\">&quot;Email must be between 3 to 32 characters&quot;</span>)</span><br><span class=\"line\">    .matches(<span class=\"regexp\">/.+\\@.+\\..+/</span>)</span><br><span class=\"line\">    .withMessage(<span class=\"string\">&quot;Email must contain @&quot;</span>)</span><br><span class=\"line\">    .isLength(&#123;</span><br><span class=\"line\">      min: <span class=\"number\">4</span>,</span><br><span class=\"line\">      max: <span class=\"number\">32</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  req.check(<span class=\"string\">&quot;password&quot;</span>, <span class=\"string\">&quot;Password is required&quot;</span>).notEmpty();</span><br><span class=\"line\">  req</span><br><span class=\"line\">    .check(<span class=\"string\">&quot;password&quot;</span>)</span><br><span class=\"line\">    .isLength(&#123; <span class=\"attr\">min</span>: <span class=\"number\">6</span> &#125;)</span><br><span class=\"line\">    .withMessage(<span class=\"string\">&quot;password must conatin at least 6 characters&quot;</span>)</span><br><span class=\"line\">    .matches(<span class=\"regexp\">/\\d/</span>)</span><br><span class=\"line\">    .withMessage(<span class=\"string\">&quot;Password must contain a number&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> errors = req.validationErrors();</span><br><span class=\"line\">  <span class=\"comment\">// console.log(errors);</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (errors) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> firstError = errors.map(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> error.msg)[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123; <span class=\"attr\">error</span>: firstError &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"express-jwt-驗證-JWT\"><a href=\"#express-jwt-驗證-JWT\" class=\"headerlink\" title=\"express-jwt : 驗證 JWT\"></a>express-jwt : 驗證 JWT</h4><h4 id=\"jsonwebtoken-產生-JWT-token\"><a href=\"#jsonwebtoken-產生-JWT-token\" class=\"headerlink\" title=\"jsonwebtoken :  產生 JWT token\"></a>jsonwebtoken :  產生 JWT token</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> jwt = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;jsonwebtoken&quot;</span>); <span class=\"comment\">// to generate signed token</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> token = jwt.sign(&#123; <span class=\"attr\">id</span>: user._id &#125;, process.env.JWT_SECRET);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"crypto-node-js-提供-加密編碼\"><a href=\"#crypto-node-js-提供-加密編碼\" class=\"headerlink\" title=\"crypto : node.js 提供,加密編碼\"></a><a href=\"https://nodejs.org/api/crypto.html#crypto-module-methods-and-properties\">crypto</a> : node.js 提供,加密編碼</h4><h4 id=\"formidable-parsing-data-特別是有關-file\"><a href=\"#formidable-parsing-data-特別是有關-file\" class=\"headerlink\" title=\"formidable : parsing data, 特別是有關 file\"></a><a href=\"https://www.npmjs.com/package/formidable\">formidable</a> : parsing data, 特別是有關 file</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;formidable&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ......</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"cors-enable-cors\"><a href=\"#cors-enable-cors\" class=\"headerlink\" title=\"cors : enable cors\"></a><a href=\"https://www.npmjs.com/package/cors\">cors</a> : enable cors</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Simple Usage (Enable All CORS Requests)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;cors&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express()</span><br><span class=\"line\"> </span><br><span class=\"line\">app.use(cors())</span><br><span class=\"line\"> </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/products/:id&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  res.json(&#123;<span class=\"attr\">msg</span>: <span class=\"string\">&#x27;This is CORS-enabled for all origins!&#x27;</span>&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"> </span><br><span class=\"line\">app.listen(<span class=\"number\">80</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;CORS-enabled web server listening on port 80&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Enable CORS for a Single Route</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;cors&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express()</span><br><span class=\"line\"> </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/products/:id&#x27;</span>, cors(), <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  res.json(&#123;<span class=\"attr\">msg</span>: <span class=\"string\">&#x27;This is CORS-enabled for a Single Route&#x27;</span>&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"> </span><br><span class=\"line\">app.listen(<span class=\"number\">80</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;CORS-enabled web server listening on port 80&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"query-string-query-string-處理\"><a href=\"#query-string-query-string-處理\" class=\"headerlink\" title=\"query-string:query string 處理\"></a><a href=\"https://www.npmjs.com/package/query-string\">query-string</a>:query string 處理</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> queryString = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;query-string&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(location.search);</span><br><span class=\"line\"><span class=\"comment\">//=&gt; &#x27;?foo=bar&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> parsed = queryString.parse(location.search);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(parsed);</span><br><span class=\"line\"><span class=\"comment\">//=&gt; &#123;foo: &#x27;bar&#x27;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(location.hash);</span><br><span class=\"line\"><span class=\"comment\">//=&gt; &#x27;#token=bada55cafe&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> parsedHash = queryString.parse(location.hash);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(parsedHash);</span><br><span class=\"line\"><span class=\"comment\">//=&gt; &#123;token: &#x27;bada55cafe&#x27;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">parsed.foo = <span class=\"string\">&#x27;unicorn&#x27;</span>;</span><br><span class=\"line\">parsed.ilike = <span class=\"string\">&#x27;pizza&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> stringified = queryString.stringify(parsed);</span><br><span class=\"line\"><span class=\"comment\">//=&gt; &#x27;foo=unicorn&amp;ilike=pizza&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"moment-script-data-library\"><a href=\"#moment-script-data-library\" class=\"headerlink\" title=\"moment: script data library\"></a><a href=\"https://www.npmjs.com/package/moment\">moment</a>: script data library</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// show 距現在多久</span></span><br><span class=\"line\">moment(product.createdAt).fromNow() <span class=\"comment\">// 15 days ago</span></span><br><span class=\"line\">moment([<span class=\"number\">2007</span>, <span class=\"number\">0</span>, <span class=\"number\">29</span>]).fromNow(); <span class=\"comment\">// 4 years ago</span></span><br><span class=\"line\"><span class=\"comment\">// display </span></span><br><span class=\"line\">moment().format();                                <span class=\"comment\">// &quot;2014-09-08T08:02:17-05:00&quot; (ISO 8601, no fractional seconds)</span></span><br><span class=\"line\">moment().format(<span class=\"string\">&quot;dddd, MMMM Do YYYY, h:mm:ss a&quot;</span>); <span class=\"comment\">// &quot;Sunday, February 14th 2010, 3:25:50 pm&quot;</span></span><br><span class=\"line\">moment().format(<span class=\"string\">&quot;ddd, hA&quot;</span>);                       <span class=\"comment\">// &quot;Sun, 3PM&quot;</span></span><br><span class=\"line\">moment().format(<span class=\"string\">&quot;[Today is] dddd&quot;</span>);               <span class=\"comment\">// &quot;Today is Sunday&quot;</span></span><br><span class=\"line\">moment(<span class=\"string\">&#x27;20.07.2018 09:19&#x27;</span>, moment.defaultFormat).toDate() <span class=\"comment\">// Fri Jul 20 2018 09:19:00 GMT+0300</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"braintree-Braintree-Node-library\"><a href=\"#braintree-Braintree-Node-library\" class=\"headerlink\" title=\"braintree : Braintree Node library\"></a><a href=\"https://www.npmjs.com/package/braintree\">braintree</a> : Braintree Node library</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> braintree = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;braintree&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> gateway = <span class=\"keyword\">new</span> braintree.BraintreeGateway(&#123;</span><br><span class=\"line\">  environment: braintree.Environment.Sandbox,</span><br><span class=\"line\">  merchantId: <span class=\"string\">&#x27;your_merchant_id&#x27;</span>,</span><br><span class=\"line\">  publicKey: <span class=\"string\">&#x27;your_public_key&#x27;</span>,</span><br><span class=\"line\">  privateKey: <span class=\"string\">&#x27;your_private_key&#x27;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gateway.transaction.sale(&#123;</span><br><span class=\"line\">  amount: <span class=\"string\">&#x27;5.00&#x27;</span>,</span><br><span class=\"line\">  paymentMethodNonce: <span class=\"string\">&#x27;nonce-from-the-client&#x27;</span>,</span><br><span class=\"line\">  options: &#123;</span><br><span class=\"line\">    submitForSettlement: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (result.success) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Transaction ID: &#x27;</span> + result.transaction.id);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(result.message);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"npm-config\"><a href=\"#npm-config\" class=\"headerlink\" title=\"npm config\"></a>npm config</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># list config</span></span><br><span class=\"line\">npm config list</span><br><span class=\"line\"><span class=\"comment\"># set config </span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> proxy http://180.232.123.251:3128</span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> https-proxy http://180.232.123.251:3128 </span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> registry https://registry.npmjs.org/</span><br><span class=\"line\"><span class=\"comment\"># get config</span></span><br><span class=\"line\">npm config get proxy</span><br><span class=\"line\">npm config get https-proxy</span><br><span class=\"line\">npm config get registry</span><br><span class=\"line\"><span class=\"comment\"># delete config</span></span><br><span class=\"line\">npm config delete proxy </span><br><span class=\"line\">npm config delete https-proxy </span><br><span class=\"line\">npm config delete registry</span><br><span class=\"line\"></span><br><span class=\"line\">npm install </span><br></pre></td></tr></table></figure>\n","categories":["Front End"],"tags":["node.js","npm"]},{"title":"command line 指令","url":"/2021/04/12/os-1/","content":"<h3 id=\"command\"><a href=\"#command\" class=\"headerlink\" title=\"command\"></a>command</h3><h4 id=\"nslookup-查詢-IP-address\"><a href=\"#nslookup-查詢-IP-address\" class=\"headerlink\" title=\"nslookup : 查詢 IP address\"></a>nslookup : 查詢 IP address</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># local server IP</span></span><br><span class=\"line\">nslookup</span><br><span class=\"line\"><span class=\"comment\"># 查某一 host IP address</span></span><br><span class=\"line\">nslookup google.com</span><br><span class=\"line\"><span class=\"comment\"># 查  hot5656.website from 8.8.8.8(google DNS)</span></span><br><span class=\"line\">hot5656.website 8.8.8.8</span><br><span class=\"line\">\t伺服器:  dns.google</span><br><span class=\"line\">\tAddress:  8.8.8.8</span><br><span class=\"line\">\t未經授權的回答:</span><br><span class=\"line\">\t名稱:    hot5656.website</span><br><span class=\"line\">\tAddress:  54.168.160.39</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"ls-列出檔案目錄\"><a href=\"#ls-列出檔案目錄\" class=\"headerlink\" title=\"ls : 列出檔案目錄\"></a>ls : 列出檔案目錄</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 包含隱藏檔: ./, ../, .gitignore</span></span><br><span class=\"line\">ls -a</span><br><span class=\"line\"><span class=\"comment\"># 詳細資料</span></span><br><span class=\"line\">ls -l</span><br><span class=\"line\"><span class=\"comment\"># 包含子目錄</span></span><br><span class=\"line\">ls -R </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"clear-清除畫面\"><a href=\"#clear-清除畫面\" class=\"headerlink\" title=\"clear : 清除畫面\"></a>clear : 清除畫面</h4><h4 id=\"cd-切換目錄\"><a href=\"#cd-切換目錄\" class=\"headerlink\" title=\"cd : 切換目錄\"></a>cd : 切換目錄</h4><h4 id=\"mkdir-新增目錄\"><a href=\"#mkdir-新增目錄\" class=\"headerlink\" title=\"mkdir : 新增目錄\"></a>mkdir : 新增目錄</h4><h4 id=\"cp-copy-檔案-目錄\"><a href=\"#cp-copy-檔案-目錄\" class=\"headerlink\" title=\"cp : copy 檔案,目錄\"></a>cp : copy 檔案,目錄</h4><h4 id=\"mv-更改檔名或移動檔案位置\"><a href=\"#mv-更改檔名或移動檔案位置\" class=\"headerlink\" title=\"mv : 更改檔名或移動檔案位置\"></a>mv : 更改檔名或移動檔案位置</h4><h4 id=\"rm-刪除檔案-f-可刪除目錄\"><a href=\"#rm-刪除檔案-f-可刪除目錄\" class=\"headerlink\" title=\"rm : 刪除檔案(-f 可刪除目錄)\"></a>rm : 刪除檔案(-f 可刪除目錄)</h4><h4 id=\"rmdir-刪除目錄\"><a href=\"#rmdir-刪除目錄\" class=\"headerlink\" title=\"rmdir : 刪除目錄\"></a>rmdir : 刪除目錄</h4><h4 id=\"ping-檢查某一-IP-的-device-是否存在\"><a href=\"#ping-檢查某一-IP-的-device-是否存在\" class=\"headerlink\" title=\"ping : 檢查某一 IP 的 device 是否存在\"></a>ping : 檢查某一 IP 的 device 是否存在</h4><h4 id=\"date-列出日期時間\"><a href=\"#date-列出日期時間\" class=\"headerlink\" title=\"date : 列出日期時間\"></a>date : 列出日期時間</h4><h4 id=\"cat-將檔案內容列出來\"><a href=\"#cat-將檔案內容列出來\" class=\"headerlink\" title=\"cat : 將檔案內容列出來\"></a>cat : 將檔案內容列出來</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 將二個檔案合併成一個檔案</span></span><br><span class=\"line\">cat file1 file2 &gt; file3</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"less-檔案分頁顯示\"><a href=\"#less-檔案分頁顯示\" class=\"headerlink\" title=\"less : 檔案分頁顯示\"></a>less : 檔案分頁顯示</h4><h4 id=\"touch-更新檔案時間或產生檔案\"><a href=\"#touch-更新檔案時間或產生檔案\" class=\"headerlink\" title=\"touch : 更新檔案時間或產生檔案\"></a>touch : 更新檔案時間或產生檔案</h4><h4 id=\"echo-顯示內容\"><a href=\"#echo-顯示內容\" class=\"headerlink\" title=\"echo : 顯示內容\"></a>echo : 顯示內容</h4><h4 id=\"man-command-help\"><a href=\"#man-command-help\" class=\"headerlink\" title=\"man : command help\"></a>man : command help</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">man ls</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"head-前面幾行\"><a href=\"#head-前面幾行\" class=\"headerlink\" title=\"head : 前面幾行\"></a>head : 前面幾行</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ ls -l | head -n 5</span><br><span class=\"line\">total 285</span><br><span class=\"line\">-rw-r--r-- 1 win10 197121      0 三月 27 15:29 _config.landscape.yml</span><br><span class=\"line\">-rw-r--r-- 1 win10 197121  28728 三月 27 16:29 _config.next.yml</span><br><span class=\"line\">-rw-r--r-- 1 win10 197121   2623 三月 27 16:01 _config.yml</span><br><span class=\"line\">-rw-r--r-- 1 win10 197121  65214 三月 27 16:56 db.json</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"tail-最後幾行\"><a href=\"#tail-最後幾行\" class=\"headerlink\" title=\"tail : 最後幾行\"></a>tail : 最後幾行</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ ls -l | tail -n 5</span><br><span class=\"line\">-rw-r--r-- 1 win10 197121    749 四月 16 22:32 pp.txt</span><br><span class=\"line\">drwxr-xr-x 1 win10 197121      0 三月 27 16:39 public/</span><br><span class=\"line\">drwxr-xr-x 1 win10 197121      0 三月 27 15:29 scaffolds/</span><br><span class=\"line\">drwxr-xr-x 1 win10 197121      0 三月 27 16:24 <span class=\"built_in\">source</span>/</span><br><span class=\"line\">drwxr-xr-x 1 win10 197121      0 三月 27 15:29 themes/</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"cut-擷取字元\"><a href=\"#cut-擷取字元\" class=\"headerlink\" title=\"cut : 擷取字元\"></a>cut : 擷取字元</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 字元 2-5</span></span><br><span class=\"line\">$ ls -l | tail -n 5 | cut -c 2-5</span><br><span class=\"line\">rw-r</span><br><span class=\"line\">rwxr</span><br><span class=\"line\">rwxr</span><br><span class=\"line\">rwxr</span><br><span class=\"line\">rwxr</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"sed-stream-editor-串流編輯\"><a href=\"#sed-stream-editor-串流編輯\" class=\"headerlink\" title=\"sed(stream editor) : 串流編輯\"></a>sed(stream editor) : 串流編輯</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># example.txt</span></span><br><span class=\"line\">$ cat example.txt</span><br><span class=\"line\">I have a key.</span><br><span class=\"line\">I lost my way.</span><br><span class=\"line\">I have a book.</span><br><span class=\"line\">I have have a monkey.</span><br><span class=\"line\"><span class=\"comment\"># s:取代, 在第一次出現的位置,把 have 這個字取代為 had, /2 表 第二次出現的位置</span></span><br><span class=\"line\"><span class=\"comment\"># 對單行, 只顯示未修改原檔案</span></span><br><span class=\"line\">sed <span class=\"string\">&#x27;s/have/had/1&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># 不顯示</span></span><br><span class=\"line\">sed -n <span class=\"string\">&#x27;s/have/had/2&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># 只顯示有修改的行數 </span></span><br><span class=\"line\">sed -n <span class=\"string\">&#x27;s/have/had/2p&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># sed_command.txt</span></span><br><span class=\"line\">$ cat sed_command.txt</span><br><span class=\"line\">s/key/keyboard/</span><br><span class=\"line\">s/have/had/</span><br><span class=\"line\"><span class=\"comment\"># -f(讀取檔案手稿) 把控制程序放入檔案</span></span><br><span class=\"line\">sed -f sed_command.txt example.txt</span><br><span class=\"line\"><span class=\"comment\"># -i (修改檔案)</span></span><br><span class=\"line\">$ sed -i <span class=\"string\">&#x27;s/way/pen/1&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># a(新增)</span></span><br><span class=\"line\"><span class=\"comment\"># 第一行後加一行</span></span><br><span class=\"line\">sed <span class=\"string\">&#x27;1a I add after line 1...&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># 1-4行後都加一行</span></span><br><span class=\"line\">sed <span class=\"string\">&#x27;1,4a I add after a line...&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># c (替換)</span></span><br><span class=\"line\"><span class=\"comment\"># 更換第3行</span></span><br><span class=\"line\">sed <span class=\"string\">&#x27;3c I change line 3...&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># d (刪除)</span></span><br><span class=\"line\"><span class=\"comment\"># 刪除 2-4 行</span></span><br><span class=\"line\">sed <span class=\"string\">&#x27;2,4d&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># 刪除含有 pen 這一行</span></span><br><span class=\"line\">sed <span class=\"string\">&#x27;/pen/d&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># i(新增)</span></span><br><span class=\"line\"><span class=\"comment\"># 第一行前加一行</span></span><br><span class=\"line\">sed <span class=\"string\">&#x27;1i I add before line 1...&#x27;</span> example.txt</span><br><span class=\"line\"><span class=\"comment\"># 常用旗標</span></span><br><span class=\"line\">[0-9]：數字表示只搜尋或者取代第 N 個數字所指示的那個樣板字串。</span><br><span class=\"line\">g：全部取代</span><br><span class=\"line\">I：忽略大小寫</span><br><span class=\"line\">w：把符合的結果寫入檔案。和加了 -n 選項搭配 p 旗標的結果一樣。此旗標如果有和其它旗標搭配使用，必須放在最後面。</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"awk-資料處理\"><a href=\"#awk-資料處理\" class=\"headerlink\" title=\"awk : 資料處理\"></a>awk : 資料處理</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 列出第一欄位和第三欄位,中間以 tab 分開</span></span><br><span class=\"line\">ls -l | head -n 5 | awk <span class=\"string\">&#x27;&#123;print $1 &quot;\\t&quot; $3&#125;&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 列出檔案大小&gt;0</span></span><br><span class=\"line\">ls -l | awk  <span class=\"string\">&#x27;$5 &gt; 0 &#123;print $5 &quot;\\t&quot; $9&#125;&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 以 : 來作為欄位的分隔</span></span><br><span class=\"line\"><span class=\"comment\"># BEGIN 第一行才有效</span></span><br><span class=\"line\"><span class=\"comment\"># awk &#x27;BEGIN &#123;FS=&quot;:&quot;&#125; $3 &lt; 10 &#123;print $1 &quot;\\t &quot; $3&#125;&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># pay.txt</span></span><br><span class=\"line\">Name    1st     2nd     3th</span><br><span class=\"line\">VBird   23000   24000   25000</span><br><span class=\"line\">DMTsai  21000   20000   23000</span><br><span class=\"line\">Bird2   43000   42000   41000</span><br><span class=\"line\"><span class=\"comment\"># 計算 total</span></span><br><span class=\"line\"><span class=\"comment\"># 所有 awk 的動作，亦即在 &#123;&#125; 內的動作，如果有需要多個指令輔助時，可利用分號『;』間隔，</span></span><br><span class=\"line\"><span class=\"comment\"># 或者直接以 [Enter] 按鍵來隔開每個指令</span></span><br><span class=\"line\">cat pay.txt | \\</span><br><span class=\"line\">&gt; awk <span class=\"string\">&#x27;NR==1&#123;printf &quot;%10s %10s %10s %10s %10s\\n&quot;,$1,$2,$3,$4,&quot;Total&quot; &#125;</span></span><br><span class=\"line\"><span class=\"string\">&gt; NR&gt;=2&#123;total = $2 + $3 + $4</span></span><br><span class=\"line\"><span class=\"string\">&gt; printf &quot;%10s %10d %10d %10d %10.2f\\n&quot;, $1, $2, $3, $4, total&#125;&#x27;</span></span><br><span class=\"line\">      Name        1st        2nd        3th      Total</span><br><span class=\"line\">     VBird      23000      24000      25000   72000.00</span><br><span class=\"line\">    DMTsai      21000      20000      23000   64000.00</span><br><span class=\"line\">     Bird2      43000      42000      41000  126000.00</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"wget-檔案下載\"><a href=\"#wget-檔案下載\" class=\"headerlink\" title=\"wget : 檔案下載\"></a>wget : 檔案下載</h4><p>download <a href=\"https://eternallybored.org/misc/wget/\">Windows Wget</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下載檔案</span></span><br><span class=\"line\">wget.exe https://hot5656.github.io/2021/04/14/git-5/ic1.png</span><br><span class=\"line\"><span class=\"comment\"># 下載網頁</span></span><br><span class=\"line\">wget.exe https://www.google.com/</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"curl-傳輸資料命令-API\"><a href=\"#curl-傳輸資料命令-API\" class=\"headerlink\" title=\"curl : 傳輸資料命令(API)\"></a>curl : 傳輸資料命令(API)</h4><p>download <a href=\"https://curl.se/download.html\">curl</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 透過 API query 資料 </span></span><br><span class=\"line\">curl.exe https://api.github.com/users/hot5656</span><br><span class=\"line\"><span class=\"comment\"># 列出一些溝通資訊</span></span><br><span class=\"line\">curl.exe -I https://api.github.com/users/hot5656</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"grep-從串流資料或檔案中，篩選出想要尋找的資料\"><a href=\"#grep-從串流資料或檔案中，篩選出想要尋找的資料\" class=\"headerlink\" title=\"grep : 從串流資料或檔案中，篩選出想要尋找的資料\"></a>grep : 從串流資料或檔案中，篩選出想要尋找的資料</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat pp.txt | grep hexo</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"redirect\"><a href=\"#redirect\" class=\"headerlink\" title=\"redirect\"></a>redirect</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 存入檔案</span></span><br><span class=\"line\">ls &gt; l1</span><br><span class=\"line\"><span class=\"comment\"># 附加於檔案</span></span><br><span class=\"line\">ls &gt;&gt; l1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"pipe\"><a href=\"#pipe\" class=\"headerlink\" title=\"pipe\"></a>pipe</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat pp.txt | grep hexo</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"建立軟連結-目錄僅能用軟連結\"><a href=\"#建立軟連結-目錄僅能用軟連結\" class=\"headerlink\" title=\"建立軟連結 - 目錄僅能用軟連結\"></a>建立軟連結 - 目錄僅能用軟連結</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># &#x2F;var&#x2F;www map to .&#x2F;www</span><br><span class=\"line\">ln -s &#x2F;var&#x2F;www .&#x2F;www</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"service-control\"><a href=\"#service-control\" class=\"headerlink\" title=\"service control\"></a>service control</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo service apache2 start</span><br><span class=\"line\">sudo service apache2 stop</span><br><span class=\"line\">sudo service apache2 restart</span><br><span class=\"line\"><span class=\"comment\"># 第二種方式</span></span><br><span class=\"line\">sudo systemctl start mysql</span><br><span class=\"line\">sudo systemctl stop mysql</span><br><span class=\"line\">sudo systemctl restart mysql</span><br><span class=\"line\"><span class=\"comment\"># 第三種方式</span></span><br><span class=\"line\">sudo /etc/init.d/mysql stop</span><br><span class=\"line\">sudo /etc/init.d/mysql start</span><br><span class=\"line\">sudo /etc/init.d/mysql restart</span><br><span class=\"line\"><span class=\"comment\"># show service status</span></span><br><span class=\"line\">systemctl status mysql</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"netstat-來查詢網路相關資訊\"><a href=\"#netstat-來查詢網路相關資訊\" class=\"headerlink\" title=\"netstat -來查詢網路相關資訊\"></a>netstat -來查詢網路相關資訊</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 列出所有連接埠</span></span><br><span class=\"line\">netstat -a</span><br><span class=\"line\"><span class=\"comment\"># 列出 TCP port</span></span><br><span class=\"line\">netstat -at</span><br><span class=\"line\"><span class=\"comment\"># 列出 UDP port</span></span><br><span class=\"line\">netstat -au</span><br><span class=\"line\"><span class=\"comment\"># 列出網路介面資訊</span></span><br><span class=\"line\">netstat -ie</span><br><span class=\"line\"><span class=\"comment\"># other </span></span><br><span class=\"line\">sudo netstat -ltnp</span><br><span class=\"line\">sudo netstat -lptu</span><br><span class=\"line\">sudo netstat -tulpn</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"apt\"><a href=\"#apt\" class=\"headerlink\" title=\"apt\"></a>apt</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># list 已安裝</span></span><br><span class=\"line\">apt list --installed | grep mysql</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"chmod-and-chown\"><a href=\"#chmod-and-chown\" class=\"headerlink\" title=\"chmod and chown\"></a>chmod and chown</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo chmod -R 775 /var/www</span><br><span class=\"line\">sudo chown -R ubuntu:ubuntu /var/www</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"more\"><a href=\"#more\" class=\"headerlink\" title=\"more\"></a>more</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-m  顯示類似more命令的百分比</span><br><span class=\"line\">-N  顯示每行的行號</span><br><span class=\"line\">-f  強迫打開特殊檔，例如週邊設備代號、目錄和二進位檔案</span><br><span class=\"line\">-g  只標誌最後搜索的關鍵字</span><br><span class=\"line\">-i  忽略搜索時的大小寫</span><br><span class=\"line\"></span><br><span class=\"line\">/字串：向下搜索“字串”的功能</span><br><span class=\"line\">?字串：向上搜索“字串”的功能</span><br><span class=\"line\">n：重複前一個搜索（與 / 或 ? 有關）</span><br><span class=\"line\">N：反向重複前一個搜索（與 / 或 ? 有關）</span><br><span class=\"line\">y: 向前滾動一行</span><br><span class=\"line\">空白鍵: 向後滾動一行</span><br><span class=\"line\">[pagedown]：向下翻動一頁</span><br><span class=\"line\">[pageup]  ：向上翻動一頁</span><br><span class=\"line\">u: 向前滾動半頁</span><br><span class=\"line\">d: 向後翻半頁</span><br><span class=\"line\">Q: 退出less 命令</span><br><span class=\"line\">h: 顯示説明介面</span><br><span class=\"line\"></span><br><span class=\"line\">less -m -N /var/<span class=\"built_in\">log</span>//apache2/error.log</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"top-顯示即時的系統負載狀態\"><a href=\"#top-顯示即時的系統負載狀態\" class=\"headerlink\" title=\"top 顯示即時的系統負載狀態\"></a>top 顯示即時的系統負載狀態</h4><h4 id=\"ufw-防火牆\"><a href=\"#ufw-防火牆\" class=\"headerlink\" title=\"ufw 防火牆\"></a>ufw 防火牆</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ufw allow 80</span><br><span class=\"line\">ufw status</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"vim\"><a href=\"#vim\" class=\"headerlink\" title=\"vim\"></a>vim</h3><div style=\"width:500px\">\n    <img src=\"/2021/04/12/os-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h4 id=\"Normal-mode\"><a href=\"#Normal-mode\" class=\"headerlink\" title=\"Normal mode\"></a>Normal mode</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 移動</span></span><br><span class=\"line\">/hexo : 找下一行字串 hexo</span><br><span class=\"line\">?hexo : 找上一行字串 hexo</span><br><span class=\"line\">n : 執行前一動作</span><br><span class=\"line\">N : 反向執行前一動作</span><br><span class=\"line\">n&lt;Enter&gt; : 向下移動幾列</span><br><span class=\"line\">[Home] : 移至本列第一字元</span><br><span class=\"line\">[End] : 移至本列最後字元</span><br><span class=\"line\">nG : 跳至第 n 行</span><br><span class=\"line\"><span class=\"comment\"># 複製刪除</span></span><br><span class=\"line\">dd : 刪除本行</span><br><span class=\"line\">u  : 還原</span><br><span class=\"line\">yy : 複製本行</span><br><span class=\"line\">P  : 貼到前一行</span><br><span class=\"line\">p  : 貼到後一行</span><br><span class=\"line\"><span class=\"comment\"># 區塊選擇</span></span><br><span class=\"line\">v : 字元選擇,游標經過會反白選擇</span><br><span class=\"line\">V : 行選擇,游標經過會反白選擇</span><br><span class=\"line\">[Ctrl]+v : 方塊選擇,游標經過會反白選擇</span><br><span class=\"line\">y : 反白地方複製</span><br><span class=\"line\">d : 反白地方刪除</span><br><span class=\"line\">p : 貼上複製區塊</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Command-mode\"><a href=\"#Command-mode\" class=\"headerlink\" title=\"Command mode\"></a>Command mode</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">w : 寫入檔案</span><br><span class=\"line\">q : 跳出檔案</span><br><span class=\"line\">wq: 寫入後跳出檔案</span><br><span class=\"line\">q!: 強制跳出檔案(修改取消)</span><br><span class=\"line\"><span class=\"built_in\">set</span> nu   : 顯示行號</span><br><span class=\"line\"><span class=\"built_in\">set</span> nonu : 取消顯示行號</span><br></pre></td></tr></table></figure>\n","categories":["OS"],"tags":["cli"]},{"title":"圖檔格式","url":"/2021/03/22/pic-1/","content":"<h3 id=\"JPG-也有人說是-JPEG-大色素檔案-但不-support-透明檔案及動畫\"><a href=\"#JPG-也有人說是-JPEG-大色素檔案-但不-support-透明檔案及動畫\" class=\"headerlink\" title=\"JPG, 也有人說是 JPEG - 大色素檔案,但不 support 透明檔案及動畫\"></a>JPG, 也有人說是 JPEG - 大色素檔案,但不 support 透明檔案及動畫</h3><p>JPG(Joint Photographic Experts Group)</p>\n<ul>\n<li>支持 24 位元影像</li>\n<li>是一種破壞性資料壓縮格式，壓縮比從 10：1 到 20：1 不等，大多數設計師選擇60％到70％範圍內</li>\n<li>不支持透明及動畫</li>\n<li>JPG格式最常用於圖像，攝影和任何具有大量顏色的東西。</li>\n</ul>\n<span id=\"more\"></span>\n<h3 id=\"PNG-大色素-support-透明檔案-半透明-動畫\"><a href=\"#PNG-大色素-support-透明檔案-半透明-動畫\" class=\"headerlink\" title=\"PNG - 大色素,, support 透明檔案 ,半透明,動畫\"></a>PNG - 大色素,, support 透明檔案 ,半透明,動畫</h3><p>PNG (Portable Network Graphic)</p>\n<ul>\n<li>能夠使用透明度和 / 或不透明度</li>\n<li>PNG 支持 24 位 RGB 和 32 位 RGBA 顏色</li>\n<li>支援灰階圖像</li>\n<li>PNG 使用無損壓縮</li>\n<li>不支持動畫</li>\n<li>最常用於圖標，小型靜止圖像或任何需要透明度的圖像</li>\n</ul>\n<h3 id=\"SVG-向量圖形-放大不變形-但若含文字會讓檔案變的很大\"><a href=\"#SVG-向量圖形-放大不變形-但若含文字會讓檔案變的很大\" class=\"headerlink\" title=\"SVG - 向量圖形,放大不變形,但若含文字會讓檔案變的很大\"></a>SVG - 向量圖形,放大不變形,但若含文字會讓檔案變的很大</h3><ul>\n<li>SVG是一種無損格式。這意味著它在壓縮時不會丟失任何數據，呈現不同的顏色</li>\n<li>支持透明度</li>\n<li>允許靜止或動態圖像</li>\n<li>常用於網絡上的圖形和LOGO以及將在視網膜或其他高解析度螢幕上查看的項目</li>\n</ul>\n<h4 id=\"GIF-色素不高-support-透明檔案-但不-support-半透明-support-動畫\"><a href=\"#GIF-色素不高-support-透明檔案-但不-support-半透明-support-動畫\" class=\"headerlink\" title=\"GIF - 色素不高, support 透明檔案,但不 support 半透明, support 動畫\"></a>GIF - 色素不高, support 透明檔案,但不 support 半透明, support 動畫</h4>","categories":["Blog"],"tags":["jpg","png","svg"]},{"title":"Python install","url":"/2021/03/28/python-1/","content":"<h3 id=\"install-windows\"><a href=\"#install-windows\" class=\"headerlink\" title=\"install(windows)\"></a>install(windows)</h3><ul>\n<li>download <a href=\"https://www.python.org/downloads/\">python</a> windows version<br>勾選 Add Pathon 3.x to PATH, 滑鼠點 Insatll Now(其他都選default)<div style=\"width:500px\">\n  <img src=\"/2021/03/28/python-1/pic1.png\" class=\"\" title=\"pic1\">\n</div></li>\n</ul>\n<span id=\"more\"></span>\n\n","categories":["Coding"],"tags":["python"]},{"title":"PyCharm","url":"/2021/03/28/python-2/","content":"<h2 id=\"install-windows\"><a href=\"#install-windows\" class=\"headerlink\" title=\"install(windows)\"></a>install(windows)</h2><ul>\n<li>download <a href=\"https://www.jetbrains.com/pycharm/download/#section=windows\">PyCharm</a> windows Community version<br>勾選 64 bit launcher(其他都選default)<div style=\"width:500px\">\n  <img src=\"/2021/03/28/python-2/pic1.png\" class=\"\" title=\"pic1\">\n</div></li>\n</ul>\n<span id=\"more\"></span>\n\n<h2 id=\"create-new-project-for-all-reference-pythonProject-home\"><a href=\"#create-new-project-for-all-reference-pythonProject-home\" class=\"headerlink\" title=\"create new project for all reference(pythonProject-home)\"></a>create new project for all reference(pythonProject-home)</h2><h3 id=\"選擇-New-Project\"><a href=\"#選擇-New-Project\" class=\"headerlink\" title=\"選擇 New Project\"></a>選擇 New Project</h3><img src=\"/2021/03/28/python-2/pic2.png\" class=\"\" title=\"pic2\">\n\n\n<h3 id=\"建立-reference-projectw\"><a href=\"#建立-reference-projectw\" class=\"headerlink\" title=\"建立 reference projectw\"></a>建立 reference projectw</h3><img src=\"/2021/03/28/python-2/pic3.png\" class=\"\" title=\"pic3\">\n\n<h3 id=\"Shift-F10-執行\"><a href=\"#Shift-F10-執行\" class=\"headerlink\" title=\"Shift-F10 執行\"></a>Shift-F10 執行</h3><img src=\"/2021/03/28/python-2/pic4.png\" class=\"\" title=\"pic4\">\n\n\n<h2 id=\"create-new-project\"><a href=\"#create-new-project\" class=\"headerlink\" title=\"create new project\"></a>create new project</h2><h3 id=\"選擇-New-Project-1\"><a href=\"#選擇-New-Project-1\" class=\"headerlink\" title=\"選擇 New Project\"></a>選擇 New Project</h3><img src=\"/2021/03/28/python-2/pic5.png\" class=\"\" title=\"pic5\">\n\n<h3 id=\"建立-projectw\"><a href=\"#建立-projectw\" class=\"headerlink\" title=\"建立 projectw\"></a>建立 projectw</h3><img src=\"/2021/03/28/python-2/pic6.png\" class=\"\" title=\"pic6\">\n\n\n<h3 id=\"可選擇蓋掉原本視窗-This-Window-或-建立新視窗-Ne-Window\"><a href=\"#可選擇蓋掉原本視窗-This-Window-或-建立新視窗-Ne-Window\" class=\"headerlink\" title=\"可選擇蓋掉原本視窗(This Window) 或 建立新視窗(Ne Window)\"></a>可選擇蓋掉原本視窗(This Window) 或 建立新視窗(Ne Window)</h3><img src=\"/2021/03/28/python-2/pic7.png\" class=\"\" title=\"pic7\">\n\n<h3 id=\"刪除-project-環境-venv-目錄-避免一直建立執行環境\"><a href=\"#刪除-project-環境-venv-目錄-避免一直建立執行環境\" class=\"headerlink\" title=\"刪除 project 環境, venv 目錄(避免一直建立執行環境)\"></a>刪除 project 環境, venv 目錄(避免一直建立執行環境)</h3><img src=\"/2021/03/28/python-2/pic8.png\" class=\"\" title=\"pic8\">\n\n<h3 id=\"更改執行環境的位置-pythonProject-home\"><a href=\"#更改執行環境的位置-pythonProject-home\" class=\"headerlink\" title=\"更改執行環境的位置(pythonProject-home)\"></a>更改執行環境的位置(pythonProject-home)</h3><img src=\"/2021/03/28/python-2/pic9.png\" class=\"\" title=\"pic9\">\n<p>&lt;<img src=\"/2021/03/28/python-2/pic10.png\" class=\"\" title=\"pic10\"></p>\n<h3 id=\"Shift-F10-執行-1\"><a href=\"#Shift-F10-執行-1\" class=\"headerlink\" title=\"Shift-F10 執行\"></a>Shift-F10 執行</h3><img src=\"/2021/03/28/python-2/pic11.png\" class=\"\" title=\"pic11\">\n\n\n<h2 id=\"python-100-days-code-save-to-GitHub\"><a href=\"#python-100-days-code-save-to-GitHub\" class=\"headerlink\" title=\"python 100 days code save to GitHub\"></a>python 100 days code save to GitHub</h2><h3 id=\"git-init-add-gitignore\"><a href=\"#git-init-add-gitignore\" class=\"headerlink\" title=\"git init + add .gitignore\"></a>git init + add .gitignore</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># git init </span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> python_100ds</span><br><span class=\"line\">git init</span><br><span class=\"line\"><span class=\"comment\"># create .gitignore</span></span><br><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-file-and-commit\"><a href=\"#add-file-and-commit\" class=\"headerlink\" title=\"add file and commit\"></a>add file and commit</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git status</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;first commit&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"push-code-to-GitHub\"><a href=\"#push-code-to-GitHub\" class=\"headerlink\" title=\"push code to GitHub\"></a>push code to GitHub</h3><p>GitHub repository 要先建立</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/hot5656/python_100ds.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"PyCharm-feature\"><a href=\"#PyCharm-feature\" class=\"headerlink\" title=\"PyCharm feature\"></a>PyCharm feature</h2><h3 id=\"Spell-Check\"><a href=\"#Spell-Check\" class=\"headerlink\" title=\"Spell Check\"></a>Spell Check</h3><h3 id=\"分割視窗\"><a href=\"#分割視窗\" class=\"headerlink\" title=\"分割視窗\"></a>分割視窗</h3><p>檔案標題按 mouse 右鍵 –&gt; Splite Right</p>\n<img src=\"/2021/03/28/python-2/pic21.png\" class=\"\" title=\"pic21\">\n<img src=\"/2021/03/28/python-2/pic22.png\" class=\"\" title=\"pic22\">\n\n<h3 id=\"Style-Guide-for-Python\"><a href=\"#Style-Guide-for-Python\" class=\"headerlink\" title=\"Style Guide for Python\"></a>Style Guide for Python</h3><p><a href=\"https://www.python.org/dev/peps/pep-0008/\">PEP 8 – Style Guide for Python Code</a></p>\n<h3 id=\"Show-file-history\"><a href=\"#Show-file-history\" class=\"headerlink\" title=\"Show file history\"></a>Show file history</h3><ul>\n<li>File –&gt; Local History –&gt; Show History<img src=\"/2021/03/28/python-2/pic23.png\" class=\"\" title=\"pic23\">\n<img src=\"/2021/03/28/python-2/pic24.png\" class=\"\" title=\"pic24\"></li>\n<li>Recover : 按 icon for Revert<img src=\"/2021/03/28/python-2/pic25.png\" class=\"\" title=\"pic25\">\n<img src=\"/2021/03/28/python-2/pic26.png\" class=\"\" title=\"pic26\"></li>\n</ul>\n<h3 id=\"變數改名\"><a href=\"#變數改名\" class=\"headerlink\" title=\"變數改名\"></a>變數改名</h3><ul>\n<li><p>選擇變數 –&gt; 滑鼠右鍵 –&gt; Refacor –&gt; Rename</p>\n<img src=\"/2021/03/28/python-2/pic31.png\" class=\"\" title=\"pic31\"></li>\n<li><p>輸入更改內容 –&gt; 按 Preview </p>\n<img src=\"/2021/03/28/python-2/pic32.png\" class=\"\" title=\"pic32\"></li>\n<li><p>看一下更改位置 –&gt; 按 Do Refactor</p>\n<img src=\"/2021/03/28/python-2/pic33.png\" class=\"\" title=\"pic33\"></li>\n</ul>\n<h3 id=\"Code-整理\"><a href=\"#Code-整理\" class=\"headerlink\" title=\"Code 整理\"></a>Code 整理</h3><p>Code –&gt; Reformat Code</p>\n<img src=\"/2021/03/28/python-2/pic34.png\" class=\"\" title=\"pic34\">\n\n<h3 id=\"找-function-source-位置\"><a href=\"#找-function-source-位置\" class=\"headerlink\" title=\"找 function source 位置\"></a>找 function source 位置</h3><p>Go To –&gt; Implementation</p>\n<img src=\"/2021/03/28/python-2/pic35.png\" class=\"\" title=\"pic35\">\n\n\n<h3 id=\"Insatll-Python-Package\"><a href=\"#Insatll-Python-Package\" class=\"headerlink\" title=\"Insatll Python Package\"></a>Insatll Python Package</h3><ul>\n<li><p>File –&gt; Setting</p>\n<img src=\"/2021/03/28/python-2/pic41.png\" class=\"\" title=\"pic41\"></li>\n<li><p>Project Interpreter –&gt; +</p>\n<img src=\"/2021/03/28/python-2/pic42.png\" class=\"\" title=\"pic42\"></li>\n<li><p>Input Module Name –&gt; Install Package</p>\n<img src=\"/2021/03/28/python-2/pic43.png\" class=\"\" title=\"pic43\"></li>\n</ul>\n<h3 id=\"快捷鍵-Hot-Key\"><a href=\"#快捷鍵-Hot-Key\" class=\"headerlink\" title=\"快捷鍵(Hot Key)\"></a>快捷鍵(Hot Key)</h3><h4 id=\"Debug\"><a href=\"#Debug\" class=\"headerlink\" title=\"Debug\"></a>Debug</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Shift+F10 : Run main</span><br><span class=\"line\">Shift+F9  : debug Run main </span><br><span class=\"line\">F7        : Setp In</span><br><span class=\"line\">F8        : Step out</span><br><span class=\"line\">F9        : debug 繼續執行</span><br><span class=\"line\">Ctrl+F8   : toggle the breakpoint.</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Edit\"><a href=\"#Edit\" class=\"headerlink\" title=\"Edit\"></a>Edit</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Alt+Shift+(up&#x2F;down)    : 程式上移或下移</span><br><span class=\"line\">Double Shift           : search all files</span><br><span class=\"line\">click+Alt+shift 往下拉  : 多行編輯</span><br></pre></td></tr></table></figure>","categories":["Coding"],"tags":["python","pycharm"]},{"title":"Tkinter (Python)","url":"/2021/04/15/python-3/","content":"<h3 id=\"Setup\"><a href=\"#Setup\" class=\"headerlink\" title=\"Setup\"></a>Setup</h3><h4 id=\"set-window\"><a href=\"#set-window\" class=\"headerlink\" title=\"set window\"></a>set window</h4><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># import tkinter</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> tkinter <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"comment\"># init for window</span></span><br><span class=\"line\">window = Tk()</span><br><span class=\"line\"><span class=\"comment\"># 標題</span></span><br><span class=\"line\">window.title(<span class=\"string\">&quot;My First GUI Program&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># windows size</span></span><br><span class=\"line\">window.minsize(width=<span class=\"number\">500</span>, height=<span class=\"number\">300</span>)</span><br><span class=\"line\"><span class=\"comment\"># padx, pady : window 預留語版邊 pad</span></span><br><span class=\"line\"><span class=\"comment\"># bg : window 背景顏色</span></span><br><span class=\"line\">window.config(padx=<span class=\"number\">50</span>, pady=<span class=\"number\">70</span>, bg=<span class=\"string\">&quot;#B1DDC6&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 保持顯示 window</span></span><br><span class=\"line\">window.mainloop()</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"Setting-Options\"><a href=\"#Setting-Options\" class=\"headerlink\" title=\"Setting Options\"></a>Setting Options</h4><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># At object creation time, using keyword arguments</span></span><br><span class=\"line\">fred = Button(self, fg=<span class=\"string\">&quot;red&quot;</span>, bg=<span class=\"string\">&quot;blue&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># After object creation, treating the option name like a dictionary index</span></span><br><span class=\"line\">fred[<span class=\"string\">&quot;fg&quot;</span>] = <span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">fred[<span class=\"string\">&quot;bg&quot;</span>] = <span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Use the config() method to update multiple attrs subsequent to object creation</span></span><br><span class=\"line\">fred.config(fg=<span class=\"string\">&quot;red&quot;</span>, bg=<span class=\"string\">&quot;blue&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"邊線與邊框\"><a href=\"#邊線與邊框\" class=\"headerlink\" title=\"邊線與邊框\"></a>邊線與邊框</h4><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># highlightthickness=0 無邊線</span></span><br><span class=\"line\"><span class=\"comment\"># borderwidth=0 無邊框</span></span><br><span class=\"line\">ok_btn = Button(image=ok_img, command=ok_process, borderwidth=<span class=\"number\">0</span>, highlightthickness=<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Layout-單一視窗-僅能擇一使用\"><a href=\"#Layout-單一視窗-僅能擇一使用\" class=\"headerlink\" title=\"Layout(單一視窗,僅能擇一使用)\"></a>Layout(單一視窗,僅能擇一使用)</h3><h4 id=\"Pack\"><a href=\"#Pack\" class=\"headerlink\" title=\"Pack\"></a>Pack</h4><div style=\"width:200px\">\n    <img src=\"/2021/04/15/python-3/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n<div style=\"width:200px\">\n    <img src=\"/2021/04/15/python-3/pic22.png\" class=\"\" title=\"pic22\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># init 父窗口</span></span><br><span class=\"line\">root = Tk()</span><br><span class=\"line\">root2 = Tk()</span><br><span class=\"line\"></span><br><span class=\"line\">w = Label(root, text=<span class=\"string\">&quot;Red Sun&quot;</span>, bg=<span class=\"string\">&quot;red&quot;</span>, fg=<span class=\"string\">&quot;white&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># ipadx,ipady 設內部的 padding</span></span><br><span class=\"line\">w.pack(ipadx=<span class=\"number\">10</span>, ipady=<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># fill=X 表寬度與父窗口一樣</span></span><br><span class=\"line\">w = Label(root, text=<span class=\"string\">&quot;Green Grass&quot;</span>, bg=<span class=\"string\">&quot;green&quot;</span>, fg=<span class=\"string\">&quot;black&quot;</span>)</span><br><span class=\"line\">w.pack(fill=X)</span><br><span class=\"line\"><span class=\"comment\"># padx, pady 設定與其他元件的 padding(含父窗口)</span></span><br><span class=\"line\">w = Label(root, text=<span class=\"string\">&quot;Blue Sky&quot;</span>, bg=<span class=\"string\">&quot;blue&quot;</span>, fg=<span class=\"string\">&quot;white&quot;</span>)</span><br><span class=\"line\">w.pack(fill=X, padx=<span class=\"number\">10</span>, pady=<span class=\"number\">10</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 設定 順序 side=LEFT</span></span><br><span class=\"line\">w = Label(root2, text=<span class=\"string\">&quot;red&quot;</span>, bg=<span class=\"string\">&quot;red&quot;</span>, fg=<span class=\"string\">&quot;white&quot;</span>)</span><br><span class=\"line\">w.pack(padx=<span class=\"number\">5</span>, pady=<span class=\"number\">10</span>, side=LEFT)</span><br><span class=\"line\">w = Label(root2, text=<span class=\"string\">&quot;green&quot;</span>, bg=<span class=\"string\">&quot;green&quot;</span>, fg=<span class=\"string\">&quot;black&quot;</span>)</span><br><span class=\"line\">w.pack(padx=<span class=\"number\">5</span>, pady=<span class=\"number\">20</span>, side=LEFT)</span><br><span class=\"line\">w = Label(root2, text=<span class=\"string\">&quot;blue&quot;</span>, bg=<span class=\"string\">&quot;blue&quot;</span>, fg=<span class=\"string\">&quot;white&quot;</span>)</span><br><span class=\"line\">w.pack(padx=<span class=\"number\">5</span>, pady=<span class=\"number\">20</span>, side=LEFT)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Grid\"><a href=\"#Grid\" class=\"headerlink\" title=\"Grid\"></a><a href=\"https://anzeljg.github.io/rin2/book2/2405/docs/tkinter/grid.html\">Grid</a></h4><p>Grid 把元件位置作為一個二維表結構來維護, 即按照行列的方式排列</p>\n<div style=\"width:600px\">\n    <img src=\"/2021/04/15/python-3/pic23.png\" class=\"\" title=\"pic23\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># grid 0, 0</span></span><br><span class=\"line\">my_label = Label(text=<span class=\"string\">&quot;I Am a Label&quot;</span>)</span><br><span class=\"line\">my_label.grid(row=<span class=\"number\">0</span>, column=<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># grid 1, 1</span></span><br><span class=\"line\">button = Button(text=<span class=\"string\">&quot;click me&quot;</span>)</span><br><span class=\"line\">button.grid(row=<span class=\"number\">1</span>, column=<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\"># grid 2, 3</span></span><br><span class=\"line\">entry = Entry(width=<span class=\"number\">30</span>)</span><br><span class=\"line\">entry.insert(END, <span class=\"string\">&quot;Some text to begin with.&quot;</span>)</span><br><span class=\"line\">entry.grid(row=<span class=\"number\">2</span>, column=<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"comment\"># grid 0, 2</span></span><br><span class=\"line\">button2 = Button(text=<span class=\"string\">&quot;button2&quot;</span>)</span><br><span class=\"line\">button2.grid(row=<span class=\"number\">0</span>, column=<span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Place\"><a href=\"#Place\" class=\"headerlink\" title=\"Place\"></a>Place</h4><p>Place 可以指定元件的絕對位置</p>\n<div style=\"width:600px\">\n    <img src=\"/2021/04/15/python-3/pic24.png\" class=\"\" title=\"pic24\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\">my_label = Label(text=<span class=\"string\">&quot;I Am a Label&quot;</span>)</span><br><span class=\"line\">my_label.place(x=<span class=\"number\">50</span>, y=<span class=\"number\">70</span>)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"元件\"><a href=\"#元件\" class=\"headerlink\" title=\"元件\"></a>元件</h3><h4 id=\"Text\"><a href=\"#Text\" class=\"headerlink\" title=\"Text\"></a>Text</h4><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\">text = Text(width=<span class=\"number\">30</span>, height=<span class=\"number\">5</span>)</span><br><span class=\"line\">text.insert(END, <span class=\"string\">&quot;Example of multi-line text entry.&quot;</span>)</span><br><span class=\"line\">text.pack()</span><br><span class=\"line\"><span class=\"comment\"># print to console</span></span><br><span class=\"line\"><span class=\"comment\"># index1: 1.0 第一個字元</span></span><br><span class=\"line\"><span class=\"comment\"># index2: 結尾</span></span><br><span class=\"line\">print(text.get(<span class=\"string\">&quot;1.0&quot;</span>, END))</span><br><span class=\"line\"><span class=\"comment\"># focus</span></span><br><span class=\"line\">text.focus()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h4><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 設定 back ground and front ground color</span></span><br><span class=\"line\">my_label = Label(text=<span class=\"string\">&quot;I Am a Label&quot;</span>, font=(<span class=\"string\">&quot;Arial&quot;</span>, <span class=\"number\">24</span>, <span class=\"string\">&quot;bold&quot;</span>), fg=<span class=\"string\">&#x27;green&#x27;</span>, bg=<span class=\"string\">&#x27;yellow&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># side = top(default), left, right, bottom</span></span><br><span class=\"line\"><span class=\"comment\"># expand = True (垂直占最大)</span></span><br><span class=\"line\">my_label.pack(side=<span class=\"string\">&quot;bottom&quot;</span>, expand=<span class=\"literal\">True</span>)</span><br><span class=\"line\"><span class=\"comment\"># 更改 label 內容 - 方法1</span></span><br><span class=\"line\">my_label[<span class=\"string\">&quot;text&quot;</span>] = <span class=\"string\">&quot;New label&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 更改 label 內容 - 方法2</span></span><br><span class=\"line\">my_label.config(text=<span class=\"string\">&quot;New Text - config&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Button\"><a href=\"#Button\" class=\"headerlink\" title=\"Button\"></a>Button</h4><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># button&#x27;s click function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">button_clicked</span>():</span></span><br><span class=\"line\">    print(<span class=\"string\">&quot;I got a clicked.&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># button create</span></span><br><span class=\"line\">button = Button(text=<span class=\"string\">&quot;click me&quot;</span>, command=button_clicked)</span><br><span class=\"line\">button.pack()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Spinbox\"><a href=\"#Spinbox\" class=\"headerlink\" title=\"Spinbox\"></a>Spinbox</h4><div style=\"width:50px\">\n    <img src=\"/2021/04/15/python-3/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Spinbox</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">spinbox_used</span>():</span></span><br><span class=\"line\">    <span class=\"comment\"># get spinbox value</span></span><br><span class=\"line\">    print(spinbox.get())</span><br><span class=\"line\"></span><br><span class=\"line\">spinbox = Spinbox(from_=<span class=\"number\">0</span>, to=<span class=\"number\">10</span>, width=<span class=\"number\">5</span>, command=spinbox_used)</span><br><span class=\"line\"><span class=\"comment\"># 留 padding</span></span><br><span class=\"line\">spinbox.pack(padx=<span class=\"number\">20</span>, pady=<span class=\"number\">10</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Standard-Dialog\"><a href=\"#Standard-Dialog\" class=\"headerlink\" title=\"Standard Dialog\"></a><a href=\"https://runestone.academy/runestone/books/published/thinkcspy/GUIandEventDrivenProgramming/02_standard_dialog_boxes.html\">Standard Dialog</a></h4><div style=\"width:300px\">\n    <img src=\"/2021/04/15/python-3/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n<div style=\"width:300px\">\n    <img src=\"/2021/04/15/python-3/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 因不是 class 要另外 import</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> tkinter <span class=\"keyword\">import</span> messagebox</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Standard Dialog</span></span><br><span class=\"line\">website = <span class=\"string\">&quot;Game App&quot;</span></span><br><span class=\"line\">email = <span class=\"string\">&quot;example.gmail.com&quot;</span></span><br><span class=\"line\">password = <span class=\"string\">&quot;123abc&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Dialog askokcancel</span></span><br><span class=\"line\">is_ok = messagebox.askokcancel(title=website, message=<span class=\"string\">f&quot;There are the details entered: \\nEmail: <span class=\"subst\">&#123;email&#125;</span> \\nPassword: <span class=\"subst\">&#123;password&#125;</span>\\n Is it ok to save&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># Dialog showinfo</span></span><br><span class=\"line\">messagebox.showinfo(title=<span class=\"string\">&quot;Oops&quot;</span>, message=<span class=\"string\">&quot;Please don&#x27;t leave field empty.&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Radio-Box\"><a href=\"#Radio-Box\" class=\"headerlink\" title=\"Radio Box\"></a>Radio Box</h4><div style=\"width:100px\">\n    <img src=\"/2021/04/15/python-3/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">radio_used</span>():</span></span><br><span class=\"line\">    <span class=\"comment\"># get value</span></span><br><span class=\"line\">    print(radio_state.get())</span><br><span class=\"line\"></span><br><span class=\"line\">radio_state = IntVar()</span><br><span class=\"line\">radiobutton1 = Radiobutton(text=<span class=\"string\">&quot;option1&quot;</span>, value=<span class=\"number\">1</span>, variable=radio_state, command=radio_used)</span><br><span class=\"line\">radiobutton2 = Radiobutton(text=<span class=\"string\">&quot;option2&quot;</span>, value=<span class=\"number\">2</span>, variable=radio_state, command=radio_used)</span><br><span class=\"line\">print(radio_state.get())</span><br><span class=\"line\">radiobutton1.pack()</span><br><span class=\"line\">radiobutton2.pack()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Listbox\"><a href=\"#Listbox\" class=\"headerlink\" title=\"Listbox\"></a>Listbox</h4><div style=\"width:150px\">\n    <img src=\"/2021/04/15/python-3/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">listbox_used</span>(<span class=\"params\">event</span>):</span></span><br><span class=\"line\">    print(listbox.get(listbox.curselection()))</span><br><span class=\"line\"></span><br><span class=\"line\">listbox = Listbox(height=<span class=\"number\">4</span>)</span><br><span class=\"line\">fruits = [<span class=\"string\">&quot;Apple&quot;</span>, <span class=\"string\">&quot;Pear&quot;</span>, <span class=\"string\">&quot;Orange&quot;</span>, <span class=\"string\">&quot;Banana&quot;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> fruits:</span><br><span class=\"line\">    listbox.insert(fruits.index(item), item)</span><br><span class=\"line\">listbox.bind(<span class=\"string\">&quot;&lt;&lt;ListboxSelect&gt;&gt;&quot;</span>, listbox_used)</span><br><span class=\"line\"><span class=\"comment\"># 留 padding</span></span><br><span class=\"line\">listbox.pack(padx=<span class=\"number\">20</span>, pady=<span class=\"number\">10</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Checkbox\"><a href=\"#Checkbox\" class=\"headerlink\" title=\"Checkbox\"></a>Checkbox</h4><div style=\"width:100px\">\n    <img src=\"/2021/04/15/python-3/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">checkbutton_used</span>():</span></span><br><span class=\"line\">    <span class=\"comment\"># get value</span></span><br><span class=\"line\">    print(checked_state.get())</span><br><span class=\"line\"></span><br><span class=\"line\">checked_state = IntVar()</span><br><span class=\"line\"><span class=\"comment\"># set value to 1</span></span><br><span class=\"line\"><span class=\"comment\"># checked_state.set(1)</span></span><br><span class=\"line\"><span class=\"comment\"># only show type</span></span><br><span class=\"line\">print(checked_state)</span><br><span class=\"line\">checkbutton = Checkbutton(text=<span class=\"string\">&quot;Is on?&quot;</span>, variable=checked_state, command=checkbutton_used)</span><br><span class=\"line\">print(checked_state.get())</span><br><span class=\"line\">checkbutton.pack()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Scale\"><a href=\"#Scale\" class=\"headerlink\" title=\"Scale\"></a>Scale</h4><div style=\"width:100px\">\n    <img src=\"/2021/04/15/python-3/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># parameter include value</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">scale_used</span>(<span class=\"params\">value</span>):</span></span><br><span class=\"line\">    print(value)</span><br><span class=\"line\"></span><br><span class=\"line\">scale = Scale(from_=<span class=\"number\">0</span>, to=<span class=\"number\">100</span>, command=scale_used)</span><br><span class=\"line\">scale.pack()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Entry-單行輸入\"><a href=\"#Entry-單行輸入\" class=\"headerlink\" title=\"Entry (單行輸入)\"></a>Entry (單行輸入)</h4><div style=\"width:200px\">\n    <img src=\"/2021/04/15/python-3/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># for get entry value ========</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">button_clicked</span>():</span></span><br><span class=\"line\">    print(<span class=\"string\">&quot;I got a clicked.&quot;</span>)</span><br><span class=\"line\">    new_input = entry.get()</span><br><span class=\"line\">    print(new_input)</span><br><span class=\"line\">    my_label[<span class=\"string\">&quot;text&quot;</span>] = new_input</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># get entry value</span></span><br><span class=\"line\">button = Button(text=<span class=\"string\">&quot;click me&quot;</span>, command=button_clicked)</span><br><span class=\"line\">button.pack()</span><br><span class=\"line\"><span class=\"comment\"># =============================</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># entry</span></span><br><span class=\"line\">entry = Entry(width=<span class=\"number\">30</span>)</span><br><span class=\"line\"><span class=\"comment\"># 設定預設值</span></span><br><span class=\"line\"><span class=\"comment\"># index--&gt;END : 存在文字之後</span></span><br><span class=\"line\">entry.insert(END, <span class=\"string\">&quot;Some text to begin with.&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 留 padding</span></span><br><span class=\"line\">entry.pack(padx=<span class=\"number\">20</span>, pady=<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># focus</span></span><br><span class=\"line\">entry.focus()</span><br><span class=\"line\"><span class=\"comment\"># not show - because it run when not input</span></span><br><span class=\"line\"><span class=\"comment\"># get entry value</span></span><br><span class=\"line\">print(<span class=\"string\">f&quot;--&gt;<span class=\"subst\">&#123;entry.get()&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># delete entry from position to end</span></span><br><span class=\"line\"><span class=\"comment\"># website_entry.delete(0, &quot;end&quot;)</span></span><br><span class=\"line\"><span class=\"comment\"># entry.delete(0, &quot;end&quot;)</span></span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\"><span class=\"comment\"># website_entry.delete(0, END)</span></span><br><span class=\"line\"><span class=\"comment\"># entry.delete(0, END)</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Canvas-繪圖\"><a href=\"#Canvas-繪圖\" class=\"headerlink\" title=\"Canvas (繪圖)\"></a><a href=\"https://tkdocs.com/tutorial/canvas.html\">Canvas (繪圖)</a></h4><div style=\"width:300px\">\n    <img src=\"/2021/04/15/python-3/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># constant</span></span><br><span class=\"line\">YELLOW = <span class=\"string\">&quot;#f7f5dd&quot;</span></span><br><span class=\"line\">FONT_NAME = <span class=\"string\">&quot;Courier&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Canvas, highlightthickness 邊線寬度</span></span><br><span class=\"line\">canvas = Canvas(width=<span class=\"number\">200</span>, height=<span class=\"number\">224</span>, bg=YELLOW, highlightthickness=<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># image 元件</span></span><br><span class=\"line\">tomato_img = PhotoImage(file=<span class=\"string\">&quot;tomato.png&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># add image</span></span><br><span class=\"line\">canvas.create_image(<span class=\"number\">100</span>, <span class=\"number\">112</span>, image=tomato_img)</span><br><span class=\"line\"><span class=\"comment\"># add text, fill 填入顏色</span></span><br><span class=\"line\">canvas.create_text(<span class=\"number\">102</span>, <span class=\"number\">130</span>, text=<span class=\"string\">&quot;00:00&quot;</span>, font=(FONT_NAME, <span class=\"number\">35</span>, <span class=\"string\">&quot;bold&quot;</span>), fill=<span class=\"string\">&quot;white&quot;</span>)</span><br><span class=\"line\">canvas.pack()</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Bind\"><a href=\"#Bind\" class=\"headerlink\" title=\"Bind\"></a><a href=\"http://www.tcl.tk/man/tcl8.6/TkCmd/event.htm\">Bind</a></h3><h4 id=\"Listbox-1\"><a href=\"#Listbox-1\" class=\"headerlink\" title=\"Listbox\"></a>Listbox</h4><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">listbox_used</span>(<span class=\"params\">event</span>):</span></span><br><span class=\"line\">    print(listbox.get(listbox.curselection()))</span><br><span class=\"line\"></span><br><span class=\"line\">listbox = Listbox(height=<span class=\"number\">4</span>)</span><br><span class=\"line\">fruits = [<span class=\"string\">&quot;Apple&quot;</span>, <span class=\"string\">&quot;Pear&quot;</span>, <span class=\"string\">&quot;Orange&quot;</span>, <span class=\"string\">&quot;Banana&quot;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> fruits:</span><br><span class=\"line\">    listbox.insert(fruits.index(item), item)</span><br><span class=\"line\">listbox.bind(<span class=\"string\">&quot;&lt;&lt;ListboxSelect&gt;&gt;&quot;</span>, listbox_used)</span><br><span class=\"line\">listbox.pack()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"參考\"><a href=\"#參考\" class=\"headerlink\" title=\"參考\"></a>參考</h3><ul>\n<li><a href=\"https://tk-tutorial.readthedocs.io/en/latest/index.html\">Tk tutorial</a></li>\n<li><a href=\"https://anzeljg.github.io/rin2/book2/2405/docs/tkinter/\">Tkinter 8.5 reference</a> : a GUI for Python</li>\n<li><a href=\"http://tcl.tk/man/tcl8.6/TkCmd/contents.htm\">Tk Commands</a> : 較清楚</li>\n</ul>\n","categories":["Coding"],"tags":["python"]},{"title":"Python 說明","url":"/2021/04/16/python-4/","content":"<h3 id=\"import\"><a href=\"#import\" class=\"headerlink\" title=\"import\"></a>import</h3><figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 一般 import</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> turtle</span><br><span class=\"line\">timmy = turtle.Turtle()</span><br><span class=\"line\"><span class=\"comment\"># import 內容(簡單使用)</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> turtle <span class=\"keyword\">import</span> Turtle, Screen</span><br><span class=\"line\"><span class=\"comment\"># import all ,可能不知出處,避免使用</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> turtle <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> tkinter <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"comment\"># module 太長,給予別名</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> turtle <span class=\"keyword\">as</span> t</span><br><span class=\"line\">timmy = t.Turtle()</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<figure class=\"highlight py\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n","categories":["Coding"],"tags":["python"]},{"title":"100 Days of Code for Python - Day31(Flash Card App)","url":"/2021/04/14/python100-31/","content":"<h3 id=\"xx\"><a href=\"#xx\" class=\"headerlink\" title=\"xx\"></a>xx</h3><h4 id=\"製作-字卡-csv\"><a href=\"#製作-字卡-csv\" class=\"headerlink\" title=\"製作 字卡 csv\"></a>製作 字卡 csv</h4><ol>\n<li><p>建立 google 試算表</p>\n</li>\n<li><p>copy 常用字 至試算表</p>\n</li>\n<li><p>輸入翻譯 function</p>\n<blockquote>\n<p>=GOOGLETRANSLATE(A2,”en”,”zh-TW”)</p>\n</blockquote>\n<span id=\"more\"></span></li>\n<li><p>選擇翻譯方塊格右下角往下拉,即可完成所有翻譯</p>\n<div style=\"width:500px\">\n <img src=\"/2021/04/14/python100-31/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n<div style=\"width:500px\">\n <img src=\"/2021/04/14/python100-31/pic2.png\" class=\"\" title=\"pic2\">\n</div></li>\n<li><p>檔案 –&gt; 下載 –&gt; .csv</p>\n</li>\n</ol>\n<h3 id=\"參考\"><a href=\"#參考\" class=\"headerlink\" title=\"參考\"></a>參考</h3><p><a href=\"https://en.wiktionary.org/wiki/Wiktionary:Frequency_lists\">Wiktionary</a> : Wiki 常用字</p>\n<blockquote>\n<p>Here they are in frequency order:<br>1-1000 · 1001-2000 · 2001-3000 · 3001-4000 · 4001-5000 · 5001-6000 · 6001-7000 · 7001-8000 · 8001-9000 · 9001-10000</p>\n</blockquote>\n<p><a href=\"https://github.com/hermitdave/FrequencyWords/tree/master/content/2018\">Hermitdave FrequencyWords</a> : Hermitdave 常用字<br><a href=\"https://www.opensubtitles.org/en/search/subs\">opensubtitles</a> : 字幕搜尋<br><a href=\"https://www.google.com/sheets/about/\">google 試算表</a><br><a href=\"https://support.google.com/docs/answer/3093331?hl=en-GB\">google 翻譯 說明</a><br><a href=\"https://cloud.google.com/translate/docs/languages?hl=en\">google 翻譯 Language support</a></p>\n","categories":["Coding"],"tags":["python"]},{"title":"參考網頁","url":"/2021/03/18/ref-link-1/","content":"<h3 id=\"常用網頁\"><a href=\"#常用網頁\" class=\"headerlink\" title=\"常用網頁\"></a>常用網頁</h3><h4 id=\"課程\"><a href=\"#課程\" class=\"headerlink\" title=\"課程\"></a>課程</h4><ul>\n<li><a href=\"https://www.udemy.com/\">udemy</a></li>\n<li><a href=\"https://lidemy.com/\">Lidemy</a></li>\n</ul>\n<h4 id=\"Online-Coding\"><a href=\"#Online-Coding\" class=\"headerlink\" title=\"Online Coding\"></a>Online Coding</h4><ul>\n<li><a href=\"https://codesandbox.io/\">CodeSandbox</a></li>\n</ul>\n<h3 id=\"網頁設計工具\"><a href=\"#網頁設計工具\" class=\"headerlink\" title=\"網頁設計工具\"></a>網頁設計工具</h3><ul>\n<li><a href=\"https://colorhunt.co/\">配色 colorhunt</a></li>\n<li><a href=\"https://www.urlencoder.org/\">Url Encode/Decode</a></li>\n<li><a href=\"https://tinypng.com/\">TTny PNG</a> : PNG 圖檔優化</li>\n<li><a href=\"https://tinyjpg.com/\">Tiny JPG</a> : JPG 圖檔優化</li>\n<li><a href=\"http://www.responsivepx.com/\">ResponsivePX.com</a> : 網頁調整測試(寬度) </li>\n<li><a href=\"https://necolas.github.io/normalize.css/\">CSS Normalize</a></li>\n<li><a href=\"https://www.sitepoint.com/a-basic-html5-template/\">html boilerplate</a></li>\n<li><a href=\"https://htmldom.dev/\">DOM with JavaScript</a> : JavaScript Example</li>\n<li><a href=\"http://youmightnotneedjquery.com/\">You might not need jQuery</a></li>\n<li><a href=\"https://beautifier.io/\">avaScript Beautifier</a></li>\n<li><a href=\"https://codesandbox.io/\">CodeSandbox</a></li>\n<li><a href=\"https://flatuicolors.com/\">FLAT UI COLORS</a>:常用調色板</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"設計參考\"><a href=\"#設計參考\" class=\"headerlink\" title=\"設計參考\"></a>設計參考</h3><h4 id=\"參考功能\"><a href=\"#參考功能\" class=\"headerlink\" title=\"參考功能\"></a>參考功能</h4><ul>\n<li><a href=\"https://www.w3schools.com/charsets/ref_html_entities_4.asp\">HTML Entity</a></li>\n<li><a href=\"https://www.w3schools.com/html/html5_semantic_elements.asp\">HTML Semantic Elements</a></li>\n<li><a href=\"https://www.compart.com/en/unicode/\">HTML Entity and Unicode</a></li>\n</ul>\n<h4 id=\"參考網頁\"><a href=\"#參考網頁\" class=\"headerlink\" title=\"參考網頁\"></a>參考網頁</h4><ul>\n<li><a href=\"https://caniuse.com/\">Can I use</a></li>\n<li><a href=\"https://html5up.net/\">HTML5 site templates</a> : 模板</li>\n<li><a href=\"https://news.ycombinator.com/\">Hacker News</a> : 可 link 到一些網頁,用作參考</li>\n<li><a href=\"https://www.awwwards.com/\">Awwwards</a> : 網頁設計和優秀網頁設計競賽平台</li>\n</ul>\n<h4 id=\"免費圖庫\"><a href=\"#免費圖庫\" class=\"headerlink\" title=\"免費圖庫\"></a>免費圖庫</h4><ul>\n<li><a href=\"https://cc0.wfublog.com/\">CC0 免費圖庫搜尋</a> : 要點圖看到大圖再下載,才有大圖</li>\n<li><a href=\"https://www.pexels.com/zh-tw/\">Pexels</a></li>\n<li><a href=\"https://mtache.com/freestockphoto\">38個高質+免費的圖庫網站</a></li>\n<li><a href=\"https://elements.envato.com/graphics/flat+design+pack\">envato elements 插畫</a></li>\n<li><a href=\"https://www.transparenttextures.com/\">TRANSPARENT TEXTURE</a> : 背景紋理圖</li>\n</ul>\n<h4 id=\"假資料\"><a href=\"#假資料\" class=\"headerlink\" title=\"假資料\"></a>假資料</h4><ul>\n<li><a href=\"https://picsum.photos/\">Lorem Picsum</a> : 假圖 <a href=\"https://picsum.photos/200/300\">https://picsum.photos/200/300</a> </li>\n</ul>\n<h4 id=\"金流\"><a href=\"#金流\" class=\"headerlink\" title=\"金流\"></a>金流</h4><ul>\n<li><a href=\"https://www.newebpay.com/\">newebpay 藍新金流</a></li>\n<li><a href=\"https://www.ecpay.com.tw/\">ecpay 綠界科技</a></li>\n<li><a href=\"https://www.opay.tw/Landing\">opay 歐付寶</a></li>\n</ul>\n<h3 id=\"分類\"><a href=\"#分類\" class=\"headerlink\" title=\"分類\"></a>分類</h3><h4 id=\"Hexo\"><a href=\"#Hexo\" class=\"headerlink\" title=\"Hexo\"></a>Hexo</h4><ul>\n<li><a href=\"https://hexo.io/zh-tw/\">Hexo</a></li>\n<li><a href=\"https://theme-next.iissnan.com/\">theme next document</a></li>\n<li><a href=\"https://theme-next.js.org/highlight/\">NexT Highlight Theme Preview</a></li>\n<li><a href=\"https://pixabay.com/\">Pixabay</a></li>\n</ul>\n<h4 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h4><ul>\n<li><a href=\"http://iissnan.com/progit/index.zh-tw.html\">Pro Git(中文)</a></li>\n</ul>\n<h4 id=\"Node-js\"><a href=\"#Node-js\" class=\"headerlink\" title=\"Node.js\"></a>Node.js</h4><ul>\n<li><a href=\"https://nodejs.dev/learn\">Node.js learn</a></li>\n</ul>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><ul>\n<li><a href=\"https://www.jetbrains.com/help/pycharm/quick-start-guide.html\">PyCharm Help</a></li>\n</ul>\n<h4 id=\"SASS\"><a href=\"#SASS\" class=\"headerlink\" title=\"SASS\"></a>SASS</h4><ul>\n<li><a href=\"https://sass-lang.com/\">SASS</a></li>\n<li><a href=\"https://www.tutorialsteacher.com/sass\">Sass Tutorial</a></li>\n<li><a href=\"https://github.com/hlb/sass-doc-zh/blob/master/SASS_REFERENCE_ZH_TW.md\">Sass 樣式表</a></li>\n<li><a href=\"https://thesassway.com/\">The Sass Way</a> : Sass的設計理念文章</li>\n<li><a href=\"https://www.youtube.com/watch?v=fbVD32w1oTo&list=PL2CB1F80266E986EA\">Sass 教學影片</a></li>\n<li><a href=\"https://www.slideshare.net/sfismy/sass-25113043\">SASS workshop slide</a></li>\n</ul>\n<h4 id=\"CSS3\"><a href=\"#CSS3\" class=\"headerlink\" title=\"CSS3\"></a>CSS3</h4><ul>\n<li><a href=\"http://compass-style.org/reference/compass/css3/\">CSS3</a></li>\n</ul>\n<h4 id=\"fetch\"><a href=\"#fetch\" class=\"headerlink\" title=\"fetch\"></a>fetch</h4><ul>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Fetch_API/Using_Fetch\">fetch API</a></li>\n</ul>\n<h4 id=\"regular-expression\"><a href=\"#regular-expression\" class=\"headerlink\" title=\"regular expression\"></a>regular expression</h4><ul>\n<li><a href=\"https://refrf.shreyasminocha.me/\">Regular Expressions for Regular Folk</a></li>\n<li><a href=\"https://regex101.com/\">regular expression online</a></li>\n</ul>\n<h4 id=\"project\"><a href=\"#project\" class=\"headerlink\" title=\"project\"></a>project</h4><ul>\n<li><a href=\"https://jqueryui.com/\">jQuery UI</a></li>\n<li><a href=\"https://bootswatch.com/\">Bootswatch</a> : free themes for Bootstrap</li>\n</ul>\n<h3 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h3><ul>\n<li><a href=\"https://reqres.in/\">REQ | RES</a> : API test</li>\n<li><a href=\"https://developers.facebook.com/tools?locale=zh_TW\">Facebook API</a></li>\n<li><a href=\"https://developer.twitter.com/en/docs/twitter-api\">Twitter API</a></li>\n<li><a href=\"https://dev.twitch.tv/docs/v5\">Twitch API v5</a></li>\n<li><a href=\"https://dev.twitch.tv/login\">Twitch 開發人員主控台</a></li>\n<li><a href=\"https://github.com/HackerNews/API\">Github API</a></li>\n<li><a href=\"https://pokeapi.co/\">PokeAPI</a></li>\n<li><a href=\"https://picsum.photos/\">Lorem Picsum</a> : 假圖 API</li>\n<li><a href=\"https://restcountries.eu/#api-endpoints-name\">REST Countries</a></li>\n<li><a href=\"https://designer.mocky.io/\">Mocky</a> : 創造測試 API</li>\n</ul>\n<h3 id=\"開源-線上資源\"><a href=\"#開源-線上資源\" class=\"headerlink\" title=\"開源/線上資源\"></a>開源/線上資源</h3><ul>\n<li><a href=\"https://www.worldlink.com.cn/zh_tw/osdir/pos?properties%5B55%5D%5B0%5D=1.html\">worldlink 實用開源</a></li>\n<li><a href=\"https://disqus.com/\">DISQUS</a> : 網站留言服務</li>\n<li><a href=\"https://r8.whiteboardfox.com/\">Whiteboard Fox</a> : 線上白板</li>\n<li><a href=\"http://www.yopmail.com/zh/\">YOPmail</a> : 暫時信箱</li>\n<li><a href=\"https://free.com.tw/\">免費資源網路社群</a></li>\n<li><a href=\"https://www.freemysqlhosting.net/\">Free MySQL hosting</a></li>\n<li><a href=\"https://www.000webhost.com/\">000webhost</a></li>\n<li><a href=\"https://blog.xuite.net/jason_kuso/kuso/39506759\">申請一個屬於自己的自由網域-TWBBS.org</a></li>\n<li><a href=\"https://upload.cc/\">Upload.cc: 免費圖片上傳網</a></li>\n</ul>\n<h3 id=\"技術網站\"><a href=\"#技術網站\" class=\"headerlink\" title=\"技術網站\"></a>技術網站</h3><ul>\n<li><a href=\"https://www.php.net/manual/en/\">PHP manual</a></li>\n<li><a href=\"https://www.php.net/manual/en/book.mysqli.php\">MySQL Improved Extension</a></li>\n<li><a href=\"https://www.phpclasses.org/\">PHP class</a></li>\n<li><a href=\"https://www.mysqltutorial.org/\">mySQL Tutorial</a></li>\n<li><a href=\"https://dev.mysql.com/\">MySQL</a></li>\n<li><a href=\"https://www.w3schools.com/html/default.asp\">W3School</a></li>\n<li><a href=\"https://www.w3school.com.cn/\">W3School 中文</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/HTML\">MDN Web Docs</a></li>\n<li><a href=\"https://www.fooish.com/html/\">Fooish 程式技術</a></li>\n<li><a href=\"https://blog.techbridge.cc/\">TechBridge 技術共筆部落格</a></li>\n<li><a href=\"https://www.wibibi.com/\">Wibibi 網頁設計百科</a></li>\n<li><a href=\"https://segmentfault.com/\">segmentfault</a></li>\n<li><a href=\"https://www.1ju.org/\">億聚網</a></li>\n<li><a href=\"https://www.oxxostudio.tw/\">oxxostudio</a></li>\n<li><a href=\"https://www.itread01.com/\">ITREAD01.COM</a></li>\n<li><a href=\"https://sites.google.com/site/phplearnmark/home\">PHP學習誌</a></li>\n<li><a href=\"https://www.jollen.org/php/\">Jollen’s PHP 專欄</a></li>\n<li><a href=\"https://www.webtech.tw/\">WEBTECH</a></li>\n<li><a href=\"https://juejin.cn/\">掘金</a></li>\n<li><a href=\"https://zh-tw.coderbridge.com/\">開發者技術內容創作分享與職涯發展平台</a></li>\n<li><a href=\"https://www.javatpoint.com/interview-questions-and-answers\">Interview Questions and Answers</a></li>\n<li><a href=\"https://www.javatpoint.com/javascript-tutorial\">Learn JavaScript Tutorial(Javatpoint)</a></li>\n</ul>\n<h3 id=\"文章\"><a href=\"#文章\" class=\"headerlink\" title=\"文章\"></a>文章</h3><h4 id=\"Book\"><a href=\"#Book\" class=\"headerlink\" title=\"Book\"></a>Book</h4><ul>\n<li><a href=\"https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/\">從ES6開始的JavaScrip學習生活</a></li>\n</ul>\n<h4 id=\"技術文章\"><a href=\"#技術文章\" class=\"headerlink\" title=\"技術文章\"></a>技術文章</h4><ul>\n<li><a href=\"https://medium.com/%E4%B8%80%E5%80%8B%E4%BA%BA%E7%9A%84%E6%96%87%E8%97%9D%E5%BE%A9%E8%88%88/pm%E7%AD%86%E8%A8%98-sketch-zeplin%E8%88%87slices%E5%88%87%E5%9C%96-cfcd509b3cd2\">Sketch、Zeplin與Slices切圖</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction?hl=zh-tw\">樹狀結構的建構、版面配置和繪製</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/performance/rendering/reduce-the-scope-and-complexity-of-style-calculations?hl=zh-tw\">減少樣式計算的範圍與複雜性</a></li>\n<li><a href=\"https://web.dev/vitals/\">Google Web Vitals 網站體驗核心指標Web</a></li>\n<li><a href=\"https://medium.com/%E5%BE%8C%E7%AB%AF%E6%96%B0%E6%89%8B%E6%9D%91/%E7%B3%BB%E7%B5%B1%E8%A8%AD%E8%A8%88%E5%AD%B8%E7%BF%92%E5%9C%B0%E5%9C%96-de216ab211fb\">系統設計學習地圖</a></li>\n<li><a href=\"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-TW.md\">系統設計入門</a></li>\n<li><a href=\"https://juejin.cn/post/6844903679389073415\">現代瀏覽器內部揭秘</a></li>\n<li><a href=\"https://juejin.cn/post/6987549240436195364\">脚撕专有钉钉前端面试题</a></li>\n<li><a href=\"https://www.zuaneducation.com/blog/category/front-end-development/\">zuaneducation-Frontend</a></li>\n<li><a href=\"https://hacks.mozilla.org/category/es6-in-depth/\">ES6 In Depth Articles</a></li>\n</ul>\n<h4 id=\"Blog\"><a href=\"#Blog\" class=\"headerlink\" title=\"Blog\"></a>Blog</h4><ul>\n<li><a href=\"https://blog.xuite.net/jason_kuso/kuso\">無中生有</a></li>\n<li><a href=\"https://medium.com/i-am-mike\">I am Mike</a></li>\n<li><a href=\"https://www.ioa.tw/\">OA’s</a></li>\n<li><a href=\"https://blog.toright.com/\">toright</a></li>\n<li><a href=\"https://pjchender.dev/\">PJCHENder</a></li>\n<li><a href=\"https://www.huanlintalk.com/\">Huanlin學習筆記</a></li>\n<li><a href=\"https://www.ruanyifeng.com/blog/javascript/\">阮一峰的網絡日誌</a></li>\n</ul>\n<h4 id=\"未歸類\"><a href=\"#未歸類\" class=\"headerlink\" title=\"未歸類\"></a>未歸類</h4><ul>\n<li><a href=\"https://github.com/sparanoid/chinese-copywriting-guidelines\">中文文案排版指北</a></li>\n<li><a href=\"https://zh-tw.coderbridge.com/\">CoderBridge 技術內容創作分享學習平台</a></li>\n<li><a href=\"https://developers.google.com/search/docs\">google 文件</a></li>\n<li><a href=\"https://dev.to/\">DEV</a></li>\n<li><a href=\"https://www.moo.com/\">moo.com</a> : business card</li>\n<li><a href=\"https://www.canva.com/zh_tw/\">Canva</a> : business card</li>\n<li><a href=\"https://venmo.com/\">vwnmo</a></li>\n<li><a href=\"https://www.fiverr.com/\">fiverr</a></li>\n</ul>\n<p>co-working space<br>PayPal and Stripe</p>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><h4 id=\"Idea\"><a href=\"#Idea\" class=\"headerlink\" title=\"Idea\"></a>Idea</h4><ul>\n<li><a href=\"https://www.ichannels.com.tw/main-index.php?member=af000095117\">iChannels</a> : 聯盟行銷(Affiliate Marketing)</li>\n<li><a href=\"https://www.canva.com/zh_tw/\">Canva</a>:建立社群媒體圖形、簡報、海報、文件和其他視覺內容的平面設計平台</li>\n<li><a href=\"https://deanlife.blog/\">DR.DREAM</a></li>\n</ul>\n<h4 id=\"Job\"><a href=\"#Job\" class=\"headerlink\" title=\"Job\"></a>Job</h4><ul>\n<li><a href=\"https://www.upwork.com/\">Upwork</a></li>\n<li><a href=\"https://github.com/f2etw/jobs/issues\">F2E TW</a></li>\n<li><a href=\"https://www.yourator.co/\">yourator</a></li>\n<li><a href=\"https://www.cakeresume.com/search?query=%E5%89%8D%E7%AB%AF&page=1\">CakeResume</a></li>\n<li><a href=\"https://www.toptal.com/front-end\">Toptal</a></li>\n</ul>\n<h4 id=\"題庫\"><a href=\"#題庫\" class=\"headerlink\" title=\"題庫\"></a>題庫</h4><ul>\n<li><a href=\"https://gitbook.tw/interview\">Git 面試題</a></li>\n</ul>\n<h4 id=\"影音\"><a href=\"#影音\" class=\"headerlink\" title=\"影音\"></a>影音</h4><ul>\n<li><a href=\"https://tv.wfuapp.com/\">線上看電視</a></li>\n</ul>\n","categories":["設計參考"],"tags":["web"]},{"title":"Virtualbox virtio-net(半虛擬化網路) 安裝","url":"/2021/04/09/virtualbox-1/","content":"<h3 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h3><ul>\n<li>提供更快的網路傳輸速度</li>\n<li>若外層host以VPN連接,virtual host 也相當於以 VPN 連接</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"下載\"><a href=\"#下載\" class=\"headerlink\" title=\"下載\"></a>下載</h3><p><a href=\"https://github.com/virtio-win/virtio-win-pkg-scripts/blob/master/README.md\">virtio-net driver</a><br><a href=\"https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/virtio-win-0.1.102/\">virtio-win-0.1.102</a></p>\n<ul>\n<li>Select Stable virtio-win ISO</li>\n<li>我安裝的是 Win7, 當下抓的是 virtio-win-0.1.185.iso 但安裝有問題, 最後試 virtio-win-0.1.102.iso 結果 ok</li>\n</ul>\n<h3 id=\"VirtualBox-網路設定\"><a href=\"#VirtualBox-網路設定\" class=\"headerlink\" title=\"VirtualBox 網路設定\"></a>VirtualBox 網路設定</h3><div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h3 id=\"Insert-driver-ISO-to-virtualbox-CD\"><a href=\"#Insert-driver-ISO-to-virtualbox-CD\" class=\"headerlink\" title=\"Insert driver ISO to virtualbox CD\"></a>Insert driver ISO to virtualbox CD</h3><div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<h3 id=\"Install-driver\"><a href=\"#Install-driver\" class=\"headerlink\" title=\"Install driver\"></a>Install driver</h3><div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pica.png\" class=\"\" title=\"pica\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/picb.png\" class=\"\" title=\"picb\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/picc.png\" class=\"\" title=\"pica\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/picd.png\" class=\"\" title=\"picd\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/pice.png\" class=\"\" title=\"pice\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/09/virtualbox-1/picf.png\" class=\"\" title=\"picf\">\n</div>\n\n<h3 id=\"參考文件\"><a href=\"#參考文件\" class=\"headerlink\" title=\"參考文件\"></a>參考文件</h3><ul>\n<li><a href=\"https://orzalanluo.com/?p=289\">Windows 7 建立包含VirtIO驅動的iso檔</a></li>\n</ul>\n","categories":["application"],"tags":["virtualbox"]},{"title":"VSCode","url":"/2021/04/19/vscode-1/","content":"<h3 id=\"快速鍵\"><a href=\"#快速鍵\" class=\"headerlink\" title=\"快速鍵\"></a>快速鍵</h3><ul>\n<li>跳至 Command line : ctrl+shift+p 或 F1</li>\n<li>全螢幕切換 : F11</li>\n<li>搜尋檔案 : Ctrl + P</li>\n</ul>\n<hr>\n<ul>\n<li>移動整行程式碼 : Alt + ↑ 或 Alt + ↓</li>\n<li>重整程式排列 : shift + alt + F</li>\n<li>設註解 : ctrl+/ </li>\n<li>跳至某一行 : Ctrl+G</li>\n<li>多行編輯-選擇行   :  alt+(mouse-left)</li>\n<li>多行編輯-選擇多行 :  alt+shift+(mouse-left) 移動位置</li>\n<li>左移一個字 : Ctrl + Left</li>\n<li>右移一個字 : Ctrl + Right</li>\n<li>編輯所有符合字串 : 選擇字串 –&gt; Ctrl + shift + L</li>\n<li>編輯下一個符合字串 : 選擇字串 –&gt; Ctrl + D</li>\n<li>移除前一個編輯符合字串 : 選擇字串 –&gt; Ctrl + U</li>\n<li>選擇一整行 : Ctrl + L</li>\n<li>複製區塊(前面/後面) : Shift + Alt + UP/DOWN</li>\n</ul>\n<hr>\n<ul>\n<li>切換左邊功能表(sidebar) : Crtl + B</li>\n<li>分割畫面 : Ctrl + \\</li>\n<li>開關 terminal : Ctrl + ` (反引號)</li>\n<li>關閉所有檔案 : Ctrl + K + W</li>\n<li>儲存檔案   : Ctrl + s</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"Package-Usage-ctrl-shift-p-F1-跳至-Command-line\"><a href=\"#Package-Usage-ctrl-shift-p-F1-跳至-Command-line\" class=\"headerlink\" title=\"Package Usage (ctrl+shift+p/F1 跳至 Command line)\"></a>Package Usage (ctrl+shift+p/F1 跳至 Command line)</h3><h4 id=\"default\"><a href=\"#default\" class=\"headerlink\" title=\"default\"></a>default</h4><ul>\n<li>移除每行後面的空白 - Trailing spaces not allowed<br>Press <code>F1</code> –&gt; <code>Trim Trailing Whitespace</code></li>\n</ul>\n<h4 id=\"GitHD\"><a href=\"#GitHD\" class=\"headerlink\" title=\"GitHD\"></a>GitHD</h4><ul>\n<li>View History : 看 history, 看檔案與前版差異</li>\n<li>View File History : 看 某檔案有關 history, 看檔案與前版差異</li>\n</ul>\n<h4 id=\"Untabify-Replace-tabs-with-spaces-and-vice-versa\"><a href=\"#Untabify-Replace-tabs-with-spaces-and-vice-versa\" class=\"headerlink\" title=\"Untabify - Replace tabs with spaces and vice versa.\"></a>Untabify - Replace tabs with spaces and vice versa.</h4><ul>\n<li>table –&gt; space</li>\n</ul>\n<ol>\n<li>open file</li>\n<li>Press <code>F1</code> –&gt; <code>Untabify</code> –&gt; <code>Enter</code> –&gt; <code>number</code>(for spece) –&gt; <code>Enter</code></li>\n</ol>\n<ul>\n<li>space –&gt; table</li>\n</ul>\n<ol>\n<li>open file</li>\n<li>Press <code>F1</code> –&gt; <code>Tabify</code> –&gt; <code>Enter</code> –&gt; <code>number</code>(for spece) –&gt; <code>Enter</code></li>\n</ol>\n<h3 id=\"設定\"><a href=\"#設定\" class=\"headerlink\" title=\"設定\"></a>設定</h3><div style=\"width:700px\">\n    <img src=\"/2021/04/19/vscode-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h4 id=\"設定-中文介面\"><a href=\"#設定-中文介面\" class=\"headerlink\" title=\"設定 中文介面\"></a>設定 中文介面</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">install package Chinese(traditional) Lanaguage Pack</span><br><span class=\"line\">ctrl+<span class=\"built_in\">shift</span>+p --&gt; configure Display Language zh-TW</span><br><span class=\"line\">重新啟動 VSCode</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"show-CR-tab-space\"><a href=\"#show-CR-tab-space\" class=\"headerlink\" title=\"show CR/tab/space\"></a>show CR/tab/space</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Commonly Used --&gt; Editor:Render Whitespace</span><br><span class=\"line\">\tnone : no show</span><br><span class=\"line\">\tall  : show</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"tab-change-space-no\"><a href=\"#tab-change-space-no\" class=\"headerlink\" title=\"tab change space(no)\"></a>tab change space(no)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Commonly Used --&gt; Editor:Insert Spaces</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"set-indent-using-tabs-no\"><a href=\"#set-indent-using-tabs-no\" class=\"headerlink\" title=\"set indent using tabs(no)\"></a>set indent using tabs(no)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 檔案開啟自動偵測 indentation </span></span><br><span class=\"line\">Text Editor --&gt; Detect indentation</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"table-size\"><a href=\"#table-size\" class=\"headerlink\" title=\"table size\"></a>table size</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Commonly Used --&gt; Editor:Tab Size</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"VSCode-Show-Full-Path-in-Title-Bar\"><a href=\"#VSCode-Show-Full-Path-in-Title-Bar\" class=\"headerlink\" title=\"VSCode Show Full Path in Title Bar\"></a>VSCode Show Full Path in Title Bar</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Window -&gt; Title</span><br><span class=\"line\">default :</span><br><span class=\"line\">\tdefault : <span class=\"variable\">$&#123;dirty&#125;</span><span class=\"variable\">$&#123;activeEditorShort&#125;</span><span class=\"variable\">$&#123;separator&#125;</span><span class=\"variable\">$&#123;rootName&#125;</span><span class=\"variable\">$&#123;separator&#125;</span><span class=\"variable\">$&#123;appName&#125;</span></span><br><span class=\"line\">\tfull fath : <span class=\"variable\">$&#123;activeEditorLong&#125;</span><span class=\"variable\">$&#123;separator&#125;</span><span class=\"variable\">$&#123;rootName&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"自動換行\"><a href=\"#自動換行\" class=\"headerlink\" title=\"自動換行\"></a>自動換行</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Commonly Used --&gt; Editor:Word Wrap</span><br><span class=\"line\">\ton : 自動換行</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JSX-snippets\"><a href=\"#JSX-snippets\" class=\"headerlink\" title=\"JSX snippets\"></a>JSX snippets</h4><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;emmet.includeLanguages&quot;: &#123;</span><br><span class=\"line\">   &quot;javascript&quot;: &quot;javascriptreact&quot;</span><br><span class=\"line\"> &#125;,</span><br><span class=\"line\">&quot;emmet.triggerExpansionOnTab&quot;: true,</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Plug\"><a href=\"#Plug\" class=\"headerlink\" title=\"Plug\"></a>Plug</h3><ul>\n<li>Live Server : Web server</li>\n<li>Chinese Lorem : 中文假字(fenerate by ctlorem)</li>\n<li>Live Sass Compiler : compile sas/scss(按 Watch Sass)</li>\n<li>Indent-Rainbow : 縮排採紅色條</li>\n<li>Git History :  see git log</li>\n<li>colorize : color 可見可選</li>\n<li>WhatFont : 網頁字型、字體樣式自動偵測工具</li>\n</ul>\n","categories":["Coding"],"tags":["vscode","tool"]},{"title":"Windows 功能","url":"/2021/04/13/win10-1/","content":"<h3 id=\"Win10-藍芽耳機加入及移除\"><a href=\"#Win10-藍芽耳機加入及移除\" class=\"headerlink\" title=\"Win10 藍芽耳機加入及移除\"></a>Win10 藍芽耳機加入及移除</h3><h4 id=\"藍芽耳機加入\"><a href=\"#藍芽耳機加入\" class=\"headerlink\" title=\"藍芽耳機加入\"></a>藍芽耳機加入</h4><span id=\"more\"></span>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n\n<h4 id=\"藍芽耳機移除\"><a href=\"#藍芽耳機移除\" class=\"headerlink\" title=\"藍芽耳機移除\"></a>藍芽耳機移除</h4><div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n<div style=\"width:500px\">\n    <img src=\"/2021/04/13/win10-1/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n\n<h3 id=\"Windows-截圖-screenshot\"><a href=\"#Windows-截圖-screenshot\" class=\"headerlink\" title=\"Windows 截圖 screenshot\"></a>Windows 截圖 screenshot</h3><p><code>Win</code> + <code>Shif</code> + <code>S</code></p>\n<h3 id=\"中文標點號輸入\"><a href=\"#中文標點號輸入\" class=\"headerlink\" title=\"中文標點號輸入\"></a>中文標點號輸入</h3><h4 id=\"快捷鍵\"><a href=\"#快捷鍵\" class=\"headerlink\" title=\"快捷鍵\"></a>快捷鍵</h4><table>\n<thead>\n<tr>\n<th>標點符號</th>\n<th>名稱</th>\n<th>快速鍵</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>，</td>\n<td>逗號</td>\n<td>Ctrl + ,</td>\n</tr>\n<tr>\n<td>。</td>\n<td>句號</td>\n<td>Ctrl + .</td>\n</tr>\n<tr>\n<td>、</td>\n<td>頓號</td>\n<td>Ctrl + ‘</td>\n</tr>\n<tr>\n<td>；</td>\n<td>分號</td>\n<td>Ctrl + ;</td>\n</tr>\n<tr>\n<td>：</td>\n<td>冒號</td>\n<td>Ctrl + Shift + ;</td>\n</tr>\n<tr>\n<td>？</td>\n<td>問號</td>\n<td>Ctrl + Shift + /</td>\n</tr>\n<tr>\n<td>！</td>\n<td>驚嘆號</td>\n<td>Ctrl + Shift + 1</td>\n</tr>\n</tbody></table>\n<h4 id=\"前導鍵\"><a href=\"#前導鍵\" class=\"headerlink\" title=\"前導鍵\"></a>前導鍵</h4><table>\n<thead>\n<tr>\n<th>標點符號</th>\n<th>名稱</th>\n<th>前導字元的輸入方式</th>\n<th>備註</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>。</td>\n<td>句號</td>\n<td>` .</td>\n<td></td>\n</tr>\n<tr>\n<td>，</td>\n<td>逗號</td>\n<td>` ,</td>\n<td></td>\n</tr>\n<tr>\n<td>、</td>\n<td>頓號</td>\n<td>` ‘</td>\n<td></td>\n</tr>\n<tr>\n<td>；</td>\n<td>分號</td>\n<td>` ;</td>\n<td></td>\n</tr>\n<tr>\n<td>：</td>\n<td>冒號</td>\n<td>` :</td>\n<td></td>\n</tr>\n<tr>\n<td>「</td>\n<td>左單引號</td>\n<td>` [ 2</td>\n<td></td>\n</tr>\n<tr>\n<td>」</td>\n<td>右單引號</td>\n<td>` ] 2</td>\n<td></td>\n</tr>\n<tr>\n<td>『</td>\n<td>左雙引號</td>\n<td>` [ 3</td>\n<td></td>\n</tr>\n<tr>\n<td>』</td>\n<td>右雙引號</td>\n<td>` ] 3</td>\n<td></td>\n</tr>\n<tr>\n<td>（</td>\n<td>左夾注號</td>\n<td>` (</td>\n<td>為狐形括狐</td>\n</tr>\n<tr>\n<td>）</td>\n<td>右夾注號</td>\n<td>` )</td>\n<td>為狐形括狐</td>\n</tr>\n<tr>\n<td>？</td>\n<td>問號</td>\n<td>` ?</td>\n<td></td>\n</tr>\n<tr>\n<td>！</td>\n<td>驚嘆號</td>\n<td>` !</td>\n<td></td>\n</tr>\n<tr>\n<td>─</td>\n<td>破折號</td>\n<td>請見後面說明</td>\n<td>須連續兩個符號構成</td>\n</tr>\n<tr>\n<td>…</td>\n<td>刪節號</td>\n<td>` - 7</td>\n<td>須連續兩個符號構成</td>\n</tr>\n<tr>\n<td>《</td>\n<td>左書名號</td>\n<td>` &lt; 3</td>\n<td></td>\n</tr>\n<tr>\n<td>》</td>\n<td>右書名號</td>\n<td>` &gt; 3</td>\n<td></td>\n</tr>\n<tr>\n<td>〈</td>\n<td>左篇名號</td>\n<td>` &lt; 2</td>\n<td></td>\n</tr>\n<tr>\n<td>〉</td>\n<td>右篇名號</td>\n<td>` &gt; 2</td>\n<td></td>\n</tr>\n<tr>\n<td>．</td>\n<td>間隔號</td>\n<td>` . 5</td>\n<td></td>\n</tr>\n<tr>\n<td>—</td>\n<td>連接號</td>\n<td>` - 5</td>\n<td>為一橫線</td>\n</tr>\n<tr>\n<td>～</td>\n<td>連接號</td>\n<td>` ~</td>\n<td>如同平躺的S</td>\n</tr>\n</tbody></table>\n","categories":["OS"],"tags":["windows","win10"]},{"title":"Window 7 工作列縮小","url":"/2021/03/12/win7-1/","content":"<h3 id=\"工作列–-gt-滑鼠右鍵–-gt-內容\"><a href=\"#工作列–-gt-滑鼠右鍵–-gt-內容\" class=\"headerlink\" title=\"工作列–&gt;滑鼠右鍵–&gt;內容\"></a>工作列–&gt;滑鼠右鍵–&gt;內容</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/12/win7-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n<span id=\"more\"></span>\n\n<h3 id=\"工作列–-gt-使用小圖示-勾選\"><a href=\"#工作列–-gt-使用小圖示-勾選\" class=\"headerlink\" title=\"工作列–&gt;使用小圖示(勾選)\"></a>工作列–&gt;使用小圖示(勾選)</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/12/win7-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n","categories":["OS"],"tags":["windows","win7"]},{"title":"Yarn","url":"/2021/05/03/yarn-1/","content":"<p>Yarn 是 Facebook 發佈的一款 JavaScript 套件管理工具，其功能與 npm 相同，速度較快</p>\n<h3 id=\"install-by-npm\"><a href=\"#install-by-npm\" class=\"headerlink\" title=\"install by npm\"></a>install by npm</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g yarn</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"command\"><a href=\"#command\" class=\"headerlink\" title=\"command\"></a><a href=\"https://classic.yarnpkg.com/en/docs/usage\">command</a></h3><h4 id=\"dump-version\"><a href=\"#dump-version\" class=\"headerlink\" title=\"dump version\"></a>dump version</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ yarn -v</span><br><span class=\"line\">1.22.10</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"init\"><a href=\"#init\" class=\"headerlink\" title=\"init\"></a>init</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ yarn init</span><br><span class=\"line\">yarn init v1.22.10</span><br><span class=\"line\">question name (js102):</span><br><span class=\"line\">question version (1.0.0):</span><br><span class=\"line\">question description:</span><br><span class=\"line\">question entry point (index.js):</span><br><span class=\"line\">question repository url:</span><br><span class=\"line\">question author:</span><br><span class=\"line\">question license (MIT):</span><br><span class=\"line\">question private:</span><br><span class=\"line\">success Saved package.json</span><br><span class=\"line\">Done <span class=\"keyword\">in</span> 4.51s.</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-package\"><a href=\"#add-package\" class=\"headerlink\" title=\"add package\"></a>add package</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ yarn add left-pad</span><br><span class=\"line\">yarn add v1.22.10</span><br><span class=\"line\">info No lockfile found.</span><br><span class=\"line\">[1/4] Resolving packages...</span><br><span class=\"line\">warning left-pad@1.3.0: use String.prototype.padStart()</span><br><span class=\"line\">[2/4] Fetching packages...</span><br><span class=\"line\">[3/4] Linking dependencies...</span><br><span class=\"line\">[4/4] Building fresh packages...</span><br><span class=\"line\">success Saved lockfile.</span><br><span class=\"line\">success Saved 1 new dependency.</span><br><span class=\"line\">info Direct dependencies</span><br><span class=\"line\">└─ left-pad@1.3.0</span><br><span class=\"line\">info All dependencies</span><br><span class=\"line\">└─ left-pad@1.3.0</span><br><span class=\"line\">Done <span class=\"keyword\">in</span> 0.43s.</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"remove-package\"><a href=\"#remove-package\" class=\"headerlink\" title=\"remove package\"></a>remove package</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ yarn remove left-pad</span><br><span class=\"line\">yarn remove v1.22.10</span><br><span class=\"line\">[1/2] Removing module left-pad...</span><br><span class=\"line\">[2/2] Regenerating lockfile and installing missing dependencies...</span><br><span class=\"line\">success Uninstalled packages.</span><br><span class=\"line\">Done <span class=\"keyword\">in</span> 0.17s.</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"run-script-example\"><a href=\"#run-script-example\" class=\"headerlink\" title=\"run script example\"></a>run script example</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> leftPad = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;left-pad&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// insert 0 before number </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(leftPad(<span class=\"number\">123</span>, <span class=\"number\">10</span>, <span class=\"string\">&#x27;0&#x27;</span>))</span><br></pre></td></tr></table></figure>\n\n<p>package.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;js102&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;start&quot;</span>: <span class=\"string\">&quot;node index.js&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;MIT&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;dependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;left-pad&quot;</span>: <span class=\"string\">&quot;^1.3.0&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ yarn run start</span><br><span class=\"line\">yarn run v1.22.10</span><br><span class=\"line\">$ node index.js</span><br><span class=\"line\">0000000123</span><br><span class=\"line\">Done <span class=\"keyword\">in</span> 0.18s.</span><br></pre></td></tr></table></figure>","categories":["Front End"],"tags":["node.js","yarn"]},{"title":"Git 說明","url":"/2021/03/22/git-2/","content":"<h2 id=\"基本原理\"><a href=\"#基本原理\" class=\"headerlink\" title=\"基本原理\"></a>基本原理</h2><h3 id=\"Git儲存每次專案更新時的快照\"><a href=\"#Git儲存每次專案更新時的快照\" class=\"headerlink\" title=\"Git儲存每次專案更新時的快照\"></a>Git儲存每次專案更新時的快照</h3><p>檔案沒有變更，Git不會再度儲存該檔案，而是記錄到前一次的相同檔案的連結。</p>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/22/git-2/pic1.jpg\" class=\"\" title=\"pic1\">\n</div>\n\n<span id=\"more\"></span>\n<h3 id=\"三種狀態\"><a href=\"#三種狀態\" class=\"headerlink\" title=\"三種狀態\"></a>三種狀態</h3><p>已修改(modified),已暫存(staged)及已提交(committed)</p>\n<div style=\"width:500px\">\n    <img src=\"/2021/03/22/git-2/pic2.jpg\" class=\"\" title=\"pic2\">\n</div>\n\n\n\n<h2 id=\"config-設定\"><a href=\"#config-設定\" class=\"headerlink\" title=\"config 設定\"></a>config 設定</h2><h3 id=\"config-種類及位置-windows\"><a href=\"#config-種類及位置-windows\" class=\"headerlink\" title=\"config 種類及位置(windows)\"></a>config 種類及位置(windows)</h3><p>project &gt; global &gt; system</p>\n<ul>\n<li>system - C:\\ProgramData\\Git\\config</li>\n<li>global - C:\\Users\\$YourName\\.gitconfig</li>\n<li>project - .git/config</li>\n</ul>\n<h3 id=\"config-命令\"><a href=\"#config-命令\" class=\"headerlink\" title=\"config 命令\"></a>config 命令</h3><h4 id=\"global\"><a href=\"#global\" class=\"headerlink\" title=\"global\"></a>global</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 設定 global 用戶名稱/電子郵件</span></span><br><span class=\"line\">git config --global user.name <span class=\"string\">&quot;Robert Kao&quot;</span></span><br><span class=\"line\">git config --global user.email robert@example.com</span><br><span class=\"line\"><span class=\"comment\"># 顯示 global 用戶名稱/電子郵件</span></span><br><span class=\"line\">git config --global --get user.name</span><br><span class=\"line\">git config --global --get user.email</span><br><span class=\"line\">git config --global user.name</span><br><span class=\"line\">git config --global user.email</span><br><span class=\"line\"><span class=\"comment\"># 顯示 global 設定內容</span></span><br><span class=\"line\">git config --global --list</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"project\"><a href=\"#project\" class=\"headerlink\" title=\"project\"></a>project</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 設定 project 用戶名稱/電子郵件</span></span><br><span class=\"line\">git config user.name <span class=\"string\">&quot;Your project specific name&quot;</span></span><br><span class=\"line\">git config user.email <span class=\"string\">&quot;your@project-specific-email.com&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 顯示 project 用戶名稱/電子郵件</span></span><br><span class=\"line\">git config --get user.name</span><br><span class=\"line\">git config --get user.email</span><br><span class=\"line\">git config user.name</span><br><span class=\"line\">git config user.email</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"檢查所有設定值\"><a href=\"#檢查所有設定值\" class=\"headerlink\" title=\"檢查所有設定值\"></a>檢查所有設定值</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --list</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"指定編輯器-本人少用\"><a href=\"#指定編輯器-本人少用\" class=\"headerlink\" title=\"指定編輯器(本人少用)\"></a>指定編輯器(本人少用)</h4><p>Git會使用系統預設的編輯器，一般來說是Vi或Vim(commit 未加 -m 時使用)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 如指定 Emacs</span></span><br><span class=\"line\">git config --global core.editor emacs</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"指定合併工具-本人未用\"><a href=\"#指定合併工具-本人未用\" class=\"headerlink\" title=\"指定合併工具(本人未用)\"></a>指定合併工具(本人未用)</h4><p>解決合併失敗時，讀者慣用的合併工具<br>Git能接受kdiff3、tkdiff、meld、xxdiff、emerge、vimdiff、gvimdiff、ecmerge及opendiff做為合併工具</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 假設讀者想使用vimdiff</span></span><br><span class=\"line\">git config --global merge.tool vimdiff</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"基本操作\"><a href=\"#基本操作\" class=\"headerlink\" title=\"基本操作\"></a>基本操作</h2><h3 id=\"在現有目錄初始化儲存庫-repository\"><a href=\"#在現有目錄初始化儲存庫-repository\" class=\"headerlink\" title=\"在現有目錄初始化儲存庫(repository)\"></a>在現有目錄初始化儲存庫(repository)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 初始化儲存庫</span></span><br><span class=\"line\">git init</span><br><span class=\"line\"><span class=\"comment\"># 加入要加入的檔案</span></span><br><span class=\"line\">git add *.c</span><br><span class=\"line\"><span class=\"comment\"># 也可加入所有檔案</span></span><br><span class=\"line\">git add .</span><br><span class=\"line\"><span class=\"comment\"># 提交</span></span><br><span class=\"line\"> git commit -m <span class=\"string\">&#x27;initial project version&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"備份儲存庫到-GitHub\"><a href=\"#備份儲存庫到-GitHub\" class=\"headerlink\" title=\"備份儲存庫到 GitHub\"></a>備份儲存庫到 GitHub</h3><h4 id=\"備份到-GitHub\"><a href=\"#備份到-GitHub\" class=\"headerlink\" title=\"備份到 GitHub\"></a>備份到 GitHub</h4><p>GitHub 應預先建立 儲存庫</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># set origin </span></span><br><span class=\"line\">git remote add origin https://github.com/hot5656/rwd-pets.git</span><br><span class=\"line\"><span class=\"comment\"># 建立 master branch</span></span><br><span class=\"line\">git branch -M master</span><br><span class=\"line\"><span class=\"comment\"># push</span></span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"設定-GitHub-啟動靜態執行-若為網頁\"><a href=\"#設定-GitHub-啟動靜態執行-若為網頁\" class=\"headerlink\" title=\"設定 GitHub 啟動靜態執行(若為網頁)\"></a>設定 GitHub 啟動靜態執行(若為網頁)</h4><p>setting –&gt; GitHub Pages –&gt; source –&gt; master branch –&gt; Save</p>\n<h4 id=\"網頁位址-若為網頁\"><a href=\"#網頁位址-若為網頁\" class=\"headerlink\" title=\"網頁位址(若為網頁)\"></a>網頁位址(若為網頁)</h4><p><a href=\"https://hot5656.github.io/ajaxF2eCheckRegister/\">https://hot5656.github.io/ajaxF2eCheckRegister/</a></p>\n<h3 id=\"複製現有的儲存庫\"><a href=\"#複製現有的儲存庫\" class=\"headerlink\" title=\"複製現有的儲存庫\"></a>複製現有的儲存庫</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用 default 目錄名稱</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/hot5656/rwd-pets.git</span><br><span class=\"line\"><span class=\"comment\"># 使用 自定 目錄名稱</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/hot5656/rwd-pets.git rwd-web</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"提交更新到儲存庫\"><a href=\"#提交更新到儲存庫\" class=\"headerlink\" title=\"提交更新到儲存庫\"></a>提交更新到儲存庫</h3><div style=\"width:500px\">\n    <img src=\"/2021/03/22/git-2/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 檢視檔案的狀態</span></span><br><span class=\"line\">git status</span><br><span class=\"line\"><span class=\"comment\"># --&gt; 若檔案未加入的狀態為 untracked </span></span><br><span class=\"line\"><span class=\"comment\"># 加入後狀態為 staged</span></span><br><span class=\"line\">git add git-2.md</span><br><span class=\"line\"><span class=\"comment\"># --&gt; 若修改已被追蹤的檔案,狀態會變成unstaged(modify) </span></span><br><span class=\"line\"><span class=\"comment\"># 加入後狀態為 staged</span></span><br><span class=\"line\">git add benchmarks.rb</span><br><span class=\"line\"><span class=\"comment\"># commit 後,原 staged 檔案就會變成 unmodified</span></span><br><span class=\"line\"> git commit -m <span class=\"string\">&#x27;update 2021/02/22&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"忽略某些檔案\"><a href=\"#忽略某些檔案\" class=\"headerlink\" title=\"忽略某些檔案\"></a>忽略某些檔案</h3><p>.gitignore 可標示忽略檔案</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">.DS_Store</span><br><span class=\"line\">Thumbs.db</span><br><span class=\"line\">db.json</span><br><span class=\"line\">*.<span class=\"built_in\">log</span></span><br><span class=\"line\">node_modules/</span><br><span class=\"line\">public/</span><br><span class=\"line\">.deploy*/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"本地參考儲存庫\"><a href=\"#本地參考儲存庫\" class=\"headerlink\" title=\"本地參考儲存庫\"></a>本地參考儲存庫</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git show-ref</span><br><span class=\"line\">\td9c9e57d12c9dbdc1b9445fa3333cd7e637c888d refs/heads/master</span><br><span class=\"line\">\td9c9e57d12c9dbdc1b9445fa3333cd7e637c888d refs/heads/serverfix</span><br><span class=\"line\">\t7369a897219619143420b24c9df7383ddca643a2 refs/remotes/origin/HEAD</span><br><span class=\"line\">\t7369a897219619143420b24c9df7383ddca643a2 refs/remotes/origin/master</span><br><span class=\"line\">\t37d73f1a945ece85dffe798ba7ae43733bf1f4aa refs/remotes/team/master</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"提交的歷史記錄\"><a href=\"#提交的歷史記錄\" class=\"headerlink\" title=\"提交的歷史記錄\"></a>提交的歷史記錄</h3><h4 id=\"檢視提交的歷史記錄\"><a href=\"#檢視提交的歷史記錄\" class=\"headerlink\" title=\"檢視提交的歷史記錄\"></a>檢視提交的歷史記錄</h4><p>從新到舊的順序列出儲存庫的提交的歷史記錄</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span></span><br><span class=\"line\"><span class=\"comment\"># -p 顯示更新差異</span></span><br><span class=\"line\"><span class=\"comment\"># -2 顯示最後兩筆更新</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> -p -2</span><br><span class=\"line\"><span class=\"comment\"># -U1 僅顯示有更動的部分</span></span><br><span class=\"line\"><span class=\"comment\"># --word-diff 顯示差異性</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> -U1 --word-diff</span><br><span class=\"line\"><span class=\"comment\"># 列出被更動的檔案、有多少檔案被更動，以及有多行列被加入或移出該檔案。 也會在最後印出摘要的訊息</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --<span class=\"built_in\">stat</span></span><br><span class=\"line\"><span class=\"comment\"># 選項 --pretty :　oneline, short, full, fuller</span></span><br><span class=\"line\"><span class=\"comment\"># oneline 選項將每一個更新印到單獨一行</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --pretty=oneline</span><br><span class=\"line\"><span class=\"comment\"># format，允許讀者指定自訂的輸出格式。 當需要輸出給機器分析時特別有用</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --pretty=format:<span class=\"string\">&quot;%h - %an, %ar : %s&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># --graph 的選項特別有用。 該選項以 ASCII 畫出分支的分歧及合併的歷史</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --pretty=format:<span class=\"string\">&quot;%h %s&quot;</span> --graph</span><br><span class=\"line\"><span class=\"comment\"># --since 及 --until 限制時間的選項</span></span><br><span class=\"line\"><span class=\"comment\"># 列出最近兩週的更新</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --since=2.weeks</span><br></pre></td></tr></table></figure>\n\n<p>format 支援的選項</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 作者 是完成該工作的人，而 提交者 則是最後將該工作提交出來的人</span></span><br><span class=\"line\">選項\t選項的說明</span><br><span class=\"line\">%H\t該更新的SHA1雜湊值</span><br><span class=\"line\">%h\t該更新的簡短SHA1雜湊值</span><br><span class=\"line\">%T\t存放該更新的根目錄的Tree物件的SHA1雜湊值</span><br><span class=\"line\">%t\t存放該更新的根目錄的Tree物件的簡短SHA1雜湊值</span><br><span class=\"line\">%P\t該更新的父更新的SHA1雜湊值</span><br><span class=\"line\">%p\t該更新的父更新的簡短SHA1雜湊值</span><br><span class=\"line\">%an\t作者名字</span><br><span class=\"line\">%ae\t作者電子郵件</span><br><span class=\"line\">%ad\t作者的日期 (格式依據 date 選項而不同)</span><br><span class=\"line\">%ar\t相對於目前時間的作者的日期</span><br><span class=\"line\">%cn\t提交者的名字</span><br><span class=\"line\">%ce\t提交者的電子郵件</span><br><span class=\"line\">%<span class=\"built_in\">cd</span>\t提交的日期</span><br><span class=\"line\">%cr\t相對於目前時間的提交的日期</span><br><span class=\"line\">%s\t標題 </span><br></pre></td></tr></table></figure>\n\n<p>目前涵蓋的及一些可能有用的格式選項</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">選項\t選項的說明</span><br><span class=\"line\">-p\t顯示每個更新與上一個的差異。</span><br><span class=\"line\">--word-diff\t使用 word diff 格式顯示 patch 內容。</span><br><span class=\"line\">--<span class=\"built_in\">stat</span>\t顯示每個更新更動的檔案的統計及摘要資訊。</span><br><span class=\"line\">--shortstat\t僅顯示--<span class=\"built_in\">stat</span>提供的的訊息中關於更動、插入、刪除的文字。</span><br><span class=\"line\">--name-only\t在更新的訊息後方顯示更動的檔案列表。</span><br><span class=\"line\">--name-status\t顯示新增、更動、刪除的檔案列表。</span><br><span class=\"line\">--abbrev-commit\t僅顯示SHA1查核值的前幾位數，而不是顯示全部的40位數。</span><br><span class=\"line\">--relative-date\t以相對於目前時間方式顯示日期（例如：“2 weeks ago”），而不是完整的日期格式。</span><br><span class=\"line\">--graph\t以 ASCII 在 <span class=\"built_in\">log</span> 輸出旁邊畫出分支的分歧及合併。</span><br><span class=\"line\">--pretty\t以其它格式顯示更新。 可用的選項包含oneline、short、full、fuller及可自訂格式的format。</span><br><span class=\"line\">--oneline\t`--pretty=oneline --abbrev-commit` 的簡短用法。</span><br></pre></td></tr></table></figure>\n\n<p>其它常見選項</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">選項\t選項的說明文字</span><br><span class=\"line\">-(n)\t僅顯示最後 n 個更新</span><br><span class=\"line\">--since, --after\t列出特定日期後的更新。</span><br><span class=\"line\">--until, --before\t列出特定日期前的更新。</span><br><span class=\"line\">--author\t列出作者名稱符合指定字串的更新。</span><br><span class=\"line\">--committer\t列出提交者名稱符合指定字串的更新</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"顯示每個指令的-SHA-1-值\"><a href=\"#顯示每個指令的-SHA-1-值\" class=\"headerlink\" title=\"顯示每個指令的 SHA-1 值\"></a>顯示每個指令的 SHA-1 值</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git reflog</span><br><span class=\"line\">\t8ad28b8 (HEAD -&gt; backup) HEAD@&#123;0&#125;: commit (amend): update 2021/3/23</span><br><span class=\"line\">\tfe335c2 HEAD@&#123;1&#125;: reset: moving to fe335c2</span><br><span class=\"line\">\tfe335c2 HEAD@&#123;2&#125;: reset: moving to fe335c2</span><br><span class=\"line\">\tfe335c2 HEAD@&#123;3&#125;: reset: moving to fe335c2</span><br><span class=\"line\">\tfe335c2 HEAD@&#123;4&#125;: reset: moving to fe335c2</span><br><span class=\"line\">\tfe335c2 HEAD@&#123;5&#125;: reset: moving to fe335c2</span><br><span class=\"line\">\tfe335c2 HEAD@&#123;6&#125;: commit (amend): update 2021/3/23</span><br><span class=\"line\">\t58e7265 HEAD@&#123;7&#125;: commit (amend): update 2021/3/23</span><br><span class=\"line\">\td37689e HEAD@&#123;8&#125;: commit: update 2021/3/23</span><br><span class=\"line\">\t155415a (origin/backup) HEAD@&#123;9&#125;: commit: update 2021/03/22</span><br><span class=\"line\">\t5e79348 HEAD@&#123;10&#125;: pull: Fast-forward</span><br><span class=\"line\">\t3d7d128 HEAD@&#123;11&#125;: commit: update 2021/03/19</span><br><span class=\"line\">\tb115098 HEAD@&#123;12&#125;: commit: update 2021/03/18</span><br><span class=\"line\">\t943a44a HEAD@&#123;13&#125;: pull: Fast-forward</span><br><span class=\"line\">\tc16e900 HEAD@&#123;14&#125;: commit: update 1021/02/16</span><br><span class=\"line\">\t7bf66fc HEAD@&#123;15&#125;: commit: add some hexo, categories and tags</span><br><span class=\"line\">\t83a54ad HEAD@&#123;16&#125;: commit (initial): 1st commit</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"使用圖形界面檢視歷史\"><a href=\"#使用圖形界面檢視歷史\" class=\"headerlink\" title=\"使用圖形界面檢視歷史\"></a>使用圖形界面檢視歷史</h4><p>基本上就是 git log 的圖形界面版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gitk</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"復原\"><a href=\"#復原\" class=\"headerlink\" title=\"復原\"></a>復原</h3><h4 id=\"更動最後一筆-commit-–amend\"><a href=\"#更動最後一筆-commit-–amend\" class=\"headerlink\" title=\"更動最後一筆 commit(–amend)\"></a>更動最後一筆 commit(–amend)</h4><p>可更改 commit 說明 或 加入檔案</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git commit -m <span class=\"string\">&#x27;initial commit&#x27;</span></span><br><span class=\"line\">git add forgotten_file</span><br><span class=\"line\">git commit --amend</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"復原已被-staged-檔案\"><a href=\"#復原已被-staged-檔案\" class=\"headerlink\" title=\"復原已被 staged 檔案\"></a>復原已被 staged 檔案</h4><p>檔案要加路徑名,不然不會有反應</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git status</span><br><span class=\"line\">\tOn branch backup</span><br><span class=\"line\">\tYour branch is ahead of <span class=\"string\">&#x27;origin/backup&#x27;</span> by 1 commit.</span><br><span class=\"line\">\t(use <span class=\"string\">&quot;git push&quot;</span> to publish your <span class=\"built_in\">local</span> commits)</span><br><span class=\"line\">\tChanges to be committed:</span><br><span class=\"line\">\t(use <span class=\"string\">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class=\"line\">\t\t\tmodified:   <span class=\"built_in\">source</span>/_posts/git-2.md</span><br><span class=\"line\"><span class=\"comment\"># git reset HEAD &lt;file&gt;</span></span><br><span class=\"line\">git reset HEAD <span class=\"built_in\">source</span>/_posts/git-2.md</span><br><span class=\"line\">git status</span><br><span class=\"line\">\tOn branch backup</span><br><span class=\"line\">\tYour branch is ahead of <span class=\"string\">&#x27;origin/backup&#x27;</span> by 1 commit.</span><br><span class=\"line\">\t(use <span class=\"string\">&quot;git push&quot;</span> to publish your <span class=\"built_in\">local</span> commits)</span><br><span class=\"line\">\tChanges to be committed:</span><br><span class=\"line\">\t(use <span class=\"string\">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class=\"line\">\t\t\tmodified:   <span class=\"built_in\">source</span>/_posts/git-2.md</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"復原已更動的檔案-discard-unstaged-檔案\"><a href=\"#復原已更動的檔案-discard-unstaged-檔案\" class=\"headerlink\" title=\"復原已更動的檔案(discard unstaged 檔案)\"></a>復原已更動的檔案(discard unstaged 檔案)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># git status 提供命令</span></span><br><span class=\"line\">git status</span><br><span class=\"line\">\tOn branch backup</span><br><span class=\"line\">\tYour branch is ahead of <span class=\"string\">&#x27;origin/backup&#x27;</span> by 1 commit.</span><br><span class=\"line\">\t\t(use <span class=\"string\">&quot;git push&quot;</span> to publish your <span class=\"built_in\">local</span> commits)</span><br><span class=\"line\">\tChanges not staged <span class=\"keyword\">for</span> commit:</span><br><span class=\"line\">\t\t(use <span class=\"string\">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class=\"line\">\t\t(use <span class=\"string\">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class=\"keyword\">in</span> working directory)</span><br><span class=\"line\">\t\t\tmodified:   <span class=\"built_in\">source</span>/_posts/git-2.md</span><br><span class=\"line\">\t\t\tmodified:   <span class=\"built_in\">source</span>/_posts/git-3.md</span><br><span class=\"line\">\tno changes added to commit (use <span class=\"string\">&quot;git add&quot;</span> and/or <span class=\"string\">&quot;git commit -a&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># git restore &lt;file&gt;</span></span><br><span class=\"line\">git restore <span class=\"built_in\">source</span>/_posts/git-3.md</span><br><span class=\"line\">git status</span><br><span class=\"line\">\tOn branch backup</span><br><span class=\"line\">\tYour branch is ahead of <span class=\"string\">&#x27;origin/backup&#x27;</span> by 1 commit.</span><br><span class=\"line\">\t\t(use <span class=\"string\">&quot;git push&quot;</span> to publish your <span class=\"built_in\">local</span> commits)</span><br><span class=\"line\"></span><br><span class=\"line\">\tChanges not staged <span class=\"keyword\">for</span> commit:</span><br><span class=\"line\">\t\t(use <span class=\"string\">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class=\"line\">\t\t(use <span class=\"string\">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class=\"keyword\">in</span> working directory)</span><br><span class=\"line\">\t\t\tmodified:   <span class=\"built_in\">source</span>/_posts/git-2.md</span><br><span class=\"line\">\tno changes added to commit (use <span class=\"string\">&quot;git add&quot;</span> and/or <span class=\"string\">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"遠端協同運作\"><a href=\"#遠端協同運作\" class=\"headerlink\" title=\"遠端協同運作\"></a>遠端協同運作</h3><h4 id=\"顯示遠端儲存庫\"><a href=\"#顯示遠端儲存庫\" class=\"headerlink\" title=\"顯示遠端儲存庫\"></a>顯示遠端儲存庫</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 顯示所有的遠端儲存庫</span></span><br><span class=\"line\">git remote</span><br><span class=\"line\"><span class=\"comment\"># 顯示所有的遠端儲存庫(顯示遠端儲存庫 url)</span></span><br><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"增加遠端儲存庫\"><a href=\"#增加遠端儲存庫\" class=\"headerlink\" title=\"增加遠端儲存庫\"></a>增加遠端儲存庫</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote add origin2 https://github.com/hot5656/blog.git</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"從遠端儲存庫擷取或合併\"><a href=\"#從遠端儲存庫擷取或合併\" class=\"headerlink\" title=\"從遠端儲存庫擷取或合併\"></a>從遠端儲存庫擷取或合併</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 抓回遠端分支</span></span><br><span class=\"line\">git fetch</span><br><span class=\"line\"><span class=\"comment\"># origin/master 分支 合併到 master 分支</span></span><br><span class=\"line\">git merge origin/master</span><br><span class=\"line\"><span class=\"comment\"># git pull = git fetch + git merge</span></span><br><span class=\"line\">git pull</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"上傳至遠端儲存庫\"><a href=\"#上傳至遠端儲存庫\" class=\"headerlink\" title=\"上傳至遠端儲存庫\"></a>上傳至遠端儲存庫</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -u 指遠端 branch</span></span><br><span class=\"line\">git push -u origin backup</span><br><span class=\"line\"><span class=\"comment\"># push local branch serverfix to remote serverfix</span></span><br><span class=\"line\">git push origin serverfix</span><br><span class=\"line\"><span class=\"comment\"># push local branch master to remote cat</span></span><br><span class=\"line\">git push origin master:cat</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"監看遠端儲存庫\"><a href=\"#監看遠端儲存庫\" class=\"headerlink\" title=\"監看遠端儲存庫\"></a>監看遠端儲存庫</h4><p>git pull 抓取遠端合併到 local<br>git push 將 local 內容更新至遠端</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote show origin</span><br><span class=\"line\">\t* remote origin</span><br><span class=\"line\">\tFetch URL: https://github.com/hot5656/hot5656.github.io.git</span><br><span class=\"line\">\tPush  URL: https://github.com/hot5656/hot5656.github.io.git</span><br><span class=\"line\">\tHEAD branch: master</span><br><span class=\"line\">\tRemote branches:</span><br><span class=\"line\">\t\tbackup tracked</span><br><span class=\"line\">\t\tmaster tracked</span><br><span class=\"line\">\tLocal branch configured <span class=\"keyword\">for</span> <span class=\"string\">&#x27;git pull&#x27;</span>:</span><br><span class=\"line\">\t\tbackup merges with remote backup</span><br><span class=\"line\">\tLocal ref configured <span class=\"keyword\">for</span> <span class=\"string\">&#x27;git push&#x27;</span>:</span><br><span class=\"line\">\t\tbackup pushes to backup (fast-forwardable)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"移除或更名遠端儲存庫\"><a href=\"#移除或更名遠端儲存庫\" class=\"headerlink\" title=\"移除或更名遠端儲存庫\"></a>移除或更名遠端儲存庫</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更改 遠端儲存庫</span></span><br><span class=\"line\">git remote rename pb paul</span><br><span class=\"line\"><span class=\"comment\"># 移除 遠端儲存庫</span></span><br><span class=\"line\">git remote rm paul</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"標籤\"><a href=\"#標籤\" class=\"headerlink\" title=\"標籤\"></a>標籤</h3><h4 id=\"列出標籤\"><a href=\"#列出標籤\" class=\"headerlink\" title=\"列出標籤\"></a>列出標籤</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git tag</span><br><span class=\"line\"><span class=\"comment\"># 列出特定標籤</span></span><br><span class=\"line\">git tag -l <span class=\"string\">&#x27;v1.4.2.*&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 顯示指定標籤的資料與對應的commit</span></span><br><span class=\"line\">git show v1.4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"建立標籤\"><a href=\"#建立標籤\" class=\"headerlink\" title=\"建立標籤\"></a>建立標籤</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 含附註的標籤</span></span><br><span class=\"line\">git tag -a v1.4 -m <span class=\"string\">&#x27;my version 1.4&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 建立輕量級的標籤 - 只保存commit檢查碼的文件</span></span><br><span class=\"line\">git tag v1.4-lw</span><br><span class=\"line\">git tag</span><br><span class=\"line\">\tv0.1</span><br><span class=\"line\">\tv1.3</span><br><span class=\"line\">\tv1.4</span><br><span class=\"line\">\tv1.4-lw</span><br><span class=\"line\">\tv1.5</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"追加標籤\"><a href=\"#追加標籤\" class=\"headerlink\" title=\"追加標籤\"></a>追加標籤</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 入該次commit的檢查碼(或前幾碼即可)</span><br><span class=\"line\">git tag -a v1.2 9fceb02</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"標籤傳至遠端儲存庫\"><a href=\"#標籤傳至遠端儲存庫\" class=\"headerlink\" title=\"標籤傳至遠端儲存庫\"></a>標籤傳至遠端儲存庫</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 單一標籤</span><br><span class=\"line\">git push origin v1.5</span><br><span class=\"line\"># 所有標籤</span><br><span class=\"line\">git push origin --tags</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"分支-branch\"><a href=\"#分支-branch\" class=\"headerlink\" title=\"分支(branch)\"></a>分支(branch)</h3><h4 id=\"HEAD-為指向當前所在的分支的指標\"><a href=\"#HEAD-為指向當前所在的分支的指標\" class=\"headerlink\" title=\"HEAD 為指向當前所在的分支的指標\"></a>HEAD 為指向當前所在的分支的指標</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 新建分支</span><br><span class=\"line\">git branch testing</span><br><span class=\"line\"># 切換分支</span><br><span class=\"line\">git checkout testing</span><br><span class=\"line\"># 新建同時切換分支</span><br><span class=\"line\">git checkout -b iss53</span><br><span class=\"line\"># 合併分支 hotfix</span><br><span class=\"line\">git merge hotfix</span><br><span class=\"line\"># 刪除 hotfix 分支</span><br><span class=\"line\">git branch -d hotfix</span><br><span class=\"line\"># 列出所有分支</span><br><span class=\"line\">git branch</span><br><span class=\"line\"># 列出各分支最後提交資訊</span><br><span class=\"line\">git branch -v</span><br><span class=\"line\"># 列出已併入分支</span><br><span class=\"line\">git branch --merged</span><br><span class=\"line\"># 列出未併入分支</span><br><span class=\"line\">git branch --no-merged</span><br><span class=\"line\"># 刪除選端分支 serverfix</span><br><span class=\"line\">git push origin :serverfix</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"遠端分支處理\"><a href=\"#遠端分支處理\" class=\"headerlink\" title=\"遠端分支處理\"></a>遠端分支處理</h4><h5 id=\"建立模擬儲存庫\"><a href=\"#建立模擬儲存庫\" class=\"headerlink\" title=\"建立模擬儲存庫\"></a>建立模擬儲存庫</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 建立新的 儲存庫</span></span><br><span class=\"line\">mkdir remote_test</span><br><span class=\"line\"><span class=\"built_in\">cd</span> remote_test</span><br><span class=\"line\">git init</span><br><span class=\"line\"><span class=\"comment\"># 第一次提交</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> init file &gt; branch_test.txt</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;1st commit&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 上傳至遠端儲存庫 (遠端儲存庫已預先建立)</span></span><br><span class=\"line\">git remote add origin https://github.com/hot5656/remote_test.git</span><br><span class=\"line\">git push origin master</span><br><span class=\"line\"><span class=\"comment\"># 2nd update 上傳至遠端儲存庫</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> 1st change &gt;&gt; branch_test.txt</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;2nd update&quot;</span></span><br><span class=\"line\">git push origin master</span><br><span class=\"line\"><span class=\"comment\"># 上傳至遠端儲存庫2 (遠端儲存庫已預先建立)</span></span><br><span class=\"line\">git remote add team https://github.com/hot5656/remote_test2.git</span><br><span class=\"line\">git push team master</span><br><span class=\"line\"><span class=\"comment\"># 3rd update 上傳至 origin 遠端儲存庫</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> 3rd update &gt;&gt; branch_test.txt</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;3rd update&quot;</span></span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"設定-computer-本地儲存庫\"><a href=\"#設定-computer-本地儲存庫\" class=\"headerlink\" title=\"設定 computer 本地儲存庫\"></a>設定 computer 本地儲存庫</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># clone computer 儲存庫, 並刪除兩個 commit, fetch from team</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/hot5656/remote_test.git remote_test_computer</span><br><span class=\"line\"><span class=\"built_in\">cd</span> remote_test_computer</span><br><span class=\"line\">git reset HEAD^^ --hard</span><br><span class=\"line\">git reset HEAD^^ --hard</span><br><span class=\"line\">git remote add team https://github.com/hot5656/remote_test2.git</span><br><span class=\"line\">git fetch team</span><br><span class=\"line\"><span class=\"comment\"># computer add 2 commit</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> modify 1st update &gt;&gt; branch_test.txt</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;modify 1st update&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> modify 2nd update &gt;&gt; branch_test.txt</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;modify 2nd update&quot;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 分支圖</span></span><br><span class=\"line\"><span class=\"comment\"># remote-test(origin)</span></span><br><span class=\"line\">1f0aa12 --&gt; 37d73f1 --&gt; 7369a89(mastetr)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># remote-test1(team)</span></span><br><span class=\"line\">1f0aa12 --&gt; 37d73f1(master)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># computer</span></span><br><span class=\"line\">1f0aa12 --&gt; 37d73f1        --&gt; 7369a89(origin/mastetr)</span><br><span class=\"line\">            (team/master)      (origin/mastetr)</span><br><span class=\"line\">        --&gt; 9161f8d        --&gt; d9c9e57(master)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"將更改傳至遠端-serverfix\"><a href=\"#將更改傳至遠端-serverfix\" class=\"headerlink\" title=\"將更改傳至遠端 serverfix\"></a>將更改傳至遠端 serverfix</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 將 computer 更改傳至 origin(branch serverfix)</span></span><br><span class=\"line\">git checkout -b serverfix</span><br><span class=\"line\">git push origin serverfix</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 分支圖</span></span><br><span class=\"line\"><span class=\"comment\"># remote-test(origin)</span></span><br><span class=\"line\">1f0aa12 --&gt; 37d73f1 --&gt; 7369a89(mastetr)</span><br><span class=\"line\">        --&gt; 9161f8d --&gt; d9c9e57(serverfix)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># remote-test1(team)</span></span><br><span class=\"line\">1f0aa12 --&gt; 37d73f1(master)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># computer</span></span><br><span class=\"line\">1f0aa12 --&gt; 37d73f1        --&gt; 7369a89(origin/mastetr)</span><br><span class=\"line\">            (team/master)      (origin/mastetr)</span><br><span class=\"line\">        --&gt; 9161f8d        --&gt; d9c9e57(master, serverfix, origin/serverfix)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"刪除遠端-serverfix\"><a href=\"#刪除遠端-serverfix\" class=\"headerlink\" title=\"刪除遠端 serverfix\"></a>刪除遠端 serverfix</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git push origin :serverfix</span><br><span class=\"line\">\tTo https://github.com/hot5656/remote_test.git</span><br><span class=\"line\">\t- [deleted]         serverfix</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"分支的合併-merge\"><a href=\"#分支的合併-merge\" class=\"headerlink\" title=\"分支的合併(merge)\"></a>分支的合併(merge)</h4><img src=\"/2021/03/22/git-2/pic4.png\" class=\"\" title=\"pic4\">\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git checkout master</span><br><span class=\"line\">$ git merge issue13</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"分支的衍合-rebase\"><a href=\"#分支的衍合-rebase\" class=\"headerlink\" title=\"分支的衍合(rebase)\"></a>分支的衍合(rebase)</h4><img src=\"/2021/03/22/git-2/pic5.png\" class=\"\" title=\"pic5\">\n\n<h5 id=\"準備\"><a href=\"#準備\" class=\"headerlink\" title=\"準備\"></a>準備</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 增加 branch issue13</span></span><br><span class=\"line\"><span class=\"comment\"># brnach master modify + commit</span></span><br><span class=\"line\">git branch issue13</span><br><span class=\"line\"><span class=\"built_in\">echo</span> mastet rebase 1 &gt;&gt; branch_test.txt</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;master wait rebase 1&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># brnach issue13 modify + commit</span></span><br><span class=\"line\">git checkout issue13</span><br><span class=\"line\"><span class=\"built_in\">echo</span> issue13 rebase 1 &gt;&gt; branch_test.txt</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;issue13 wait rebase 1&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"rebase\"><a href=\"#rebase\" class=\"headerlink\" title=\"rebase\"></a>rebase</h5><p>把另外一個分支的變更，當成這個分支的基礎(修改後併到主線)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout issue13</span><br><span class=\"line\">git rebase master</span><br><span class=\"line\"><span class=\"comment\"># 若有衝突會要求處理,再用 git add 加入,在執行 git rebase --continue</span></span><br><span class=\"line\">git add -A</span><br><span class=\"line\"><span class=\"comment\"># 會要求修改最後 commit 內容</span></span><br><span class=\"line\">git rebase --<span class=\"built_in\">continue</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"應用\"><a href=\"#應用\" class=\"headerlink\" title=\"應用\"></a>應用</h2><h3 id=\"commit-hook-Eslint\"><a href=\"#commit-hook-Eslint\" class=\"headerlink\" title=\"commit hook Eslint ???\"></a>commit hook Eslint ???</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm init</span><br><span class=\"line\">eslint --init</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"package-json-加上-run-script，指定-lint-來執行-Eslint\"><a href=\"#package-json-加上-run-script，指定-lint-來執行-Eslint\" class=\"headerlink\" title=\"package.json 加上 run script，指定 lint 來執行 Eslint\"></a>package.json 加上 run script，指定 lint 來執行 Eslint</h4><p>“lint”: “eslint *.js”,</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;eslint_test&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;hw1.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;lint&quot;</span>: <span class=\"string\">&quot;eslint *.js&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;@typescript-eslint/eslint-plugin&quot;</span>: <span class=\"string\">&quot;^4.22.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;@typescript-eslint/parser&quot;</span>: <span class=\"string\">&quot;^4.22.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;eslint&quot;</span>: <span class=\"string\">&quot;^7.25.0&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"未知內容\"><a href=\"#未知內容\" class=\"headerlink\" title=\"未知內容\"></a>未知內容</h2><ul>\n<li>git mergetool : git merge tool </li>\n<li>opendiff : one merge tool</li>\n</ul>\n<h2 id=\"參考文件\"><a href=\"#參考文件\" class=\"headerlink\" title=\"參考文件\"></a><font color=#555555>參考文件</font></h2><ul>\n<li><a href=\"http://iissnan.com/progit/index.zh-tw.html\">Pro Git(中文)</a></li>\n</ul>\n","categories":["Coding"],"tags":["git"]},{"title":"JavaScript 說明","url":"/2021/04/18/js-1/","content":"<h3 id=\"基本\"><a href=\"#基本\" class=\"headerlink\" title=\"基本\"></a>基本</h3><blockquote>\n<p>ECMA-262是定義了Javascript的核心規範</p>\n</blockquote>\n<h4 id=\"註解-and-Hello-World\"><a href=\"#註解-and-Hello-World\" class=\"headerlink\" title=\"註解 and Hello World\"></a>註解 and Hello World</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// This is a comment</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* </span></span><br><span class=\"line\"><span class=\"comment\">\t..... </span></span><br><span class=\"line\"><span class=\"comment\">\t多行註解 </span></span><br><span class=\"line\"><span class=\"comment\">\t.....</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">&#x27;Hello world!&#x27;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str);\t\t<span class=\"comment\">// Hello world!</span></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"import-module\"><a href=\"#import-module\" class=\"headerlink\" title=\"import module\"></a>import module</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// require </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> maths = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mathjs&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(maths.round(maths.e, <span class=\"number\">3</span>))\t<span class=\"comment\">// 2.718</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(maths.log(<span class=\"number\">10000</span>, <span class=\"number\">10</span>))\t\t\t<span class=\"comment\">// 4</span></span><br><span class=\"line\"><span class=\"comment\">// import </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  atan2, chain, derivative, e, evaluate, log, pi, pow, round, sqrt</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;mathjs&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(round(e, <span class=\"number\">3</span>))\t\t\t\t<span class=\"comment\">// 2.718</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(log(<span class=\"number\">10000</span>, <span class=\"number\">10</span>))\t\t\t<span class=\"comment\">// 4</span></span><br><span class=\"line\"><span class=\"comment\">// import 單一的物件、變數重新賦予名稱</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fn <span class=\"keyword\">as</span> newFn &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./module.js&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 全部匯入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> name <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./module.js&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 匯入 default export 並賦予 fn 的名稱</span></span><br><span class=\"line\"><span class=\"comment\">// 匯入全部的 named export，並給賦予至 named 的物件上</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> fn, * <span class=\"keyword\">as</span> named <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./defaultModule.js&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"require-vs-import\"><a href=\"#require-vs-import\" class=\"headerlink\" title=\"require() vs import()\"></a>require() vs import()</h4><ul>\n<li><p>require() 是 node.js 內含函數</p>\n</li>\n<li><p>require() 執行 然後 return </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> myVar = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>) \t\t\t\t\t\t<span class=\"comment\">//to use built-in modules</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myVar2 = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./myLocaModule&#x27;</span>) \t<span class=\"comment\">// to use local modules</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// example for require - demo_module.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> dt = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./myfirstmodule&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// &#x27;Content-Type&#x27;: &#x27;text/html;charset=utf-8&#x27; 修正中文亂碼</span></span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">  res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;text/html;charset=utf-8&#x27;</span>&#125;);</span><br><span class=\"line\">  res.write(<span class=\"string\">&quot;The date and time are currently: &quot;</span> + dt.myDateTime());</span><br><span class=\"line\">  res.end();</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// myfirstmodule.js</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.myDateTime = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n<li><p>import()/export() 為 ES6 新語法, 若含.json 文件類型則不能使用</p>\n</li>\n<li><p>&lt;script&gt; type=”module” 也不能使用</p>\n</li>\n<li><p>require() 可擺於任何地方,import() 擺於程式最前面</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> myVac = <span class=\"keyword\">import</span>(<span class=\"string\">&quot;module-name&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// example for import</span></span><br><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;add, PI&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils.js&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(add(<span class=\"number\">3</span>, <span class=\"number\">5</span>), PI)\t\t<span class=\"comment\">// 8 3.14</span></span><br><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> PI = <span class=\"number\">3.14</span> </span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Hoisting-提升\"><a href=\"#Hoisting-提升\" class=\"headerlink\" title=\"Hoisting (提升)\"></a>Hoisting (提升)</h4><h5 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// not defined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(b) <span class=\"comment\">// ReferenceError: b is not defined</span></span><br><span class=\"line\"><span class=\"comment\">// 僅宣告提升,不含賦值</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a) <span class=\"comment\">// undefined, 不是 is not defined</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a =<span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"comment\">// hoisting 優先順序 function &gt; parameter &gt; var</span></span><br><span class=\"line\"><span class=\"comment\">// 優先順序 parameter &gt; var</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">v</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(v)</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> v = <span class=\"number\">3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test(<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\">// 優先順序 function &gt; parameter &gt; var</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test3</span>(<span class=\"params\">v</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(v)\t\t<span class=\"comment\">// [Function: v]</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> v = <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">v</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">100</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test3(<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\">// let 和 const 的 hoisting, TDZ（Temporal Dead Zone）暫時死區</span></span><br><span class=\"line\"><span class=\"comment\">// let 有 hoisting, 但賦值前不能使用</span></span><br><span class=\"line\"><span class=\"comment\">// 如果在宣告變數之前使用變數，這個變數就是存在「暫時死區」中無法存取！這時候使用它就會報錯 ReferenceError</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a2 = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a2)\t\t<span class=\"comment\">// ReferenceError: Cannot access &#x27;a&#x27; before initialization</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> a2 = <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test2()</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h5><div style=\"width:500px\">\n    <img src=\"/2021/04/18/js-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<blockquote>\n<p>EC(Execution Contexts)<br>VO(variable object)<br>AO(activation object)</p>\n</blockquote>\n<h4 id=\"Closure-閉包\"><a href=\"#Closure-閉包\" class=\"headerlink\" title=\"Closure (閉包)\"></a>Closure (閉包)</h4><h5 id=\"example-1\"><a href=\"#example-1\" class=\"headerlink\" title=\"example\"></a>example</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// example #1</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">test EC&#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tAO &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\ta : 10</span></span><br><span class=\"line\"><span class=\"comment\">\t\tinner : function</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Global EC&#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\tVO &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tfunc : function --&gt; test.inner</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> a = <span class=\"number\">10</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inner</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\ta++</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(a)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> inner</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = test()</span><br><span class=\"line\">func()\t<span class=\"comment\">// 11</span></span><br><span class=\"line\">func()\t<span class=\"comment\">// 12</span></span><br><span class=\"line\">func()\t<span class=\"comment\">// 13</span></span><br><span class=\"line\"><span class=\"comment\">// example #2</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">innerEC&#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tAO &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\targuments</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">\tscopeChain : [innerEC.AO, testC.scopeChain]</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t\t\t=[innerEC.AO, testEC.AO, globalEC.VO ]</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">testEC&#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tAO &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\targuments,</span></span><br><span class=\"line\"><span class=\"comment\">\t\tvTest : 20,</span></span><br><span class=\"line\"><span class=\"comment\">\t\tinner : function</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">\tscopeChain : [testEC.AO, globalEC.scopeChain]</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t\t\t=[testEC.AO, globalEC.VO]</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">globalEC&#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tVO &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tv1 : 10,</span></span><br><span class=\"line\"><span class=\"comment\">\t\tinner : function ,</span></span><br><span class=\"line\"><span class=\"comment\">\t\ttest: function</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">\tscopeChain : [globalEC.VO]</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> v1 = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> vTest = <span class=\"number\">20</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inner</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(v1, vTest) <span class=\"comment\">//10 20</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> inner</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> inner = test()</span><br><span class=\"line\">inner()\t<span class=\"comment\">// 10 20</span></span><br><span class=\"line\"><span class=\"comment\">// example #3 - complex count</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">complex</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;calculate&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> num*num*num</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cache</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> ans = &#123;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (ans[num]) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> ans[num]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tans[num] = func(num)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ans[num]</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(complex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(complex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(complex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cacheComplex = cache(complex)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cacheComplex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cacheComplex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cacheComplex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// 8000</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Closure-造成問題\"><a href=\"#Closure-造成問題\" class=\"headerlink\" title=\"Closure 造成問題\"></a>Closure 造成問題</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// closure trigger issue</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span> ; i&lt;<span class=\"number\">5</span> ; i++)&#123;</span><br><span class=\"line\">\tarr[i] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">arr[<span class=\"number\">0</span>]()\t<span class=\"comment\">// 5</span></span><br><span class=\"line\">arr[<span class=\"number\">1</span>]()\t<span class=\"comment\">// 5</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>]()\t<span class=\"comment\">// 5</span></span><br><span class=\"line\">arr[<span class=\"number\">3</span>]()\t<span class=\"comment\">// 5</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>]()\t<span class=\"comment\">// 5</span></span><br><span class=\"line\"><span class=\"comment\">// fix #1</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span> ; i&lt;<span class=\"number\">5</span> ; i++)&#123;</span><br><span class=\"line\">\tarr[i] = consloeLogN(i)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">consloeLogN</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(n)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">arr[<span class=\"number\">0</span>]()\t<span class=\"comment\">// 0</span></span><br><span class=\"line\">arr[<span class=\"number\">1</span>]()\t<span class=\"comment\">// 1</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>]()\t<span class=\"comment\">// 2</span></span><br><span class=\"line\">arr[<span class=\"number\">3</span>]()\t<span class=\"comment\">// 3</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>]()\t<span class=\"comment\">// 4</span></span><br><span class=\"line\"><span class=\"comment\">// fix #2(定義立即執行 IIFEImmediately Invoked Function Expression）)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span> ; i&lt;<span class=\"number\">5</span> ; i++)&#123;</span><br><span class=\"line\">\tarr[i] = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">number</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"built_in\">console</span>.log(number)</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;)(i)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">arr[<span class=\"number\">0</span>]()\t<span class=\"comment\">// 0</span></span><br><span class=\"line\">arr[<span class=\"number\">1</span>]()\t<span class=\"comment\">// 1</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>]()\t<span class=\"comment\">// 2</span></span><br><span class=\"line\">arr[<span class=\"number\">3</span>]()\t<span class=\"comment\">// 3</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>]()\t<span class=\"comment\">// 4</span></span><br><span class=\"line\"><span class=\"comment\">// fix #3 - let</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;<span class=\"number\">5</span> ; i++)&#123;</span><br><span class=\"line\">\tarr[i] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">arr[<span class=\"number\">0</span>]()\t<span class=\"comment\">// 0</span></span><br><span class=\"line\">arr[<span class=\"number\">1</span>]()\t<span class=\"comment\">// 1</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>]()\t<span class=\"comment\">// 2</span></span><br><span class=\"line\">arr[<span class=\"number\">3</span>]()\t<span class=\"comment\">// 3</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>]()\t<span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Closure-閉包-應用-隱藏資訊\"><a href=\"#Closure-閉包-應用-隱藏資訊\" class=\"headerlink\" title=\"Closure(閉包) 應用 - 隱藏資訊\"></a>Closure(閉包) 應用 - 隱藏資訊</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createWallet</span>(<span class=\"params\">init</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> money = init</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\tadd: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t\t\tmoney += num</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tdeduct: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t\t\tmoney -= num</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"comment\">// function 寫法 #1</span></span><br><span class=\"line\">\t\tgetMoney: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> money</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"comment\">// function 寫法 #2</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"title\">getInnerMoney</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> money</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> myWallet = createWallet(<span class=\"number\">99</span>)</span><br><span class=\"line\">myWallet.add(<span class=\"number\">1</span>)</span><br><span class=\"line\">myWallet.deduct(<span class=\"number\">20</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myWallet.getMoney())\t\t<span class=\"comment\">// 80</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myWallet.getInnerMoney())\t<span class=\"comment\">// 80</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"物件導向-Object-Oriented-Programming-and-prototype\"><a href=\"#物件導向-Object-Oriented-Programming-and-prototype\" class=\"headerlink\" title=\"物件導向(Object Oriented Programming) and prototype\"></a>物件導向(Object Oriented Programming) and prototype</h4><h5 id=\"ES6-class\"><a href=\"#ES6-class\" class=\"headerlink\" title=\"ES6 class\"></a>ES6 class</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.name = name</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">getName</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.name</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.name)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> d1 = <span class=\"keyword\">new</span> Dog(<span class=\"string\">&quot;Dog_1&quot;</span>)</span><br><span class=\"line\">d1.sayHello()\t\t\t\t\t\t\t<span class=\"comment\">// Dog_1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(d1.getName())\t<span class=\"comment\">// Dog_1</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> d2 = <span class=\"keyword\">new</span> Dog(<span class=\"string\">&quot;Dog_2&quot;</span>)</span><br><span class=\"line\">d2.sayHello()\t\t\t\t\t\t\t<span class=\"comment\">// Dog_2</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ES5\"><a href=\"#ES5\" class=\"headerlink\" title=\"ES5\"></a>ES5</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// example #1 - 會產生重複相同之 function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dog</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> myName = name</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\tgetName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> myName</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tsayHello: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(myName)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> d = Dog(<span class=\"string\">&quot;abc&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> d2 = Dog(<span class=\"string\">&quot;123&quot;</span>)</span><br><span class=\"line\">d.sayHello()\t<span class=\"comment\">// abc</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(d.sayHello === d2.sayHello) <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"comment\">// example #2 - 不會產生重複相同之 function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dog</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">this</span>.name = name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Dog.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Dog.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> d = <span class=\"keyword\">new</span> Dog(<span class=\"string\">&quot;abc&quot;</span>)\t\t\t<span class=\"comment\">// 注意加 new</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> d2 = <span class=\"keyword\">new</span> Dog(<span class=\"string\">&quot;123&quot;</span>)\t\t\t<span class=\"comment\">// 注意加 new</span></span><br><span class=\"line\">d.sayHello()\t<span class=\"comment\">// abc</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(d.sayHello === d2.sayHello) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"prototype-原型鍊\"><a href=\"#prototype-原型鍊\" class=\"headerlink\" title=\"prototype 原型鍊\"></a>prototype 原型鍊</h5><ul>\n<li><p>Example</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">Person.prototype.log = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.name + <span class=\"string\">&#x27;, age:&#x27;</span> + <span class=\"built_in\">this</span>.age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">var</span> nick = <span class=\"keyword\">new</span> Person(<span class=\"string\">&#x27;nick&#x27;</span>, <span class=\"number\">18</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> peter = <span class=\"keyword\">new</span> Person(<span class=\"string\">&#x27;peter&#x27;</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\">nick.log();   </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(nick.log === peter.log) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// nick.__proto__ 指至 Person.prototype</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(nick.__proto__ === Person.prototype)\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// Person.prototype.__proto__ 指至 Object.prototype</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Person.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype)\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// Object.prototype.__proto__ === null (到頂端)</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.__proto__)\t<span class=\"comment\">// null</span></span><br><span class=\"line\"><span class=\"comment\">// Person.__proto__ 指至 Function.prototype</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Person.__proto__ === <span class=\"built_in\">Function</span>.prototype); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Function</span>.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.__proto__); <span class=\"comment\">//null</span></span><br></pre></td></tr></table></figure></li>\n<li><p>.hasOwnProperty() 判斷自身屬性是否存在</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Person.prototype add function log</span></span><br><span class=\"line\">Person.prototype.log = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.name + <span class=\"string\">&#x27;, age:&#x27;</span> + <span class=\"built_in\">this</span>.age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">var</span> nick = <span class=\"keyword\">new</span> Person(<span class=\"string\">&#x27;nick&#x27;</span>, <span class=\"number\">18</span>);</span><br><span class=\"line\"><span class=\"comment\">// hasOwnProperty() 檢查是否直屬屬性</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(nick.hasOwnProperty(<span class=\"string\">&#x27;log&#x27;</span>))\t\t\t\t\t\t\t\t<span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(nick.__proto__.hasOwnProperty(<span class=\"string\">&#x27;log&#x27;</span>))\t\t\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Person.prototype.hasOwnProperty(<span class=\"string\">&#x27;log&#x27;</span>))\t\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// Object.prototype add function testObject()</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.testObject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Object :&quot;</span>, <span class=\"number\">999</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// test call Object.prototype function</span></span><br><span class=\"line\">nick.testObject()\t\t\t\t\t<span class=\"comment\">// Object : 999</span></span><br><span class=\"line\"><span class=\"comment\">// list all property</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> nick) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (nick.hasOwnProperty(key)) &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Property <span class=\"subst\">$&#123;key&#125;</span>: <span class=\"subst\">$&#123;nick[key]&#125;</span>`</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(key); </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Property name: nick</span></span><br><span class=\"line\"><span class=\"comment\">// Property age: 18</span></span><br><span class=\"line\"><span class=\"comment\">// log</span></span><br><span class=\"line\"><span class=\"comment\">// testObject</span></span><br></pre></td></tr></table></figure></li>\n<li><p>instanceof 就是拿來判斷 A 是不是 B 的 instance</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">Person.prototype.log = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.name + <span class=\"string\">&#x27;, age:&#x27;</span> + <span class=\"built_in\">this</span>.age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">var</span> nick = <span class=\"keyword\">new</span> Person(<span class=\"string\">&#x27;nick&#x27;</span>, <span class=\"number\">18</span>);</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(nick <span class=\"keyword\">instanceof</span> Person); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(nick <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(nick <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span>); <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"new-程序模擬\"><a href=\"#new-程序模擬\" class=\"headerlink\" title=\"new 程序模擬\"></a>new 程序模擬</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">Person.prototype.log = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.name + <span class=\"string\">&#x27;, age:&#x27;</span> + <span class=\"built_in\">this</span>.age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">newObj</span>(<span class=\"params\">Constructor, <span class=\"built_in\">arguments</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// 讓 o 繼承原型鍊</span></span><br><span class=\"line\">  o.__proto__ = Constructor.prototype;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// 執行建構函式</span></span><br><span class=\"line\">  Constructor.apply(o, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// 回傳建立好的物件</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">var</span> nick = newObj(Person, [<span class=\"string\">&#x27;nick&#x27;</span>, <span class=\"number\">18</span>]);</span><br><span class=\"line\">nick.log(); <span class=\"comment\">// nick, age:18</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"繼承-Inheritance\"><a href=\"#繼承-Inheritance\" class=\"headerlink\" title=\"繼承 Inheritance\"></a>繼承 Inheritance</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.name = name</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">getName</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.name</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.name)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ColorDog</span> <span class=\"keyword\">extends</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name, color</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 第一要先加 super()</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">super</span>(name)</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.color = color</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">showColor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;color :&quot;</span>, <span class=\"built_in\">this</span>.color)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> d1 = <span class=\"keyword\">new</span> Dog(<span class=\"string\">&quot;Dog_1&quot;</span>)</span><br><span class=\"line\">d1.sayHello()\t\t\t\t\t\t\t<span class=\"comment\">// Dog_1</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> d2 = <span class=\"keyword\">new</span> ColorDog(<span class=\"string\">&quot;Dog_2&quot;</span>, <span class=\"string\">&quot;Yellow&quot;</span>)</span><br><span class=\"line\">d2.sayHello()\t\t\t<span class=\"comment\">// Dog_2</span></span><br><span class=\"line\">d2.showColor()\t\t<span class=\"comment\">// color : Yellow</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 無用的 this 列出環境變數, node.js 和 web browser 會有差異</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test()</span><br><span class=\"line\"><span class=\"comment\">// 加入 &#x27;use strict&#x27; 嚴格模式 undefined</span></span><br><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test()\t\t\t<span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"comment\">// this 解析</span></span><br><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">\ta: <span class=\"number\">123</span>,</span><br><span class=\"line\">\tinner: &#123;</span><br><span class=\"line\">\t\ttest: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> func = obj.inner.test</span><br><span class=\"line\"><span class=\"comment\">// 相當 func.call(undefined)</span></span><br><span class=\"line\">func()\t\t\t<span class=\"comment\">// undefined</span></span><br><span class=\"line\">obj.inner.test() <span class=\"comment\">// &#123; test: [Function: test] &#125;</span></span><br><span class=\"line\">obj.inner.test.call(obj.inner)\t<span class=\"comment\">// &#123; test: [Function: test] &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"call-apply-and-bind-可更改-this-值\"><a href=\"#call-apply-and-bind-可更改-this-值\" class=\"headerlink\" title=\"call, apply and bind(可更改 this 值)\"></a>call, apply and bind(可更改 this 值)</h4><blockquote>\n<p>apply 參數為 array 輸入<br>bind 能預設 this 及 一些 參數</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">a, b, c</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a, b, c)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)\t\t\t\t\t\t\t\t<span class=\"comment\">// undefined 1 2 3</span></span><br><span class=\"line\">test.call(<span class=\"number\">123</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)\t\t\t<span class=\"comment\">// 123 1 2 3</span></span><br><span class=\"line\">test.apply(<span class=\"number\">123</span>, [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])\t<span class=\"comment\">// 123 1 2 3</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> testBind = test.bind(<span class=\"number\">123</span>, <span class=\"number\">9</span> , <span class=\"number\">7</span>)</span><br><span class=\"line\">testBind(<span class=\"number\">99</span>)\t<span class=\"comment\">// 123 9 7 99</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// apply </span></span><br><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">log</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = &#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>, <span class=\"attr\">log</span>:log &#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = &#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>, <span class=\"attr\">log</span>:log &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">log()\t\t<span class=\"comment\">// undefined</span></span><br><span class=\"line\">a.log()\t\t<span class=\"comment\">// &#123; a: 1, log: [Function: log] &#125;</span></span><br><span class=\"line\">b.log.apply(a)\t<span class=\"comment\">// 代入 a 為 this</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// bind</span></span><br><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">\t\ta:<span class=\"number\">1</span>, </span><br><span class=\"line\">\t\ttest: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>) </span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">obj.test()\t<span class=\"comment\">// &#123; a: 1, test: [Function: test] &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> func = obj.test</span><br><span class=\"line\">func()\t\t<span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bindTest = obj.test.bind(obj) <span class=\"comment\">// bind this from obj</span></span><br><span class=\"line\">bindTest() <span class=\"comment\">// &#123; a: 1, test: [Function: test] &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bindTest2 = obj.test.bind(<span class=\"string\">&quot;swdwd&quot;</span>) <span class=\"comment\">// bind this from a string</span></span><br><span class=\"line\">bindTest2() <span class=\"comment\">// swdwd</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"箭頭函式中，this-指稱的對象在所定義時就固定了，而不會隨著使用時的脈絡而改變\"><a href=\"#箭頭函式中，this-指稱的對象在所定義時就固定了，而不會隨著使用時的脈絡而改變\" class=\"headerlink\" title=\"箭頭函式中，this 指稱的對象在所定義時就固定了，而不會隨著使用時的脈絡而改變\"></a>箭頭函式中，this 指稱的對象在所定義時就固定了，而不會隨著使用時的脈絡而改變</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 使用 匿名函式</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span></span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">run</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;run this&#x27;</span>, <span class=\"built_in\">this</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">setTimeout</span>( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">\t\t&#125;, <span class=\"number\">100</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> t = <span class=\"keyword\">new</span> Test()\t</span><br><span class=\"line\">t.run()\t\t\t\t<span class=\"comment\">// run this Test &#123;&#125; , Timelot&#123; ...</span></span><br><span class=\"line\"><span class=\"comment\">// 使用 箭頭函式</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test2</span></span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">run</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;run this&#x27;</span>, <span class=\"built_in\">this</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">setTimeout</span>( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">\t\t&#125;, <span class=\"number\">100</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> t2 = <span class=\"keyword\">new</span> Test2()</span><br><span class=\"line\">t2.run()\t\t\t<span class=\"comment\">// run this Test2 &#123;&#125;, Test2 &#123;&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"try…catch-陳述式\"><a href=\"#try…catch-陳述式\" class=\"headerlink\" title=\"try…catch 陳述式\"></a>try…catch 陳述式</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> bodyObj = <span class=\"built_in\">JSON</span>.parse(body)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(bodyObj.id, bodyObj.name)</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;---------------&#x27;</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;---------------&#x27;</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 都會執行</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"throw\"><a href=\"#throw\" class=\"headerlink\" title=\"throw\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Control_flow_and_error_handling\">throw</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 拋出例外</span></span><br><span class=\"line\"><span class=\"comment\">// throw expression</span></span><br><span class=\"line\"><span class=\"keyword\">throw</span> <span class=\"string\">&quot;Error2&quot;</span>;   <span class=\"comment\">// 字串形態</span></span><br><span class=\"line\"><span class=\"keyword\">throw</span> <span class=\"number\">42</span>;         <span class=\"comment\">// 數字形態</span></span><br><span class=\"line\"><span class=\"keyword\">throw</span> <span class=\"literal\">true</span>;       <span class=\"comment\">// True/False</span></span><br><span class=\"line\"><span class=\"keyword\">throw</span> &#123;<span class=\"attr\">toString</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">&quot;我是物件!&quot;</span>; &#125; &#125;</span><br><span class=\"line\"><span class=\"comment\">// 拋出 Error 物件</span></span><br><span class=\"line\"><span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;Whoops!&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"變數-variable\"><a href=\"#變數-variable\" class=\"headerlink\" title=\"變數 variable\"></a>變數 variable</h3><h4 id=\"var-let-and-const\"><a href=\"#var-let-and-const\" class=\"headerlink\" title=\"var, let and const\"></a>var, let and const</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// let and const 是在 ES6 才使用</span></span><br><span class=\"line\"><span class=\"comment\">// var 的 scope(作用域) 是 function</span></span><br><span class=\"line\"><span class=\"comment\">// let, const 的 scope(作用域) 是 block</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"data-structures-資料型別與資料結構\"><a href=\"#data-structures-資料型別與資料結構\" class=\"headerlink\" title=\"data structures - 資料型別與資料結構\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Data_structures\">data structures - 資料型別與資料結構</a></h4><ul>\n<li><p>種類</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// --- Primitive ( immutable value - 不可變)</span></span><br><span class=\"line\"><span class=\"comment\">// Boolean</span></span><br><span class=\"line\"><span class=\"comment\">// Null</span></span><br><span class=\"line\"><span class=\"comment\">// Undefined</span></span><br><span class=\"line\"><span class=\"comment\">// Number(數字)</span></span><br><span class=\"line\"><span class=\"comment\">// BigInt(這是一個實驗中的功能) : BigInt 是透過在一個數值後加上 n 或呼叫 BigInt()</span></span><br><span class=\"line\"><span class=\"comment\">// String(字串)</span></span><br><span class=\"line\"><span class=\"comment\">// Symbol（於 ECMAScript 6 新定義）</span></span><br><span class=\"line\"><span class=\"comment\">// ---</span></span><br><span class=\"line\"><span class=\"comment\">// Object (物件) - immutable value : array, function, date ...</span></span><br><span class=\"line\"><span class=\"comment\">// --- dump type </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"literal\">true</span>) \t\t\t\t\t\t<span class=\"comment\">// boolean</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"literal\">null</span>) \t\t\t\t\t\t<span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"literal\">undefined</span>) \t\t\t<span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"number\">1234567</span>) \t\t\t\t<span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"number\">12n</span>)\t\t\t\t\t\t\t<span class=\"comment\">// bigint</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"string\">&#x27;Hello World!&#x27;</span>)\t<span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"built_in\">Symbol</span>()) \t\t\t\t<span class=\"comment\">// symbol</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> &#123; <span class=\"attr\">name</span>: <span class=\"string\">&#x27;Jack&#x27;</span> &#125;)<span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]) \t\t\t<span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;)\t\t<span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"literal\">NaN</span>) \t\t\t\t\t\t<span class=\"comment\">// number, NaN(not a number）</span></span><br><span class=\"line\"><span class=\"comment\">// check array</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Array</span>.isArray([]))\t<span class=\"comment\">// True</span></span><br><span class=\"line\"><span class=\"comment\">// check NaN(唯一 自己不等於自己)</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> num = <span class=\"built_in\">Number</span>(<span class=\"string\">&quot;hello&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num)\t\t\t\t\t<span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num === <span class=\"literal\">NaN</span>)\t<span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num === num)\t<span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> num)\t\t<span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"comment\">// check undefined</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a)\t\t\t\t\t<span class=\"comment\">// undefined - 型態</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> a)\t\t<span class=\"comment\">// undefined - 字串</span></span><br><span class=\"line\"><span class=\"comment\">// check undefined 再處理</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> b </span><br><span class=\"line\"><span class=\"keyword\">if</span> ( <span class=\"keyword\">typeof</span> a !== <span class=\"string\">&#x27;undefined&#x27;</span>) &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;undefined&quot;</span>, b+<span class=\"number\">1</span>)\t<span class=\"comment\">// undefined NaN</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(b+<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// check NaN</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> num = <span class=\"built_in\">Number</span>(<span class=\"string\">&quot;hello&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num, <span class=\"keyword\">typeof</span> num) \t<span class=\"comment\">// NaN number</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num === <span class=\"literal\">NaN</span>)\t\t<span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">isNaN</span>(num))\t\t\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// 檢視物件到底是屬於哪個子型別 Object.prototype.toString</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.toString.call([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])) \t\t\t\t\t<span class=\"comment\">// &quot;[object Array]&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.toString.call(&#123; <span class=\"attr\">name</span>: <span class=\"string\">&#x27;Jack&#x27;</span> &#125;)) \t<span class=\"comment\">// &quot;[object Object]&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHi</span>(<span class=\"params\"></span>) </span>&#123;&#125;))<span class=\"comment\">// &quot;[object Function]&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"regexp\">/helloworld/i</span>)) \t\t\t<span class=\"comment\">// &quot;[object RegExp]&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.toString.call(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>())) \t\t\t\t<span class=\"comment\">// &quot;[object Date]&quot;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>exampe </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// NaN : Not-A-Number</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> age = <span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"comment\">// 區域變數</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> temp = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"comment\">// variable undifined</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> total</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(total)</span><br><span class=\"line\"><span class=\"comment\">// variable not difined </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(money)</span><br><span class=\"line\"><span class=\"comment\">// varibale 型態</span></span><br><span class=\"line\"><span class=\"comment\">// bollean, number, string</span></span><br><span class=\"line\"><span class=\"comment\">// object, undefined, function</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type true&#x27;</span>, <span class=\"keyword\">typeof</span> <span class=\"literal\">true</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type 30&#x27;</span>, <span class=\"keyword\">typeof</span> <span class=\"number\">30</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type 0.5&#x27;</span>, <span class=\"keyword\">typeof</span> <span class=\"number\">0.5</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type &quot;hello&quot;&#x27;</span>, <span class=\"keyword\">typeof</span> <span class=\"string\">&#x27;hello&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type &quot;30&quot;&#x27;</span>, <span class=\"keyword\">typeof</span> <span class=\"string\">&#x27;30&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type [1]&#x27;</span>, <span class=\"keyword\">typeof</span> [<span class=\"number\">1</span>])</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type &#123;a:1&#125;&#x27;</span>, <span class=\"keyword\">typeof</span> &#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type null&#x27;</span>, <span class=\"keyword\">typeof</span> <span class=\"literal\">null</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type underined&#x27;</span>, <span class=\"keyword\">typeof</span> underined)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;type function&#x27;</span>, <span class=\"keyword\">typeof</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// result </span></span><br><span class=\"line\">  type <span class=\"literal\">true</span> boolean</span><br><span class=\"line\">  type <span class=\"number\">30</span> number</span><br><span class=\"line\">  type <span class=\"number\">0.5</span> number</span><br><span class=\"line\">  type <span class=\"string\">&quot;hello&quot;</span> string</span><br><span class=\"line\">  type <span class=\"string\">&quot;30&quot;</span> string</span><br><span class=\"line\">  type [<span class=\"number\">1</span>] object</span><br><span class=\"line\">  type &#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125; object</span><br><span class=\"line\">  type <span class=\"literal\">null</span> object\t\t<span class=\"comment\">// It&#x27;s more special</span></span><br><span class=\"line\">  type underined <span class=\"literal\">undefined</span></span><br><span class=\"line\">  type <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"keyword\">function</span></span></span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"number\"><a href=\"#number\" class=\"headerlink\" title=\"number\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Number\">number</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 最大整數 2^53 - 1 : Number.MAX_SAFE_INTEGER</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>.MAX_SAFE_INTEGER);   <span class=\"comment\">// 9007199254740991</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>.MAX_SAFE_INTEGER+<span class=\"number\">1</span>); <span class=\"comment\">// 9007199254740992</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>.MAX_SAFE_INTEGER+<span class=\"number\">2</span>); <span class=\"comment\">// 9007199254740992</span></span><br><span class=\"line\"><span class=\"comment\">// PI</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.PI)\t\t\t\t\t\t\t<span class=\"comment\">// 3.141592653589793</span></span><br><span class=\"line\"><span class=\"comment\">// 數字轉成字串</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> num = <span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>(num), <span class=\"keyword\">typeof</span> <span class=\"built_in\">String</span>(num))\t\t\t\t<span class=\"comment\">// 20 string</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num.toString(), <span class=\"keyword\">typeof</span> num.toString())\t<span class=\"comment\">// 20 string</span></span><br><span class=\"line\"><span class=\"comment\">// 數字轉成字串 (利用加法)</span></span><br><span class=\"line\">b = num + <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(b, <span class=\"keyword\">typeof</span> b) <span class=\"comment\">// 20 string</span></span><br><span class=\"line\"><span class=\"comment\">// 數字轉成 8 進制字串</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num.toString(<span class=\"number\">8</span>), <span class=\"keyword\">typeof</span> num.toString())\t<span class=\"comment\">// 24 string</span></span><br><span class=\"line\"><span class=\"comment\">// 顯示固定長度小數</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> value = <span class=\"number\">1.2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(value.toFixed(<span class=\"number\">2</span>)) <span class=\"comment\">// 1.20</span></span><br><span class=\"line\"><span class=\"comment\">// string to number</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(<span class=\"string\">&quot;10.211&quot;</span>))\t\t\t\t<span class=\"comment\">// 10.211</span></span><br><span class=\"line\"><span class=\"comment\">// string to 整數</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">parseInt</span>(<span class=\"string\">&quot;10.211&quot;</span>))\t\t\t<span class=\"comment\">// 10</span></span><br><span class=\"line\"><span class=\"comment\">// string(8進制) to 整數(10進制))</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">parseInt</span>(<span class=\"string\">&quot;20.1&quot;</span>, <span class=\"number\">8</span>))\t\t<span class=\"comment\">// 16</span></span><br><span class=\"line\"><span class=\"comment\">// string to 浮點</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">parseFloat</span>(<span class=\"string\">&quot;20.111&quot;</span>))\t\t<span class=\"comment\">// 20.111</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/String\">String</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ascii code 和 字元 互轉</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"string\">&#x27;N&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> code = c.charCodeAt(<span class=\"number\">0</span>) <span class=\"comment\">// charCodeAt(0) : c 字串 index 0 轉成 ascii code </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>.fromCharCode(code  + <span class=\"number\">0x20</span>)) <span class=\"comment\">// String.fromCharCode(code) : ascii 轉成字元</span></span><br><span class=\"line\"><span class=\"comment\">// 多字 ascii 轉 字串</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">String</span>.fromCharCode(<span class=\"number\">65</span>, <span class=\"number\">66</span>, <span class=\"number\">67</span>)) <span class=\"comment\">// ABC</span></span><br><span class=\"line\"><span class=\"comment\">// string split to array</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> line = <span class=\"string\">&quot;aa bb cc&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(line.split(<span class=\"string\">&#x27; &#x27;</span>))\t<span class=\"comment\">// [ &#x27;aa&#x27;, &#x27;bb&#x27;, &#x27;cc&#x27; ]</span></span><br><span class=\"line\"><span class=\"comment\">// string to integer</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> tmp = <span class=\"string\">&#x27;10&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> num1 = <span class=\"built_in\">parseInt</span>(tmp)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> num1)</span><br><span class=\"line\"><span class=\"comment\">// string to number</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> tmp = <span class=\"string\">&#x27;10&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> num1 = <span class=\"built_in\">Number</span>(tmp)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> num1)</span><br><span class=\"line\"><span class=\"comment\">// repeat</span></span><br><span class=\"line\"><span class=\"string\">&quot;abc&quot;</span>.repeat(<span class=\"number\">0</span>)      <span class=\"comment\">// &quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;abc&quot;</span>.repeat(<span class=\"number\">1</span>)      <span class=\"comment\">// &quot;abc&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// 轉小寫</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello!&quot;</span>.toLowerCase())\t<span class=\"comment\">// hello!</span></span><br><span class=\"line\"><span class=\"comment\">// 轉大寫</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello!&quot;</span>.toUpperCase())\t<span class=\"comment\">// HELLO!&quot;abc&quot;.repeat(2)      // &quot;abcabc&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// 找字串位置, -1 不存在</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello!&quot;</span>.indexOf(<span class=\"string\">&#x27;l&#x27;</span>))\t<span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello!&quot;</span>.indexOf(<span class=\"string\">&#x27;y&#x27;</span>))\t<span class=\"comment\">// -1</span></span><br><span class=\"line\"><span class=\"comment\">// 取代找字串</span></span><br><span class=\"line\"><span class=\"comment\">// 僅取代第一個</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello!&quot;</span>.replace(<span class=\"string\">&#x27;l&#x27;</span>, <span class=\"string\">&quot;!x&quot;</span>))\t<span class=\"comment\">// He!xlo!</span></span><br><span class=\"line\"><span class=\"comment\">// 正規表達式(regexp)可取代全部</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello!&quot;</span>.replace(<span class=\"regexp\">/l/g</span>, <span class=\"string\">&quot;!x&quot;</span>))\t<span class=\"comment\">// He!x!xo!</span></span><br><span class=\"line\"><span class=\"comment\">// trim 刪除前後空白</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;  Hello! &quot;</span>.trim() + <span class=\"string\">&quot;..&quot;</span>)\t<span class=\"comment\">// Hello!..</span></span><br><span class=\"line\"><span class=\"comment\">// string length1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello!&quot;</span>.length)\t<span class=\"comment\">// 6</span></span><br><span class=\"line\"><span class=\"comment\">// replace </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">&quot;abc&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> str2 = str.replace(<span class=\"string\">&quot;b&quot;</span>,<span class=\"string\">&quot;z&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str)\t<span class=\"comment\">// abc</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str2)\t<span class=\"comment\">// azc</span></span><br><span class=\"line\"><span class=\"comment\">// slice 取出字串 </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> str = <span class=\"string\">&#x27;The quick brown fox jumps over the lazy dog.&#x27;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.slice(<span class=\"number\">31</span>)) \t\t\t<span class=\"comment\">// &quot;the lazy dog.&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.slice(<span class=\"number\">4</span>, <span class=\"number\">19</span>)) \t<span class=\"comment\">// &quot;quick brown fox&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.slice(-<span class=\"number\">4</span>)) \t\t\t<span class=\"comment\">// &quot;dog.&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.slice(-<span class=\"number\">9</span>, -<span class=\"number\">5</span>))\t<span class=\"comment\">// &quot;lazy&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"陣列-Array\"><a href=\"#陣列-Array\" class=\"headerlink\" title=\"陣列 Array\"></a>陣列 Array</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> scores = [ <span class=\"number\">30</span>, <span class=\"number\">70</span>, <span class=\"number\">60</span>, <span class=\"number\">50</span>]</span><br><span class=\"line\"><span class=\"comment\">// var names = []</span></span><br><span class=\"line\">scores.push(<span class=\"number\">100</span>)</span><br><span class=\"line\">scores.push(<span class=\"number\">80</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(scores, scores.length)</span><br><span class=\"line\"><span class=\"comment\">// 二維陣列 宣告</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> number = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr = []</span><br><span class=\"line\"><span class=\"comment\">// 宣告第二層</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i &lt; number ; i++) &#123;</span><br><span class=\"line\">\tarr[i] = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 給值</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i &lt; number ; i++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j=<span class=\"number\">0</span> ; j &lt; number ; j++) &#123;</span><br><span class=\"line\">\t\tarr[i][j] = i+j</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr)\t<span class=\"comment\">// [ [ 0, 1, 2 ], [ 1, 2, 3 ], [ 2, 3, 4 ] ]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// array using function</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> numbers = [<span class=\"number\">3</span>, <span class=\"number\">56</span>, <span class=\"number\">2</span>, <span class=\"number\">48</span>, <span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"comment\">//Map -Create a new array by doing something with each item in an array.</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> doubleNumber = numbers.map(<span class=\"function\">(<span class=\"params\">number</span>) =&gt;</span> number * <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(doubleNumber); <span class=\"comment\">//  [6, 112, 4, 96, 10]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Filter - Create a new array by keeping the items that return true.</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> filterNumber = numbers.filter(<span class=\"function\">(<span class=\"params\">number</span>) =&gt;</span> number &gt; <span class=\"number\">10</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(filterNumber); <span class=\"comment\">// [56, 48]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Reduce - Accumulate a value by doing something to each item in an array.</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sumNumber = numbers.reduce(<span class=\"function\">(<span class=\"params\">previousValue, currentVlaue</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`previous:<span class=\"subst\">$&#123;previousValue&#125;</span>, current:<span class=\"subst\">$&#123;currentVlaue&#125;</span>`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> previousValue + currentVlaue;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// previous:3, current:56</span></span><br><span class=\"line\"><span class=\"comment\">// previous:59, current:2</span></span><br><span class=\"line\"><span class=\"comment\">// previous:61, current:48</span></span><br><span class=\"line\"><span class=\"comment\">// previous:109, current:5</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sumNumber); <span class=\"comment\">// 114</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Find - find the first item that matches from an array.</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> firstNumber = numbers.find(<span class=\"function\">(<span class=\"params\">number</span>) =&gt;</span> number &gt; <span class=\"number\">10</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(firstNumber); <span class=\"comment\">// 56</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//FindIndex - find the index of the first item that matches.</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> firstNumberIndex = numbers.findIndex(<span class=\"function\">(<span class=\"params\">number</span>) =&gt;</span> number &gt; <span class=\"number\">10</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(firstNumberIndex); <span class=\"comment\">// 1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Sort - sorts the elements of an array</span></span><br><span class=\"line\"><span class=\"comment\">// compareFunction(a, b): - 後面欄位</span></span><br><span class=\"line\"><span class=\"comment\">// &gt; 0\tsort b before a</span></span><br><span class=\"line\"><span class=\"comment\">// &lt; 0\tsort a before b</span></span><br><span class=\"line\"><span class=\"comment\">// === 0\tkeep original order of a and b</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> numbers = [<span class=\"number\">4</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> numbers2 = numbers.sort(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a, b);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 2 4</span></span><br><span class=\"line\"><span class=\"comment\">// 5 2</span></span><br><span class=\"line\"><span class=\"comment\">// 5 4</span></span><br><span class=\"line\"><span class=\"comment\">// 1 4</span></span><br><span class=\"line\"><span class=\"comment\">// 1 2</span></span><br><span class=\"line\"><span class=\"comment\">// 3 4</span></span><br><span class=\"line\"><span class=\"comment\">// 3 2</span></span><br><span class=\"line\">numbers[<span class=\"number\">2</span>] = <span class=\"number\">9</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(numbers); <span class=\"comment\">// [1, 2, 9, 4, 5]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(numbers2); <span class=\"comment\">// [1, 2, 9, 4, 5]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Array.from() 方法會從類陣列（array-like）或是可迭代（iterable）物件建立一個新的 Array 實體</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Array</span>.from(<span class=\"string\">&#x27;foo&#x27;</span>));</span><br><span class=\"line\"><span class=\"comment\">// expected output: Array [&quot;f&quot;, &quot;o&quot;, &quot;o&quot;]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Array</span>.from([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], <span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x + x));</span><br><span class=\"line\"><span class=\"comment\">// expected output: Array [2, 4, 6]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Set為一特殊object,可以視為一個 values 的收集器，每個值只會出現一次而已</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">5</span>, <span class=\"number\">7</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> arrToSet = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>(arr); <span class=\"comment\">// Set &#123; 1, 3, 5, 7 &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// add,delte,has</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mySet = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>();</span><br><span class=\"line\">mySet.add(<span class=\"number\">1</span>); <span class=\"comment\">// Set [ 1 ]</span></span><br><span class=\"line\">mySet.add(<span class=\"number\">5</span>); <span class=\"comment\">// Set [ 1, 5 ]</span></span><br><span class=\"line\">mySet.add(<span class=\"number\">5</span>); <span class=\"comment\">// Set [ 1, 5 ]</span></span><br><span class=\"line\">mySet.add(<span class=\"string\">&#x27;some text&#x27;</span>); <span class=\"comment\">// Set [ 1, 5, &#x27;some text&#x27; ]</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> o = &#123;<span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">mySet.add(o);</span><br><span class=\"line\">mySet.add(&#123;<span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">2</span>&#125;); <span class=\"comment\">// o is referencing a different object so this is okay</span></span><br><span class=\"line\">mySet.has(<span class=\"number\">1</span>); <span class=\"comment\">// true</span></span><br><span class=\"line\">mySet.has(<span class=\"number\">3</span>); <span class=\"comment\">// false, 3 has not been added to the set</span></span><br><span class=\"line\">mySet.has(<span class=\"number\">5</span>);              <span class=\"comment\">// true</span></span><br><span class=\"line\">mySet.has(<span class=\"built_in\">Math</span>.sqrt(<span class=\"number\">25</span>));  <span class=\"comment\">// true</span></span><br><span class=\"line\">mySet.has(<span class=\"string\">&#x27;Some Text&#x27;</span>.toLowerCase()); <span class=\"comment\">// true</span></span><br><span class=\"line\">mySet.has(o); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"array-item-remove\"><a href=\"#array-item-remove\" class=\"headerlink\" title=\"array item remove\"></a>array item remove</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 使用 delete array 會造成 length 不變, 原來的值變成 undefined</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> jobs[i]</span><br><span class=\"line\"><span class=\"comment\">// splice 可真正將變數從 array 移除</span></span><br><span class=\"line\">jobs.splice(i,<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"array-合併\"><a href=\"#array-合併\" class=\"headerlink\" title=\"array 合併\"></a>array 合併</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> array1 = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> array2 = [<span class=\"string\">&#x27;d&#x27;</span>, <span class=\"string\">&#x27;e&#x27;</span>, <span class=\"string\">&#x27;f&#x27;</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> array3 = array1.concat(array2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(array3);</span><br><span class=\"line\"><span class=\"comment\">// expected output: Array [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"物件-object\"><a href=\"#物件-object\" class=\"headerlink\" title=\"物件 object\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Learn/JavaScript/Objects/Basics\">物件 object</a></h3><h4 id=\"example-2\"><a href=\"#example-2\" class=\"headerlink\" title=\"example\"></a>example</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = &#123;</span><br><span class=\"line\">\tname : [<span class=\"string\">&#x27;Bob&#x27;</span>, <span class=\"string\">&#x27;Smith&#x27;</span>],</span><br><span class=\"line\">\tage: <span class=\"number\">20</span>,</span><br><span class=\"line\">\tgender: <span class=\"string\">&#x27;mail&#x27;</span>,</span><br><span class=\"line\">\tinsterests: [ <span class=\"string\">&#x27;music&#x27;</span>, <span class=\"string\">&#x27;skiing&#x27;</span>],</span><br><span class=\"line\">\tbio: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t\talert(<span class=\"built_in\">this</span>.name[<span class=\"number\">0</span>] + <span class=\"string\">&#x27; &#x27;</span> + <span class=\"built_in\">this</span>.name[<span class=\"number\">1</span>] + <span class=\"string\">&#x27; is &#x27;</span>+ <span class=\"built_in\">this</span>.age + <span class=\"string\">&#x27; years old. He likes &#x27;</span> + <span class=\"built_in\">this</span>.insterests[<span class=\"number\">0</span>]+ <span class=\"string\">&#x27; and &#x27;</span>+ <span class=\"built_in\">this</span>.insterests[<span class=\"number\">1</span>]);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tgreeting: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\talert(<span class=\"string\">&#x27;Hi! I\\&#x27;m &#x27;</span> + <span class=\"built_in\">this</span>.name[<span class=\"number\">0</span>] + <span class=\"string\">&#x27;.&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// -- 點記法 (Dot notation) --</span></span><br><span class=\"line\">person.age</span><br><span class=\"line\">person.interests[<span class=\"number\">1</span>]</span><br><span class=\"line\">person.bio()</span><br><span class=\"line\"><span class=\"comment\">// -- 括弧記法 (Bracket notation) --</span></span><br><span class=\"line\">person[<span class=\"string\">&#x27;age&#x27;</span>]</span><br><span class=\"line\">person[<span class=\"string\">&#x27;name&#x27;</span>][<span class=\"string\">&#x27;first&#x27;</span>]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"運算式與運算子\"><a href=\"#運算式與運算子\" class=\"headerlink\" title=\"運算式與運算子\"></a>運算式與運算子</h3><h4 id=\"與-也比較型態-建議全用\"><a href=\"#與-也比較型態-建議全用\" class=\"headerlink\" title=\"== 與 === (=== 也比較型態,建議全用 ===)\"></a>== 與 === (=== 也比較型態,建議全用 ===)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;0==&#x27;0&#x27;&quot;</span>, <span class=\"number\">0</span>==<span class=\"string\">&#x27;0&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;0===&#x27;0&#x27;&quot;</span>, <span class=\"number\">0</span>===<span class=\"string\">&#x27;0&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;12==&#x27;12&#x27;&quot;</span>, <span class=\"number\">0</span>==<span class=\"string\">&#x27;12&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;12===&#x27;12&#x27;&quot;</span>, <span class=\"number\">0</span>===<span class=\"string\">&#x27;12&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;0==&#x27;&#x27;&quot;</span>, <span class=\"number\">0</span>==<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;0===&#x27;&#x27;&quot;</span>, <span class=\"number\">0</span>===<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;0==null&quot;</span>, <span class=\"number\">0</span>==<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// result</span></span><br><span class=\"line\">  <span class=\"number\">0</span>==<span class=\"string\">&#x27;0&#x27;</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"number\">0</span>===<span class=\"string\">&#x27;0&#x27;</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"number\">12</span>==<span class=\"string\">&#x27;12&#x27;</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"number\">12</span>===<span class=\"string\">&#x27;12&#x27;</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"number\">0</span>==<span class=\"string\">&#x27;&#x27;</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"number\">0</span>===<span class=\"string\">&#x27;&#x27;</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"number\">0</span>==<span class=\"literal\">null</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\">// object, 比較位置</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;[]===[]&quot;</span>, []===[])</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;[1]===[1]&quot;</span>, [<span class=\"number\">1</span>]===[<span class=\"number\">1</span>])</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;&#123;&#125;===&#123;&#125;&#x27;&quot;</span>, &#123;&#125;===&#123;&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;&#123;a: 1&#125;===&#123;a: 1&#125;&quot;</span>, &#123;<span class=\"attr\">a</span>: <span class=\"number\">1</span>&#125;===&#123;<span class=\"attr\">a</span>: <span class=\"number\">1</span>&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 真正的相等</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">\ta: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = obj</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;obj === obj2&quot;</span>, obj === obj2)</span><br><span class=\"line\">obj2.a = <span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;obj=&quot;</span>, obj)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// result</span></span><br><span class=\"line\">$ node test1.js</span><br><span class=\"line\">  []===[] <span class=\"literal\">false</span></span><br><span class=\"line\">  [<span class=\"number\">1</span>]===[<span class=\"number\">1</span>] <span class=\"literal\">false</span></span><br><span class=\"line\">  &#123;&#125;===&#123;&#125;<span class=\"string\">&#x27; false</span></span><br><span class=\"line\"><span class=\"string\">  &#123;a: 1&#125;===&#123;a: 1&#125; false</span></span><br><span class=\"line\"><span class=\"string\">  obj === obj2 true</span></span><br><span class=\"line\"><span class=\"string\">  obj= &#123; a: 2 &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"邏輯運算子\"><a href=\"#邏輯運算子\" class=\"headerlink\" title=\"邏輯運算子\"></a>邏輯運算子</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 定義</span><br><span class=\"line\">&amp;&amp; : AND</span><br><span class=\"line\">|| : OR</span><br><span class=\"line\">!  : NOT</span><br><span class=\"line\"># 奇異結果</span><br><span class=\"line\">3 &amp;&amp; 10 --&gt; 10</span><br><span class=\"line\">3 || 10 --&gt; 3</span><br><span class=\"line\">0 || 10 --&gt; 10</span><br><span class=\"line\">3 &amp;&amp; 10 --&gt; 10</span><br><span class=\"line\">false &amp;&amp; 7 --&gt; false</span><br><span class=\"line\">0 &amp;&amp; 7 --&gt; 0</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"算術運算子\"><a href=\"#算術運算子\" class=\"headerlink\" title=\"算術運算子\"></a>算術運算子</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 定義</span></span><br><span class=\"line\">+ : 加</span><br><span class=\"line\">- : 減</span><br><span class=\"line\">* : 乘</span><br><span class=\"line\">/ : 除</span><br><span class=\"line\">% : 取餘數</span><br><span class=\"line\">** : 指數運算子 </span><br><span class=\"line\"><span class=\"comment\"># 簡短運算</span></span><br><span class=\"line\">a += 1</span><br><span class=\"line\">a -= 1</span><br><span class=\"line\">a *= 3</span><br><span class=\"line\">a /= 3</span><br><span class=\"line\">a++</span><br><span class=\"line\">a--</span><br><span class=\"line\">++a</span><br><span class=\"line\">--a</span><br></pre></td></tr></table></figure>\n<p>2**3 : $2^3$</p>\n<h4 id=\"位元運算子\"><a href=\"#位元運算子\" class=\"headerlink\" title=\"位元運算子\"></a>位元運算子</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">a &amp; b\t  : 位元 AND</span><br><span class=\"line\">a | b\t  : 位元 OR</span><br><span class=\"line\">a ^ b\t  : 位元 XOR</span><br><span class=\"line\">~ a\t  : 位元 NOT</span><br><span class=\"line\">a &lt;&lt; <span class=\"string\">b\t: 左移</span></span><br><span class=\"line\"><span class=\"string\">a &gt;&gt; b</span>\t: 有號右移</span><br><span class=\"line\">a &gt;&gt;&gt; b\t: 以0填充的右移</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"條件式\"><a href=\"#條件式\" class=\"headerlink\" title=\"條件式\"></a>條件式</h3><h4 id=\"if-條件式\"><a href=\"#if-條件式\" class=\"headerlink\" title=\"if 條件式\"></a>if 條件式</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> score = <span class=\"number\">85</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (score &gt; <span class=\"number\">60</span>) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;及格&#x27;</span>)</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;不及格&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"># 多條件</span><br><span class=\"line\"><span class=\"keyword\">if</span> (score &gt; <span class=\"number\">80</span>) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;很棒&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (score &gt; <span class=\"number\">60</span>) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;及格&#x27;</span>)</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;不及格&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"switch-case\"><a href=\"#switch-case\" class=\"headerlink\" title=\"switch case\"></a>switch case</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> month = <span class=\"number\">2</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">switch</span>(month) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"number\">1</span> :</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;一月&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"number\">2</span> :</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;二月&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"number\">3</span> :</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;三月&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t<span class=\"keyword\">default</span> :</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;未知&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"三元運算子-Ternary\"><a href=\"#三元運算子-Ternary\" class=\"headerlink\" title=\"三元運算子 Ternary\"></a>三元運算子 Ternary</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log( <span class=\"number\">10</span> &gt; <span class=\"number\">5</span> ? <span class=\"string\">&#x27;bigger&#x27;</span> : <span class=\"string\">&#x27;smaller&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"迴圈\"><a href=\"#迴圈\" class=\"headerlink\" title=\"迴圈\"></a>迴圈</h3><blockquote>\n<p>兩種改變迴圈的指令 : break, continue</p>\n</blockquote>\n<h4 id=\"for-迴圈\"><a href=\"#for-迴圈\" class=\"headerlink\" title=\"for  迴圈\"></a>for  迴圈</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;<span class=\"number\">10</span> ; i++) &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"for-in\"><a href=\"#for-in\" class=\"headerlink\" title=\"for in\"></a>for in</h5><p>ES5標準,遍歷的是key</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"string\">&#x27;a&#x27;</span>,<span class=\"string\">&#x27;b&#x27;</span>,<span class=\"string\">&#x27;c&#x27;</span>,<span class=\"string\">&#x27;d&#x27;</span>,&#123;<span class=\"string\">&#x27;e&#x27;</span>:<span class=\"string\">&#x27;e_value&#x27;</span>,<span class=\"string\">&#x27;f&#x27;</span>:<span class=\"string\">&#x27;f_value&#x27;</span>&#125;]</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> index <span class=\"keyword\">in</span> arr)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(index)</span><br><span class=\"line\">&#125;\t\t<span class=\"comment\">// 0,1,2,3,4</span></span><br><span class=\"line\"><span class=\"comment\">//---------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">//若想要用for in 取value，也是可以</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> index <span class=\"keyword\">in</span> arr)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(arr[index])</span><br><span class=\"line\">&#125; \t<span class=\"comment\">//a,b,c,d,&#123;&#x27;e&#x27;:&#x27;e_value&#x27;,&#x27;f&#x27;:&#x27;f_value&#x27;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//---------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">//for in 會遍歷自定義屬性</span></span><br><span class=\"line\">arr.name=<span class=\"string\">&#x27;myArray&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> index <span class=\"keyword\">in</span> arr)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(index)</span><br><span class=\"line\">&#125; \t<span class=\"comment\">// 0,1,2,3,4,name</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"for-of\"><a href=\"#for-of\" class=\"headerlink\" title=\"for of\"></a>for of</h5><p>ES6標準,遍歷的是value<br>可使用的對象有Array、Map、Set、String、TypedArray、arguments</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"string\">&#x27;a&#x27;</span>,<span class=\"string\">&#x27;b&#x27;</span>,<span class=\"string\">&#x27;c&#x27;</span>,<span class=\"string\">&#x27;d&#x27;</span>,&#123;<span class=\"string\">&#x27;e&#x27;</span>:<span class=\"string\">&#x27;e_value&#x27;</span>,<span class=\"string\">&#x27;f&#x27;</span>:<span class=\"string\">&#x27;f_value&#x27;</span>&#125;]</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> value <span class=\"keyword\">of</span> arr)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(value)</span><br><span class=\"line\">&#125; <span class=\"comment\">//a,b,c,d,&#123;&#x27;e&#x27;:&#x27;e_value&#x27;,&#x27;f&#x27;:&#x27;f_value&#x27;&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"while-迴圈\"><a href=\"#while-迴圈\" class=\"headerlink\" title=\"while  迴圈\"></a>while  迴圈</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// while</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> n = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (n &lt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    n++</span><br><span class=\"line\">    x += n</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// do while</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> i = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">while</span> (i &lt; <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"函式\"><a href=\"#函式\" class=\"headerlink\" title=\"函式\"></a>函式</h3><h4 id=\"基本型式\"><a href=\"#基本型式\" class=\"headerlink\" title=\"基本型式\"></a>基本型式</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">multiply</span>(<span class=\"params\">num1,num2</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> result = num1 * num2</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(multiply(<span class=\"number\">4</span>,<span class=\"number\">7</span>))</span><br><span class=\"line\"><span class=\"comment\">// 另一種表示法</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> multiply= <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num1,num2</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> result = num1 * num2</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(multiply(<span class=\"number\">4</span>,<span class=\"number\">7</span>)) <span class=\"comment\">// 28</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"函式含-callback-function\"><a href=\"#函式含-callback-function\" class=\"headerlink\" title=\"函式含 callback function\"></a>函式含 callback function</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">double</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> n * <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">map</span>(<span class=\"params\">arr, callback</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> result = []</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">\t\tresult[i] = callback(arr[i])</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map(arr, double)) <span class=\"comment\">// [ 2, 4, 6 ]</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"匿名數式-anonymous-function\"><a href=\"#匿名數式-anonymous-function\" class=\"headerlink\" title=\"匿名數式 anonymous function\"></a>匿名數式 anonymous function</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">map</span>(<span class=\"params\">arr, callback</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> result = []</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">\t\tresult[i] = callback(arr[i])</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 匿名函式</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map(arr, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> x*<span class=\"number\">3</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">) <span class=\"comment\">// [ 3, 6, 9 ]</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"箭頭函式-arrow-function\"><a href=\"#箭頭函式-arrow-function\" class=\"headerlink\" title=\"箭頭函式 arrow function\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Functions/Arrow_functions\">箭頭函式 arrow function</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 只有一個參數時,括號才能不加:</span></span><br><span class=\"line\"><span class=\"comment\">// (單一參數) =&gt; &#123; 陳述式; &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// 單一參數 =&gt; &#123; 陳述式; &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//若無參數，就一定要加括號:</span></span><br><span class=\"line\"><span class=\"comment\">// () =&gt; &#123; statements &#125;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.age = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">setInterval</span>( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.age++); </span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Person(); <span class=\"comment\">// 0, 1 , 2 ...</span></span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"參數-Parameter-與引數-Argument\"><a href=\"#參數-Parameter-與引數-Argument\" class=\"headerlink\" title=\"參數(Parameter)與引數(Argument)\"></a>參數(Parameter)與引數(<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Functions/arguments\">Argument</a>)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// a,b 參數(Parameter)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// js arguments 內容</span></span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>)\t<span class=\"comment\">// [Arguments] &#123; &#x27;0&#x27;: 2, &#x27;1&#x27;: 3 &#125;</span></span><br><span class=\"line\">\t<span class=\"comment\">// js arguments[1]</span></span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>[<span class=\"number\">1</span>])\t<span class=\"comment\">// 3</span></span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> <span class=\"built_in\">arguments</span>) <span class=\"comment\">// object</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 2, 3 與引數(Argument)</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(add(<span class=\"number\">2</span>, <span class=\"number\">3</span>))\t<span class=\"comment\">// 5</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"內建函式\"><a href=\"#內建函式\" class=\"headerlink\" title=\"內建函式\"></a>內建函式</h3><h4 id=\"Math\"><a href=\"#Math\" class=\"headerlink\" title=\"Math\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Math\">Math</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 亂數 介於0到1之間(包含 0，不包含1)</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.random())</span><br><span class=\"line\"><span class=\"comment\">//四捨五入</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.round(<span class=\"number\">20.49</span>))\t\t<span class=\"comment\">// 20</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.round(-<span class=\"number\">20.49</span>))\t\t<span class=\"comment\">// -20</span></span><br><span class=\"line\"><span class=\"comment\">// 取較大整數(正整數無條件進位)</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.ceil(<span class=\"number\">10.11</span>))\t\t\t<span class=\"comment\">// 11</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.ceil(-<span class=\"number\">10.11</span>))\t\t<span class=\"comment\">// -10</span></span><br><span class=\"line\"><span class=\"comment\">// 取較小整數(正整數無條件捨去)</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.floor(<span class=\"number\">10.98</span>))\t\t<span class=\"comment\">// 10</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.floor(-<span class=\"number\">10.98</span>))\t\t<span class=\"comment\">// -11</span></span><br><span class=\"line\"><span class=\"comment\">// 最大整數</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.floor(<span class=\"number\">5.95</span>))</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.floor(-<span class=\"number\">5.95</span>))</span><br><span class=\"line\"><span class=\"comment\">// 平方 </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.pow(<span class=\"number\">10</span>, <span class=\"number\">2</span>)) <span class=\"comment\">// 100</span></span><br><span class=\"line\"><span class=\"comment\">// 3次方</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.pow(<span class=\"number\">3</span>, <span class=\"number\">3</span>))\t<span class=\"comment\">// 27</span></span><br><span class=\"line\"><span class=\"comment\">// 開根號</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.sqrt(<span class=\"number\">49</span>))\t\t\t<span class=\"comment\">// 7</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.pow(<span class=\"number\">49</span>, <span class=\"number\">0.5</span>))\t<span class=\"comment\">// 7</span></span><br><span class=\"line\"><span class=\"comment\">// 3次根號</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.pow(<span class=\"number\">27</span>, <span class=\"number\">1</span>/<span class=\"number\">3</span>))\t\t<span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Array\"><a href=\"#Array\" class=\"headerlink\" title=\"Array\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array\">Array</a></h4><h5 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 簡單型式</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">double</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> n * <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> newArr =arr.map(double)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr)\t\t\t<span class=\"comment\">// [ 1, 2, 3 ]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(newArr)\t\t<span class=\"comment\">// [ 2, 4, 6 ]</span></span><br><span class=\"line\"><span class=\"comment\">// 詳細變化</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mapEmpty = people.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>)</span>&#123;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mapEmpty);    <span class=\"comment\">// [undefined, undefined, undefined, undefined]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> mapAgeThan5 = people.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> item.age &gt; <span class=\"number\">5</span>;    <span class=\"comment\">// 比較大於五歲的</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mapAgeThan5); <span class=\"comment\">// [true, true, false, false]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> mapAgeThan5_2 = people.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 錯誤示範</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (item.age &gt; <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> item;              <span class=\"comment\">// 回傳大於五歲的</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;               <span class=\"comment\">// 別以為空的或是 false 就不會回傳</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mapAgeThan5_2);   <span class=\"comment\">// [&#123;name: &#x27;Casper&#x27;...&#125;, &#123;name: &#x27;Wang&#x27;...&#125;, false, false]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> mapEat = people.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (item.like !== <span class=\"string\">&#x27;蘿蔔泥&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;item.like&#125;</span> 好吃`</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;item.like&#125;</span> 不好吃`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mapEat);          <span class=\"comment\">// [&quot;鍋燒意麵 好吃&quot;, &quot;炒麵 好吃&quot;, &quot;蘿蔔泥 不好吃&quot;, &quot;蘿蔔泥 不好吃&quot;]</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"indexOf-lastIndexOf\"><a href=\"#indexOf-lastIndexOf\" class=\"headerlink\" title=\"indexOf/lastIndexOf\"></a>indexOf/lastIndexOf</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 第一個找到之索引, 不存在傳回 -1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>].indexOf(<span class=\"number\">1</span>))\t\t<span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"comment\">// 最後一個找到之索引</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>].lastIndexOf(<span class=\"number\">1</span>))\t<span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"join\"><a href=\"#join\" class=\"headerlink\" title=\"join\"></a>join</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 用某字串結合array成字串 </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr.join(<span class=\"string\">&#x27;!&#x27;</span>))\t<span class=\"comment\">// 1!2!3</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a>filter</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// filter 陣列內容設定條件成立即留下</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr2 = [<span class=\"number\">1</span>, -<span class=\"number\">9</span>, <span class=\"number\">2</span>, -<span class=\"number\">1</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr2.filter(</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> x &gt; <span class=\"number\">0</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">)\t\t<span class=\"comment\">// [ 1, 2, 3 ]</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"slice\"><a href=\"#slice\" class=\"headerlink\" title=\"slice\"></a>slice</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 切下某些 array 內容</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr3 = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>]</span><br><span class=\"line\"><span class=\"comment\">// slice from 2 to end</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr3.slice(<span class=\"number\">2</span>))\t<span class=\"comment\">// [ 3, 4, 5, 6 ]</span></span><br><span class=\"line\"><span class=\"comment\">//  slice from 2 to 4(before)</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr3.slice(<span class=\"number\">2</span>, <span class=\"number\">4</span>))\t<span class=\"comment\">// [ 3, 4 ]</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"splice-改變原陣列\"><a href=\"#splice-改變原陣列\" class=\"headerlink\" title=\"splice (改變原陣列)\"></a>splice (改變原陣列)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// array.splice(start[, deleteCount[, item1[, item2[, ...]]]])</span></span><br><span class=\"line\"><span class=\"comment\">// 從哪裡開始, 刪除幾個 item, 插入其他內容</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> months = [<span class=\"string\">&#x27;Jan&#x27;</span>, <span class=\"string\">&#x27;March&#x27;</span>, <span class=\"string\">&#x27;April&#x27;</span>, <span class=\"string\">&#x27;June&#x27;</span>];</span><br><span class=\"line\"><span class=\"comment\">// position 1 開始刪除 0 個</span></span><br><span class=\"line\">months.splice(<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"string\">&#x27;Feb&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// inserts at index 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(months);\t\t<span class=\"comment\">// [ &#x27;Jan&#x27;, &#x27;Feb&#x27;, &#x27;March&#x27;, &#x27;April&#x27;, &#x27;June&#x27; ]</span></span><br><span class=\"line\"><span class=\"comment\">// position 4 開始刪除 1 個</span></span><br><span class=\"line\">months.splice(<span class=\"number\">4</span>, <span class=\"number\">1</span>, <span class=\"string\">&#x27;May&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// replaces 1 element at index 4</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(months);\t<span class=\"comment\">// [ &#x27;Jan&#x27;, &#x27;Feb&#x27;, &#x27;March&#x27;, &#x27;April&#x27;, &#x27;May&#x27; ]</span></span><br><span class=\"line\"><span class=\"comment\">// position 3 開始刪除 1 個</span></span><br><span class=\"line\">months.splice(<span class=\"number\">3</span>, <span class=\"number\">1</span> );</span><br><span class=\"line\"><span class=\"comment\">// delete 1 element at index 3</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(months);\t<span class=\"comment\">// [ &#x27;Jan&#x27;, &#x27;Feb&#x27;, &#x27;March&#x27;, &#x27;May&#x27; ]</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"sort-改變原陣列\"><a href=\"#sort-改變原陣列\" class=\"headerlink\" title=\"sort (改變原陣列)\"></a>sort (改變原陣列)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 文字排序</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> months = [<span class=\"string\">&#x27;March&#x27;</span>, <span class=\"string\">&#x27;Jan&#x27;</span>, <span class=\"string\">&#x27;Feb&#x27;</span>, <span class=\"string\">&#x27;Dec&#x27;</span>];</span><br><span class=\"line\">months.sort();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(months);\t<span class=\"comment\">// [ &#x27;Dec&#x27;, &#x27;Feb&#x27;, &#x27;Jan&#x27;, &#x27;March&#x27; ]</span></span><br><span class=\"line\"><span class=\"comment\">// 數字也用近似文字方式排列</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> array1 = [<span class=\"number\">1</span>, <span class=\"number\">30</span>, <span class=\"number\">4</span>, <span class=\"number\">21</span>, <span class=\"number\">100000</span>];</span><br><span class=\"line\">array1.sort();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(array1);\t<span class=\"comment\">// [ 1, 100000, 21, 30, 4 ]</span></span><br><span class=\"line\"><span class=\"comment\">// 數字排列 flow 1(小排到大)</span></span><br><span class=\"line\"><span class=\"comment\">// 相等 return 0, 不換位置 -1, 換位置 1 (正數換位置)</span></span><br><span class=\"line\"><span class=\"comment\">// b (positionnow : start from value 1), a(position now+1 : start from value 100000) </span></span><br><span class=\"line\"><span class=\"comment\">// array1.sort( function(a, b) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \tif (a === b) return 0</span></span><br><span class=\"line\"><span class=\"comment\">// \tif (b &gt; a) return -1</span></span><br><span class=\"line\"><span class=\"comment\">// \treturn 1</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;)</span></span><br><span class=\"line\"><span class=\"comment\">// console.log(array1);\t// [ 1, 4, 21, 30, 100000 ]</span></span><br><span class=\"line\"><span class=\"comment\">// 數字排列 flow 2(小排到大)</span></span><br><span class=\"line\"><span class=\"comment\">// (正數換位置)</span></span><br><span class=\"line\">array1.sort( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// return (b &lt; a) ? 1 :　-1 </span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a - b </span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(array1);\t<span class=\"comment\">// [ 1, 4, 21, 30, 100000 ]</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"reverse-改變原陣列\"><a href=\"#reverse-改變原陣列\" class=\"headerlink\" title=\"reverse (改變原陣列)\"></a>reverse (改變原陣列)</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const array1 &#x3D; [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;];</span><br><span class=\"line\">console.log(&#39;array1:&#39;, array1);  &#x2F;&#x2F; array1: [ &#39;one&#39;, &#39;two&#39;, &#39;three&#39; ]</span><br><span class=\"line\">const reversed &#x3D; array1.reverse();</span><br><span class=\"line\">console.log(&#39;reversed:&#39;, reversed);\t&#x2F;&#x2F; reversed: [ &#39;three&#39;, &#39;two&#39;, &#39;one&#39; ]</span><br><span class=\"line\">&#x2F;&#x2F; Careful: reverse is destructive -- it changes the original array.</span><br><span class=\"line\">console.log(&#39;array1:&#39;, array1);\t&#x2F;&#x2F; array1: [ &#39;three&#39;, &#39;two&#39;, &#39;one&#39; ]</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"some-來檢查陣列裡面是否有一些符合條件。只要有一個以上符合條件就會回傳-true\"><a href=\"#some-來檢查陣列裡面是否有一些符合條件。只要有一個以上符合條件就會回傳-true\" class=\"headerlink\" title=\"some - 來檢查陣列裡面是否有一些符合條件。只要有一個以上符合條件就會回傳 true\"></a>some - 來檢查陣列裡面是否有一些符合條件。只要有一個以上符合條件就會回傳 true</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>-111<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>-222<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>-444<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> elements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;li&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">/* elements 類陣列不能執行 .some() */</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// console.log(elements.some( function(item) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// \treturn Num(item.innerText) &gt; 0 </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// &#125;))</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">/* elements 類陣列,但非陣列,要轉成陣列才能執行 .some() */</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> isAnyPositive = [...elements].some( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(item.innerText)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(item.innerText) &gt; <span class=\"number\">0</span> </span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(isAnyPositive) <span class=\"comment\">// true</span></span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"every-陣列裡面的所有東西都符合條件才會回傳-true\"><a href=\"#every-陣列裡面的所有東西都符合條件才會回傳-true\" class=\"headerlink\" title=\"every - 陣列裡面的所有東西都符合條件才會回傳 true\"></a>every - 陣列裡面的所有東西都符合條件才會回傳 true</h5><h4 id=\"JSON\"><a href=\"#JSON\" class=\"headerlink\" title=\"JSON\"></a>JSON</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// JSON.stringify() - method converts a JavaScript value to a JSON string</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(&#123; <span class=\"attr\">x</span>: <span class=\"number\">5</span>, <span class=\"attr\">y</span>: <span class=\"number\">6</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// json to obj</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyObj = <span class=\"built_in\">JSON</span>.parse(body)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Global\"><a href=\"#Global\" class=\"headerlink\" title=\"Global\"></a><a href=\"https://www.w3schools.com/jsref/jsref_obj_global.asp\">Global</a></h4><h5 id=\"encodeURIComponent-encodeURI-encode-a-URI\"><a href=\"#encodeURIComponent-encodeURI-encode-a-URI\" class=\"headerlink\" title=\"encodeURIComponent()/encodeURI() - encode a URI\"></a>encodeURIComponent()/encodeURI() - encode a URI</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> uri = <span class=\"string\">&quot;my test.asp?name=ståle&amp;car=saab&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> res = <span class=\"built_in\">encodeURI</span>(uri);</span><br><span class=\"line\"><span class=\"comment\">// 含括編碼的字元較多, 使用此function</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> res2 = <span class=\"built_in\">encodeURIComponent</span>(uri);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"decodeURIComponent-decodeURI-decode-a-URI\"><a href=\"#decodeURIComponent-decodeURI-decode-a-URI\" class=\"headerlink\" title=\"decodeURIComponent()/decodeURI() - decode a URI\"></a>decodeURIComponent()/decodeURI() - decode a URI</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> uri = <span class=\"string\">&quot;my test.asp?name=ståle&amp;car=saab&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> enc = <span class=\"built_in\">encodeURI</span>(uri);</span><br><span class=\"line\"><span class=\"keyword\">var</span> dec = <span class=\"built_in\">decodeURI</span>(enc);</span><br><span class=\"line\"><span class=\"keyword\">var</span> res = enc + <span class=\"string\">&quot;&lt;br&gt;&quot;</span> + dec;</span><br><span class=\"line\"><span class=\"comment\">// 含括編碼的字元較多, 使用此function</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> uri_enc = <span class=\"built_in\">encodeURIComponent</span>(uri);</span><br><span class=\"line\"><span class=\"keyword\">var</span> uri_dec = <span class=\"built_in\">decodeURIComponent</span>(uri_enc);</span><br><span class=\"line\"><span class=\"keyword\">var</span> res2 = uri_enc + <span class=\"string\">&quot;&lt;br&gt;&quot;</span> + uri_dec;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"ES6\"><a href=\"#ES6\" class=\"headerlink\" title=\"ES6\"></a><a href=\"https://github.com/DrkSephy/es6-cheatsheet\">ES6</a></h3><p>ECMAScript <a href=\"https://www.ecma-international.org/publications-and-standards/standards/ecma-262/\">ECMA-262</a> 6th edition-June 2015, 所以稱為 ES6 或 ES2015</p>\n<h4 id=\"let-和-const\"><a href=\"#let-和-const\" class=\"headerlink\" title=\"let 和 const\"></a>let 和 const</h4><p>var 的 scope(作用域) 是 function<br>let, const 的 scope(作用域) 是 block<br>const 為常數,執行中不可更改</p>\n<h4 id=\"Template-Literals-字串樣版\"><a href=\"#Template-Literals-字串樣版\" class=\"headerlink\" title=\"Template Literals (字串樣版)\"></a>Template Literals (字串樣版)</h4><p>使用兩個反引號 (back-tick ) ‵  ‵ 標示</p>\n<h5 id=\"多行字串\"><a href=\"#多行字串\" class=\"headerlink\" title=\"多行字串\"></a>多行字串</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// SE5</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> str1 = <span class=\"string\">&#x27;string line 1 \\n&#x27;</span> +</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;string line 2&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str1)</span><br><span class=\"line\"><span class=\"comment\">// SE6</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> str2 = <span class=\"string\">`string line 1 </span></span><br><span class=\"line\"><span class=\"string\">string line 2`</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str2)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"嵌入變數\"><a href=\"#嵌入變數\" class=\"headerlink\" title=\"嵌入變數\"></a>嵌入變數</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">&#x27;Robert&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// SE5</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Hello &#x27;</span> + name + <span class=\"string\">&#x27; now is &#x27;</span> + <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()) </span><br><span class=\"line\"><span class=\"comment\">// SE6 </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello <span class=\"subst\">$&#123;name&#125;</span> now is <span class=\"subst\">$&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Destructuring-解構\"><a href=\"#Destructuring-解構\" class=\"headerlink\" title=\"Destructuring (解構)\"></a>Destructuring (解構)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// array</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> [first, second, third, fourth] = arr</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(second, third)\t\t<span class=\"comment\">// 2 3</span></span><br><span class=\"line\"><span class=\"comment\">// object - 變數要與 obj 相同</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">\tname: <span class=\"string\">&#x27;Nick&#x27;</span>,</span><br><span class=\"line\">\tage: <span class=\"number\">30</span>,</span><br><span class=\"line\">\taddress: <span class=\"string\">&#x27;Taiwan&#x27;</span>,</span><br><span class=\"line\">\tfamily: &#123;</span><br><span class=\"line\">\t\tfather: <span class=\"string\">&#x27;Bill&#x27;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> &#123; name, age, address, family &#125; = obj</span><br><span class=\"line\"><span class=\"keyword\">let</span> &#123; father &#125; = family</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(name, address)\t\t<span class=\"comment\">// Nick Taiwan</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(family, father)\t\t<span class=\"comment\">// &#123; father: &#x27;Bill&#x27; &#125; Bill</span></span><br><span class=\"line\"><span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">&#123;a,b&#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a)\t\t<span class=\"comment\">// 1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test(&#123;</span><br><span class=\"line\">\ta: <span class=\"number\">1</span>,</span><br><span class=\"line\">\tb:<span class=\"number\">2</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Spread-Operator-展開-可用於複製-array-或-object-內容\"><a href=\"#Spread-Operator-展開-可用於複製-array-或-object-內容\" class=\"headerlink\" title=\"Spread Operator (展開) - 可用於複製 array 或 object 內容\"></a>Spread Operator (展開) - 可用於複製 array 或 object 內容</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// array</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> arr2 = [<span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, ...arr] </span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr2)\t\t<span class=\"comment\">// [ 4, 5, 6, 1, 2, 3 ]</span></span><br><span class=\"line\"><span class=\"comment\">// object </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">\ta: <span class=\"number\">1</span>,</span><br><span class=\"line\">\tb: <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj3 = &#123;</span><br><span class=\"line\">\t\t...obj1,</span><br><span class=\"line\">\t\tc: <span class=\"number\">3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj3)\t<span class=\"comment\">// &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// 相同變數名稱,後令押前令</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj4 = &#123;</span><br><span class=\"line\">\t...obj1,</span><br><span class=\"line\">\tb: <span class=\"number\">3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj4)\t<span class=\"comment\">// &#123; a: 1, b: 3 &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// 複製內容</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj01 = &#123;</span><br><span class=\"line\">\ta: <span class=\"number\">2</span>,</span><br><span class=\"line\">\tb: <span class=\"number\">4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj02 = &#123;</span><br><span class=\"line\">\t...obj01</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj01, obj02, obj01 === obj02)\t<span class=\"comment\">// &#123; a: 2, b: 4 &#125; &#123; a: 2, b: 4 &#125; false</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Rest-Parameters-剩餘參數-不一定用-rest-可用其他變數名稱\"><a href=\"#Rest-Parameters-剩餘參數-不一定用-rest-可用其他變數名稱\" class=\"headerlink\" title=\"Rest Parameters (剩餘參數) - 不一定用 rest 可用其他變數名稱\"></a>Rest Parameters (剩餘參數) - 不一定用 rest 可用其他變數名稱</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// array - 不一定用 rest</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"keyword\">var</span> [first, ...rest] = arr</span><br><span class=\"line\"><span class=\"keyword\">var</span> [first2, ...rest2] = arr</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first, rest)\t\t<span class=\"comment\">// 1 [ 2, 3, 4 ]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first2, rest2)\t<span class=\"comment\">// 1 [ 2, 3, 4 ]</span></span><br><span class=\"line\"><span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">\ta: <span class=\"number\">1</span>,</span><br><span class=\"line\">\tb: <span class=\"number\">2</span>,</span><br><span class=\"line\">\tc: <span class=\"number\">3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> &#123;a, ...obj2&#125; = obj</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj2)\t\t\t<span class=\"comment\">// &#123; b: 2, c: 3 &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// function </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(args)\t\t\t\t\t<span class=\"comment\">//  [ 1, 2 ]</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> args[<span class=\"number\">0</span>] + args[<span class=\"number\">1</span>]\t<span class=\"comment\">//  3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(add(<span class=\"number\">1</span>,<span class=\"number\">2</span>))</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Default-Parameters-預設值\"><a href=\"#Default-Parameters-預設值\" class=\"headerlink\" title=\"Default Parameters (預設值)\"></a>Default Parameters (預設值)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">repeat</span>(<span class=\"params\">str=<span class=\"string\">&#x27;hello&#x27;</span>, times = <span class=\"number\">5</span></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(times)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> str.repeat(times)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeat())\t\t\t\t<span class=\"comment\">// 5 hellohellohellohellohello</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeat(<span class=\"string\">&#x27;abc&#x27;</span>))\t<span class=\"comment\">// 5 abcabcabcabcabc</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Arrow-Function-箭頭函式\"><a href=\"#Arrow-Function-箭頭函式\" class=\"headerlink\" title=\"Arrow Function (箭頭函式)\"></a>Arrow Function (箭頭函式)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> test = <span class=\"function\">(<span class=\"params\">n</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> n</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(test(<span class=\"number\">10</span>))\t<span class=\"comment\">// 10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr =[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>]</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">console.log(</span></span><br><span class=\"line\"><span class=\"comment\">\tarr</span></span><br><span class=\"line\"><span class=\"comment\">\t.filter(value =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\treturn value &gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125; )</span></span><br><span class=\"line\"><span class=\"comment\">\t.map( value =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\treturn value * 2</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;)</span></span><br><span class=\"line\"><span class=\"comment\">)\t// [ 4, 6, 8, 10 ]</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">\tarr</span><br><span class=\"line\">\t\t.filter(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> value &gt; <span class=\"number\">1</span> )</span><br><span class=\"line\">\t\t.map( <span class=\"function\"><span class=\"params\">value</span> =&gt;</span> value * <span class=\"number\">2</span>)</span><br><span class=\"line\">)\t\t<span class=\"comment\">// [ 4, 6, 8, 10 ]</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"import-and-export\"><a href=\"#import-and-export\" class=\"headerlink\" title=\"import and export\"></a>import and export</h4><h5 id=\"ES5-1\"><a href=\"#ES5-1\" class=\"headerlink\" title=\"ES5\"></a>ES5</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = add</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// test1.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> add = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./utils&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(add(<span class=\"number\">3</span>,<span class=\"number\">5</span>))</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ node test1.js</span><br><span class=\"line\">8</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ES6-1\"><a href=\"#ES6-1\" class=\"headerlink\" title=\"ES6\"></a>ES6</h5><p>Export 有幾種方式：</p>\n<ol>\n<li>export function add(){}，使用 import {add} 引入</li>\n<li>export { add }，與上面那種一樣</li>\n<li>export default function add()，使用 import add 引入，不需要加大括號<br>如果想要用其他名字，可以用 as 取別名，例如說 export { add as addFunction }<br>可以用 import * as utils from ‘utils’ 把全部都 import 進來</li>\n</ol>\n<p>使用 import package.json 要加 “type”: “module”</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;js102&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;module&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js #1</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> PI = <span class=\"number\">3.14</span></span><br><span class=\"line\"><span class=\"comment\">// ...........</span></span><br><span class=\"line\"><span class=\"comment\">// utils.js #2</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> PI = <span class=\"number\">3.14</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123;</span><br><span class=\"line\">\tadd,</span><br><span class=\"line\">\tPI</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 可改名</span></span><br><span class=\"line\"><span class=\"comment\">// export &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \tadd as addFun ,</span></span><br><span class=\"line\"><span class=\"comment\">// \tPI</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// ...........</span></span><br><span class=\"line\"><span class=\"comment\">// utils.js #3 (export 加 default export 不用大括號)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> PI = <span class=\"number\">3.14</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// test1.js #1</span></span><br><span class=\"line\"><span class=\"comment\">// import 應在 utils.js 含有之 function 或 常數</span></span><br><span class=\"line\"><span class=\"comment\">// 要 import ./utils.js, 不可 import ./utils</span></span><br><span class=\"line\"><span class=\"comment\">// import package.json 要加 &quot;type&quot;: &quot;module&quot;, 但使用 require 不能加 </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;add, PI&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils.js&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(add(<span class=\"number\">3</span>, <span class=\"number\">5</span>), PI)\t\t<span class=\"comment\">// 8 3.14</span></span><br><span class=\"line\"><span class=\"comment\">// ...........</span></span><br><span class=\"line\"><span class=\"comment\">// test1.js #2 (import all)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> utils <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils.js&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(utils.add(<span class=\"number\">3</span>, <span class=\"number\">5</span>), utils.PI)\t\t<span class=\"comment\">// 8 3.14</span></span><br><span class=\"line\"><span class=\"comment\">// ...........</span></span><br><span class=\"line\"><span class=\"comment\">// test1.js #3 (export 加 default export 不用大括號)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> add, &#123;PI&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils.js&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(add(<span class=\"number\">3</span>, <span class=\"number\">5</span>), PI)\t\t<span class=\"comment\">// 8 3.14</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h3><h4 id=\"console\"><a href=\"#console\" class=\"headerlink\" title=\"console\"></a>console</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// normal </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">&quot;Bob&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;The name is : &quot;</span>, name)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log((<span class=\"string\">&quot;The name is : &quot;</span> + name)</span><br><span class=\"line\"><span class=\"comment\">// SE6 </span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;The name is : $&#123;name&#125;&quot;</span>, name)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"process-stdout-write-不換行列印\"><a href=\"#process-stdout-write-不換行列印\" class=\"headerlink\" title=\"process.stdout.write - 不換行列印\"></a>process.stdout.write - 不換行列印</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">process.stdout.write(<span class=\"string\">&#x27;This is &#x27;</span>)</span><br><span class=\"line\">process.stdout.write(<span class=\"string\">&#x27;a book&#x27;</span>) <span class=\"comment\">// This is a book</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"JS庫\"><a href=\"#JS庫\" class=\"headerlink\" title=\"JS庫\"></a>JS庫</h3><ul>\n<li>Modernizr : 一個開源的JS庫，它使得那些基於訪客瀏覽器的不同（指對新標準支援性的差異）而開發不同級別體驗的設計師的工作變得更為簡單</li>\n</ul>\n<h3 id=\"應用\"><a href=\"#應用\" class=\"headerlink\" title=\"應用\"></a>應用</h3><h4 id=\"require-‘readline’-用於自動測試\"><a href=\"#require-‘readline’-用於自動測試\" class=\"headerlink\" title=\"require(‘readline’) 用於自動測試\"></a>require(‘readline’) 用於自動測試</h4><h5 id=\"Code-test-js\"><a href=\"#Code-test-js\" class=\"headerlink\" title=\"Code - test.js\"></a>Code - test.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> readline = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;readline&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> lines = []</span><br><span class=\"line\"><span class=\"keyword\">var</span> rl = readline.createInterface(&#123;</span><br><span class=\"line\">  input: process.stdin</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">rl.on(<span class=\"string\">&#x27;line&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">line</span>) </span>&#123;</span><br><span class=\"line\">  lines.push(line)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">rl.on(<span class=\"string\">&#x27;close&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  solve(lines)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">solve</span>(<span class=\"params\">lines</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> tmp = lines[<span class=\"number\">0</span>].split(<span class=\"string\">&#x27; &#x27;</span>)</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">Number</span>(tmp[<span class=\"number\">0</span>]) + <span class=\"built_in\">Number</span>(tmp[<span class=\"number\">1</span>]))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"input-file-input-txt\"><a href=\"#input-file-input-txt\" class=\"headerlink\" title=\"input file - input.txt\"></a>input file - input.txt</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">10 13</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"執行\"><a href=\"#執行\" class=\"headerlink\" title=\"執行\"></a>執行</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ cat input.txt | node test.js</span><br><span class=\"line\">23</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"NPSC-測試\"><a href=\"#NPSC-測試\" class=\"headerlink\" title=\"NPSC 測試\"></a>NPSC 測試</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat pa.in | node code.js | diff pa.out -</span><br><span class=\"line\"><span class=\"comment\"># 處理換行差異</span></span><br><span class=\"line\">cat pa.in | node code.js | diff --strip-trailing-cr pa.out -</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"參考\"><a href=\"#參考\" class=\"headerlink\" title=\"參考\"></a>參考</h3><ul>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide\">MDN avaScript 指南</a></li>\n<li><a href=\"https://www.ecma-international.org/publications-and-standards/standards/ecma-262/\">ECMA-262</a></li>\n<li><a href=\"https://github.com/aszx87410/blog/issues/18\">該來理解 JavaScript 的原型鍊了</a></li>\n<li><a href=\"https://github.com/aszx87410/blog/issues/30\">深入探討 JavaScript 中的參數傳遞</a></li>\n<li><a href=\"https://github.com/aszx87410/blog/issues/34\">我知道你懂 hoisting，可是你了解到多深</a></li>\n<li><a href=\"https://github.com/aszx87410/blog/issues/35\">所有的函式都是閉包：談 JS 中的作用域與 Closure</a></li>\n<li><a href=\"https://github.com/aszx87410/blog/issues/39\">淺談 JavaScript 頭號難題 this</a></li>\n<li><a href=\"https://cythilya.github.io/2018/10/24/object/\">你懂 JavaScript 嗎？物件（Object）</a></li>\n<li><a href=\"https://dorey.github.io/JavaScript-Equality-Table/\">JavaScript-Equality-Table</a></li>\n<li><a href=\"https://medium.com/@alexian853/debounce-throttle-%E9%82%A3%E4%BA%9B%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC%E6%87%89%E8%A9%B2%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%E5%B0%8F%E4%BA%8B-%E4%B8%80-76a73a8cbc39\">Debounce &amp; Throttle</a></li>\n</ul>\n","categories":["Coding"],"tags":["javascript"]},{"title":"Chrome 功能","url":"/2021/05/20/chrome-2/","content":"<h3 id=\"Chrome-special-key\"><a href=\"#Chrome-special-key\" class=\"headerlink\" title=\"Chrome special key\"></a>Chrome special key</h3><ul>\n<li><code>Esc</code> - 停止載入目前網頁</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"Chrome-plug\"><a href=\"#Chrome-plug\" class=\"headerlink\" title=\"Chrome plug\"></a>Chrome plug</h3><ul>\n<li><a href=\"https://pjchender.blogspot.com/2016/08/chrome-chrome-extension.html\">前端實用 chrome plug</a></li>\n<li><a href=\"https://www.minwt.com/webdesign-dev/html/19042.html\">十大Chrome外掛套件總整理</a></li>\n</ul>\n<h4 id=\"Page-Ruler-Redux\"><a href=\"#Page-Ruler-Redux\" class=\"headerlink\" title=\"Page Ruler Redux\"></a><a href=\"https://chrome.google.com/webstore/detail/page-ruler-redux/giejhjebcalaheckengmchjekofhhmal?hl=zh-TW\">Page Ruler Redux</a></h4><ul>\n<li>測 web site 長寬,距離上,下,左,右距離</li>\n<li>可自動抓元件</li>\n<li>可一層一層找</li>\n</ul>\n<h4 id=\"Dimensions\"><a href=\"#Dimensions\" class=\"headerlink\" title=\"Dimensions\"></a><a href=\"https://chrome.google.com/webstore/detail/dimensions/baocaagndhipibgklemoalmkljaimfdj\">Dimensions</a></h4><ul>\n<li>量元件寬,高,相互間距離</li>\n</ul>\n<h4 id=\"Emmet-Re-view\"><a href=\"#Emmet-Re-view\" class=\"headerlink\" title=\"Emmet Re:view\"></a><a href=\"https://chrome.google.com/webstore/detail/emmet-review/epejoicbhllgiimigokgjdoijnpaphdp/related\">Emmet Re:view</a></h4><p>測試不同瀏覽器、不同裝置間顯示的樣子</p>\n<h4 id=\"User-Agent-Switcher-for-Chrome\"><a href=\"#User-Agent-Switcher-for-Chrome\" class=\"headerlink\" title=\"User-Agent Switcher for Chrome\"></a><a href=\"https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg\">User-Agent Switcher for Chrome</a></h4><p>將Chrome瀏覽器，偽裝成各種瀏覽器，像是iOS、Android、IE….</p>\n<h4 id=\"CSSViewer\"><a href=\"#CSSViewer\" class=\"headerlink\" title=\"CSSViewer\"></a><a href=\"https://chrome.google.com/webstore/detail/cssviewer/ggfgijbpiheegefliciemofobhmofgce/related\">CSSViewer</a></h4><p>當滑鼠滑到元素上，立即會顯示該元素的CSS樣式設定值</p>\n<h4 id=\"Window-Resizer-Beta\"><a href=\"#Window-Resizer-Beta\" class=\"headerlink\" title=\"Window Resizer Beta\"></a><a href=\"https://chrome.google.com/\">Window Resizer Beta</a></h4><p>webstore/detail/window-resizer-beta/pnhnbekjlbamfnnemcaolkjchjlidbib/related)<br>依照你按下的螢幕尺寸來縮放視窗大小</p>\n<h4 id=\"HTML5-Outliner\"><a href=\"#HTML5-Outliner\" class=\"headerlink\" title=\"HTML5 Outliner\"></a><a href=\"https://chrome.google.com/webstore/detail/html5-outliner/afoibpobokebhgfnknfndkgemglggomo/related\">HTML5 Outliner</a></h4><p>分析網站的元素大綱，方便助於SEO的優化！<br>按下後可以看出此網站的標題解析是否有階層式的排列下來，對於在google搜尋的話，如有清楚的標題層級，會相對提升搜尋的排行！</p>\n<h4 id=\"Wappalyzer\"><a href=\"#Wappalyzer\" class=\"headerlink\" title=\"Wappalyzer\"></a><a href=\"https://chrome.google.com/webstore/detail/wappalyzer/gppongmhjkpfnbhagpmjfkannfbllamg/related?hl=zh-TW\">Wappalyzer</a></h4><p>查看網站所使用的環境、技術、主機與分析工具</p>\n<h4 id=\"daily-dev\"><a href=\"#daily-dev\" class=\"headerlink\" title=\"daily.dev\"></a><a href=\"https://chrome.google.com/webstore/detail/dailydev-all-in-one-devel/jlmpjdjjbgclbocgajdjefcidcncaied/related\">daily.dev</a></h4><p>All-in-one developer news reader</p>\n","categories":["OS"],"tags":["chrome","tool"]},{"title":"CSS Issue","url":"/2021/05/19/css-2/","content":"<h2 id=\"Flex\"><a href=\"#Flex\" class=\"headerlink\" title=\"Flex\"></a>Flex</h2><h3 id=\"Flex-align-items-align-content-stretch-無作用\"><a href=\"#Flex-align-items-align-content-stretch-無作用\" class=\"headerlink\" title=\"Flex - align-items/align-content stretch 無作用\"></a>Flex - align-items/align-content stretch 無作用</h3><p>如果子容器或是元件，在有設定高度（height）的情況下，這個 stretch 會被忽略，自動變成 flex-start(align-items/)/normal(align-content)</p>\n<span id=\"more\"></span>\n\n<h3 id=\"直接擺-image-flex-無效-加上-div-可縮小但不能放大-加上-min-width-0-可放大也可縮小-不用加-div\"><a href=\"#直接擺-image-flex-無效-加上-div-可縮小但不能放大-加上-min-width-0-可放大也可縮小-不用加-div\" class=\"headerlink\" title=\"直接擺 image, flex 無效,加上 div 可縮小但不能放大,加上 min-width: 0 可放大也可縮小(不用加 div)\"></a>直接擺 image, flex 無效,加上 div 可縮小但不能放大,加上 min-width: 0 可放大也可縮小(不用加 div)</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">img</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* 防止img解析度變差 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">max-width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: auto;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* 修正放於div底部會有空白 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: block;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.menu-list &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">img</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">min-width</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-shrink</span>: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-grow</span>: <span class=\"number\">1</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;menu-list&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-001.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-002.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-003.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-004.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;menu-list&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-001.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-002.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-003.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-004.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div style=\"width:500px\">\n    <img src=\"/2021/05/19/css-2/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<h2 id=\"Other\"><a href=\"#Other\" class=\"headerlink\" title=\"Other\"></a>Other</h2><h3 id=\"display-inline-block-設定-margin-0-還是會有間格\"><a href=\"#display-inline-block-設定-margin-0-還是會有間格\" class=\"headerlink\" title=\"display: inline-block 設定 margin=0 還是會有間格\"></a>display: inline-block 設定 margin=0 還是會有間格</h3><p>換行或space造成,可移除換行,間隔或加入 common</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.debug *, .debug &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid gold;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>:<span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">50px</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span><span class=\"comment\">&lt;!-- common remove inline-block space </span></span><br><span class=\"line\"><span class=\"comment\"> --&gt;</span><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>444<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>555<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"inline-block-元件-再插入含文字的元件會造成跑版\"><a href=\"#inline-block-元件-再插入含文字的元件會造成跑版\" class=\"headerlink\" title=\"inline-block 元件, 再插入含文字的元件會造成跑版\"></a>inline-block 元件, 再插入含文字的元件會造成跑版</h3><p>應是文字會對齊最後一個 baseline</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.debug *, .debug &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid gold</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">html</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span>, <span class=\"selector-tag\">h1</span> ,<span class=\"selector-tag\">h2</span> ,<span class=\"selector-tag\">h3</span> ,<span class=\"selector-tag\">h4</span> ,<span class=\"selector-tag\">h5</span> ,<span class=\"selector-tag\">h6</span> ,<span class=\"selector-tag\">p</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.debug &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* margin:0; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: gray;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: auto;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">p</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: auto;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t51</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>555<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>555-p<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>444<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div style=\"width:500px\">\n    <img src=\"/2021/05/19/css-2/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h3 id=\"button-設定-display-block-寬度還是不能佔整行\"><a href=\"#button-設定-display-block-寬度還是不能佔整行\" class=\"headerlink\" title=\"button , 設定 display: block,寬度還是不能佔整行\"></a>button , 設定 display: block,寬度還是不能佔整行</h3><p>要設定 width: 100% 才能佔整行</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t<span class=\"comment\">/* 設完才能佔整行 */</span></span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設定-margin-0-auto-不能置中\"><a href=\"#設定-margin-0-auto-不能置中\" class=\"headerlink\" title=\"設定 margin: 0 auto; 不能置中\"></a>設定 margin: 0 auto; 不能置中</h3><p>要設定 display block</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.kick &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 設定才能置中 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* display: block; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#E62A45</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">8px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">outline</span>: none;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: none;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;kick&quot;</span>&gt;</span>我要抽獎<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"lt-a-gt-tag-not-working\"><a href=\"#lt-a-gt-tag-not-working\" class=\"headerlink\" title=\"&lt;a&gt; tag not working\"></a>&lt;a&gt; tag not working</h3><ul>\n<li>被其他元件遮住,故要將 z-index 調高,或將其他元件 z-index 調低</li>\n<li>z-index 要有效,要設定 position: absolute, relative 或 fixed<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.games</span> <span class=\"selector-class\">.item</span> <span class=\"selector-tag\">a</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t<span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"number\">10</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"設定-overflow-hidden-造成-相鄰行內元素向下偏移\"><a href=\"#設定-overflow-hidden-造成-相鄰行內元素向下偏移\" class=\"headerlink\" title=\"設定 overflow: hidden;,造成 相鄰行內元素向下偏移\"></a>設定 overflow: hidden;,造成 相鄰行內元素向下偏移</h3><ul>\n<li>設定 vertical-align: bottom; 即可修正<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.box-1,</span><br><span class=\"line\">\t.box-2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.box-2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">overflow</span>: hidden;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* 修正造成相鄰向下偏移 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">vertical-align</span>: bottom;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box-1&quot;</span>&gt;</span>AAA<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box-2&quot;</span>&gt;</span>BBB<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box-1&quot;</span>&gt;</span>CCC<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box-2&quot;</span>&gt;</span>DDD<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n","categories":["Front End"],"tags":["issue","css"]},{"title":"RWD CSS example","url":"/2021/05/20/css-3/","content":"<h3 id=\"index-scss\"><a href=\"#index-scss\" class=\"headerlink\" title=\"index.scss\"></a>index.scss</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&quot;variable&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;mixin&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;grid&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;reset&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;layout&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;pages/index&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"variable-scss\"><a href=\"#variable-scss\" class=\"headerlink\" title=\"_variable.scss\"></a>_variable.scss</h3><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* color */</span></span><br><span class=\"line\">$highline-color: #fff;</span><br><span class=\"line\">$bright-color: #F56C23;</span><br><span class=\"line\">$base-color: #3D1101;</span><br><span class=\"line\">$dark-color: #000;</span><br><span class=\"line\">$ground-color: #EFE9E7;</span><br><span class=\"line\">$activemenu-color: #777;</span><br><span class=\"line\"><span class=\"comment\">/* 字型大小 */</span></span><br><span class=\"line\">$font-3l: 48px;</span><br><span class=\"line\">$font-2l: 36px;</span><br><span class=\"line\">$font-l: 24px;</span><br><span class=\"line\">$font-m: 20px;</span><br><span class=\"line\">$font-s: 18px;</span><br><span class=\"line\">$font-xs: 16px;</span><br><span class=\"line\">$font-xxs: 14px;</span><br><span class=\"line\">$font-3s: 12px;</span><br><span class=\"line\">$font-symb1: 32px;</span><br><span class=\"line\">$font-symb2: 28px;</span><br><span class=\"line\">$font-symb3: 26px;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"mixin-scss\"><a href=\"#mixin-scss\" class=\"headerlink\" title=\"_mixin.scss\"></a>_mixin.scss</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@mixin</span> font-hex &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* 微軟正黑體 */</span></span><br><span class=\"line\">\t<span class=\"comment\">/* font-family: &quot;Microsoft JhengHei&quot;; */</span></span><br><span class=\"line\">\t<span class=\"attribute\">font-family</span>:微軟正黑體;</span><br><span class=\"line\">\t<span class=\"attribute\">font-size</span>: $font-xs;</span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">1.2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> horizontal-line($long, $weight, $<span class=\"attribute\">color</span> ) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: $long;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: $weight;</span><br><span class=\"line\">\t<span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid $color;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"grid-scss\"><a href=\"#grid-scss\" class=\"headerlink\" title=\"_grid.scss\"></a>_grid.scss</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* http://meyerweb.com/eric/tools/css/reset/ </span></span><br><span class=\"line\"><span class=\"comment\">   v2.0 | 20110126</span></span><br><span class=\"line\"><span class=\"comment\">   License: none (public domain)</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span>, <span class=\"selector-tag\">div</span>, <span class=\"selector-tag\">span</span>, applet, <span class=\"selector-tag\">object</span>, <span class=\"selector-tag\">iframe</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">h1</span>, <span class=\"selector-tag\">h2</span>, <span class=\"selector-tag\">h3</span>, <span class=\"selector-tag\">h4</span>, <span class=\"selector-tag\">h5</span>, <span class=\"selector-tag\">h6</span>, <span class=\"selector-tag\">p</span>, <span class=\"selector-tag\">blockquote</span>, pre,</span><br><span class=\"line\"><span class=\"selector-tag\">a</span>, <span class=\"selector-tag\">abbr</span>, acronym, <span class=\"selector-tag\">address</span>, big, <span class=\"selector-tag\">cite</span>, <span class=\"selector-tag\">code</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">del</span>, <span class=\"selector-tag\">dfn</span>, <span class=\"selector-tag\">em</span>, <span class=\"selector-tag\">img</span>, <span class=\"selector-tag\">ins</span>, <span class=\"selector-tag\">kbd</span>, <span class=\"selector-tag\">q</span>, s, <span class=\"selector-tag\">samp</span>,</span><br><span class=\"line\">small, strike, <span class=\"selector-tag\">strong</span>, sub, <span class=\"selector-tag\">sup</span>, tt, <span class=\"selector-tag\">var</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">b</span>, u, <span class=\"selector-tag\">i</span>, center,</span><br><span class=\"line\"><span class=\"selector-tag\">dl</span>, <span class=\"selector-tag\">dt</span>, <span class=\"selector-tag\">dd</span>, <span class=\"selector-tag\">ol</span>, <span class=\"selector-tag\">ul</span>, <span class=\"selector-tag\">li</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">fieldset</span>, <span class=\"selector-tag\">form</span>, <span class=\"selector-tag\">label</span>, <span class=\"selector-tag\">legend</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">table</span>, <span class=\"selector-tag\">caption</span>, <span class=\"selector-tag\">tbody</span>, <span class=\"selector-tag\">tfoot</span>, <span class=\"selector-tag\">thead</span>, <span class=\"selector-tag\">tr</span>, <span class=\"selector-tag\">th</span>, <span class=\"selector-tag\">td</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">article</span>, <span class=\"selector-tag\">aside</span>, <span class=\"selector-tag\">canvas</span>, <span class=\"selector-tag\">details</span>, embed, </span><br><span class=\"line\"><span class=\"selector-tag\">figure</span>, <span class=\"selector-tag\">figcaption</span>, <span class=\"selector-tag\">footer</span>, <span class=\"selector-tag\">header</span>, <span class=\"selector-tag\">hgroup</span>, </span><br><span class=\"line\"><span class=\"selector-tag\">menu</span>, <span class=\"selector-tag\">nav</span>, output, ruby, <span class=\"selector-tag\">section</span>, <span class=\"selector-tag\">summary</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">time</span>, <span class=\"selector-tag\">mark</span>, <span class=\"selector-tag\">audio</span>, <span class=\"selector-tag\">video</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">font</span>: inherit;</span><br><span class=\"line\">\t<span class=\"attribute\">vertical-align</span>: baseline;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* HTML5 display-role reset for older browsers */</span></span><br><span class=\"line\"><span class=\"selector-tag\">article</span>, <span class=\"selector-tag\">aside</span>, <span class=\"selector-tag\">details</span>, <span class=\"selector-tag\">figcaption</span>, <span class=\"selector-tag\">figure</span>, </span><br><span class=\"line\"><span class=\"selector-tag\">footer</span>, <span class=\"selector-tag\">header</span>, <span class=\"selector-tag\">hgroup</span>, <span class=\"selector-tag\">menu</span>, <span class=\"selector-tag\">nav</span>, <span class=\"selector-tag\">section</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">ol</span>, <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">list-style</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">blockquote</span>, <span class=\"selector-tag\">q</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">quotes</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">blockquote</span>:before, blockquote:after,</span><br><span class=\"line\">q:before, q:after &#123;</span><br><span class=\"line\">\tcontent: <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">content</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">table</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">border-collapse</span>: collapse;</span><br><span class=\"line\">\t<span class=\"attribute\">border-spacing</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* 防止img解析度變差 */</span></span><br><span class=\"line\">\t<span class=\"attribute\">max-width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: auto;</span><br><span class=\"line\">\t<span class=\"comment\">/* 修正放於div底部會有空白 */</span></span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">/* 全域 border-box */</span></span><br><span class=\"line\"> *,*<span class=\"selector-pseudo\">::before</span>,*<span class=\"selector-pseudo\">::after</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">clear</span>: both;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"layout-scss\"><a href=\"#layout-scss\" class=\"headerlink\" title=\"_layout.scss\"></a>_layout.scss</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> font-hex;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: $base-color;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">max-width</span>: <span class=\"number\">1024px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: $ground-color;</span><br><span class=\"line\">\t<span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">h2</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">font-size</span>: $font-m;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">h3</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">font-size</span>: $font-l;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">h4</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">font-size</span>: $font-m;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 漢堡選單 input 隱藏 */</span></span><br><span class=\"line\"><span class=\"selector-id\">#menu_control</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t<span class=\"attribute\">z-index</span>: -<span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&amp;<span class=\"selector-pseudo\">:checked</span>~<span class=\"selector-class\">.header</span> <span class=\"selector-class\">.menu</span> &#123;</span><br><span class=\"line\">\t\t// 設定一個可容納的高度</span><br><span class=\"line\">\t\t<span class=\"attribute\">max-height</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t<span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">\t<span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: $dark-color;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">15px</span> <span class=\"number\">30px</span> <span class=\"number\">15px</span> <span class=\"number\">40px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.logo</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-weight</span>: bolder;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.menu-btn</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: none;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">/* 漢堡大小 40*40 靠上層 top: 5px,right: 10px */</span></span><br><span class=\"line\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-pseudo\">::before</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">content</span>: <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">left</span>: <span class=\"number\">2px</span>;</span><br><span class=\"line\">\t\t\t\t// 漢寶線寬度 <span class=\"number\">2px</span>, 長度 <span class=\"number\">36px</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">2px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">36px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">/* 畫中間線 */</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin</span>: auto;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">/* 畫上下線 上下各 8px 距離*/</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">box-shadow</span>: <span class=\"number\">0px</span> <span class=\"number\">8px</span> <span class=\"number\">#fff</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"number\">0px</span> -<span class=\"number\">8px</span> <span class=\"number\">#fff</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.menu</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">/* 漢堡選單使用*/</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">max-height</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block; // <span class=\"attribute\">mask</span> <span class=\"attribute\">flex</span></span><br><span class=\"line\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">top</span>: <span class=\"number\">54px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">z-index</span>: <span class=\"number\">100</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">/* 轉換速度 */</span></span><br><span class=\"line\">\t\t\t<span class=\"attribute\">transition</span>: max-height <span class=\"number\">1s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">\t\t\t\t// <span class=\"attribute\">float</span>: none; // <span class=\"attribute\">mask</span> for <span class=\"attribute\">float</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> dashed <span class=\"number\">#69CA62</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">16px</span> <span class=\"number\">15px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">font-size</span>: $font-m;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">color</span>: $highline-color;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-pseudo\">:hover</span>,</span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-class\">.active</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">background</span>: $activemenu-color;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t// 擋掉上層 active 顯示</span><br><span class=\"line\">\t\t\t\t&amp;<span class=\"selector-class\">.active</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attribute\">background</span>: transparent;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t&amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attribute\">background</span>: $activemenu-color;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.banner</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">../images/header.jpg</span>) center no-repeat;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">420px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: $highline-color;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t<span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">\t<span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.top-text</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">460px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">152px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.35</span>);</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">\t\t<span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> screen640() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">194px</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.yummy</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: $font-<span class=\"number\">2</span>l;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">line-height</span>: <span class=\"number\">24px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.footer</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t<span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">20px</span> <span class=\"number\">10px</span> <span class=\"number\">50px</span> <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">h3</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.text</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-class\">.about</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-right</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.foot-link</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">48px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">font-weight</span>: bolder;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">color</span>: $base-color;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">justify-content</span>: flex-end;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.media-link</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t<span class=\"attribute\">justify-content</span>: flex-end;</span><br><span class=\"line\">\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: $font-<span class=\"number\">2</span>l;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.fa-google-plus-square</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#DB4437</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.fa-twitter-square</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#41ABE1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.fa-facebook-square</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#3A5795</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"index-scss-1\"><a href=\"#index-scss-1\" class=\"headerlink\" title=\"_index.scss\"></a>_index.scss</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.our-special</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">50px</span> <span class=\"number\">2.5%</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">h2</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">\t\t<span class=\"attribute\">line-height</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">h4</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t\t<span class=\"attribute\">justify-content</span>: space-evenly;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">30%</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">max-width</span>: <span class=\"number\">320px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">320px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">30px</span> auto;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/* 畫兩橫線 */</span></span><br><span class=\"line\">\t<span class=\"selector-class\">.good-chef</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-class\">.line1</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">top</span>: -<span class=\"number\">60px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">left</span>: -<span class=\"number\">140px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> horizontal-line(<span class=\"number\">120px</span>, <span class=\"number\">1px</span>, #<span class=\"number\">989898</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">display</span>: none;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-class\">.line2</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">top</span>: -<span class=\"number\">60px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">left</span>: <span class=\"number\">220px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> horizontal-line(<span class=\"number\">120px</span>, <span class=\"number\">1px</span>, #<span class=\"number\">989898</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">display</span>: none;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.chef</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: $base-color;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">2.5%</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">2.5%</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: $ground-color;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">h3</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: $font-m;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.start</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">max-width</span>: <span class=\"number\">470px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">460px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">../../images/star.jpg</span>) center no-repeat;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.text</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">80px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">padding-bottom</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-left</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-right</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.response</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-top</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">h3</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">h4</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">20px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&amp;<span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">float</span>: right;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t\t<span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">50px</span> <span class=\"number\">2.5%</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">30px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">32%</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">max-width</span>: <span class=\"number\">320px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">320px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto <span class=\"number\">30px</span> auto;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"selector-class\">.pic</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">67px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">flex-grow</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"selector-class\">.text</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.book</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-top</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-bottom</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"number\">#F6F4F3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-top</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-tag\">h3</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"selector-class\">.book-info</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t\t<span class=\"attribute\">justify-content</span>: space-evenly;</span><br><span class=\"line\">\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-tag\">label</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">font-size</span>: $font-xxs;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">font-size</span>: $font-xxs;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">color</span>: $highline-color;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span> <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">float</span>: right;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-left</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">outline</span>: none;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-attr\">[type=reset]</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#A09E9E</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-attr\">[type=submit]</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">background</span>: $bright-color;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-class\">.map</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">45%</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">max-width</span>: <span class=\"number\">460px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto <span class=\"number\">30px</span> auto;</span><br><span class=\"line\">\t\t\t\t;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-tag\">form</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">max-width</span>: <span class=\"number\">460px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-class\">.row</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"selector-tag\">input</span> &#123;</span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-attr\">[type=radio]</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin-right</span>: <span class=\"number\">35px</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&amp;<span class=\"selector-class\">.row</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">line-height</span>: <span class=\"number\">32px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">font-size</span>: $font-xs;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["Front End"],"tags":["css","rwd"]},{"title":"SCSS","url":"/2021/05/21/css-4/","content":"<h3 id=\"import-匯入\"><a href=\"#import-匯入\" class=\"headerlink\" title=\"import 匯入\"></a>import 匯入</h3><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// import 不用加 _ 及 .scss</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;reset&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;common&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 檔案 (檔案前 &quot;_&quot; 表僅為合併用)</span></span><br><span class=\"line\"><span class=\"comment\">\t\t_reset.scss</span></span><br><span class=\"line\"><span class=\"comment\">\t\t_common.scss */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 架構</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;variable&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;mixin&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;grid&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;reset&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;common&#x27;</span>; <span class=\"comment\">// 名可用名稱 layout</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&quot;module/button&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&quot;page/index&quot;</span>;</span><br><span class=\"line\">     or</span><br><span class=\"line\"> <span class=\"keyword\">@import</span> <span class=\"string\">&quot;page/member&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"variable-變數\"><a href=\"#variable-變數\" class=\"headerlink\" title=\"variable 變數\"></a>variable 變數</h3><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* color */</span></span><br><span class=\"line\"><span class=\"variable\">$highline-color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\"><span class=\"comment\">/* 字型大小 */</span></span><br><span class=\"line\"><span class=\"variable\">$font-m</span>: <span class=\"number\">120px</span>;</span><br><span class=\"line\"><span class=\"variable\">$font-l</span>: <span class=\"variable\">$font-m</span> * <span class=\"number\">1.2</span>;</span><br><span class=\"line\"><span class=\"variable\">$font-s</span>: <span class=\"variable\">$font-m</span> * <span class=\"number\">0.8</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"mixin-語法知識庫\"><a href=\"#mixin-語法知識庫\" class=\"headerlink\" title=\"@mixin 語法知識庫\"></a>@mixin 語法知識庫</h3><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 不帶参數</span></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> font-hex &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* 微軟正黑體 */</span></span><br><span class=\"line\">\t<span class=\"comment\">/* font-family: &quot;Microsoft JhengHei&quot;; */</span></span><br><span class=\"line\">\t<span class=\"attribute\">font-family</span>:微軟正黑體;</span><br><span class=\"line\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">1.2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 帶参數</span></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> horizontal-line(<span class=\"variable\">$long</span>, <span class=\"variable\">$weight</span>, <span class=\"variable\">$color</span> ) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"variable\">$long</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"variable\">$weight</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"variable\">$color</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> font-hex;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: <span class=\"number\">#3D1101</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.good-chef</span> <span class=\"selector-class\">.line1</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">\t<span class=\"attribute\">top</span>: -<span class=\"number\">60px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">left</span>: -<span class=\"number\">140px</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> horizontal-line(<span class=\"number\">120px</span>, <span class=\"number\">1px</span>, <span class=\"number\">#989898</span> );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"mixin-content-for-響應式設計\"><a href=\"#mixin-content-for-響應式設計\" class=\"headerlink\" title=\"@mixin+@content for 響應式設計\"></a>@mixin+@content for 響應式設計</h3><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// _grid.scss</span></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> desktop&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">1024px</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">@content</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> pad&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">768px</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">@content</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> pad-below&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">767px</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">@content</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> iphone480&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">480px</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">@content</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> iphone5&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">320px</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">@content</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.our-special &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"number\">#EFE9E7</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">50px</span> <span class=\"number\">2.5%</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">@include</span> pad-below() &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"amp-符號參照巢狀結構的父選取器\"><a href=\"#amp-符號參照巢狀結構的父選取器\" class=\"headerlink\" title=\"&amp; 符號參照巢狀結構的父選取器\"></a>&amp; 符號參照巢狀結構的父選取器</h3><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.menu</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t<span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">14px</span> <span class=\"number\">15px</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"variable\">$font-m</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: <span class=\"variable\">$highline-color</span>;</span><br><span class=\"line\">\t\t<span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">\t\t&amp;<span class=\"selector-pseudo\">:hover</span>, &amp;<span class=\"selector-class\">.active</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">background</span>: <span class=\"variable\">$activemenu-color</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":["Front End"],"tags":["css","scss"]},{"title":"CSS tricky","url":"/2021/05/23/css-5/","content":"<h3 id=\"tag-a-連非中間文字都可選\"><a href=\"#tag-a-連非中間文字都可選\" class=\"headerlink\" title=\"tag a 連非中間文字都可選\"></a>tag a 連非中間文字都可選</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* set inline-block 加 padding */</span></span><br><span class=\"line\"><span class=\"selector-tag\">a</span>\t&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">12px</span> <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">\t<span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"圖片加一層顏色-使亮度變小上層文字明顯\"><a href=\"#圖片加一層顏色-使亮度變小上層文字明顯\" class=\"headerlink\" title=\"圖片加一層顏色,使亮度變小上層文字明顯\"></a>圖片加一層顏色,使亮度變小上層文字明顯</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.banner\t&#123;</span><br><span class=\"line\">\t\t// 加底色</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">../img/2.png</span>);</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background-size</span>: cover;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">450px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">justify-content</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">align-items</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t// 加底色, 同時設 <span class=\"attribute\">z-index</span>: <span class=\"number\">2</span> 文字才能提到上層</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">z-index</span>: <span class=\"number\">2</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t// 加底色</span><br><span class=\"line\"><span class=\"css\">\t\t&amp;<span class=\"selector-pseudo\">::after</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">content</span>: <span class=\"string\">&quot;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">left</span>:<span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">right</span>:<span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.4</span>);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;banner&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>蘋果咬一口<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"圖片加一層顏色-使亮度變小上層文字明顯-使用-filter\"><a href=\"#圖片加一層顏色-使亮度變小上層文字明顯-使用-filter\" class=\"headerlink\" title=\"圖片加一層顏色,使亮度變小上層文字明顯 - 使用 filter\"></a>圖片加一層顏色,使亮度變小上層文字明顯 - 使用 filter</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.games</span> <span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">filter</span>: <span class=\"built_in\">brightness</span>(<span class=\"number\">0.8</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.games</span> <span class=\"selector-class\">.item</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">filter</span>: <span class=\"built_in\">brightness</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"使用-translate-將元件移至-正中間\"><a href=\"#使用-translate-將元件移至-正中間\" class=\"headerlink\" title=\"使用 translate() 將元件移至 正中間\"></a>使用 translate() 將元件移至 正中間</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 放至正中間 */</span></span></span><br><span class=\"line\">\t.box2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>:<span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">line-height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: pink;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">transform</span>: <span class=\"built_in\">translate</span>(-<span class=\"number\">50%</span>, -<span class=\"number\">50%</span>)</span></span><br><span class=\"line\">\t&#125;\t</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tBox2</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"backgroung-使用-url-若-cover-放在同一行-cover-前一定要加-position-和-斜線\"><a href=\"#backgroung-使用-url-若-cover-放在同一行-cover-前一定要加-position-和-斜線\" class=\"headerlink\" title=\"backgroung 使用 url(),若 cover 放在同一行,cover 前一定要加 position 和 斜線\"></a>backgroung 使用 url(),若 cover 放在同一行,cover 前一定要加 position 和 斜線</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.banner</span>\t&#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* background: url(../img/2.png); */</span></span><br><span class=\"line\">\t<span class=\"comment\">/* background-size: cover; */</span></span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">../img/2.png</span>) center/cover no-repeat;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"position-relative-absolute-top-bottom-left-right-使用百分比\"><a href=\"#position-relative-absolute-top-bottom-left-right-使用百分比\" class=\"headerlink\" title=\"position: relative/absolute, top(bottom) left(right)使用百分比\"></a>position: relative/absolute, top(bottom) left(right)使用百分比</h3><ul>\n<li>在相對定位中使用百分比時，參照的是最近一層父元素的高度與寬度</li>\n<li>在絕對定位中使用百分比時，參照的是最近一層父元素的高度與寬度，但父元素不能是static定位；若父元素是static定位，則會一直往上一級查詢，直至查詢到整個網頁的根元素html。</li>\n</ul>\n<h3 id=\"ul-li-flex-排列-image\"><a href=\"#ul-li-flex-排列-image\" class=\"headerlink\" title=\"ul+li(flex) 排列 image\"></a>ul+li(flex) 排列 image</h3><p><strong>因前面加了 max-width: 100%; img 一定要加 width: 100%; 不然不能放大</strong></p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* 防止img解析度變差 */</span></span><br><span class=\"line\">\t<span class=\"attribute\">max-width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: auto;</span><br><span class=\"line\">\t<span class=\"comment\">/* 修正放於div底部會有空白 */</span></span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.menu-list</span> &#123;</span><br><span class=\"line\">\t<span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t\t<span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">flex-grow</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t<span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;menu-list&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-001.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-002.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-003.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./img/f-004.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tag-label-包住-tag-input-可選擇字就選到-input-label-的-for-要拿掉\"><a href=\"#tag-label-包住-tag-input-可選擇字就選到-input-label-的-for-要拿掉\" class=\"headerlink\" title=\"tag label 包住 tag input 可選擇字就選到 input(label 的 for 要拿掉)\"></a>tag label 包住 tag input 可選擇字就選到 input(label 的 for 要拿掉)</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span>英文</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;num&quot;</span>&gt;</span>數字</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sp&quot;</span>&gt;</span>特殊符號</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;gen-btn&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;產生&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"設定占滿整個畫面高度-以免畫面底端留有空白\"><a href=\"#設定占滿整個畫面高度-以免畫面底端留有空白\" class=\"headerlink\" title=\"設定占滿整個畫面高度,以免畫面底端留有空白\"></a>設定占滿整個畫面高度,以免畫面底端留有空白</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.mini-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">100vh</span> - <span class=\"number\">424px</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"input\"><a href=\"#input\" class=\"headerlink\" title=\"input\"></a>input</h3><h4 id=\"Custom-Checkbox\"><a href=\"#Custom-Checkbox\" class=\"headerlink\" title=\"Custom Checkbox\"></a><a href=\"https://www.w3schools.com/howto/howto_css_custom_checkbox.asp\">Custom Checkbox</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.debug *,\t.debug &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid gold</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* The container */</span></span></span><br><span class=\"line\">\t\t.container &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 設定外框 block, size, font-size ... */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">display</span>: block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">35px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">12px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">cursor</span>: pointer;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">22px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\tuser-select: none;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* Hide the browser&#x27;s default checkbox */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-class\">.container</span> <span class=\"selector-tag\">input</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* input 設定長寬為 0,透明 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">0px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">0px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* Create a custom checkbox */</span></span></span><br><span class=\"line\">\t\t.checkmark &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 設定新 checkbox mark */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">top</span>: <span class=\"number\">4px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">15px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">15px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* background-color: #eee; */</span></span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* On mouse-over, add a grey background color */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-class\">.container</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-tag\">input</span>~<span class=\"selector-class\">.checkmark</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 上層 hover, 背景改變 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* When the checkbox is checked, add a blue background */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-class\">.container</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:checked</span>~<span class=\"selector-class\">.checkmark</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* checked 背景改變 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* background-color: #2196F3; */</span></span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* Show the checkmark when checked */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-class\">.container</span> <span class=\"selector-tag\">input</span><span class=\"selector-pseudo\">:checked</span>~<span class=\"selector-class\">.checkmark</span>:after &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 若 checked 顯示符號 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">display</span>: block;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* Style the checkmark/indicator */</span></span></span><br><span class=\"line\">\t\t.container .checkmark:after &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">content</span>: <span class=\"string\">&quot;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">display</span>: none;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 設定符號位置 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">left</span>: <span class=\"number\">4px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">top</span>: <span class=\"number\">2px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 設定打勾符號 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: solid <span class=\"number\">#000</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border-width</span>: <span class=\"number\">0</span> <span class=\"number\">3px</span> <span class=\"number\">3px</span> <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">45deg</span>);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span>One</span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- checked=&quot;checked&quot; 設定 checked --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">checked</span>=<span class=\"string\">&quot;checked&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;checkmark&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span>Two</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;checkmark&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Checkbox-checked\"><a href=\"#Checkbox-checked\" class=\"headerlink\" title=\"Checkbox checked\"></a>Checkbox checked</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;input&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">checked</span>=<span class=\"string\">&quot;checked&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"trigger-by-enter\"><a href=\"#trigger-by-enter\" class=\"headerlink\" title=\"trigger by enter\"></a>trigger by enter</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.job-add input&#x27;</span>)</span><br><span class=\"line\">\t.addEventListener(<span class=\"string\">&#x27;keyup&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (e.keyCode == <span class=\"number\">13</span>) &#123;</span><br><span class=\"line\">\t\t\t...</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n","categories":["Front End"],"tags":["css","tricky"]},{"title":"DATABASE","url":"/2021/06/03/db-1/","content":"<h3 id=\"基本\"><a href=\"#基本\" class=\"headerlink\" title=\"基本\"></a>基本</h3><ul>\n<li>schema : 結構</li>\n<li>編碼與排序     : 建議 utf8_general_ci </li>\n<li>Pimary Key(PK) : 主鍵</li>\n<li>Unique : 在 table 內,資料唯一</li>\n<li>CRUD : 新增(Create)、讀取(Read)、更新(Update)、刪除(Delete)</li>\n<li>類型 <ul>\n<li>InnoDB</li>\n<li>MyISAM 不支援 Transaction(交易)</li>\n</ul>\n</li>\n</ul>\n<span id=\"more\"></span>\n\n<h4 id=\"種類\"><a href=\"#種類\" class=\"headerlink\" title=\"種類\"></a>種類</h4><h5 id=\"SQL-關聯資料語言\"><a href=\"#SQL-關聯資料語言\" class=\"headerlink\" title=\"SQL 關聯資料語言\"></a>SQL 關聯資料語言</h5><ul>\n<li>MySQL</li>\n<li>PostgreSQL</li>\n<li>   MSSQL</li>\n</ul>\n<h5 id=\"NoSQL-Not-only-SQL\"><a href=\"#NoSQL-Not-only-SQL\" class=\"headerlink\" title=\"NoSQL(Not only SQL)\"></a>NoSQL(Not only SQL)</h5><p>如儲存 log 使用</p>\n<ul>\n<li>MongoDB</li>\n</ul>\n<h4 id=\"DB-管理程式\"><a href=\"#DB-管理程式\" class=\"headerlink\" title=\"DB 管理程式\"></a>DB 管理程式</h4><h5 id=\"MySQL\"><a href=\"#MySQL\" class=\"headerlink\" title=\"MySQL\"></a>MySQL</h5><ul>\n<li>phpMyAdmin</li>\n<li>MySQL workbench</li>\n<li>Sequel Pro (Mac only)</li>\n<li>HeidiSQL</li>\n</ul>\n<h3 id=\"mySQL\"><a href=\"#mySQL\" class=\"headerlink\" title=\"mySQL\"></a>mySQL</h3><h4 id=\"基礎語法\"><a href=\"#基礎語法\" class=\"headerlink\" title=\"基礎語法\"></a>基礎語法</h4><p>一般 mySQL 命令都用大寫,較易識別</p>\n<h5 id=\"bash-command\"><a href=\"#bash-command\" class=\"headerlink\" title=\"bash command\"></a>bash command</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># version</span></span><br><span class=\"line\">mysql -V</span><br><span class=\"line\"><span class=\"comment\"># 使用 root 進入 MySQL</span></span><br><span class=\"line\">mysql -u root -p</span><br><span class=\"line\"><span class=\"comment\"># 遠端登入 - remote_host_ip 指你要登入的遠端MySQL ip</span></span><br><span class=\"line\">mysql -u root -h remote_host_ip -p</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"查詢資料-Select\"><a href=\"#查詢資料-Select\" class=\"headerlink\" title=\"查詢資料 Select\"></a>查詢資料 Select</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># table 可用 反引號包住,也可以不加反引號</span></span><br><span class=\"line\"><span class=\"comment\"># class 所有資料</span></span><br><span class=\"line\">SELECT * FROM class</span><br><span class=\"line\"><span class=\"comment\"># 查 class 內, 欄位為 id 的資料</span></span><br><span class=\"line\">SELECT id FROM class</span><br><span class=\"line\"><span class=\"comment\"># 查 class 內, 欄位為 id,name 的資料</span></span><br><span class=\"line\">SELECT id, name FROM class</span><br><span class=\"line\"><span class=\"comment\"># 查 class 內, 欄位為 id 的資料,顯示欄位為 nameId </span></span><br><span class=\"line\">SELECT id as nameId FROM class</span><br><span class=\"line\"><span class=\"comment\"># 查 class 內, id=2 的資料</span></span><br><span class=\"line\">SELECT * FROM class WHERE id = 2</span><br><span class=\"line\"><span class=\"comment\"># 查 class 內, id=2 name=&quot;Bill&quot; 的資料</span></span><br><span class=\"line\">SELECT * FROM class WHERE id = 2 and name = <span class=\"string\">&quot;Bill&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"新增資料-Insert\"><a href=\"#新增資料-Insert\" class=\"headerlink\" title=\"新增資料 Insert\"></a>新增資料 Insert</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 包欄位的單引號可以不加,除非是易稿混的名稱</span></span><br><span class=\"line\">INSERT INTO `my_class`(`name`, `content`) VALUES (<span class=\"string\">&#x27;Jerry&#x27;</span>,<span class=\"string\">&#x27;where?&#x27;</span>)</span><br><span class=\"line\">INSERT INTO `my_class`(name, content) VALUES (<span class=\"string\">&#x27;Jack&#x27;</span>,<span class=\"string\">&#x27;office&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"修改資料-Update\"><a href=\"#修改資料-Update\" class=\"headerlink\" title=\"修改資料 Update\"></a>修改資料 Update</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 指定要更動欄位</span></span><br><span class=\"line\">UPDATE my_class SET name=<span class=\"string\">&#x27;user01&#x27;</span>, content=<span class=\"string\">&#x27;content01&#x27;</span> WHERE id=2</span><br><span class=\"line\"><span class=\"comment\"># 修改使用者密碼</span></span><br><span class=\"line\">ALTER USER <span class=\"string\">&#x27;robert&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class=\"string\">&#x27;password&#x27;</span>;</span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"刪除資料-Delete\"><a href=\"#刪除資料-Delete\" class=\"headerlink\" title=\"刪除資料 Delete\"></a>刪除資料 Delete</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">DELETE FROM `my_class` WHERE id=4</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"SHOW-權限內容\"><a href=\"#SHOW-權限內容\" class=\"headerlink\" title=\"SHOW 權限內容\"></a>SHOW 權限內容</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt;SHOW GRANTS FOR robert@localhost;</span><br><span class=\"line\">\t+------------------------------------------------------------+</span><br><span class=\"line\">\t| Grants <span class=\"keyword\">for</span> robert@localhost                                |</span><br><span class=\"line\">\t+------------------------------------------------------------+</span><br><span class=\"line\">\t| GRANT USAGE ON *.* TO `robert`@`localhost`                 |</span><br><span class=\"line\">\t| GRANT ALL PRIVILEGES ON `robert`.* TO `robert`@`localhost` |</span><br><span class=\"line\">\t+------------------------------------------------------------+</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"SHOW-CREATE-DATABASE\"><a href=\"#SHOW-CREATE-DATABASE\" class=\"headerlink\" title=\"SHOW/CREATE DATABASE\"></a>SHOW/CREATE DATABASE</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; CREATE DATABASE `bill`;</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SHOW DATABASES;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| bill               |</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| phpmyadmin         |</span><br><span class=\"line\">| robert             |</span><br><span class=\"line\">| sys                |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">7 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"CREATE-user-also-add-password-ALTER-modify-user-setting\"><a href=\"#CREATE-user-also-add-password-ALTER-modify-user-setting\" class=\"headerlink\" title=\"CREATE user(also add password)/ALTER(modify user setting)\"></a>CREATE user(also add password)/ALTER(modify user setting)</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CREATE USER &#39;robert&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;userpassword&#39;;</span><br><span class=\"line\"># 可登入設定</span><br><span class=\"line\">CREATE USER &#39;robert2&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;password&#39;;</span><br><span class=\"line\">CREATE USER &#39;robert2&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;password&#39;;</span><br><span class=\"line\"># 更改 user 設定</span><br><span class=\"line\">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;rootpassword&#39;;</span><br><span class=\"line\"># 建立使用者，並給予權限</span><br><span class=\"line\">grant usage on *.* to &#39;username&#39;@&#39;localhost&#39; identified by &#39;yourpassword&#39; with grant option; </span><br><span class=\"line\">grant all privileges on *.* to &#39;username&#39;@&#39;localhost&#39; identified by &#39;yourpassword&#39;;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\"># 刪除mysql的使用者</span><br><span class=\"line\">delete from mysql.user where user&#x3D;&#39;username&#39; and host&#x3D;&#39;localhost&#39;;</span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"選擇資料庫\"><a href=\"#選擇資料庫\" class=\"headerlink\" title=\"選擇資料庫\"></a>選擇資料庫</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">USE mysql;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"other-command\"><a href=\"#other-command\" class=\"headerlink\" title=\"other command\"></a>other command</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># current user</span></span><br><span class=\"line\">SELECT CURRENT_USER();</span><br><span class=\"line\"><span class=\"comment\"># show all user</span></span><br><span class=\"line\">SELECT User,Host FROM mysql.user;</span><br><span class=\"line\"><span class=\"comment\"># show all DB</span></span><br><span class=\"line\">SHOW DATABASES;</span><br><span class=\"line\"><span class=\"comment\"># show DB&#x27;s table</span></span><br><span class=\"line\">USE mysql2;</span><br><span class=\"line\">SHOW TABLES;</span><br><span class=\"line\"><span class=\"comment\"># delete table</span></span><br><span class=\"line\">DROP TABLE blog_category;</span><br><span class=\"line\">DROP TABLE user_levels;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"is-deleted-欄位-hide-data-for-user\"><a href=\"#is-deleted-欄位-hide-data-for-user\" class=\"headerlink\" title=\"is_deleted 欄位(hide data for user)\"></a>is_deleted 欄位(hide data for user)</h5><p>MySQL沒有 boolean 型別, 設定 boolean 會自動轉成 tinyint(1)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 增加 is_deleted 欄位</span></span><br><span class=\"line\"><span class=\"comment\"># query data for user</span></span><br><span class=\"line\">SELECT * FROM `my_class` WHERE is_deleted=0</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Transaction-交易-and-Lock-鎖\"><a href=\"#Transaction-交易-and-Lock-鎖\" class=\"headerlink\" title=\"Transaction(交易) and Lock(鎖)\"></a>Transaction(交易) and Lock(鎖)</h4><h5 id=\"Transaction-交易\"><a href=\"#Transaction-交易\" class=\"headerlink\" title=\"Transaction(交易)\"></a>Transaction(交易)</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;autocommit(<span class=\"literal\">FALSE</span>);</span><br><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;begin_transaction();</span><br><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;query(<span class=\"string\">&quot;update from money set amount = 20&quot;</span>);</span><br><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;query(<span class=\"string\">&quot;update from money set sum = 10&quot;</span>);</span><br><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;commit();</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Lock-鎖\"><a href=\"#Lock-鎖\" class=\"headerlink\" title=\"Lock(鎖)\"></a>Lock(鎖)</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;autocommit(<span class=\"literal\">FALSE</span>);</span><br><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;begin_transaction();</span><br><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;query(<span class=\"string\">&quot;SELECT amount from products where id = 1 for update&quot;</span>);</span><br><span class=\"line\"><span class=\"variable\">$conn</span>-&gt;commit();</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"test-DB-table\"><a href=\"#test-DB-table\" class=\"headerlink\" title=\"test DB table\"></a>test DB table</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">products:  </span><br><span class=\"line\">\tid amount</span><br><span class=\"line\">\t 1   1</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"normal-process\"><a href=\"#normal-process\" class=\"headerlink\" title=\"normal process\"></a>normal process</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"string\">&quot;SELECT amount from products where id = 1&quot;</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>-&gt;num_rows &gt; <span class=\"number\">0</span> ) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc();</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;amount &quot;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;amount&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$row</span>[<span class=\"string\">&#x27;amount&#x27;</span>] &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"string\">&quot;UPDATE products SET amount = amount - 1 where id = 1&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$stmt</span>-&gt;execute()) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;購買成功&#x27;</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"variable\">$conn</span>-&gt;close();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"add-lock-process\"><a href=\"#add-lock-process\" class=\"headerlink\" title=\"add lock process\"></a>add lock process</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// where id = 1 for update  --&gt; row lock</span></span><br><span class=\"line\"><span class=\"comment\">// no where --&gt; table lock</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// transactio</span></span><br><span class=\"line\">\t<span class=\"variable\">$conn</span>-&gt;autocommit(<span class=\"literal\">FALSE</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$conn</span>-&gt;begin_transaction();</span><br><span class=\"line\">\t<span class=\"comment\">// for update mean lock</span></span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"string\">&quot;SELECT amount from products where id = 1 for update&quot;</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>-&gt;num_rows &gt; <span class=\"number\">0</span> ) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc();</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;amount &quot;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;amount&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$row</span>[<span class=\"string\">&#x27;amount&#x27;</span>] &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"string\">&quot;UPDATE products SET amount = amount - 1 where id = 1&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$stmt</span>-&gt;execute()) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;購買成功&#x27;</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// transactio</span></span><br><span class=\"line\">\t<span class=\"variable\">$conn</span>-&gt;commit();</span><br><span class=\"line\">\t<span class=\"variable\">$conn</span>-&gt;close();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n","categories":["Back End"],"tags":["database","mysql"]},{"title":"DATABASE Issue","url":"/2021/06/10/db-2/","content":"<h3 id=\"mySQL\"><a href=\"#mySQL\" class=\"headerlink\" title=\"mySQL\"></a>mySQL</h3><h4 id=\"使用-SeidiSQl-連接-XAMPP-選使用者出現錯誤\"><a href=\"#使用-SeidiSQl-連接-XAMPP-選使用者出現錯誤\" class=\"headerlink\" title=\"使用 SeidiSQl 連接 XAMPP,選使用者出現錯誤\"></a>使用 SeidiSQl 連接 XAMPP,選使用者出現錯誤</h4><p><strong>1030 - Got error 176 “Read page with wrong checksum” from storage engine Aria</strong></p>\n<span id=\"more\"></span>\n\n<ul>\n<li>發現是執行 FLUSH PRIVILEGES; 出錯</li>\n<li>開啟 phpmyadmin</li>\n<li>選 mysql database</li>\n<li>點選 全選, 再選擇 修復資料表, 修復完即 ok</li>\n</ul>\n<div style=\"width:800px\">\n    <img src=\"/2021/06/10/db-2/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h3 id=\"000webhost\"><a href=\"#000webhost\" class=\"headerlink\" title=\"000webhost\"></a>000webhost</h3><h4 id=\"Cannot-modify-header-information\"><a href=\"#Cannot-modify-header-information\" class=\"headerlink\" title=\"Cannot modify header information\"></a>Cannot modify header information</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 執行以下程式發生</span></span><br><span class=\"line\">header(<span class=\"string\">&#x27;Location: index.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// .htaccess file in the root directory 設定以下內容</span></span><br><span class=\"line\">php_value output_buffering <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"A-non-numeric-value-encountered-in-…\"><a href=\"#A-non-numeric-value-encountered-in-…\" class=\"headerlink\" title=\"A non-numeric value encountered in …\"></a>A non-numeric value encountered in …</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 原程式</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;a href=&quot;index.php?page=&#x27;</span> . <span class=\"variable\">$page</span>+<span class=\"number\">1</span> . <span class=\"string\">&#x27;&quot;&gt;下一頁&lt;/a&gt;&#x27;</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 修正後程式</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;a href=&quot;index.php?page=&#x27;</span> . strval(<span class=\"variable\">$page</span>+<span class=\"number\">1</span>) . <span class=\"string\">&#x27;&quot;&gt;下一頁&lt;/a&gt;&#x27;</span> ;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Field-‘deleted’-doesn’t-have-a-default-value\"><a href=\"#Field-‘deleted’-doesn’t-have-a-default-value\" class=\"headerlink\" title=\"Field ‘deleted’ doesn’t have a default value\"></a>Field ‘deleted’ doesn’t have a default value</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 命令如下, deleted欄位未加入,也未設定 default 值</span></span><br><span class=\"line\">insert into comment(username, content) values(<span class=\"string\">&#x27;aa&#x27;</span>, <span class=\"string\">&#x27;i am here&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 設定 table 欄位 default 為 NULL</span></span><br><span class=\"line\"><span class=\"comment\">// query 如下以取得含 欄位 default 為 NULL 之資料</span></span><br><span class=\"line\">select * <span class=\"keyword\">from</span> comment where deleted=<span class=\"number\">0</span> <span class=\"keyword\">or</span> deleted is <span class=\"literal\">NULL</span></span><br></pre></td></tr></table></figure>","categories":["Back End"],"tags":["issue","database","mysql"]},{"title":"Express","url":"/2021/08/03/express-1/","content":"<h3 id=\"node-js-create-web-server\"><a href=\"#node-js-create-web-server\" class=\"headerlink\" title=\"node.js create web server\"></a>node.js create web server</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> server = http.createServer(handler)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(req.url)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (req.url === <span class=\"string\">&#x27;/hello&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tres.writeHead(<span class=\"number\">200</span>, &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// &#x27;Connect-Type&#x27;: &#x27;text/plain&#x27; - 沒有效果</span></span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;Connect-Type&#x27;</span>: <span class=\"string\">&#x27;text/html&#x27;</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t\tres.write(<span class=\"string\">&#x27;&lt;h1&gt;hello!&lt;/h1&gt;&#x27;</span>)</span><br><span class=\"line\">\t&#125; </span><br><span class=\"line\">\t<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ( req.url === <span class=\"string\">&#x27;/bye&#x27;</span>)&#123;</span><br><span class=\"line\">\t\tres.write(<span class=\"string\">&#x27;bye&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ( req.url === <span class=\"string\">&#x27;/new&#x27;</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 轉址</span></span><br><span class=\"line\">\t\tres.writeHead(<span class=\"number\">301</span>, &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;Location&#x27;</span>: <span class=\"string\">&#x27;/bye&#x27;</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tres.write(<span class=\"string\">&#x27;Invalid url&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tres.end()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server.listen(<span class=\"number\">5001</span>)</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"Express-server\"><a href=\"#Express-server\" class=\"headerlink\" title=\"Express server\"></a>Express server</h3><h4 id=\"Example-1\"><a href=\"#Example-1\" class=\"headerlink\" title=\"Example #1\"></a>Example #1</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install express</span></span><br><span class=\"line\">npm install express</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\tres.send(<span class=\"string\">&#x27;Hello!&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/hello&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\tres.send(<span class=\"string\">&#x27;Hello man!&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/bye&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\tres.send(<span class=\"string\">&#x27;Bye!&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Example-2-add-template\"><a href=\"#Example-2-add-template\" class=\"headerlink\" title=\"Example #2 - add template\"></a>Example #2 - add template</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># template engine --&gt; ejs</span></span><br><span class=\"line\"><span class=\"comment\"># install </span></span><br><span class=\"line\">npm install ejs</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\tres.send(<span class=\"string\">&#x27;index...&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// map to views</span></span><br><span class=\"line\">\tres.render(<span class=\"string\">&#x27;todos&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// ES6 可省略</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// todos: todos</span></span><br><span class=\"line\">\t\ttodos</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos/:id&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = req.params.id</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> todo = todos[id]\t</span><br><span class=\"line\">\t<span class=\"comment\">// map to views</span></span><br><span class=\"line\">\tres.render(<span class=\"string\">&#x27;todo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\ttodo</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todos.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todos<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t&lt;% for(let i=0 ; i<span class=\"tag\">&lt;<span class=\"name\">todos.length</span> ; <span class=\"attr\">i</span>++) &#123; %&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt; % = 表要輸出 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&lt;%= todos[i] %&gt;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todo.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todo<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= todo %&gt;<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Example-3-MVC\"><a href=\"#Example-3-MVC\" class=\"headerlink\" title=\"Example #3 - MVC\"></a>Example #3 - MVC</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.getAll)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos/:id&#x27;</span>, todoController.get)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/todo.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> todos = todoModel.getAll()</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;todos&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\ttodos</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> id = req.params.id</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> todo = todoModel.get(id)</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;todo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\ttodo</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/todo.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> todos</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> todos[id]</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoModel</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Example-4-add-mysql\"><a href=\"#Example-4-add-mysql\" class=\"headerlink\" title=\"Example #4 - add mysql\"></a>Example #4 - add mysql</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.getAll)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos/:id&#x27;</span>, todoController.get)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add todo db</span></span><br><span class=\"line\">\tdb.connect()</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// db.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mysql      = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mysql&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> connection = mysql.createConnection(&#123;</span><br><span class=\"line\">  host     : <span class=\"string\">&#x27;localhost&#x27;</span>,</span><br><span class=\"line\">  user     : <span class=\"string\">&#x27;robert&#x27;</span>,</span><br><span class=\"line\">  password : <span class=\"string\">&#x27;password&#x27;</span>,</span><br><span class=\"line\">  database : <span class=\"string\">&#x27;app&#x27;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = connection</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/todo.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\ttodoModel.getAll(<span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todos&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodos : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> id = req.params.id</span><br><span class=\"line\">\t\ttodoModel.get(id, <span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodo : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/todo.js</span></span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../db&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">id,cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos WHERE id=?&#x27;</span>, [id], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoModel</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todos.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todos<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t&lt;% for(let i=0 ; i<span class=\"tag\">&lt;<span class=\"name\">todos.length</span> ; <span class=\"attr\">i</span>++) &#123; %&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt; % = 表要輸出 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt;li&gt;&lt;%= todos[i].id %&gt;: &lt;%= todos[i].content %&gt;&lt;/li&gt; --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&lt;%= todos[i].id + &#x27;: &#x27; + todos[i].content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todo.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todo<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">&lt;% if (todo.length &gt;0) &#123; %&gt;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= todo[0].content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; %&gt; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"express-middleware-中介軟體\"><a href=\"#express-middleware-中介軟體\" class=\"headerlink\" title=\"express middleware(中介軟體)\"></a>express middleware(中介軟體)</h3><h4 id=\"example-simple-query-string\"><a href=\"#example-simple-query-string\" class=\"headerlink\" title=\"example - simple ( query string)\"></a>example - simple ( query string)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// total middleware</span></span><br><span class=\"line\"><span class=\"comment\">// app.use((req, rep, next) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t// middlewate test </span></span><br><span class=\"line\"><span class=\"comment\">// \t// console.log(&#x27;Time:&#x27;, new Date())</span></span><br><span class=\"line\"><span class=\"comment\">// \t// run next step</span></span><br><span class=\"line\"><span class=\"comment\">// \t// next()</span></span><br><span class=\"line\"><span class=\"comment\">// \t// response end</span></span><br><span class=\"line\"><span class=\"comment\">// \t// rep.end()</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// \t// middleware test permission</span></span><br><span class=\"line\"><span class=\"comment\">// \tif (req.query.admin === &#x27;1&#x27;) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\tnext()</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// \telse &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\trep.end(&#x27;Error!&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add permision check (admin===1)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkPermission</span>(<span class=\"params\">req, rep, next</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (req.query.admin === <span class=\"string\">&#x27;1&#x27;</span>) &#123;</span><br><span class=\"line\">\t\tnext()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\trep.end(<span class=\"string\">&#x27;Error!&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add permision check for one item</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos&#x27;</span>, checkPermission, todoController.getAll)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos/:id&#x27;</span>, todoController.get)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/test&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// query string - &#123; a: &#x27;1&#x27;, b: &#x27;2&#x27; &#125;</span></span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(req.query)</span><br><span class=\"line\">\t<span class=\"comment\">// response info</span></span><br><span class=\"line\">\t<span class=\"comment\">// console.log(req)</span></span><br><span class=\"line\">\tres.send(<span class=\"string\">&#x27;Test!&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add todo db</span></span><br><span class=\"line\">\tdb.connect()</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/todo.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add permision check (admin===1)</span></span><br><span class=\"line\"><span class=\"comment\">// function checkPermission(req) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \treturn (req.query.admin === &#x27;1&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// add permision check (admin===1)</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// http://localhost:3000/todos?admin=1</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// if (!checkPermission(req)) return res.end()</span></span><br><span class=\"line\">\t\ttodoModel.getAll(<span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todos&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodos : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// add permision check (admin===1)</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// http://localhost:3000/todos/1?admin=1</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// if (!checkPermission(req)) return res.end()</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> id = req.params.id</span><br><span class=\"line\">\t\ttodoModel.get(id, <span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodo : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/todo.js</span></span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../db&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">id,cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos WHERE id=?&#x27;</span>, [id], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoModel</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"body-parser\"><a href=\"#body-parser\" class=\"headerlink\" title=\"body parser\"></a>body parser</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install body parser</span></span><br><span class=\"line\">npm install body-parser</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"></span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.newTodo)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.getAll)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos/:id&#x27;</span>, todoController.get)</span><br><span class=\"line\"><span class=\"comment\">// add add todo</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, todoController.addTodo)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add todo db</span></span><br><span class=\"line\">\tdb.connect()</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/todo.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\ttodoModel.getAll(<span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todos&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodos : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> id = req.params.id</span><br><span class=\"line\">\t\ttodoModel.get(id, <span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodo : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\taddTodo: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;addTodo&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tnewTodo:  <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// get body data</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> content = req.body.content</span><br><span class=\"line\">\t\ttodoModel.add(content, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/todos&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/todo.js</span></span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../db&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">id,cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos WHERE id=?&#x27;</span>, [id], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tadd: <span class=\"function\">(<span class=\"params\">content, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;INSERT INTO todos(content) VALUES(?)&#x27;</span>, [content], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// console.log(results)</span></span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoModel</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todos.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todos<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/&quot;</span>&gt;</span>add todo<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t&lt;% for(let i=0 ; i<span class=\"tag\">&lt;<span class=\"name\">todos.length</span> ; <span class=\"attr\">i</span>++) &#123; %&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt; % = 表要輸出 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt;li&gt;&lt;%= todos[i].id %&gt;: &lt;%= todos[i].content %&gt;&lt;/li&gt; --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&lt;%= todos[i].id + &#x27;: &#x27; + todos[i].content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todo.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todo<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">&lt;% if (todo.length &gt;0) &#123; %&gt;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= todo[0].content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; %&gt; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/addTodo.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>AddTodo<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/todos&quot;</span>&gt;</span></span><br><span class=\"line\">\tContent: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;content&#x27;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"express-session\"><a href=\"#express-session\" class=\"headerlink\" title=\"express session\"></a>express session</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install express-session</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> session = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express-session&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"comment\">// app.set(&#x27;trust proxy&#x27;, 1) // if have proxy and using secure: tre, need run</span></span><br><span class=\"line\"><span class=\"comment\">// if https recommend set cookie: &#123; secure: true &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// app.use(session(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \tsecret: &#x27;keyboard cat&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">// \tresave: false</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;));</span></span><br><span class=\"line\"><span class=\"comment\">// app.use(session(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   secret: &#x27;keyboard cat&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">//   resave: false,</span></span><br><span class=\"line\"><span class=\"comment\">//   saveUninitialized: true,</span></span><br><span class=\"line\"><span class=\"comment\">//   cookie: &#123; secure: true &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;))</span></span><br><span class=\"line\">app.use(session(&#123;</span><br><span class=\"line\">  secret: <span class=\"string\">&#x27;keyboard cat&#x27;</span>,</span><br><span class=\"line\">  resave: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  saveUninitialized: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.newTodo)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.getAll)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos/:id&#x27;</span>, todoController.get)</span><br><span class=\"line\"><span class=\"comment\">// add add todo</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, todoController.addTodo)</span><br><span class=\"line\"><span class=\"comment\">// login</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\tres.render(<span class=\"string\">&#x27;login&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (req.body.password === <span class=\"string\">&#x27;abc&#x27;</span>) &#123;</span><br><span class=\"line\">\t\treq.session.isLogin = <span class=\"literal\">true</span></span><br><span class=\"line\">\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tres.redirect(<span class=\"string\">&#x27;/login&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// logout</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/logout&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\treq.session.isLogin = <span class=\"literal\">false</span></span><br><span class=\"line\">\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add todo db</span></span><br><span class=\"line\">\tdb.connect()</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/todo.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\ttodoModel.getAll(<span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todos&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodos : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> id = req.params.id</span><br><span class=\"line\">\t\ttodoModel.get(id, <span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodo : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\taddTodo: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;addTodo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\tisLogin: req.session.isLogin</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tnewTodo:  <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// get body data</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> content = req.body.content</span><br><span class=\"line\">\t\ttodoModel.add(content, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/todos&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/todo.js</span></span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../db&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">id,cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos WHERE id=?&#x27;</span>, [id], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tadd: <span class=\"function\">(<span class=\"params\">content, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;INSERT INTO todos(content) VALUES(?)&#x27;</span>, [content], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// console.log(results)</span></span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoModel</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todos.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todos<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/&quot;</span>&gt;</span>add todo<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t&lt;% for(let i=0 ; i<span class=\"tag\">&lt;<span class=\"name\">todos.length</span> ; <span class=\"attr\">i</span>++) &#123; %&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt; % = 表要輸出 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt;li&gt;&lt;%= todos[i].id %&gt;: &lt;%= todos[i].content %&gt;&lt;/li&gt; --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&lt;%= todos[i].id + &#x27;: &#x27; + todos[i].content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/todo.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Todo<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">&lt;% if (todo.length &gt;0) &#123; %&gt;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= todo[0].content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; %&gt; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/addTodo.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>AddTodo<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">&lt;% if(isLogin) &#123; %&gt;</span><br><span class=\"line\">\t你已登入\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/logout&quot;</span>&gt;</span>logout<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; else &#123; %&gt;</span><br><span class=\"line\">\t你未登入 </span><br><span class=\"line\">&lt;% &#125; %&gt; \t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/todos&quot;</span>&gt;</span></span><br><span class=\"line\">\tContent: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;content&#x27;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/login.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Login<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/login&quot;</span>&gt;</span></span><br><span class=\"line\">\tPassword: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;password&#x27;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"connect-flash\"><a href=\"#connect-flash\" class=\"headerlink\" title=\"connect-flash\"></a>connect-flash</h4><ul>\n<li>connect-flash</li>\n<li>add global variable - use middleware</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install connect-flash</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> session = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express-session&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> flash = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;connect-flash&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">app.use(flash())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"comment\">// app.set(&#x27;trust proxy&#x27;, 1) // if have proxy and using secure: tre, need run</span></span><br><span class=\"line\"><span class=\"comment\">// if https recommend set cookie: &#123; secure: true &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// app.use(session(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \tsecret: &#x27;keyboard cat&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">// \tresave: false</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;));</span></span><br><span class=\"line\"><span class=\"comment\">// app.use(session(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   secret: &#x27;keyboard cat&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">//   resave: false,</span></span><br><span class=\"line\"><span class=\"comment\">//   saveUninitialized: true,</span></span><br><span class=\"line\"><span class=\"comment\">//   cookie: &#123; secure: true &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;))</span></span><br><span class=\"line\">app.use(session(&#123;</span><br><span class=\"line\">  secret: <span class=\"string\">&#x27;keyboard cat&#x27;</span>,</span><br><span class=\"line\">  resave: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  saveUninitialized: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add global variable - use middleware</span></span><br><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tres.locals.isLogin = req.session.isLogin</span><br><span class=\"line\">\t<span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">\tres.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br><span class=\"line\">\tnext()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.newTodo)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos&#x27;</span>, todoController.getAll)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/todos/:id&#x27;</span>, todoController.get)</span><br><span class=\"line\"><span class=\"comment\">// add add todo</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, todoController.addTodo)</span><br><span class=\"line\"><span class=\"comment\">// login</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\tres.render(<span class=\"string\">&#x27;login&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (req.body.password === <span class=\"string\">&#x27;abc&#x27;</span>) &#123;</span><br><span class=\"line\">\t\treq.session.isLogin = <span class=\"literal\">true</span></span><br><span class=\"line\">\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;Please input the correct password.&#x27;</span>)</span><br><span class=\"line\">\t\tres.redirect(<span class=\"string\">&#x27;/login&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// logout</span></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/logout&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\treq.session.isLogin = <span class=\"literal\">false</span></span><br><span class=\"line\">\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add todo db</span></span><br><span class=\"line\">\tdb.connect()</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/todo.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/todo&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\ttodoModel.getAll(<span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todos&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodos : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> id = req.params.id</span><br><span class=\"line\">\t\ttodoModel.get(id, <span class=\"function\">(<span class=\"params\">err,results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;todo&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\ttodo : results</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\taddTodo: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;addTodo&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tnewTodo:  <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// get body data</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> content = req.body.content</span><br><span class=\"line\">\t\ttodoModel.add(content, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/todos&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/todo.js</span></span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../db&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = &#123;</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">id,cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM todos WHERE id=?&#x27;</span>, [id], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tadd: <span class=\"function\">(<span class=\"params\">content, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;INSERT INTO todos(content) VALUES(?)&#x27;</span>, [content], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// console.log(results)</span></span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoModel</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/login.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Login<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= errorMessage %&gt; <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/login&quot;</span>&gt;</span></span><br><span class=\"line\">\tPassword: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;password&#x27;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"簡易會員註冊系統\"><a href=\"#簡易會員註冊系統\" class=\"headerlink\" title=\"簡易會員註冊系統\"></a>簡易會員註冊系統</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># insatll bcrypt</span></span><br><span class=\"line\">npm install bcrypt</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> session = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express-session&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> flash = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;connect-flash&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/user&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">app.use(flash())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\">app.use(session(&#123;</span><br><span class=\"line\">  secret: <span class=\"string\">&#x27;keyboard cat&#x27;</span>,</span><br><span class=\"line\">  resave: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  saveUninitialized: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add global variable - use middleware</span></span><br><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tres.locals.username = req.session.username</span><br><span class=\"line\">\t<span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">\tres.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br><span class=\"line\">\tnext()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">redirectBack</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">\tres.redirect(<span class=\"string\">&#x27;back&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>,  <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tres.render(<span class=\"string\">&#x27;user/index&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/register&#x27;</span>, userController.register)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/register&#x27;</span>, userController.handleRegister, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/login&#x27;</span>, userController.login)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/login&#x27;</span>, userController.handleLogin, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/logout&#x27;</span>, userController.logout)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add todo db</span></span><br><span class=\"line\">\tdb.connect()</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> userModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/user&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add bcrypt</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bcrypt = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;bcrypt&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> saltRounds = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = &#123;</span><br><span class=\"line\">\tregister: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;user/register&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandleRegister: <span class=\"function\">(<span class=\"params\">req, res , next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;username, password, nickname&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!username || !password || !nickname) &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;缺少必要欄位!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next() </span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tbcrypt.genSalt(saltRounds, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, salt</span>) </span>&#123;</span><br><span class=\"line\">\t\t\tbcrypt.hash(password, salt, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, hash</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">return</span> next() </span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\tuserModel.add(&#123;</span><br><span class=\"line\">\t\t\t\t\t\tusername,</span><br><span class=\"line\">\t\t\t\t\t\tnickname,</span><br><span class=\"line\">\t\t\t\t\t\tpassword: hash</span><br><span class=\"line\">\t\t\t\t\t&#125;, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">return</span> next() </span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\treq.session.username = username</span><br><span class=\"line\">\t\t\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tlogin: <span class=\"function\">(<span class=\"params\">req, res </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;user/login&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandleLogin: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;username, password&#125; = req.body</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (!username || !password) &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;該填未填!&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\tuserModel.get(username, <span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> next()\t\t</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (!user) &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;無此帳號!&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> next()\t\t</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tbcrypt.compare(password, user.password, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, isSuccess</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err || (!isSuccess)) &#123;</span><br><span class=\"line\">\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;密碼錯誤!&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> next()\t\t</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\treq.session.username = user.username </span><br><span class=\"line\">\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)\t\t</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tlogout: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\treq.session.username = <span class=\"literal\">null</span></span><br><span class=\"line\">\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = userController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/user.js</span></span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../db&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todos = [</span><br><span class=\"line\">\t<span class=\"string\">&#x27;first todo&#x27;</span>, <span class=\"string\">&#x27;second todo&#x27;</span>, <span class=\"string\">&#x27;third todo&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">const</span> userModel = &#123;</span><br><span class=\"line\">\tadd: <span class=\"function\">(<span class=\"params\">user, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;INSERT INTO users(username, password, nickname) VALUES(?, ?, ?)&#x27;</span>,</span><br><span class=\"line\">\t\t \t[user.username, user.password, user.nickname], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">username,cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;SELECT * FROM users WHERE username=?&#x27;</span>, [username], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results[<span class=\"number\">0</span>])</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = userModel</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/index.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>簡易會員系統<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;% if (username) &#123; %&gt; </span><br><span class=\"line\">\thello, &lt;%= username %&gt; <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- 可執行 HTML --&gt;</span></span><br><span class=\"line\">\thello, &lt;%- username %&gt; <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/logout&quot;</span>&gt;</span>登出<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; else &#123; %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/register&quot;</span>&gt;</span>註冊<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/login&quot;</span>&gt;</span>登入<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; %&gt; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/register.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>註冊頁面<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= errorMessage %&gt; <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/register&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>username: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;textd&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>password: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;password&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>nickname: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;nickname&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/login.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>登入頁面<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= errorMessage %&gt; <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/login&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>username: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;textd&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>password: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;password&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"簡易留言板\"><a href=\"#簡易留言板\" class=\"headerlink\" title=\"簡易留言板\"></a>簡易留言板</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> session = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express-session&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> flash = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;connect-flash&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/todo&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/user&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> commentController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/comment&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">app.use(flash())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\">app.use(session(&#123;</span><br><span class=\"line\">  secret: <span class=\"string\">&#x27;keyboard cat&#x27;</span>,</span><br><span class=\"line\">  resave: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  saveUninitialized: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add global variable - use middleware</span></span><br><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tres.locals.username = req.session.username</span><br><span class=\"line\">\t<span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">\tres.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br><span class=\"line\">\tnext()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">redirectBack</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">\tres.redirect(<span class=\"string\">&#x27;back&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, commentController.index) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/register&#x27;</span>, userController.register)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/register&#x27;</span>, userController.handleRegister, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/login&#x27;</span>, userController.login)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/login&#x27;</span>, userController.handleLogin, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/logout&#x27;</span>, userController.logout)</span><br><span class=\"line\"></span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/comments&#x27;</span>, commentController.add)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/comments_delete/:id&#x27;</span>, commentController.delete)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/comments_update/:id&#x27;</span>, commentController.update)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/comments_update/:id&#x27;</span>, commentController.handelUpdate)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add todo db</span></span><br><span class=\"line\">\tdb.connect()</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/comment.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> commentModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models/comment&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> commentController = &#123;</span><br><span class=\"line\">\tadd:  <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// get body data</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;username&#125; = req.session</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;content&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!username || !content ) &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;請輸入完整內容!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> res.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tcommentModel.add(username, content, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tindex: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tcommentModel.getAll(<span class=\"function\">(<span class=\"params\">err, results</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;user/index&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\tcomments: results</span><br><span class=\"line\">\t\t\t&#125; )</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"keyword\">delete</span>: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tcommentModel.delete(req.session.username, req.params.id, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tupdate: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tcommentModel.get(req.params.id, <span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;user/update&#x27;</span>,&#123;</span><br><span class=\"line\">\t\t\t\tcomment: result</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandelUpdate: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tcommentModel.update(req.session.username, req.params.id, req.body.content, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = commentController</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./modules/comment.js</span></span><br><span class=\"line\"><span class=\"comment\">// add todo db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../db&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> todoModel = &#123;</span><br><span class=\"line\">\tadd: <span class=\"function\">(<span class=\"params\">username, content, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(<span class=\"string\">&#x27;INSERT INTO comments(username, content) VALUES(?, ?)&#x27;</span>, </span><br><span class=\"line\">\t\t\t[username ,content], </span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> cb(error)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tgetAll: <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(</span><br><span class=\"line\">\t\t\t<span class=\"string\">`SELECT U.nickname, C.content, C.id, U.username</span></span><br><span class=\"line\"><span class=\"string\">\t\t\tFROM comments AS C LEFT JOIN users as U </span></span><br><span class=\"line\"><span class=\"string\">\t\t\ton U.username = C.username ORDER BY C.id DESC`</span>,</span><br><span class=\"line\">\t\t\t(err, results) =&gt; &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> cb(err)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"keyword\">delete</span>: <span class=\"function\">(<span class=\"params\">username, id, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(</span><br><span class=\"line\">\t\t\t<span class=\"string\">`DELETE FROM comments WHERE id=? AND username=?`</span>, [id, username], </span><br><span class=\"line\">\t\t\t(err, results) =&gt; &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> cb(err)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t)\t\t</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tget: <span class=\"function\">(<span class=\"params\">id, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(</span><br><span class=\"line\">\t\t\t<span class=\"string\">`SELECT U.nickname, C.content, C.id, U.username</span></span><br><span class=\"line\"><span class=\"string\">\t\t\tFROM comments AS C LEFT JOIN users as U </span></span><br><span class=\"line\"><span class=\"string\">\t\t\ton U.username = C.username WHERE C.id=?`</span>, [id],</span><br><span class=\"line\">\t\t\t(err, results) =&gt; &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> cb(err)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>, results[<span class=\"number\">0</span>] || &#123;&#125;)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tupdate: <span class=\"function\">(<span class=\"params\">username, id, content, cb</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tdb.query(</span><br><span class=\"line\">\t\t\t<span class=\"string\">`UPDATE comments SET content=? WHERE id=? AND username=?`</span>, </span><br><span class=\"line\">\t\t\t[content , id, username], </span><br><span class=\"line\">\t\t\t(err, results) =&gt; &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> cb(err)</span><br><span class=\"line\">\t\t\t\tcb(<span class=\"literal\">null</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t)\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = todoModel</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/index.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>簡易會員系統<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= errorMessage %&gt; <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;% if (username) &#123; %&gt; </span><br><span class=\"line\">\thello, &lt;%= username %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/logout&quot;</span>&gt;</span>登出<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/comments&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;% &#125; else &#123; %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/register&quot;</span>&gt;</span>註冊<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/login&quot;</span>&gt;</span>登入<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; %&gt; </span><br><span class=\"line\"></span><br><span class=\"line\">&lt;% comments.forEach( function(comment) &#123; %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>&lt;%= comment.nickname %&gt; </span><br><span class=\"line\">\t\t&lt;% if (username == comment.username) &#123; %&gt;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/comments_delete/&lt;%= comment.id %&gt;&quot;</span>&gt;</span>刪除<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/comments_update/&lt;%= comment.id %&gt;&quot;</span>&gt;</span>修改<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t&lt;% &#125; %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&lt;%= comment.content %&gt; <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125;) %&gt; </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/update.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>編輯留言<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/comments_update/&lt;%= comment.id%&gt;&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span>&lt;%= comment.content %&gt; <span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ORM-與-Sequelize\"><a href=\"#ORM-與-Sequelize\" class=\"headerlink\" title=\"ORM 與 Sequelize\"></a>ORM 與 Sequelize</h3><p>ORM : Object Relational Mapping</p>\n<h4 id=\"Sequelize-基本操作\"><a href=\"#Sequelize-基本操作\" class=\"headerlink\" title=\"Sequelize 基本操作\"></a>Sequelize 基本操作</h4><h5 id=\"insatll-sequelize\"><a href=\"#insatll-sequelize\" class=\"headerlink\" title=\"insatll sequelize\"></a>insatll sequelize</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install sequelize</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"link-DB-and-create-table’s-item\"><a href=\"#link-DB-and-create-table’s-item\" class=\"headerlink\" title=\"link DB and create table’s item\"></a>link DB and create table’s item</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">Sequelize = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// set db configuration</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = <span class=\"keyword\">new</span> Sequelize(<span class=\"string\">&#x27;mydb&#x27;</span>, <span class=\"string\">&#x27;robert&#x27;</span>, <span class=\"string\">&#x27;password&#x27;</span>, &#123;</span><br><span class=\"line\">\thost: <span class=\"string\">&#x27;localhost&#x27;</span>,</span><br><span class=\"line\">\tdialect: <span class=\"string\">&#x27;mysql&#x27;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 驗證 DB </span></span><br><span class=\"line\">sequelize</span><br><span class=\"line\">\t.authenticate()</span><br><span class=\"line\">\t.then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Connection has been established successfully.&#x27;</span>);</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.error(<span class=\"string\">&#x27;Unable to connect to the database:&#x27;</span>, err);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// define table field</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = sequelize.define(<span class=\"string\">&#x27;user&#x27;</span>, &#123;</span><br><span class=\"line\">\tfirstName: &#123;</span><br><span class=\"line\">\t\ttype: Sequelize.STRING,</span><br><span class=\"line\">\t\tallowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tlastName: &#123;</span><br><span class=\"line\">\t\ttype: Sequelize.STRING</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// timestamps: false,\t\t\t// 關掉產生 timestamp 欄位</span></span><br><span class=\"line\">\t<span class=\"comment\">// freezeTableName: true,\t// 關掉 自動複數檔案名</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// create tabel item</span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tUser.create(&#123;</span><br><span class=\"line\">\t\tfirstName: <span class=\"string\">&#x27;Bill&#x27;</span>,</span><br><span class=\"line\">\t\tlastName: <span class=\"string\">&#x27;Chen&#x27;</span></span><br><span class=\"line\">\t&#125;).then (<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;created!&#x27;</span>)</span><br><span class=\"line\">\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"get-modify-delete-table-item\"><a href=\"#get-modify-delete-table-item\" class=\"headerlink\" title=\"get/modify/delete table item\"></a>get/modify/delete table item</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// create tabel item</span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tUser.create(&#123;</span><br><span class=\"line\">\t\tfirstName: <span class=\"string\">&#x27;Bill&#x27;</span>,</span><br><span class=\"line\">\t\tlastName: <span class=\"string\">&#x27;Chen&#x27;</span></span><br><span class=\"line\">\t&#125;).then (<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;created!&#x27;</span>)</span><br><span class=\"line\">\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get tabel all item </span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\tUser.findAll().then( <span class=\"function\"><span class=\"params\">users</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;All user:&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(users,<span class=\"literal\">null</span>,<span class=\"number\">4</span>))</span><br><span class=\"line\">\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get table condition item</span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tUser.findAll(&#123;</span><br><span class=\"line\">\t\twhere: &#123;</span><br><span class=\"line\">\t\t\tfirstName: <span class=\"string\">&#x27;Bill2&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;).then( <span class=\"function\"><span class=\"params\">users</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(users[<span class=\"number\">0</span>].id, users[<span class=\"number\">0</span>].firstName)</span><br><span class=\"line\">\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get table one item</span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tUser.findOne(&#123;</span><br><span class=\"line\">\t\twhere: &#123;</span><br><span class=\"line\">\t\t\tfirstName: <span class=\"string\">&#x27;Bill2&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;).then( <span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(user.id, user.firstName)</span><br><span class=\"line\">\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// update table&#x27;s item </span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tUser.findOne(&#123;</span><br><span class=\"line\">\t\twhere: &#123;</span><br><span class=\"line\">\t\t\tfirstName: <span class=\"string\">&#x27;Bill2&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;).then( <span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tuser.update(&#123;</span><br><span class=\"line\">\t\t\tlastName: <span class=\"string\">&#x27;aaa&#x27;</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;).then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;done&#x27;</span>)\t</span><br><span class=\"line\">\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// detelet table&#x27;s item </span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tUser.findOne(&#123;</span><br><span class=\"line\">\t\twhere: &#123;</span><br><span class=\"line\">\t\t\tfirstName: <span class=\"string\">&#x27;Bill2&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;).then( <span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tuser.destroy()</span><br><span class=\"line\">\t&#125;).then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;done&#x27;</span>)\t</span><br><span class=\"line\">\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"related-db-control\"><a href=\"#related-db-control\" class=\"headerlink\" title=\"related db control\"></a>related db control</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// define another table field</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Comment = sequelize.define(<span class=\"string\">&#x27;comment&#x27;</span>, &#123;</span><br><span class=\"line\">\tcontent: &#123;</span><br><span class=\"line\">\t\ttype: Sequelize.STRING,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// set mapping to low level table</span></span><br><span class=\"line\">User.hasMany(Comment)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// create low level table item</span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tComment.create(&#123;</span><br><span class=\"line\">\t\tuserId:<span class=\"number\">3</span>,</span><br><span class=\"line\">\t\tcontent: <span class=\"string\">&#x27;Hi&#x27;</span></span><br><span class=\"line\">\t&#125;).then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;done&#x27;</span>)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set mapping to up level table</span></span><br><span class=\"line\">Comment.belongsTo(User)</span><br><span class=\"line\"><span class=\"comment\">// get low level item (include up level item)</span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\tComment.findOne(&#123;</span><br><span class=\"line\">\t\twhere: &#123;</span><br><span class=\"line\">\t\t\tcontent: <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tinclude: User</span><br><span class=\"line\">\t&#125;).then(<span class=\"function\"><span class=\"params\">comment</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(comment, <span class=\"literal\">null</span>, <span class=\"number\">4</span>)) <span class=\"comment\">// 排列較易閱讀</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(comment.id, comment.content)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125; )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get up level item (include low level item)</span></span><br><span class=\"line\">sequelize.sync().then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\tUser.findOne(&#123;</span><br><span class=\"line\">\t\twhere: &#123;</span><br><span class=\"line\">\t\t\tfirstName: <span class=\"string\">&#x27;Bill&#x27;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tinclude: Comment</span><br><span class=\"line\">\t&#125;).then(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(user.comments, <span class=\"literal\">null</span>, <span class=\"number\">4</span>)) <span class=\"comment\">// 排列較易閱讀</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Sequelize-CLI\"><a href=\"#Sequelize-CLI\" class=\"headerlink\" title=\"Sequelize CLI\"></a>Sequelize CLI</h4><h5 id=\"install-sequelize-cli\"><a href=\"#install-sequelize-cli\" class=\"headerlink\" title=\"install sequelize-cli\"></a>install sequelize-cli</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install </span></span><br><span class=\"line\">npm install sequelize-cli</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"init-sequeliz\"><a href=\"#init-sequeliz\" class=\"headerlink\" title=\"init sequeliz\"></a>init sequeliz</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># init sequeliz</span></span><br><span class=\"line\">npx sequelize-cli init</span><br></pre></td></tr></table></figure>\n\n<p>config/config.json<br>change db configuration</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;development&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;robert&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"string\">&quot;password&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;mydb2&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;test&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;database_test&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;production&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;database_production&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"create-model\"><a href=\"#create-model\" class=\"headerlink\" title=\"create model\"></a>create model</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># npx sequelize-cli model:generate --name User --attributes firstName:string,lastName:string,email:string</span></span><br><span class=\"line\"><span class=\"comment\"># add field user_level:integer</span></span><br><span class=\"line\"><span class=\"comment\"># npx sequelize-cli model:generate --name User --attributes username:string,password:string,nickname:string,user_level:integer</span></span><br><span class=\"line\"><span class=\"comment\"># npx sequelize-cli model:generate --name Comment --attributes content:string</span></span><br><span class=\"line\"><span class=\"comment\"># 欄位加滿,不然有時會有問題</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name User --attributes username:string,password:string,nickname:string,user_level:<span class=\"built_in\">integer</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name Comment --attributes content:text,UserId:<span class=\"built_in\">integer</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"migrate-generate-db-table\"><a href=\"#migrate-generate-db-table\" class=\"headerlink\" title=\"migrate (generate db table)\"></a>migrate (generate db table)</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 產生 table sequelizemeta, 存執行 log</span></span><br><span class=\"line\">npx sequelize-cli db:migrate</span><br><span class=\"line\"><span class=\"comment\"># if env is test </span></span><br><span class=\"line\"><span class=\"comment\"># npx sequelize-cli db:migrate --env test</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"為-model-加上關聯\"><a href=\"#為-model-加上關聯\" class=\"headerlink\" title=\"為 model 加上關聯\"></a>為 model 加上關聯</h5><p>./models/user.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  Model</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">sequelize, DataTypes</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">     * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">     * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">\t\t\tUser.hasMany(models.Comment)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  User.init(&#123;</span><br><span class=\"line\">    firstName: DataTypes.STRING,</span><br><span class=\"line\">    lastName: DataTypes.STRING,</span><br><span class=\"line\">    email: DataTypes.STRING</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    modelName: <span class=\"string\">&#x27;User&#x27;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> User;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>./models/comment.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  Model</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">sequelize, DataTypes</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Comment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">     * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">     * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">\t\t\tComment.belongsTo(models.User)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  Comment.init(&#123;</span><br><span class=\"line\">    content: DataTypes.STRING</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    modelName: <span class=\"string\">&#x27;Comment&#x27;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> Comment;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"create-table-item\"><a href=\"#create-table-item\" class=\"headerlink\" title=\"create table item\"></a>create table item</h5><p>index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./models&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> User = db.User</span><br><span class=\"line\"><span class=\"keyword\">const</span> Comment = db.Comment</span><br><span class=\"line\"></span><br><span class=\"line\">User.create(&#123;</span><br><span class=\"line\">\tfirstName: <span class=\"string\">&#x27;Bill&#x27;</span>,</span><br><span class=\"line\">\tlastName: <span class=\"string\">&#x27;Chen&#x27;</span></span><br><span class=\"line\">&#125;).then(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;done!&#x27;</span>)</span><br><span class=\"line\">&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(err.toString())\t</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"改造留言板\"><a href=\"#改造留言板\" class=\"headerlink\" title=\"改造留言板\"></a>改造留言板</h4><h5 id=\"data-操作\"><a href=\"#data-操作\" class=\"headerlink\" title=\"data 操作\"></a>data 操作</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 在 ejs 可直接使用</span></span><br><span class=\"line\">res.locals.isLogin = req.session.isLogin</span><br><span class=\"line\">res.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// get 傳入參數</span></span><br><span class=\"line\">id: req.params.id,</span><br><span class=\"line\"><span class=\"comment\">// post 傳入參數</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;\tcontent &#125; = req.body</span><br><span class=\"line\"><span class=\"comment\">// session 參數</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;\tusername,\tuserId&#125; = req.session</span><br><span class=\"line\"><span class=\"comment\">// flash</span></span><br><span class=\"line\">req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;請輸入完整內容!&#x27;</span>)</span><br><span class=\"line\">res.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// migration - set field unique</span></span><br><span class=\"line\">username: &#123;</span><br><span class=\"line\">\ttype: Sequelize.STRING,</span><br><span class=\"line\">\tunique: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// migration - add field</span></span><br><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add UserId</span></span><br><span class=\"line\">UserId: &#123;</span><br><span class=\"line\">  type: Sequelize.INTEGER</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// controller - findAll add order </span></span><br><span class=\"line\">Comment.findAll(&#123;</span><br><span class=\"line\">\tinclude: User,</span><br><span class=\"line\">\t<span class=\"comment\">// 加入 order</span></span><br><span class=\"line\">\torder: [</span><br><span class=\"line\">\t\t[<span class=\"string\">&#x27;id&#x27;</span>, <span class=\"string\">&#x27;DESC&#x27;</span>]</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// model 加上關聯</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">    * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">    * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">     <span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">\t\tUser.hasMany(models.Comment)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Comment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">    * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">    * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">\t\tComment.belongsTo(models.User)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"install-and-create-DB-migrate\"><a href=\"#install-and-create-DB-migrate\" class=\"headerlink\" title=\"install and create DB(migrate)\"></a>install and create DB(migrate)</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install sequelize</span><br><span class=\"line\">npm install sequelize-cli</span><br><span class=\"line\">npm install mysql2</span><br><span class=\"line\"><span class=\"comment\"># init</span></span><br><span class=\"line\">npx sequelize-cli init</span><br><span class=\"line\"><span class=\"comment\"># create model</span></span><br><span class=\"line\"><span class=\"comment\"># npx sequelize-cli model:generate --name User --attributes username:string,password:string,nickname:string</span></span><br><span class=\"line\"><span class=\"comment\"># npx sequelize-cli model:generate --name Comment --attributes content:text</span></span><br><span class=\"line\"><span class=\"comment\"># 欄位加滿,不然有時會有問題</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name User --attributes username:string,password:string,nickname:string,user_level:<span class=\"built_in\">integer</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name Comment --attributes content:text,UserId:<span class=\"built_in\">integer</span></span><br><span class=\"line\"><span class=\"comment\"># migrate </span></span><br><span class=\"line\">npx sequelize-cli db:migrate</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"add-user-id-for-comment\"><a href=\"#add-user-id-for-comment\" class=\"headerlink\" title=\"add user id for comment\"></a>add user id for comment</h5><p>./migrations/xxx-create-comment.js 加 user id</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  up: <span class=\"keyword\">async</span> (queryInterface, Sequelize) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> queryInterface.createTable(<span class=\"string\">&#x27;Comments&#x27;</span>, &#123;</span><br><span class=\"line\">      id: &#123;</span><br><span class=\"line\">        allowNull: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        autoIncrement: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        primaryKey: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        type: Sequelize.INTEGER</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      content: &#123;</span><br><span class=\"line\">        type: Sequelize.TEXT</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// add UserId</span></span><br><span class=\"line\">\t\t\tUserId: &#123;</span><br><span class=\"line\">        type: Sequelize.INTEGER</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      createdAt: &#123;</span><br><span class=\"line\">        allowNull: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        type: Sequelize.DATE</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      updatedAt: &#123;</span><br><span class=\"line\">        allowNull: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        type: Sequelize.DATE</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  down: <span class=\"keyword\">async</span> (queryInterface, Sequelize) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> queryInterface.dropTable(<span class=\"string\">&#x27;Comments&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"set-username-unique\"><a href=\"#set-username-unique\" class=\"headerlink\" title=\"set username unique\"></a>set username unique</h5><p>./migrations/xxx-create-comment.js set username unique</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">username: &#123;</span><br><span class=\"line\">\ttype: Sequelize.STRING,</span><br><span class=\"line\">\tunique: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"撤銷migrate-then-migrate\"><a href=\"#撤銷migrate-then-migrate\" class=\"headerlink\" title=\"撤銷migrate then migrate\"></a>撤銷migrate then migrate</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 撤銷 上一次</span></span><br><span class=\"line\">npx sequelize-cli db:migrate:undo</span><br><span class=\"line\"><span class=\"comment\"># 撤銷所有</span></span><br><span class=\"line\">npx sequelize-cli db:migrate:undo:all</span><br><span class=\"line\"><span class=\"comment\"># migrate </span></span><br><span class=\"line\">npx sequelize-cli db:migrate</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"model-加上關聯\"><a href=\"#model-加上關聯\" class=\"headerlink\" title=\"model 加上關聯\"></a>model 加上關聯</h5><p>./model/user.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  Model</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">sequelize, DataTypes</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">     * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">     * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">\t\t\tUser.hasMany(models.Comment)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  User.init(&#123;</span><br><span class=\"line\">    username: DataTypes.STRING,</span><br><span class=\"line\">    password: DataTypes.STRING,</span><br><span class=\"line\">    nickname: DataTypes.STRING</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    modelName: <span class=\"string\">&#x27;User&#x27;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  ret</span><br></pre></td></tr></table></figure>\n\n<p>./model/comment.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  Model</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">sequelize, DataTypes</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Comment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">     * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">     * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">\t\t\tComment.belongsTo(models.User)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  Comment.init(&#123;</span><br><span class=\"line\">    content: DataTypes.TEXT</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    modelName: <span class=\"string\">&#x27;Comment&#x27;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> Comment;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"index-js\"><a href=\"#index-js\" class=\"headerlink\" title=\"index.js\"></a>index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> session = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express-session&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> flash = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;connect-flash&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/user&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> commentController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/comment&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">app.use(flash())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\">app.use(session(&#123;</span><br><span class=\"line\">  secret: <span class=\"string\">&#x27;keyboard cat&#x27;</span>,</span><br><span class=\"line\">  resave: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  saveUninitialized: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add global variable - use middleware</span></span><br><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tres.locals.userId = req.session.userId</span><br><span class=\"line\">\tres.locals.username = req.session.username</span><br><span class=\"line\">\t<span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">\tres.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br><span class=\"line\">\tnext()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">redirectBack</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">\tres.redirect(<span class=\"string\">&#x27;back&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, commentController.index) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/register&#x27;</span>, userController.register)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/register&#x27;</span>, userController.handleRegister, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/login&#x27;</span>, userController.login)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/login&#x27;</span>, userController.handleLogin, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/logout&#x27;</span>, userController.logout)</span><br><span class=\"line\"></span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/comments&#x27;</span>, commentController.add)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/comments_delete/:id&#x27;</span>, commentController.delete)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/comments_update/:id&#x27;</span>, commentController.update)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/comments_update/:id&#x27;</span>, commentController.handelUpdate)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Example app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"view’s-template\"><a href=\"#view’s-template\" class=\"headerlink\" title=\"view’s template\"></a>view’s template</h5><p>template/head.ejs</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Bootstrap CSS --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css&quot;</span> <span class=\"attr\">integrity</span>=<span class=\"string\">&quot;sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l&quot;</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">&quot;anonymous&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>template/navbar.ejs</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar navbar-expand-lg navbar-light bg-light mb-3&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar-brand&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/&quot;</span>&gt;</span>留言板<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar-toggler&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">data-toggle</span>=<span class=\"string\">&quot;collapse&quot;</span> <span class=\"attr\">data-target</span>=<span class=\"string\">&quot;#navbarNavAltMarkup&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">aria-controls</span>=<span class=\"string\">&quot;navbarNavAltMarkup&quot;</span> <span class=\"attr\">aria-expanded</span>=<span class=\"string\">&quot;false&quot;</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Toggle navigation&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar-toggler-icon&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;collapse navbar-collapse justify-content-end&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;navbarNavAltMarkup&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar-nav&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t&lt;% if (userId) &#123; %&gt;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-link&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/logout&quot;</span>&gt;</span>登出<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t&lt;% &#125; else &#123; %&gt;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-link&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/register&quot;</span>&gt;</span>註冊<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;nav-link&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/login&quot;</span>&gt;</span>登入<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t&lt;% &#125; %&gt;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"view\"><a href=\"#view\" class=\"headerlink\" title=\"view\"></a>view</h5><p>user/index.ejs</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/index.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/head&#x27;) %&gt;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/navbar&#x27;) %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t&lt;% if(errorMessage &amp;&amp; errorMessage.length &gt; 0) &#123;  %&gt; </span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;alert alert-danger&quot;</span> <span class=\"attr\">role</span>=<span class=\"string\">&quot;alert&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t&lt;%= errorMessage %&gt;</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t&lt;% &#125; %&gt; </span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&lt;% if (userId) &#123; %&gt;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h3&quot;</span>&gt;</span>hello, &lt;%= username %&gt;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span>  <span class=\"attr\">class</span>=<span class=\"string\">&quot;mb-3&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/comments&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;content&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">rows</span>=<span class=\"string\">&quot;3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t\t&lt;% &#125; %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&lt;% comments.forEach( function(comment) &#123; %&gt;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card border-light mb-3&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-header&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t&lt;%= comment.User.nickname %&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;% if (userId == comment.UserId) &#123; %&gt;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/comments_delete/&lt;%= comment.id %&gt;&quot;</span>&gt;</span>刪除<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/comments_update/&lt;%= comment.id %&gt;&quot;</span>&gt;</span>修改<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t&lt;% &#125; %&gt;</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-text&quot;</span>&gt;</span>&lt;%= comment.content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t&lt;% &#125;) %&gt;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>user/register.ejs</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/register.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/head&#x27;) %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/navbar&#x27;) %&gt; </span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t&lt;% if(errorMessage &amp;&amp; errorMessage.length &gt; 0) &#123;  %&gt; </span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;alert alert-danger&quot;</span> <span class=\"attr\">role</span>=<span class=\"string\">&quot;alert&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t&lt;%= errorMessage %&gt;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t&lt;% &#125; %&gt; </span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/register&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group row&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;inputUsername&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-2 col-form-label&quot;</span>&gt;</span>username<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&quot; <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inputUsername&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group row&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;inputPassword&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-2 col-form-label&quot;</span>&gt;</span>password<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inputPassword&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;password&#x27;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group row&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;inputUsername&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-2 col-form-label&quot;</span>&gt;</span>nickname<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&quot; <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inputUsername&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;nickname&#x27;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>註冊<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>user/login.ejs</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/login.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/head&#x27;) %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/navbar&#x27;) %&gt; </span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t&lt;% if(errorMessage &amp;&amp; errorMessage.length &gt; 0) &#123;  %&gt; </span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;alert alert-danger&quot;</span> <span class=\"attr\">role</span>=<span class=\"string\">&quot;alert&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t&lt;%= errorMessage %&gt;</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t&lt;% &#125; %&gt; </span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/login&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group row&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;inputUsername&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-2 col-form-label&quot;</span>&gt;</span>username<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&quot; <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inputUsername&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group row&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;inputPassword&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-2 col-form-label&quot;</span>&gt;</span>password<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-10&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inputPassword&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;password&#x27;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>登入<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>user/update.ejs</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ./views/user/update.ejs --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/head&#x27;) %&gt; </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t&lt;%- include(&#x27;../template/navbar&#x27;) %&gt; </span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span>  <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/comments_update/&lt;%= comment.id%&gt;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;content&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">rows</span>=<span class=\"string\">&quot;3&quot;</span>&gt;</span>&lt;%= comment.content %&gt;<span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"control\"><a href=\"#control\" class=\"headerlink\" title=\"control\"></a>control</h5><p>controllers/user.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> User = db.User</span><br><span class=\"line\"><span class=\"comment\">// add bcrypt</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bcrypt = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;bcrypt&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> saltRounds = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = &#123;</span><br><span class=\"line\">\tregister: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;user/register&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandleRegister: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;\tusername,\tpassword,\tnickname&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!username || !password || !nickname) &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;缺少必要欄位!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tbcrypt.genSalt(saltRounds, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, salt</span>) </span>&#123;</span><br><span class=\"line\">\t\t\tbcrypt.hash(password, salt, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, hash</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\tUser.create(&#123;</span><br><span class=\"line\">\t\t\t\t\tusername: username,</span><br><span class=\"line\">\t\t\t\t\tnickname: nickname,</span><br><span class=\"line\">\t\t\t\t\tpassword: hash</span><br><span class=\"line\">\t\t\t\t&#125;).then(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t\treq.session.userId = user.id</span><br><span class=\"line\">\t\t\t\t\treq.session.username = user.username</span><br><span class=\"line\">\t\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tlogin: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;user/login&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandleLogin: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;username,password&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!username || !password) &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;該填未填!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tUser.findOne(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\tusername: username</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (!user) &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;無此帳號!&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tbcrypt.compare(password, user.password, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, isSuccess</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err || (!isSuccess)) &#123;</span><br><span class=\"line\">\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;密碼錯誤!&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// console.log(user)</span></span><br><span class=\"line\">\t\t\t\treq.session.userId = user.id</span><br><span class=\"line\">\t\t\t\treq.session.username = user.username</span><br><span class=\"line\">\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tlogout: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\treq.session.userId = <span class=\"literal\">null</span></span><br><span class=\"line\">\t\treq.session.username = <span class=\"literal\">null</span></span><br><span class=\"line\">\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = userController</span><br></pre></td></tr></table></figure>\n\n<p>controllers/comment.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/comment.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> User = db.User</span><br><span class=\"line\"><span class=\"keyword\">const</span> Comment = db.Comment</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> commentController = &#123;</span><br><span class=\"line\">\tadd: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// get body data</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// username,\tuserId 應只在 ejs 有作用</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;\tusername,\tuserId&#125; = req.session</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;\tcontent &#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!username || !content) &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;請輸入完整內容!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> res.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tComment.create(&#123;</span><br><span class=\"line\">\t\t\tUserId: userId,</span><br><span class=\"line\">\t\t\tcontent: content</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tindex: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tComment.findAll(&#123;</span><br><span class=\"line\">\t\t\t\tinclude: User,</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// 加入 order</span></span><br><span class=\"line\">\t\t\t\torder: [</span><br><span class=\"line\">\t\t\t\t\t[<span class=\"string\">&#x27;id&#x27;</span>, <span class=\"string\">&#x27;DESC&#x27;</span>]</span><br><span class=\"line\">\t\t\t\t]</span><br><span class=\"line\">\t\t\t&#125;).then(<span class=\"function\"><span class=\"params\">comments</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\tres.render(<span class=\"string\">&#x27;user/index&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\t\tcomments</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t.catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"keyword\">delete</span>: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tComment.findOne(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\tid: req.params.id,</span><br><span class=\"line\">\t\t\t\tUserId: req.session.userId</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">comment</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// return 與 no return 無差別</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// return comment.destroy()</span></span><br><span class=\"line\">\t\t\tcomment.destroy()</span><br><span class=\"line\">\t\t&#125;).then( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tupdate: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tComment.findOne(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\tid: req.params.id,</span><br><span class=\"line\">\t\t\t\tUserId: req.session.userId</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">comment</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;user/update&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\tcomment</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandelUpdate: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tComment.findOne(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\tid: req.params.id,</span><br><span class=\"line\">\t\t\t\tUserId: req.session.userId</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">comment</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tcomment.update(&#123;</span><br><span class=\"line\">\t\t\t\tcontent: req.body.content</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t\t.catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = commentController</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Ngainx-and-PM2\"><a href=\"#Ngainx-and-PM2\" class=\"headerlink\" title=\"Ngainx and PM2\"></a>Ngainx and PM2</h3><h4 id=\"PM2\"><a href=\"#PM2\" class=\"headerlink\" title=\"PM2\"></a>PM2</h4><h5 id=\"command\"><a href=\"#command\" class=\"headerlink\" title=\"command\"></a>command</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install pm2 -g</span><br><span class=\"line\"><span class=\"comment\"># show pm2 status</span></span><br><span class=\"line\">pm2 ls</span><br><span class=\"line\"><span class=\"comment\"># run index.js(node.js)</span></span><br><span class=\"line\">pm2 start index.js</span><br><span class=\"line\"><span class=\"comment\"># get process log</span></span><br><span class=\"line\">pm2 <span class=\"built_in\">log</span> 0</span><br><span class=\"line\"><span class=\"comment\"># get process information</span></span><br><span class=\"line\">pm2 info 0</span><br><span class=\"line\"><span class=\"comment\"># stop process information</span></span><br><span class=\"line\">pm2 stop 0</span><br><span class=\"line\"><span class=\"comment\"># restart process information</span></span><br><span class=\"line\">pm2 restart 0</span><br><span class=\"line\"><span class=\"comment\"># delete process information</span></span><br><span class=\"line\">pm2 delete 0</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><h5 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install nginx</span></span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install nginx</span><br><span class=\"line\"><span class=\"comment\"># install node.js</span></span><br><span class=\"line\">sudo apt-get install nodejs</span><br><span class=\"line\">sudo apt install npm</span><br><span class=\"line\">sudo npm install -g npm@latest <span class=\"comment\"># in need - install lasted version</span></span><br><span class=\"line\"><span class=\"comment\"># dump status and start mginx</span></span><br><span class=\"line\">sudo systemctl status nginx</span><br><span class=\"line\">sudo systemctl start nginx</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"run-web-server\"><a href=\"#run-web-server\" class=\"headerlink\" title=\"run web server\"></a>run web server</h5><p>index.js</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const express &#x3D; require(&#39;express&#39;)</span><br><span class=\"line\">const app &#x3D; express()</span><br><span class=\"line\">const port &#x3D; 3001</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(&#39;&#x2F;&#39;, (req,res) &#x3D;&gt;&#123;</span><br><span class=\"line\">                res.send(&#39;Hello, 3001....&#39;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, () &#x3D;&gt; &#123;</span><br><span class=\"line\">                console.log(&#96;Example app listening at http:&#x2F;&#x2F;localhost:$&#123;port&#125;&#96;)&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>index2.js</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const express &#x3D; require(&#39;express&#39;)</span><br><span class=\"line\">const app &#x3D; express()</span><br><span class=\"line\">const port &#x3D; 3002</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(&#39;&#x2F;&#39;, (req,res) &#x3D;&gt;&#123;</span><br><span class=\"line\">                res.send(&#39;Hi, 3002....&#39;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, () &#x3D;&gt; &#123;</span><br><span class=\"line\">                console.log(&#96;Example app listening at http:&#x2F;&#x2F;localhost:$&#123;port&#125;&#96;)&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># start web server</span></span><br><span class=\"line\">pm2 start index.js</span><br><span class=\"line\">pm2 start index2.js</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"set-for-DNS\"><a href=\"#set-for-DNS\" class=\"headerlink\" title=\"set for DNS\"></a>set for DNS</h4><div style=\"maxwidth:1000px\">\n    <img src=\"/2021/08/03/express-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h5 id=\"configure-nginx-to-web-server\"><a href=\"#configure-nginx-to-web-server\" class=\"headerlink\" title=\"configure nginx to web server\"></a>configure nginx to web server</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/nginx/sites-available/aaa.website</span><br><span class=\"line\">sudo vim /etc/nginx/sites-available/bbb.website</span><br></pre></td></tr></table></figure>\n\n<p>aaa.website</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">       listen <span class=\"number\">80</span>;</span><br><span class=\"line\">       server_name aaa.hot5656.website;</span><br><span class=\"line\"></span><br><span class=\"line\">       location / &#123;</span><br><span class=\"line\">         proxy_pass http:<span class=\"comment\">//127.0.0.1:3001;</span></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>bbb.website</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">       listen 80;</span><br><span class=\"line\">       server_name bbb.hot5656.website;</span><br><span class=\"line\"></span><br><span class=\"line\">       location &#x2F; &#123;</span><br><span class=\"line\">         proxy_pass http:&#x2F;&#x2F;127.0.0.1:3002;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>add soft link </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo ln -s /etc/nginx/sites-available/aaa.website /etc/nginx/sites-enabled/</span><br><span class=\"line\">sudo ln -s /etc/nginx/sites-available/bbb.website /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"reload-nginx\"><a href=\"#reload-nginx\" class=\"headerlink\" title=\"reload nginx\"></a>reload nginx</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo systemctl reload nginx</span><br><span class=\"line\">sudo systemctl status nginx</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Heroku\"><a href=\"#Heroku\" class=\"headerlink\" title=\"Heroku\"></a>Heroku</h3><h4 id=\"develop-node-js-no-db\"><a href=\"#develop-node-js-no-db\" class=\"headerlink\" title=\"develop node.js - no db\"></a>develop node.js - no db</h4><h5 id=\"install-Heroku-CLI\"><a href=\"#install-Heroku-CLI\" class=\"headerlink\" title=\"install Heroku CLI\"></a>install <a href=\"https://devcenter.heroku.com/articles/heroku-cli\">Heroku CLI</a></h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku -v</span><br><span class=\"line\">node -v</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"package-json-add-“script-start”-and-“engines”\"><a href=\"#package-json-add-“script-start”-and-“engines”\" class=\"headerlink\" title=\"package.json add “script start” and “engines”\"></a>package.json add “script start” and “engines”</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;start&quot;</span>: <span class=\"string\">&quot;node app.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"string\">&quot;engines&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;node&quot;</span>: <span class=\"string\">&quot;14.x&quot;</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"set-env-port\"><a href=\"#set-env-port\" class=\"headerlink\" title=\"set env port\"></a>set env port</h5><p>app.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">5001</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"run-heroku-local-test\"><a href=\"#run-heroku-local-test\" class=\"headerlink\" title=\"run heroku local test\"></a>run heroku local test</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku <span class=\"built_in\">local</span> web</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"develop-to-heroku\"><a href=\"#develop-to-heroku\" class=\"headerlink\" title=\"develop to heroku\"></a>develop to heroku</h5><p>add .gitignore</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">node_modules&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>git init and commit</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git init </span><br><span class=\"line\">git add .</span><br><span class=\"line\">git status</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;1st commit&quot;</span></span><br><span class=\"line\">git show-ref</span><br></pre></td></tr></table></figure>\n\n<p>push to heroku</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># login </span></span><br><span class=\"line\">heroku login</span><br><span class=\"line\"><span class=\"comment\"># create app</span></span><br><span class=\"line\">heroku create</span><br><span class=\"line\"><span class=\"comment\"># list app</span></span><br><span class=\"line\">heroku lis</span><br><span class=\"line\"><span class=\"comment\"># delete app - if need detele other app</span></span><br><span class=\"line\"><span class=\"comment\"># heroku apps:destroy afternoon-plains-5751</span></span><br><span class=\"line\">git remote -v</span><br><span class=\"line\">\theroku  https://git.heroku.com/mysterious-ravine-06292.git (fetch)</span><br><span class=\"line\">\theroku  https://git.heroku.com/mysterious-ravine-06292.git (push)</span><br><span class=\"line\"><span class=\"comment\"># push to heroku</span></span><br><span class=\"line\">git push heroku master</span><br><span class=\"line\"><span class=\"comment\"># open by local browser</span></span><br><span class=\"line\">heroku open</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"develop-node-js-include-db\"><a href=\"#develop-node-js-include-db\" class=\"headerlink\" title=\"develop node.js - include db\"></a>develop node.js - include db</h4><h5 id=\"install-Heroku-CLI-1\"><a href=\"#install-Heroku-CLI-1\" class=\"headerlink\" title=\"install Heroku CLI\"></a>install <a href=\"https://devcenter.heroku.com/articles/heroku-cli\">Heroku CLI</a></h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku -v</span><br><span class=\"line\">node -v</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"package-json-add-“script-start”-and-“engines”-1\"><a href=\"#package-json-add-“script-start”-and-“engines”-1\" class=\"headerlink\" title=\"package.json add “script start” and “engines”\"></a>package.json add “script start” and “engines”</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;start&quot;</span>: <span class=\"string\">&quot;node index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"string\">&quot;engines&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;node&quot;</span>: <span class=\"string\">&quot;14.x&quot;</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"set-env-port-1\"><a href=\"#set-env-port-1\" class=\"headerlink\" title=\"set env port\"></a>set env port</h5><p>index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"run-heroku-local-test-1\"><a href=\"#run-heroku-local-test-1\" class=\"headerlink\" title=\"run heroku local test\"></a>run heroku local test</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku <span class=\"built_in\">local</span> web</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"develop-to-heroku-1\"><a href=\"#develop-to-heroku-1\" class=\"headerlink\" title=\"develop to heroku\"></a>develop to heroku</h5><p>add .gitignore</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">node_modules&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>git init </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git status</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;1st commit&quot;</span></span><br><span class=\"line\">git show-ref</span><br></pre></td></tr></table></figure>\n\n<p>push to heroku</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># login - if never login</span></span><br><span class=\"line\"><span class=\"comment\"># heroku login</span></span><br><span class=\"line\"><span class=\"comment\"># create app</span></span><br><span class=\"line\">heroku create</span><br><span class=\"line\"><span class=\"comment\"># list app - if want to see other app</span></span><br><span class=\"line\"><span class=\"comment\"># delete app - if need detele other app</span></span><br><span class=\"line\"><span class=\"comment\"># heroku lis</span></span><br><span class=\"line\">git remote -v</span><br><span class=\"line\">\theroku  https://git.heroku.com/mysterious-ravine-06292.git (fetch)</span><br><span class=\"line\">\theroku  https://git.heroku.com/mysterious-ravine-06292.git (push)</span><br><span class=\"line\"><span class=\"comment\"># push to heroku</span></span><br><span class=\"line\">git push heroku master</span><br><span class=\"line\"><span class=\"comment\"># open by local browser</span></span><br><span class=\"line\">heroku open</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"develop-db-for-heroku\"><a href=\"#develop-db-for-heroku\" class=\"headerlink\" title=\"develop db for heroku\"></a>develop db for heroku</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># show logs for debug</span></span><br><span class=\"line\">heroku logs -–tail</span><br><span class=\"line\"><span class=\"comment\"># add db</span></span><br><span class=\"line\">heroku addons:create cleardb:ignite</span><br></pre></td></tr></table></figure>\n\n<p>check models/index.js see use_env_variable for db parameter</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">let sequelize;</span><br><span class=\"line\">if (config.use_env_variable) &#123;</span><br><span class=\"line\">  sequelize = new Sequelize(process.env[config.use_env_variable], config);</span><br><span class=\"line\">&#125; else &#123;</span><br><span class=\"line\">  sequelize = new Sequelize(config.database, config.username, config.password, config);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>check heroku db env name</p>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/08/03/express-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<p>set config/config.json</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;production&quot;: &#123;</span><br><span class=\"line\">  &quot;username&quot;: &quot;root&quot;,</span><br><span class=\"line\">  &quot;password&quot;: null,</span><br><span class=\"line\">  &quot;database&quot;: &quot;database_production&quot;,</span><br><span class=\"line\">  &quot;host&quot;: &quot;127.0.0.1&quot;,</span><br><span class=\"line\">  &quot;dialect&quot;: &quot;mysql&quot;,</span><br><span class=\"line\">  &quot;use_env_variable&quot;: &quot;CLEARDB_DATABASE_URL&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>commit + push to heroku</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;add db config&quot;</span><br><span class=\"line\">git push heroku master</span><br></pre></td></tr></table></figure>\n\n<p>add migrate script to package.json</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">  &quot;db:migrate&quot;: &quot;npx sequelize db:migrate&quot;,</span><br><span class=\"line\">  &quot;start&quot;: &quot;npm run db:migrate &amp;&amp; node index.js&quot;,</span><br><span class=\"line\">  &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<p>commit + push to heroku</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;add db migrate&quot;</span></span><br><span class=\"line\">git push heroku master</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"heidisql-link-to-heroku-db\"><a href=\"#heidisql-link-to-heroku-db\" class=\"headerlink\" title=\"heidisql link to heroku db\"></a>heidisql link to heroku db</h5><div style=\"width:500px\">\n    <img src=\"/2021/08/03/express-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n\n<h3 id=\"AWS-部署-node-js-express-nginx\"><a href=\"#AWS-部署-node-js-express-nginx\" class=\"headerlink\" title=\"AWS 部署(node.js + express + nginx)\"></a>AWS 部署(node.js + express + nginx)</h3><h4 id=\"install-nginx-node-js-npm-pm2\"><a href=\"#install-nginx-node-js-npm-pm2\" class=\"headerlink\" title=\"install nginx, node.js, npm, pm2\"></a>install nginx, node.js, npm, pm2</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install nginx</span></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install nginx</span><br><span class=\"line\"><span class=\"comment\"># 順序有關係 - install node,npmx</span></span><br><span class=\"line\">sudo apt-get install nodejs</span><br><span class=\"line\">sudo apt-get install npm</span><br><span class=\"line\"><span class=\"comment\"># insuall pm2</span></span><br><span class=\"line\">sudo npm install pm2 -g </span><br><span class=\"line\"><span class=\"comment\"># found error , upgrade npm</span></span><br><span class=\"line\">sudo npm install -g npm@latest</span><br><span class=\"line\">sudo npm install pm2 -g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-mysql\"><a href=\"#install-mysql\" class=\"headerlink\" title=\"install mysql\"></a>install mysql</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Install MySQL</span></span><br><span class=\"line\">sudo apt install mysql-server</span><br><span class=\"line\"><span class=\"comment\"># Run the security script </span></span><br><span class=\"line\">sudo mysql_secure_installation</span><br><span class=\"line\"><span class=\"comment\"># Creating MySQL User (robert)</span></span><br><span class=\"line\">sudo mysql</span><br><span class=\"line\">mysql&gt; CREATE USER <span class=\"string\">&#x27;robert&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class=\"string\">&#x27;passwrod&#x27;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.02 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更改 root password Password Plugin to mysql_native_password for remote login</span></span><br><span class=\"line\">mysql&gt; ALTER USER <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class=\"string\">&#x27;passwrod&#x27;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 授予 user 權限</span></span><br><span class=\"line\">mysql&gt; GRANT ALL  ON mydb2.* TO <span class=\"string\">&#x27;robert&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># create database - 特別要用反引號</span></span><br><span class=\"line\">mysql&gt; CREATE DATABASE `mydb2`;</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># free previous command cache </span></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; <span class=\"built_in\">exit</span></span><br><span class=\"line\">Bye</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"其他-app-連至-MySQL\"><a href=\"#其他-app-連至-MySQL\" class=\"headerlink\" title=\"其他 app 連至 MySQL\"></a>其他 app 連至 MySQL</h4><h5 id=\"Inbound-Rules-新增-HTTP-TCP-port-3306\"><a href=\"#Inbound-Rules-新增-HTTP-TCP-port-3306\" class=\"headerlink\" title=\"Inbound Rules 新增 HTTP TCP port:3306\"></a>Inbound Rules 新增 HTTP TCP port:3306</h5><div style=\"maxwidth:1000px\">\n    <img src=\"/2021/08/03/express-1/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<h5 id=\"mask-bind-address-允許連線主機\"><a href=\"#mask-bind-address-允許連線主機\" class=\"headerlink\" title=\"mask bind-address(允許連線主機)\"></a>mask bind-address(允許連線主機)</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class=\"line\"><span class=\"comment\"># --- 原來</span></span><br><span class=\"line\">bind-address          = 127.0.0.1</span><br><span class=\"line\"><span class=\"comment\"># --- 修改後</span></span><br><span class=\"line\"><span class=\"comment\"># bind-address          = 127.0.0.1</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"root-localhost-改成\"><a href=\"#root-localhost-改成\" class=\"headerlink\" title=\"root localhost 改成 %\"></a>root localhost 改成 %</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo mysql -u root -p</span><br><span class=\"line\">Enter password:</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SELECT user,plugin,host FROM mysql.user;</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| user             | plugin                | host      |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| debian-sys-maint | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.infoschema | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.session    | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.sys        | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| phpmyadmin       | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| robert           | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| root             | mysql_native_password | localhost |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t7 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; use mysql;</span><br><span class=\"line\">\tReading table information <span class=\"keyword\">for</span> completion of table and column names</span><br><span class=\"line\">\tYou can turn off this feature to get a quicker startup with -A</span><br><span class=\"line\">\tDatabase changed</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; update user <span class=\"built_in\">set</span> host =<span class=\"string\">&#x27;%&#x27;</span><span class=\"built_in\">where</span> user =<span class=\"string\">&#x27;root&#x27;</span> and host =<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\">\tQuery OK, 1 row affected (0.01 sec)</span><br><span class=\"line\">\tRows matched: 1  Changed: 1  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SELECT user,plugin,host FROM mysql.user;</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| user             | plugin                | host      |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| root             | mysql_native_password | %         |</span><br><span class=\"line\">\t| debian-sys-maint | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.infoschema | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.session    | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.sys        | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| phpmyadmin       | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| robert           | caching_sha2_password | localhost |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t7 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; flush privileges;</span><br><span class=\"line\">\tQuery OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; quit</span><br><span class=\"line\">\tBye</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># restart mysql</span></span><br><span class=\"line\">sudo systemctl restart mysql</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"heidisq-port-3306-setting\"><a href=\"#heidisq-port-3306-setting\" class=\"headerlink\" title=\"heidisq port 3306 setting\"></a>heidisq port 3306 setting</h5><div style=\"width:500px\">\n    <img src=\"/2021/08/03/express-1/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<h4 id=\"install-and-start-app\"><a href=\"#install-and-start-app\" class=\"headerlink\" title=\"install and start app\"></a>install and start app</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ftp load code ex3-sequelize</span></span><br><span class=\"line\"><span class=\"comment\"># install module and migrate db</span></span><br><span class=\"line\">npm install</span><br><span class=\"line\">sudo npx sequelize-cli db:migrate</span><br><span class=\"line\"><span class=\"comment\"># ftp load code ex3-sequelize</span></span><br><span class=\"line\">npm install</span><br><span class=\"line\">sudo npx sequelize-cli db:migrate</span><br><span class=\"line\"><span class=\"comment\"># fireware open port 3000 and 5000 for app using</span></span><br><span class=\"line\"><span class=\"comment\"># start app</span></span><br><span class=\"line\">~/ex3-sequelize$ pm2 start index.js</span><br><span class=\"line\">~/blog$ pm2 start index.js</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"run-nginx\"><a href=\"#run-nginx\" class=\"headerlink\" title=\"run nginx\"></a>run nginx</h4><p>configure nginx to web server</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/nginx/sites-available/aaa.website</span><br><span class=\"line\">sudo vim /etc/nginx/sites-available/bbb.website</span><br></pre></td></tr></table></figure>\n\n<p>aaa.website</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">       listen <span class=\"number\">80</span>;</span><br><span class=\"line\">       server_name aaa.hot5656.website;</span><br><span class=\"line\"></span><br><span class=\"line\">       location / &#123;</span><br><span class=\"line\">         proxy_pass http:<span class=\"comment\">//127.0.0.1:3000;</span></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>bbb.website</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">       listen <span class=\"number\">80</span>;</span><br><span class=\"line\">       server_name bbb.hot5656.website;</span><br><span class=\"line\"></span><br><span class=\"line\">       location / &#123;</span><br><span class=\"line\">         proxy_pass http:<span class=\"comment\">//127.0.0.1:5000;</span></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>add soft link </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo ln -s /etc/nginx/sites-available/aaa.website /etc/nginx/sites-enabled/</span><br><span class=\"line\">sudo ln -s /etc/nginx/sites-available/bbb.website /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure>\n\n<p>reload nginx </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo systemctl reload nginx</span><br><span class=\"line\"><span class=\"comment\"># check nginx log in need</span></span><br><span class=\"line\">sudo nano /var/<span class=\"built_in\">log</span>/nginx/error.log</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"npm-mysql\"><a href=\"#npm-mysql\" class=\"headerlink\" title=\"npm mysql\"></a>npm mysql</h3><h4 id=\"example-1\"><a href=\"#example-1\" class=\"headerlink\" title=\"example #1\"></a>example #1</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install mysql</span></span><br><span class=\"line\">npm install mysql</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// db.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mysql      = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mysql&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> connection = mysql.createConnection(&#123;</span><br><span class=\"line\">  host     : <span class=\"string\">&#x27;localhost&#x27;</span>,</span><br><span class=\"line\">  user     : <span class=\"string\">&#x27;robert&#x27;</span>,</span><br><span class=\"line\">  password : <span class=\"string\">&#x27;password&#x27;</span>,</span><br><span class=\"line\">  database : <span class=\"string\">&#x27;app&#x27;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"> </span><br><span class=\"line\">connection.connect();</span><br><span class=\"line\"> </span><br><span class=\"line\">connection.query(<span class=\"string\">&#x27;SELECT * from todos&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, results, fields</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (error) <span class=\"keyword\">throw</span> error;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].content);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"> </span><br><span class=\"line\">connection.end();</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://expressjs.com/\">Express</a></li>\n<li><a href=\"https://www.npmjs.com/package/mysql\">npm mysql</a></li>\n<li><a href=\"https://expressjs.com/zh-tw/guide/using-middleware.html\">Express 中介軟體</a></li>\n<li><a href=\"http://expressjs.com/en/resources/middleware/body-parser.html\">body-parser</a></li>\n<li><a href=\"https://www.npmjs.com/package/connect-flash\">connect-flash</a></li>\n<li><a href=\"https://www.npmjs.com/package/bcrypt\">bcrypt</a></li>\n<li><a href=\"https://sequelize.org/\">Sequelize</a></li>\n<li><a href=\"https://www.npmjs.com/package/sequelize-cli\">sequelize/cli</a></li>\n<li><a href=\"https://pm2.keymetrics.io/docs/usage/quick-start/\">PM2</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04\">How To Install Nginx on Ubuntu 20.04</a></li>\n<li><a href=\"https://devcenter.heroku.com/articles/getting-started-with-nodejs?singlepage=true\">Getting Started on Heroku with Node.js</a></li>\n<li><a href=\"https://devcenter.heroku.com/articles/cleardb\">Heroku - ClearDB MySQL</a></li>\n<li><a href=\"https://www.npmjs.com/package/cors\">npm CORS</a></li>\n</ul>\n","categories":["Back End"],"tags":["node.js","express"]},{"title":"HTML 說明","url":"/2021/05/17/html-1/","content":"<h3 id=\"說明\"><a href=\"#說明\" class=\"headerlink\" title=\"說明\"></a>說明</h3><ul>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/Security/Same-origin_policy\">同源政策 (Same-origin policy)</a><ul>\n<li>跨來源寫(Cross-origin writes)通常被允許，例如有連結、重新導向以及表單送出。少數某些HTTP請求需要先導請求。</li>\n<li>跨來源嵌入(Cross-origin embedding)通常被允許。</li>\n<li>跨來源讀取(Cross-origin read) 通常不被允許，不過通常可以藉由嵌入來繞道讀取，例如嵌入影像寬高讀取、嵌入程式碼或嵌入資源。</li>\n</ul>\n</li>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/HTTP/CORS\">跨源資源共享（CORS）</a><ul>\n<li>簡單請求</li>\n<li>Preflight Request(預檢請求)<br>  有時會看到發兩次 request,因為只要發送請求到不同 origin 就會有 cors 的問題,所以 server 必須先確定 client 端是合法請求，也就是,Preflighted 要先發一次 request 去驗證是否合法 domain,成功了才能發真正的 request</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"SEO-Search-engine-optimization-搜尋引擎優化-與-meta-標籤\"><a href=\"#SEO-Search-engine-optimization-搜尋引擎優化-與-meta-標籤\" class=\"headerlink\" title=\"SEO(Search engine optimization)搜尋引擎優化 與 meta 標籤\"></a>SEO(Search engine optimization)搜尋引擎優化 與 meta 標籤</h3><ul>\n<li><a href=\"https://www.tripadvisor.com.tw/\">Tripadvisor</a></li>\n<li><a href=\"https://ogp.me/\">The Open Graph protocol</a> : Facebook 使用</li>\n<li><a href=\"https://developers.facebook.com/tools/debug/?locale=zh_TW\">facebook for developers</a> : Facebook og 偵錯</li>\n<li><a href=\"https://json-ld.org/\">JSON-LD</a> : JSON for Linking Data(google search 有用)</li>\n<li><a href=\"https://search.google.com/search-console/welcome?hl=zh-TW\">Google Search Console</a> : 網站搜尋分析</li>\n</ul>\n<span id=\"more\"></span>\n\n<h4 id=\"一般\"><a href=\"#一般\" class=\"headerlink\" title=\"一般\"></a>一般</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- title, keywords,  description--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>四海遊龍 (中山區) - 餐廳/美食評論 - Tripadvisor<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;keywords&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;中山區四海遊龍, 餐廳, 餐廳評論, 食物, 用餐&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;description&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;四海遊龍(中山區): 讀讀32則則關於四海遊龍客觀公正的美食評論，在Tripadvisor的5分滿分評等中得3.5分，在中山區的2,708家餐廳中排第468名。&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- The Open Graph protocol, Facebook 使用 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;og:image&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;https://media-cdn.tripadvisor.com/media/photo-s/0d/43/49/bd/photo0jpg.jpg&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;og:image:width&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;550&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;og:image:height&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;413&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;og:type&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;restaurant&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;og:url&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">content</span>=<span class=\"string\">&quot;http://www.tripadvisor.com.tw/Restaurant_Review-g13808671-d8310497-Reviews-Yuloong-Zhongshan_District_Taipei.html&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;og:site_name&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;Tripadvisor&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 提供 app--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;al:ios:app_name&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;TripAdvisor&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;al:ios:app_store_id&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;284876795&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;twitter:app:id:ipad&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;twitter:app:id:ipad&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;284876795&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;twitter:app:id:iphone&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;twitter:app:id:iphone&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;284876795&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;al:ios:url&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">content</span>=<span class=\"string\">&quot;tripadvisor://www.tripadvisor.com.tw/Restaurant_Review-g13808671-d8310497-Reviews-Yuloong-Zhongshan_District_Taipei.html?m=33762&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;twitter:app:url:ipad&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;twitter:app:url:ipad&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">content</span>=<span class=\"string\">&quot;tripadvisor://www.tripadvisor.com.tw/Restaurant_Review-g13808671-d8310497-Reviews-Yuloong-Zhongshan_District_Taipei.html?m=33762&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;twitter:app:url:iphone&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;twitter:app:url:iphone&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">content</span>=<span class=\"string\">&quot;tripadvisor://www.tripadvisor.com.tw/Restaurant_Review-g13808671-d8310497-Reviews-Yuloong-Zhongshan_District_Taipei.html?m=33762&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- alternate 提供其他語言網頁--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;alternate&quot;</span> <span class=\"attr\">hreflang</span>=<span class=\"string\">&quot;en&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">href</span>=<span class=\"string\">&quot;https://www.tripadvisor.com/Restaurant_Review-g13808671-d8310497-Reviews-Yuloong-Zhongshan_District_Taipei.html&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;alternate&quot;</span> <span class=\"attr\">hreflang</span>=<span class=\"string\">&quot;en-GB&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">href</span>=<span class=\"string\">&quot;https://www.tripadvisor.co.uk/Restaurant_Review-g13808671-d8310497-Reviews-Yuloong-Zhongshan_District_Taipei.html&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- twitter image--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;twitter:image&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">content</span>=<span class=\"string\">&quot;https://static.tacdn.com/img2/brand_refresh/application_icons/post-image-550x550.png&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JSON-LD-JSON-for-Linking-Data\"><a href=\"#JSON-LD-JSON-for-Linking-Data\" class=\"headerlink\" title=\"JSON-LD(JSON for Linking Data)\"></a>JSON-LD(JSON for Linking Data)</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- JSON for Linking Data--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;application/ld+json&quot;</span>&gt;</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;@context&quot;</span>: <span class=\"string\">&quot;http:\\u002F\\u002Fschema.org&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;@type&quot;</span>: <span class=\"string\">&quot;FoodEstablishment&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;\\u56DB\\u6D77\\u904A\\u9F8D&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;url&quot;</span>: <span class=\"string\">&quot;\\u002FRestaurant_Review-g13808671-d8310497-Reviews-Yuloong-Zhongshan_District_Taipei.html&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;image&quot;</span>: <span class=\"string\">&quot;https:\\u002F\\u002Fmedia-cdn.tripadvisor.com\\u002Fmedia\\u002Fphoto-s\\u002F0d\\u002F43\\u002F49\\u002Fbd\\u002Fphoto0jpg.jpg&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;priceRange&quot;</span>: <span class=\"string\">&quot;$&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;aggregateRating&quot;</span>: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;@type&quot;</span>: <span class=\"string\">&quot;AggregateRating&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;ratingValue&quot;</span>: <span class=\"string\">&quot;3.5&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;reviewCount&quot;</span>: <span class=\"string\">&quot;32&quot;</span></span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;address&quot;</span>: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;@type&quot;</span>: <span class=\"string\">&quot;PostalAddress&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;streetAddress&quot;</span>: <span class=\"string\">&quot;No.10,Minsheng West Road,Zhongshan District&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;addressLocality&quot;</span>: <span class=\"string\">&quot;\\u4E2D\\u5C71\\u5340&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;addressRegion&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;postalCode&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;addressCountry&quot;</span>: &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"string\">&quot;@type&quot;</span>: <span class=\"string\">&quot;Country&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;\\u53F0\\u7063&quot;</span></span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"robots-txt\"><a href=\"#robots-txt\" class=\"headerlink\" title=\"robots.txt\"></a><a href=\"https://developers.google.com/search/docs/advanced/robots/robots_txt?hl=zh-tw\">robots.txt</a></h4><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># robots.txt 給網頁爬蟲 or 搜尋引擎 看的檔案</span></span><br><span class=\"line\"><span class=\"comment\"># Sitemap(xml file) 網頁地圖</span></span><br><span class=\"line\"><span class=\"comment\"># Disallow 不允許搜尋</span></span><br><span class=\"line\"><span class=\"comment\"># Allow 允許搜尋</span></span><br><span class=\"line\"><span class=\"comment\"># https://www.tripadvisor.com.tw/robots.txt</span></span><br><span class=\"line\">Sitemap: https://www.tripadvisor.com.tw/sitemap/<span class=\"number\">2</span>/zh_TW/sitemap_zh_TW_index.xml</span><br><span class=\"line\">Sitemap: https://www.tripadvisor.com.tw/sitemap/<span class=\"number\">2</span>/zh_TW/sitemap_zh_TW_location_photo_direct_link_index.xml</span><br><span class=\"line\">Sitemap: https://www.tripadvisor.com.tw/sitemap/<span class=\"number\">2</span>/zh_TW/sitemap_zh_TW_show_user_reviews_index.xml</span><br><span class=\"line\">Sitemap: https://www.tripadvisor.com.tw/sitemap/att/zh_TW/sitemap_zh_TW_attractions_index.xml</span><br><span class=\"line\">Sitemap: https://www.tripadvisor.com.tw/sitemap/att/zh_TW/sitemap_zh_TW_attraction_review_index.xml</span><br><span class=\"line\">Sitemap: https://www.tripadvisor.com.tw/sitemap/att/zh_TW/sitemap_zh_TW_attraction_product_review_index.xml</span><br><span class=\"line\">Sitemap: https://www.tripadvisor.com.tw/sitemap/att/zh_TW/sitemap_zh_TW_attractions_near_index.xml</span><br><span class=\"line\">User-Agent: *</span><br><span class=\"line\">Disallow: /<span class=\"number\">5349</span></span><br><span class=\"line\">Disallow: /AcceptDeferredTermsAndConditions</span><br><span class=\"line\">Disallow: /AccessTokenLogin</span><br><span class=\"line\">Disallow: /AccommodationCrossSells</span><br><span class=\"line\">.....</span><br><span class=\"line\">Allow: /js3/ta-mobile</span><br><span class=\"line\">Allow: /js3/vr-shared</span><br><span class=\"line\">Allow: /UserReview$</span><br><span class=\"line\">Allow: /data/*/crosssellaccommodations</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Sitemap\"><a href=\"#Sitemap\" class=\"headerlink\" title=\"Sitemap\"></a>Sitemap</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"># Sitemap: https://www.tripadvisor.com.tw/sitemap/2/zh_TW/sitemap_zh_TW_index.xml</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sitemapindex</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/siteindex.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">sitemap</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://www.tripadvisor.com.tw/sitemap/2/zh_TW/sitemap-1611790-zh_TW-hotel_review-1610916285.xml.gz<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2021-01-17T20:44:45Z<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">sitemap</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">sitemap</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://www.tripadvisor.com.tw/sitemap/2/zh_TW/sitemap-1611791-zh_TW-hotel_review-1610916289.xml.gz<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2021-01-17T20:44:49Z<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">sitemap</span>&gt;</span></span><br><span class=\"line\">\t......</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">sitemap</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://www.tripadvisor.com.tw/sitemap/2/zh_TW/sitemap-1447620-zh_TW-cruise_review-1620460669.xml.gz<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2021-05-08T07:57:49Z<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">sitemap</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">sitemapindex</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Tag-標籤\"><a href=\"#Tag-標籤\" class=\"headerlink\" title=\"Tag 標籤\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/HTML/Element\">Tag 標籤</a></h3><h4 id=\"Semantic-elements-語義化元素\"><a href=\"#Semantic-elements-語義化元素\" class=\"headerlink\" title=\"Semantic elements 語義化元素\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Semantics\">Semantic elements 語義化元素</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h4</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h4</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h6</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h6</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- navigation 導覽列 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">nav</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 本頁主要內容 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 底頁 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"文字\"><a href=\"#文字\" class=\"headerlink\" title=\"文字\"></a>文字</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- preformatted text 方便放程式--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">pre</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">pre</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- line break 換行--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"行內文字\"><a href=\"#行內文字\" class=\"headerlink\" title=\"行內文字\"></a>行內文字</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- anchor 錨點 href: hypertext reference --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- _self:開在本頁 _blank:另開分頁 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://google.com&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&#x27;_self&#x27;</span>&gt;</span>google<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 本頁移動 #:top --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#p3&quot;</span>&gt;</span>To p3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- unordered list 清單--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- list item --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>item1<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>item2<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ordered list --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ol</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>item1<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>item2<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ol</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- &lt;sub&gt; 標簽可定義下標文本。&lt;sup&gt; 可定義上標文本。都屬于行內元素，默認比當前字體稍小。 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>This text is <span class=\"tag\">&lt;<span class=\"name\">sup</span>&gt;</span>superscripted<span class=\"tag\">&lt;/<span class=\"name\">sup</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>The chemical formula of water: H<span class=\"tag\">&lt;<span class=\"name\">sub</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">sub</span>&gt;</span>O<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Form\"><a href=\"#Form\" class=\"headerlink\" title=\"Form\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input\">Form</a></h4><p><strong>name 當表單提交時使用,只有設置了name屬性才能在提交時傳遞它們的值</strong><br><strong>value 可設定 input 初值</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 表單 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t姓名: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;你的名字&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t密碼: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\tEmail: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;你的電子郵件&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t日期: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;date&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t性別: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;gender&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;male&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;male&quot;</span>&gt;</span>男生<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span>\t</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;gender&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;female&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;female&quot;</span>&gt;</span>女生<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t興趣: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sports&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;sports&quot;</span>&gt;</span>運動<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span>\t</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;reading&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;reading&quot;</span>&gt;</span>閱讀<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span>\t</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- 送出 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;送出&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<form action=\"\">\n    <div>\n        姓名: <input type=\"text\">\n    </div>\n    <div>\n        密碼: <input type=\"password\">\n    </div>\n    <div>\n        Email: <input type=\"email\">\n    </div>\n    <div>\n        日期: <input type=\"date\">\n    </div>\n    <div>\n        性別: <input type=\"radio\" name=\"gender\" id=\"male\"><label for=\"male\">男生</label>    \n        <input type=\"radio\" name=\"gender\" id=\"female\"><label for=\"female\">女生</label>\n    </div>\n    <div>\n        興趣: <input type=\"checkbox\" id=\"sports\"><label for=\"sports\">運動</label>    \n        <input type=\"checkbox\" id=\"reading\"><label for=\"reading\">閱讀</label>    \n    </div>\n    <div>\n        <!-- 送出 -->\n        <input type=\"submit\" value=\"送出\">\n    </div>\n</form>\n\n<h5 id=\"textarea\"><a href=\"#textarea\" class=\"headerlink\" title=\"textarea\"></a>textarea</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;content&quot;</span> <span class=\"attr\">rows</span>=<span class=\"string\">&quot;5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><textarea name=\"content\" rows=\"5\"></textarea></p>\n<h5 id=\"下拉式選單-lt-select-gt-lt-option-gt\"><a href=\"#下拉式選單-lt-select-gt-lt-option-gt\" class=\"headerlink\" title=\"下拉式選單 - &lt;select&gt;, &lt;option&gt;\"></a>下拉式選單 - &lt;select&gt;, &lt;option&gt;</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;type&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;volvo&quot;</span>&gt;</span>Volvo<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;saab&quot;</span>&gt;</span>Saab<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;vw&quot;</span>&gt;</span>VW<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;audi&quot;</span> <span class=\"attr\">selected</span>&gt;</span>Audi<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<select id=\"type\">\n  <option value=\"volvo\">Volvo</option>\n  <option value=\"saab\">Saab</option>\n  <option value=\"vw\">VW</option>\n  <option value=\"audi\" selected>Audi</option>\n</select>\n\n<h5 id=\"input-type-hidden\"><a href=\"#input-type-hidden\" class=\"headerlink\" title=\"input type hidden\"></a>input type hidden</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">　<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;YourName&quot;</span>&gt;</span></span><br><span class=\"line\">　<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;隱藏欄位名稱&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;隱藏欄位值&quot;</span>&gt;</span></span><br><span class=\"line\">　<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;送出表單&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"enctype-Attribute-content-type\"><a href=\"#enctype-Attribute-content-type\" class=\"headerlink\" title=\"enctype Attribute(content type)\"></a><a href=\"https://www.w3schools.com/tags/att_form_enctype.asp\">enctype Attribute(content type)</a></h5><ul>\n<li>application/x-www-form-urlencoded</li>\n<li>multipart/form-data</li>\n<li>text/plain<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">enctype</span>=<span class=\"string\">&quot;value&quot;</span>&gt;</span></span><br><span class=\"line\">\t....</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"圖片與多媒體\"><a href=\"#圖片與多媒體\" class=\"headerlink\" title=\"圖片與多媒體\"></a>圖片與多媒體</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- title:滑鼠移到顯示  alt:替代文字(圖片不存在))--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 嵌入網頁,X-Frame-Option:sameorigin 可防止別人嵌入 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://...&quot;</span> <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Table-表格\"><a href=\"#Table-表格\" class=\"headerlink\" title=\"Table 表格\"></a><a href=\"https://www.footmark.info/web-design/html/html-table-structured-merge-group/\">Table 表格</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">&lt;th scope=&#x27;row&#x27;&gt; row標題</span></span><br><span class=\"line\"><span class=\"comment\">&lt;th scope=&#x27;col&#x27;&gt; col標題</span></span><br><span class=\"line\"><span class=\"comment\">&lt;td rowspan=&quot;2&quot;&gt; 跨 row</span></span><br><span class=\"line\"><span class=\"comment\">&lt;td colspan=3&gt; 跨 col</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>  <span class=\"attr\">border</span>=<span class=\"string\">&quot;1&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- table header --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>城市<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">\t　<span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">colspan</span>=<span class=\"string\">&quot;2&quot;</span>&gt;</span>特產<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- table row --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>龍潭<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t　<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>花生<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t　<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>豆干<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<table  border=\"1\">\n    <!-- table header -->\n    <tr>\n        <th>城市</th>\n    　<th colspan=\"2\">特產</th>\n    </tr>\n    <!-- table row -->\n    <tr>\n        <td>龍潭</td>\n    　<td>花生</td>\n    　<td>豆干</td>\n    </tr>\n</table>\n\n<h4 id=\"其他標籤\"><a href=\"#其他標籤\" class=\"headerlink\" title=\"其他標籤\"></a>其他標籤</h4><h5 id=\"section\"><a href=\"#section\" class=\"headerlink\" title=\"section\"></a>section</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--  &lt;section&gt; 標籤 (tag) 用在 HTML 文件中有明顯含義的區塊 (related grouping of semantic meaning)，一般來說 section 區塊中也會有自己的標題 (h1-h6)--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Heading<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Bunch of awesome content<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 或 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">article</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;intro&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!-- 介紹 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;main_content&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!-- 主內容 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;related&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;that.html&quot;</span>&gt;</span>相關文章<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;this.html&quot;</span>&gt;</span>相關文章<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">article</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"dl-dd-dt\"><a href=\"#dl-dd-dt\" class=\"headerlink\" title=\"dl, dd, dt\"></a>dl, dd, dt</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- &lt; dl &gt; &lt; dt &gt;&lt; dd &gt;是在網頁設計上的一種內文排版技巧 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dl</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>標題A<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>內容A-1<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>內容A-2<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>標題B<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>內容B-1<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>內容B-2<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HTML-Attribute\"><a href=\"#HTML-Attribute\" class=\"headerlink\" title=\"HTML Attribute\"></a><a href=\"https://www.w3schools.com/tags/ref_attributes.asp\">HTML Attribute</a></h3><h4 id=\"title-mouse-移至上方顯示說明\"><a href=\"#title-mouse-移至上方顯示說明\" class=\"headerlink\" title=\"title - mouse 移至上方顯示說明\"></a>title - mouse 移至上方顯示說明</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">abbr</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;World Health Organization&quot;</span>&gt;</span>WHO<span class=\"tag\">&lt;/<span class=\"name\">abbr</span>&gt;</span> was founded in 1948.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;Free Web tutorials&quot;</span>&gt;</span>W3Schools.com<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><h4 id=\"Escape-跳脫\"><a href=\"#Escape-跳脫\" class=\"headerlink\" title=\"Escape 跳脫\"></a>Escape 跳脫</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">\t&amp; =&gt; &amp;amp;</span></span><br><span class=\"line\"><span class=\"comment\">\t&lt; =&gt; &amp;lt;</span></span><br><span class=\"line\"><span class=\"comment\">\t&gt; =&gt; &amp;gt;   </span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 顯示標籤 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"symbol\">&amp;lt;</span>div<span class=\"symbol\">&amp;gt;</span>文字<span class=\"symbol\">&amp;lt;</span>/div<span class=\"symbol\">&amp;gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div>\n    &lt;div&gt;文字&lt;/div&gt;\n</div>\n\n<h4 id=\"comment\"><a href=\"#comment\" class=\"headerlink\" title=\"comment\"></a>comment</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--This is a comment. Comments are not displayed in the browser--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>This is a paragraph.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"HTML5的lang\"><a href=\"#HTML5的lang\" class=\"headerlink\" title=\"HTML5的lang\"></a><a href=\"https://vector.cool/html5%E7%9A%84lang%E9%80%9F%E6%9F%A5-%E6%B3%A8%E6%84%8F%EF%BC%9A%E7%B9%81%E9%AB%94%E4%B8%AD%E6%96%87%E4%B8%8D%E6%98%AFzh-tw%E5%96%94/\">HTML5的lang</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;zh-Hant-TW&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"HTML-Entity-List\"><a href=\"#HTML-Entity-List\" class=\"headerlink\" title=\"HTML Entity List\"></a><a href=\"https://www.freeformatter.com/html-entities.html\">HTML Entity List</a></h4><p>字元實體參照(character entity reference), 是標記式語言 SGML與HTML中對字元的一種跳脫序列表示</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>標<span class=\"symbol\">&amp;emsp;</span><span class=\"symbol\">&amp;emsp;</span>題<span class=\"symbol\">&amp;nbsp;</span>:<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>填<span class=\"symbol\">&amp;ensp;</span>寫<span class=\"symbol\">&amp;ensp;</span>人<span class=\"symbol\">&amp;nbsp;</span>:<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>聯絡電話<span class=\"symbol\">&amp;nbsp;</span>:<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div>\n  <ul>\n    <li>標&emsp;&emsp;題&nbsp;:</li>\n    <li>填&ensp;寫&ensp;人&nbsp;:</li>\n    <li>聯絡電話&nbsp;:</li>\n  </ul>\n</div>\n\n<h3 id=\"參考\"><a href=\"#參考\" class=\"headerlink\" title=\"參考\"></a>參考</h3><ul>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/HTML\">MDN HTML</a></li>\n<li><a href=\"https://www.w3schools.com/html/default.asp\">w3school HTML</a></li>\n<li><a href=\"https://www.w3schools.com/html/html5_semantic_elements.asp\">Semantic layout</a></li>\n</ul>\n","categories":["Front End"],"tags":["html"]},{"title":"HTML 嵌入","url":"/2021/05/23/html-2/","content":"<h3 id=\"網站嵌入-Google-地圖\"><a href=\"#網站嵌入-Google-地圖\" class=\"headerlink\" title=\"網站嵌入 Google 地圖\"></a>網站嵌入 Google 地圖</h3><ul>\n<li>goole 地圖選到 地點<div style=\"width:700px\">\n  <img src=\"/2021/05/23/html-2/pic1.png\" class=\"\" title=\"pic1\">\n</div></li>\n</ul>\n<span id=\"more\"></span>\n\n<ul>\n<li><p>複製 html</p>\n<div style=\"width:700px\">\n  <img src=\"/2021/05/23/html-2/pic2.png\" class=\"\" title=\"pic2\">\n</div></li>\n<li><p>放入網頁 (將 width and height 改成 100% 即可依外部的 div 控制大小)</p>\n</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://www.google.com/maps/embed?</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">pb=!1m18!1m12!1m3!1d3617.3381802914473!2d121.35304391432197!3d24.</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">954606247624927!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">1!3m3!1m2!1s0x34681c0246dcd2d3%3A0x6fe2e806ad0eda42!2zMjM55paw5YyX5biC6bav5q2M5Y2A5p</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">aH5YyW6LevNjgtMeiZnw!5e0!3m2!1szh-TW!2stw!4v1599026078041!5m2!1szh-TW!2stw&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">width</span>=<span class=\"string\">&quot;100%&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;100%&quot;</span> <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;border:0;&quot;</span> <span class=\"attr\">allowfullscreen</span>=<span class=\"string\">&quot;&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">aria-hidden</span>=<span class=\"string\">&quot;false&quot;</span> <span class=\"attr\">tabindex</span>=<span class=\"string\">&quot;0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n","categories":["Front End"],"tags":["html"]},{"title":"HTML Issue","url":"/2021/06/04/html-3/","content":"<h3 id=\"favicon-ico-Failed-to-load-resource-the-server-responded-with-a-status-of-404-Not-Found\"><a href=\"#favicon-ico-Failed-to-load-resource-the-server-responded-with-a-status-of-404-Not-Found\" class=\"headerlink\" title=\"favicon.ico Failed to load resource: the server responded with a status of 404 (Not Found)\"></a>favicon.ico Failed to load resource: the server responded with a status of 404 (Not Found)</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- #1 將favicon.ico 放於根目錄 --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- #2 加入以下代碼 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;shortcut icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;favicon.ico&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;image/x-icon&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- #3 加入以下代碼 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;shortcut icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"DOM-Input-elements-should-have-autocomplete-attributes-suggested-“current-password”\"><a href=\"#DOM-Input-elements-should-have-autocomplete-attributes-suggested-“current-password”\" class=\"headerlink\" title=\"[DOM] Input elements should have autocomplete attributes (suggested: “current-password”)\"></a>[DOM] Input elements should have autocomplete attributes (suggested: “current-password”)</h3><p>add autoComplete</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> signInForm = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">  &lt;form&gt;</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">      &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Email&lt;/label&gt;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        onChange=&#123;handelChange&#125;</span><br><span class=\"line\">        name=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">        type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">        className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">        value=&#123;email&#125;</span><br><span class=\"line\">        autoComplete=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">      &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Password&lt;/label&gt;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        onChange=&#123;handelChange&#125;</span><br><span class=\"line\">        name=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">        type=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">        className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">        value=&#123;password&#125;</span><br><span class=\"line\">        autoComplete=<span class=\"string\">&quot;new-password&quot;</span></span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;button onClick=&#123;handelSubmit&#125; className=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span><br><span class=\"line\">      Submit</span><br><span class=\"line\">    &lt;/button&gt;</span><br><span class=\"line\">  &lt;/form&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n\n\n","categories":["Front End"],"tags":["issue","html"]},{"title":"HTML tricky","url":"/2021/06/07/html-4/","content":"<h3 id=\"加入-empty-item-方便排版\"><a href=\"#加入-empty-item-方便排版\" class=\"headerlink\" title=\"加入 empty item 方便排版\"></a>加入 empty item 方便排版</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.games .item &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">360px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"number\">20px</span> <span class=\"number\">10px</span> ;</span></span><br><span class=\"line\">\t\t\t......</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.games .item-empty &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"number\">10px</span> ;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">360px</span>;\t</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;games&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://static-cdn.jtvnw.net/previews-ttv/live_user_therealknossi-640x360.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;user&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;avatar&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t&lt;img</span><br><span class=\"line\">\t\t\t\t\t\tsrc=&quot;https://static-cdn.jtvnw.net/jtv_user_pictures/574228be-01ef-4eab-bc0e-a4f6b68bedba-profile_image-300x300.png&quot;</span><br><span class=\"line\">\t\t\t\t\t\talt=&quot;&quot;&gt;</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;user-info&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;user-name&quot;</span>&gt;</span>Sneaky | ggEZ<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;user-id&quot;</span>&gt;</span>robert<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-empty&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-empty&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"網頁-disable-cache\"><a href=\"#網頁-disable-cache\" class=\"headerlink\" title=\"網頁 disable cache\"></a>網頁 disable cache</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;Cache-Control&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;no-cache&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>","categories":["Front End"],"tags":["tricky","html"]},{"title":"jQuery 說明","url":"/2021/07/01/jquery-1/","content":"<h3 id=\"基本\"><a href=\"#基本\" class=\"headerlink\" title=\"基本\"></a>基本</h3><h4 id=\"load-and-check\"><a href=\"#load-and-check\" class=\"headerlink\" title=\"load and check\"></a>load and check</h4><p><code>var $ = jQuery</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">&quot;en&quot;</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">\t&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">\t&lt;meta name=<span class=\"string\">&quot;viewport&quot;</span> content=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class=\"line\">\t&lt;meta http-equiv=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> content=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span><br><span class=\"line\">\t&lt;link rel=<span class=\"string\">&quot;shortcut icon&quot;</span> href=<span class=\"string\">&quot;#&quot;</span>/&gt;</span><br><span class=\"line\">\t&lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">\t&lt;script src=<span class=\"string\">&quot;https://code.jquery.com/jquery-3.6.0.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;script&gt;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(jQuery)</span><br><span class=\"line\">\t&lt;/script&gt;\t</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"event\"><a href=\"#event\" class=\"headerlink\" title=\"event\"></a>event</h3><h4 id=\"document\"><a href=\"#document\" class=\"headerlink\" title=\"document\"></a>document</h4><h5 id=\"document-ready-window-load-完成\"><a href=\"#document-ready-window-load-完成\" class=\"headerlink\" title=\"document ready - window load 完成\"></a>document ready - window load 完成</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$( <span class=\"built_in\">document</span> ).ready(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Handler for .ready() called.</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Mouse-Events\"><a href=\"#Mouse-Events\" class=\"headerlink\" title=\"Mouse Events\"></a>Mouse Events</h4><h5 id=\"代理\"><a href=\"#代理\" class=\"headerlink\" title=\"代理\"></a>代理</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&#x27;.todo-add&#x27;</span>).click(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">let</span> value = $(<span class=\"string\">&#x27;.todo-input&#x27;</span>).val()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">if</span> (value !== <span class=\"string\">&#x27;&#x27;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(<span class=\"string\">&#x27;.todo-input&#x27;</span>).val(<span class=\"string\">&#x27;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).append(<span class=\"string\">`</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todo-text&quot;</span>&gt;</span>$&#123;value&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-mark&quot;</span>&gt;</span>標記完成<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-delete&quot;</span>&gt;</span>刪除<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\">\t\t\t\t\t\t`)</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// .todos 代理 .btn-delet</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;.btn-delete&#x27;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(e.target).parent().remove()</span></span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// .todos 代理 .btn-mark</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;.btn-mark&#x27;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">let</span> todo = $(e.target).parent()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">if</span> (todo.hasClass(<span class=\"string\">&#x27;complete&#x27;</span>)) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.removeClass(<span class=\"string\">&#x27;complete&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.css(<span class=\"string\">&#x27;color&#x27;</span>, <span class=\"string\">&#x27;black&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(e.target).text(<span class=\"string\">&#x27;標記完成&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\t\t&#125; </span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.addClass(<span class=\"string\">&#x27;complete&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.css(<span class=\"string\">&#x27;color&#x27;</span>, <span class=\"string\">&#x27;red&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(e.target).text(<span class=\"string\">&#x27;標記未完成&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todo-input&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todo-add&quot;</span>&gt;</span>Add todo<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todos&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"代理2\"><a href=\"#代理2\" class=\"headerlink\" title=\"代理2\"></a>代理2</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;.todos&#x27;</span>).mousedown(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">\telement = $(e.target)</span><br><span class=\"line\">\t<span class=\"comment\">// change checkbox</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (element.hasClass(<span class=\"string\">&quot;checkbox&quot;</span>)) &#123;</span><br><span class=\"line\">\t\telement.parent().find(<span class=\"string\">&#x27;del&#x27;</span>).toggleClass(<span class=\"string\">&#x27;text-decoration-none&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// remove 1 todo</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (element.hasClass(<span class=\"string\">&quot;todo-del&quot;</span>)) &#123;</span><br><span class=\"line\">\t\telement.parent().remove()</span><br><span class=\"line\">\t\tshowLeftItems()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// double click</span></span><br><span class=\"line\">$(<span class=\"string\">&#x27;.todos&#x27;</span>).dblclick(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;dblclick&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// modify todo</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (element.hasClass(<span class=\"string\">&quot;todo-text&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> totoText = element.text()</span><br><span class=\"line\">\t\telement.parent().append(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t\t&lt;input class=&quot;todo-edit&quot; type=&quot;text&quot; value=<span class=\"subst\">$&#123;totoText&#125;</span>&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t`</span>)</span><br><span class=\"line\">\t\telement.addClass(<span class=\"string\">&#x27;d-none&#x27;</span>)</span><br><span class=\"line\">\t&#125;\t\t\t\t\t\t</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// checkbox change </span></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).on(<span class=\"string\">&#x27;change&#x27;</span>, <span class=\"string\">&#x27;.checkbox&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">\telement = $(e.target)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(<span class=\"built_in\">this</span>.checked) &#123;</span><br><span class=\"line\">\t\telement.parent().find(<span class=\"string\">&#x27;del&#x27;</span>).removeClass(<span class=\"string\">&#x27;text-decoration-none&#x27;</span>)</span><br><span class=\"line\">\t\telement.attr(<span class=\"string\">&#x27;checked&#x27;</span>, <span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;checked&#x27;</span>, e.target)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\telement.parent().find(<span class=\"string\">&#x27;del&#x27;</span>).addClass(<span class=\"string\">&#x27;text-decoration-none&#x27;</span>)</span><br><span class=\"line\">\t\telement.removeAttr(<span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;no checked&#x27;</span>, e.target)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"click\"><a href=\"#click\" class=\"headerlink\" title=\"click\"></a>click</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$( <span class=\"string\">&quot;#target&quot;</span> ).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  alert( <span class=\"string\">&quot;Handler for .click() called.&quot;</span> );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"submit\"><a href=\"#submit\" class=\"headerlink\" title=\"submit\"></a>submit</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;.form-add-comment&#x27;</span>).submit(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\te.preventDefault()</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"mouseout\"><a href=\"#mouseout\" class=\"headerlink\" title=\"mouseout\"></a>mouseout</h5><p>當鼠標指針離開被選元素時，會發生mouseout 事件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;.todos&#x27;</span>).mouseout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">\telement = $(e.target)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (element.hasClass(<span class=\"string\">&quot;checkbox&quot;</span>)) &#123;</span><br><span class=\"line\">\t\tshowLeftItems()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"mousedown\"><a href=\"#mousedown\" class=\"headerlink\" title=\"mousedown\"></a>mousedown</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;.todos&#x27;</span>).mousedown(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">\telement = $(e.target)</span><br><span class=\"line\">\t<span class=\"comment\">// change checkbox</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (element.hasClass(<span class=\"string\">&quot;checkbox&quot;</span>)) &#123;</span><br><span class=\"line\">\t\telement.parent().find(<span class=\"string\">&#x27;del&#x27;</span>).toggleClass(<span class=\"string\">&#x27;text-decoration-none&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// remove 1 todo</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (element.hasClass(<span class=\"string\">&quot;todo-del&quot;</span>)) &#123;</span><br><span class=\"line\">\t\telement.parent().remove()</span><br><span class=\"line\">\t\tshowLeftItems()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"dblclick\"><a href=\"#dblclick\" class=\"headerlink\" title=\"dblclick\"></a>dblclick</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// double click</span></span><br><span class=\"line\">$(<span class=\"string\">&#x27;.todos&#x27;</span>).dblclick(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;dblclick&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// modify todo</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (element.hasClass(<span class=\"string\">&quot;todo-text&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> totoText = element.text()</span><br><span class=\"line\">\t\telement.parent().append(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t\t&lt;input class=&quot;todo-edit&quot; type=&quot;text&quot; value=<span class=\"subst\">$&#123;totoText&#125;</span>&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t`</span>)</span><br><span class=\"line\">\t\telement.addClass(<span class=\"string\">&#x27;d-none&#x27;</span>)</span><br><span class=\"line\">\t&#125;\t\t\t\t\t\t</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"checkbox-change\"><a href=\"#checkbox-change\" class=\"headerlink\" title=\"checkbox change\"></a>checkbox change</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"built_in\">document</span>).on(<span class=\"string\">&#x27;change&#x27;</span>, <span class=\"string\">&#x27;.checkbox&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">\telement = $(e.target)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(<span class=\"built_in\">this</span>.checked) &#123;</span><br><span class=\"line\">\t\telement.parent().find(<span class=\"string\">&#x27;del&#x27;</span>).removeClass(<span class=\"string\">&#x27;text-decoration-none&#x27;</span>)</span><br><span class=\"line\">\t\telement.attr(<span class=\"string\">&#x27;checked&#x27;</span>, <span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;checked&#x27;</span>, e.target)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\telement.parent().find(<span class=\"string\">&#x27;del&#x27;</span>).addClass(<span class=\"string\">&#x27;text-decoration-none&#x27;</span>)</span><br><span class=\"line\">\t\telement.removeAttr(<span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;no checked&#x27;</span>, e.target)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"keyboard-Events\"><a href=\"#keyboard-Events\" class=\"headerlink\" title=\"keyboard Events\"></a>keyboard Events</h4><h5 id=\"keypress\"><a href=\"#keypress\" class=\"headerlink\" title=\"keypress()\"></a>keypress()</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;.todo-add&#x27;</span>).keypress(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\titem = $(<span class=\"string\">&#x27;.todo-add&#x27;</span>).val().trim()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (e.which == <span class=\"number\">13</span> &amp;&amp; item != <span class=\"string\">&#x27;&#x27;</span>)  &#123;</span><br><span class=\"line\">\t\t......</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"ajax\"><a href=\"#ajax\" class=\"headerlink\" title=\"ajax\"></a>ajax</h3><h4 id=\"ajax-GET\"><a href=\"#ajax-GET\" class=\"headerlink\" title=\"ajax GET\"></a>ajax GET</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">\ttype: <span class=\"string\">&#x27;GET&#x27;</span>,</span><br><span class=\"line\">\turl: <span class=\"string\">&#x27;https://restcountries.eu/rest/v2/name/&#x27;</span> + $(<span class=\"string\">&#x27;.country&#x27;</span>).val() ,</span><br><span class=\"line\">\tsuccess: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resp</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;resp.length ; i++ ) &#123;</span><br><span class=\"line\">\t\t\tcountries.append(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t\t\t<span class=\"subst\">$&#123;resp[i].alpha3Code&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t\t\t<span class=\"subst\">$&#123;resp[i].nativeName&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t`</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\terror: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(e.responseJSON)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ajax-POST\"><a href=\"#ajax-POST\" class=\"headerlink\" title=\"ajax POST\"></a>ajax POST</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">  method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">  url: <span class=\"string\">&quot;some.php&quot;</span>,</span><br><span class=\"line\">  data: &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;John&quot;</span>, <span class=\"attr\">location</span>: <span class=\"string\">&quot;Boston&quot;</span> &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"manipulation\"><a href=\"#manipulation\" class=\"headerlink\" title=\"manipulation\"></a>manipulation</h3><h4 id=\"set-get-element-text\"><a href=\"#set-get-element-text\" class=\"headerlink\" title=\"set/get element text\"></a>set/get element text</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// get text</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log($(<span class=\"string\">&#x27;.box&#x27;</span>).text())</span><br><span class=\"line\"><span class=\"comment\">// set text</span></span><br><span class=\"line\">$(<span class=\"string\">&#x27;.box&#x27;</span>).text(<span class=\"string\">&#x27;press button!&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"remove-empty\"><a href=\"#remove-empty\" class=\"headerlink\" title=\"remove()/empty()\"></a>remove()/empty()</h4><h4 id=\"prepend-append\"><a href=\"#prepend-append\" class=\"headerlink\" title=\"prepend()/append()\"></a>prepend()/append()</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 在最前面加入內容</span></span><br><span class=\"line\">$( <span class=\"string\">&quot;.inner&quot;</span> ).prepend( <span class=\"string\">&quot;&lt;p&gt;Test&lt;/p&gt;&quot;</span> );</span><br><span class=\"line\"><span class=\"comment\">// 在最後加入內容</span></span><br><span class=\"line\">$(<span class=\"string\">&#x27;.todos&#x27;</span>).append(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">\t&lt;div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;div class=&quot;todo-text&quot;&gt;<span class=\"subst\">$&#123;value&#125;</span>&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;button class=&quot;btn-mark&quot;&gt;標記完成&lt;/button&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;button class=&quot;btn-delete&quot;&gt;刪除&lt;/button&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">`</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"attr-removeAttr-‘checked’\"><a href=\"#attr-removeAttr-‘checked’\" class=\"headerlink\" title=\"attr()/removeAttr(‘checked’)\"></a>attr()/removeAttr(‘checked’)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// example 1 </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (checkbox.is(<span class=\"string\">&#x27;:checked&#x27;</span>))&#123;</span><br><span class=\"line\">\tcheckbox.attr(<span class=\"string\">&#x27;checked&#x27;</span>, <span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\tcheckbox.removeAttr(<span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// example 2</span></span><br><span class=\"line\">$(<span class=\"string\">&#x27;.options&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;div&#x27;</span>, <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> target = $(e.target)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> filter = target.attr(<span class=\"string\">&#x27;data-filter&#x27;</span>)</span><br><span class=\"line\">  $(<span class=\"string\">&#x27;.options div.active&#x27;</span>).removeClass(<span class=\"string\">&#x27;active&#x27;</span>)</span><br><span class=\"line\">  target.addClass(<span class=\"string\">&#x27;active&#x27;</span>)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (filter === <span class=\"string\">&#x27;all&#x27;</span>) &#123;</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;.todo&#x27;</span>).show()</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (filter === <span class=\"string\">&#x27;uncomplete&#x27;</span>) &#123;</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;.todo&#x27;</span>).show()</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;.todo.checked&#x27;</span>).hide()</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// done</span></span><br><span class=\"line\">    $(<span class=\"string\">&#x27;.todo&#x27;</span>).hide()</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;.todo.checked&#x27;</span>).show()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Traversing\"><a href=\"#Traversing\" class=\"headerlink\" title=\"Traversing\"></a>Traversing</h3><h4 id=\"each\"><a href=\"#each\" class=\"headerlink\" title=\"each()\"></a>each()</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> todosItem = $(<span class=\"string\">&#x27;.todos .list-group-item&#x27;</span>)</span><br><span class=\"line\">todosItem.each( <span class=\"function\">(<span class=\"params\">i,el</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tcheckbox = $(el).find(<span class=\"string\">&#x27;.checkbox&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!checkbox.is(<span class=\"string\">&#x27;:checked&#x27;</span>))&#123;</span><br><span class=\"line\">\t\tactiveItems++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find()\"></a>find()</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$( <span class=\"string\">&quot;li.item-ii&quot;</span> ).find( <span class=\"string\">&quot;li&quot;</span> ).css( <span class=\"string\">&quot;background-color&quot;</span>, <span class=\"string\">&quot;red&quot;</span> );</span><br><span class=\"line\"><span class=\"comment\">// find 1</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> item1 = $( <span class=\"string\">&quot;li.item-1&quot;</span> )[ <span class=\"number\">0</span> ];</span><br><span class=\"line\">$( <span class=\"string\">&quot;li.item-ii&quot;</span> ).find( item1 ).css( <span class=\"string\">&quot;background-color&quot;</span>, <span class=\"string\">&quot;red&quot;</span> );</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter()\"></a>filter()</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// apply this method to the set of list items</span></span><br><span class=\"line\">$( <span class=\"string\">&quot;li&quot;</span> ).filter( <span class=\"string\">&quot;:nth-child(2n)&quot;</span> ).css( <span class=\"string\">&quot;background-color&quot;</span>, <span class=\"string\">&quot;red&quot;</span> );</span><br><span class=\"line\"><span class=\"comment\">// filter by index condition</span></span><br><span class=\"line\">$( <span class=\"string\">&quot;li&quot;</span> )</span><br><span class=\"line\">  .filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> index </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> index % <span class=\"number\">3</span> === <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .css( <span class=\"string\">&quot;background-color&quot;</span>, <span class=\"string\">&quot;red&quot;</span> );</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"form\"><a href=\"#form\" class=\"headerlink\" title=\"form\"></a>form</h3><h4 id=\"check-checked\"><a href=\"#check-checked\" class=\"headerlink\" title=\"check checked\"></a>check checked</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">checkbox = $(el).find(<span class=\"string\">&#x27;.checkbox&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> (!checkbox.is(<span class=\"string\">&#x27;:checked&#x27;</span>))&#123;</span><br><span class=\"line\">\tactiveItems++</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"set-remove-checked\"><a href=\"#set-remove-checked\" class=\"headerlink\" title=\"set/remove checked\"></a>set/remove checked</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> todosItem = $(<span class=\"string\">&#x27;.todos .list-group-item&#x27;</span>)</span><br><span class=\"line\">todosItem.each( <span class=\"function\">(<span class=\"params\">i,el</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tcheckbox = $(el).find(<span class=\"string\">&#x27;.checkbox&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (checkbox.is(<span class=\"string\">&#x27;:checked&#x27;</span>))&#123;</span><br><span class=\"line\">\t\tcheckbox.attr(<span class=\"string\">&#x27;checked&#x27;</span>, <span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tcheckbox.removeAttr(<span class=\"string\">&#x27;checked&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css()\"></a>css()</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; get css</span><br><span class=\"line\">var color &#x3D; $( this ).css( &quot;background-color&quot; );</span><br><span class=\"line\">&#x2F;&#x2F; set css</span><br><span class=\"line\">todo.css(&#39;color&#39;, &#39;black&#39;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Class-Attribute\"><a href=\"#Class-Attribute\" class=\"headerlink\" title=\"Class Attribute\"></a>Class Attribute</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">.addClass()</span><br><span class=\"line\">.hasClass()</span><br><span class=\"line\">.removeClass()</span><br><span class=\"line\">.toggleClass()</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"set-get-input-value\"><a href=\"#set-get-input-value\" class=\"headerlink\" title=\"set/get input value\"></a>set/get input value</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!- get value-&gt;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// Get the value from the selected option in a dropdown</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$( <span class=\"string\">&quot;select#foo option:checked&quot;</span> ).val();</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// Get the value from a dropdown select directly</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$( <span class=\"string\">&quot;select#foo&quot;</span> ).val();</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// Get the value from a checked checkbox</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$( <span class=\"string\">&quot;input[type=checkbox][name=bar]:checked&quot;</span> ).val();</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// Get the value from a set of radio buttons</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$( <span class=\"string\">&quot;input[type=radio][name=baz]:checked&quot;</span> ).val();</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span></span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!- set value-&gt;</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;single&quot;</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Single<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Single2<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span></span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;multiple&quot;</span> <span class=\"attr\">multiple</span>=<span class=\"string\">&quot;multiple&quot;</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">selected</span>=<span class=\"string\">&quot;selected&quot;</span>&gt;</span>Multiple<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Multiple2<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">selected</span>=<span class=\"string\">&quot;selected&quot;</span>&gt;</span>Multiple3<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span></span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;checkboxname&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;check1&quot;</span>&gt;</span> check1</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;checkboxname&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;check2&quot;</span>&gt;</span> check2</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;r&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;radio1&quot;</span>&gt;</span> radio1</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;r&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;radio2&quot;</span>&gt;</span> radio2</span></span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\">\t$( <span class=\"string\">&quot;#single&quot;</span> ).val( <span class=\"string\">&quot;Single2&quot;</span> );</span></span><br><span class=\"line\"><span class=\"javascript\">\t$( <span class=\"string\">&quot;#multiple&quot;</span> ).val([ <span class=\"string\">&quot;Multiple2&quot;</span>, <span class=\"string\">&quot;Multiple3&quot;</span> ]);</span></span><br><span class=\"line\"><span class=\"javascript\">\t$( <span class=\"string\">&quot;input&quot;</span>).val([ <span class=\"string\">&quot;check1&quot;</span>, <span class=\"string\">&quot;check2&quot;</span>, <span class=\"string\">&quot;radio1&quot;</span> ]);</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"effect\"><a href=\"#effect\" class=\"headerlink\" title=\"effect\"></a>effect</h3><h4 id=\"hide-show\"><a href=\"#hide-show\" class=\"headerlink\" title=\"hide()/show()\"></a>hide()/show()</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> isOn = <span class=\"literal\">true</span></span><br><span class=\"line\">$(<span class=\"string\">&#x27;.btn&#x27;</span>).click(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (isOn) &#123;</span><br><span class=\"line\">\t\t$(<span class=\"string\">&#x27;.box&#x27;</span>).hide()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t$(<span class=\"string\">&#x27;.box&#x27;</span>).show()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tisOn = !isOn</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"fadeIn-fadeOut\"><a href=\"#fadeIn-fadeOut\" class=\"headerlink\" title=\"fadeIn()/fadeOut()\"></a>fadeIn()/fadeOut()</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> isOn = <span class=\"literal\">true</span></span><br><span class=\"line\">$(<span class=\"string\">&#x27;.btn&#x27;</span>).click(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (isOn) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// $(&#x27;.box&#x27;).fadeOut()</span></span><br><span class=\"line\">\t\t$(<span class=\"string\">&#x27;.box&#x27;</span>).fadeOut(<span class=\"number\">2000</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// $(&#x27;.box&#x27;).fadeIn()</span></span><br><span class=\"line\">\t\t$(<span class=\"string\">&#x27;.box&#x27;</span>).fadeIn(<span class=\"number\">2000</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tisOn = !isOn</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Traversing-1\"><a href=\"#Traversing-1\" class=\"headerlink\" title=\"Traversing\"></a>Traversing</h3><h4 id=\"parents\"><a href=\"#parents\" class=\"headerlink\" title=\"parents\"></a>parents</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(e.target).parent()</span><br></pre></td></tr></table></figure>\n\n\n\n\n","categories":["Coding"],"tags":["jquery"]},{"title":"jQuery 練習","url":"/2021/07/01/jquery-2/","content":"<h3 id=\"todo-list\"><a href=\"#todo-list\" class=\"headerlink\" title=\"todo list\"></a>todo list</h3><span id=\"more\"></span>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;shortcut icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Todo list<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://code.jquery.com/jquery-3.6.0.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.todo-input &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.todo-text &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// add todo</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&#x27;.todo-add&#x27;</span>).click(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">let</span> value = $(<span class=\"string\">&#x27;.todo-input&#x27;</span>).val()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">if</span> (value !== <span class=\"string\">&#x27;&#x27;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(<span class=\"string\">&#x27;.todo-input&#x27;</span>).val(<span class=\"string\">&#x27;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).append(<span class=\"string\">`</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todo-text&quot;</span>&gt;</span>$&#123;value&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-mark&quot;</span>&gt;</span>標記完成<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-delete&quot;</span>&gt;</span>刪除<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\">\t\t\t\t\t\t`)</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// remove all todos</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&#x27;.todo-remove-all&#x27;</span>).click(<span class=\"function\">() =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).empty()</span></span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// .todos 代理 .btn-delet</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;.btn-delete&#x27;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(e.target).parent().remove()</span></span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// .todos 代理 .btn-mark</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;.btn-mark&#x27;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">let</span> todo = $(e.target).parent()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">if</span> (todo.hasClass(<span class=\"string\">&#x27;complete&#x27;</span>)) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.removeClass(<span class=\"string\">&#x27;complete&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.css(<span class=\"string\">&#x27;color&#x27;</span>, <span class=\"string\">&#x27;black&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(e.target).text(<span class=\"string\">&#x27;標記完成&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\t\t&#125; </span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.addClass(<span class=\"string\">&#x27;complete&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\ttodo.css(<span class=\"string\">&#x27;color&#x27;</span>, <span class=\"string\">&#x27;red&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t$(e.target).text(<span class=\"string\">&#x27;標記未完成&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todo-input&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todo-add&quot;</span>&gt;</span>Add todo<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todo-remove-all&quot;</span>&gt;</span>Remove all todos<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todos&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ajax-query-country\"><a href=\"#ajax-query-country\" class=\"headerlink\" title=\"ajax - query country\"></a>ajax - query country</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;shortcut icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Ajax country<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://code.jquery.com/jquery-3.6.0.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\tName : </span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;country&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-country&quot;</span>&gt;</span>送出<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;countries&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&#x27;.btn-country&#x27;</span>).click(<span class=\"function\">() =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> countries = $(<span class=\"string\">&#x27;.countries&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// clear old country </span></span></span><br><span class=\"line\">\t\t\tcountries.empty()</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">if</span> ($(<span class=\"string\">&#x27;.country&#x27;</span>).val() === <span class=\"string\">&#x27;&#x27;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\talert(<span class=\"string\">&#x27;請輸入名稱&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">return</span></span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\ttype: <span class=\"string\">&#x27;GET&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\turl: <span class=\"string\">&#x27;https://restcountries.eu/rest/v2/name/&#x27;</span> + $(<span class=\"string\">&#x27;.country&#x27;</span>).val() ,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tsuccess: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resp</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;resp.length ; i++ ) &#123;</span></span><br><span class=\"line\">\t\t\t\t\t\tcountries.append(`</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t$&#123;resp[i].alpha3Code&#125;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t$&#123;resp[i].nativeName&#125;</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\">\t\t\t\t\t\t`)</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\terror: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(e.responseJSON)</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// clear input </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(<span class=\"string\">&#x27;.country&#x27;</span>).val(<span class=\"string\">&#x27;&#x27;</span>)</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>","categories":["Coding"],"tags":["jquery"]},{"title":"jQuery Issue","url":"/2021/07/07/jquery-3/","content":"<h3 id=\"jquery-應用於-event-e-target\"><a href=\"#jquery-應用於-event-e-target\" class=\"headerlink\" title=\"jquery 應用於 event e.target\"></a>jquery 應用於 event e.target</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 正確</span></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).on(<span class=\"string\">&#x27;change&#x27;</span>, <span class=\"string\">&#x27;.checkbox&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> element = $(e.target)</span><br><span class=\"line\">\t....</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 錯誤</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> element = $(<span class=\"string\">&#x27;e.target&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n","categories":["Coding"],"tags":["issue","jquery"]},{"title":"瀏覽器 JavaScript 練習","url":"/2021/05/26/js-3/","content":"<h3 id=\"簡易密碼產生器\"><a href=\"#簡易密碼產生器\" class=\"headerlink\" title=\"簡易密碼產生器\"></a>簡易密碼產生器</h3><span id=\"more\"></span>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.password-generate, .gen-btn  &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.result &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin-top</span>:<span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#e5e5e5</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;password-generate&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span>英文</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;num&quot;</span>&gt;</span>數字</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sp&quot;</span>&gt;</span>特殊符號</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;gen-btn&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;產生&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;result&quot;</span>&gt;</span>awfw<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getChar</span>(<span class=\"params\">name, chars</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;input[name=&#x27;</span> + name + <span class=\"string\">&#x27;]&#x27;</span>).checked) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">return</span> chars</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.gen-btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\">\t\t\t\te.preventDefault()</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">let</span> availableChar = <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">let</span> result = <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tavailableChar += getChar(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;abcdefghijklmnopqrstuvwxyz&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tavailableChar += getChar(<span class=\"string\">&#x27;num&#x27;</span>, <span class=\"string\">&#x27;0123456789&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tavailableChar += getChar(<span class=\"string\">&#x27;sp&#x27;</span>, <span class=\"string\">&#x27;%~#(~)&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\tif (availableChar.length &gt; 0) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;<span class=\"number\">10</span> ; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\tresult += availableChar[<span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * availableChar.length )]</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.result&#x27;</span>).innerText = result</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>使用 Attribute data-xx</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;password-generate&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;en&quot;</span> <span class=\"attr\">data-char</span>=<span class=\"string\">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>&gt;</span>英文</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;num&quot;</span> <span class=\"attr\">data-char</span>=<span class=\"string\">&quot;0123456789&quot;</span>&gt;</span>數字</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sp&quot;</span> <span class=\"attr\">data-char</span>=<span class=\"string\">&quot;sp&#x27;, &#x27;%~#(~)&quot;</span>&gt;</span>特殊符號</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;gen-btn&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;產生&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;result&quot;</span>&gt;</span>awfw<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.gen-btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\">\t\t\t\te.preventDefault()</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">let</span> availableChar = <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">let</span> result = <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> elements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;input[type=checkbox]&#x27;</span>) ;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i &lt; elements.length ; i++) &#123;</span></span><br><span class=\"line\">\t\t\t\t\tif (elements[i].checked) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\tavailableChar += elements[i].getAttribute(<span class=\"string\">&#x27;data-char&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\tif (availableChar.length &gt; 0) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;<span class=\"number\">10</span> ; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\tresult += availableChar[<span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * availableChar.length )]</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.result&#x27;</span>).innerText = result</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"動態表單通訊錄\"><a href=\"#動態表單通訊錄\" class=\"headerlink\" title=\"動態表單通訊錄\"></a>動態表單通訊錄</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.password-generate, .gen-btn  &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.result &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin-top</span>:<span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#e5e5e5</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-add&quot;</span>&gt;</span>新增通訊錄<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;comm-list&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t姓名 : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user-name&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t電話 : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;phone&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;phone&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-del&quot;</span>&gt;</span>刪除<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.btn-add&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\telement = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\telement.innerHTML = `</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t姓名 : <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user-name&quot;</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t電話 : <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;phone&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;phone&quot;</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-del&quot;</span>&gt;</span>刪除<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span><br><span class=\"line\">\t\t\t\t`</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.comm-list&#x27;</span>).appendChild(element)</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.comm-list&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">if</span> (e.target.classList.contains(<span class=\"string\">&#x27;btn-del&#x27;</span>)) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.comm-list&#x27;</span>).removeChild(</span></span><br><span class=\"line\">\t\t\t\t\t\te.target.parentElement</span><br><span class=\"line\">\t\t\t\t\t)</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","categories":["Coding"],"tags":["javascript","browser"]},{"title":"JavaScript tricky","url":"/2021/05/29/js-4/","content":"<h3 id=\"escape-HTML-function\"><a href=\"#escape-HTML-function\" class=\"headerlink\" title=\"escape HTML function\"></a>escape HTML function</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// escape HTML function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">escapeHTML</span>(<span class=\"params\">text</span>) </span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">var</span> replacements= &#123;<span class=\"string\">&quot;&lt;&quot;</span>: <span class=\"string\">&quot;&amp;lt;&quot;</span>, <span class=\"string\">&quot;&gt;&quot;</span>: <span class=\"string\">&quot;&amp;gt;&quot;</span>,<span class=\"string\">&quot;&amp;&quot;</span>: <span class=\"string\">&quot;&amp;amp;&quot;</span>, <span class=\"string\">&#x27;&quot;&#x27;</span>: <span class=\"string\">&quot;&amp;quot;&quot;</span>&#125;    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> text.replace(<span class=\"regexp\">/[&lt;&gt;&amp;&quot;]/g</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">character</span>) </span>&#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> replacements[character];  </span><br><span class=\"line\">    &#125;); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<h3 id=\"JSON-parse-的處理-預防抓到不正確的資料\"><a href=\"#JSON-parse-的處理-預防抓到不正確的資料\" class=\"headerlink\" title=\"JSON.parse 的處理 - 預防抓到不正確的資料\"></a>JSON.parse 的處理 - 預防抓到不正確的資料</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> json;</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  json = <span class=\"built_in\">JSON</span>.parse(str)</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(e) <span class=\"comment\">// 錯誤處理</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"字串比較\"><a href=\"#字串比較\" class=\"headerlink\" title=\"字串比較\"></a>字串比較</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> aString = <span class=\"string\">&#x27;1abc23&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bString = <span class=\"string\">&#x27;abc&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cString = <span class=\"string\">&#x27;abc&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// 比較字串是否相等</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`bString === ctring, <span class=\"subst\">$&#123;bString === cString&#125;</span>`</span>)\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// 比較是否含字串, -1 表不含</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`aString.indexOf(bString), <span class=\"subst\">$&#123;aString.indexOf(bString)&#125;</span>`</span>)\t<span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"comment\">// switch 比較</span></span><br><span class=\"line\"><span class=\"keyword\">switch</span> (aString) &#123;\t\t<span class=\"comment\">// &#x27;1abc23&#x27;</span></span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"string\">&#x27;1ab&#x27;</span> :</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;1ab&#x27;</span> )</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"string\">&#x27;1abc23&#x27;</span> :</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;1abc23&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t<span class=\"keyword\">default</span> :</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;none&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"瀏覽器-reload\"><a href=\"#瀏覽器-reload\" class=\"headerlink\" title=\"瀏覽器 reload\"></a>瀏覽器 reload</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;add&quot;</span>&gt;</span>add<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- reload button --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;javascript:window.location.reload()&quot;</span>&gt;</span>reload<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.add&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\">() =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;h1&#x27;</span>).append(<span class=\"string\">&#x27;Press add button.&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"瀏覽器-定時-reload-網頁\"><a href=\"#瀏覽器-定時-reload-網頁\" class=\"headerlink\" title=\"瀏覽器 定時 reload 網頁\"></a>瀏覽器 定時 reload 網頁</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">setInterval</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;location.reload(<span class=\"literal\">true</span>);&#125;, <span class=\"number\">3000</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"使用-object-設定\"><a href=\"#使用-object-設定\" class=\"headerlink\" title=\"使用 object 設定\"></a>使用 object 設定</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// prizes object</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> priszes = &#123;</span><br><span class=\"line\">\tFIRST: &#123;</span><br><span class=\"line\">\t\timgUrl: <span class=\"string\">&#x27;url(img/first.jpg)&#x27;</span>,</span><br><span class=\"line\">\t\ttitle: <span class=\"string\">&#x27;恭喜你中頭獎了！日本東京來回雙人遊！&#x27;</span>,</span><br><span class=\"line\">\t\tcolor: <span class=\"string\">&#x27;#000&#x27;</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tSECOND: &#123;</span><br><span class=\"line\">\t\timgUrl: <span class=\"string\">&#x27;url(img/tv.jpg)&#x27;</span> ,</span><br><span class=\"line\">\t\ttitle: <span class=\"string\">&#x27;二獎！90 吋電視一台&#x27;</span>,</span><br><span class=\"line\">\t\tcolor: <span class=\"string\">&#x27;#000&#x27;</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tTHIRD: &#123;</span><br><span class=\"line\">\t\timgUrl: <span class=\"string\">&#x27;url(img/yt.jpg)&#x27;</span>,</span><br><span class=\"line\">\t\ttitle: <span class=\"string\">&#x27;恭喜你抽中三獎：知名 YouTuber 簽名握手會入場券一張，bang！&#x27;</span>,</span><br><span class=\"line\">\t\tcolor: <span class=\"string\">&#x27;#000&#x27;</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tNONE: &#123;</span><br><span class=\"line\">\t\timgUrl: <span class=\"string\">&#x27;none&#x27;</span>,</span><br><span class=\"line\">\t\ttitle: <span class=\"string\">&#x27;銘謝惠顧&#x27;</span>,</span><br><span class=\"line\">\t\tcolor: <span class=\"string\">&#x27;#fff&#x27;</span> </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// set background image</span></span><br><span class=\"line\">banner.style.backgroundImage = priszes[responseData.prize].imgUrl</span><br><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.prize-resp&#x27;</span>)</span><br><span class=\"line\">\t.innerText = priszes[responseData.prize].title</span><br><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.prize-resp&#x27;</span>)</span><br><span class=\"line\">\t.style</span><br><span class=\"line\">\t.color = priszes[responseData.prize].color</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ELEMENT-TEMPLATE-使用\"><a href=\"#ELEMENT-TEMPLATE-使用\" class=\"headerlink\" title=\"ELEMENT TEMPLATE 使用\"></a>ELEMENT TEMPLATE 使用</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> STREAM_TEMPLATE =  <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;a href=&quot;$channel-url&quot;&gt;&lt;/a&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;div class=&quot;view&quot;&gt;&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;img src=$preview alt=&quot;&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;div class=&quot;user&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t&lt;div class=&quot;avatar&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;img src=$logo alt=&quot;&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t&lt;div class=&quot;user-info&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;div class=&quot;user-name&quot;&gt;$title&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t\t&lt;div class=&quot;user-id&quot;&gt;$name&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">\t\t`</span></span><br><span class=\"line\">itemElement.innerHTML = STREAM_TEMPLATE</span><br><span class=\"line\">\t\t.replace(<span class=\"string\">&#x27;$channel-url&#x27;</span>, stream.channel.url)</span><br><span class=\"line\">\t\t.replace(<span class=\"string\">&#x27;$preview&#x27;</span>, stream.preview.large)</span><br><span class=\"line\">\t\t.replace(<span class=\"string\">&#x27;$logo&#x27;</span>, stream.channel.logo)</span><br><span class=\"line\">\t\t.replace(<span class=\"string\">&#x27;$title&#x27;</span>, stream.channel.status)</span><br><span class=\"line\">\t\t.replace(<span class=\"string\">&#x27;name&#x27;</span>, stream.channel.display_name)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"show-date-to-string-need-add-new-use-react\"><a href=\"#show-date-to-string-need-add-new-use-react\" class=\"headerlink\" title=\"show date to string(need add new) - use react\"></a>show date to string(need add new) - use react</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"number\">2141241556</span>).toLocaleString()&#125;&lt;/div&gt;</span><br><span class=\"line\"><span class=\"comment\">// 1970/1/26 上午2:47:21</span></span><br><span class=\"line\">&lt;div&gt;&#123;<span class=\"built_in\">Date</span>(<span class=\"number\">2141241556</span>).toLocaleString()&#125;&lt;/div&gt; </span><br><span class=\"line\"><span class=\"comment\">// Sun Sep 12 2021 16:33:37 GMT+0800 (台北標準時間)</span></span><br><span class=\"line\">&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"number\">10</span> * <span class=\"number\">1000</span>)</span><br><span class=\"line\">        .toLocaleTimeString(<span class=\"string\">&quot;en-us&quot;</span>, &#123;</span><br><span class=\"line\">          timeZone: <span class=\"string\">&quot;Africa/Abidjan&quot;</span>,</span><br><span class=\"line\">          hour12: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .replace(<span class=\"regexp\">/\\d&#123;2&#125;/</span>, <span class=\"string\">&quot;00&quot;</span>)&#125;</span><br><span class=\"line\"><span class=\"comment\">// 00:00:10</span></span><br><span class=\"line\"><span class=\"comment\">// hour12: false ==&gt; 設定 24小時制</span></span><br><span class=\"line\"><span class=\"comment\">// timeZone: &quot;Africa/Abidjan&quot; ==&gt; 顯示格式</span></span><br><span class=\"line\"><span class=\"comment\">// .replace(/\\d&#123;2&#125;/, &quot;00&quot;) ==&gt; 最前面填 00, 因為 00:00:00 對應 Taipei 為 08:00:00</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"catch-處理完-then-處理\"><a href=\"#catch-處理完-then-處理\" class=\"headerlink\" title=\"catch 處理完 .then 處理\"></a>catch 處理完 .then 處理</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; name, email, password &#125; = values;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> signup = <span class=\"function\">(<span class=\"params\">user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/signup`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(user),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      <span class=\"comment\">// then 處理, 若有 check data 要加 retuen</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;data:&quot;</span>, data);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handelSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  <span class=\"comment\">// catch 傳回用 .then 處理</span></span><br><span class=\"line\">  signup(&#123; name, email, password &#125;).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// undefidata === undefined 表 server 未回應</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Server not response&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n","categories":["Coding"],"tags":["javascript","tricky"]},{"title":"PHP tricky","url":"/2021/06/17/php-2/","content":"<h3 id=\"header-不加-exit-or-die-會往下執行\"><a href=\"#header-不加-exit-or-die-會往下執行\" class=\"headerlink\" title=\"header() 不加 exit() or die() 會往下執行\"></a>header() 不加 exit() or die() 會往下執行</h3><span id=\"more\"></span>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\tsession_start();</span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;utils.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;content&#x27;</span>]) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;id&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$nickname</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;nickname&#x27;</span>] ;</span><br><span class=\"line\">\t\t<span class=\"variable\">$id</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;id&#x27;</span>];</span><br><span class=\"line\">\t\theader(<span class=\"string\">&quot;Location: update_content.php?errorCode=1&amp;nickname=<span class=\"subst\">$nickname</span>&amp;id=<span class=\"subst\">$id</span>&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">// 不加會往下執行</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// die(&quot;輸入不齊全!&quot;);</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;update comment set content=? where id = ? and username=?&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>= <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;sss&#x27;</span>, <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;content&#x27;</span>], <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;id&#x27;</span>], <span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;username&#x27;</span>]);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\tprint_r(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: update_content.php?errorCode=2&amp;nickname=$_POST[&quot;nickname&quot;]&amp;id=$_POST[&quot;id&quot;]&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$affect_rows</span> = (<span class=\"keyword\">int</span>)<span class=\"variable\">$conn</span>-&gt;affected_rows;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$affect_rows</span>&lt;<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: index.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;編輯完成&quot;</span>;</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: index.php&#x27;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n","categories":["Back End"],"tags":["tricky","php"]},{"title":"TOOL","url":"/2021/05/21/tool-1/","content":"<h3 id=\"Application\"><a href=\"#Application\" class=\"headerlink\" title=\"Application\"></a>Application</h3><h4 id=\"馬克鰻-markman\"><a href=\"#馬克鰻-markman\" class=\"headerlink\" title=\"馬克鰻(markman)\"></a>馬克鰻(markman)</h4><ul>\n<li><a href=\"http://www.getmarkman.com/\">Download</a></li>\n<li>先安裝 <a href=\"https://get.adobe.com/tw/air/\">adobe AIR</a></li>\n</ul>\n<p>圖檔 長度測量/標記, 矩形座標&amp;長寬測量/標記,顏色測量/標記,文字標記</p>\n<table>\n<thead>\n<tr>\n<th>按鍵</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Tab</td>\n<td>自動偵測長度</td>\n</tr>\n<tr>\n<td>Del</td>\n<td>刪除標記</td>\n</tr>\n</tbody></table>\n<span id=\"more\"></span>\n\n<h5 id=\"JMeter\"><a href=\"#JMeter\" class=\"headerlink\" title=\"JMeter\"></a>JMeter</h5><p>壓力測試工具</p>\n<h6 id=\"check-java-veresion\"><a href=\"#check-java-veresion\" class=\"headerlink\" title=\"check java veresion\"></a>check java veresion</h6><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 命令列執行</span></span><br><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"download-and-install\"><a href=\"#download-and-install\" class=\"headerlink\" title=\"download and install\"></a>download and install</h6><ul>\n<li>download <a href=\"https://jmeter.apache.org/download_jmeter.cgi\">JMeter</a> : .zip for Window</li>\n<li>解壓縮執行 ./bin/jmeter.bat</li>\n<li>change language : Options –&gt; Choose Language –&gt; Chinese(Traditional)</li>\n</ul>\n<h6 id=\"add-test-item\"><a href=\"#add-test-item\" class=\"headerlink\" title=\"add test item\"></a>add test item</h6><ul>\n<li><p>填入名稱 : TestProducts -&gt; 名稱 -&gt; Save</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/05/21/tool-1/pic1.jpg\" class=\"\" title=\"pic1\">\n</div></li>\n<li><p>add test group : TestProducts –&gt; 新增 –&gt; Threads(users) –&gt; setUp Thread Group</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/05/21/tool-1/pic2.jpg\" class=\"\" title=\"pic2\">\n</div></li>\n<li><p>新增 HTTP 要求 : setUp Thread Group –&gt; 新增 –&gt; 取樣 –&gt; HTTP 要求 </p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/05/21/tool-1/pic3.jpg\" class=\"\" title=\"pic3\">\n</div></li>\n<li><p>新增 檢視結果樹 : setUp Thread Group –&gt; 新增 –&gt; 接聽 –&gt; 檢視結果樹 </p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/05/21/tool-1/pic4.jpg\" class=\"\" title=\"pic4\">\n</div></li>\n</ul>\n<h4 id=\"Cygwin-安裝-wget-apt-cyg-gcc\"><a href=\"#Cygwin-安裝-wget-apt-cyg-gcc\" class=\"headerlink\" title=\"Cygwin 安裝 wget, apt-cyg, gcc\"></a>Cygwin 安裝 wget, apt-cyg, gcc</h4><h5 id=\"install-cygwin-add-wget\"><a href=\"#install-cygwin-add-wget\" class=\"headerlink\" title=\"install cygwin - add wget\"></a>install cygwin - add wget</h5><div style=\"width:500px\">\n    <img src=\"/2021/05/21/tool-1/cygwin_1.jpg\" class=\"\" title=\"cygwin_1\">\n</div>\n\n<h5 id=\"download-apt-cyg-解壓縮後放於-bin-目錄下-並設定可執行\"><a href=\"#download-apt-cyg-解壓縮後放於-bin-目錄下-並設定可執行\" class=\"headerlink\" title=\"download apt-cyg 解壓縮後放於 /bin 目錄下, 並設定可執行\"></a>download apt-cyg 解壓縮後放於 /bin 目錄下, 並設定可執行</h5><div style=\"maxwidth:1000px\">\n    <img src=\"/2021/05/21/tool-1/cygwin_2.jpg\" class=\"\" title=\"cygwin_2\">\n</div>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">chmod +x /bin/apt-cyg</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"install-gcc\"><a href=\"#install-gcc\" class=\"headerlink\" title=\"install gcc\"></a>install gcc</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">apt-cyg install gcc-core</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"some-command\"><a href=\"#some-command\" class=\"headerlink\" title=\"some command\"></a>some command</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># dump cygwin version </span></span><br><span class=\"line\">uname -a</span><br><span class=\"line\">\t\tCYGWIN_NT-10.0 ESTPENB-W022 3.2.0(0.340/5/3) 2021-03-29 08:42 x86_64 Cygwin</span><br><span class=\"line\"><span class=\"comment\"># check support gcc core </span></span><br><span class=\"line\">cygcheck -p bin/gcc</span><br><span class=\"line\">\t\tFound 10 matches <span class=\"keyword\">for</span> bin/gcc</span><br><span class=\"line\">\t\tgcc-core-10.2.0-1 - gcc-core: GNU Compiler Collection (C, OpenMP)</span><br><span class=\"line\">\t\tgcc-core-11.2.0-0 - gcc-core: GNU Compiler Collection (C, OpenMP)</span><br><span class=\"line\">\t\tgcc-core-11.2.0-1 - gcc-core: GNU Compiler Collection (C, OpenMP)</span><br><span class=\"line\">\t\tgcc-core-7.4.0-1 - gcc-core: GNU Compiler Collection (C, OpenMP)</span><br><span class=\"line\">\t\tgcc-core-9.3.0-2 - gcc-core: GNU Compiler Collection (C, OpenMP)</span><br><span class=\"line\">\t\tgcc-debuginfo-10.2.0-1 - gcc-debuginfo: Debug info <span class=\"keyword\">for</span> gcc</span><br><span class=\"line\">\t\tgcc-debuginfo-7.4.0-1 - gcc-debuginfo: Debug info <span class=\"keyword\">for</span> gcc</span><br><span class=\"line\">\t\tgcc-debuginfo-9.3.0-2 - gcc-debuginfo: Debug info <span class=\"keyword\">for</span> gcc</span><br><span class=\"line\">\t\tgccmakedep-1.0.2-1 - gccmakedep: X Makefile dependency tool <span class=\"keyword\">for</span> GCC (installed b</span><br><span class=\"line\">\t\tinaries and support files)</span><br><span class=\"line\">\t\tgccmakedep-1.0.3-1 - gccmakedep: X Makefile dependency tool <span class=\"keyword\">for</span> GCC (installed b</span><br><span class=\"line\">\t\tinaries and support files)</span><br></pre></td></tr></table></figure>\n","categories":["Front End"],"tags":["tool"]},{"title":"前端 package build 練習","url":"/2021/07/25/tool-3/","content":"<h3 id=\"試-bulid\"><a href=\"#試-bulid\" class=\"headerlink\" title=\"試 bulid\"></a>試 bulid</h3><ol>\n<li>NODE_ENV 不是内部或外部命令，也不是可運行的程序，或者批處理文件<br>以下兩條腳本都合併兩條命令（這種操作在powershell中不被支持，在cmd中也不被支持，這是Mac中bash或Linux的shell中的獨特操作），拆分兩條腳本如下：</li>\n</ol>\n<span id=\"more\"></span>\n\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">  &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;,</span><br><span class=\"line\">  &quot;gulp&quot;: &quot;NODE_ENV=&#x27;development&#x27; gulp&quot;,</span><br><span class=\"line\">  &quot;gulp-build&quot;: &quot;NODE_ENV=&#x27;production&#x27; gulp&quot;,</span><br><span class=\"line\">  &quot;dev&quot;: &quot;npm run gulp&quot;,</span><br><span class=\"line\">  &quot;start&quot;: &quot;npm run gulp&quot;,</span><br><span class=\"line\">  &quot;build&quot;: &quot;npm run gulp-build&quot;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">  &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;,</span><br><span class=\"line\">  &quot;gulp&quot;: &quot;set NODE_ENV=&#x27;development&#x27; &amp;&amp; gulp&quot;,</span><br><span class=\"line\">  &quot;gulp-build&quot;: &quot;set NODE_ENV=&#x27;production&#x27; &amp;&amp; gulp&quot;,</span><br><span class=\"line\">  &quot;dev&quot;: &quot;npm run gulp&quot;,</span><br><span class=\"line\">  &quot;start&quot;: &quot;npm run gulp&quot;,</span><br><span class=\"line\">  &quot;build&quot;: &quot;npm run gulp-build&quot;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>build </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># npm install 會有一些問題</span></span><br><span class=\"line\">yarn install</span><br><span class=\"line\">yarn run dev</span><br><span class=\"line\">yarn run build</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"copy-bulid\"><a href=\"#copy-bulid\" class=\"headerlink\" title=\"copy bulid\"></a>copy bulid</h3><ol>\n<li>install gulp</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install gulp-cli</span></span><br><span class=\"line\">npm install --global gulp-cli</span><br><span class=\"line\"><span class=\"comment\"># generate package.json</span></span><br><span class=\"line\">yarn init</span><br><span class=\"line\"><span class=\"comment\"># install gulp </span></span><br><span class=\"line\">yarn add gulp</span><br><span class=\"line\"><span class=\"comment\"># gulp version</span></span><br><span class=\"line\">gulp -v</span><br><span class=\"line\">\tCLI version: 2.3.0</span><br><span class=\"line\">\tLocal version: 4.0.2</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>add gulpfile.js example</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// gulpfile.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;default&#x27;</span>, defaultTask);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">defaultTask</span>(<span class=\"params\">done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// place code for your default task here</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Hello World!&#x27;</span>);</span><br><span class=\"line\">  done();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>run gulp</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gulp</span><br><span class=\"line\">\t[10:58:38] Using gulpfile D:\\work\\git-test\\mt</span><br><span class=\"line\">\t[10:58:38] Starting <span class=\"string\">&#x27;default&#x27;</span>...</span><br><span class=\"line\">\tHello World!</span><br><span class=\"line\">\t[10:58:38] Finished <span class=\"string\">&#x27;default&#x27;</span> after 3.67 ms</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>copy all file  the install package</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># add gulp package #1</span></span><br><span class=\"line\">yarn add gulp-concat gulp-csso gulp-fontmin-woff2 gulp-imagemin gulp-postcss gulp-pug gulp-rename gulp-sass gulp-sourcemaps gulp-uglify</span><br><span class=\"line\"><span class=\"comment\"># add gulp package #2</span></span><br><span class=\"line\">yarn add gulp-connect gulp-if gulp-svg-sprite</span><br><span class=\"line\"><span class=\"comment\"># add other package #1</span></span><br><span class=\"line\">yarn add postcss-uncss autoprefixer del browserify babelify vinyl-source-stream glob event-stream vinyl-buffer merge-stream</span><br><span class=\"line\"><span class=\"comment\"># add other package #2</span></span><br><span class=\"line\">yarn add uncss @babel/core sass bootstrap rfs @babel/plugin-transform-runtime @babel/preset-env chart.js jquery clipboard smoothscroll-polyfill vanilla-lazyload rellax @popperjs/core</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>some issue for package version dependence</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># DEPRECATION WARNING: Using / for division is deprecated and will be removed in Dart Sass 2.0.0.</span></span><br><span class=\"line\"><span class=\"comment\"># &quot;gulp-sass&quot;: &quot;^5.0.0&quot; --&gt; &quot;gulp-sass&quot;: &quot;^4.0.2&quot;,</span></span><br><span class=\"line\"><span class=\"comment\"># yarn add gulp-sass@4.0.2 --tilde 表 4.0.2 之後的版本</span></span><br><span class=\"line\">yarn remove gulp-sass </span><br><span class=\"line\">yarn add gulp-sass@4.0.2 --tilde</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Error: PostCSS plugin autoprefixer requires PostCSS 8.</span></span><br><span class=\"line\">yarn remove autoprefixer </span><br><span class=\"line\">yarn add autoprefixer@9.7.6 --tilde</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>build </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yarn run dev</span><br><span class=\"line\">yarn run build</span><br></pre></td></tr></table></figure>\n\n","categories":["Front End"],"tags":["tool"]},{"title":"CSS 說明","url":"/2021/05/18/css-1/","content":"<p>CSS(Cascading Style Sheets) 階層式樣式表</p>\n<span id=\"more\"></span>\n\n<h3 id=\"基本\"><a href=\"#基本\" class=\"headerlink\" title=\"基本\"></a>基本</h3><h4 id=\"CSS-命名\"><a href=\"#CSS-命名\" class=\"headerlink\" title=\"CSS 命名\"></a>CSS 命名</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wrap</span><br><span class=\"line\">時間軸 timeline</span><br><span class=\"line\">條幅廣告 banner</span><br><span class=\"line\">menu</span><br><span class=\"line\">人頭 avatar</span><br><span class=\"line\">sidebar</span><br><span class=\"line\">麵包屑 path/crumb</span><br><span class=\"line\">navbar</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CSS-三種使用方法\"><a href=\"#CSS-三種使用方法\" class=\"headerlink\" title=\"CSS 三種使用方法\"></a>CSS 三種使用方法</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* style.css */</span></span><br><span class=\"line\"><span class=\"comment\">/* ccs #3 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.evening</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: orange;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- index.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ccs #3 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;style.css&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ccs #2 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.noon &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ccs #1 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background:red&quot;</span>&gt;</span>Good morning<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ccs #2 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;noon&quot;</span>&gt;</span>Good afternoon<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ccs #3 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;evening&quot;</span>&gt;</span>Good evening<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"simple-css-init\"><a href=\"#simple-css-init\" class=\"headerlink\" title=\"simple css init\"></a>simple css init</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.debug</span> *, <span class=\"selector-class\">.debug</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid gold</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span>, <span class=\"selector-tag\">h1</span> ,<span class=\"selector-tag\">h2</span> ,<span class=\"selector-tag\">h3</span> ,<span class=\"selector-tag\">h4</span> ,<span class=\"selector-tag\">h5</span> ,<span class=\"selector-tag\">h6</span> ,<span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CSS-naming-BEM-Block-Element-Modifier\"><a href=\"#CSS-naming-BEM-Block-Element-Modifier\" class=\"headerlink\" title=\"CSS naming BEM(Block Element Modifier)\"></a>CSS naming BEM(Block Element Modifier)</h4><ul>\n<li><a href=\"http://getbem.com/naming/\">A CSS Naming Convention</a></li>\n<li><a href=\"https://css-tricks.com/bem-101/\">BEM 101</a></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;nav&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;nav__container&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;nav__list&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;navList__item--blue&quot;</span>&gt;</span>I am blue!<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;navList__item--red&quot;</span>&gt;</span>I am red!<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;navList__item--hover&quot;</span>&gt;</span>I have a hover state!<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"單位\"><a href=\"#單位\" class=\"headerlink\" title=\"單位\"></a>單位</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* px 點 */</span> </span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* em 倍數乘以父元素的 px 值 */</span> </span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">0.75rem</span> <span class=\"number\">1.5rem</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* rem 倍數乘以根元素的 px */</span> </span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">1.5rem</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* % 父元素百分比 */</span> </span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">50%</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* viewport height (百分比) */</span> </span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100vh</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"優化\"><a href=\"#優化\" class=\"headerlink\" title=\"優化\"></a>優化</h4><ul>\n<li><p>資源</p>\n<ul>\n<li>Minify : CSS壓縮</li>\n<li>ｇzip* : 檔案壓縮</li>\n</ul>\n</li>\n<li><p>載入方式</p>\n<ul>\n<li>CSS Sprites : 小圖合併</li>\n<li>Critical CSS : 重要 CSS 先 load</li>\n<li>Cache* : server 設定</li>\n</ul>\n</li>\n<li><p>執行方式</p>\n<ul>\n<li>選擇器</li>\n<li>屬性渲染</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"CSS-Selector-選擇器\"><a href=\"#CSS-Selector-選擇器\" class=\"headerlink\" title=\"CSS Selector 選擇器\"></a>CSS Selector 選擇器</h3><h4 id=\"種類\"><a href=\"#種類\" class=\"headerlink\" title=\"種類\"></a>種類</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Universal Selector 全體選擇器 */</span></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: yellow;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* element(tag) Selector */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* class Selector */</span></span><br><span class=\"line\"><span class=\"selector-class\">.evening</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: orange;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* id Selector */</span></span><br><span class=\"line\"><span class=\"selector-id\">#no1</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* input type=checkbox checked 同層後的 label */</span></span><br><span class=\"line\"><span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=checkbox]</span><span class=\"selector-pseudo\">:checked</span> ~ <span class=\"selector-tag\">label</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: line-through;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0.3</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* todo hover 內容的 .btn-delete 顯示 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.todo</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-delete</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Multiple-Selector\"><a href=\"#Multiple-Selector\" class=\"headerlink\" title=\"Multiple Selector\"></a>Multiple Selector</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* multiple selector  */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.group1</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: orange;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 下一層 */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.wrap</span> &gt; <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: pink;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 所有層 */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.wrap</span> <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 同一層下一個 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.line2</span> + <span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 同一層後面所有的 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.line2</span> ~ <span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Pseudo-classes\"><a href=\"#Pseudo-classes\" class=\"headerlink\" title=\"Pseudo classes\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/CSS/Pseudo-classes\">Pseudo classes</a></h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: orange;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* hover(滑鼠移至上方) */</span></span><br><span class=\"line\"><span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* xxxx-child */</span></span><br><span class=\"line\"><span class=\"comment\">/* 先取出 xxxx-child 再看看是不是 span*/</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:first</span>-child &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 第一個以外 */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:not</span>(<span class=\"selector-pseudo\">:first</span>-child) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:last-child</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: green;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:nth-child</span>(<span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 奇數順序 */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:nth-child</span>(odd) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 偶數順序 */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:nth-child</span>(even) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 順序 3,6,9 */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:nth-child</span>(<span class=\"number\">3</span>n) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 順序 3,6,9 + 1 --&gt; 1,4,7,10*/</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:nth-child</span>(<span class=\"number\">3</span>n+<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: blue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Pseudo-elements\"><a href=\"#Pseudo-elements\" class=\"headerlink\" title=\"Pseudo elements\"></a>Pseudo elements</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bfore, after 的 content 一定要存在才有作用, 至少要填 &quot;&quot; */</span></span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &gt; <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">::before</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">content</span>: <span class=\"string\">&quot;$&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &gt; <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">::after</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">content</span>: <span class=\"string\">&quot;NTD&quot;</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* </span></span><br><span class=\"line\"><span class=\"comment\">\tdata-xxx 自訂內容</span></span><br><span class=\"line\"><span class=\"comment\">\tattr() 可取出 HTML 中的 Attributes</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"selector-class\">.wrap2</span> &gt; <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">::before</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">content</span>: <span class=\"built_in\">attr</span>(class) ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrap2</span> &gt; <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">::after</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">content</span>: <span class=\"built_in\">attr</span>(data-id);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>1000<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap2&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;group&quot;</span> <span class=\"attr\">data-id</span>=<span class=\"string\">&quot;NTD&quot;</span>&gt;</span>100<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;group&quot;</span> <span class=\"attr\">data-id</span>=<span class=\"string\">&quot;RMB&quot;</span>&gt;</span>200<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CSS-權重\"><a href=\"#CSS-權重\" class=\"headerlink\" title=\"CSS 權重\"></a>CSS 權重</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- !important &gt; inline style &gt; id &gt; class &gt; tag--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.group1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: blue <span class=\"meta\">!important</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Span1<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;group1&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background:green;&quot;</span>&gt;</span>Span2<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Span3<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"CSS-Properties\"><a href=\"#CSS-Properties\" class=\"headerlink\" title=\"CSS Properties\"></a>CSS Properties</h3><h4 id=\"background\"><a href=\"#background\" class=\"headerlink\" title=\"background\"></a><a href=\"https://www.w3schools.com/cssref/css3_pr_background.asp\">background</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">./images.jpg</span>) no-repeat center center;</span></span><br><span class=\"line\">\t/* no-repeat, repeat</span><br><span class=\"line\"><span class=\"css\">\t\t <span class=\"attribute\">left</span>, <span class=\"attribute\">right</span>, center </span></span><br><span class=\"line\"><span class=\"css\">\t\t <span class=\"attribute\">top</span>, <span class=\"attribute\">bottom</span>, center */</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background-size</span>: cover;</span></span><br><span class=\"line\">\t/* 50% 50%</span><br><span class=\"line\">\t\t cover</span><br><span class=\"line\"><span class=\"css\">\t\t <span class=\"attribute\">auto</span></span></span><br><span class=\"line\">\t\t contain ... */</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.box2 &#123;</span><br><span class=\"line\">\t/* background: pink;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: <span class=\"number\">#ffff00</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">200</span>,<span class=\"number\">150</span>, <span class=\"number\">20</span>); */</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 最後一位 0: 透明, 1:不透明 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">200</span>,<span class=\"number\">150</span>, <span class=\"number\">20</span>,<span class=\"number\">0.3</span>);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>Box1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>Box2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"CSS-漸層-Gradient\"><a href=\"#CSS-漸層-Gradient\" class=\"headerlink\" title=\"CSS 漸層(Gradient)\"></a><a href=\"https://www.oxxostudio.tw/articles/202008/css-gradient.html\">CSS 漸層(Gradient)</a></h5><p>漸層有以下幾種 : </p>\n<ul>\n<li>linear-gradient：線性漸層</li>\n<li>radial-gradient：放射漸層</li>\n<li>conic-gradient：圓錐形漸層(較新)</li>\n<li>repeating-radial-gradient：放射重複漸層</li>\n<li>repeating-linear-gradient：線性重複漸層</li>\n<li>repeating-conic-gradient：圓錐形重複漸層(較新)</li>\n</ul>\n<p>可以套用漸層的 CSS 屬性有兩種 :</p>\n<ul>\n<li>background：元素的背景</li>\n<li>list-style-image：清單預設的符號圖案</li>\n</ul>\n<h6 id=\"Linear-Gradient-線性漸層\"><a href=\"#Linear-Gradient-線性漸層\" class=\"headerlink\" title=\"Linear Gradient 線性漸層\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient()\">Linear Gradient 線性漸層</a></h6><ul>\n<li>如果沒有設定角度，預設從上往下 進行漸層</li>\n<li>background:linear-gradient(方向, 顏色1 位置, 顏色2 位置);</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">80%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">80vh</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 由上而下 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* background: linear-gradient(red, yellow); */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 三種顏色 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* background: linear-gradient(red, yellow, red); */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* 角度 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: <span class=\"built_in\">linear-gradient</span>(<span class=\"number\">135deg</span>, red, yellow);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">&lt;/html</span><br></pre></td></tr></table></figure>\n\n\n\n\n<h4 id=\"border-border-radius-and-outline\"><a href=\"#border-border-radius-and-outline\" class=\"headerlink\" title=\"border, border-radius and outline\"></a>border, border-radius and outline</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* border 設定 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* border: 10px solid blue; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 設定 outline,位置不會動  */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* outline: 20px solid red; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* border-radius: 50% 50% 會變成圓形 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* border-radius: 10px 10px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">50%</span> <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* border 畫三角形, 其他邊設 transparent */</span></span></span><br><span class=\"line\">\t/* height: 0px;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">0px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-top</span>: <span class=\"number\">100px</span> solid red;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-right</span>: <span class=\"number\">100px</span> solid transparent;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-bottom</span>: <span class=\"number\">100px</span> solid transparent;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-left</span>: <span class=\"number\">100px</span> solid transparent; */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>Box<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"文字相關\"><a href=\"#文字相關\" class=\"headerlink\" title=\"文字相關\"></a>文字相關</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box &#123;\t</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">font-weight</span>: bold;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;新細明體&quot;</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 字距 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">letter-spacing</span>: <span class=\"number\">1px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 相對 font-size */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">1.5em</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 水平位置 center, left(default), right */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* overflow and text-overflow */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* overflow : hidden,scroll,visible ..  */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">white-space</span>: nowrap;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">overflow</span>: hidden;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* ellipsis 字超過會 show ..., 但必先設定 white-space: nowrap; and overflow: hidden; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-overflow</span>: ellipsis;</span></span><br><span class=\"line\">\t/* text-decoration: 文字特效 </span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">none</span>\t\t\t\t\t預設值，無額外文字特效</span></span><br><span class=\"line\">\t\toverline\t\t\t文字增加上線特效</span><br><span class=\"line\">\t\tunderline\t\t\t文字增加底線特效</span><br><span class=\"line\">\t\tline-through\t文字增加刪除線特效</span><br><span class=\"line\">\t*/</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-decoration</span>:underline;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed debitis eius minima ab earum autem nihil tempore nobis provident maxime! Repellat eligendi facere quod dolore voluptatibus nulla, voluptatem corporis error?<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"line-height\"><a href=\"#line-height\" class=\"headerlink\" title=\"line-height\"></a><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/line-height\">line-height</a></h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">box &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* 建議方法,相對字的大小*/</span></span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">3.5</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* 相對 font-size 大小, 若未設定參考 parent, 如 H1 為設定(follow browser),可能會有問題*/</span></span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">3em</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* 相對 本身字體之百分比, 也可能有不確定性 */</span></span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">34%</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* direct set px */</span></span><br><span class=\"line\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">32px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"text-align-文字水平對齊\"><a href=\"#text-align-文字水平對齊\" class=\"headerlink\" title=\"text-align 文字水平對齊\"></a>text-align 文字水平對齊</h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">box &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">text-align</span><span class=\"selector-pseudo\">:left</span>; \t\t//向左對齊</span><br><span class=\"line\">\t<span class=\"attribute\">text-align</span><span class=\"selector-pseudo\">:right</span>; \t//向右對齊</span><br><span class=\"line\">\t<span class=\"attribute\">text-align</span>:center; \t//置中</span><br><span class=\"line\">\t<span class=\"attribute\">text-align</span>:justify; //使左右對齊本文</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"text-indent-首行處理\"><a href=\"#text-indent-首行處理\" class=\"headerlink\" title=\"text-indent 首行處理\"></a>text-indent 首行處理</h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* 讓首行縮排 */</span></span><br><span class=\"line\">  <span class=\"attribute\">text-indent</span> : <span class=\"number\">36px</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* 讓首行凸出來 */</span></span><br><span class=\"line\"> <span class=\"attribute\">text-indent</span> : -<span class=\"number\">36px</span>;</span><br><span class=\"line\">\t<span class=\"comment\">/* 讓字變不見 */</span></span><br><span class=\"line\">\t<span class=\"attribute\">margin-left</span> : <span class=\"number\">36px</span>; </span><br><span class=\"line\">\t<span class=\"attribute\">text-indent</span> : -<span class=\"number\">36px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"word-break-文字斷行規則\"><a href=\"#word-break-文字斷行規則\" class=\"headerlink\" title=\"word-break 文字斷行規則\"></a>word-break 文字斷行規則</h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">normal    預設值，根據瀏覽器預設的斷行效果</span></span><br><span class=\"line\"><span class=\"comment\">keep-all\t不可以在單字的字母換行，必須保留完整單字，例如遇到半形空格才能換行</span></span><br><span class=\"line\"><span class=\"comment\">break-all 可以在單字的字母換行，不一定要完整單字才能換行(一般文章會將字切開)</span></span><br><span class=\"line\"><span class=\"comment\">break-word normal 和 overflow-wrap: anywhere  的合併</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">box &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">word-break</span>: break-all;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"white-space-空白與換行處理\"><a href=\"#white-space-空白與換行處理\" class=\"headerlink\" title=\"white-space 空白與換行處理\"></a>white-space 空白與換行處理</h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">normal\t 默認。 空白會被瀏覽器忽略。</span></span><br><span class=\"line\"><span class=\"comment\">pre\t     空白會被瀏覽器保留。 其行為方式類似HTML 中的&lt;pre&gt; 標籤。</span></span><br><span class=\"line\"><span class=\"comment\">nowrap\t 文本不會換行，文本會在在同一行上繼續，直到遇到&lt;br&gt; 標籤為止。</span></span><br><span class=\"line\"><span class=\"comment\">pre-wrap 保留空白符序列，但是正常地進行換行。</span></span><br><span class=\"line\"><span class=\"comment\">pre-line 合併空白符序列，但是保留換行符。 </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">box &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">white-space</span>: pre-line;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"writing-mode-and-inline-size-雖然-display-block-也會影顯寬度\"><a href=\"#writing-mode-and-inline-size-雖然-display-block-也會影顯寬度\" class=\"headerlink\" title=\"writing-mode and inline-size(雖然 display:block 也會影顯寬度)\"></a>writing-mode and inline-size(雖然 display:block 也會影顯寬度)</h5><ul>\n<li>writing-mode 文字顯示的方向<ul>\n<li>horizontal-tb : 水平顯示(default)</li>\n<li>vertical-rl : 由右到左垂直顯示方式</li>\n<li>vertical-lr : 由左到右的垂直顯示方式</li>\n</ul>\n</li>\n<li>inline-size 影響一个元素的width 或 height, 取决于writing-mode<ul>\n<li>fit-content </li>\n<li>max-content</li>\n<li>min-content</li>\n</ul>\n</li>\n<li>width 也可做以下設定(同 writing-mode=horizontal-tb 時 inline-size)<ul>\n<li>fit-content</li>\n<li>max-content</li>\n<li>min-content</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"transition-屬性改變漸變效果\"><a href=\"#transition-屬性改變漸變效果\" class=\"headerlink\" title=\"transition 屬性改變漸變效果\"></a>transition 屬性改變漸變效果</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box &#123;\t</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>:<span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border</span>: <span class=\"number\">2px</span> solid orange;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 加於此移出,移入才會都有效果 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span> ease-in;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-class\">.box</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">color</span>: white;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">cursor</span>: pointer;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tBox</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"transform-動畫\"><a href=\"#transform-動畫\" class=\"headerlink\" title=\"transform 動畫\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/CSS/transform\">transform 動畫</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\"><span class=\"comment\">/* 動畫 */</span></span></span><br><span class=\"line\">.box &#123;\t</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>:<span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border</span>: <span class=\"number\">2px</span> solid orange;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 加於此移出,移入才會都有效果 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">transition</span>: all <span class=\"number\">0.3s</span> ease-in;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-class\">.box</span><span class=\"selector-pseudo\">:hover</span> &#123;\t</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">360deg</span>);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\"><span class=\"comment\">/* 放至正中間 */</span></span></span><br><span class=\"line\">.box2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>:<span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">line-height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: pink;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">transform</span>: <span class=\"built_in\">translate</span>(-<span class=\"number\">50%</span>, -<span class=\"number\">50%</span>)</span></span><br><span class=\"line\">&#125;\t</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tBox</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tBox2</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"position-amp-z-index\"><a href=\"#position-amp-z-index\" class=\"headerlink\" title=\"position &amp; z-index\"></a>position &amp; z-index</h4><h5 id=\"position\"><a href=\"#position\" class=\"headerlink\" title=\"position\"></a>position</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">/* static 預設定位值</span><br><span class=\"line\">relative 相對定位 : 相對自己的位置(還是佔有原本的位置) </span><br><span class=\"line\">absolute 絕對定位 : 往父層一層一層找到不是 static 的位置</span><br><span class=\"line\">fixed 固定定位 : 相對瀏覽器(viewport) 的位置</span><br><span class=\"line\">可設定: top,left,right,bottom </span><br><span class=\"line\">==== fixed  ====</span><br><span class=\"line\">  移至垂直中</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">bottom</span>:<span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">  移至水平中</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">*/</span><br><span class=\"line\"></span><br><span class=\"line\">.box1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">position</span>: fixed;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">\t/* top: 50%;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">left</span>:<span class=\"number\">50%</span> */</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">bottom</span>:<span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">top</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">left</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box3 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box4 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box-41 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">right</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">top</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box5 &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">position</span>: fixed;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box4&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t444</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box-41&quot;</span>&gt;</span>444-1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box-42&quot;</span>&gt;</span>444-2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box5&quot;</span>&gt;</span>555<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"z-index\"><a href=\"#z-index\" class=\"headerlink\" title=\"z-index\"></a>z-index</h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* default 0, 數字大顯示在上面 */</span></span><br><span class=\"line\">box &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"position-sticky-支援較不普遍\"><a href=\"#position-sticky-支援較不普遍\" class=\"headerlink\" title=\"position sticky (支援較不普遍)\"></a>position sticky (支援較不普遍)</h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 滾動到某一個位置就不會再移動 */</span> </span><br><span class=\"line\"><span class=\"selector-class\">.box2</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">\t<span class=\"attribute\">top</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"display\"><a href=\"#display\" class=\"headerlink\" title=\"display\"></a>display</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.wrap &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t/* display: block;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-tag\">div</span> deafult is  &quot;<span class=\"attribute\">display</span>: block;&quot;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>,<span class=\"attribute\">width</span>  可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>,<span class=\"attribute\">padding</span> 可調 */</span></span><br><span class=\"line\">\t.box1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t/* display: inline;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>,<span class=\"attribute\">width</span>  不可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span> 左右可調,上下不可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span> 左右可調,上下可調但不影響隔壁元件(會影響 <span class=\"attribute\">background</span>) */</span></span><br><span class=\"line\">\t.box2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: inline;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t/* inline-block</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span> 可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>  可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span> 可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span> 可調 */</span></span><br><span class=\"line\">\t.box3 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>3333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>1111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>2222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>3333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>1111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>2222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>3333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"visibility\"><a href=\"#visibility\" class=\"headerlink\" title=\"visibility\"></a>visibility</h4><h5 id=\"visible-default-可見\"><a href=\"#visible-default-可見\" class=\"headerlink\" title=\"visible(default) - 可見\"></a>visible(default) - 可見</h5><h5 id=\"hidden-隱藏但還佔位置\"><a href=\"#hidden-隱藏但還佔位置\" class=\"headerlink\" title=\"hidden - 隱藏但還佔位置\"></a>hidden - 隱藏但還佔位置</h5><h5 id=\"collapse\"><a href=\"#collapse\" class=\"headerlink\" title=\"collapse\"></a>collapse</h5><ul>\n<li>在表格的 row 或 column (row、row group、column 和 column group 元素，也就是分別為 HTML 中的 <code>tr</code>、<code>tbody</code>、<code>col</code> 和 <code>colgroup</code> 元素) 使用 <code>visibility: collapse</code> 時：<ul>\n<li>會導致整個 row 或 column 從顯示結果中刪除，原本佔用的空間會讓其他內容使用，也就是說顯示結果很像是將 <code>display: none</code> 應用在表格的 row 或 column 一樣</li>\n<li>與 collapsed column 或 row (合併欄或合併列) 相交 (intersect) 的 spanned row 或 column (跨欄或跨列) 的內容會被裁切掉 (clipped)</li>\n<li>可以在不強制重新佈局 (re-layout) 表格的情況下，使用動態效果來刪除表格的 row 或 column</li>\n</ul>\n</li>\n<li>對 table cell (也就是 HTML 中的 <code>td</code> 或 <code>th</code> 元素) 使用 <code>visibility: collapse</code> 時，效果相當於 <code>visibility: hidden</code></li>\n<li>除了上述以外的其他元素使用 <code>visibility: collapse</code> 時，效果相當於 <code>visibility: hidden</code></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-tag\">table</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-tag\">td</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.collapse &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">visibility</span>: collapse;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>1.1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;collapse&quot;</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>1.3<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">tr</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;collapse&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>2.1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>2.2<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>2.3<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>3.1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>3.2<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>3.3<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:150px\">\n    <img src=\"/2021/05/18/css-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n\n<h4 id=\"Box-model\"><a href=\"#Box-model\" class=\"headerlink\" title=\"Box model\"></a>Box model</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.item &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">3px</span> solid black;</span></span><br><span class=\"line\">\t\t/*  content-box(default):width/height 不含 padding and border</span><br><span class=\"line\"><span class=\"css\">\t\t\t  <span class=\"attribute\">border</span>-box::width/height 不含 padding and border</span></span><br><span class=\"line\">\t\t*/</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">box-sizing</span>: border-box;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>max-width/min-width</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">min-width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">max-width</span>: <span class=\"number\">1200px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>border-radius 圓角屬性</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* top-left corner, top-right corner, bottom-right corner, bottom-left corner */</span></span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"number\">0</span> <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Flex\"><a href=\"#Flex\" class=\"headerlink\" title=\"Flex\"></a>Flex</h4><h5 id=\"說明\"><a href=\"#說明\" class=\"headerlink\" title=\"說明\"></a>說明</h5><p><strong>外容器</strong><br>主軸 : main axis<br>交錯軸 : cross axis</p>\n<table>\n<thead>\n<tr>\n<th>軸線</th>\n<th>屬性</th>\n<th align=\"left\">選  項</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>主軸</td>\n<td>display</td>\n<td align=\"left\">flex, inline-flex</td>\n</tr>\n<tr>\n<td>主軸</td>\n<td>flex-direction(方向)</td>\n<td align=\"left\">row(default), row-reverse, column, column-reverse</td>\n</tr>\n<tr>\n<td>主軸</td>\n<td>flex-wrap(換行)</td>\n<td align=\"left\">nowrap(default), wrap, wrap-reverse</td>\n</tr>\n<tr>\n<td>交錯軸</td>\n<td>justify-content(主軸對齊)</td>\n<td align=\"left\">flex-start, flex-end, center, space-between, space-around</td>\n</tr>\n<tr>\n<td>交錯軸</td>\n<td>align-items(單行交錯軸對齊)</td>\n<td align=\"left\">flex-start, flex-end, center, space-between, space-around,stretch,baseline</td>\n</tr>\n<tr>\n<td>交錯軸</td>\n<td>align-content(多行交錯軸對齊)</td>\n<td align=\"left\">flex-start, flex-end, center, space-between, space-around,stretch</td>\n</tr>\n</tbody></table>\n<p><strong>內元件</strong></p>\n<table>\n<thead>\n<tr>\n<th>屬性</th>\n<th align=\"left\">選  項</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Flex(伸縮屬性)</td>\n<td align=\"left\">flex-grow, flex-shrink 和 flex-basis</td>\n</tr>\n<tr>\n<td>align-self</td>\n<td align=\"left\">個別調整子元素在交錯軸線的位置,屬性與 align-ite相同</td>\n</tr>\n<tr>\n<td>Order</td>\n<td align=\"left\">可以重新定義元件的排列順序, default 0, 由小到大</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.debug *, .debug &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid gold;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.flex &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* 外容器 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex, inline-flex */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">550px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* === 主軸 === */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/*flex-direction(方向) : row(default) | row-reverse | column | column-reverse */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-direction</span>: row;</span></span><br><span class=\"line\">\t\t/* flex-wrap(換行): nowrap(default) | wrap | wrap-reverse</span><br><span class=\"line\">\t\t   若不換行自動縮小 */</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-wrap</span>: wrap;</span></span><br><span class=\"line\">\t\t/* justify-content(主軸對齊)</span><br><span class=\"line\"><span class=\"css\">\t\t   <span class=\"attribute\">flex</span>-start：預設值，對齊最左邊的 <span class=\"selector-tag\">main</span> start</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t <span class=\"attribute\">flex</span>-end：對齊最左邊的 <span class=\"selector-tag\">main</span> end</span></span><br><span class=\"line\">\t\t\t center：水平置中</span><br><span class=\"line\"><span class=\"css\">\t\t\t space-between：平均分配內容元素，左右元素將會與 <span class=\"selector-tag\">main</span> start 和 <span class=\"selector-tag\">main</span> end 貼齊</span></span><br><span class=\"line\">\t\t\t space-around：平均分配內容元素，間距也是平均分配 */</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">justify-content</span>: space-around;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* === 交錯軸 === */</span></span></span><br><span class=\"line\">\t\t/* align-items(單行交錯軸對齊)</span><br><span class=\"line\"><span class=\"css\">\t\t   <span class=\"attribute\">flex</span>-start：對齊最上面的 cross start</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t <span class=\"attribute\">flex</span>-end：對齊最下面的 cross end</span></span><br><span class=\"line\">\t\t\t center：垂直置中</span><br><span class=\"line\"><span class=\"css\">\t\t\t stretch：預設值，將內容元素全部撐開至 Flexbox 的高度(item 設 <span class=\"attribute\">height</span> 即無效</span></span><br><span class=\"line\">\t\t\t baseline：以所有內容元素的基線作為對齊標準 */</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* align-items: center; */</span></span></span><br><span class=\"line\">\t\t/* align-content(多行交錯軸對齊) </span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">flex</span>-start：對齊最上面的 cross start</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">flex</span>-end：對齊最下面的 cross end</span></span><br><span class=\"line\">\t\t\tcenter：垂直置中</span><br><span class=\"line\">\t\t\tspace-between：將第一行與最後一行分別對齊最上方與最下方</span><br><span class=\"line\">\t\t\tspace-around：每行平均分配間距</span><br><span class=\"line\">\t\t\tstretch：預設值，內容元素全部撐開 */</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">align-content</span>: space-around;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">10px</span> <span class=\"number\">0</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.item &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* 內元件 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\">\t\t/* flex(伸縮屬性) 屬性是flex-grow, flex-shrink 和 flex-basis的簡寫，默認值為 0 1 auto</span><br><span class=\"line\"><span class=\"css\">\t\t\t <span class=\"attribute\">flex-grow</span> 設定 <span class=\"attribute\">flex</span>元素 的延伸因子，默認值<span class=\"number\">0</span> (按比例延伸)可設 某些<span class=\"number\">1</span>,某些<span class=\"number\">2</span>  即 <span class=\"number\">1</span>:<span class=\"number\">2</span> 延伸</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t <span class=\"attribute\">flex-shrink</span> 指定了 <span class=\"attribute\">flex</span>元素 的收縮規則，默認值是 <span class=\"number\">1</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t <span class=\"attribute\">flex-basis</span> 指定了 <span class=\"attribute\">flex</span>元素 在主軸方向上的初始大小 </span></span><br><span class=\"line\"><span class=\"css\">\t\t\t \t\t<span class=\"attribute\">flex</span> item 放進 <span class=\"attribute\">flex</span> 容器，並不能保證能夠按照 <span class=\"attribute\">flex-basis</span> 設置的大小展示。瀏覽器會根據 <span class=\"attribute\">flex-basis</span> 計算主軸是否有剩餘空間</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t\t\t <span class=\"number\">1</span>. 當指定一個<span class=\"attribute\">flex-basis</span>值的時候，<span class=\"attribute\">width</span>屬性 就被忽略了</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t\t\t <span class=\"number\">2</span>. <span class=\"attribute\">min-width</span>和<span class=\"attribute\">max-width</span>會限制<span class=\"attribute\">flex-basis</span>值</span></span><br><span class=\"line\">\t\t\t */</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-grow</span>: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-shrink</span>: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* align-self 可以個別調整子元素在交錯軸線的位置，屬性與 align-items 相同。假如我們已經在父元素上設定 align-item，但要其中一個內容物的位置需要調整成其他對齊方式，這時我們就可以針對該元素設定 align-self 來覆寫原本 align-item 的屬性。 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* align-self: center */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* Order 可以重新定義元件的排列順序, default 0, 由小到大 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* order: -1 */</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;flex debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>6<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Flex-example\"><a href=\"#Flex-example\" class=\"headerlink\" title=\"Flex example\"></a><a href=\"/css-1/flex\">Flex example</a></h5><h6 id=\"flex-row\"><a href=\"#flex-row\" class=\"headerlink\" title=\"flex (row)\"></a>flex (row)</h6><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.flex &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.inline-flex &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: inline-flex;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.container &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* padding: 20px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background-color</span>: coral;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-direction</span>: row;\t <span class=\"comment\">/* row,column, row-reverse, column-reverse*/</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-wrap</span>: nowrap;  \t <span class=\"comment\">/* 換行: nowrap, wrap */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-flow: row wrap;*/</span> <span class=\"comment\">/* flex-direction: row; +  flex-wrap: nowrap; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">justify-content</span>: space-evenly; <span class=\"comment\">/*flex-start, flex-end, center, space-between, space-evenly, space-around */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">700px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">align-items</span>: center; <span class=\"comment\">/*stretch, flex-start, center, flex-end,  baseline */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-wrap: wrap 時換行排列(有設 height) */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/*stretch, flex-start, center, flex-end,  baseline, space-between, space-evenly, space-around */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* align-content: stretch;  */</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.item &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">30PX</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* margin:10px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#777</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* for test align-items: baseline */</span></span></span><br><span class=\"line\">\t/* .item1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">70px</span>;</span></span><br><span class=\"line\">\t&#125; */</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* for test order and align-self */</span></span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* align-self: stretch, flex-start, center, flex-end,  baseline */</span></span></span><br><span class=\"line\">\t/* .item1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">order</span>: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">align-self</span>: flex-start;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.item5 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">order</span>: -<span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">align-self</span>: flex-end;</span></span><br><span class=\"line\">\t&#125; */</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container flex&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item1&quot;</span>&gt;</span>A<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item2&quot;</span>&gt;</span>B<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item3&quot;</span>&gt;</span>C<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item4&quot;</span>&gt;</span>D<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item5&quot;</span>&gt;</span>E<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"inline-flex-row\"><a href=\"#inline-flex-row\" class=\"headerlink\" title=\"inline-flex(row)\"></a>inline-flex(row)</h6><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container inline-flex&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item1&quot;</span>&gt;</span>A<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item2&quot;</span>&gt;</span>B<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item3&quot;</span>&gt;</span>C<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item4&quot;</span>&gt;</span>D<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item item5&quot;</span>&gt;</span>E<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"flex-column\"><a href=\"#flex-column\" class=\"headerlink\" title=\"flex (column)\"></a>flex (column)</h6><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.container-column &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* padding: 20px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background-color</span>: coral;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-direction</span>: column;\t <span class=\"comment\">/* row,column, row-reverse, column-reverse*/</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-wrap</span>: nowrap;  \t <span class=\"comment\">/* 換行: nowrap, wrap */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-flow: row wrap;*/</span> <span class=\"comment\">/* flex-direction: row; +  flex-wrap: nowrap; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">justify-content</span>: space-around; <span class=\"comment\">/*flex-start, flex-end, center, space-between, space-evenly, space-around */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">700px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.item-column &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">30PX</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* margin:10px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#777</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">70px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container-column flex&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-column item1&quot;</span>&gt;</span>A<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-column item2&quot;</span>&gt;</span>B<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-column item3&quot;</span>&gt;</span>C<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-column item4&quot;</span>&gt;</span>D<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-column item5&quot;</span>&gt;</span>E<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"flex-flex-grow-flex-shrink-flex-basis\"><a href=\"#flex-flex-grow-flex-shrink-flex-basis\" class=\"headerlink\" title=\"flex (flex-grow, flex-shrink, flex-basis)\"></a>flex (flex-grow, flex-shrink, flex-basis)</h6><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.container-flex &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* padding: 20px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background-color</span>: coral;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-direction</span>: row;\t <span class=\"comment\">/* row,column, row-reverse, column-reverse*/</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-wrap</span>: nowrap;  \t <span class=\"comment\">/* 換行: nowrap, wrap */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-flow: row wrap;*/</span> <span class=\"comment\">/* flex-direction: row; +  flex-wrap: nowrap; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">justify-content</span>: space-evenly; <span class=\"comment\">/*flex-start, flex-end, center, space-between, space-evenly, space-around */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">700px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">align-items</span>: center; <span class=\"comment\">/*stretch, flex-start, center, flex-end,  baseline */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-wrap: wrap 時換行排列(有設 height) */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/*stretch, flex-start, center, flex-end,  baseline, space-between, space-evenly, space-around */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* align-content: stretch;  */</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.item-flex &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">30PX</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>:<span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#777</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.item1-flex &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-grow default 0 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-grow: 5; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-shrink default 1, 縮至 內容大小及不會再縮 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-shrink: 5; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-basis: set main axis 長度 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">flex-basis</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex: flex-grow flex-shrink flex-basis */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex: 0 1 auto; */</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.item5-flex &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-grow default 0 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-grow: 1; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-shrink: must set flex-wrap: nowrap; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-shrink default 1, 縮至 內容大小及不會再縮 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* flex-shrink: 1;  */</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container-flex flex&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-flex item1-flex&quot;</span>&gt;</span>A<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-flex item2-flex&quot;</span>&gt;</span>B<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-flex item3-flex&quot;</span>&gt;</span>C<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-flex item4-flex&quot;</span>&gt;</span>D<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-flex item5-flex&quot;</span>&gt;</span>E<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h4 id=\"Grid\"><a href=\"#Grid\" class=\"headerlink\" title=\"Grid\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/CSS/CSS_Grid_Layout/Basic_Concepts_of_Grid_Layout\">Grid</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.debug *, .debug &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">outline</span>: <span class=\"number\">1px</span> solid gold</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">html</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">html</span>, <span class=\"selector-tag\">body</span>, <span class=\"selector-tag\">h1</span> ,<span class=\"selector-tag\">h2</span> ,<span class=\"selector-tag\">h3</span> ,<span class=\"selector-tag\">h4</span> ,<span class=\"selector-tag\">h5</span> ,<span class=\"selector-tag\">h6</span> ,<span class=\"selector-tag\">p</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">10px</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.container &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: grid;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* grid-template-columns 固定或比例 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* grid-template-columns 或 grid-template-rows 明式格線 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* grid-template-columns: 200px 200px 200px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* grid-template-columns: 2fr 1fr 1fr; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\tgrid-template-<span class=\"attribute\">columns</span>: <span class=\"built_in\">repeat</span>(<span class=\"number\">3</span>, <span class=\"number\">1</span>fr);</span></span><br><span class=\"line\"><span class=\"css\">  \t<span class=\"comment\">/* grid-template-rows: 100px 100px; */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* grid-auto-rows 或 grid-auto-columns 暗式格線 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* grid-auto-rows: minmax(100px, auto); */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\tgrid-<span class=\"attribute\">auto</span>-rows: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* Gutters */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\tgrid-<span class=\"attribute\">column-gap</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">   \tgrid-row-gap: <span class=\"number\">1em</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.box1 &#123;</span><br><span class=\"line\"><span class=\"css\">    grid-column-start: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">    grid-column-end: <span class=\"number\">4</span>;</span></span><br><span class=\"line\"><span class=\"css\">    grid-row-start: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">    grid-row-end: <span class=\"number\">3</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.box2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\tgrid-column-start: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\tgrid-row-start: <span class=\"number\">3</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\tgrid-row-end: <span class=\"number\">5</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box4&quot;</span>&gt;</span>444<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box5&quot;</span>&gt;</span>555<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div style=\"width:700px\">\n    <img src=\"/2021/05/18/css-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 直接分配給 class */</span></span></span><br><span class=\"line\">\t/* header 5 格</span><br><span class=\"line\"><span class=\"css\">\t   <span class=\"selector-tag\">main</span> <span class=\"number\">5</span> 格</span></span><br><span class=\"line\"><span class=\"css\">\t   <span class=\"selector-tag\">footer</span> <span class=\"number\">4</span> 格(第一格不占用) */</span></span><br><span class=\"line\">\t.container &#123;</span><br><span class=\"line\">\t\tgrid-template-areas: </span><br><span class=\"line\">\t\t &#x27;header header header header header&#x27;</span><br><span class=\"line\">\t\t &#x27;main main main main main&#x27;</span><br><span class=\"line\">\t\t &#x27;!.footer footer footer&#x27;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* maping class to grid */</span></span></span><br><span class=\"line\">\t.main &#123;</span><br><span class=\"line\"><span class=\"css\">\t\tgrid-area: main;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.header &#123;</span><br><span class=\"line\"><span class=\"css\">\t\tgrid-area: header;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.footer &#123;</span><br><span class=\"line\"><span class=\"css\">\t\tgrid-area: footer;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* 另一種分配格子方式 start_column_index/start_row_index/end_column_index/end_row_index */</span></span></span><br><span class=\"line\">\t.main &#123;</span><br><span class=\"line\"><span class=\"css\">\t\tgrid-area: <span class=\"number\">1</span>/<span class=\"number\">2</span>/<span class=\"number\">8</span>/<span class=\"number\">3</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ol-ul-li\"><a href=\"#ol-ul-li\" class=\"headerlink\" title=\"ol/ul/li\"></a>ol/ul/li</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* list-style-type</span></span><br><span class=\"line\"><span class=\"comment\">\t\tnone (沒有)</span></span><br><span class=\"line\"><span class=\"comment\">\t\tdisc (全黑圓圈)</span></span><br><span class=\"line\"><span class=\"comment\">\t\tcircle (空心圓圈)</span></span><br><span class=\"line\"><span class=\"comment\">\t\tsquare (正方形)</span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span></span><br><span class=\"line\">\t<span class=\"attribute\">list-style-type</span>:square;</span><br><span class=\"line\">\t<span class=\"comment\">/* list-style-position 屬性讓我們可以決定記號是否應該被視為是文字的一部份，並且由此而決定記號的位置。這個屬性可能的設定值為 &quot;inside&quot; 及 &quot;outside&quot;。預定值為 &quot;outside&quot;。</span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span></span><br><span class=\"line\">\t<span class=\"attribute\">list-style-position</span>:inside;</span><br><span class=\"line\">\t// <span class=\"attribute\">list-style-image</span> 用來將某個圖案設定為記號</span><br><span class=\"line\">\t<span class=\"attribute\">list-style-image</span>:<span class=\"built_in\">url</span>(<span class=\"string\">&quot;circle.gif&quot;</span>);</span><br><span class=\"line\">\t// <span class=\"attribute\">list-style</span> :　list-style-tyle、list-style-position、及 list-style-image</span><br><span class=\"line\">\tlist-style: <span class=\"built_in\">url</span>(<span class=\"string\">&quot;circle.gif&quot;</span>) none inside;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"other\"><a href=\"#other\" class=\"headerlink\" title=\"other\"></a>other</h4><h5 id=\"cursor\"><a href=\"#cursor\" class=\"headerlink\" title=\"cursor\"></a>cursor</h5><figure class=\"highlight cs\"><table><tr><td class=\"code\"><pre><span class=\"line\">box &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* cursor 改變滑鼠游標的形狀</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tcrosshair - 十字線型</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tmove - 十字箭頭(移動)</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tall-scroll - 四方捲動</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tn-resize - 箭頭朝上</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\ts-resiz - 箭頭朝下</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\te-resize - 箭頭朝右</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tw-resize - 箭頭朝左</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tnw-resize - 箭頭左上</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tsw-resize - 箭頭左下</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tse-resize - 箭頭朝右上</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tne-resize - 箭頭朝右下</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tcol-resize - 改變直行</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\trow-resize - 改變橫欄</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\ttext - I 輸入文字符號</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tvertical-text - 垂直</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\thelp - 協助加一問號</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\twait - 等待中；漏斗</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tprogress - 進行中；作</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tpointer - 手型，表示</span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span></span><br><span class=\"line\">\tcursor: pointer;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"box-shadow\"><a href=\"#box-shadow\" class=\"headerlink\" title=\"box-shadow\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/CSS/box-shadow\">box-shadow</a></h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/* offset-x | offset-y | blur-radius(模糊半徑) | color */</span></span><br><span class=\"line\">\t<span class=\"attribute\">box-shadow</span>: <span class=\"number\">10px</span> <span class=\"number\">5px</span> <span class=\"number\">5px</span> black;\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/* offset-x | offset-y | blur-radius | spread-radius(正值將導致陰影擴大並變大，負值將導致陰影縮小) | color */</span></span><br><span class=\"line\">\t<span class=\"attribute\">box-shadow</span>: <span class=\"number\">2px</span> <span class=\"number\">2px</span> <span class=\"number\">2px</span> <span class=\"number\">1px</span> <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.2</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"font-family-字體\"><a href=\"#font-family-字體\" class=\"headerlink\" title=\"font-family 字體\"></a><a href=\"https://www.oxxostudio.tw/articles/201811/css-font-family.html\">font-family 字體</a></h5><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">/*  使用 &quot;Microsoft JhengHei&quot; 不要使用 “微軟正黑體” 可避免某些 browser 誤判/* </span></span><br><span class=\"line\"><span class=\"comment\">\t/* font-family: &quot;微軟正黑體&quot;; */</span></span><br><span class=\"line\">\t<span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;Microsoft JhengHei&quot;</span>; </span><br><span class=\"line\">\t<span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;Times New Roman&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"vertical-align\"><a href=\"#vertical-align\" class=\"headerlink\" title=\"vertical-align\"></a>vertical-align</h5><p>可以用來設計網頁中圖片在垂直方向的對齊方式</p>\n<ul>\n<li>baseline : 預設值，元素在該行的基礎線上，大約在文字的中間位置，並不美觀</li>\n<li>sub : 圖片垂直對齊該行本文的下標位置</li>\n<li>super : 圖片垂直對齊該行本文的上標位置</li>\n<li>top : 圖片垂直對齊該行元素的最高位置</li>\n<li>:text-top : 圖片垂直對齊該行文字的最高位置</li>\n<li>middle : 圖片垂直對齊該行文字的置中位置</li>\n<li>bottom : 圖片垂直對齊該行元素的最低位置</li>\n<li>text-bottom : 圖片垂直對齊該行文字的最低位置</li>\n<li>% : 以百分比來讓圖片垂直對齊該行文字，可以有負值</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">box &#123;</span><br><span class=\"line\">  <span class=\"attribute\">vertical-align</span>:middle;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"min-height\"><a href=\"#min-height\" class=\"headerlink\" title=\"min-height\"></a>min-height</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 設定占滿整個畫面高度,以免畫面底端留有空白 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.mini-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">100vh</span> - <span class=\"number\">424px</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"opacity-不透明度\"><a href=\"#opacity-不透明度\" class=\"headerlink\" title=\"opacity 不透明度\"></a>opacity 不透明度</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 不透明 */</span></span><br><span class=\"line\"><span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"comment\">/* 透明 */</span></span><br><span class=\"line\"><span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"calc\"><a href=\"#calc\" class=\"headerlink\" title=\"calc()\"></a><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/calc()\">calc()</a></h4><ul>\n<li>允許在聲明CSS屬性值時執行一些計算它可以用在如下場合&lt;length&gt;、&lt;frequency&gt;, &lt;angle&gt;、&lt;time&gt;、&lt;percentage&gt;、&lt;umber&gt;、或 &lt;integer&gt;</li>\n<li>&plus; 和 - 運算符的兩邊必須要有空白字符</li>\n<li>&ast; 和 / 這兩個運算符前後不需要空白字符，但如果考慮到統一性，仍然推薦加上空白符</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t+ 加法。</span></span><br><span class=\"line\"><span class=\"comment\">\t- 減法。</span></span><br><span class=\"line\"><span class=\"comment\">\t* 乘法，乘數中至少有一個是 &lt;number&gt;。</span></span><br><span class=\"line\"><span class=\"comment\">\t/ 除法，除數（/右面的數）必須是&lt;number&gt;。</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter\">filter</a></h4><ul>\n<li><a href=\"http://blog.shihshih.com/css-filter/\">CSS濾鏡效果</a></li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">CSS Filters濾鏡效果共有十種特效</span></span><br><span class=\"line\"><span class=\"comment\">grayscale灰階</span></span><br><span class=\"line\"><span class=\"comment\">sepia懷舊</span></span><br><span class=\"line\"><span class=\"comment\">saturate飽和</span></span><br><span class=\"line\"><span class=\"comment\">hue-rotate色相旋轉</span></span><br><span class=\"line\"><span class=\"comment\">invert負片</span></span><br><span class=\"line\"><span class=\"comment\">opacity不透明</span></span><br><span class=\"line\"><span class=\"comment\">brightness亮度</span></span><br><span class=\"line\"><span class=\"comment\">contrast對比</span></span><br><span class=\"line\"><span class=\"comment\">blur模糊</span></span><br><span class=\"line\"><span class=\"comment\">drop-shadow下拉陰影</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.games</span> <span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">filter</span>: <span class=\"built_in\">brightness</span>(<span class=\"number\">0.8</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.games</span> <span class=\"selector-class\">.item</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">filter</span>: <span class=\"built_in\">brightness</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"RWD-相關\"><a href=\"#RWD-相關\" class=\"headerlink\" title=\"RWD 相關\"></a>RWD 相關</h3><h4 id=\"RWD-meta\"><a href=\"#RWD-meta\" class=\"headerlink\" title=\"RWD meta\"></a>RWD meta</h4><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"overflow\"><a href=\"#overflow\" class=\"headerlink\" title=\"overflow\"></a>overflow</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t屬性 overflow, overflow-x, overflow-y </span></span><br><span class=\"line\"><span class=\"comment\">\toverflow: auto;　\t\t- 預設會自動使用捲軸</span></span><br><span class=\"line\"><span class=\"comment\">\toverflow: visible;　- (Default)顯示的文字或圖片會直接超出範圍，不使用捲軸</span></span><br><span class=\"line\"><span class=\"comment\">\toverflow: hidden;　\t- 自動隱藏超出的文字或圖片</span></span><br><span class=\"line\"><span class=\"comment\">\toverflow: scrol;　\t- 自動產生捲軸  */</span></span><br><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">overflow</span>: visible;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"media\"><a href=\"#media\" class=\"headerlink\" title=\"media\"></a>media</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* RWD 由 desktop 做起 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.title</span>&#123;</span><br><span class=\"line\"> <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 768px 以下（含） */</span></span><br><span class=\"line\">@media(max-width:768px) &#123;</span><br><span class=\"line\">\t<span class=\"selector-class\">.title</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: blue;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 375px 以下（含） */</span></span><br><span class=\"line\">@media(max-width:375px) &#123;</span><br><span class=\"line\">\t<span class=\"selector-class\">.title</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: yellow;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* RWD 由 mobil 做起 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.title</span>&#123;</span><br><span class=\"line\"> <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 375px 以上（含） */</span></span><br><span class=\"line\">@media(min-width:375px) &#123;</span><br><span class=\"line\">\t<span class=\"selector-class\">.title</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: yellow;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 768px 以上（含） */</span></span><br><span class=\"line\">@media(min-width:768px) &#123;</span><br><span class=\"line\">\t<span class=\"selector-class\">.title</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">color</span>: blue;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"參考\"><a href=\"#參考\" class=\"headerlink\" title=\"參考\"></a>參考</h3><ul>\n<li><a href=\"https://code.tutsplus.com/zh-hant/tutorials/the-30-css-selectors-you-must-memorize--net-16048\">30個你必須記住的CSS選擇器</a></li>\n<li><a href=\"https://www.w3schools.com/css/css3_flexbox_container.asp\">CSS Flex Container</a></li>\n<li><a href=\"https://wcc723.github.io/css/2017/07/21/css-flex/\">圖解：CSS Flex 屬性</a></li>\n<li><a href=\"https://css-tricks.com/snippets/css/a-guide-to-flexbox/\">Complete Guide for Flexbox</a></li>\n<li><a href=\"https://www.oxxostudio.tw/articles/202008/css-gradient.html\">深入理解 CSS 漸層</a></li>\n</ul>\n","categories":["Front End"],"tags":["css"]},{"title":"前端 package","url":"/2021/06/23/tool-2/","content":"<h3 id=\"CKEditor-4-所見即所得文字編輯器\"><a href=\"#CKEditor-4-所見即所得文字編輯器\" class=\"headerlink\" title=\"CKEditor 4 - 所見即所得文字編輯器\"></a><a href=\"https://cdn.ckeditor.com/\">CKEditor 4</a> - 所見即所得文字編輯器</h3><ul>\n<li>因 reset.css 會清掉 css default 值, 所以無法顯示出設定效果,所以要改為 normalize.css</li>\n<li>htmlspecialchars HTML 跳脫字元 會忽略 tag, 所以要拿掉才會有效果<code>(CKEditor 會保護,手動加入無效)</code></li>\n</ul>\n<span id=\"more\"></span>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- add .js --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.ckeditor.com/4.16.1/standard/ckeditor.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- add tag textarea --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;edit-content&quot;</span> <span class=\"attr\">rows</span>=<span class=\"string\">&quot;10&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t<span class=\"attr\">name</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span>&lt;?php echo $content; ?&gt;<span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- run CKEditor function --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"> \t\tCKEDITOR.replace( <span class=\"string\">&#x27;content&#x27;</span> );</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SASS\"><a href=\"#SASS\" class=\"headerlink\" title=\"SASS\"></a>SASS</h3><p>其他 css 前端處理器: LESS, Stylus</p>\n<h4 id=\"install-and-build\"><a href=\"#install-and-build\" class=\"headerlink\" title=\"install and build\"></a>install and build</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install </span></span><br><span class=\"line\">npm install -g sass</span><br><span class=\"line\"><span class=\"comment\"># version</span></span><br><span class=\"line\">sass --version</span><br><span class=\"line\"><span class=\"comment\"># build</span></span><br><span class=\"line\">sass main.scss main.css</span><br><span class=\"line\"><span class=\"comment\"># build when file change</span></span><br><span class=\"line\">sass --watch main.scss main.css</span><br><span class=\"line\"><span class=\"comment\"># 壓縮</span></span><br><span class=\"line\">sass --style=compressed main.scss main.css</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"nesting-and-variables\"><a href=\"#nesting-and-variables\" class=\"headerlink\" title=\"nesting and variables\"></a>nesting and variables</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;style.css&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;section&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;section__title&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\tTest SASS</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;section__wrapper&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;color color-primary&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;color color-secondary&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;color color-warning&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$primary</span>: <span class=\"number\">#00adb5</span></span><br><span class=\"line\"><span class=\"variable\">$secondary</span>: <span class=\"number\">#364f6b</span></span><br><span class=\"line\"><span class=\"variable\">$warning</span>: <span class=\"number\">#ff2f63</span></span><br><span class=\"line\"><span class=\"variable\">$info</span>: blue</span><br><span class=\"line\"></span><br><span class=\"line\">.section </span><br><span class=\"line\">\twidth: <span class=\"number\">100%</span></span><br><span class=\"line\">\theight: <span class=\"number\">50%</span></span><br><span class=\"line\">\tborder-bottom: <span class=\"number\">1px</span> solid <span class=\"variable\">$primary</span></span><br><span class=\"line\">\t&amp;__title</span><br><span class=\"line\">\t\ttext-align: center</span><br><span class=\"line\">\t&amp;__wrapper</span><br><span class=\"line\">\t\tdisplay: flex</span><br><span class=\"line\"></span><br><span class=\"line\">.color </span><br><span class=\"line\">\twidth: <span class=\"number\">50px</span></span><br><span class=\"line\">\theight: <span class=\"number\">50px</span></span><br><span class=\"line\">\tmargin: <span class=\"number\">10px</span></span><br><span class=\"line\">\t&amp;-primary</span><br><span class=\"line\">\t\tbackground: <span class=\"variable\">$primary</span></span><br><span class=\"line\">\t&amp;-secondary</span><br><span class=\"line\">\t\tbackground: <span class=\"variable\">$secondary</span></span><br><span class=\"line\">\t&amp;-warning</span><br><span class=\"line\">\t\tbackground: <span class=\"variable\">$warning</span></span><br><span class=\"line\">\t&amp;:hover </span><br><span class=\"line\">\t\tbackground: <span class=\"variable\">$info</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"import-extend-mixin-and-function\"><a href=\"#import-extend-mixin-and-function\" class=\"headerlink\" title=\"import , extend, mixin and function\"></a>import , extend, mixin and function</h4><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// import</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;variables&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">// extend</span><br><span class=\"line\">// 同一extend會以, 分開</span><br><span class=\"line\">%btn </span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span> <span class=\"number\">2rem</span></span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: <span class=\"variable\">$secondary</span></span><br><span class=\"line\">.btn</span><br><span class=\"line\">\t&amp;-<span class=\"number\">1</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">@extend</span> %btn</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span></span><br><span class=\"line\">\t&amp;-<span class=\"number\">2</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">@extend</span> %btn</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span></span><br><span class=\"line\">\t&amp;-<span class=\"number\">3</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">@extend</span> %btn</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span></span><br><span class=\"line\"></span><br><span class=\"line\">// function</span><br><span class=\"line\">// 含 return</span><br><span class=\"line\"><span class=\"keyword\">@function</span> letter-space(<span class=\"variable\">$font-index</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">@return</span> <span class=\"variable\">$font-index</span> / <span class=\"number\">10</span> * <span class=\"number\">0.2rem</span></span><br><span class=\"line\"></span><br><span class=\"line\">// mixin </span><br><span class=\"line\">// 可含參數,同一extend會分開列出</span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> box(<span class=\"variable\">$color</span>, <span class=\"variable\">$font-index</span>)</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">50px</span></span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">50px</span></span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"variable\">$color</span></span><br><span class=\"line\">\t&amp;:<span class=\"attribute\">hover</span></span><br><span class=\"line\">\t\t<span class=\"attribute\">letter-spacing</span>: letter-space(<span class=\"variable\">$font-index</span>)</span><br><span class=\"line\">.box</span><br><span class=\"line\">\t&amp;-<span class=\"number\">1</span></span><br><span class=\"line\">\t\t+box(<span class=\"variable\">$primary</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span></span><br><span class=\"line\">\t&amp;-<span class=\"number\">2</span></span><br><span class=\"line\">\t\t+box(<span class=\"variable\">$secondary</span>, <span class=\"number\">3</span>)</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span></span><br><span class=\"line\">\t&amp;-<span class=\"number\">3</span></span><br><span class=\"line\">\t\t+box(<span class=\"variable\">$warning</span>, <span class=\"number\">20</span>)</span><br><span class=\"line\">\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">// extend</span><br><span class=\"line\">// 同一extend會以, 分開</span><br><span class=\"line\"><span class=\"selector-class\">.btn-3</span>, <span class=\"selector-class\">.btn-2</span>, <span class=\"selector-class\">.btn-1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span> <span class=\"number\">2rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#364f6b</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.btn-1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-3</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// mixin </span><br><span class=\"line\">// 可含參數,同一extend會分開列出</span><br><span class=\"line\"><span class=\"selector-class\">.box-1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#00adb5</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.box-1</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">letter-spacing</span>: <span class=\"number\">0.04rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.box-2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#364f6b</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.box-2</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">letter-spacing</span>: <span class=\"number\">0.06rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.box-3</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#ff2f63</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.box-3</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">letter-spacing</span>: <span class=\"number\">0.4rem</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"condition-and-loop\"><a href=\"#condition-and-loop\" class=\"headerlink\" title=\"condition and loop\"></a>condition and loop</h4><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* array + loop */</span></span><br><span class=\"line\"><span class=\"variable\">$direction-types</span>: center, start, end</span><br><span class=\"line\">@each <span class=\"variable\">$type</span> in <span class=\"variable\">$direction-types</span></span><br><span class=\"line\">\t.flex-#&#123;type&#125;</span><br><span class=\"line\">\t\tdisplay:flex</span><br><span class=\"line\">\t\tjustify-content: <span class=\"variable\">$type</span></span><br><span class=\"line\">\t\talign-items: center</span><br><span class=\"line\"></span><br><span class=\"line\">/* object + loop */</span><br><span class=\"line\"><span class=\"variable\">$direction-types</span>: (center: center, start: flex-start, end: flex-end)</span><br><span class=\"line\">@each <span class=\"variable\">$type</span>, <span class=\"variable\">$value</span> in <span class=\"variable\">$direction-types</span></span><br><span class=\"line\">\t.flex-#&#123;<span class=\"variable\">$type</span>&#125;</span><br><span class=\"line\">\t\tdisplay:flex</span><br><span class=\"line\">\t\tjustify-content: <span class=\"variable\">$value</span></span><br><span class=\"line\">\t\talign-items: center</span><br><span class=\"line\"></span><br><span class=\"line\">/* condition + loop */</span><br><span class=\"line\">@for <span class=\"variable\">$i</span> from <span class=\"number\">0</span> through <span class=\"number\">5</span></span><br><span class=\"line\">\t.h#&#123;<span class=\"number\">5</span> - <span class=\"variable\">$i</span> + <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">\t\t@if <span class=\"variable\">$i</span> % <span class=\"number\">2</span> == <span class=\"number\">0</span></span><br><span class=\"line\">\t\t\tfont-size: <span class=\"number\">1</span> + <span class=\"number\">0.2rem</span> + <span class=\"variable\">$i</span></span><br><span class=\"line\">\t\t@else</span><br><span class=\"line\">\t\t\tfont-size: <span class=\"number\">1</span> + <span class=\"number\">0.3rem</span> + <span class=\"variable\">$i</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* array + loop  */</span></span><br><span class=\"line\"><span class=\"selector-class\">.flex-type</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.flex-type</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: start;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.flex-type</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: end;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* object + loop */</span></span><br><span class=\"line\"><span class=\"selector-class\">.flex-center</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.flex-start</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: flex-start;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.flex-end</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: flex-end;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* condition + loop */</span></span><br><span class=\"line\"><span class=\"selector-class\">.h6</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.h5</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">2.3rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.h4</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">3.2rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.h3</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">4.3rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.h2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">5.2rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.h1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">6.3rem</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Babel\"><a href=\"#Babel\" class=\"headerlink\" title=\"Babel\"></a>Babel</h3><h4 id=\"create-a-js-in-src\"><a href=\"#create-a-js-in-src\" class=\"headerlink\" title=\"create a.js in ./src\"></a>create a.js in ./src</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> aa = [...a]</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> aa) &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-build-script-then-build\"><a href=\"#install-build-script-then-build\" class=\"headerlink\" title=\"install + build script then build\"></a>install + build script then build</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">nmp init</span><br><span class=\"line\">npm install --save-dev @babel/core @babel/cli</span><br><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;name&quot;: &quot;sass&quot;,</span><br><span class=\"line\">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class=\"line\">  &quot;description&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class=\"line\">  &quot;scripts&quot;: &#123;</span><br><span class=\"line\">  \t&quot;build&quot;: &quot;babel src -d lib&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;author&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class=\"line\">  &quot;devDependencies&quot;: &#123;</span><br><span class=\"line\">    &quot;@babel&#x2F;cli&quot;: &quot;^7.14.5&quot;,</span><br><span class=\"line\">    &quot;@babel&#x2F;core&quot;: &quot;^7.14.6&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"build\"><a href=\"#build\" class=\"headerlink\" title=\"build\"></a>build</h4><p>generate ./lib/a.js but same as ./src/a.js</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-babel-preset-env-add-babel-config-json\"><a href=\"#install-babel-preset-env-add-babel-config-json\" class=\"headerlink\" title=\"install @babel/preset-env , add .babel.config.json\"></a>install @babel/preset-env , add .babel.config.json</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm uninstall @babel/preset-env --save-dev</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;sass&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;build&quot;</span>: <span class=\"string\">&quot;babel src -d lib&quot;</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;@babel/cli&quot;</span>: <span class=\"string\">&quot;^7.14.5&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;@babel/core&quot;</span>: <span class=\"string\">&quot;^7.14.6&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;@babel/preset-env&quot;</span>: <span class=\"string\">&quot;^7.14.7&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .babel.config.json</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"build-then-generate-correct-file-at-lib\"><a href=\"#build-then-generate-correct-file-at-lib\" class=\"headerlink\" title=\"build then generate correct file at ./lib\"></a>build then generate correct file at ./lib</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Gulp\"><a href=\"#Gulp\" class=\"headerlink\" title=\"Gulp\"></a>Gulp</h3><ul>\n<li><a href=\"https://github.com/Lidemy/mtr-4th-web/blob/f989ebc6182d12b68b93d5541fd9b8ac1208caeb/gulpfile.js\">example</a></li>\n</ul>\n<h4 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -global gulp-cli</span><br><span class=\"line\">mkdir gulp_test</span><br><span class=\"line\">cd  gulp_test</span><br><span class=\"line\">npm init</span><br><span class=\"line\">npm install --save-dev gulp</span><br><span class=\"line\">gulp --version</span><br><span class=\"line\">\tCLI version: 2.3.0</span><br><span class=\"line\">\tLocal version: 4.0.2</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-gulpfile-gulpfile-js\"><a href=\"#add-gulpfile-gulpfile-js\" class=\"headerlink\" title=\"add gulpfile gulpfile.js\"></a>add gulpfile gulpfile.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// gulpfile.js</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">defaultTask</span>(<span class=\"params\">cb</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// place code for your default task here</span></span><br><span class=\"line\">  cb();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.default = defaultTask</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"run-glup\"><a href=\"#run-glup\" class=\"headerlink\" title=\"run glup\"></a>run glup</h4><p>do nothing</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gulp</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"copy-src-to-dest\"><a href=\"#copy-src-to-dest\" class=\"headerlink\" title=\"copy ./src to ./dest\"></a>copy ./src to ./dest</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// gulpfile.js</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">defaultTask</span>(<span class=\"params\">cb</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// place code for your default task here</span></span><br><span class=\"line\">  cb();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gulp</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-gulp-babel-then-run\"><a href=\"#install-gulp-babel-then-run\" class=\"headerlink\" title=\"install gulp babel then run\"></a>install gulp babel then run</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// gulpfile.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; src, dest &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> babel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-babel&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">defaultTask</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> src(<span class=\"string\">&#x27;src/*.js&#x27;</span>)</span><br><span class=\"line\">\t\t.pipe(babel())</span><br><span class=\"line\">\t\t.pipe(dest(<span class=\"string\">&#x27;dist&#x27;</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.default = defaultTask</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// babel.config.json</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install --save-dev gulp-babel @babel/core @babel/preset-env</span><br><span class=\"line\">gulp</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"or-not-include-babel-config-json\"><a href=\"#or-not-include-babel-config-json\" class=\"headerlink\" title=\"or not include babel.config.json\"></a>or not include babel.config.json</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; gulpfile.js</span><br><span class=\"line\">const &#123; src, dest &#125; &#x3D; require(&#39;gulp&#39;)</span><br><span class=\"line\">const babel &#x3D; require(&#39;gulp-babel&#39;)</span><br><span class=\"line\"></span><br><span class=\"line\">function defaultTask() &#123;</span><br><span class=\"line\">\treturn src(&#39;src&#x2F;*.js&#39;)</span><br><span class=\"line\">\t\t.pipe(babel(&#123;</span><br><span class=\"line\">\t\t\t&quot;presets&quot;: [&quot;@babel&#x2F;preset-env&quot;]</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t\t.pipe(dest(&#39;dist&#39;))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.default &#x3D; defaultTask</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-gulp-sass-then-serial-run\"><a href=\"#install-gulp-sass-then-serial-run\" class=\"headerlink\" title=\"install gulp sass then serial run\"></a>install gulp sass then serial run</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// gulpfile.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; src, dest, series &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> babel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-babel&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> sass = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-sass&#x27;</span>)(<span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sass&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compileJS</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> src(<span class=\"string\">&#x27;src/*.js&#x27;</span>)</span><br><span class=\"line\">\t\t.pipe(babel(&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t\t.pipe(dest(<span class=\"string\">&#x27;dist&#x27;</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compileCSS</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> src(<span class=\"string\">&#x27;src/*.scss&#x27;</span>)</span><br><span class=\"line\">    .pipe(sass().on(<span class=\"string\">&#x27;error&#x27;</span>, sass.logError))</span><br><span class=\"line\">    .pipe(dest(<span class=\"string\">&#x27;./css&#x27;</span>));</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.default = series(compileJS, compileCSS)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install sass gulp-sass --save-dev</span><br><span class=\"line\">gulp</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"change-parallel-then-run\"><a href=\"#change-parallel-then-run\" class=\"headerlink\" title=\"change parallel then run\"></a>change parallel then run</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; src, dest, series, parallel &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> babel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-babel&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> sass = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-sass&#x27;</span>)(<span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sass&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compileJS</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> src(<span class=\"string\">&#x27;src/*.js&#x27;</span>)</span><br><span class=\"line\">\t\t.pipe(babel(&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t\t.pipe(dest(<span class=\"string\">&#x27;dist&#x27;</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compileCSS</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> src(<span class=\"string\">&#x27;src/*.scss&#x27;</span>)</span><br><span class=\"line\">    .pipe(sass().on(<span class=\"string\">&#x27;error&#x27;</span>, sass.logError))</span><br><span class=\"line\">    .pipe(dest(<span class=\"string\">&#x27;./css&#x27;</span>));</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.default = parallel(compileJS, compileCSS)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-gulp-js-uglify-css-clean-css-minify-and-rename-gulp-compileCSS\"><a href=\"#add-gulp-js-uglify-css-clean-css-minify-and-rename-gulp-compileCSS\" class=\"headerlink\" title=\"add gulp js uglify, css clean-css(minify) and rename + gulp compileCSS\"></a>add gulp js uglify, css clean-css(minify) and rename + gulp compileCSS</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; src, dest, series, parallel &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> babel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-babel&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> uglify = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-uglify&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> cleanCSS = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-clean-css&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> rename = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;gulp-rename&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> sass = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-sass&#x27;</span>)(<span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sass&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compileJS</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> src(<span class=\"string\">&#x27;src/*.js&#x27;</span>)</span><br><span class=\"line\">\t\t.pipe(babel(&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t\t.pipe(dest(<span class=\"string\">&#x27;dist&#x27;</span>))</span><br><span class=\"line\">\t\t.pipe(uglify())</span><br><span class=\"line\">\t\t.pipe(rename(&#123; <span class=\"attr\">extname</span>: <span class=\"string\">&#x27;.min.js&#x27;</span>&#125;))</span><br><span class=\"line\">\t\t.pipe(dest(<span class=\"string\">&#x27;dist&#x27;</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compileCSS</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> src(<span class=\"string\">&#x27;src/*.scss&#x27;</span>)</span><br><span class=\"line\">\t\t.pipe(sass().on(<span class=\"string\">&#x27;error&#x27;</span>, sass.logError))</span><br><span class=\"line\">    .pipe(dest(<span class=\"string\">&#x27;./css&#x27;</span>))</span><br><span class=\"line\">\t\t.pipe(cleanCSS(&#123;<span class=\"attr\">compatibility</span>: <span class=\"string\">&#x27;ie8&#x27;</span>&#125;))</span><br><span class=\"line\">\t\t.pipe(rename(&#123; <span class=\"attr\">extname</span>: <span class=\"string\">&#x27;.min.css&#x27;</span>&#125;))</span><br><span class=\"line\">    .pipe(dest(<span class=\"string\">&#x27;./css&#x27;</span>))</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.compileCSS = compileCSS</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.default = parallel(compileJS, compileCSS)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install gulp js uglify</span></span><br><span class=\"line\">npm install --save-dev gulp-uglify</span><br><span class=\"line\"><span class=\"comment\"># install gulp css minify</span></span><br><span class=\"line\">npm install gulp-clean-css --save-dev</span><br><span class=\"line\"><span class=\"comment\"># install gulp rename</span></span><br><span class=\"line\">npm install gulp-rename --save-dev</span><br><span class=\"line\">gulp</span><br><span class=\"line\"><span class=\"comment\"># gulp compileCSS</span></span><br><span class=\"line\">gulp compileCSS</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Webpack\"><a href=\"#Webpack\" class=\"headerlink\" title=\"Webpack\"></a>Webpack</h3><ul>\n<li>webpack is a module bundler.</li>\n<li>browser 使用 <script></script> load library 相近於 include, 但會有變數名稱衝突影響<blockquote>\n<p>jQuery 的 jQuery.noConflict() 就是為了處理變數名稱衝突的問題<br>node.js的 moule 使用 CommonJS (module.exports + require)<br>import/export 是 ES6 的規範(要加上 type=module)</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"browser-module-規範\"><a href=\"#browser-module-規範\" class=\"headerlink\" title=\"browser module 規範\"></a>browser module 規範</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> str[<span class=\"number\">0</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; first &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils.js&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first(<span class=\"string\">&#x27;abd&#x27;</span>))</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;index.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;module&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-webpack\"><a href=\"#install-webpack\" class=\"headerlink\" title=\"install webpack\"></a>install webpack</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm init</span><br><span class=\"line\">npm install webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"try-run-js-for-node-js\"><a href=\"#try-run-js-for-node-js\" class=\"headerlink\" title=\"try run js for node.js\"></a>try run js for node.js</h4><p>put .js in ./src</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; first &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils.js&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first(<span class=\"string\">&#x27;abd&#x27;</span>))</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> str[<span class=\"number\">0</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">node src\\index.js</span><br><span class=\"line\">\ta</span><br></pre></td></tr></table></figure>\n\n<p>package.json need add “type”: “module”,</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;webpack&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;module&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;webpack&quot;</span>: <span class=\"string\">&quot;^5.44.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;webpack-cli&quot;</span>: <span class=\"string\">&quot;^4.7.2&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"build-webpack-then-load-html-from-browser\"><a href=\"#build-webpack-then-load-html-from-browser\" class=\"headerlink\" title=\"build webpack then load html from browser\"></a>build webpack then load html from browser</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- index.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./dist/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>add file webpack.config.js for webpack configure<br>add mode:’development’,<br>add mode:’production’ 會壓縮</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">const path = require(&#x27;path&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  mode:&#x27;development&#x27;, </span><br><span class=\"line\">  entry: &#x27;./src/index.js&#x27;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#x27;main.js&#x27;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>add script build for webpack</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;webpack&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;build&quot;</span>: <span class=\"string\">&quot;webpack&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;webpack&quot;</span>: <span class=\"string\">&quot;^5.44.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;webpack-cli&quot;</span>: <span class=\"string\">&quot;^4.7.2&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run webpack generate main.js in ./dist </span></span><br><span class=\"line\">npx webpack</span><br><span class=\"line\"><span class=\"comment\"># or run build script</span></span><br><span class=\"line\">npm run build </span><br><span class=\"line\"><span class=\"comment\"># load index.html in browse the work well</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"try-load-jquery\"><a href=\"#try-load-jquery\" class=\"headerlink\" title=\"try load jquery\"></a>try load jquery</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install jquery --save-dev</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> str[<span class=\"number\">0</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> $ = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;jquery&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// import $ from &#x27;jquery&#x27; // also ok</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./utils&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(utils.first(<span class=\"string\">&#x27;abd&#x27;</span>)+<span class=\"string\">&#x27;aa&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t$(<span class=\"string\">&#x27;.btn&#x27;</span>).click( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\talert(<span class=\"string\">&#x27;hello!&#x27;</span>)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- index.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./dist/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>click me<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run build for wabpack</span></span><br><span class=\"line\">npm run build </span><br><span class=\"line\"><span class=\"comment\"># load index.html in browse then test</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-css-loader\"><a href=\"#add-css-loader\" class=\"headerlink\" title=\"add css loader\"></a>add css loader</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install css-loader and style-loader </span></span><br><span class=\"line\">npm install --save-dev css-loader</span><br><span class=\"line\">npm install --save-dev style-loader</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> str[<span class=\"number\">0</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> css <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./style.css&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&#x27;jquery&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; first &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t$(<span class=\"string\">&#x27;.btn&#x27;</span>).click( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\talert(first(<span class=\"string\">&#x27;hello!&#x27;</span>))</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* style.css */</span></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.2</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.btn</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- index.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./dist/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>click me<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>webpack.config.js : add rules for style-loader and css-loader</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">const path = require(&#x27;path&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  mode:&#x27;development&#x27;, </span><br><span class=\"line\">  entry: &#x27;./src/index.js&#x27;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#x27;main.js&#x27;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">  module: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: /\\.css$/i,</span><br><span class=\"line\">        use: [&quot;style-loader&quot;, &quot;css-loader&quot;],</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run build for wabpack</span></span><br><span class=\"line\">npm run build </span><br><span class=\"line\"><span class=\"comment\"># load index.html in browse then test</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-babel-loader\"><a href=\"#add-babel-loader\" class=\"headerlink\" title=\"add babel-loader\"></a>add babel-loader</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> css <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./style.css&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&#x27;jquery&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; first &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t$(<span class=\"string\">&#x27;.btn&#x27;</span>).click(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> str = <span class=\"string\">&#x27;hello!&#x27;</span></span><br><span class=\"line\">\t\talert(first(str))</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install -D babel-loader @babel/core @babel/preset-env</span><br></pre></td></tr></table></figure>\n\n<p>webpack.config.js : add rules for babel-loader</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">module: &#123;</span><br><span class=\"line\">  rules: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      test: /\\.css$/i,</span><br><span class=\"line\">      use: [&quot;style-loader&quot;, &quot;css-loader&quot;],</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ttest: /\\.m?js$/,</span><br><span class=\"line\">\t\texclude: /(node_modules|bower_components)/,</span><br><span class=\"line\">\t\tuse: &#123;</span><br><span class=\"line\">\t\t\tloader: &#x27;babel-loader&#x27;,</span><br><span class=\"line\">\t\t\toptions: &#123;</span><br><span class=\"line\">\t\t\t\tpresets: [&#x27;@babel/preset-env&#x27;]</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-sass-loader\"><a href=\"#add-sass-loader\" class=\"headerlink\" title=\"add sass-loader\"></a>add sass-loader</h4><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* style.css */</span></span><br><span class=\"line\"><span class=\"variable\">$color</span> : rgba(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0.2</span>);</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"variable\">$color</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"selector-class\">.btn</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> css <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./style.scss&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&#x27;jquery&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; first &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t$(<span class=\"string\">&#x27;.btn&#x27;</span>).click(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> str = <span class=\"string\">&#x27;hello!&#x27;</span></span><br><span class=\"line\">\t\talert(first(str))</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>webpack.config.js : add rules for sass-loader</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\"> rules: [</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\ttest: /\\.m?js$/,</span><br><span class=\"line\">\texclude: /(node_modules|bower_components)/,</span><br><span class=\"line\">\tuse: &#123;</span><br><span class=\"line\">\t\tloader: &#x27;babel-loader&#x27;,</span><br><span class=\"line\">\t\toptions: &#123;</span><br><span class=\"line\">\t\t\tpresets: [&#x27;@babel/preset-env&#x27;]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">     test: /\\.s[ac]ss$/i,</span><br><span class=\"line\">     use: [</span><br><span class=\"line\">       <span class=\"comment\">// Creates `style` nodes from JS strings</span></span><br><span class=\"line\">       &quot;style-loader&quot;,</span><br><span class=\"line\">       <span class=\"comment\">// Translates CSS into CommonJS</span></span><br><span class=\"line\">       &quot;css-loader&quot;,</span><br><span class=\"line\">       <span class=\"comment\">// Compiles Sass to CSS</span></span><br><span class=\"line\">       &quot;sass-loader&quot;,</span><br><span class=\"line\">     ],</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\"> ],</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install sass-loader sass --save-dev</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run build for wabpack</span></span><br><span class=\"line\">npm run build </span><br><span class=\"line\"><span class=\"comment\"># load index.html in browse then test</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-webpack-dev-server\"><a href=\"#install-webpack-dev-server\" class=\"headerlink\" title=\"install webpack dev server\"></a>install webpack dev server</h4><p>webpack.config.js : add devServer</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">const path = require(&#x27;path&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  mode:&#x27;development&#x27;, </span><br><span class=\"line\">  entry: &#x27;./src/index.js&#x27;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#x27;main.js&#x27;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tdevServer: &#123;</span><br><span class=\"line\">    contentBase: path.join(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">    compress: true,</span><br><span class=\"line\">    port: 9000,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  module: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\ttest: /\\.m?js$/,</span><br><span class=\"line\">\t\t\t\texclude: /(node_modules|bower_components)/,</span><br><span class=\"line\">\t\t\t\tuse: &#123;</span><br><span class=\"line\">\t\t\t\t\tloader: &#x27;babel-loader&#x27;,</span><br><span class=\"line\">\t\t\t\t\toptions: &#123;</span><br><span class=\"line\">\t\t\t\t\t\tpresets: [&#x27;@babel/preset-env&#x27;]</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: /\\.s[ac]ss$/i,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// Creates `style` nodes from JS strings</span></span><br><span class=\"line\">          &quot;style-loader&quot;,</span><br><span class=\"line\">          <span class=\"comment\">// Translates CSS into CommonJS</span></span><br><span class=\"line\">          &quot;css-loader&quot;,</span><br><span class=\"line\">          <span class=\"comment\">// Compiles Sass to CSS</span></span><br><span class=\"line\">          &quot;sass-loader&quot;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>copy index.html to ./dist<br>modify main.js path</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- index.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>click me<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install webpack-dev-server --save-dev</span><br><span class=\"line\"><span class=\"comment\"># run</span></span><br><span class=\"line\">npx webpack serve</span><br><span class=\"line\"><span class=\"comment\"># or run script - &quot;start&quot;: &quot;webpack serve --open&quot;(auto open index.html)</span></span><br><span class=\"line\">npm run start</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Using-source-maps-debug-map-js-到未打包內容\"><a href=\"#Using-source-maps-debug-map-js-到未打包內容\" class=\"headerlink\" title=\"Using source maps - debug map js 到未打包內容\"></a>Using source maps - debug map js 到未打包內容</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"comment\">// add throw new Error(&#x27;hi&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> css <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./style.scss&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&#x27;jquery&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; first &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./utils&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t$(<span class=\"string\">&#x27;.btn&#x27;</span>).click(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// throw new Error(&#x27;hi&#x27;)</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">throw</span> <span class=\"string\">&#x27;error&#x27;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> str = <span class=\"string\">&#x27;hello!&#x27;</span></span><br><span class=\"line\">\t\talert(first(str))</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>webpack.config.js : add devtool: ‘inline-source-map’,</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">const path = require(&#x27;path&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  mode:&#x27;development&#x27;, </span><br><span class=\"line\">  entry: &#x27;./src/index.js&#x27;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#x27;main.js&#x27;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tdevServer: &#123;</span><br><span class=\"line\">    contentBase: path.join(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">    compress: true,</span><br><span class=\"line\">    port: 9000,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tdevtool: &#x27;inline-source-map&#x27;,</span><br><span class=\"line\">  module: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\ttest: /\\.m?js$/,</span><br><span class=\"line\">\t\t\t\texclude: /(node_modules|bower_components)/,</span><br><span class=\"line\">\t\t\t\tuse: &#123;</span><br><span class=\"line\">\t\t\t\t\tloader: &#x27;babel-loader&#x27;,</span><br><span class=\"line\">\t\t\t\t\toptions: &#123;</span><br><span class=\"line\">\t\t\t\t\t\tpresets: [&#x27;@babel/preset-env&#x27;]</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: /\\.s[ac]ss$/i,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// Creates `style` nodes from JS strings</span></span><br><span class=\"line\">          &quot;style-loader&quot;,</span><br><span class=\"line\">          <span class=\"comment\">// Translates CSS into CommonJS</span></span><br><span class=\"line\">          &quot;css-loader&quot;,</span><br><span class=\"line\">          <span class=\"comment\">// Compiles Sass to CSS</span></span><br><span class=\"line\">          &quot;sass-loader&quot;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"HtmlWebpackPlugin-自動產生-html\"><a href=\"#HtmlWebpackPlugin-自動產生-html\" class=\"headerlink\" title=\"HtmlWebpackPlugin - 自動產生 html\"></a>HtmlWebpackPlugin - 自動產生 html</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>\n\n<p>remove index.html<br>index.js add button</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">// index.js</span><br><span class=\"line\">import css from &#x27;./style.scss&#x27;</span><br><span class=\"line\">import $ from &#x27;jquery&#x27;</span><br><span class=\"line\">import &#123; first &#125; from &#x27;./utils&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">$(document).ready(() =&gt; &#123;</span><br><span class=\"line\">\t$(&#x27;body&#x27;).append(`<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>click me test....<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span>`)</span><br><span class=\"line\"></span><br><span class=\"line\">\t$(&#x27;.btn&#x27;).click(() =&gt; &#123;</span><br><span class=\"line\">\t\tconst str = &#x27;hello!&#x27;</span><br><span class=\"line\">\t\talert(first(str))</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>webpack.config.js : add HtmlWebpackPlugin, plugins: [new HtmlWebpackPlugin()]</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">const path = require(&#x27;path&#x27;);</span><br><span class=\"line\">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">  mode:&#x27;development&#x27;, </span><br><span class=\"line\">  entry: &#x27;./src/index.js&#x27;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#x27;main.js&#x27;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tdevServer: &#123;</span><br><span class=\"line\">    contentBase: path.join(__dirname, &#x27;dist&#x27;),</span><br><span class=\"line\">    compress: true,</span><br><span class=\"line\">    port: 9000,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tdevtool: &#x27;inline-source-map&#x27;,</span><br><span class=\"line\">  module: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\ttest: /\\.m?js$/,</span><br><span class=\"line\">\t\t\t\texclude: /(node_modules|bower_components)/,</span><br><span class=\"line\">\t\t\t\tuse: &#123;</span><br><span class=\"line\">\t\t\t\t\tloader: &#x27;babel-loader&#x27;,</span><br><span class=\"line\">\t\t\t\t\toptions: &#123;</span><br><span class=\"line\">\t\t\t\t\t\tpresets: [&#x27;@babel/preset-env&#x27;]</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: /\\.s[ac]ss$/i,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// Creates `style` nodes from JS strings</span></span><br><span class=\"line\">          &quot;style-loader&quot;,</span><br><span class=\"line\">          <span class=\"comment\">// Translates CSS into CommonJS</span></span><br><span class=\"line\">          &quot;css-loader&quot;,</span><br><span class=\"line\">          <span class=\"comment\">// Compiles Sass to CSS</span></span><br><span class=\"line\">          &quot;sass-loader&quot;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tplugins: [new HtmlWebpackPlugin()],</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"webpack-practice\"><a href=\"#webpack-practice\" class=\"headerlink\" title=\"webpack practice\"></a>webpack practice</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm init</span><br><span class=\"line\">npm install webpack webpack-cli --save-dev</span><br><span class=\"line\"><span class=\"comment\"># if need jquery</span></span><br><span class=\"line\">npm install jquery --save-dev</span><br><span class=\"line\">copy index.js to ./src</span><br></pre></td></tr></table></figure>\n\n<p>add script build for webpack</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;comment_api_plugin&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;build&quot;</span>: <span class=\"string\">&quot;webpack&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack&quot;</span>: <span class=\"string\">&quot;^5.44.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack-cli&quot;</span>: <span class=\"string\">&quot;^4.7.2&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>add file webpack.config.js for webpack configure<br>add mode:’development’,</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  mode:<span class=\"string\">&#x27;development&#x27;</span>, </span><br><span class=\"line\">  entry: <span class=\"string\">&#x27;./src/index.js&#x27;</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">&#x27;main.js&#x27;</span>,</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>),</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># build </span></span><br><span class=\"line\">npm run build</span><br><span class=\"line\"><span class=\"comment\"># load index.html from browser</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"webpack-打包成-library-Authoring-Libraries\"><a href=\"#webpack-打包成-library-Authoring-Libraries\" class=\"headerlink\" title=\"webpack 打包成 library - Authoring Libraries\"></a>webpack 打包成 library - Authoring Libraries</h4><p>function export</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">\t....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>webpack.config.js  add library:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  mode:<span class=\"string\">&#x27;development&#x27;</span>, </span><br><span class=\"line\">  entry: <span class=\"string\">&#x27;./src/index.js&#x27;</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">&#x27;main.js&#x27;</span>,</span><br><span class=\"line\">\t\tpath: path.resolve(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>),</span><br><span class=\"line\">\t\tlibrary: <span class=\"string\">&quot;commentPlugin&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>html run</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>API 留言板<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">integrity</span>=<span class=\"string\">&quot;sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l&quot;</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">&quot;anonymous&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./dist/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">\t\t\tcommentPlugin.init(&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tsideKey: <span class=\"string\">&#x27;robert&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tapiUrl: <span class=\"string\">&#x27;http://localhost/robert/comment_api/&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tcontainer: <span class=\"string\">&#x27;.comments&#x27;</span></span></span><br><span class=\"line\">\t\t\t&#125;) </span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># build </span></span><br><span class=\"line\">npm run build</span><br><span class=\"line\"><span class=\"comment\"># load index.html from browser</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"webpack-watch\"><a href=\"#webpack-watch\" class=\"headerlink\" title=\"webpack watch\"></a>webpack watch</h4><p>webpack.config.js add script watch</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;comment_api_plugin&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;build&quot;</span>: <span class=\"string\">&quot;webpack&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;watch&quot;</span>: <span class=\"string\">&quot;webpack --watch&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;author&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;license&quot;</span>: <span class=\"string\">&quot;ISC&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;jquery&quot;</span>: <span class=\"string\">&quot;^3.6.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack&quot;</span>: <span class=\"string\">&quot;^5.44.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack-cli&quot;</span>: <span class=\"string\">&quot;^4.7.2&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// run watch</span><br><span class=\"line\">npm run watch</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"regular-expression-正規表達式-online-test\"><a href=\"#regular-expression-正規表達式-online-test\" class=\"headerlink\" title=\"regular expression 正規表達式 : online test\"></a>regular expression 正規表達式 : <a href=\"https://regex101.com/\">online test</a></h3><ul>\n<li>/xy : 含 “xy”</li>\n<li>/[aeiou] : 含 a,e,i,o or u</li>\n<li>/[0-9] : 含數字</li>\n<li>/[a-z] : 含小寫字母</li>\n<li>/[0-9a-zA-Z] : 含數字字母</li>\n<li>/\\d : 數字</li>\n<li>/\\w : 數字、英文大小寫字母還有底線</li>\n<li>/\\d{8} : 連續8個數字</li>\n<li>/\\d{8,10} : 連續8~10個數字</li>\n<li>/^xyz : xyz開頭</li>\n<li>/zyx$ : xyz結束</li>\n<li>/s.y : s?y, ? 為任何字元</li>\n<li>/^A\\d+Z$/ : + 表一個以上</li>\n<li>: ,() 叫做 Capturing Groups</li>\n<li>? : 含 0 or 1 個</li>\n<li>\\d 是配對數字，如果把 d 變成大寫，就會變成反義，所以 \\D 代表：不是數字，而 \\W 也一樣，代表：不是「英文大小寫字母與數字與底線」</li>\n<li>&ast; : 0 個以上</li>\n<li>\\s : 可以配對到任何空白（空白字元、tab 以及換行）</li>\n<li>. : 表含點符號</li>\n</ul>\n<h4 id=\"js-example-check-是否符合\"><a href=\"#js-example-check-是否符合\" class=\"headerlink\" title=\"js example(check 是否符合)\"></a>js example(check 是否符合)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 驗證電話</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> re = <span class=\"regexp\">/^09\\d&#123;8&#125;$/</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.test(<span class=\"string\">&quot;0912333&quot;</span>))\t\t\t<span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.test(<span class=\"string\">&quot;0355288310&quot;</span>))\t<span class=\"comment\">// flase</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.test(<span class=\"string\">&quot;0931234450&quot;</span>))\t<span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 驗證電話</span></span><br><span class=\"line\"><span class=\"comment\">// 另一種設法 \\d 要改為 \\\\d</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> re = <span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(<span class=\"string\">&#x27;^09\\\\d&#123;8&#125;$&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.test(<span class=\"string\">&quot;0912333&quot;</span>))\t\t\t<span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.test(<span class=\"string\">&quot;0355288310&quot;</span>))\t<span class=\"comment\">// flase</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(re.test(<span class=\"string\">&quot;0931234450&quot;</span>))\t<span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"js-example-check-找配對的字\"><a href=\"#js-example-check-找配對的字\" class=\"headerlink\" title=\"js example(check 找配對的字)\"></a>js example(check 找配對的字)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 找配對的字</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> re = <span class=\"regexp\">/8.3/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">&#x27;4823686359967&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.match(re))</span><br><span class=\"line\">\t<span class=\"comment\">// 傳回陣列</span></span><br><span class=\"line\">\t<span class=\"comment\">// 0: &quot;823&quot;</span></span><br><span class=\"line\">\t<span class=\"comment\">// \tgroups: undefined</span></span><br><span class=\"line\">\t<span class=\"comment\">// \tindex: 1</span></span><br><span class=\"line\">\t<span class=\"comment\">// \tinput: &quot;4823686359967&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 找不到回 null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 找所有配對的字</span></span><br><span class=\"line\"><span class=\"comment\">// 使用 matchAll()</span></span><br><span class=\"line\"><span class=\"comment\">// 加 g</span></span><br><span class=\"line\"><span class=\"comment\">// 用 [...result] 轉為一個陣列 </span></span><br><span class=\"line\"><span class=\"comment\">// 或用 for...of 取出</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> re = <span class=\"regexp\">/8.3/g</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">&#x27;4823686359967&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(str.matchAll(re))  <span class=\"comment\">// not show value</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(...str.matchAll(re))</span><br><span class=\"line\">\t<span class=\"comment\">// [&quot;823&quot;, index: 1, input: &quot;4823686359967&quot;, groups: undefined]</span></span><br><span class=\"line\">\t<span class=\"comment\">// [&quot;863&quot;, index: 5, input: &quot;4823686359967&quot;, groups: undefined]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 找出一個以上</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> re = <span class=\"regexp\">/^A(\\d+)Z$/</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;A12345Z&#x27;</span>.match(re))</span><br><span class=\"line\">\t<span class=\"comment\">// [&quot;A12345Z&quot;, &quot;12345&quot;, index: 0, input: &quot;A12345Z&quot;, groups: undefined]</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"js-example-找出網域\"><a href=\"#js-example-找出網域\" class=\"headerlink\" title=\"js example(找出網域)\"></a>js example(找出網域)</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> emails =[</span><br><span class=\"line\">\t<span class=\"string\">&#x27;wqe@wq.wwq.tw&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;wqe@as.ss&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&#x27;wqe@asa.33&#x27;</span></span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">let</span> re = <span class=\"regexp\">/^.+@(.+\t?)\\./</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> email <span class=\"keyword\">of</span> emails) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> result = email.match(re)</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(result)</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(result[<span class=\"number\">1</span>])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// (2) [&quot;wqe@wq.&quot;, &quot;wq&quot;, index: 0, input: &quot;wqe@wq.wwq.tw&quot;, groups: undefined]</span></span><br><span class=\"line\">\t<span class=\"comment\">// wq</span></span><br><span class=\"line\">\t<span class=\"comment\">// (2) [&quot;wqe@as.&quot;, &quot;as&quot;, index: 0, input: &quot;wqe@as.ss&quot;, groups: undefined]</span></span><br><span class=\"line\">\t<span class=\"comment\">// as</span></span><br><span class=\"line\">\t<span class=\"comment\">// (2) [&quot;wqe@asa.&quot;, &quot;asa&quot;, index: 0, input: &quot;wqe@asa.33&quot;, groups: undefined]</span></span><br><span class=\"line\">\t<span class=\"comment\">// asa</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"js-轉換\"><a href=\"#js-轉換\" class=\"headerlink\" title=\"js 轉換\"></a>js 轉換</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;abbreviation&quot;</span>: <span class=\"string\">&quot;/([A - Z])\\w+/&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> stringified = <span class=\"built_in\">JSON</span>.stringify(obj);</span><br><span class=\"line\"><span class=\"keyword\">const</span> regex = <span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(<span class=\"built_in\">JSON</span>.parse(stringified).abbreviation.slice(<span class=\"number\">1</span>, -<span class=\"number\">1</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(regex);</span><br></pre></td></tr></table></figure>","categories":["Front End"],"tags":["tool"]},{"title":"網站部屬","url":"/2021/07/12/web-1/","content":"<h3 id=\"常用主機\"><a href=\"#常用主機\" class=\"headerlink\" title=\"常用主機\"></a>常用主機</h3><ul>\n<li>AWS</li>\n<li>Digital Ocean</li>\n<li>GCP</li>\n<li>Linode</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"AWS-網站部屬\"><a href=\"#AWS-網站部屬\" class=\"headerlink\" title=\"AWS 網站部屬\"></a>AWS 網站部屬</h3><h4 id=\"建立虛擬主機\"><a href=\"#建立虛擬主機\" class=\"headerlink\" title=\"建立虛擬主機\"></a>建立虛擬主機</h4><ol>\n<li>選擇區域,再點選使用 EC2</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<ol start=\"2\">\n<li>選擇機器,有標註 Free Tier eligible為提供免費之機器,選擇 Ubuntu Server 20.04 LTS</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<ol start=\"3\">\n<li>選擇機器Type(Free Tier eligible 為免費),選擇 t2.micro,再點選 “Next: Configure Instance Details”</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<ol start=\"4\">\n<li>Configure 機器,不需變動,直接點選 “Next:Add Storage”</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<ol start=\"5\">\n<li>設定儲存記憶體,直接點選 “Next:Add Tags”</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<ol start=\"6\">\n<li>設定 Tags,不用設定,直接點選 “Configure Security Group”</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<ol start=\"7\">\n<li>設定 使用 port,default 為 SSH TCP port:22, 新增 HTTP TCP port:80,點選 “Review and Launch”,再選 Launch</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n\n<ol start=\"8\">\n<li>選擇/新建 SSH key<br>新建: 選擇 “Create a new key pair”,填入Key pair name,點選 Download Key Pair,下載 SSH key,最後點選 “Launch Instances” 啟動機器</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n\n<ol start=\"9\">\n<li>點選 “View Instances”,然後輸入新建 Instance 的 Nanme</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic10.png\" class=\"\" title=\"pic10\">\n</div>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic11.png\" class=\"\" title=\"pic11\">\n</div>\n\n<ol start=\"10\">\n<li>ssh 登入命令,點選 instance 再點選 Connect 即可看到 ssh 登入 command</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic12.png\" class=\"\" title=\"pic12\">\n</div>\n\n<ol start=\"11\">\n<li>ssh 登入,進入 command line 輸入視窗,將 ssh key copy 到 command line 的目錄下,執行前一步查到的 command,即可登入  </li>\n</ol>\n<div style=\"width:700px\">\n    <img src=\"/2021/07/12/web-1/pic13.png\" class=\"\" title=\"pic13\">\n</div>\n\n<div style=\"width:700px\">\n    <img src=\"/2021/07/12/web-1/pic14.png\" class=\"\" title=\"pic14\">\n</div>\n\n<h4 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h4><h5 id=\"安裝-lamp\"><a href=\"#安裝-lamp\" class=\"headerlink\" title=\"安裝 lamp\"></a>安裝 lamp</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更新軟體</span></span><br><span class=\"line\"><span class=\"comment\"># 更新軟體的最新資訊及列表 : sudo apt update</span></span><br><span class=\"line\"><span class=\"comment\"># 更新目前已安裝的軟體到最新版本 : sudo apt upgrade </span></span><br><span class=\"line\"><span class=\"comment\"># 更新目前已安裝的軟體(可以聰明的解決相依性的問題, 如果有相依性問題, 需要 安裝/移除 新的 Package, 就會試著去 安裝/移除 它) : sudo apt dist-upgrade</span></span><br><span class=\"line\">sudo apt update &amp;&amp; sudo apt upgrade &amp;&amp; sudo apt dist-upgrade </span><br><span class=\"line\"><span class=\"comment\"># 安裝 tasksel(含 安裝軟件包之軟體)</span></span><br><span class=\"line\">sudo apt install tasksel</span><br><span class=\"line\"><span class=\"comment\"># 列出可安裝之任務</span></span><br><span class=\"line\">tasksel --list-tasks</span><br><span class=\"line\"><span class=\"comment\"># 透過 tasksel 安裝 lamp-server</span></span><br><span class=\"line\">sudo tasksel install lamp-server</span><br><span class=\"line\"><span class=\"comment\"># check apache 是否正常</span></span><br><span class=\"line\">curl http://localhost</span><br><span class=\"line\"><span class=\"comment\"># 使用 telnet text port 80</span></span><br><span class=\"line\">telnet 127.0.0.1 80</span><br><span class=\"line\">\tTrying 127.0.0.1...</span><br><span class=\"line\">\tConnected to 127.0.0.1.</span><br><span class=\"line\">\tEscape character is <span class=\"string\">&#x27;^]&#x27;</span>.</span><br></pre></td></tr></table></figure>\n<h5 id=\"安裝-phpmyadmin\"><a href=\"#安裝-phpmyadmin\" class=\"headerlink\" title=\"安裝 phpmyadmin\"></a>安裝 phpmyadmin</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install phpmyadmin</span><br></pre></td></tr></table></figure>\n\n<p>按 space 選擇 apache2,再用 tab 選到 ok</p>\n<div style=\"width:700px\">\n    <img src=\"/2021/07/12/web-1/pic20.png\" class=\"\" title=\"pic20\">\n</div>\n\n<p>選 Yes mapping database to phpadmin</p>\n<div style=\"width:700px\">\n    <img src=\"/2021/07/12/web-1/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n\n<p>輸入 phpmyadmin 註冊到資料庫的密碼</p>\n<div style=\"width:700px\">\n    <img src=\"/2021/07/12/web-1/pic22.png\" class=\"\" title=\"pic22\">\n</div>\n\n<p>使用 browser 開啟 <a href=\"http://public_ip/phpmyadmin/\">http://public_ip/phpmyadmin/</a> 即可用帳號 phpmyadmin 登入<br>(public_ip 填入實際ip)</p>\n<h5 id=\"設定-database\"><a href=\"#設定-database\" class=\"headerlink\" title=\"設定 database\"></a>設定 database</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># mysql version</span></span><br><span class=\"line\">mysql --version</span><br><span class=\"line\"><span class=\"comment\"># 進入 mysql </span></span><br><span class=\"line\">sudo mysql</span><br><span class=\"line\"><span class=\"comment\"># 查 user</span></span><br><span class=\"line\">mysql&gt; SELECT user,authentication_string,plugin,host FROM mysql.user;</span><br><span class=\"line\">+------------------+------------------------------------------------------------------------+-----------------------+----</span><br><span class=\"line\">| user             | authentication_string                                                  | plugin                | hos</span><br><span class=\"line\">+------------------+------------------------------------------------------------------------+-----------------------+----</span><br><span class=\"line\">[V@L/\u0004N(\u001c.S+[gvM/2PeLoCrXt5q1NOKLFJR6F4ItguIdyxM6Px6lot6 | caching_sha2_password | localhost |</span><br><span class=\"line\">| mysql.infoschema | $A$005<span class=\"variable\">$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED</span> | caching_sha2_password | loc</span><br><span class=\"line\">| mysql.session    | $A$005<span class=\"variable\">$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED</span> | caching_sha2_password | loc</span><br><span class=\"line\">| mysql.sys        | $A$005<span class=\"variable\">$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED</span> | caching_sha2_password | loc</span><br><span class=\"line\">Kd26\u00142Q%\u0016\u000b*OQHi\u0017k@|HFSXTBukSEcHmTHrSomDLHSlTUHTaIaP4ZHpWCCHXw8 | caching_sha2_password | localhost |</span><br><span class=\"line\">| root             |                                                                        | auth_socket           | loc</span><br><span class=\"line\">+------------------+------------------------------------------------------------------------+-----------------------+----</span><br><span class=\"line\">6 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\">mysql&gt; SELECT user,plugin,host FROM mysql.user;</span><br><span class=\"line\">+------------------+-----------------------+-----------+</span><br><span class=\"line\">| user             | plugin                | host      |</span><br><span class=\"line\">+------------------+-----------------------+-----------+</span><br><span class=\"line\">| debian-sys-maint | caching_sha2_password | localhost |</span><br><span class=\"line\">| mysql.infoschema | caching_sha2_password | localhost |</span><br><span class=\"line\">| mysql.session    | caching_sha2_password | localhost |</span><br><span class=\"line\">| mysql.sys        | caching_sha2_password | localhost |</span><br><span class=\"line\">| phpmyadmin       | caching_sha2_password | localhost |</span><br><span class=\"line\">| root             | auth_socket           | localhost |</span><br><span class=\"line\">+------------------+-----------------------+-----------+</span><br><span class=\"line\">6 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\">mysql&gt;</span><br><span class=\"line\"><span class=\"comment\"># 設定權限: 密碼強度控制、拒絕遠端 root 登入 等等的安全性設</span></span><br><span class=\"line\">sudo mysql_secure_installation</span><br><span class=\"line\">\tSecuring the MySQL server deployment.</span><br><span class=\"line\">\tConnecting to MySQL using a blank password.</span><br><span class=\"line\">\tVALIDATE PASSWORD COMPONENT can be used to <span class=\"built_in\">test</span> passwords</span><br><span class=\"line\">\tand improve security. It checks the strength of password</span><br><span class=\"line\">\tand allows the users to <span class=\"built_in\">set</span> only those passwords <span class=\"built_in\">which</span> are</span><br><span class=\"line\">\tsecure enough. Would you like to setup VALIDATE PASSWORD component?</span><br><span class=\"line\">\t<span class=\"comment\"># 設定密碼強度</span></span><br><span class=\"line\">\tPress y|Y <span class=\"keyword\">for</span> Yes, any other key <span class=\"keyword\">for</span> No: n</span><br><span class=\"line\">\t<span class=\"comment\"># 輸入密碼</span></span><br><span class=\"line\">\tPlease <span class=\"built_in\">set</span> the password <span class=\"keyword\">for</span> root here.</span><br><span class=\"line\">\tNew password:</span><br><span class=\"line\">\tRe-enter new password:</span><br><span class=\"line\">\tBy default, a MySQL installation has an anonymous user,</span><br><span class=\"line\">\tallowing anyone to <span class=\"built_in\">log</span> into MySQL without having to have</span><br><span class=\"line\">\ta user account created <span class=\"keyword\">for</span> them. This is intended only <span class=\"keyword\">for</span></span><br><span class=\"line\">\ttesting, and to make the installation go a bit smoother.</span><br><span class=\"line\">\tYou should remove them before moving into a production</span><br><span class=\"line\">\tenvironment.</span><br><span class=\"line\">\t<span class=\"comment\"># 移除匿名 user?</span></span><br><span class=\"line\">\tRemove anonymous users? (Press y|Y <span class=\"keyword\">for</span> Yes, any other key <span class=\"keyword\">for</span> No) : Y</span><br><span class=\"line\">\tSuccess.</span><br><span class=\"line\">\tNormally, root should only be allowed to connect from</span><br><span class=\"line\">\t<span class=\"string\">&#x27;localhost&#x27;</span>. This ensures that someone cannot guess at</span><br><span class=\"line\">\tthe root password from the network.</span><br><span class=\"line\">  <span class=\"comment\"># disable remote root?</span></span><br><span class=\"line\">\tDisallow root login remotely? (Press y|Y <span class=\"keyword\">for</span> Yes, any other key <span class=\"keyword\">for</span> No) : N</span><br><span class=\"line\">\t... skipping.</span><br><span class=\"line\">\tBy default, MySQL comes with a database named <span class=\"string\">&#x27;test&#x27;</span> that</span><br><span class=\"line\">\tanyone can access. This is also intended only <span class=\"keyword\">for</span> testing,</span><br><span class=\"line\">\tand should be removed before moving into a production</span><br><span class=\"line\">\tenvironment.</span><br><span class=\"line\">\t<span class=\"comment\"># 移除 test database</span></span><br><span class=\"line\">\tRemove <span class=\"built_in\">test</span> database and access to it? (Press y|Y <span class=\"keyword\">for</span> Yes, any other key <span class=\"keyword\">for</span> No) : N</span><br><span class=\"line\">\t... skipping.</span><br><span class=\"line\">\tReloading the privilege tables will ensure that all changes</span><br><span class=\"line\">\tmade so far will take effect immediately.</span><br><span class=\"line\">\t<span class=\"comment\"># 更新權限 table</span></span><br><span class=\"line\">\tReload privilege tables now? (Press y|Y <span class=\"keyword\">for</span> Yes, any other key <span class=\"keyword\">for</span> No) : Y</span><br><span class=\"line\">\tSuccess.</span><br><span class=\"line\">\tAll <span class=\"keyword\">done</span>!</span><br><span class=\"line\"><span class=\"comment\"># 設定 mysql 登入要使用密碼</span></span><br><span class=\"line\">sudo mysql</span><br><span class=\"line\"><span class=\"comment\"># 更改 root password</span></span><br><span class=\"line\">mysql&gt; ALTER USER <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class=\"string\">&#x27;rootpassword&#x27;</span>;</span><br><span class=\"line\">\tQuery OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"><span class=\"comment\"># Reload 權限設定 </span></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># login mysql by root</span></span><br><span class=\"line\">sudo mysql -u root -p</span><br><span class=\"line\">mysql&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用 browser 開啟 http://public_ip/phpmyadmin/ 即可用帳號 root 登入</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"change-apache-root-folder\"><a href=\"#change-apache-root-folder\" class=\"headerlink\" title=\"change apache root folder\"></a>change apache root folder</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># change apache root folder</span></span><br><span class=\"line\">sudo vi /etc/apache2/sites-available/000-default.conf</span><br><span class=\"line\">// --- 更改前</span><br><span class=\"line\">DocumentRoot /var/www/html</span><br><span class=\"line\">// --- 更改後</span><br><span class=\"line\">DocumentRoot /var/www</span><br><span class=\"line\"><span class=\"comment\"># 更改目錄權限,及建立軟連結</span></span><br><span class=\"line\">sudo chown -R ubuntu:ubuntu /var/www</span><br><span class=\"line\">ln -s /var/www ./www</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Hello World...&quot;</span> &gt; /var/www/index.html</span><br><span class=\"line\"><span class=\"comment\"># restart</span></span><br><span class=\"line\">sudo service apache2 restart</span><br><span class=\"line\"><span class=\"comment\"># open browser check work well</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"建立-SFTP-link\"><a href=\"#建立-SFTP-link\" class=\"headerlink\" title=\"建立 SFTP link\"></a>建立 SFTP link</h5><p>執行 FileZilla, 新增站台, 選擇協定為 SFTP, 設定IP, 設定使用者,選擇 ssh key 檔案,點選連線</p>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic23.png\" class=\"\" title=\"pic23\">\n</div>\n\n\n<p>選擇信任主機</p>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic24.png\" class=\"\" title=\"pic24\">\n</div>\n\n<p>SFTP 連線後,即可將必要的檔案傳入 </p>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic25.png\" class=\"\" title=\"pic25\">\n</div>\n\n<h5 id=\"建立-user-和-資料庫\"><a href=\"#建立-user-和-資料庫\" class=\"headerlink\" title=\"建立 user 和 資料庫\"></a>建立 user 和 資料庫</h5><p>建立 user </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo mysql -u root -p</span><br><span class=\"line\">mysql&gt; CREATE USER <span class=\"string\">&#x27;robert&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class=\"string\">&#x27;userpassword&#x27;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.02 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; GRANT ALL ON robert.* TO robert@localhost;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n\n<p>建立資料庫</p>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic26.png\" class=\"\" title=\"pic26\">\n</div>\n\n<p>匯入已有之資料庫</p>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic27.png\" class=\"\" title=\"pic27\">\n</div>\n\n<h4 id=\"設定-Elastic-IP-彈性IP-關機重開不會更改IP\"><a href=\"#設定-Elastic-IP-彈性IP-關機重開不會更改IP\" class=\"headerlink\" title=\"設定 Elastic IP(彈性IP) - 關機重開不會更改IP\"></a>設定 Elastic IP(彈性IP) - 關機重開不會更改IP</h4><ol>\n<li>選擇 Elastic IPs, 再點選 Allocate Elastic IP address</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic30.png\" class=\"\" title=\"pic30\">\n</div>\n\n<ol start=\"2\">\n<li>點選 Allocate</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic31.png\" class=\"\" title=\"pic31\">\n</div>\n\n<ol start=\"3\">\n<li>再選擇 Actions, Associate IP address</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic32.png\" class=\"\" title=\"pic32\">\n</div>\n\n<ol start=\"4\">\n<li>點選 Associate 即 設定完成,開 browser 看是否執行正常</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic33.png\" class=\"\" title=\"pic33\">\n</div>\n\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic34.png\" class=\"\" title=\"pic34\">\n</div>\n\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic35.png\" class=\"\" title=\"pic35\">\n</div>\n\n<h4 id=\"設定-Domain-name-DoDaDDy\"><a href=\"#設定-Domain-name-DoDaDDy\" class=\"headerlink\" title=\"設定 Domain name - DoDaDDy\"></a>設定 Domain name - DoDaDDy</h4><ol>\n<li>設定 domain name 對應 ip</li>\n</ol>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic37.png\" class=\"\" title=\"pic37\">\n</div>\n\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic36.png\" class=\"\" title=\"pic36\">\n</div>\n\n<h4 id=\"VSCode-SFTP-同步-Server-Code\"><a href=\"#VSCode-SFTP-同步-Server-Code\" class=\"headerlink\" title=\"VSCode SFTP 同步 Server Code\"></a>VSCode SFTP 同步 Server Code</h4><ol>\n<li>VSCode 安裝 SFTP FTP sync</li>\n</ol>\n<div style=\"width:500px\">\n    <img src=\"/2021/07/12/web-1/pic40.png\" class=\"\" title=\"pic40\">\n</div>\n\n<ol start=\"2\">\n<li>Setup Config</li>\n</ol>\n<p><code>Ctrl</code> + <code>shift</code> + <code>P</code> or <code>F1</code> –&gt; <code>SFTP:Config</code> –&gt; 設定 sftp.json 內容</p>\n<div style=\"width:500px\">\n    <img src=\"/2021/07/12/web-1/pic41.png\" class=\"\" title=\"pic41\">\n</div>\n\n<div style=\"width:500px\">\n    <img src=\"/2021/07/12/web-1/pic42.png\" class=\"\" title=\"pic42\">\n</div>\n\n<p>sftp.json 內容</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;robert_apache_new&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;35.72.2.117&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;sftp&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;port&quot;</span>: <span class=\"number\">22</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;ubuntu&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;remotePath&quot;</span>: <span class=\"string\">&quot;/home/ubuntu/www/blog3&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;uploadOnSave&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;secure&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;privateKeyPath&quot;</span>: <span class=\"string\">&quot;../robert_aws_apache.pem&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;syncMode&quot;</span>: <span class=\"string\">&quot;update&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;debug&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;watcher&quot;</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;files&quot;</span>: <span class=\"string\">&quot;**/*&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;autoUpload&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;autoDelete&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">&quot;ignore&quot;</span>: [</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;\\\\.vscode&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;\\\\.git&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;\\\\.DS_Store&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;conn.php&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;*.bak&quot;</span></span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>sftp.json 內容 mutiple Context<br>mutiple Context 僅能 link 最後一個, name也不能重複<br>所以要使用時,copy 到最後,改一下 name 即可</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;robert_apache_new&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;35.72.2.117&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;sftp&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;port&quot;</span>: <span class=\"number\">22</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;ubuntu&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;remotePath&quot;</span>: <span class=\"string\">&quot;/home/ubuntu/www/blog3&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;uploadOnSave&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;secure&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;privateKeyPath&quot;</span>: <span class=\"string\">&quot;../robert_aws_apache.pem&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;syncMode&quot;</span>: <span class=\"string\">&quot;update&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;debug&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;watcher&quot;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;files&quot;</span>: <span class=\"string\">&quot;**/*&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;autoUpload&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;autoDelete&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;ignore&quot;</span>: [</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.vscode&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.git&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.DS_Store&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;conn.php&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;*.bak&quot;</span></span><br><span class=\"line\">\t\t]</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;robert_apache3&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;54.238.250.158&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;sftp&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;port&quot;</span>: <span class=\"number\">22</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;ubuntu&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;remotePath&quot;</span>: <span class=\"string\">&quot;/home/ubuntu/www/blog2&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;uploadOnSave&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;secure&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;privateKeyPath&quot;</span>: <span class=\"string\">&quot;../demo_apache.pem&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;syncMode&quot;</span>: <span class=\"string\">&quot;update&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;debug&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;watcher&quot;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;files&quot;</span>: <span class=\"string\">&quot;**/*&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;autoUpload&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;autoDelete&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;ignore&quot;</span>: [</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.vscode&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.git&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.DS_Store&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;conn.php&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;*.bak&quot;</span></span><br><span class=\"line\">\t\t]</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;robert_null&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;sftp&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;port&quot;</span>: <span class=\"number\">22</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;ubuntu&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;remotePath&quot;</span>: <span class=\"string\">&quot;/&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;uploadOnSave&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;secure&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;privateKeyPath&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;syncMode&quot;</span>: <span class=\"string\">&quot;update&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;debug&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;robert_apache3_&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;54.238.250.158&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;protocol&quot;</span>: <span class=\"string\">&quot;sftp&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;port&quot;</span>: <span class=\"number\">22</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;ubuntu&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;remotePath&quot;</span>: <span class=\"string\">&quot;/home/ubuntu/www/blog2&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;uploadOnSave&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;secure&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;privateKeyPath&quot;</span>: <span class=\"string\">&quot;../demo_apache.pem&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;syncMode&quot;</span>: <span class=\"string\">&quot;update&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;debug&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;watcher&quot;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;files&quot;</span>: <span class=\"string\">&quot;**/*&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;autoUpload&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;autoDelete&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;ignore&quot;</span>: [</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.vscode&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.git&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;\\\\.DS_Store&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;conn.php&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;*.bak&quot;</span></span><br><span class=\"line\">\t\t]</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>同步 remote Servet</li>\n</ol>\n<p><code>Ctrl</code> + <code>shift</code> + <code>P</code> or <code>F1</code> –&gt; <code>SFTP:Sync Local -&gt; remote</code></p>\n<div style=\"width:700px\">\n    <img src=\"/2021/07/12/web-1/pic43.png\" class=\"\" title=\"pic43\">\n</div>\n\n<p>選擇 server</p>\n<div style=\"width:700px\">\n    <img src=\"/2021/07/12/web-1/pic44.png\" class=\"\" title=\"pic44\">\n</div>\n\n<p>OUTPUT 會顯示 SFTP 執行內容</p>\n<div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic45.png\" class=\"\" title=\"pic45\">\n</div>\n\n<h4 id=\"安裝-2-個別安裝\"><a href=\"#安裝-2-個別安裝\" class=\"headerlink\" title=\"安裝 #2 - 個別安裝\"></a>安裝 #2 - 個別安裝</h4><h5 id=\"安裝-apache2\"><a href=\"#安裝-apache2\" class=\"headerlink\" title=\"安裝 apache2\"></a>安裝 apache2</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更新軟體</span></span><br><span class=\"line\">sudo apt update &amp;&amp; sudo apt upgrade &amp;&amp; sudo apt dist-upgrade </span><br><span class=\"line\"><span class=\"comment\"># insatll apache</span></span><br><span class=\"line\">sudo apt install apache2</span><br><span class=\"line\"><span class=\"comment\"># start apache</span></span><br><span class=\"line\">sudo service apache2 start</span><br><span class=\"line\"><span class=\"comment\"># change apache root folder</span></span><br><span class=\"line\">sudo vi /etc/apache2/sites-available/000-default.conf</span><br><span class=\"line\">// --- 更改前</span><br><span class=\"line\">DocumentRoot /var/www/html</span><br><span class=\"line\">// --- 更改後</span><br><span class=\"line\">DocumentRoot /var/www</span><br><span class=\"line\"><span class=\"comment\"># 更改目錄權限,及建立軟連結</span></span><br><span class=\"line\">sudo chown -R ubuntu:ubuntu /var/www</span><br><span class=\"line\">ln -s /var/www ./www</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Hello World...&quot;</span> &gt; /var/www/index.html</span><br><span class=\"line\"><span class=\"comment\"># restart</span></span><br><span class=\"line\">sudo service apache2 restart</span><br><span class=\"line\"><span class=\"comment\"># open browser check work well</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"安裝-php\"><a href=\"#安裝-php\" class=\"headerlink\" title=\"安裝 php\"></a>安裝 php</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">sudo apt install php-fpm libapache2-mod-php php-curl php-imagick php-mysql php-gd php-mbstring php-xml</span><br><span class=\"line\"><span class=\"comment\"># php version</span></span><br><span class=\"line\">php -v</span><br><span class=\"line\"><span class=\"comment\"># add /var/www/phpinfo.php</span></span><br><span class=\"line\">vi ./www/phpinfo.php</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;?php</span><br><span class=\"line\">  phpinfo();</span><br><span class=\"line\">?&gt;</span><br><span class=\"line\"><span class=\"comment\"># restart</span></span><br><span class=\"line\">sudo service apache2 restart</span><br><span class=\"line\"><span class=\"comment\"># open browser phpinfo.php ceck work well</span></span><br><span class=\"line\"><span class=\"comment\"># 檢查是否有 imagick、curl、mysqli、pdo_mysql、gd、mbstring 功能</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"安裝-MySQL\"><a href=\"#安裝-MySQL\" class=\"headerlink\" title=\"安裝 MySQL\"></a>安裝 MySQL</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Install MySQL</span></span><br><span class=\"line\">sudo apt install mysql-server</span><br><span class=\"line\"><span class=\"comment\"># Run the security script </span></span><br><span class=\"line\">sudo mysql_secure_installation</span><br><span class=\"line\"><span class=\"comment\"># Creating MySQL User </span></span><br><span class=\"line\">sudo mysql</span><br><span class=\"line\">mysql&gt; CREATE USER <span class=\"string\">&#x27;robert&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class=\"string\">&#x27;passwrod&#x27;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.02 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更改 root password Password Plugin to mysql_native_password for remote login</span></span><br><span class=\"line\">mysql&gt; ALTER USER <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class=\"string\">&#x27;passwrod&#x27;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 授予 user 權限</span></span><br><span class=\"line\">mysql&gt; GRANT ALL  ON robert.* TO <span class=\"string\">&#x27;robert&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># create database - 特別要用反引號</span></span><br><span class=\"line\">mysql&gt; CREATE DATABASE `robert`;</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># free previous command cache </span></span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; <span class=\"built_in\">exit</span></span><br><span class=\"line\">Bye</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"檢查-MySQL-安裝結果\"><a href=\"#檢查-MySQL-安裝結果\" class=\"headerlink\" title=\"檢查 MySQL 安裝結果\"></a>檢查 MySQL 安裝結果</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># chec mysql status</span></span><br><span class=\"line\">ubuntu@ip-172-31-35-217:~$ systemctl status mysql.service</span><br><span class=\"line\">● mysql.service - MySQL Community Server</span><br><span class=\"line\">     Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset:&gt;</span><br><span class=\"line\">     Active: active (running) since Thu 2021-07-22 06:54:12 UTC; 52min ago</span><br><span class=\"line\">   Main PID: 36133 (mysqld)</span><br><span class=\"line\">     Status: <span class=\"string\">&quot;Server is operational&quot;</span></span><br><span class=\"line\">      Tasks: 38 (<span class=\"built_in\">limit</span>: 1160)</span><br><span class=\"line\">     Memory: 333.2M</span><br><span class=\"line\">     CGroup: /system.slice/mysql.service</span><br><span class=\"line\">             └─36133 /usr/sbin/mysqld</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># use comand mysqladmin tool dump version</span></span><br><span class=\"line\">sudo mysqladmin -p -u robert version</span><br><span class=\"line\">\tEnter password:</span><br><span class=\"line\">\tmysqladmin  Ver 8.0.25-0ubuntu0.20.04.1 <span class=\"keyword\">for</span> Linux on x86_64 ((Ubuntu))</span><br><span class=\"line\">\tCopyright (c) 2000, 2021, Oracle and/or its affiliates.</span><br><span class=\"line\">\tOracle is a registered trademark of Oracle Corporation and/or its</span><br><span class=\"line\">\taffiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">\towners.</span><br><span class=\"line\">\tServer version          8.0.25-0ubuntu0.20.04.1</span><br><span class=\"line\">\tProtocol version        10</span><br><span class=\"line\">\tConnection              Localhost via UNIX socket</span><br><span class=\"line\">\tUNIX socket             /var/run/mysqld/mysqld.sock</span><br><span class=\"line\">\tUptime:                 55 min 19 sec</span><br><span class=\"line\">\tThreads: 2  Questions: 20  Slow queries: 0  Opens: 159  Flush tables: 3  Open ta</span><br><span class=\"line\">\tbles: 78  Queries per second avg: 0.006</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"install-phpMyAdmin\"><a href=\"#install-phpMyAdmin\" class=\"headerlink\" title=\"install phpMyAdmin\"></a>install phpMyAdmin</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install phpMyAdmin 相關 package</span></span><br><span class=\"line\">sudo apt install phpmyadmin php-mbstring php-zip php-gd php-json php-curl</span><br></pre></td></tr></table></figure>\n\n<p>按 space 選擇 apache2,再用 tab 選到 ok</p>\n<div style=\"width:600px\">\n    <img src=\"/2021/07/12/web-1/pic20.png\" class=\"\" title=\"pic20\">\n</div>\n\n<p>選 Yes mapping database to phpadmin</p>\n<div style=\"width:600px\">\n    <img src=\"/2021/07/12/web-1/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n\n<p>輸入 phpmyadmin 註冊到資料庫的密碼</p>\n<div style=\"width:600px\">\n    <img src=\"/2021/07/12/web-1/pic22.png\" class=\"\" title=\"pic22\">\n</div>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># enable mbstring PHP extension, </span></span><br><span class=\"line\">sudo phpenmod mbstring</span><br><span class=\"line\"><span class=\"comment\"># restart apache2</span></span><br><span class=\"line\">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>\n\n<p>使用 browser 開啟 <a href=\"http://public_ip/phpmyadmin/\">http://public_ip/phpmyadmin/</a> 即可用帳號 phpmyadmin 登入<br>(public_ip 填入實際ip)</p>\n<p>可使用 .htaccess 增加 phpMyAdmin 安全性(有必要再來研究)</p>\n<h4 id=\"其他-app-連至-MySQL\"><a href=\"#其他-app-連至-MySQL\" class=\"headerlink\" title=\"其他 app 連至 MySQL\"></a>其他 app 連至 MySQL</h4><h5 id=\"Inbound-Rules-新增-HTTP-TCP-port-3306\"><a href=\"#Inbound-Rules-新增-HTTP-TCP-port-3306\" class=\"headerlink\" title=\"Inbound Rules 新增 HTTP TCP port:3306\"></a>Inbound Rules 新增 HTTP TCP port:3306</h5><div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic46.png\" class=\"\" title=\"pic46\">\n</div>\n\n<h5 id=\"mask-bind-address-允許連線主機\"><a href=\"#mask-bind-address-允許連線主機\" class=\"headerlink\" title=\"mask bind-address(允許連線主機)\"></a>mask bind-address(允許連線主機)</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class=\"line\"><span class=\"comment\"># --- 原來</span></span><br><span class=\"line\">bind-address          = 127.0.0.1</span><br><span class=\"line\"><span class=\"comment\"># --- 修改後</span></span><br><span class=\"line\"><span class=\"comment\"># bind-address          = 127.0.0.1</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"root-localhost-改成\"><a href=\"#root-localhost-改成\" class=\"headerlink\" title=\"root localhost 改成 %\"></a>root localhost 改成 %</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo mysql -u root -p</span><br><span class=\"line\">Enter password:</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SELECT user,plugin,host FROM mysql.user;</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| user             | plugin                | host      |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| debian-sys-maint | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.infoschema | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.session    | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.sys        | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| phpmyadmin       | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| robert           | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| root             | mysql_native_password | localhost |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t7 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; use mysql;</span><br><span class=\"line\">\tReading table information <span class=\"keyword\">for</span> completion of table and column names</span><br><span class=\"line\">\tYou can turn off this feature to get a quicker startup with -A</span><br><span class=\"line\">\tDatabase changed</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; update user <span class=\"built_in\">set</span> host =<span class=\"string\">&#x27;%&#x27;</span><span class=\"built_in\">where</span> user =<span class=\"string\">&#x27;root&#x27;</span> and host =<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\">\tQuery OK, 1 row affected (0.01 sec)</span><br><span class=\"line\">\tRows matched: 1  Changed: 1  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SELECT user,plugin,host FROM mysql.user;</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| user             | plugin                | host      |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t| root             | mysql_native_password | %         |</span><br><span class=\"line\">\t| debian-sys-maint | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.infoschema | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.session    | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| mysql.sys        | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| phpmyadmin       | caching_sha2_password | localhost |</span><br><span class=\"line\">\t| robert           | caching_sha2_password | localhost |</span><br><span class=\"line\">\t+------------------+-----------------------+-----------+</span><br><span class=\"line\">\t7 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; flush privileges;</span><br><span class=\"line\">\tQuery OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; quit</span><br><span class=\"line\">\tBye</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># restart mysql</span></span><br><span class=\"line\">sudo systemctl restart mysql</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"heidisq-port-3306-setting\"><a href=\"#heidisq-port-3306-setting\" class=\"headerlink\" title=\"heidisq port 3306 setting\"></a>heidisq port 3306 setting</h5><div style=\"width:500px\">\n    <img src=\"/2021/07/12/web-1/pic50.png\" class=\"\" title=\"pic50\">\n</div>\n\n<h4 id=\"logs-查詢\"><a href=\"#logs-查詢\" class=\"headerlink\" title=\"logs 查詢\"></a>logs 查詢</h4><ol>\n<li>apache2 log</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">less -m -N /var/<span class=\"built_in\">log</span>//apache2/error.log</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"AWS-部署和託管-React-應用程式\"><a href=\"#AWS-部署和託管-React-應用程式\" class=\"headerlink\" title=\"AWS 部署和託管 React 應用程式\"></a>AWS 部署和託管 React 應用程式</h3><h4 id=\"建立新的-React-應用程式\"><a href=\"#建立新的-React-應用程式\" class=\"headerlink\" title=\"建立新的 React 應用程式\"></a>建立新的 React 應用程式</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npx create-react-app react-todos</span><br><span class=\"line\"><span class=\"built_in\">cd</span> react-todos</span><br><span class=\"line\">npm start</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"初始化-GitHub-儲存庫\"><a href=\"#初始化-GitHub-儲存庫\" class=\"headerlink\" title=\"初始化 GitHub 儲存庫\"></a>初始化 GitHub 儲存庫</h4><ul>\n<li><p>建立 GitHub 儲存庫</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/07/12/web-1/pic60.png\" class=\"\" title=\"pic60\">\n</div></li>\n<li><p>初始化 git, 並將程式推送至 GitHub</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># git 已自動 init</span></span><br><span class=\"line\">git remote add origin https://github.com/hot5656/react-todos.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"使用-AWS-Amplify-部署應用程式\"><a href=\"#使用-AWS-Amplify-部署應用程式\" class=\"headerlink\" title=\"使用 AWS Amplify 部署應用程式\"></a>使用 AWS Amplify 部署應用程式</h4><ul>\n<li><p>AWS Amplify –&gt; Deliver –&gt; Get started</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/07/12/web-1/pic61.png\" class=\"\" title=\"pic61\">\n</div></li>\n<li><p>select GitHub</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/07/12/web-1/pic62.png\" class=\"\" title=\"pic62\">\n</div></li>\n<li><p>驗證完後, 選擇正確的 repository</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/07/12/web-1/pic63.png\" class=\"\" title=\"pic63\">\n</div></li>\n<li><p>接受預設的建置設定，然後選取 Next </p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/07/12/web-1/pic64.png\" class=\"\" title=\"pic64\">\n</div></li>\n<li><p>檢閱最終詳細資訊，然後選取 Save and Deploy (儲存並部署)</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/07/12/web-1/pic65.png\" class=\"\" title=\"pic65\">\n</div></li>\n<li><p>AWS Amplify 主控台現在將在 https://…amplifyapp.com 建立您的源代碼並部署您的應用程式</p>\n<div style=\"maxwidth:1000px\">\n  <img src=\"/2021/07/12/web-1/pic67.png\" class=\"\" title=\"pic67\">\n</div></li>\n<li><p>選擇 link 即可看到執行畫面</p>\n<div style=\"width:300px\">\n  <img src=\"/2021/07/12/web-1/pic68.png\" class=\"\" title=\"pic68\">\n</div></li>\n</ul>\n<h4 id=\"更新應用程式\"><a href=\"#更新應用程式\" class=\"headerlink\" title=\"更新應用程式\"></a>更新應用程式</h4><ul>\n<li><p>程式更動後 push 到 github</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;update for todos&quot;</span></span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure></li>\n<li><p>在 AWS Amplify 即可檢視更新的應用程式</p>\n</li>\n</ul>\n<h4 id=\"DevTools-可看到原始-source-應該要另外處理\"><a href=\"#DevTools-可看到原始-source-應該要另外處理\" class=\"headerlink\" title=\"DevTools 可看到原始 source, 應該要另外處理\"></a>DevTools 可看到原始 source, 應該要另外處理</h4><div style=\"maxwidth:1000px\">\n    <img src=\"/2021/07/12/web-1/pic69.png\" class=\"\" title=\"pic69\">\n</div>\n\n","categories":["Back End"],"tags":["web"]},{"title":"瀏覽器的 JavaScript","url":"/2021/05/25/js-2/","content":"<h3 id=\"簡介\"><a href=\"#簡介\" class=\"headerlink\" title=\"簡介\"></a>簡介</h3><h4 id=\"名詞\"><a href=\"#名詞\" class=\"headerlink\" title=\"名詞\"></a>名詞</h4><ul>\n<li>Client-side Render(CSR) : API get data 再由 JavaScript 渲染</li>\n<li>Server-side Render(SSR) : 在 Server-side 就先渲染成 HTML</li>\n<li> Search Engine Optimization(SEO) : 搜尋引擎最佳化,透過了解搜尋引擎的運作規則來調整網站，以及提高目的網站在有關搜尋引擎內排名的方式</li>\n</ul>\n<h4 id=\"JavaScript-的功能\"><a href=\"#JavaScript-的功能\" class=\"headerlink\" title=\"JavaScript 的功能\"></a>JavaScript 的功能</h4><ul>\n<li>介面 : 改變介面</li>\n<li>事件 : 監聽事件並做出反應</li>\n<li>資料 : 與伺服器交換資料</li>\n</ul>\n<span id=\"more\"></span>\n\n<h4 id=\"執行\"><a href=\"#執行\" class=\"headerlink\" title=\"執行\"></a>執行</h4><h5 id=\"放於-body-最後\"><a href=\"#放於-body-最後\" class=\"headerlink\" title=\"放於 body 最後\"></a>放於 body 最後</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>).style.background = <span class=\"string\">&#x27;red&#x27;</span></span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"放於-head-最後-但要加入-DOM-loaded-因執行時-DOM-尚未-load-完成\"><a href=\"#放於-head-最後-但要加入-DOM-loaded-因執行時-DOM-尚未-load-完成\" class=\"headerlink\" title=\"放於 head 最後, 但要加入 DOM loaded(因執行時 DOM 尚未 load 完成)\"></a>放於 head 最後, 但要加入 DOM loaded(因執行時 DOM 尚未 load 完成)</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t......</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// DOM loaded</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>).style.background = <span class=\"string\">&#x27;red&#x27;</span></span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"head-加入js-檔\"><a href=\"#head-加入js-檔\" class=\"headerlink\" title=\"head 加入js 檔\"></a>head 加入js 檔</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t......</span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- add js file --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// main.js</span></span><br><span class=\"line\"><span class=\"comment\">// DOM loaded</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>)</span><br><span class=\"line\">\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>).style.background = <span class=\"string\">&#x27;red&#x27;</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"DOM\"><a href=\"#DOM\" class=\"headerlink\" title=\"DOM\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Document_Object_Model\">DOM</a></h3><ul>\n<li><a href=\"https://www.w3schools.com/jsref/dom_obj_all.asp\">DOM Element</a></li>\n<li><a href=\"https://www.w3schools.com/jsref/dom_obj_document.asp\">DOM　Document</a></li>\n<li><a href=\"https://www.w3schools.com/jsref/dom_obj_attributes.asp\">DOM Attributes</a></li>\n</ul>\n<p>文件物件模型（Document Object Model, DOM）是 HTML、XML 和 SVG 文件的程式介面。它提供了一個文件（樹）的結構化表示法，並定義讓程式可以存取並改變文件架構、風格和內容的方法。</p>\n<div style=\"width:400px\">\n    <img src=\"/2021/05/25/js-2/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<p>圖片來自 <a href=\"https://en.wikipedia.org/wiki/Document_Object_Model\">Wikipedia DOM</a></p>\n<h4 id=\"DOM-API\"><a href=\"#DOM-API\" class=\"headerlink\" title=\"DOM API\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Document\">DOM API</a></h4><h5 id=\"選元素\"><a href=\"#選元素\" class=\"headerlink\" title=\"選元素\"></a>選元素</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;item1&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box box2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// 依類別抓取,抓取多個 - HTMLCollection</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> elements = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(elements)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">&#x27;box&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;item1&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// 依 selector 抓取,緊抓取第一個</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;div&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box2&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#item1&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// 依 selector 抓取,緊抓多個 - NodeList</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> elementsNode = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(elementsNode)</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:500px\">\n    <img src=\"/2021/05/25/js-2/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<h6 id=\"parentElement\"><a href=\"#parentElement\" class=\"headerlink\" title=\".parentElement\"></a>.parentElement</h6><p>parentElement is the parent element of the current node.<br>若無父元素或非element則傳回 null </p>\n<h6 id=\"parentNode\"><a href=\"#parentNode\" class=\"headerlink\" title=\".parentNode\"></a>.parentNode</h6><p>parentNode is the parent of the current node. The parent of an element is an Element node, a Document node, or a DocumentFragment node.<br>若無父元素或非element則傳回 null</p>\n<h5 id=\"改變-css\"><a href=\"#改變-css\" class=\"headerlink\" title=\"改變 css\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/ElementCSSInlineStyle/style\">改變 css</a></h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;item1&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box box2&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> element = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box2&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\telement.style.background = <span class=\"string\">&quot;red&quot;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\telement.style.margin = <span class=\"string\">&quot;10px&quot;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// 元件使用類陣列是輸入</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\telement.style[<span class=\"string\">&#x27;padding-top&#x27;</span>] = <span class=\"string\">&#x27;10px&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// 命名改為駝峰式</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\telement.style.paddingBottom = <span class=\"string\">&#x27;20px&#x27;</span></span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"改變-class\"><a href=\"#改變-class\" class=\"headerlink\" title=\"改變 class\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Element/classList\">改變 class</a></h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.active &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;item1&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box box2 active&quot;</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box box3&quot;</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#item1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// toggle class</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#item1&#x27;</span>).classList.toggle(<span class=\"string\">&#x27;active&#x27;</span>)</span></span><br><span class=\"line\">\t\t&#125;) </span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box2&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// remove class</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box2&#x27;</span>).classList.remove(<span class=\"string\">&#x27;active&#x27;</span>)</span></span><br><span class=\"line\">\t\t&#125;) </span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box3&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// add class</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box3&#x27;</span>).classList.add(<span class=\"string\">&#x27;active&#x27;</span>)</span></span><br><span class=\"line\">\t\t&#125;) </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"check-是否包含某class\"><a href=\"#check-是否包含某class\" class=\"headerlink\" title=\"check 是否包含某class\"></a>check 是否包含某class</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">alert(div.classList.contains(<span class=\"string\">&quot;foo&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"改變內容-innerText-innerHTML-outerHTML\"><a href=\"#改變內容-innerText-innerHTML-outerHTML\" class=\"headerlink\" title=\"改變內容 innerText, innerHTML, outerHTML\"></a>改變內容 innerText, innerHTML, outerHTML</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">36px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* height: 100px; */</span></span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.active &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: red;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;item1&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t111</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box box2 active&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t222</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box box3&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t333</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#item1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\telement = \t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#item1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// 內部之文字</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(element.innerText)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\telement.innerText = <span class=\"string\">&#x27;innerText&#x27;</span></span></span><br><span class=\"line\">\t\t&#125;) </span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box2&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// 內部之所有內容, 含 Tag</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\telement = \t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box2&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(element.innerHTML)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\telement.innerText = <span class=\"string\">&#x27;innerHTML&#x27;</span></span></span><br><span class=\"line\">\t\t&#125;) </span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box3&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\telement = \t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box3&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// 外部之父元素</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(element.outerHTML)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\telement.outerHTML = <span class=\"string\">&#x27;outerHTML&#x27;</span></span></span><br><span class=\"line\">\t\t&#125;) </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">// use innerHTML</span><br><span class=\"line\">sendAjaxhApi(&#x27;http://localhost/robert/comment/api_get_comment.php&#x27;, function(response)&#123;</span><br><span class=\"line\">\tconst comments = JSON.parse(response)</span><br><span class=\"line\">\tconsole.log(comments.comment[0])</span><br><span class=\"line\">\tlet section = document.querySelector(&#x27;section&#x27;)</span><br><span class=\"line\">\tfor(let i=0 ; i &lt; comments.comment.length ; i++ ) &#123;</span><br><span class=\"line\">\t\tlet card = document.createElement(&#x27;div&#x27;)</span><br><span class=\"line\">\t\tcard.classList.add(&#x27;card&#x27;)</span><br><span class=\"line\">\t\tcard.innerHTML = `</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-avatar&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-info&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-title&quot;</span>&gt;</span> </span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-user&quot;</span>&gt;</span>$&#123;comments.comment[i].nickname&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-time&quot;</span>&gt;</span>$&#123;comments.comment[i].create_at&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t$&#123;comments.comment[i].content&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t`</span><br><span class=\"line\">\t\tsection.appendChild(card)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"加入刪除-元素\"><a href=\"#加入刪除-元素\" class=\"headerlink\" title=\"加入刪除 元素\"></a>加入刪除 元素</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">36px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t111</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\telement = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// remove tag a</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\telement.removeChild(<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;a&#x27;</span>))</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// create element and content</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> item = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\titem.innerText = <span class=\"string\">&#x27;123&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// add tag div</span></span></span><br><span class=\"line\">\t\telement.appendChild(item)</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// create text</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> itemText = <span class=\"built_in\">document</span>.createTextNode(<span class=\"string\">&quot;999&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// add test</span></span></span><br><span class=\"line\">\t\telement.appendChild(itemText)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"append\"><a href=\"#append\" class=\"headerlink\" title=\".append()\"></a>.append()</h6><p>加入Node物件或DOMString(文字)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 加入Node物件 */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> parent = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> child = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\">parent.append(child)  <span class=\"comment\">// 然後div看起來像這樣&lt;div&gt; &lt;p&gt; &lt;/ p&gt; &lt;/ div&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/* 加入DOMString(文字) */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> parent = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span><br><span class=\"line\">parent.append(<span class=\"string\">&#x27;附加文字&#x27;</span>) <span class=\"comment\">// 然後div看起來像這樣 &lt;div&gt;附加文字&lt;/ div&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"appendChild\"><a href=\"#appendChild\" class=\"headerlink\" title=\".appendChild()\"></a>.appendChild()</h6><p>僅能加入Node物件, 不能加入DOMString(文字)<br>若加入的物件已存在,則會移動到此</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 加入Node物件 */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> parent = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> child = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;p&#x27;</span>)</span><br><span class=\"line\">parent.appendChild(child) <span class=\"comment\">// 然後div看起來像這樣 &lt;div&gt; &lt;p&gt; &lt;/ p&gt; &lt;/ div&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/* 加入DOMString(文字) */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> parent = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span><br><span class=\"line\">parent.appendChild(<span class=\"string\">&#x27;Appending Text&#x27;</span>) <span class=\"comment\">// Uncaught TypeError: Failed to execute &#x27;appendChild&#x27; on &#x27;Node&#x27;: parameter 1 is not of type &#x27;Node&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"remove-直接移除元件\"><a href=\"#remove-直接移除元件\" class=\"headerlink\" title=\".remove() - 直接移除元件\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/remove\">.remove()</a> - 直接移除元件</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> el = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;div-02&#x27;</span>);</span><br><span class=\"line\">el.remove(); <span class=\"comment\">// Removes the div with the &#x27;div-02&#x27; id</span></span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\">Event</a></h4><ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element#clipboard_events\">Element Events</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document#events\">Document Events</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window#events\">Windown Events</a></li>\n</ul>\n<h5 id=\"addEventListener\"><a href=\"#addEventListener\" class=\"headerlink\" title=\"addEventListener\"></a>addEventListener</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.box1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">36px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">5px</span> <span class=\"number\">0</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.box2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">36px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t111</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t222</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;input-text&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> element = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// callback function</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\telement.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, handleBox1);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleBox1</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\talert(<span class=\"string\">&#x27;Box1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// e.target 表 trigger event 的 element </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(e.target)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box2&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 匿名函數(Anonymous function)</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\talert(<span class=\"string\">&#x27;Box2&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.input-text&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t.addEventListener(<span class=\"string\">&#x27;keypress&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(e)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// e.key:字元, e.keyCode:編碼, e.code:字串表示</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(e.key, e.keyCode, e.code)</span></span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"click\"><a href=\"#click\" class=\"headerlink\" title=\"click\"></a>click</h6><h6 id=\"mousedown\"><a href=\"#mousedown\" class=\"headerlink\" title=\"mousedown\"></a>mousedown</h6><h6 id=\"mouseup\"><a href=\"#mouseup\" class=\"headerlink\" title=\"mouseup\"></a>mouseup</h6><h6 id=\"dbclick-短時間內雙擊左鍵觸發\"><a href=\"#dbclick-短時間內雙擊左鍵觸發\" class=\"headerlink\" title=\"dbclick - 短時間內雙擊左鍵觸發\"></a>dbclick - 短時間內雙擊左鍵觸發</h6><h6 id=\"contextmenu-滑鼠右鍵點擊觸發\"><a href=\"#contextmenu-滑鼠右鍵點擊觸發\" class=\"headerlink\" title=\"contextmenu - 滑鼠右鍵點擊觸發\"></a>contextmenu - 滑鼠右鍵點擊觸發</h6><h6 id=\"mousemove-滑鼠移動時觸發-要用到時才綁定，避免不斷觸發\"><a href=\"#mousemove-滑鼠移動時觸發-要用到時才綁定，避免不斷觸發\" class=\"headerlink\" title=\"mousemove - 滑鼠移動時觸發(要用到時才綁定，避免不斷觸發)\"></a>mousemove - 滑鼠移動時觸發(要用到時才綁定，避免不斷觸發)</h6><h6 id=\"mouseenter-滑鼠進入元素邊界時觸發-不會-bubble\"><a href=\"#mouseenter-滑鼠進入元素邊界時觸發-不會-bubble\" class=\"headerlink\" title=\"mouseenter - 滑鼠進入元素邊界時觸發(不會 bubble)\"></a>mouseenter - 滑鼠進入元素邊界時觸發(不會 bubble)</h6><h6 id=\"mouseleave-滑鼠完全離開元素時觸發-不會-bubble\"><a href=\"#mouseleave-滑鼠完全離開元素時觸發-不會-bubble\" class=\"headerlink\" title=\"mouseleave - 滑鼠完全離開元素時觸發(不會 bubble)\"></a>mouseleave - 滑鼠完全離開元素時觸發(不會 bubble)</h6><h6 id=\"mouseover-滑鼠經過不同元素時觸發\"><a href=\"#mouseover-滑鼠經過不同元素時觸發\" class=\"headerlink\" title=\"mouseover - 滑鼠經過不同元素時觸發\"></a>mouseover - 滑鼠經過不同元素時觸發</h6><h6 id=\"mouseout-滑鼠離開元素時觸發\"><a href=\"#mouseout-滑鼠離開元素時觸發\" class=\"headerlink\" title=\"mouseout - 滑鼠離開元素時觸發\"></a>mouseout - 滑鼠離開元素時觸發</h6><h6 id=\"keypress\"><a href=\"#keypress\" class=\"headerlink\" title=\"keypress\"></a>keypress</h6><ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code/code_values\">e.code</a></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* e.key : 字元</span><br><span class=\"line\">\t e.keyCode : 編碼 ascii code</span><br><span class=\"line\">\t e.code : 字串表示 &quot;KeyQ&quot; for the Q</span><br><span class=\"line\">*&#x2F;</span><br></pre></td></tr></table></figure>\n<h6 id=\"keydown\"><a href=\"#keydown\" class=\"headerlink\" title=\"keydown\"></a>keydown</h6><h6 id=\"keyup\"><a href=\"#keyup\" class=\"headerlink\" title=\"keyup\"></a>keyup</h6><h6 id=\"submit-form-commit\"><a href=\"#submit-form-commit\" class=\"headerlink\" title=\"submit - form commit\"></a>submit - form commit</h6><h6 id=\"DOMContentLoaded-DOM-load-complete\"><a href=\"#DOMContentLoaded-DOM-load-complete\" class=\"headerlink\" title=\"DOMContentLoaded - DOM load complete\"></a>DOMContentLoaded - DOM load complete</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// DOM loaded</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"表單處理\"><a href=\"#表單處理\" class=\"headerlink\" title=\"表單處理\"></a>表單處理</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;login-form&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\tname : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\tpassword : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\tpassword again : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;送出&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.login-form&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;submit&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> input1 = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;input[name=password]&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> input2 = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;input[name=password2]&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// .value 取出值</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(input1.value, input2.value)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"comment\">// 比較密碼</span></span></span><br><span class=\"line\">\t\t\t\tif (input1.value != input2.value) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// 阻止預設功能(不送出表單)</span></span></span><br><span class=\"line\">\t\t\t\t\te.preventDefault()</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\talert(<span class=\"string\">&#x27;密碼不同&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"阻止預設行為\"><a href=\"#阻止預設行為\" class=\"headerlink\" title=\"阻止預設行為\"></a>阻止預設行為</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t111</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;a&#x27;</span>).addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 阻止預設行為</span></span></span><br><span class=\"line\">\t\t\te.preventDefault();</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"事件傳遞機制\"><a href=\"#事件傳遞機制\" class=\"headerlink\" title=\"事件傳遞機制\"></a>事件傳遞機制</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.outer &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.inner &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;inner&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;button&quot;</span>&gt;</span>Click<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.outer&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.inner&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.button&#x27;</span>)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addEvent</span>(<span class=\"params\">className</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.querySelector(className)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(className)</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:400px\">\n    <img src=\"/2021/05/25/js-2/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n\n\n<h5 id=\"詳細事件傳遞機制：捕獲與冒泡\"><a href=\"#詳細事件傳遞機制：捕獲與冒泡\" class=\"headerlink\" title=\"詳細事件傳遞機制：捕獲與冒泡\"></a>詳細事件傳遞機制：捕獲與冒泡</h5><div style=\"width:700px\">\n    <img src=\"/2021/05/25/js-2/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<p>圖片來自 <a href=\"https://www.w3.org/TR/DOM-Level-3-Events/#event-flow\">W3C</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.outer &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.inner &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;inner&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;button&quot;</span>&gt;</span>Click<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.inner&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.outer&#x27;</span>)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addEvent</span>(<span class=\"params\">className</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 第三個參數設為 true, 表示捕獲 </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.querySelector(className)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(className, <span class=\"string\">&#x27;捕獲&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;, <span class=\"literal\">true</span>)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 第三個參數設為 false, 表示冒泡</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.querySelector(className)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(className, <span class=\"string\">&#x27;冒泡&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;, <span class=\"literal\">false</span>)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:400px\">\n    <img src=\"/2021/05/25/js-2/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<h5 id=\"別向上級回報：stopPropagation\"><a href=\"#別向上級回報：stopPropagation\" class=\"headerlink\" title=\"別向上級回報：stopPropagation()\"></a>別向上級回報：stopPropagation()</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.outer &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.inner &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: orange;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;inner&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;button&quot;</span>&gt;</span>Click<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.inner&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\taddEvent(<span class=\"string\">&#x27;.outer&#x27;</span>)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addEvent</span>(<span class=\"params\">className</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 第三個參數設為 true, 表示捕獲 </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.querySelector(className)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(className, <span class=\"string\">&#x27;捕獲&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;, <span class=\"literal\">true</span>)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 第三個參數設為 false, 表示冒泡</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.querySelector(className)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// .button stopPropagation</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">if</span> (className === <span class=\"string\">&#x27;.button&#x27;</span>) &#123;</span></span><br><span class=\"line\">\t\t\t\t\t\te.stopPropagation()</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(className, <span class=\"string\">&#x27;冒泡&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;, <span class=\"literal\">false</span>)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:400px\">\n    <img src=\"/2021/05/25/js-2/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<h5 id=\"多重觸發與抑制-使用-stopImmediatePropagation\"><a href=\"#多重觸發與抑制-使用-stopImmediatePropagation\" class=\"headerlink\" title=\"多重觸發與抑制(使用 stopImmediatePropagation())\"></a>多重觸發與抑制(使用 stopImmediatePropagation())</h5><p><strong>多重觸發</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;button click 1&quot;</span>)</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;button click 2&quot;</span>)</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:400px\">\n    <img src=\"/2021/05/25/js-2/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n\n<p><strong>抑制後觸發</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 要抑制另一個 stopPropagation() 無效, 要用 stopImmediatePropagation()</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// e.stopPropagation()</span></span></span><br><span class=\"line\">\t\t\te.stopImmediatePropagation()</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;button click 1&quot;</span>)</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;button click 2&quot;</span>)</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<div style=\"width:400px\">\n    <img src=\"/2021/05/25/js-2/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n\n<h5 id=\"錯誤的-event\"><a href=\"#錯誤的-event\" class=\"headerlink\" title=\"錯誤的 event\"></a>錯誤的 event</h5><p><strong>for 使用 var 為錯誤, let 即正確</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.btn &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> elements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;.btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// 若使用 var 就不正常 --&gt; alart always 6</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// let 就正常\t--&gt; alart 1~5</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// for (var i=0 ; i&lt; elements.length ; i++) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt; elements.length ; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\telements[i].addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\">\t\t\t\talert(i+1)</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>使用 html data-xx attribute</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.btn &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;a&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;2&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;3&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;4&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;5&quot;</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> elements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;.btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt; elements.length ; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\telements[i].addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\talert(e.target.getAttribute(<span class=\"string\">&#x27;data-value&#x27;</span>))</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>add new button</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.add-btn, .btn &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;add-btn&quot;</span>&gt;</span>add<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;1&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;2&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> num = <span class=\"number\">3</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> elements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;.btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt; elements.length ; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\telements[i].addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\talert(e.target.getAttribute(<span class=\"string\">&#x27;data-value&#x27;</span>))</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.add-btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> btn = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tbtn.classList.add(<span class=\"string\">&#x27;btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tbtn.setAttribute(<span class=\"string\">&#x27;data-value&#x27;</span>, num)</span></span><br><span class=\"line\">\t\t\t\tbtn.innerText = num++</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.outer&#x27;</span>).appendChild(btn)</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"event-delegation-代理\"><a href=\"#event-delegation-代理\" class=\"headerlink\" title=\"event delegation(代理)\"></a>event delegation(代理)</h5><p>事件代理（Event Delegation），又稱之為事件委託</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.add-btn, .btn &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;add-btn&quot;</span>&gt;</span>add<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;1&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">data-value</span>=<span class=\"string\">&quot;2&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> num = <span class=\"number\">3</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.add-btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> btn = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;button&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tbtn.classList.add(<span class=\"string\">&#x27;btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tbtn.setAttribute(<span class=\"string\">&#x27;data-value&#x27;</span>, num)</span></span><br><span class=\"line\">\t\t\t\tbtn.innerText = num++</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.outer&#x27;</span>).appendChild(btn)</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.outer&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">if</span> (e.target.classList.contains(<span class=\"string\">&#x27;btn&#x27;</span>)) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\talert(e.target.getAttribute(<span class=\"string\">&#x27;data-value&#x27;</span>))</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.item &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;list&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;id1&quot;</span>&gt;</span>item1<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>item2<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span>item3<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> element = e.target</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">if</span> (element.classList.contains(<span class=\"string\">&#x27;item&#x27;</span>)) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(element.innerText)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 判斷 tag</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// if(element.nodeName.toLowerCase === &quot;li&quot;)</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// 判斷 id</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">if</span>(element.id === <span class=\"string\">&quot;id1&quot;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(element.id)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"DOM-loaded\"><a href=\"#DOM-loaded\" class=\"headerlink\" title=\"DOM loaded\"></a>DOM loaded</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// DOM loaded</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Web-API\"><a href=\"#Web-API\" class=\"headerlink\" title=\"Web API\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API\">Web API</a></h3><h4 id=\"Element\"><a href=\"#Element\" class=\"headerlink\" title=\"Element\"></a>Element</h4><h5 id=\"Attribute\"><a href=\"#Attribute\" class=\"headerlink\" title=\"Attribute\"></a>Attribute</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// get attribute </span></span><br><span class=\"line\"><span class=\"comment\">// var attribute = element.getAttribute(attributeName);</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> div1 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;div1&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> align = div1.getAttribute(<span class=\"string\">&quot;align&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// set attibute</span></span><br><span class=\"line\"><span class=\"comment\">// Element.setAttribute(name, value)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&quot;button&quot;</span>);</span><br><span class=\"line\">b.setAttribute(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;helloButton&quot;</span>);</span><br><span class=\"line\">b.setAttribute(<span class=\"string\">&quot;disabled&quot;</span>, <span class=\"string\">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Input-checkbox-屬性\"><a href=\"#Input-checkbox-屬性\" class=\"headerlink\" title=\"Input checkbox 屬性\"></a><a href=\"https://www.w3school.com.cn/jsref/dom_obj_checkbox.asp\">Input checkbox 屬性</a></h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 被選到</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;check1&quot;</span>).checked=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;check1&quot;</span>).checked)&#123;</span><br><span class=\"line\">\tconsloe.log(<span class=\"string\">&#x27;It&#x27;</span>s selected.)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"parentElement-父元素\"><a href=\"#parentElement-父元素\" class=\"headerlink\" title=\"parentElement 父元素\"></a>parentElement 父元素</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myLI&quot;</span>).parentElement</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"click-模擬滑鼠點擊一個元素\"><a href=\"#click-模擬滑鼠點擊一個元素\" class=\"headerlink\" title=\".click() 模擬滑鼠點擊一個元素\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/HTMLElement/click\">.click()</a> 模擬滑鼠點擊一個元素</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// click 1st nav link</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.navbar a&#x27;</span>).click()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Event-1\"><a href=\"#Event-1\" class=\"headerlink\" title=\"Event\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Event\">Event</a></h4><h5 id=\"target-初觸發事件的物件\"><a href=\"#target-初觸發事件的物件\" class=\"headerlink\" title=\".target - 初觸發事件的物件\"></a>.target - 初觸發事件的物件</h5><h6 id=\"tag-name\"><a href=\"#tag-name\" class=\"headerlink\" title=\"tag name\"></a>tag name</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box&#x27;</span>)</span><br><span class=\"line\">\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// dump tag name</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(e.target.tagName.toLowerCase())</span><br><span class=\"line\">\t&#125;) <span class=\"comment\">// div , ul or li</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"currentTarget-處理事件之監聽器所屬的物件\"><a href=\"#currentTarget-處理事件之監聽器所屬的物件\" class=\"headerlink\" title=\".currentTarget - 處理事件之監聽器所屬的物件\"></a>.currentTarget - 處理事件之監聽器所屬的物件</h5><h4 id=\"XMLHttpRequest\"><a href=\"#XMLHttpRequest\" class=\"headerlink\" title=\"XMLHttpRequest\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest\">XMLHttpRequest</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">// loaded function</span></span><br><span class=\"line\">request.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (request.status &gt;= <span class=\"number\">200</span> &amp;&amp; request.status &lt; <span class=\"number\">400</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(request.responseText)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response error :&#x27;</span>, request.status)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// error </span></span><br><span class=\"line\">request.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// true 表非同步</span></span><br><span class=\"line\">request.open(<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;https://google.com&#x27;</span>, <span class=\"literal\">true</span>)</span><br><span class=\"line\">request.send()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"URLSearchParams-解析網址的參數\"><a href=\"#URLSearchParams-解析網址的參數\" class=\"headerlink\" title=\"URLSearchParams 解析網址的參數\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams\">URLSearchParams 解析網址的參數</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// http://localhost/robert/todo_list_bs4/?id=22</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> searchParams = <span class=\"keyword\">new</span> URLSearchParams(<span class=\"built_in\">window</span>.location.search);</span><br><span class=\"line\"><span class=\"keyword\">let</span> id = searchParams.get(<span class=\"string\">&#x27;id&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"History-API\"><a href=\"#History-API\" class=\"headerlink\" title=\"History API\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/History_API\">History API</a></h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 歷史紀錄中往上一步移動</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.history.back();</span><br><span class=\"line\"><span class=\"comment\">// 往下一步移動</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.history.forward();</span><br><span class=\"line\"><span class=\"comment\">// 移動到特定的歷史紀錄-往前一頁</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.history.go(-<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// 往後一頁</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.history.go(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// 更改網址 - 不更新內容</span></span><br><span class=\"line\">history.pushState(<span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"string\">&#x27;/hello&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">pushState() <span class=\"comment\">// 更改網址,但不會讓瀏覽器去載入</span></span><br><span class=\"line\">replaceState() <span class=\"comment\">// 修改目前的歷史紀錄而不是創造一個新的</span></span><br><span class=\"line\">popstate 事件 <span class=\"comment\">// popstate 事件的 state 屬性會含有一個歷史紀錄的 state object 的副本。</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"fetch-and-promise\"><a href=\"#fetch-and-promise\" class=\"headerlink\" title=\"fetch and promise\"></a>fetch and promise</h4><h5 id=\"fetch-API\"><a href=\"#fetch-API\" class=\"headerlink\" title=\"fetch API\"></a>fetch API</h5><p>Fetch API 提供了一個能獲取包含跨網路資源在的資源介面,它有點像我們所熟悉的 XMLHttpRequest,回傳為 Promise 的物件</p>\n<p>fetch example </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// simple run fetch</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> result =  fetch(<span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(result)</span><br><span class=\"line\"><span class=\"comment\">// response Promise</span></span><br><span class=\"line\"><span class=\"comment\">// --&gt; Promise &#123;&lt;pending&gt;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// fetch().then() 將 promise 內容傳至function </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">printResult</span>(<span class=\"params\">resp</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(resp)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ------------</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> result =  fetch(<span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span>)</span><br><span class=\"line\">result.then(printResult)</span><br><span class=\"line\"><span class=\"comment\">// --&gt; Response &#123;type: &quot;cors&quot;, url: &quot;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&quot;,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// response status</span></span><br><span class=\"line\">api500 = <span class=\"string\">&quot;https://run.mocky.io/v3/db4c7417-2cf8-473e-9f05-f16ec2cfe725&quot;</span></span><br><span class=\"line\">api200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\">fetch(api500).then( <span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(response.status)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">fetch(api200).then( <span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(response.status)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 500</span></span><br><span class=\"line\"><span class=\"comment\">// 300</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// text() show response</span></span><br><span class=\"line\"><span class=\"comment\">// fetch() =&gt; Promise</span></span><br><span class=\"line\"><span class=\"comment\">// response.text() =&gt; Promise</span></span><br><span class=\"line\">api200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\">fetch(api200).then( <span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\tresponse.text().then( <span class=\"function\"><span class=\"params\">text</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(text)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t<span class=\"comment\">// console.log(response.text())</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// &#123;&quot;message&quot;: &quot;Hello!&quot;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// json() show response</span></span><br><span class=\"line\"><span class=\"comment\">// return send to .then</span></span><br><span class=\"line\"><span class=\"comment\">// fetch() =&gt; Promise</span></span><br><span class=\"line\"><span class=\"comment\">// response.text() =&gt; Promise, text = json</span></span><br><span class=\"line\"><span class=\"comment\">// response.json() =&gt; Promise, text = object</span></span><br><span class=\"line\">api200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\">fetch(api200).then( <span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\tresponse.json().then(<span class=\"function\"><span class=\"params\">text</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(text)</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(text.message)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">123</span></span><br><span class=\"line\">\t&#125;).then( <span class=\"function\"><span class=\"params\">abc</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;abc=&#x27;</span>, abc)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// &#123;message: &quot;Hello!&quot;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// Hello!</span></span><br><span class=\"line\"><span class=\"comment\">// abc=123</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// json() show response (another style)</span></span><br><span class=\"line\"><span class=\"comment\">// return send to .then</span></span><br><span class=\"line\"><span class=\"comment\">// fetch() =&gt; Promise</span></span><br><span class=\"line\"><span class=\"comment\">// response.text() =&gt; Promise, text = json</span></span><br><span class=\"line\"><span class=\"comment\">// response.json() =&gt; Promise, text = object</span></span><br><span class=\"line\">api200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\">fetch(api200).then( <span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">json</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(json)</span><br><span class=\"line\">&#125;) </span><br><span class=\"line\"><span class=\"comment\">// &#123;message: &quot;Hello!&quot;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// uri error trigger catch </span></span><br><span class=\"line\"><span class=\"comment\">// return send to .then</span></span><br><span class=\"line\"><span class=\"comment\">// fetch() =&gt; Promise</span></span><br><span class=\"line\"><span class=\"comment\">// response.text() =&gt; Promise, text = json</span></span><br><span class=\"line\"><span class=\"comment\">// response.json() =&gt; Promise, text = object</span></span><br><span class=\"line\">api200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047-err&#x27;</span></span><br><span class=\"line\">fetch(api200).then( <span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">json</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(json)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;error=&quot;</span>, e)</span><br><span class=\"line\">&#125;) </span><br><span class=\"line\"><span class=\"comment\">// error= TypeError: Failed to fetch</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST</span></span><br><span class=\"line\">data = &#123;</span><br><span class=\"line\">\tage: <span class=\"number\">30</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">pi200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\">fetch(pi200, &#123;</span><br><span class=\"line\">\tbody: <span class=\"built_in\">JSON</span>.stringify(data), <span class=\"comment\">// object to json</span></span><br><span class=\"line\">\theaders: &#123;</span><br><span class=\"line\">\t\t<span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>\t<span class=\"comment\">// json format</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tmethod: <span class=\"string\">&#x27;POST&#x27;</span>, \t<span class=\"comment\">// *GET, POST, PUT, DELETE, etc.</span></span><br><span class=\"line\">\t&#125;).then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">&#125;).then( <span class=\"function\"><span class=\"params\">json</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(json)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// &#123;message: &quot;Hello!&quot;&#125;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"fetch-注意事項\"><a href=\"#fetch-注意事項\" class=\"headerlink\" title=\"fetch 注意事項\"></a>fetch 注意事項</h5><ul>\n<li>content-type 要填正確,如以下為 json</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">pi200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\">fetch(pi200, &#123;</span><br><span class=\"line\">\tbody: <span class=\"built_in\">JSON</span>.stringify(data), <span class=\"comment\">// object to json</span></span><br><span class=\"line\">\theaders: &#123;</span><br><span class=\"line\">\t\t<span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>\t<span class=\"comment\">// json format</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tmethod: <span class=\"string\">&#x27;POST&#x27;</span>, \t<span class=\"comment\">// *GET, POST, PUT, DELETE, etc.</span></span><br><span class=\"line\">\t&#125;).then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">&#125;).then( <span class=\"function\"><span class=\"params\">json</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(json)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>fetch 不會傳送 cookies，除非你有設定 credential<ul>\n<li>要讓瀏覽器將 credentials 跟著 request 一起送出, 方式就是在 init object 加上 credentials: ‘include’ </li>\n<li>想要把 credentials 發送給同源的 URL ，加上credentials: ‘same-origin’。</li>\n<li>要確保瀏覽器不會帶著 credentials 請求，可以用 credentials: ‘omit’ 。</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">fetch(<span class=\"string\">&#x27;https://example.com&#x27;</span>, &#123;</span><br><span class=\"line\">  credentials: <span class=\"string\">&#x27;include&#x27;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(<span class=\"string\">&#x27;https://example.com&#x27;</span>, &#123;</span><br><span class=\"line\">  credentials: <span class=\"string\">&#x27;same-origin&#x27;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(<span class=\"string\">&#x27;https://example.com&#x27;</span>, &#123;</span><br><span class=\"line\">  credentials: <span class=\"string\">&#x27;omit&#x27;</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>mode: ‘no-cors’僅告訴 server, don’t card CPRS don’n need response error,並不表示server 不support時,能收到資料</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// mode: &#x27;no-cors&#x27;</span></span><br><span class=\"line\">data = &#123;</span><br><span class=\"line\">\tage: <span class=\"number\">30</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">pi200 = <span class=\"string\">&#x27;https://tw.yahoo.com&#x27;</span></span><br><span class=\"line\">fetch(pi200, &#123;</span><br><span class=\"line\">\tbody: <span class=\"built_in\">JSON</span>.stringify(data), <span class=\"comment\">// object to json</span></span><br><span class=\"line\">\theaders: &#123;</span><br><span class=\"line\">\t\t<span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>\t<span class=\"comment\">// json format</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tmethod: <span class=\"string\">&#x27;POST&#x27;</span>, \t<span class=\"comment\">// *GET, POST, PUT, DELETE, etc.</span></span><br><span class=\"line\">\tmode: <span class=\"string\">&#x27;no-cors&#x27;</span>, <span class=\"comment\">// no-cors, cors, *same-origin</span></span><br><span class=\"line\">\t&#125;).then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> response.text()</span><br><span class=\"line\">\t\t\t\t.then( <span class=\"function\"><span class=\"params\">text</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(text)</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h5><h6 id=\"Promise應用-clipboard\"><a href=\"#Promise應用-clipboard\" class=\"headerlink\" title=\"Promise應用 clipboard\"></a>Promise應用 clipboard</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 只能在 active tab 發生作用 (aka 開發者無法在 colsole 做測試，會得到DOMException: Document is not focused.)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> promise = navigator.clipboard.readText()</span><br><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log()</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"Promise-example\"><a href=\"#Promise-example\" class=\"headerlink\" title=\"Promise example\"></a>Promise example</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1st Promise example</span></span><br><span class=\"line\"><span class=\"comment\">// function init(resolve, reject) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t// resolve(5)\t// data= 5, return for then</span></span><br><span class=\"line\"><span class=\"comment\">// \treject(3) // error= 3, return for catch</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// const myPromise = new Promise(init)</span></span><br><span class=\"line\"><span class=\"comment\">// sampe function as up example </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>( <span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tresolve(<span class=\"number\">4</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">myPromise.then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;data=&#x27;</span>, data)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error=&#x27;</span> , err)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set for 3s deleay </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>( <span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\tresolve(<span class=\"number\">6</span>)</span><br><span class=\"line\">\t&#125;, <span class=\"number\">3000</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">myPromise.then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;data=&#x27;</span>, data)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error=&#x27;</span> , err)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// example for XMLHttpRequest()</span></span><br><span class=\"line\">api200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\">\trequest.open(<span class=\"string\">&#x27;GET&#x27;</span>, api200, <span class=\"literal\">true</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// --------------</span></span><br><span class=\"line\">\trequest.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.status &gt;= <span class=\"number\">200</span> &amp;&amp; <span class=\"built_in\">this</span>.status &lt; <span class=\"number\">400</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">var</span> data = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">this</span>.response)</span><br><span class=\"line\">\t\t\tresolve(data)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\trequest.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">\t\treject(err)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\trequest.send()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// ----------------</span></span><br><span class=\"line\">myPromise.then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;myPromise data =&#x27;</span>, data)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error =&#x27;</span>, err)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// myPromise data = &#123;message: &quot;Hello!&quot;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// sleep()</span></span><br><span class=\"line\"><span class=\"comment\">// function sleep(ms) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \tconst myPromise = new Promise(resolve =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\tsetTimeout(resolve, ms)</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;)</span></span><br><span class=\"line\"><span class=\"comment\">// \treturn myPromise</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// ---------------</span></span><br><span class=\"line\"><span class=\"comment\">// function sleep(ms) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \treturn new Promise(resolve =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\tsetTimeout(resolve, ms)</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;)</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// ---------------</span></span><br><span class=\"line\"><span class=\"comment\">// const sleep = ms =&gt; new Promise(resolve =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t\t\t setTimeout(resolve, ms)</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t\t &#125;)</span></span><br><span class=\"line\"><span class=\"comment\">//---------------</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sleep = <span class=\"function\"><span class=\"params\">ms</span> =&gt;</span> </span><br><span class=\"line\">\t<span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> <span class=\"built_in\">setTimeout</span>(resolve, ms))</span><br><span class=\"line\">sleep(<span class=\"number\">1500</span>).then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\"> \t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;myPromise data&#x27;</span>, data)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.catch (<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\"> \t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;err =&#x27;</span>, err)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// myPromise data undefined</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"async-and-await\"><a href=\"#async-and-await\" class=\"headerlink\" title=\"async and await\"></a>async and await</h4><ul>\n<li>await 特性下，會等 promise 任務完成後才會讓程式繼續往下執行</li>\n<li>async，他能夠將 await 包在裡面，被包在裡面的 await 會依序地執行</li>\n</ul>\n<h5 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// for fetch</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> fetch(...)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(response)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// for sleep</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sleep = <span class=\"function\"><span class=\"params\">ms</span> =&gt;</span></span><br><span class=\"line\">\t<span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> <span class=\"built_in\">setTimeout</span>(resolve, ms))</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">main</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;enter main&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">await</span> sleep(<span class=\"number\">1000</span>)</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;exit main&#x27;</span>) </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">main()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// wait then get data</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sleep = <span class=\"function\"><span class=\"params\">ms</span> =&gt;</span></span><br><span class=\"line\">\t<span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> <span class=\"built_in\">setTimeout</span>(resolve, ms))</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getData</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> api200 = <span class=\"string\">&#x27;https://run.mocky.io/v3/d2268e25-bfa4-4e70-a505-b5faf61f7047&#x27;</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fetch(api200)</span><br><span class=\"line\">\t.then( <span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">\t&#125;).then(<span class=\"function\"><span class=\"params\">json</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(json)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">main</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;enter main&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">await</span> sleep(<span class=\"number\">1000</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> getData()</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">catch</span>(err) &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;exit main&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">main()</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"瀏覽器上儲存資料\"><a href=\"#瀏覽器上儲存資料\" class=\"headerlink\" title=\"瀏覽器上儲存資料\"></a>瀏覽器上儲存資料</h3><h4 id=\"Cookie\"><a href=\"#Cookie\" class=\"headerlink\" title=\"Cookie\"></a><a href=\"https://www.w3schools.com/js/js_cookies.asp\">Cookie</a></h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\tid : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\tphone : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;phone&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-save&quot;</span>&gt;</span>儲存<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCookie</span>(<span class=\"params\">cname, cvalue, exdays</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// ms</span></span></span><br><span class=\"line\">\t\t\td.setTime(d.getTime() + exdays*24*60*60*1000)</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> expires = <span class=\"string\">&#x27;expires=&#x27;</span> + d.toGMTString()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.cookie = cname + <span class=\"string\">&#x27;=&#x27;</span> + cvalue + <span class=\"string\">&#x27;;&#x27;</span> + expires + <span class=\"string\">&#x27;;path=/&#x27;</span> ;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCookie</span>(<span class=\"params\">cname</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> name = cname + <span class=\"string\">&#x27;=&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> decodeCookie = <span class=\"built_in\">decodeURIComponent</span>(<span class=\"built_in\">document</span>.cookie)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> ca = decodeCookie.split(<span class=\"string\">&#x27;;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i &lt; ca.length ; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">let</span> c = ca[i]</span></span><br><span class=\"line\">\t\t\t\tc = c.trimStart(c)</span><br><span class=\"line\">\t\t\t\tif (c.indexOf(name) === 0) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">return</span> c.substring(name.length, c.length)</span></span><br><span class=\"line\">\t\t\t\t&#125;\t</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// get cookie</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> oldId = getCookie(<span class=\"string\">&#x27;user-id&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.id&#x27;</span>).value = oldId</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.phone&#x27;</span>).value = getCookie(<span class=\"string\">&#x27;phone&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// save cookie trigger</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.btn-save&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t \t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t \t\t\t<span class=\"keyword\">const</span> id = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.id&#x27;</span>).value</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t \t\t\t<span class=\"comment\">// set cookie</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\tsetCookie(<span class=\"string\">&#x27;user-id&#x27;</span>, id, <span class=\"number\">7</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\tsetCookie(<span class=\"string\">&#x27;phone&#x27;</span>, <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.phone&#x27;</span>).value, <span class=\"number\">7</span>)</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"local-storage\"><a href=\"#local-storage\" class=\"headerlink\" title=\"local storage\"></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Window/localStorage\">local storage</a></h4><p>儲存與 server 無關資料</p>\n<h5 id=\"simple-example\"><a href=\"#simple-example\" class=\"headerlink\" title=\"simple example\"></a>simple example</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\tid : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-save&quot;</span>&gt;</span>儲存<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// get local storage</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> oldId = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&#x27;id&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.id&#x27;</span>).value = oldId</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.btn-save&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">const</span> id = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.id&#x27;</span>).value</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// set local storage</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&#x27;id&#x27;</span>, id)</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"save-job-list\"><a href=\"#save-job-list\" class=\"headerlink\" title=\"save job list\"></a>save job list</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\tjob : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;job&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-add&quot;</span>&gt;</span>新增<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;list&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> jobList = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&#x27;todo-list&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> idIndex = <span class=\"built_in\">Number</span>(<span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&#x27;id-index&#x27;</span>)))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// init value for 1st time</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">if</span> (jobList === <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\">\t\t\tjobList = []</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tif (idIndex === 0) &#123;</span><br><span class=\"line\">\t\t\tidIndex++</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// show list</span></span></span><br><span class=\"line\">\t\tshowList(jobList)</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.btn-add&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">let</span> item = &#123;&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\titem.job = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.job&#x27;</span>).value</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">if</span> (item.job !== <span class=\"string\">&#x27;&#x27;</span>) &#123;</span></span><br><span class=\"line\">\t\t\t\t\titem.id = idIndex++</span><br><span class=\"line\">\t\t\t\t\tjobList.push(item)</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// convert job array to JSON</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">let</span> jobListJson = <span class=\"built_in\">JSON</span>.stringify(jobList)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&#x27;todo-list&#x27;</span>, jobListJson)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&#x27;id-index&#x27;</span>, <span class=\"built_in\">String</span>(idIndex))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// update list</span></span></span><br><span class=\"line\">\t\t\t\t\tshowList(jobList)</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Input error&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// update job list</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showList</span>(<span class=\"params\">job</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> listDiv = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.list&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tlistDiv.innerText = <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i &lt; jobList.length ; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">let</span> item = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\titem.innerText = <span class=\"string\">`<span class=\"subst\">$&#123;job[i].id&#125;</span> : <span class=\"subst\">$&#123;job[i].job&#125;</span>`</span></span></span><br><span class=\"line\">\t\t\t\t\tlistDiv.appendChild(item)</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"session-storage\"><a href=\"#session-storage\" class=\"headerlink\" title=\"session storage\"></a>session storage</h4><p>網頁關掉即清除</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\tid : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-save&quot;</span>&gt;</span>儲存<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// get session storage</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> oldId = <span class=\"built_in\">window</span>.sessionStorage.getItem(<span class=\"string\">&#x27;id&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.id&#x27;</span>).value = oldId</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.btn-save&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"keyword\">const</span> id = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.id&#x27;</span>).value</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// set session storage</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">window</span>,sessionStorage.setItem(<span class=\"string\">&#x27;id&#x27;</span>, id)</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"傳送資料\"><a href=\"#傳送資料\" class=\"headerlink\" title=\"傳送資料\"></a>傳送資料</h3><h4 id=\"表單-from-–-gt-Browser-畫面更新\"><a href=\"#表單-from-–-gt-Browser-畫面更新\" class=\"headerlink\" title=\"表單 from –&gt; Browser 畫面更新\"></a>表單 from –&gt; Browser 畫面更新</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;app&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- action: 表單提交到哪裡(也可能是後端程式) --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt;form method=&quot;GET&quot; action=&quot;/test&quot;&gt; --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;https://google.com&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\tusername: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"AJAX-Asynchronous-JavaScript-and-XML-–-gt-資料回傳至-JavaScript\"><a href=\"#AJAX-Asynchronous-JavaScript-and-XML-–-gt-資料回傳至-JavaScript\" class=\"headerlink\" title=\"AJAX(Asynchronous JavaScript and XML) –&gt; 資料回傳至 JavaScript\"></a>AJAX(Asynchronous JavaScript and XML) –&gt; 資料回傳至 JavaScript</h4><h5 id=\"AJAX-google-瀏覽器的限制-同源策略-Same-origin-policy\"><a href=\"#AJAX-google-瀏覽器的限制-同源策略-Same-origin-policy\" class=\"headerlink\" title=\"AJAX google - 瀏覽器的限制 同源策略(Same-origin policy)\"></a>AJAX google - 瀏覽器的限制 同源策略(Same-origin policy)</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// loaded function</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\trequest.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">\t\t\tif (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(request.responseText)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response error :&#x27;</span>, request.status)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// error </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\trequest.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error&#x27;</span>)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// true 表非同步</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\trequest.open(<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;https://google.com&#x27;</span>, <span class=\"literal\">true</span>)</span></span><br><span class=\"line\">\t\trequest.send()</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:700px\">\n    <img src=\"/2021/05/25/js-2/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n\n<h5 id=\"AJAX-fake-data-Access-Control-Allow-Origin\"><a href=\"#AJAX-fake-data-Access-Control-Allow-Origin\" class=\"headerlink\" title=\"AJAX fake data - Access-Control-Allow-Origin : *\"></a>AJAX fake data - Access-Control-Allow-Origin : *</h5><p>CORS(全名為 Cross-Origin Resource Sharing) 跨來源資源共享 : server response head 加 Access-Control-Allow-Origin : *</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// loaded function</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// type 1</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// request.addEventListener(&#x27;load&#x27;, function() &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// \tif (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// \t\tconsole.log(request.responseText)</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// \t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// \telse &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// \t\tconsole.log(&#x27;response error :&#x27;, request.status)</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// \t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// &#125;)</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// type 2</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\trequest.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">\t\t\tif (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(request.responseText)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response error :&#x27;</span>, request.status)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// error </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\trequest.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error&#x27;</span>)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// true 表非同步</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\trequest.open(<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;https://reqres.in/api/users/2&#x27;</span>, <span class=\"literal\">true</span>)</span></span><br><span class=\"line\">\t\trequest.send()</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<div style=\"width:700px\">\n    <img src=\"/2021/05/25/js-2/pic10.png\" class=\"\" title=\"pic10\">\n</div>\n\n<h5 id=\"AJAX-set-header\"><a href=\"#AJAX-set-header\" class=\"headerlink\" title=\"AJAX set header\"></a>AJAX set header</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sendTwitchApi</span>(<span class=\"params\">url, respProcess</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\">\t<span class=\"comment\">// loaded function</span></span><br><span class=\"line\">\trequest.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (request.status &gt;= <span class=\"number\">200</span> &amp;&amp; request.status &lt; <span class=\"number\">400</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// process by callback function</span></span><br><span class=\"line\">\t\t\trespProcess(request.responseText)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response :&#x27;</span>, request)</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response error :&#x27;</span>, request.status)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// error </span></span><br><span class=\"line\">\trequest.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// true 表非同步</span></span><br><span class=\"line\">\trequest.open(<span class=\"string\">&#x27;GET&#x27;</span>, url, <span class=\"literal\">true</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// add header</span></span><br><span class=\"line\">\trequest.setRequestHeader(<span class=\"string\">&#x27;Accept&#x27;</span>,<span class=\"string\">&#x27;application/vnd.twitchtv.v5+json&#x27;</span>);</span><br><span class=\"line\">\trequest.setRequestHeader(<span class=\"string\">&#x27;Client-ID&#x27;</span>,<span class=\"string\">&#x27;qvtuq71csrlv5ipxo1ljzgbzqn1okh&#x27;</span>);</span><br><span class=\"line\">\trequest.send()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JSONP-JSON-with-Padding-第三種方式資料交換方式\"><a href=\"#JSONP-JSON-with-Padding-第三種方式資料交換方式\" class=\"headerlink\" title=\"JSONP(JSON with Padding) 第三種方式資料交換方式\"></a>JSONP(JSON with Padding) 第三種方式資料交換方式</h4><ul>\n<li>img, scrip不受同源限制</li>\n<li>使用 script 傳回 json data 即可不受 同源策略 限制</li>\n<li>若 json 外部可包一個 function 即可方便處理,故要 server 配合</li>\n<li>某些 server 可指定 callback function(如 Twitch)</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">receiveData</span> (<span class=\"params\">response</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(response);</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- &lt;script src=&quot;https://www.game.com/api/user&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\treceiveData(</span><br><span class=\"line\">\t &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t name: <span class=\"string\">&#x27;Robert&#x27;</span>,</span></span><br><span class=\"line\">\t\t age: 30</span><br><span class=\"line\">\t &#125;</span><br><span class=\"line\">\t)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"單向資料傳送-email-或-廣告-追蹤\"><a href=\"#單向資料傳送-email-或-廣告-追蹤\" class=\"headerlink\" title=\"單向資料傳送(email 或 廣告 追蹤)\"></a>單向資料傳送(email 或 廣告 追蹤)</h4><p>擺一張小而透明的檔案,若網頁被打開,server就知道 email/廣告 被打開 </p>\n<h3 id=\"Window\"><a href=\"#Window\" class=\"headerlink\" title=\"Window\"></a>Window</h3><h4 id=\"method\"><a href=\"#method\" class=\"headerlink\" title=\"method\"></a>method</h4><h5 id=\"alert\"><a href=\"#alert\" class=\"headerlink\" title=\"alert()\"></a>alert()</h5><p>Displays an alert dialog</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// window 可省略</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.alert(<span class=\"string\">&quot;hello!&quot;</span>)</span><br><span class=\"line\">alert(<span class=\"string\">&quot;hello2 !&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"load-畫面\"><a href=\"#load-畫面\" class=\"headerlink\" title=\"load 畫面\"></a>load 畫面</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 刷新當前頁面</span></span><br><span class=\"line\">location.reload()</span><br><span class=\"line\"><span class=\"comment\">// load 指定頁面</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.location = <span class=\"string\">&#x27;index.html?id=&#x27;</span> + respId</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"window-load-complete\"><a href=\"#window-load-complete\" class=\"headerlink\" title=\"window load complete\"></a>window load complete</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Snippet-for-JavaScript\"><a href=\"#Snippet-for-JavaScript\" class=\"headerlink\" title=\"Snippet for JavaScript\"></a>Snippet for JavaScript</h3><h5 id=\"escape-HTML\"><a href=\"#escape-HTML\" class=\"headerlink\" title=\"escape HTML\"></a>escape HTML</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">escapeHTML</span>(<span class=\"params\">s</span>) </span>&#123; </span><br><span class=\"line\">  <span class=\"keyword\">return</span> s.replace(<span class=\"regexp\">/&amp;/g</span>, <span class=\"string\">&#x27;&amp;amp;&#x27;</span>)</span><br><span class=\"line\">          .replace(<span class=\"regexp\">/&quot;/g</span>, <span class=\"string\">&#x27;&amp;quot;&#x27;</span>)</span><br><span class=\"line\">          .replace(<span class=\"regexp\">/&lt;/g</span>, <span class=\"string\">&#x27;&amp;lt;&#x27;</span>)</span><br><span class=\"line\">          .replace(<span class=\"regexp\">/&gt;/g</span>, <span class=\"string\">&#x27;&amp;gt;&#x27;</span>)</span><br><span class=\"line\">          .replace(<span class=\"regexp\">/&#x27;/g</span>, <span class=\"string\">&quot;&amp;#039;&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["Coding"],"tags":["javascript","browser"]},{"title":"PHP 說明","url":"/2021/05/31/php-1/","content":"<h3 id=\"名詞\"><a href=\"#名詞\" class=\"headerlink\" title=\"名詞\"></a>名詞</h3><h4 id=\"雜湊-Hash-將目標文字轉換成具有相同長度的、不可逆的雜湊字串\"><a href=\"#雜湊-Hash-將目標文字轉換成具有相同長度的、不可逆的雜湊字串\" class=\"headerlink\" title=\"雜湊(Hash) : 將目標文字轉換成具有相同長度的、不可逆的雜湊字串\"></a>雜湊(Hash) : 將目標文字轉換成具有相同長度的、不可逆的雜湊字串</h4><h4 id=\"加密-Encrypt-是將目標文字轉換成具有不同長度的、可逆的密文\"><a href=\"#加密-Encrypt-是將目標文字轉換成具有不同長度的、可逆的密文\" class=\"headerlink\" title=\"加密(Encrypt) :是將目標文字轉換成具有不同長度的、可逆的密文\"></a>加密(Encrypt) :是將目標文字轉換成具有不同長度的、可逆的密文</h4><p>如 MD5, SHA256</p>\n<h4 id=\"跨網站指令碼-Cross-site-scripting-簡稱XSS-是一種網站應用程式的安全漏洞攻擊，是代碼注入的一種\"><a href=\"#跨網站指令碼-Cross-site-scripting-簡稱XSS-是一種網站應用程式的安全漏洞攻擊，是代碼注入的一種\" class=\"headerlink\" title=\"跨網站指令碼(Cross-site scripting,簡稱XSS) : 是一種網站應用程式的安全漏洞攻擊，是代碼注入的一種\"></a>跨網站指令碼(Cross-site scripting,簡稱XSS) : 是一種網站應用程式的安全漏洞攻擊，是代碼注入的一種</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 測試網站是否有正確處理特殊字元： --&gt;</span></span><br><span class=\"line\">&gt;<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">=&#x27;&gt;<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">&quot;&gt;<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"string\">&#x27;vulnerable&#x27;</span>)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">%3Cscript%3Ealert(&#x27;XSS&#x27;)%3C/script%3E</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"string\">&#x27;XSS&#x27;</span>)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 可導到釣魚網站或dump cookie --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">location.href=<span class=\"string\">&quot;https://google.com&quot;</span></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"SQL-injection\"><a href=\"#SQL-injection\" class=\"headerlink\" title=\"SQL injection\"></a>SQL injection</h4><p>也稱SQL隱碼或SQL注碼，是發生於應用程式與資料庫層的安全漏洞。簡而言之，是在輸入的字串之中夾帶SQL指令，在設計不良的程式當中忽略了字元檢查，那麼這些夾帶進去的惡意指令就會被資料庫伺服器誤認為是正常的SQL指令而執行，因此遭到破壞或是入侵。也稱為駭客的填字遊戲.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 原指令</span><br><span class=\"line\"># select * from users where username&#x3D; &#39;%s&#39; and password&#x3D;&#39;%s&#39; ;</span><br><span class=\"line\"># usaename 填入以下,即可登入</span><br><span class=\"line\">aa&#39;#</span><br><span class=\"line\">&#39; or 1&#x3D;1#</span><br><span class=\"line\"></span><br><span class=\"line\"># 原指令</span><br><span class=\"line\"># insert into comment(nickname, content) values(&#39;%s&#39;, &#39;%s&#39;);</span><br><span class=\"line\"># content 填入以下,即可偽裝留言</span><br><span class=\"line\">&#39;), (&#39;aa2&#39;, &#39;bb21</span><br><span class=\"line\">&#39;), (&#39;admin&#39;, &#39;what&#39;)#</span><br><span class=\"line\"></span><br><span class=\"line\"># 原指令</span><br><span class=\"line\"># nsert into comment(nickname, content) values(&#39;%s&#39;, &#39;%s&#39;);</span><br><span class=\"line\"># sub query 模擬以下命令</span><br><span class=\"line\"># insert into comment(nickname, content) values(&#39;aaa&#39;, (select password from users limit 1) ) </span><br><span class=\"line\"># content 填入以下,即可列出密碼</span><br><span class=\"line\">&#39;), (&#39;admin&#39;, (select password from users limit 1) )#</span><br><span class=\"line\">&#39;), (&#39;dd&#39;, (select password from users where nickname&#x3D;&#39;dd&#39;) )#</span><br><span class=\"line\">&#39;), ((select nickname from users where id&#x3D;69), (select password from users where id&#x3D;69) )#</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"資料庫正規化\"><a href=\"#資料庫正規化\" class=\"headerlink\" title=\"資料庫正規化\"></a>資料庫正規化</h4><p><a href=\"https://drawsql.app/templates\">Database schema templates</a><br>資料庫正規化，又稱正規化、標準化，是資料庫設計的一系列原理和技術</p>\n<h4 id=\"CSRF-Cross-Site-Request-Forgery-跨站請求偽造\"><a href=\"#CSRF-Cross-Site-Request-Forgery-跨站請求偽造\" class=\"headerlink\" title=\"CSRF(Cross Site Request Forgery) 跨站請求偽造\"></a>CSRF(Cross Site Request Forgery) 跨站請求偽造</h4><ul>\n<li>現在有些 Framework 都有內建防禦 CSRF 的功能，可以很簡單的開啟</li>\n<li>使用者的防禦 : 每次使用完網站就登出，就可以避免掉 CSRF</li>\n<li>Server 的防禦 : <ul>\n<li>檢查 Referer</li>\n<li>加上圖形驗證碼, 簡訊驗證碼等等</li>\n<li>加上 CSRF token<br>  在 form 裡面加上一個 hidden 的欄位，叫做csrftoken，這裡面填的值由 server 隨機產生，並且存在 server 的 session 中。<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;https://small-min.blog.com/delete&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;3&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;csrftoken&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;fj1iro2jro12ijoi1&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;刪除文章&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>browser 本身的防禦 : Chrome 51 版的時候正式加入了這個功能：SameSite cookie<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 你原本設置 Cookie 的 header 長這樣：</span></span><br><span class=\"line\">Set-Cookie: session_id=ewfewjf23o1;</span><br><span class=\"line\"><span class=\"comment\">// 你只要在後面多加一個 SameSite 就好：</span></span><br><span class=\"line\">Set-Cookie: session_id=ewfewjf23o1; SameSite</span><br></pre></td></tr></table></figure></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 假設刪除文章命令如下</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&#x27;/delete?id=3&#x27;</span>&gt;</span>刪除<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">// 點下去,刪除自己的文章</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&#x27;https://small-min.blog.com/delete?id=3&#x27;</span>&gt;</span>開始測驗<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">// 打開網頁即刪除文章</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#x27;https://small-min.blog.com/delete?id=3&#x27;</span> <span class=\"attr\">width</span>=<span class=\"string\">&#x27;0&#x27;</span> <span class=\"attr\">height</span>=<span class=\"string\">&#x27;0&#x27;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&#x27;/test&#x27;</span>&gt;</span>開始測驗<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">// 若刪除改為 POST</span><br><span class=\"line\">// 點下去,刪除自己的文章</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;https://small-min.blog.com/delete&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;3&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;開始測驗&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">// 不知情刪除</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;display:none&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;csrf-frame&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&#x27;POST&#x27;</span> <span class=\"attr\">action</span>=<span class=\"string\">&#x27;https://small-min.blog.com/delete&#x27;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;csrf-frame&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;csrf-form&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&#x27;hidden&#x27;</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;id&#x27;</span> <span class=\"attr\">value</span>=<span class=\"string\">&#x27;3&#x27;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&#x27;submit&#x27;</span> <span class=\"attr\">value</span>=<span class=\"string\">&#x27;submit&#x27;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;csrf-form&quot;</span>).submit()</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">// 若刪除改為 json format</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;https://small-min.blog.com/delete&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post&quot;</span> <span class=\"attr\">enctype</span>=<span class=\"string\">&quot;text/plain&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&#x27;&#123;&quot;id&quot;:3, &quot;ignore_me&quot;:&quot;&#x27;</span> <span class=\"attr\">value</span>=<span class=\"string\">&#x27;test&quot;&#125;&#x27;</span> <span class=\"attr\">type</span>=<span class=\"string\">&#x27;hidden&#x27;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">value</span>=<span class=\"string\">&quot;delete!&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CORS-全名為-Cross-Origin-Resource-Sharing-跨來源資源共享\"><a href=\"#CORS-全名為-Cross-Origin-Resource-Sharing-跨來源資源共享\" class=\"headerlink\" title=\"CORS(全名為 Cross-Origin Resource Sharing) 跨來源資源共享\"></a>CORS(全名為 Cross-Origin Resource Sharing) 跨來源資源共享</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">header(<span class=\"string\">&#x27;Access-Control-Allow-Origin: *&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Offset-limit-based-and-Cursored-based-Pagination\"><a href=\"#Offset-limit-based-and-Cursored-based-Pagination\" class=\"headerlink\" title=\"Offset/limit-based and Cursored-based Pagination\"></a>Offset/limit-based and Cursored-based Pagination</h4><ul>\n<li>offset 在運作的時候需要從頭開始尋訪 (Scan table) 才能知道要取哪一段資料，所以當分頁越後面的時候查詢時間就會越久，在小型資料庫並不會有特別的感覺，但是當資料量非常龐大 (到達幾千萬或是上億時) 時，就能感受到時間明顯的差距</li>\n<li>對於大型資料庫做分頁的其中一個替代方案便是 Cursor-based pagination，其能夠有效使用資料庫的 index 進行尋訪，不會對於資料庫造成傷害</li>\n</ul>\n<h3 id=\"設計參考\"><a href=\"#設計參考\" class=\"headerlink\" title=\"設計參考\"></a>設計參考</h3><h4 id=\"PHP-Security-注意事項\"><a href=\"#PHP-Security-注意事項\" class=\"headerlink\" title=\"PHP Security 注意事項\"></a>PHP Security 注意事項</h4><ul>\n<li>add session</li>\n<li>password save by hash</li>\n<li>XSS : print add htmlspecialchars(check echo 有無呼叫 escape function)</li>\n<li>SQL injection : add prepared statement</li>\n<li>權限管理 : 做以下動作前,要再 check user 是否符合<br>  modify, deleted, show private information </li>\n</ul>\n<h4 id=\"setup-XAMPP\"><a href=\"#setup-XAMPP\" class=\"headerlink\" title=\"setup XAMPP\"></a>setup XAMPP</h4><ul>\n<li>XAMPP是最流行的PHP開發環境</li>\n<li>MariaDB是MySQL關聯式資料庫管理系統的一個復刻，由社群開發，有商業支援</li>\n</ul>\n<h5 id=\"install-XAMPP\"><a href=\"#install-XAMPP\" class=\"headerlink\" title=\"install XAMPP\"></a>install <a href=\"https://www.apachefriends.org/zh_tw/index.html\">XAMPP</a></h5><h5 id=\"XAMPP-Config\"><a href=\"#XAMPP-Config\" class=\"headerlink\" title=\"XAMPP Config\"></a>XAMPP Config</h5><h6 id=\"run-XAMPP\"><a href=\"#run-XAMPP\" class=\"headerlink\" title=\"run XAMPP\"></a>run XAMPP</h6><div style=\"width:150px\">\n    <img src=\"/2021/05/31/php-1/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h6 id=\"Start-Apache-and-MySQL\"><a href=\"#Start-Apache-and-MySQL\" class=\"headerlink\" title=\"Start Apache and MySQL\"></a>Start Apache and MySQL</h6><div style=\"width:700px\">\n    <img src=\"/2021/05/31/php-1/pic2.png\" class=\"\" title=\"pic2\">\n    <img src=\"/2021/05/31/php-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<h6 id=\"check-Admin-and-PHP-PHPInfo\"><a href=\"#check-Admin-and-PHP-PHPInfo\" class=\"headerlink\" title=\"check Admin and PHP PHPInfo\"></a>check Admin and PHP PHPInfo</h6><div style=\"width:700px\">\n    <img src=\"/2021/05/31/php-1/pic4.png\" class=\"\" title=\"pic4\">\n    <img src=\"/2021/05/31/php-1/pic5.png\" class=\"\" title=\"pic5\">\n    <img src=\"/2021/05/31/php-1/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<h6 id=\"Config-PHP\"><a href=\"#Config-PHP\" class=\"headerlink\" title=\"Config PHP\"></a>Config PHP</h6><ul>\n<li><p>點選 Config -&gt; &lt;browse&gt; [PHP]</p>\n<div style=\"width:700px\">\n  <img src=\"/2021/05/31/php-1/pic7.png\" class=\"\" title=\"pic7\">\n</div></li>\n<li><p>選 xampp &gt; htdocs 目錄</p>\n<div style=\"width:700px\">\n  <img src=\"/2021/05/31/php-1/pic8.png\" class=\"\" title=\"pic8\">\n</div></li>\n<li><p>新增工作目錄 和 檔案 a.php</p>\n<div style=\"width:500px\">\n  <img src=\"/2021/05/31/php-1/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span>\t</span><br><span class=\"line\">\t<span class=\"comment\">// a.php</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;Hello!&quot;</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>browser 執行 a.php</p>\n<div style=\"width:500px\">\n  <img src=\"/2021/05/31/php-1/pic10.png\" class=\"\" title=\"pic10\">\n</div></li>\n</ul>\n<h4 id=\"PHP-基本語法\"><a href=\"#PHP-基本語法\" class=\"headerlink\" title=\"PHP 基本語法\"></a>PHP 基本語法</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span>\t</span><br><span class=\"line\">\t<span class=\"comment\">// a.php</span></span><br><span class=\"line\">\t<span class=\"comment\">// ; 結尾, echo 為輸出</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;Hello!&quot;</span> ;</span><br><span class=\"line\">\t<span class=\"comment\">// 加入標簽(有作用)</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;&lt;h1&gt;Hello!&lt;h1&gt;&quot;</span> ;</span><br><span class=\"line\">\t<span class=\"comment\">// 變數 $ 開頭</span></span><br><span class=\"line\">\t<span class=\"variable\">$a</span> = <span class=\"number\">1</span>; </span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$a</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// 字串不可相加, 要用 . </span></span><br><span class=\"line\">\t<span class=\"variable\">$b</span> = <span class=\"string\">&quot;bbbb&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$c</span> = <span class=\"string\">&quot;cccc&quot;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// echo $b + $d</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$b</span> . <span class=\"variable\">$c</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// if 條件式</span></span><br><span class=\"line\">\t<span class=\"variable\">$score</span> = <span class=\"number\">70</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$score</span> &gt;= <span class=\"number\">60</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;pass&quot;</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;fail&quot;</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// loop </span></span><br><span class=\"line\">\t<span class=\"comment\">// \\n 會解釋為空白(單引號與雙引號有差別)</span></span><br><span class=\"line\">\t<span class=\"comment\">// 因用 browser 輸出, 故改為 &lt;br? 即可換行</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">1</span> ; <span class=\"variable\">$i</span>&lt;=<span class=\"number\">10</span> ; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// echo $i . &quot;\\n&quot;;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"variable\">$i</span> . <span class=\"string\">&quot;&lt;br&gt;&quot;</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// array </span></span><br><span class=\"line\">\t<span class=\"variable\">$arr</span> = <span class=\"keyword\">array</span>(<span class=\"string\">&quot;aa&quot;</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"string\">&quot;zz&quot;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;&lt;br&gt;&quot;</span> . <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>] . <span class=\"variable\">$arr</span>[<span class=\"number\">3</span>] . <span class=\"string\">&quot;&lt;br&gt;&quot;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// array size</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;length=&quot;</span> . sizeof(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// 直接 echo array 會有問題</span></span><br><span class=\"line\">\t<span class=\"comment\">// echo $arr</span></span><br><span class=\"line\">\t<span class=\"comment\">// dump array 可用 var_dump()</span></span><br><span class=\"line\">\tvar_dump(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// 另一個 dump function print_r()</span></span><br><span class=\"line\">\tprint_r(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// function</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\"><span class=\"variable\">$a</span> ,<span class=\"variable\">$b</span></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"variable\">$a</span> + <span class=\"variable\">$b</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> add(<span class=\"number\">3</span>,<span class=\"number\">6</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># output </span></span><br><span class=\"line\">Hello!</span><br><span class=\"line\">Hello!</span><br><span class=\"line\">1bbbbccccpass1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\"></span><br><span class=\"line\">aa4</span><br><span class=\"line\">length=5array(5) &#123; [0]=&gt; string(2) <span class=\"string\">&quot;aa&quot;</span> [1]=&gt; int(2) [2]=&gt; int(3) [3]=&gt; int(4) [4]=&gt; string(2) <span class=\"string\">&quot;zz&quot;</span> &#125; </span><br><span class=\"line\">Array ( [0] =&gt; aa [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 4 [4] =&gt; zz ) 9</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Disable-cache\"><a href=\"#Disable-cache\" class=\"headerlink\" title=\"Disable cache\"></a>Disable cache</h4><p>使用XAMPP環境,有時程式改變但 browser 顯示卻不正確,可能是 cache 的影響,選擇 Disable cache 再從新整理即可</p>\n<div style=\"width:700px\">\n    <img src=\"/2021/05/31/php-1/pic11.png\" class=\"\" title=\"pic11\">\n</div>\n\n<h4 id=\"from-含不顯示資料-input’s-type-”hidden”\"><a href=\"#from-含不顯示資料-input’s-type-”hidden”\" class=\"headerlink\" title=\"from 含不顯示資料 input’s type=”hidden”\"></a>from 含不顯示資料 input’s type=”hidden”</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;form class=&quot;input-form&quot; method=&quot;POST&quot; action=&quot;update_content_handle.php&quot;&gt;</span><br><span class=\"line\">\t&lt;div class=&quot;hi&quot;&gt;</span><br><span class=\"line\">\t\tHi, </span><br><span class=\"line\">\t\t<span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">echo</span> <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;nickname&#x27;</span>];\t</span><br><span class=\"line\">\t\t<span class=\"meta\">?&gt;</span> </span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">\t&lt;textarea class=&quot;input-content&quot; name=&quot;content&quot; rows=&quot;5&quot;&gt;&lt;?php echo $content; ?&gt;&lt;/textarea&gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;hidden&quot;</span> name=<span class=\"string\">&#x27;id&#x27;</span> value=<span class=\"meta\">&lt;?php</span> <span class=\"keyword\">echo</span> <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;id&#x27;</span>] <span class=\"meta\">?&gt;</span> &gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;hidden&quot;</span> name=<span class=\"string\">&#x27;nickname&#x27;</span> value=<span class=\"meta\">&lt;?php</span> <span class=\"keyword\">echo</span> <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;nickname&#x27;</span>] <span class=\"meta\">?&gt;</span> &gt;</span><br><span class=\"line\">\t&lt;input class=&quot;input-submit&quot; type=&quot;submit&quot;&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"PHP-example\"><a href=\"#PHP-example\" class=\"headerlink\" title=\"PHP example\"></a>PHP example</h3><h4 id=\"Query-string\"><a href=\"#Query-string\" class=\"headerlink\" title=\"Query string\"></a>Query string</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Hello! &lt;br&gt;&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// 檢查 a 是否有傳進來</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;a&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;a:&quot;</span> . <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;a&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;b&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;b:&quot;</span> . <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;b&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tprint_r(<span class=\"variable\">$_GET</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># web browser </span></span><br><span class=\"line\">http://localhost/robert/data.php?a=1&amp;b=3</span><br><span class=\"line\">\tHello!</span><br><span class=\"line\">\ta:1</span><br><span class=\"line\">\tb:3</span><br><span class=\"line\">\tArray ( [a] =&gt; 1 [b] =&gt; 3 )</span><br><span class=\"line\"><span class=\"comment\"># web browser </span></span><br><span class=\"line\">http://localhost/robert/data.php?a=&amp;c=1</span><br><span class=\"line\">\tHello!</span><br><span class=\"line\">\ta:</span><br><span class=\"line\">\tArray ( [a] =&gt; [c] =&gt; 1 )</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"show-time\"><a href=\"#show-time\" class=\"headerlink\" title=\"show time\"></a>show time</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;hello !&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h1&gt;Now : <span class=\"meta\">&lt;?php</span> <span class=\"keyword\">echo</span> date(<span class=\"string\">&#x27;Y-m-d H:i:s&#x27;</span>) <span class=\"meta\">?&gt;</span>&lt;/h1&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># web browser </span></span><br><span class=\"line\">http://localhost/robert/index.php</span><br><span class=\"line\">\thello !</span><br><span class=\"line\">\tNow : 2021-06-07 08:13:39</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"form-by-GET\"><a href=\"#form-by-GET\" class=\"headerlink\" title=\"form by GET\"></a>form by GET</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- data.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// 檢查 是否有傳進來</span></span><br><span class=\"line\">\t<span class=\"comment\">// if (!isset($_GET[&#x27;name&#x27;]) ||  !isset($_GET[&#x27;age&#x27;]) ) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">// 檢查空字串較合理</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;name&#x27;</span>]) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;age&#x27;</span>]) ) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;請輸入資料!&quot;</span> ;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 程式跳開</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Hello! &#x27;</span> . <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;name&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Your age is &#x27;</span> . <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;age&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- index.php --&gt;</span><br><span class=\"line\">&lt;form method=<span class=\"string\">&quot;GET&quot;</span> action=<span class=\"string\">&quot;data.php&quot;</span>&gt;</span><br><span class=\"line\">\tname: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;name&#x27;</span>&gt;</span><br><span class=\"line\">\tage: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;age&#x27;</span>&gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"form-by-POST-要改用-POST-抓參數\"><a href=\"#form-by-POST-要改用-POST-抓參數\" class=\"headerlink\" title=\"form by POST - 要改用$_POST 抓參數\"></a>form by POST - 要改用$_POST 抓參數</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- data.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// 檢查 是否有傳進來</span></span><br><span class=\"line\">\t<span class=\"comment\">// if (!isset($_GET[&#x27;name&#x27;]) ||  !isset($_GET[&#x27;age&#x27;]) ) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">// 檢查空字串較合理</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;name&#x27;</span>]) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;age&#x27;</span>]) ) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;請輸入資料!&quot;</span> ;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 程式跳開</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Hello! &#x27;</span> . <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;name&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Your age is &#x27;</span> . <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;age&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class=\"line\">\tprint_r(<span class=\"variable\">$_POST</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- index.php --&gt;</span><br><span class=\"line\">&lt;form method=<span class=\"string\">&quot;POST&quot;</span> action=<span class=\"string\">&quot;data.php&quot;</span>&gt;</span><br><span class=\"line\">\tname: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;name&#x27;</span>&gt;</span><br><span class=\"line\">\tage: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;age&#x27;</span>&gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Query-strig-標示錯誤\"><a href=\"#Query-strig-標示錯誤\" class=\"headerlink\" title=\"Query strig 標示錯誤\"></a>Query strig 標示錯誤</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;errorCode&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$code</span> = <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;errorCode&#x27;</span>];</span><br><span class=\"line\">\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$code</span> === <span class=\"string\">&#x27;1&#x27;</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;輸入不齊全!&#x27;</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;h2 class=&quot;error&quot;&gt; 錯誤 : &#x27;</span> . <span class=\"variable\">$msg</span> . <span class=\"string\">&#x27;&lt;/h2&gt;&#x27;</span> ;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// load 含 error code</span></span><br><span class=\"line\">header(<span class=\"string\">&#x27;Location: index.php?errorCode=1&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"產生亂數字串\"><a href=\"#產生亂數字串\" class=\"headerlink\" title=\"產生亂數字串\"></a>產生亂數字串</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">creatToken</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"variable\">$str</span> = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"variable\">$i</span>=<span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">20</span> ; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$str</span> = <span class=\"variable\">$str</span> . chr(rand(<span class=\"number\">65</span>,<span class=\"number\">90</span>));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"variable\">$str</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"global-全域變數\"><a href=\"#global-全域變數\" class=\"headerlink\" title=\"global 全域變數\"></a>global 全域變數</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"variable\">$a</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sum</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">global</span> <span class=\"variable\">$a</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"variable\">$a</span> = <span class=\"variable\">$a</span>*<span class=\"number\">100</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">sum();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$a</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"htmlspecialchars-for-XSS\"><a href=\"#htmlspecialchars-for-XSS\" class=\"headerlink\" title=\"htmlspecialchars for XSS\"></a>htmlspecialchars for XSS</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// default 第二個引數為ENT_COMPAT,只轉化雙引號,不對單引號做轉換,故加入 ENT_QUOTES</span></span><br><span class=\"line\"><span class=\"variable\">$content</span> = htmlspecialchars(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;content&#x27;</span>],ENT_QUOTES);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Snippet-for-mySQL\"><a href=\"#Snippet-for-mySQL\" class=\"headerlink\" title=\"Snippet for mySQL\"></a>Snippet for mySQL</h3><h4 id=\"special-parameter\"><a href=\"#special-parameter\" class=\"headerlink\" title=\"special parameter\"></a>special parameter</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// check update/detelet success - $conn-&gt;affected_rows</span></span><br><span class=\"line\"><span class=\"variable\">$sql</span> = <span class=\"string\">&quot;update comment set content=? where id = ? and username=?&quot;</span>;</span><br><span class=\"line\"><span class=\"variable\">$stmt</span>= <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\"><span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;sss&#x27;</span>, <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;content&#x27;</span>], <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;id&#x27;</span>], <span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;username&#x27;</span>]);</span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\tprint_r(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: update_content.php?errorCode=2&amp;nickname=$_POST[&quot;nickname&quot;]&amp;id=$_POST[&quot;id&quot;]&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$affect_rows</span> = (<span class=\"keyword\">int</span>)<span class=\"variable\">$conn</span>-&gt;affected_rows;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$affect_rows</span>&lt;<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: index.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"connect-database\"><a href=\"#connect-database\" class=\"headerlink\" title=\"connect database\"></a>connect database</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- conn.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"variable\">$server_name</span> = <span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$username</span> = <span class=\"string\">&#x27;robert&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$password</span> = <span class=\"string\">&#x27;pass&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$db_name</span> = <span class=\"string\">&#x27;robert&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$conn</span> = <span class=\"keyword\">new</span> mysqli(<span class=\"variable\">$server_name</span>, <span class=\"variable\">$username</span>, <span class=\"variable\">$password</span>, <span class=\"variable\">$db_name</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$conn</span>-&gt;connect_error) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// echo &#x27;資料庫連接錯誤 : &#x27; . $conn-&gt;connect_error . &#x27;&lt;br&gt;&#x27;;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// die 表程式結束,後面不再執行</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;資料庫連接錯誤 : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;connect_error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 設定編碼,中文才不會有問題</span></span><br><span class=\"line\">\t<span class=\"variable\">$conn</span>-&gt;query(<span class=\"string\">&#x27;SET NAMES UTF8&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// 設定我們的時區</span></span><br><span class=\"line\">\t<span class=\"variable\">$conn</span>-&gt;query(<span class=\"string\">&#x27;SET time_zone = &quot;+8:00&quot;&#x27;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- data.php --&gt;</span><br><span class=\"line\">&lt;?php</span><br><span class=\"line\">\t&#x2F;&#x2F; include file</span><br><span class=\"line\">\trequire_once(&#39;conn.php&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t......</span><br><span class=\"line\">?&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"query-time-from-database\"><a href=\"#query-time-from-database\" class=\"headerlink\" title=\"query time from database\"></a>query time from database</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- data.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$conn</span>-&gt;query(<span class=\"string\">&quot;select now();&quot;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// print_r($result);</span></span><br><span class=\"line\">\t<span class=\"comment\">// 拿到結果</span></span><br><span class=\"line\">\t<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc();</span><br><span class=\"line\">\tprint_r(<span class=\"variable\">$row</span>);\t\t<span class=\"comment\">// Array ( [now()] =&gt; 2021-06-07 16:43:20 )</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;br&gt;now:&#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;now()&#x27;</span>]; <span class=\"comment\">// now:2021-06-07 16:43:20</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- data.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$conn</span>-&gt;query(<span class=\"string\">&quot;select now() as n;&quot;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// print_r($result);</span></span><br><span class=\"line\">\t<span class=\"comment\">// 拿到結果</span></span><br><span class=\"line\">\t<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc();</span><br><span class=\"line\">\t<span class=\"comment\">//print_r($row);\t\t</span></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;br&gt;now:&#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;n&#x27;</span>]; <span class=\"comment\">// now:2021-06-07 16:43:20</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"讀取-mySQL\"><a href=\"#讀取-mySQL\" class=\"headerlink\" title=\"讀取 mySQL\"></a>讀取 mySQL</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- index.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;select * from comment order by id DESC;&quot;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query($sql);</span></span><br><span class=\"line\">\t<span class=\"comment\">//if (!$result) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tdie(&#x27;Error : &#x27; . $conn-&gt;error);</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;Error : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 印出所有資料</span></span><br><span class=\"line\">\t<span class=\"comment\">// $row = $result-&gt;fetch_assoc() 每次讀出一筆資料,無資料時讀出空資料</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc()) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// print_r($row);\t</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;nickname : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;nickname&#x27;</span>] . <span class=\"string\">&#x27; content : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;content&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>; </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"讀取-mySQL-check-error\"><a href=\"#讀取-mySQL-check-error\" class=\"headerlink\" title=\"讀取 mySQL(check error)\"></a>讀取 mySQL(check error)</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> ( <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>]) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;password&#x27;</span>]) ) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: login.php?errorCode=1&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;輸入錯誤!&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//$sql = sprintf(&quot;select * from users where username= &#x27;%s&#x27; and password = &#x27;%s&#x27;; &quot;,</span></span><br><span class=\"line\">\t<span class=\"comment\">//\t\t$_POST[&#x27;username&#x27;], $_POST[&#x27;password&#x27;]);</span></span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query($sql);</span></span><br><span class=\"line\">\t<span class=\"comment\">//if (!$result) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tdie($conn-&gt;error);</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;select * from users where username= ? and password = ?&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;ss&#x27;</span>, <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>], <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;password&#x27;</span>]);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// $result-&gt;num_rows,$conn-&gt;affected_rows 都可以</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>-&gt;num_rows &lt; <span class=\"number\">1</span> ) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: login.php?errorCode=2&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;登入失敗&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;登入成功&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$expire</span> = time()+<span class=\"number\">3600</span>*<span class=\"number\">24</span>*<span class=\"number\">30</span>;</span><br><span class=\"line\">\tsetcookie(<span class=\"string\">&quot;username&quot;</span>, <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>], <span class=\"variable\">$expire</span>);</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: index.php&#x27;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"新增-mySQL-資料\"><a href=\"#新增-mySQL-資料\" class=\"headerlink\" title=\"新增 mySQL 資料\"></a>新增 mySQL 資料</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- add.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// command 方法 #1</span></span><br><span class=\"line\">\t<span class=\"comment\">// $result = $conn-&gt;query(&quot;insert into users(username) values(&#x27;apple&#x27;)&quot;);</span></span><br><span class=\"line\">\t<span class=\"variable\">$username</span> = <span class=\"string\">&#x27;orange&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// command 方法 #2</span></span><br><span class=\"line\">\t<span class=\"comment\">// $sql = &quot;insert into users(username) values(&#x27;&quot; . $username . &quot;&#x27;)&quot;;</span></span><br><span class=\"line\">\t<span class=\"comment\">// command 方法 #3</span></span><br><span class=\"line\">\t<span class=\"comment\">// $sql = sprintf(&quot;insert into users(id, username) values(%d, &#x27;%s&#x27;)&quot;, 13, $username);</span></span><br><span class=\"line\">\t<span class=\"comment\">// ---</span></span><br><span class=\"line\">\t<span class=\"comment\">// $sql = sprintf(&quot;insert into users(username) values(&#x27;%s&#x27;)&quot;, $username);</span></span><br><span class=\"line\">\t<span class=\"comment\">// $result = $conn-&gt;query($sql);</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;insert into users(username) values(?)&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;s&#x27;</span>, <span class=\"variable\">$username</span>) ;</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tprint_r(<span class=\"variable\">$result</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"新增-mySQL-資料-使用-form\"><a href=\"#新增-mySQL-資料-使用-form\" class=\"headerlink\" title=\"新增 mySQL 資料(使用 form)\"></a>新增 mySQL 資料(使用 form)</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- index.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 大到小排列</span></span><br><span class=\"line\">\t<span class=\"comment\">// $result = $conn-&gt;query(&quot;SELECT * FROM users ORDER BY id DESC;&quot;);</span></span><br><span class=\"line\">\t<span class=\"comment\">// 小到大排列</span></span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query(&quot;SELECT * FROM users ORDER BY id ASC;&quot;);</span></span><br><span class=\"line\">\t<span class=\"comment\">//if (!$result) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tdie($conn-&gt;error);</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;SELECT * FROM users ORDER BY id ASC&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;Error : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 印出所有資料</span></span><br><span class=\"line\">\t<span class=\"comment\">// $row = $result-&gt;fetch_assoc() 每次讀出一筆資料,無資料時讀出空資料</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc()) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;id : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;id&#x27;</span>] . <span class=\"string\">&#x27; username : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;username&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>;  <span class=\"comment\">// id : 1 username : Mary ...</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h2&gt;新增 user&lt;/h2&gt;</span><br><span class=\"line\">&lt;form method=<span class=\"string\">&quot;POST&quot;</span> action=<span class=\"string\">&quot;add.php&quot;</span>&gt;</span><br><span class=\"line\">\tusername: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- add.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;請輸入 username&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$username</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>];</span><br><span class=\"line\">\t<span class=\"comment\">// command 方法 #1</span></span><br><span class=\"line\">\t<span class=\"comment\">// $result = $conn-&gt;query(&quot;insert into users(username) values(&#x27;apple&#x27;)&quot;);</span></span><br><span class=\"line\">\t<span class=\"comment\">// command 方法 #2</span></span><br><span class=\"line\">\t<span class=\"comment\">// $sql = &quot;insert into users(username) values(&#x27;&quot; . $username . &quot;&#x27;)&quot;;</span></span><br><span class=\"line\">\t<span class=\"comment\">// command 方法 #3</span></span><br><span class=\"line\">\t<span class=\"comment\">// $sql = sprintf(&quot;insert into users(id, username) values(%d, &#x27;%s&#x27;)&quot;, 13, $username);</span></span><br><span class=\"line\">\t<span class=\"comment\">// --</span></span><br><span class=\"line\">\t<span class=\"comment\">// $sql = sprintf(&quot;insert into users(username) values(&#x27;%s&#x27;)&quot;, $username);</span></span><br><span class=\"line\">\t<span class=\"comment\">// $result = $conn-&gt;query($sql);</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;insert into users(username) values(?)&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;s&#x27;</span>, <span class=\"variable\">$username</span>) ;</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;新增成功!&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// run index.php</span></span><br><span class=\"line\">\theader(<span class=\"string\">&quot;Location: index.php&quot;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"新增-mySQL-資料-check-error\"><a href=\"#新增-mySQL-資料-check-error\" class=\"headerlink\" title=\"新增 mySQL 資料(check error)\"></a>新增 mySQL 資料(check error)</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> ( <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>]) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;nickname&#x27;</span>])</span><br><span class=\"line\">\t\t|| <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;password&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: register.php?errorCode=1&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;輸入錯誤!&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//$sql = sprintf(&quot;insert into users(username, nickname, password) values(&#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;)&quot;,</span></span><br><span class=\"line\">\t<span class=\"comment\">//\t\t$_POST[&#x27;username&#x27;], $_POST[&#x27;nickname&#x27;], $_POST[&#x27;password&#x27;]);</span></span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query($sql);</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;insert into users(username, nickname, password) values(?, ?, ?)&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;sss&#x27;</span>,<span class=\"variable\">$username</span>, <span class=\"variable\">$nickname</span>, password_hash(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;password&#x27;</span>], PASSWORD_DEFAULT) ) ;</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// check 是否包含字串,不包含傳回 false</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// if (strpos($conn-&gt;error, &#x27;Duplicate entry&#x27;) !== false) &#123;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// check duplicate error code = 1062</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>  (<span class=\"variable\">$conn</span>-&gt;errno === <span class=\"number\">1062</span>) &#123;</span><br><span class=\"line\">\t\t\t header(<span class=\"string\">&#x27;Location: register.php?errorCode=2&#x27;</span>);</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;帳號已被註冊!&#x27;</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t \theader(<span class=\"string\">&#x27;Location: register.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;新增錯誤!&#x27;</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;新增完成&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$expire</span> = time()+<span class=\"number\">3600</span>*<span class=\"number\">24</span>*<span class=\"number\">30</span>;</span><br><span class=\"line\">\tsetcookie(<span class=\"string\">&quot;username&quot;</span>, <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>], <span class=\"variable\">$expire</span>);</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: index.php&#x27;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"刪除-mySQL-資料\"><a href=\"#刪除-mySQL-資料\" class=\"headerlink\" title=\"刪除 mySQL 資料\"></a>刪除 mySQL 資料</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- index.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 小到大排列</span></span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query(&quot;SELECT * FROM users ORDER BY id ASC;&quot;);</span></span><br><span class=\"line\">\t<span class=\"comment\">//if (!$result) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tdie($conn-&gt;error);</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;SELECT * FROM users ORDER BY id ASC&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;Error : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 印出所有資料</span></span><br><span class=\"line\">\t<span class=\"comment\">// $row = $result-&gt;fetch_assoc() 每次讀出一筆資料,無資料時讀出空資料</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc()) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;id : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;id&#x27;</span>] . <span class=\"string\">&#x27; username : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;username&#x27;</span>] .  <span class=\"string\">&#x27;&lt;a href=&quot;delete.php?id=&#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;id&#x27;</span>] . <span class=\"string\">&#x27;&quot;&gt;刪除&lt;/a&gt;&#x27;</span> . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>;  <span class=\"comment\">// id : 1 username : Mary ...</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h2&gt;新增 user&lt;/h2&gt;</span><br><span class=\"line\">&lt;form method=<span class=\"string\">&quot;POST&quot;</span> action=<span class=\"string\">&quot;add.php&quot;</span>&gt;</span><br><span class=\"line\">\tusername: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- delete.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;id&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;請輸入 id&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$id</span> = <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;id&#x27;</span>];</span><br><span class=\"line\">\t<span class=\"comment\">//$sql = sprintf(&quot;delete from users where id = %d&quot;, $id);</span></span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query($sql);</span></span><br><span class=\"line\">\t<span class=\"comment\">//if (!$result) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tdie($conn-&gt;error);</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;delete from users where id = ?&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>= <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;s&#x27;</span>, <span class=\"variable\">$id</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\tprint_r(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: index.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// check update or delete some item</span></span><br><span class=\"line\">\t<span class=\"variable\">$affect_rows</span> = (<span class=\"keyword\">int</span>)<span class=\"variable\">$conn</span>-&gt;affected_rows;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$affect_rows</span>&lt;<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: index.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;刪除成功!&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// run index.php</span></span><br><span class=\"line\">\theader(<span class=\"string\">&quot;Location: index.php&quot;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"刪除-mySQL-資料-soft-delete\"><a href=\"#刪除-mySQL-資料-soft-delete\" class=\"headerlink\" title=\"刪除 mySQL 資料(soft delete)\"></a>刪除 mySQL 資料(soft delete)</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;utils.php&#x27;</span>);</span><br><span class=\"line\">\tsession_start();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// if account not valid auto re-direct to index(logout)</span></span><br><span class=\"line\">\taccountValid();</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"variable\">$id</span> = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;id&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$id</span> = <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;id&#x27;</span>];</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// $sql = &quot;update blog set is_deleted=? where id=?&quot;;</span></span><br><span class=\"line\">\t<span class=\"comment\">// $stmt = $conn-&gt;prepare($sql);</span></span><br><span class=\"line\">\t<span class=\"comment\">// // 使用 true, TRUE or 1 都可, 但不能設值要使用變數</span></span><br><span class=\"line\">\t<span class=\"comment\">// $true = true;</span></span><br><span class=\"line\">\t<span class=\"comment\">// $stmt-&gt;bind_param(&#x27;bs&#x27;, $true, $id);</span></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;update blog set is_deleted=TRUE where id=?&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;s&#x27;</span>, <span class=\"variable\">$id</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: admin.php?id=&#x27;</span> . <span class=\"variable\">$id</span> . <span class=\"string\">&#x27;&amp;errorCode=2&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;刪除錯誤!&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$affect_rows</span> = (<span class=\"keyword\">int</span>)<span class=\"variable\">$conn</span>-&gt;affected_rows;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$affect_rows</span>&lt;<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: admin.php?id=&#x27;</span> . <span class=\"variable\">$id</span> . <span class=\"string\">&#x27;&amp;errorCode=2&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;刪除錯誤!&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;刪除完成!&#x27;</span>;</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: admin.php&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"修改-mySQL-資料\"><a href=\"#修改-mySQL-資料\" class=\"headerlink\" title=\"修改 mySQL 資料\"></a>修改 mySQL 資料</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- index.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 小到大排列</span></span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query(&quot;SELECT * FROM users ORDER BY id ASC;&quot;);</span></span><br><span class=\"line\">\t<span class=\"comment\">//if (!$result) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tdie($conn-&gt;error);</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;SELECT * FROM users ORDER BY id ASC&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;Error : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 印出所有資料</span></span><br><span class=\"line\">\t<span class=\"comment\">// $row = $result-&gt;fetch_assoc() 每次讀出一筆資料,無資料時讀出空資料</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> (<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc()) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;id : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;id&#x27;</span>] . <span class=\"string\">&#x27; username : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;username&#x27;</span>] .  <span class=\"string\">&#x27;&lt;a href=&quot;delete.php?id=&#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;id&#x27;</span>] . <span class=\"string\">&#x27;&quot;&gt;刪除&lt;/a&gt;&#x27;</span> . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>;  <span class=\"comment\">// id : 1 username : Mary ...</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h2&gt;新增 user&lt;/h2&gt;</span><br><span class=\"line\">&lt;form method=<span class=\"string\">&quot;POST&quot;</span> action=<span class=\"string\">&quot;add.php&quot;</span>&gt;</span><br><span class=\"line\">\tusername: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h2&gt;編輯 user&lt;/h2&gt;</span><br><span class=\"line\">&lt;form method=<span class=\"string\">&quot;POST&quot;</span> action=<span class=\"string\">&quot;update.php&quot;</span>&gt;</span><br><span class=\"line\">\tid: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;id&#x27;</span>&gt;</span><br><span class=\"line\">\tusername: &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&#x27;username&#x27;</span>&gt;</span><br><span class=\"line\">\t&lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- update.php --&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// include file</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;id&#x27;</span>]) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;請輸入 id 和 username&#x27;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$id</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;id&#x27;</span>];</span><br><span class=\"line\">\t<span class=\"variable\">$username</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>];</span><br><span class=\"line\">\t<span class=\"comment\">//$sql = sprintf(&quot;update users set username=&#x27;%s&#x27; where id=%d&quot;,</span></span><br><span class=\"line\">\t<span class=\"comment\">//\t\t\t\t$username, $id);</span></span><br><span class=\"line\">\t<span class=\"comment\">//$result = $conn-&gt;query($sql);</span></span><br><span class=\"line\">\t<span class=\"comment\">//if (!$result) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tdie($conn-&gt;error);</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"comment\">//if ($conn-&gt;affected_rows &gt;=1) &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\techo &#x27;編輯成功!&#x27;;</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\">\t<span class=\"comment\">//else &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\techo &#x27;查無資料!&#x27;;</span></span><br><span class=\"line\">\t<span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;update users set username=? where id=?&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>= <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;ss&#x27;</span>, <span class=\"variable\">$username</span>, <span class=\"variable\">$id</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: index.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t\tprint_r(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// check update or delete some item</span></span><br><span class=\"line\">\t<span class=\"variable\">$affect_rows</span> = (<span class=\"keyword\">int</span>)<span class=\"variable\">$conn</span>-&gt;affected_rows;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$affect_rows</span>&lt;<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: index.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// run index.php</span></span><br><span class=\"line\">\theader(<span class=\"string\">&quot;Location: index.php&quot;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"MySQL-Prepared-Statements-預防-SQL-injection\"><a href=\"#MySQL-Prepared-Statements-預防-SQL-injection\" class=\"headerlink\" title=\"MySQL Prepared Statements (預防 SQL injection)\"></a><a href=\"https://www.w3schools.com/php/php_mysql_prepared_statements.asp\">MySQL Prepared Statements</a> (預防 SQL injection)</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$sql</span> = <span class=\"string\">&quot;select * from users where username= ?&quot;</span>;</span><br><span class=\"line\"><span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\"><span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;s&#x27;</span>, <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>]);</span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">die</span>(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// $result-&gt;num_rows,$conn-&gt;affected_rows 都可以</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>-&gt;num_rows &lt; <span class=\"number\">1</span> ) &#123;</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: login.php?errorCode=2&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;登入失敗&quot;</span>);</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"MySQL-join\"><a href=\"#MySQL-join\" class=\"headerlink\" title=\"MySQL join\"></a><a href=\"https://joins.spathon.com/\">MySQL join</a></h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># INNER JOIN</span></span><br><span class=\"line\">SELECT users.name, likes.like FROM users JOIN likes ON users.id = likes.user_id;</span><br><span class=\"line\"><span class=\"comment\"># LEFT JOIN</span></span><br><span class=\"line\">SELECT users.name, likes.like FROM users LEFT JOIN likes ON users.id = likes.user_id;</span><br><span class=\"line\"><span class=\"comment\"># RIGHT JOIN</span></span><br><span class=\"line\">SELECT users.name, likes.like FROM users RIGHT JOIN likes ON users.id = likes.user_id;</span><br><span class=\"line\"><span class=\"comment\"># OUTER JOIN</span></span><br><span class=\"line\">SELECT users.name, likes.like FROM users LEFT OUTER JOIN likes ON users.id = likes.user_id</span><br><span class=\"line\">UNION</span><br><span class=\"line\">SELECT users.name, likes.like FROM users RIGHT OUTER JOIN likes ON users.id = likes.user_id</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$sql</span> = <span class=\"string\">&#x27;select C.id, C.content, C.create_at, U.username, U.nickname &#x27;</span> . </span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;from comment as C left join users as U &#x27;</span> .</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;on C.username = U.username &#x27;</span> . </span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;where C.deleted!=1 order by C.id DESC&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;Error : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc()) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;nickname : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;nickname&#x27;</span>] . <span class=\"string\">&#x27; content : &#x27;</span> . <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;content&#x27;</span>] . <span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"MySQL-limit-and-offset\"><a href=\"#MySQL-limit-and-offset\" class=\"headerlink\" title=\"MySQL limit and offset\"></a>MySQL limit and offset</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$sql</span> = <span class=\"string\">&#x27;select C.id, C.content, C.create_at, U.username, U.nickname &#x27;</span> . </span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;from comment as C left join users as U &#x27;</span> .</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;on C.username = U.username &#x27;</span> . </span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;where C.deleted!=1 order by C.id DESC&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$sql</span> = <span class=\"variable\">$sql</span> . <span class=\"string\">&#x27; LIMIT &#x27;</span> . <span class=\"variable\">$item_perpage</span> . <span class=\"string\">&#x27; OFFSET &#x27;</span> . (<span class=\"variable\">$page</span>-<span class=\"number\">1</span>)*<span class=\"variable\">$item_perpage</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"MySQL-檢查欄位是否-NULL-或空白\"><a href=\"#MySQL-檢查欄位是否-NULL-或空白\" class=\"headerlink\" title=\"MySQL 檢查欄位是否 NULL 或空白\"></a>MySQL 檢查欄位是否 NULL 或空白</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 欄位 col_name 是 NULL 的紀錄</span></span><br><span class=\"line\">ELECT * FROM table_name WHERE col_name IS NULL</span><br><span class=\"line\"><span class=\"comment\"># 欄位 col_name 不是 NULL 的記錄</span></span><br><span class=\"line\">SELECT * FROM table_name WHERE col_name IS NOT NULL</span><br><span class=\"line\"><span class=\"comment\">#欄位 col_name 是 NULL 或 空字串 的記錄</span></span><br><span class=\"line\">SELECT * FROM table_name WHERE col_name IS NULL OR col_name = <span class=\"string\">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"login-檢查\"><a href=\"#login-檢查\" class=\"headerlink\" title=\"login 檢查\"></a>login 檢查</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// login_handle.php</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\tsession_start();</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> ( <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>]) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;password&#x27;</span>]) ) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: login.php?errorCode=4&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;輸入錯誤!&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$username</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>];</span><br><span class=\"line\">\t<span class=\"variable\">$password</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;password&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;select * from users where username=?&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;s&#x27;</span>, <span class=\"variable\">$username</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: login.php?errorCode=1&#x27;</span>);</span><br><span class=\"line\">\t\tprint_r(<span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;資料庫錯誤!&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>-&gt;num_rows &lt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: login.php?errorCode=2&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;查無帳號!&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(!password_verify(<span class=\"variable\">$password</span>, <span class=\"variable\">$row</span>[<span class=\"string\">&#x27;password&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\theader(<span class=\"string\">&#x27;Location: login.php?errorCode=3&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;密碼錯誤!&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;登入成功!&quot;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// set session</span></span><br><span class=\"line\">\t<span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;username&#x27;</span>] = <span class=\"variable\">$username</span>;</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Location: index.php&#x27;</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>check login state</li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\tsession_start();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$username</span> = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;username&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$username</span> = <span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;username&#x27;</span>];</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div class=&quot;nav-right&quot;&gt;</span><br><span class=\"line\">\t<span class=\"meta\">&lt;?php</span> <span class=\"keyword\">if</span>(<span class=\"variable\">$username</span>) &#123; <span class=\"meta\">?&gt;</span></span><br><span class=\"line\">\t\t&lt;div class=&quot;nav-item&quot;&gt;&lt;a href=&quot;admin.php&quot;&gt;管理後台&lt;/a&gt;&lt;/div&gt;</span><br><span class=\"line\">\t\t&lt;div class=&quot;nav-item&quot;&gt;&lt;a href=&quot;logout_handle.php&quot;&gt;登出&lt;/a&gt;&lt;/div&gt;</span><br><span class=\"line\">\t<span class=\"meta\">&lt;?php</span> &#125; <span class=\"keyword\">else</span> &#123; <span class=\"meta\">?&gt;</span></span><br><span class=\"line\">\t\t&lt;div class=&quot;nav-item&quot;&gt;&lt;a href=&quot;login.php&quot;&gt;登入&lt;/a&gt;&lt;/div&gt;</span><br><span class=\"line\">\t<span class=\"meta\">&lt;?php</span> &#125; <span class=\"meta\">?&gt;</span></span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"PHP-MySQL-Get-Last-Inserted-ID\"><a href=\"#PHP-MySQL-Get-Last-Inserted-ID\" class=\"headerlink\" title=\"PHP MySQL Get Last Inserted ID\"></a>PHP MySQL Get Last Inserted ID</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$id</span> = <span class=\"variable\">$conn</span>-&gt;insert_id;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"PHP-語法\"><a href=\"#PHP-語法\" class=\"headerlink\" title=\"PHP 語法\"></a>PHP 語法</h3><h4 id=\"變數\"><a href=\"#變數\" class=\"headerlink\" title=\"變數\"></a>變數</h4><h5 id=\"array\"><a href=\"#array\" class=\"headerlink\" title=\"array\"></a>array</h5><ul>\n<li>array 設定<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$array</span> = <span class=\"keyword\">array</span>(<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>,  <span class=\"number\">1</span>, <span class=\"number\">8</span> =&gt; <span class=\"number\">1</span>,  <span class=\"number\">4</span> =&gt; <span class=\"number\">1</span>, <span class=\"number\">19</span>, <span class=\"number\">3</span> =&gt; <span class=\"number\">13</span>);</span><br><span class=\"line\"><span class=\"variable\">$firstquarter</span> = <span class=\"keyword\">array</span>(<span class=\"number\">1</span> =&gt; <span class=\"string\">&#x27;January&#x27;</span>, <span class=\"string\">&#x27;February&#x27;</span>, <span class=\"string\">&#x27;March&#x27;</span>);</span><br><span class=\"line\"><span class=\"variable\">$foo</span> = <span class=\"keyword\">array</span>(<span class=\"string\">&#x27;bar&#x27;</span> =&gt; <span class=\"string\">&#x27;baz&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;Hello <span class=\"subst\">&#123;$foo[&#x27;bar&#x27;]&#125;</span>!&quot;</span>; <span class=\"comment\">// Hello baz!</span></span><br></pre></td></tr></table></figure></li>\n<li>設空 array - $levelArr = []  or levelArr = array();</li>\n<li>push array - array_push($levelArr, $row );<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getManageLevels</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">global</span> <span class=\"variable\">$conn</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$levelArr</span> = [];</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&#x27;select * from user_levels order by user_level&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span>(<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc()) &#123;</span><br><span class=\"line\">\t\t\tarray_push(<span class=\"variable\">$levelArr</span>, <span class=\"variable\">$row</span> );</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"variable\">$levelArr</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// show array</span></span><br><span class=\"line\"><span class=\"variable\">$levelArr</span> = getManageLevels();</span><br><span class=\"line\"><span class=\"variable\">$length</span> = count(<span class=\"variable\">$levelArr</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span> ; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$length</span> ; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;id&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;user_level&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;level_describe&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;all_modify&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;all_delete&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;self_create&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;self_modify&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;self_delete&#x27;</span>] . <span class=\"string\">&#x27; &#x27;</span> ;</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27; &lt;br&gt;&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"object\"><a href=\"#object\" class=\"headerlink\" title=\"object\"></a>object</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; object 設定</span><br><span class=\"line\">$manageState &#x3D; [</span><br><span class=\"line\">\t&#39;user_admin&#39; &#x3D;&gt; 0,</span><br><span class=\"line\">\t&#39;all_modify&#39; &#x3D;&gt; 0,</span><br><span class=\"line\">\t&#39;all_delete&#39; &#x3D;&gt; 0,</span><br><span class=\"line\">\t&#39;self_create&#39; &#x3D;&gt; 0,</span><br><span class=\"line\">\t&#39;self_modify&#39; &#x3D;&gt; 0,</span><br><span class=\"line\">\t&#39;self_delete&#39; &#x3D;&gt; 0,</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"SERVER-PHP預定義的超全局變量\"><a href=\"#SERVER-PHP預定義的超全局變量\" class=\"headerlink\" title=\"$_SERVER PHP預定義的超全局變量\"></a><a href=\"https://www.php.net/manual/zh/reserved.variables.server.php\">$_SERVER</a> PHP預定義的超全局變量</h5><ul>\n<li>$_SERVER[“SCRIPT_NAME”]         - /index.php<br>  當前腳本路徑</li>\n<li>$_SERVER[“REQUEST_URI”]         - /index.php?id=1<br>  訪問頁面URI，包含查詢字符串</li>\n<li>$_SERVER[“QUERY_STRING”]         - id=1<br>  查詢字符串，不存在為” “</li>\n<li>$_SERVER[“REQUEST_METHOD”]     - GET<br>  請求方法，如”POST”、”PUT”等</li>\n<li>$_SERVER[“SERVER_PROTOCOL”] - HTTP/1.1<br>  通信協議的名稱和版本</li>\n<li>$_SERVER[“GATEWAY_INTERFACE”] - CGI/1.1<br>  服務器使用的CGI 規範的版本</li>\n<li>$_SERVER[“REMOTE_PORT”]         - 60599<br>  用戶連接服務器使用的端口</li>\n<li>$_SERVER[“SCRIPT_FILENAME”] - E:/WWW/example/index.php<br>  當前腳本的絕對路徑</li>\n<li>$_SERVER[“DOCUMENT_ROOT”]     - E:/WWW/example/<br>  當前腳本文檔根目錄的絕對路徑</li>\n<li>$_SERVER[“REMOTE_ADDR”]         - 127.0.0.1<br>  用戶的IP地址</li>\n<li>$_SERVER[“SERVER_PORT”]         - 80<br>  服務器使用的端口</li>\n<li>$_SERVER[“SERVER_ADDR”]         - 127.0.0.1<br>  服務器的IP地址</li>\n<li>$_SERVER[“SERVER_NAME”]         - <a href=\"http://www.example.com/\">www.example.com</a><br>  服務器的主機名，注：如果腳本運行於虛擬主機中，該名稱是由那個虛擬主機所設置的值決定。在Apache 2裡，必須設置UseCanonicalName = On和ServerName。否則該值會由客戶端提供，就有可能被偽造。上下文有安全性要求的環境裡，不應該依賴此值。</li>\n<li>$_SERVER[“SERVER_SOFTWARE”]     - Apache/2.4.23 (Win32) OpenSSL/1.0.2j mod_fcgid/2.3.9<br>  響應頭中Server的內容</li>\n<li>$_SERVER[“SERVER_SIGNATURE”]     -<br>  包含了服務器版本和虛擬主機名的字符串</li>\n<li>$_SERVER[“HTTP_HOST”]             - <a href=\"http://www.example.com/\">www.example.com</a><br>  請求頭中Host項的內容</li>\n<li>$_SERVER[“HTTP_CONNECTION”]     - keep-alive<br>  請求頭中Connection項的內容</li>\n<li>$_SERVER[“HTTP_PRAGMA”]         - no-cache<br>  請求頭中Pragma項的內容</li>\n<li>$_SERVER[“HTTP_CACHE_CONTROL”]     - no-cache<br>  請求頭中Cache-Control項的內容</li>\n<li>$_SERVER[“HTTP_UPGRADE_INSECURE_REQUESTS”]     } |1<br>  請求頭中Upgrade-Insecure-Requests項的內容</li>\n<li>$_SERVER[“HTTP_USER_AGENT”]     - Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36<br>  請求頭中User-Agent項的內容</li>\n<li>$_SERVER[“HTTP_ACCEPT”]         - text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng, / ;q=0.<br>  請求頭中Accept項的內容</li>\n<li>$_SERVER[“HTTP_ACCEPT_ENCODING”] - gzip, deflate<br>  請求頭中Accept-Encoding項的內容</li>\n<li>$_SERVER[“HTTP_ACCEPT_LANGUAGE”] - zh-CN,zh;q=0.8<br>  請求頭中Accept-Language項的內容</li>\n<li>$_SERVER[“PHP_SELF”]                 - /index.php<br>  當前執行腳本的文件名</li>\n<li>$_SERVER[“REQUEST_TIME_FLOAT”]        - 1510112348.8084<br>  請求開始的時間戳，微秒級別精準度</li>\n<li>$_SERVER[“REQUEST_TIME”]             - 1510112348<br>  請求開始的時間戳</li>\n<li>$_SERVER[‘HTTP_REFERER’] - localhost/robert/comment/register.php<br>  前一頁面的URL 地址</li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 前頁 uri</span></span><br><span class=\"line\"><span class=\"variable\">$uri</span> = <span class=\"variable\">$_SERVER</span>[<span class=\"string\">&#x27;REQUEST_URI&#x27;</span>];</span><br><span class=\"line\"><span class=\"comment\">// 前一頁面的URL 地址</span></span><br><span class=\"line\"><span class=\"variable\">$page</span> = <span class=\"variable\">$_SERVER</span>[<span class=\"string\">&#x27;HTTP_REFERER&#x27;</span>];</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Snippet-for-PHP\"><a href=\"#Snippet-for-PHP\" class=\"headerlink\" title=\"Snippet for PHP\"></a>Snippet for PHP</h3><h4 id=\"error-code-處理\"><a href=\"#error-code-處理\" class=\"headerlink\" title=\"error code 處理\"></a>error code 處理</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;errorCode&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">switch</span> (<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;errorCode&#x27;</span>]) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span> :</span><br><span class=\"line\">\t\t\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;資料庫錯誤!&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span> :</span><br><span class=\"line\">\t\t\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;查無帳號!&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> <span class=\"number\">3</span> :</span><br><span class=\"line\">\t\t\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;密碼錯誤!&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> <span class=\"number\">4</span> :</span><br><span class=\"line\">\t\t\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;輸入錯誤!&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">default</span> :</span><br><span class=\"line\">\t\t\t\t<span class=\"variable\">$msg</span> = <span class=\"string\">&#x27;未知錯誤!&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;div class=&quot;warning&quot;&gt;&#x27;</span> . <span class=\"variable\">$msg</span> . <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"下拉式選單-lt-select-gt-lt-option-gt\"><a href=\"#下拉式選單-lt-select-gt-lt-option-gt\" class=\"headerlink\" title=\"下拉式選單 - &lt;select&gt;, &lt;option&gt;\"></a>下拉式選單 - &lt;select&gt;, &lt;option&gt;</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;select name=<span class=\"string\">&quot;level&quot;</span>&gt;</span><br><span class=\"line\">\t<span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span> ; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$length</span> ; <span class=\"variable\">$i</span>++) &#123; </span><br><span class=\"line\">\t\t\t<span class=\"variable\">$describe</span> = <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;level_describe&#x27;</span>] ;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$level</span> =  <span class=\"variable\">$levelArr</span>[<span class=\"variable\">$i</span>][<span class=\"string\">&#x27;user_level&#x27;</span>] ;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$selectStr</span> = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$row</span>[<span class=\"string\">&#x27;user_level&#x27;</span>] == <span class=\"variable\">$level</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"variable\">$selectStr</span> = <span class=\"string\">&#x27;selected&#x27;</span> ;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;option value=&quot;&#x27;</span>. <span class=\"variable\">$level</span> . <span class=\"string\">&#x27;&quot; &#x27;</span> . <span class=\"variable\">$selectStr</span> .<span class=\"string\">&#x27; &gt;&#x27;</span> . <span class=\"variable\">$describe</span> . <span class=\"string\">&#x27;&lt;/option&gt;&#x27;</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"meta\">?&gt;</span></span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"分頁\"><a href=\"#分頁\" class=\"headerlink\" title=\"分頁\"></a>分頁</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t<span class=\"comment\">// init page</span></span><br><span class=\"line\">\t<span class=\"variable\">$page</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$total_page</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&#x27;select * from blog where deleted=0 or deleted is NULL &#x27;</span></span><br><span class=\"line\">\t. <span class=\"string\">&#x27;order by id asc&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// page control </span></span><br><span class=\"line\">\t\t<span class=\"variable\">$item_perpage</span> = <span class=\"number\">5</span> ;</span><br><span class=\"line\">\t\t<span class=\"variable\">$total</span> = <span class=\"variable\">$result</span>-&gt;num_rows ;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;page&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$page</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$page</span> = (<span class=\"keyword\">int</span>) <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;page&#x27;</span>];</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"variable\">$total_page</span> = ceil(<span class=\"variable\">$total</span>/<span class=\"variable\">$item_perpage</span>) ;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"variable\">$sql</span> = <span class=\"variable\">$sql</span> . <span class=\"string\">&#x27; LIMIT &#x27;</span> . <span class=\"variable\">$item_perpage</span> . <span class=\"string\">&#x27; OFFSET &#x27;</span> . (<span class=\"variable\">$page</span>-<span class=\"number\">1</span>)*<span class=\"variable\">$item_perpage</span>;</span><br><span class=\"line\">\t\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;Error : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 真正取資料要執行 $stmt-&gt;get_result();</span></span><br><span class=\"line\">\t\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t&lt;div class=&quot;page&quot;&gt;</span><br><span class=\"line\">\t\t<span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;頁數 : &#x27;</span> . <span class=\"variable\">$page</span> . <span class=\"string\">&#x27; / &#x27;</span>  . <span class=\"variable\">$total_page</span>;</span><br><span class=\"line\">\t\t<span class=\"meta\">?&gt;</span></span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">\t&lt;div class=&quot;page-control&quot;&gt;</span><br><span class=\"line\">\t\t<span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$page</span> &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;a href=&quot;list.php?page=1&quot;&gt;首頁&lt;/a&gt;&#x27;</span> ;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;a href=&quot;list.php?page=&#x27;</span> . strval(<span class=\"variable\">$page</span>-<span class=\"number\">1</span>) . <span class=\"string\">&#x27;&quot;&gt;上一頁&lt;/a&gt;&#x27;</span> ;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$page</span> &lt; <span class=\"variable\">$total_page</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;a href=&quot;list.php?page=&#x27;</span> . strval(<span class=\"variable\">$page</span>+<span class=\"number\">1</span>) . <span class=\"string\">&#x27;&quot;&gt;下一頁&lt;/a&gt;&#x27;</span> ;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;a href=&quot;list.php?page=&#x27;</span> . <span class=\"variable\">$total_page</span> . <span class=\"string\">&#x27;&quot;&gt;最後一頁&lt;/a&gt;&#x27;</span> ;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"meta\">?&gt;</span></span><br><span class=\"line\">\t&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.page</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.page-control</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">\t<span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\">\t<span class=\"attribute\">margin-top</span>: <span class=\"number\">10px</span>; </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.page-control</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#D1DEEB</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">7px</span> <span class=\"number\">20px</span> <span class=\"number\">5px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>: <span class=\"number\">6px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">\t<span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">\t<span class=\"attribute\">color</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span> ;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"utils\"><a href=\"#utils\" class=\"headerlink\" title=\"utils\"></a>utils</h4><h5 id=\"check-accountValid\"><a href=\"#check-accountValid\" class=\"headerlink\" title=\"check accountValid\"></a>check accountValid</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// if account not valid auto re-direct to index(logout)</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accountValid</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">global</span> <span class=\"variable\">$conn</span> ;</span><br><span class=\"line\">\t\t<span class=\"variable\">$isValid</span> =  <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"variable\">$username</span> = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;username&#x27;</span>])) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$username</span> = <span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;username&#x27;</span>];</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;select * from users where username=?&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;s&#x27;</span>, <span class=\"variable\">$username</span>);</span><br><span class=\"line\">\t\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"variable\">$result</span>-&gt;num_rows &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"variable\">$isValid</span> =  <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$isValid</span>) &#123;</span><br><span class=\"line\">\t\t\tHeader(<span class=\"string\">&quot;location: logout_handle.php&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125; </span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"設定-HTML-跳脫字元-check-echo-有無呼叫\"><a href=\"#設定-HTML-跳脫字元-check-echo-有無呼叫\" class=\"headerlink\" title=\"設定 HTML 跳脫字元 - check echo 有無呼叫\"></a>設定 HTML 跳脫字元 - check echo 有無呼叫</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 設定 HTML 跳脫字元</span></span><br><span class=\"line\"><span class=\"comment\">// check echo 有無呼叫</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">escape</span>(<span class=\"params\"><span class=\"variable\">$str</span></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> htmlspecialchars(<span class=\"variable\">$str</span>, ENT_QUOTES);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"回傳-json\"><a href=\"#回傳-json\" class=\"headerlink\" title=\"回傳 json\"></a>回傳 json</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">header(<span class=\"string\">&#x27;Content-Type: application/json; charset=utf-8&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$comments</span> = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$json</span> = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">\t<span class=\"string\">&quot;comment&quot;</span> =&gt; <span class=\"variable\">$comments</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$response</span> = json_encode(<span class=\"variable\">$json</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$response</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// response error</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>( (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;content&#x27;</span>])) ||</span><br><span class=\"line\">\t\t(<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>]))</span><br><span class=\"line\">\t) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$json</span> = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;ok&quot;</span> =&gt; <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;message&quot;</span> =&gt; <span class=\"string\">&quot;Please input data!&quot;</span></span><br><span class=\"line\">\t\t);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"variable\">$response</span> = json_encode(<span class=\"variable\">$json</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"variable\">$response</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"html-php-回傳-json\"><a href=\"#html-php-回傳-json\" class=\"headerlink\" title=\"html + php 回傳 json\"></a>html + php 回傳 json</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- index_api.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>留言板<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;reset.css&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;style.css&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap &quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">header</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;warning&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t注意！本站為練習用網站，因教學用途刻意忽略資安的實作，註冊時請勿使用任何真實的帳號或密碼。</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">main</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;board&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hi&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\tHi, aa!</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;input-form&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;input-content&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;content&quot;</span> <span class=\"attr\">rows</span>=<span class=\"string\">&quot;5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;input-submit&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hr&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajaxGetApi</span>(<span class=\"params\">url, respProcess</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">const</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// loaded function</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">\t\t\t\tif (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// process by callback function</span></span></span><br><span class=\"line\">\t\t\t\t\trespProcess(request.responseText)</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response :&#x27;</span>, request)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response error :&#x27;</span>, request.status)</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// error </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// true 表非同步</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.open(<span class=\"string\">&#x27;GET&#x27;</span>, url, <span class=\"literal\">true</span>)</span></span><br><span class=\"line\">\t\t\trequest.send()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajaxPOSTjsonApi</span>(<span class=\"params\">url, postObj, respProcess</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">const</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// loaded function</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">\t\t\t\tif (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// process by callback function</span></span></span><br><span class=\"line\">\t\t\t\t\trespProcess(request.responseText)</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response :&#x27;</span>, request)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;response error :&#x27;</span>, request.status)</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// error </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;error&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// true 表非同步</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.open(<span class=\"string\">&#x27;POST&#x27;</span>, url, <span class=\"literal\">true</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// POST 需要 header</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>,  <span class=\"string\">&#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">// encodeURIComponent() 可讓 1&amp;2&amp;3 亦可輸入正常 </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\trequest.send(<span class=\"string\">`username=<span class=\"subst\">$&#123;postObj.username&#125;</span>&amp;content=<span class=\"subst\">$&#123;<span class=\"built_in\">encodeURIComponent</span>(postObj.content)&#125;</span>`</span>)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// JavaScript escape HTML function()</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">escapeHTML</span>(<span class=\"params\">s</span>) </span>&#123; </span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> s.replace(<span class=\"regexp\">/&amp;/g</span>, <span class=\"string\">&#x27;&amp;amp;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            .replace(<span class=\"regexp\">/&quot;/g</span>, <span class=\"string\">&#x27;&amp;quot;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            .replace(<span class=\"regexp\">/&lt;/g</span>, <span class=\"string\">&#x27;&amp;lt;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            .replace(<span class=\"regexp\">/&gt;/g</span>, <span class=\"string\">&#x27;&amp;gt;&#x27;</span>);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\tajaxGetApi(<span class=\"string\">&#x27;http://localhost/robert/comment/api_get_comment.php&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">const</span> comments = <span class=\"built_in\">JSON</span>.parse(response)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> section = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;section&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i &lt; comments.comment.length ; i++ ) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">let</span> card = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tcard.classList.add(<span class=\"string\">&#x27;card&#x27;</span>)</span></span><br><span class=\"line\">\t\t\t\tcard.innerHTML = `</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-avatar&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;card-info&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;card-title&quot;</span>&gt; </span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-user&quot;</span>&gt;</span>$&#123;comments.comment[i].nickname&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-time&quot;</span>&gt;</span>$&#123;comments.comment[i].create_at&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;card-content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t$&#123;escapeHTML(comments.comment[i].content)&#125;</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\">\t\t\t\t`</span><br><span class=\"line\">\t\t\t\tsection.appendChild(card)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">// submit </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">const</span> form = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;form&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\tform.addEventListener(<span class=\"string\">&#x27;submit&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">let</span> comment = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tusername : <span class=\"string\">&#x27;aa&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tcontent : <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\te.preventDefault()</span><br><span class=\"line\"><span class=\"javascript\">\t\t\tcomment.content = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.input-content&#x27;</span>).value</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t\tajaxPOSTjsonApi(<span class=\"string\">&#x27;http://localhost/robert/comment/api_add_comment.php&#x27;</span>, comment, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> resp = <span class=\"built_in\">JSON</span>.parse(response)</span></span><br><span class=\"line\">\t\t\t\tif (resp.ok) &#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"comment\">// JavaScript reload </span></span></span><br><span class=\"line\">\t\t\t\t\tlocation.reload();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\">\t\t\t\t\talert(resp.message);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">\t<span class=\"comment\">// api_get_comment.php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Content-Type: application/json; charset=utf-8&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&#x27;select C.id, C.content, C.create_at, U.username, U.nickname &#x27;</span> .</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;from comment as C left join users as U &#x27;</span> .</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;on C.username = U.username &#x27;</span> . </span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&#x27;where C.deleted=0 or C.deleted is NULL order by C.id DESC&#x27;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">die</span>(<span class=\"string\">&quot;查詢錯誤!&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;get_result();</span><br><span class=\"line\">\t<span class=\"variable\">$comments</span> = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(<span class=\"variable\">$row</span> = <span class=\"variable\">$result</span>-&gt;fetch_assoc()) &#123;</span><br><span class=\"line\">\t\tarray_push(<span class=\"variable\">$comments</span>, <span class=\"variable\">$row</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$json</span> = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;comment&quot;</span> =&gt; <span class=\"variable\">$comments</span></span><br><span class=\"line\">\t);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$response</span> = json_encode(<span class=\"variable\">$json</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> <span class=\"variable\">$response</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\t<span class=\"comment\">// api_add_comment.php</span></span><br><span class=\"line\">\t<span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\">\theader(<span class=\"string\">&#x27;Content-Type: application/json; charset=utf-8&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>( (<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;content&#x27;</span>])) ||</span><br><span class=\"line\">\t\t\t(<span class=\"keyword\">empty</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>]))</span><br><span class=\"line\">\t\t) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$json</span> = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&quot;ok&quot;</span> =&gt; <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">&quot;message&quot;</span> =&gt; <span class=\"string\">&quot;Please input data!&quot;</span></span><br><span class=\"line\">\t\t\t);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$response</span> = json_encode(<span class=\"variable\">$json</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">echo</span> <span class=\"variable\">$response</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"variable\">$username</span> = <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;username&#x27;</span>] ;</span><br><span class=\"line\">\t<span class=\"variable\">$content</span> =  <span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;content&#x27;</span>] ;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$sql</span> = <span class=\"string\">&quot;insert into comment(username, content) value(?, ?)&quot;</span>;</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span> = <span class=\"variable\">$conn</span>-&gt;prepare(<span class=\"variable\">$sql</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$stmt</span>-&gt;bind_param(<span class=\"string\">&#x27;ss&#x27;</span>, <span class=\"variable\">$username</span>, <span class=\"variable\">$content</span>);</span><br><span class=\"line\">\t<span class=\"variable\">$result</span> = <span class=\"variable\">$stmt</span>-&gt;execute();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"variable\">$json</span> = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;ok&quot;</span> =&gt; <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;message&quot;</span> =&gt; <span class=\"variable\">$conn</span>-&gt;error</span><br><span class=\"line\">\t\t);\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"variable\">$response</span> = json_encode(<span class=\"variable\">$json</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">echo</span> <span class=\"variable\">$response</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">exit</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"variable\">$json</span> = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;ok&quot;</span> =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;message&quot;</span> =&gt; <span class=\"string\">&quot;Success&quot;</span></span><br><span class=\"line\">\t);\t</span><br><span class=\"line\">\t<span class=\"variable\">$response</span> = json_encode(<span class=\"variable\">$json</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">echo</span> $</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"PHP-function\"><a href=\"#PHP-function\" class=\"headerlink\" title=\"PHP function\"></a>PHP function</h3><h4 id=\"simple-function\"><a href=\"#simple-function\" class=\"headerlink\" title=\"simple function\"></a>simple function</h4><ul>\n<li>exit() - 結束程式</li>\n</ul>\n<h4 id=\"轉換\"><a href=\"#轉換\" class=\"headerlink\" title=\"轉換\"></a>轉換</h4><h5 id=\"轉數字\"><a href=\"#轉數字\" class=\"headerlink\" title=\"轉數字\"></a>轉數字</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$page</span> = (<span class=\"keyword\">int</span>) <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;page&#x27;</span>];</span><br><span class=\"line\"><span class=\"comment\">// intval()而言，如果引數是字串，則返回字串中第一個不是數字的字元之前的數字串所代表的整數值</span></span><br><span class=\"line\"><span class=\"variable\">$int1</span>=intval(<span class=\"variable\">$string</span>);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"floor-ceil-round\"><a href=\"#floor-ceil-round\" class=\"headerlink\" title=\"floor()/ceil()/round()\"></a>floor()/ceil()/round()</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 取整數(無條件進位)</span></span><br><span class=\"line\"><span class=\"variable\">$total_page</span> = ceil(<span class=\"variable\">$total</span>/<span class=\"variable\">$item_perpage</span>) ;</span><br><span class=\"line\"><span class=\"comment\">// 捨去取整數</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> floor(<span class=\"number\">1.6</span>); <span class=\"comment\">// will output &quot;1&quot; </span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> floor(-<span class=\"number\">1.6</span>); <span class=\"comment\">// will output &quot;-2&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// 四捨五入</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> round(<span class=\"number\">3.4</span>); <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> round(<span class=\"number\">3.5</span>); <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ASCII-code-轉換-ord-chr\"><a href=\"#ASCII-code-轉換-ord-chr\" class=\"headerlink\" title=\"ASCII code 轉換 ord()/chr()\"></a>ASCII code 轉換 ord()/chr()</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 字元轉換為 ASCII 碼</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;將字符 # 轉換為 ASCII 碼: &#x27;</span>.ord(<span class=\"string\">&#x27;#&#x27;</span>).<span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>; <span class=\"comment\">// 35</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;將字符 % 轉換為 ASCII 碼: &#x27;</span>.ord(<span class=\"string\">&#x27;%&#x27;</span>).<span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>; <span class=\"comment\">// 37</span></span><br><span class=\"line\"><span class=\"comment\">// ASCII 碼轉換為字元</span></span><br><span class=\"line\"><span class=\"variable\">$str1</span> = <span class=\"string\">&#x27;66&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&#x27;由 ASCII 碼 66 轉換回英文字母 B 的結果: &#x27;</span>.chr(<span class=\"variable\">$str1</span>).<span class=\"string\">&#x27;&lt;br&gt;&#x27;</span>; <span class=\"comment\">// 66</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"string\"><a href=\"#string\" class=\"headerlink\" title=\"string\"></a>string</h4><h5 id=\"strpos-check-是否包含字串-不包含傳回-false\"><a href=\"#strpos-check-是否包含字串-不包含傳回-false\" class=\"headerlink\" title=\"strpos() - check 是否包含字串,不包含傳回 false\"></a>strpos() - check 是否包含字串,不包含傳回 false</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// check 是否包含字串,不包含傳回 false</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (strpos(<span class=\"variable\">$conn</span>-&gt;error, <span class=\"string\">&#x27;Duplicate entry&#x27;</span>) !== <span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">\t \theader(<span class=\"string\">&#x27;Location: register.php?errorCode=2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"substr-mb-substr-擷取字串\"><a href=\"#substr-mb-substr-擷取字串\" class=\"headerlink\" title=\"substr()/mb_substr() - 擷取字串\"></a>substr()/mb_substr() - 擷取字串</h5><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 擷取字串 </span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> substr(<span class=\"variable\">$row</span>[<span class=\"string\">&#x27;content&#x27;</span>], <span class=\"number\">0</span>, <span class=\"number\">200</span>);</span><br><span class=\"line\"><span class=\"comment\">// 擷取字串-中文字不被切斷</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> mb_substr(<span class=\"variable\">$row</span>[<span class=\"string\">&#x27;content&#x27;</span>], <span class=\"number\">0</span>, <span class=\"number\">200</span>, <span class=\"string\">&#x27;utf-8&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"date\"><a href=\"#date\" class=\"headerlink\" title=\"date()\"></a><a href=\"https://www.php.net/manual/en/function.date.php\">date()</a></h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// 設定時區</span></span><br><span class=\"line\">date_default_timezone_set(<span class=\"string\">&quot;Asia/Taipei&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&quot;F j, Y, g:i a&quot;</span>);                 <span class=\"comment\">// March 10, 2001, 5:16 pm</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&quot;m.d.y&quot;</span>);                         <span class=\"comment\">// 03.10.01</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&quot;j, n, Y&quot;</span>);                       <span class=\"comment\">// 10, 3, 2001</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&quot;Ymd&quot;</span>);                           <span class=\"comment\">// 20010310</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&#x27;h-i-s, j-m-y, it is w Day&#x27;</span>);     <span class=\"comment\">// 05-16-18, 10-03-01, 1631 1618 6 Satpm01</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&#x27;\\i\\t \\i\\s \\t\\h\\e jS \\d\\a\\y.&#x27;</span>);   <span class=\"comment\">// it is the 10th day.</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&quot;D M j G:i:s T Y&quot;</span>);               <span class=\"comment\">// Sat Mar 10 17:16:18 MST 2001</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&#x27;H:m:s \\m \\i\\s\\ \\m\\o\\n\\t\\h&#x27;</span>);     <span class=\"comment\">// 17:03:18 m is month</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&quot;H:i:s&quot;</span>);                         <span class=\"comment\">// 17:16:18</span></span><br><span class=\"line\"><span class=\"variable\">$today</span> = date(<span class=\"string\">&quot;Y-m-d H:i:s&quot;</span>);                   <span class=\"comment\">// 2001-03-10 17:16:18 (the MySQL DATETIME format)</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"header-開啟網頁\"><a href=\"#header-開啟網頁\" class=\"headerlink\" title=\"header 開啟網頁\"></a><a href=\"https://www.php.net/manual/en/function.header.php\">header</a> 開啟網頁</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">header(<span class=\"string\">&quot;Location: http://<span class=\"subst\">$host</span><span class=\"subst\">$uri</span>/<span class=\"subst\">$extra</span>&quot;</span>);</span><br><span class=\"line\">header(<span class=\"string\">&quot;Location: index.php&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"cookie\"><a href=\"#cookie\" class=\"headerlink\" title=\"cookie\"></a>cookie</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// set cookie - 1 hour --&gt; *24*30 = 30days</span></span><br><span class=\"line\">setcookie(<span class=\"string\">&quot;user&quot;</span>, <span class=\"string\">&quot;peter&quot;</span> , time()+<span class=\"number\">3600</span>); </span><br><span class=\"line\"><span class=\"comment\">// get kookie</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$_COOKIE</span>[<span class=\"string\">&quot;user&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">// delete cookie </span></span><br><span class=\"line\">setcookie(<span class=\"string\">&quot;user&quot;</span>, <span class=\"string\">&quot;&quot;</span>, time()-<span class=\"number\">3600</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"session\"><a href=\"#session\" class=\"headerlink\" title=\"session\"></a>session</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 啟用 session</span></span><br><span class=\"line\">session_start();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 設定 session</span></span><br><span class=\"line\"><span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;UserName&#x27;</span>] = <span class=\"string\">&#x27;Jordan&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 讀取 session</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;UserName&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 刪除 session</span></span><br><span class=\"line\"><span class=\"keyword\">unset</span>(<span class=\"variable\">$_SESSION</span>[<span class=\"string\">&#x27;變數名稱&#x27;</span>]);</span><br><span class=\"line\">session_destroy();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"die-印出後結束程式\"><a href=\"#die-印出後結束程式\" class=\"headerlink\" title=\"die() - 印出後結束程式\"></a>die() - 印出後結束程式</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"variable\">$result</span>) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">die</span>(<span class=\"string\">&#x27;Error : &#x27;</span> . <span class=\"variable\">$conn</span>-&gt;error);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"rand-產生亂數\"><a href=\"#rand-產生亂數\" class=\"headerlink\" title=\"rand() - 產生亂數\"></a>rand() - 產生亂數</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// random(ish) 5 digit int</span></span><br><span class=\"line\"><span class=\"variable\">$random_number</span> = intval( <span class=\"string\">&quot;0&quot;</span> . rand(<span class=\"number\">1</span>,<span class=\"number\">9</span>) . rand(<span class=\"number\">0</span>,<span class=\"number\">9</span>) . rand(<span class=\"number\">0</span>,<span class=\"number\">9</span>) . rand(<span class=\"number\">0</span>,<span class=\"number\">9</span>) . rand(<span class=\"number\">0</span>,<span class=\"number\">9</span>) ); </span><br><span class=\"line\"><span class=\"comment\">// random(ish) 5 character string</span></span><br><span class=\"line\"><span class=\"variable\">$random_string</span> = chr(rand(<span class=\"number\">65</span>,<span class=\"number\">90</span>)) . chr(rand(<span class=\"number\">65</span>,<span class=\"number\">90</span>)) . chr(rand(<span class=\"number\">65</span>,<span class=\"number\">90</span>)) . chr(rand(<span class=\"number\">65</span>,<span class=\"number\">90</span>)) . chr(rand(<span class=\"number\">65</span>,<span class=\"number\">90</span>)); </span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"hash-雜湊產生\"><a href=\"#hash-雜湊產生\" class=\"headerlink\" title=\"hash() - 雜湊產生\"></a>hash() - 雜湊產生</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">hash ( string $algo , string $data , bool $binary = false ) : string|false</span></span><br><span class=\"line\"><span class=\"comment\">\talgo</span></span><br><span class=\"line\"><span class=\"comment\">\t\tName of selected hashing algorithm (i.e. &quot;md5&quot;, &quot;sha256&quot;, &quot;haval160,4&quot;, etc..). For a list of supported algorithms see hash_algos().</span></span><br><span class=\"line\"><span class=\"comment\">\tdata</span></span><br><span class=\"line\"><span class=\"comment\">\t\tMessage to be hashed.</span></span><br><span class=\"line\"><span class=\"comment\">\tbinary</span></span><br><span class=\"line\"><span class=\"comment\">\t\tWhen set to true, outputs raw binary data. false outputs lowercase hexits.</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">hash(<span class=\"string\">&quot;sha256&quot;</span>, <span class=\"string\">&#x27;abce&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"password-hash-password-verify-雜湊密碼產生與驗證\"><a href=\"#password-hash-password-verify-雜湊密碼產生與驗證\" class=\"headerlink\" title=\"password_hash()/password_verify() - 雜湊密碼產生與驗證\"></a>password_hash()/password_verify() - 雜湊密碼產生與驗證</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// password_hash ( string $password , mixed $algo , array $options = ? ) : string|false</span></span><br><span class=\"line\"><span class=\"comment\">// PASSWORD_DEFAULT/PASSWORD_BCRYPT/PASSWORD_ARGON2I/PASSWORD_ARGON2ID</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> password_hash(<span class=\"string\">&quot;rasmuslerdorf&quot;</span>, PASSWORD_DEFAULT);</span><br><span class=\"line\"><span class=\"comment\">// password_verify ( string $password , string $hash ) : bool</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (password_verify(<span class=\"string\">&#x27;rasmuslerdorf&#x27;</span>, <span class=\"variable\">$hash</span>)) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Password is valid!&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"htmlentities-和-htmlspecialchars\"><a href=\"#htmlentities-和-htmlspecialchars\" class=\"headerlink\" title=\"htmlentities 和 htmlspecialchars\"></a>htmlentities 和 htmlspecialchars</h4><p>htmlspecialchars 只轉化一些特殊html程式碼，而 htmlentities 卻會轉化所有的html程式碼，連同裡面的它無法識別的中文字元也給轉化,所以有時會讓中文變成亂碼,所以<code>最好用 htmlspecialchars</code></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">htmlspecialchars(string,flags,character-set,double_encode)</span></span><br><span class=\"line\"><span class=\"comment\">flags 規定如何處理引號</span></span><br><span class=\"line\"><span class=\"comment\">\tENT_COMPAT - 預設,僅編碼雙引號。</span></span><br><span class=\"line\"><span class=\"comment\">\tENT_QUOTES - 編碼雙引號和單引號。</span></span><br><span class=\"line\"><span class=\"comment\">\tENT_NOQUOTES - 不編碼任何引號。</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"variable\">$str</span> = <span class=\"string\">&quot;Bill &amp; &#x27;Steve&#x27;&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> htmlspecialchars(<span class=\"variable\">$str</span>, ENT_COMPAT); <span class=\"comment\">//只轉換雙引號</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;&lt;br&gt;&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> htmlspecialchars(<span class=\"variable\">$str</span>, ENT_QUOTES); <span class=\"comment\">//轉換雙引號和單引號</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;&lt;br&gt;&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> htmlspecialchars(<span class=\"variable\">$str</span>, ENT_NOQUOTES); <span class=\"comment\">//不轉換任何引號</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// htmlentities ( string $string , int $flags = ENT_COMPAT , string|null $encoding = null , bool $double_encode = true ) : string</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"variable\">$str</span> = <span class=\"string\">&quot;A &#x27;quote&#x27; is &lt;b&gt;bold&lt;/b&gt;&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> htmlentities(<span class=\"variable\">$str</span>); \t\t\t\t\t\t <span class=\"comment\">//  A &#x27;quote&#x27; is &amp;lt;b&amp;gt;bold&amp;lt;/b&amp;gt;</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> htmlentities(<span class=\"variable\">$str</span>, ENT_QUOTES); <span class=\"comment\">// A &amp;#039;quote&amp;#039; is &amp;lt;b&amp;gt;bold&amp;lt;/b&amp;gt;</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"require-require-once-and-include-include-once\"><a href=\"#require-require-once-and-include-include-once\" class=\"headerlink\" title=\"require()/require_once() and include()/include_once()\"></a>require()/require_once() and include()/include_once()</h4><ul>\n<li>require 通常放在 PHP 程式的最前面，PHP 程式在執行前，就會先讀入 require 所指定引入的檔案，使它變成 PHP 程式網頁的一部份。常用的函式，亦可以這個方法將它引入網頁中。引入是無條件的，發生在程式執行前，不管條件是否成立都要導入（可能不執行）</li>\n<li>include 一般是放在流程控制的處理區段中。PHP 程式網頁在讀到 include 的檔案時，才將它讀進來。這種方式，可以把程式執行時的流程簡單化。可以是有條件的，發生在程式執行時，只有條件成立時才導入（可以簡化編譯生成的代碼）。</li>\n<li>require_once()/include_once() 會檢查檔案是否已匯入,若已匯入則不重覆匯入</li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require_once</span>(<span class=\"string\">&#x27;conn.php&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">include_once</span>(<span class=\"string\">&#x27;header.php&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"echo-print-r-and-var-var-dump\"><a href=\"#echo-print-r-and-var-var-dump\" class=\"headerlink\" title=\"echo , print_r() and var var_dump()\"></a>echo , print_r() and var var_dump()</h3><ul>\n<li>echo  用於輸出數值變數或者是字串<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 雙引號可加變數</span></span><br><span class=\"line\"><span class=\"variable\">$user</span> = <span class=\"string\">&#x27;Robert&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;Hello <span class=\"subst\">$user</span>!&lt;br&gt;&quot;</span>\t;  <span class=\"comment\">// Hello Robert!</span></span><br></pre></td></tr></table></figure></li>\n<li>print_r() 用於輸出一個陣列</li>\n<li>var_dump() 用於輸出&lt;變數型別，變數值，變數長度&gt;,可以是各種變數型別</li>\n</ul>\n","categories":["Back End"],"tags":["database","mysql","php"]},{"title":"Express practice","url":"/2021/08/14/express-2/","content":"<h3 id=\"Blog-重構\"><a href=\"#Blog-重構\" class=\"headerlink\" title=\"Blog 重構\"></a>Blog 重構</h3><h4 id=\"module-install-sqeuwlize-cli-init\"><a href=\"#module-install-sqeuwlize-cli-init\" class=\"headerlink\" title=\"module install + sqeuwlize-cli init\"></a>module install + sqeuwlize-cli init</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install express</span><br><span class=\"line\">npm install ejs</span><br><span class=\"line\">npm install body-parser</span><br><span class=\"line\">npm install express-session</span><br><span class=\"line\">npm install connect-flash</span><br><span class=\"line\">npm install sequelize</span><br><span class=\"line\">npm install sequelize-cli</span><br><span class=\"line\">npm install mysql2</span><br><span class=\"line\">npm install bcrypt</span><br><span class=\"line\"><span class=\"comment\"># init </span></span><br><span class=\"line\">npx sequelize-cli init</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"config-json\"><a href=\"#config-json\" class=\"headerlink\" title=\"config.json\"></a>config.json</h4><p>config/config.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;development&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;robert&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"string\">&quot;password&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;mydb2&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;localhost&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;test&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;database_test&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;production&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;database_production&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"create-db-migrate\"><a href=\"#create-db-migrate\" class=\"headerlink\" title=\"create db(migrate)\"></a>create db(migrate)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># User</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name User --attributes username:string,password:string,nickname:string</span><br><span class=\"line\"><span class=\"comment\"># User_level</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name User_level --attributes user_level:<span class=\"built_in\">integer</span>,level_describe:string,user_admin:<span class=\"built_in\">integer</span>,all_modify:<span class=\"built_in\">integer</span>,all_delete:<span class=\"built_in\">integer</span>,self_create:<span class=\"built_in\">integer</span>,self_modify:<span class=\"built_in\">integer</span>,self_delete:<span class=\"built_in\">integer</span> </span><br><span class=\"line\"><span class=\"comment\"># Blog_category</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name Blog_category --attributes name:string,deleted:<span class=\"built_in\">integer</span></span><br><span class=\"line\"><span class=\"comment\"># Blog</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name Blog --attributes BlogCategoryId:<span class=\"built_in\">integer</span>,title:string,content:text,deleted:boolean</span><br><span class=\"line\"><span class=\"comment\"># migrate</span></span><br><span class=\"line\">npx sequelize-cli db:migrate</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"set-css-path\"><a href=\"#set-css-path\" class=\"headerlink\" title=\"set css path\"></a>set css path</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"comment\">// add connect flash - css patch</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// css patch</span></span><br><span class=\"line\">app.use(express.static(path.join(__dirname, <span class=\"string\">&#x27;/public&#x27;</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// views/template/head.ejs</span></span><br><span class=\"line\">&lt;link rel=<span class=\"string\">&quot;stylesheet&quot;</span> href=<span class=\"string\">&quot;/css/normalize.css&quot;</span>&gt;</span><br><span class=\"line\">&lt;link rel=<span class=\"string\">&quot;stylesheet&quot;</span> href=<span class=\"string\">&quot;/css/style.css&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"model-加上關聯\"><a href=\"#model-加上關聯\" class=\"headerlink\" title=\"model 加上關聯\"></a>model 加上關聯</h4><p>./model/blog.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  Model</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">sequelize, DataTypes</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Blog</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">     * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">     * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">      Blog.belongsTo(models.Blog_category)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  Blog.init(&#123;</span><br><span class=\"line\">    BlogCategoryId: DataTypes.INTEGER,</span><br><span class=\"line\">    title: DataTypes.STRING,</span><br><span class=\"line\">    content: DataTypes.TEXT,</span><br><span class=\"line\">    deleted: DataTypes.BOOLEAN</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    modelName: <span class=\"string\">&#x27;Blog&#x27;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> Blog;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>./model/blog_category.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  Model</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">sequelize, DataTypes</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Blog_category</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Helper method for defining associations.</span></span><br><span class=\"line\"><span class=\"comment\">     * This method is not a part of Sequelize lifecycle.</span></span><br><span class=\"line\"><span class=\"comment\">     * The `models/index` file will call this method automatically.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">associate</span>(<span class=\"params\">models</span>)</span> &#123;</span><br><span class=\"line\">      \t<span class=\"comment\">// 加上關聯設定</span></span><br><span class=\"line\">\t\t    Blog_category.hasMany(models.Blog)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  Blog_category.init(&#123;</span><br><span class=\"line\">    name: DataTypes.STRING,</span><br><span class=\"line\">    deleted: DataTypes.INTEGER</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    modelName: <span class=\"string\">&#x27;Blog_category&#x27;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> Blog_category;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"index-js\"><a href=\"#index-js\" class=\"headerlink\" title=\"index.js\"></a>index.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> session = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express-session&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> flash = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;connect-flash&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add connect flash - css patch</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// start express</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">5000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> blogController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/blog&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\">app.use(session(&#123;</span><br><span class=\"line\">  secret: <span class=\"string\">&#x27;keyboard cat&#x27;</span>,</span><br><span class=\"line\">  resave: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  saveUninitialized: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">app.use(flash())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add global variable - use middleware</span></span><br><span class=\"line\"><span class=\"comment\">// const flash = require(&#x27;connect-flash&#x27;)</span></span><br><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tres.locals.username = req.session.username</span><br><span class=\"line\">\t<span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">\tres.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br><span class=\"line\">\tnext()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">redirectBack</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">\tres.redirect(<span class=\"string\">&#x27;back&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// css patch</span></span><br><span class=\"line\">app.use(express.static(path.join(__dirname, <span class=\"string\">&#x27;/public&#x27;</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, blogController.index) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/login&#x27;</span>, blogController.login) </span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/login&#x27;</span>, blogController.loginHandle, redirectBack) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/logout&#x27;</span>, blogController.logout) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/about&#x27;</span>, blogController.about) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/edit/:id&#x27;</span>, blogController.edit) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/delete/:id&#x27;</span>, blogController.delete) </span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/editHandle/:id&#x27;</span>, blogController.editHandle) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/create&#x27;</span>, blogController.create) </span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/createHandle&#x27;</span>, blogController.createHandle)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/list&#x27;</span>, blogController.list) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/page/:id&#x27;</span>, blogController.page) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/admin&#x27;</span>, blogController.admin) </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/all&#x27;</span>, blogController.all) </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// start express</span></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`blog app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"lottery-api\"><a href=\"#lottery-api\" class=\"headerlink\" title=\"lottery api\"></a>lottery api</h3><h4 id=\"api-source\"><a href=\"#api-source\" class=\"headerlink\" title=\"api source\"></a>api source</h4><h5 id=\"module-install-sqeuwlize-cli-init-1\"><a href=\"#module-install-sqeuwlize-cli-init-1\" class=\"headerlink\" title=\"module install + sqeuwlize-cli init\"></a>module install + sqeuwlize-cli init</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm init</span><br><span class=\"line\">npm install express</span><br><span class=\"line\">npm install ejs</span><br><span class=\"line\">npm install body-parser</span><br><span class=\"line\"><span class=\"comment\"># connect-flash need express-session</span></span><br><span class=\"line\">npm install express-session</span><br><span class=\"line\">npm install connect-flash</span><br><span class=\"line\">npm install sequelize</span><br><span class=\"line\">npm install sequelize-cli</span><br><span class=\"line\">npm install mysql2</span><br><span class=\"line\"><span class=\"comment\"># insatll bcrypt</span></span><br><span class=\"line\">npm install bcrypt</span><br><span class=\"line\"><span class=\"comment\"># install cors</span></span><br><span class=\"line\">npm install cors</span><br><span class=\"line\"><span class=\"comment\"># init </span></span><br><span class=\"line\">npx sequelize-cli init</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"config-json-1\"><a href=\"#config-json-1\" class=\"headerlink\" title=\"config.json\"></a>config.json</h5><p>config/config.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;development&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;robert&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"string\">&quot;password&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;mydb2&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;localhost&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;test&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;database_test&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;production&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;username&quot;</span>: <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;database&quot;</span>: <span class=\"string\">&quot;database_production&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dialect&quot;</span>: <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"create-db-migrate-1\"><a href=\"#create-db-migrate-1\" class=\"headerlink\" title=\"create db(migrate)\"></a>create db(migrate)</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Lottery</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name Lottery --attributes <span class=\"built_in\">type</span>:string,index:<span class=\"built_in\">integer</span>,prize:string,description:string,url:string,probability:<span class=\"built_in\">integer</span></span><br><span class=\"line\"><span class=\"comment\"># User</span></span><br><span class=\"line\">npx sequelize-cli model:generate --name User --attributes username:string,password:string,nickname:string,user_level:<span class=\"built_in\">integer</span></span><br><span class=\"line\"><span class=\"comment\"># migrate</span></span><br><span class=\"line\">npx sequelize-cli db:migrate</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"index-js-1\"><a href=\"#index-js-1\" class=\"headerlink\" title=\"index.js\"></a>index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;body-parser&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add express session</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> session = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express-session&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> flash = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;connect-flash&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// add cors</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;cors&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// start express</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">5000</span></span><br><span class=\"line\"><span class=\"comment\">// controllers</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/user&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> lotteryController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./controllers/lottery&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set view engine type - directory is ./views</span></span><br><span class=\"line\">app.set(<span class=\"string\">&#x27;view engine&#x27;</span>, <span class=\"string\">&#x27;ejs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add body parser</span></span><br><span class=\"line\"><span class=\"comment\">// parse application/x-www-form-urlencoded</span></span><br><span class=\"line\">app.use(bodyParser.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\"><span class=\"comment\">// parse application/json</span></span><br><span class=\"line\">app.use(bodyParser.json())</span><br><span class=\"line\"><span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">app.use(flash())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add session</span></span><br><span class=\"line\">app.use(session(&#123;</span><br><span class=\"line\">  secret: <span class=\"string\">&#x27;keyboard cat&#x27;</span>,</span><br><span class=\"line\">  resave: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  saveUninitialized: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add global variable - use middleware</span></span><br><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\tres.locals.userId = req.session.userId</span><br><span class=\"line\">\t<span class=\"comment\">// add connect flash</span></span><br><span class=\"line\">\tres.locals.errorMessage = req.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>)</span><br><span class=\"line\">\tnext()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">redirectBack</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">\tres.redirect(<span class=\"string\">&#x27;back&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/&#x27;</span>, lotteryController.index)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/add&#x27;</span>, lotteryController.add)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/add-handle&#x27;</span>, lotteryController.addHandle, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/update/:id&#x27;</span>, lotteryController.update)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/update-handle/:id&#x27;</span>, lotteryController.updateHandle, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/delete/:id&#x27;</span>, lotteryController.delete)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/register&#x27;</span>, userController.register)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/register&#x27;</span>, userController.handleRegister, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/login&#x27;</span>, userController.login)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/login&#x27;</span>, userController.handleLogin, redirectBack)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/logout&#x27;</span>, userController.logout)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/users&#x27;</span>, userController.index)</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/:type&#x27;</span>, cors(), lotteryController.lottery)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// start express</span></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`blog app listening at http://localhost:<span class=\"subst\">$&#123;port&#125;</span>`</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers\"><a href=\"#controllers\" class=\"headerlink\" title=\"controllers\"></a>controllers</h5><p>controllers/lottery.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/lottery.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> Lottery = db.Lottery</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> lotteryController = &#123;</span><br><span class=\"line\">\tindex: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tLottery.findAll(&#123;</span><br><span class=\"line\">\t\t\torder: [</span><br><span class=\"line\">\t\t\t\t[<span class=\"string\">&#x27;type&#x27;</span>, <span class=\"string\">&#x27;ASC&#x27;</span>],</span><br><span class=\"line\">\t\t\t\t[<span class=\"string\">&#x27;index&#x27;</span>, <span class=\"string\">&#x27;ASC&#x27;</span>],</span><br><span class=\"line\">\t\t\t]</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">lotteries</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t\tres.render(<span class=\"string\">&#x27;index&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\t\tlotteries</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t\t&#125;) </span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tadd: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;add&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tupdate: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tLottery.findOne(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\tid: req.params.id</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">lottery</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\tres.render(<span class=\"string\">&#x27;update&#x27;</span>,&#123;</span><br><span class=\"line\">\t\t\t\tlottery</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;) </span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\taddHandle: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;\ttype, index, prize, description, url&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> &#123;\tprobability&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>( !type || !index || !prize || !description || !url || !probability )&#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;缺少必要欄位!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (prize === <span class=\"string\">&#x27;NONE&#x27;</span>) &#123;</span><br><span class=\"line\">\t\t\tprobability = <span class=\"number\">0</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tLottery.findAll(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\ttype: type</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then( <span class=\"function\"><span class=\"params\">lotteries</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">let</span> percent = <span class=\"number\">0</span></span><br><span class=\"line\">\t\t\tlotteries.forEach( <span class=\"function\"><span class=\"params\">lottery</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t\tpercent += lottery.probability</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// console.log(percent,  probability, percent+probability, (percent+Number(probability)) &gt;= 100)</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> ((percent+<span class=\"built_in\">Number</span>(probability)) &gt;= <span class=\"number\">100</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// req.flash(&#x27;errorMessage&#x27;, &#x27;總機率設定太高!&#x27;)</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// next()</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">throw</span> <span class=\"string\">&#x27;over probability!&#x27;</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then( <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\tLottery.create(&#123;</span><br><span class=\"line\">\t\t\t\ttype,</span><br><span class=\"line\">\t\t\t\tindex,</span><br><span class=\"line\">\t\t\t\tprize,</span><br><span class=\"line\">\t\t\t\tdescription,</span><br><span class=\"line\">\t\t\t\turl,</span><br><span class=\"line\">\t\t\t\tprobability</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">lottery</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err.toString() === <span class=\"string\">&#x27;over probability!&#x27;</span>)  &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;總機率設定太高!&#x27;</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tupdateHandle: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;\tindex, type, prize, description, url&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> &#123;\tprobability&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>( !index || !prize || !description || !url || !probability )&#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;缺少必要欄位!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (prize === <span class=\"string\">&#x27;NONE&#x27;</span>) &#123;</span><br><span class=\"line\">\t\t\tprobability = <span class=\"number\">0</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tLottery.findAll(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\ttype: type</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then( <span class=\"function\"><span class=\"params\">lotteries</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">let</span> percent = <span class=\"number\">0</span></span><br><span class=\"line\">\t\t\tlotteries.forEach( <span class=\"function\"><span class=\"params\">lottery</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (lottery.id !== <span class=\"built_in\">Number</span>(req.params.id)) &#123;</span><br><span class=\"line\">\t\t\t\t\tpercent += lottery.probability</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// console.log(type, percent,  probability, percent+probability, (percent+Number(probability)) &gt;= 100)</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> ((percent+<span class=\"built_in\">Number</span>(probability)) &gt;= <span class=\"number\">100</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// req.flash(&#x27;errorMessage&#x27;, &#x27;總機率設定太高!&#x27;)</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// next()</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">throw</span> <span class=\"string\">&#x27;over probability!&#x27;</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then( <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\tLottery.findOne(&#123;</span><br><span class=\"line\">\t\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\t\tid: req.params.id</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;).then(<span class=\"function\"><span class=\"params\">lottery</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t\tlottery.update(&#123;</span><br><span class=\"line\">\t\t\t\t\tindex,</span><br><span class=\"line\">\t\t\t\t\tprize,</span><br><span class=\"line\">\t\t\t\t\tdescription,</span><br><span class=\"line\">\t\t\t\t\turl,</span><br><span class=\"line\">\t\t\t\t\tprobability</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">lottery</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (err.toString() === <span class=\"string\">&#x27;over probability!&#x27;</span>)  &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;總機率設定太高!&#x27;</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"keyword\">delete</span>: <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tLottery.findOne(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\tid: req.params.id</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then( <span class=\"function\"><span class=\"params\">lottery</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\tlottery.destroy()</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;).catch( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;, </span><br><span class=\"line\">\tlottery: <span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> &#123;type&#125; = req.params</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> value = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random()*<span class=\"number\">100</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> percent = <span class=\"number\">0</span></span><br><span class=\"line\">\t \t<span class=\"keyword\">let</span> prize = &#123;</span><br><span class=\"line\">\t\t \tprize: <span class=\"string\">&#x27;NULL&#x27;</span>,</span><br><span class=\"line\">\t\t \tdescription: <span class=\"string\">&#x27;NULL&#x27;</span>,</span><br><span class=\"line\">\t\t \turl: <span class=\"string\">&#x27;NULL&#x27;</span></span><br><span class=\"line\">\t\t&#125;\t\t\t\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(&#x27;valeu : &#x27;, value) </span></span><br><span class=\"line\">\t\tLottery.findAll(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\ttype: type</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\torder: [</span><br><span class=\"line\">\t\t\t\t[<span class=\"string\">&#x27;probability&#x27;</span>, <span class=\"string\">&#x27;DESC&#x27;</span> ]</span><br><span class=\"line\">\t\t\t]</span><br><span class=\"line\">\t\t&#125;).then( <span class=\"function\"><span class=\"params\">lotteries</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span> ; i&lt;lotteries.length ; i++) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// console.log(lotteries[i].id, lotteries[i].prize, lotteries[i].probability)</span></span><br><span class=\"line\">\t\t\t\tpercent += lotteries[i].probability</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> ((lotteries[i].prize === <span class=\"string\">&#x27;NONE&#x27;</span>) || (value &lt; percent)) &#123;</span><br><span class=\"line\">\t\t\t\t\tprize = &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tprize: lotteries[i].prize,</span><br><span class=\"line\">\t\t\t\t\t\t\tdescription: lotteries[i].description,</span><br><span class=\"line\">\t\t\t\t\t\t\turl: lotteries[i].url</span><br><span class=\"line\">\t\t\t\t\t\t&#125;\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125; </span><br><span class=\"line\">\t\t\t<span class=\"comment\">// console.log(prize)</span></span><br><span class=\"line\">\t\t\tres.json(prize)</span><br><span class=\"line\">\t\t&#125;).then().catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\tres.end()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = lotteryController</span><br></pre></td></tr></table></figure>\n\n<p>controllers/user.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../models&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> User = db.User</span><br><span class=\"line\"><span class=\"comment\">// add bcrypt</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bcrypt = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;bcrypt&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> saltRounds = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = &#123;</span><br><span class=\"line\">\tregister: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;register&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tindex: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tUser.findAll().then(<span class=\"function\"><span class=\"params\">users</span> =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t\tres.render(<span class=\"string\">&#x27;users&#x27;</span>, &#123;</span><br><span class=\"line\">\t\t\t\t\tusers</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err.toString())</span><br><span class=\"line\">\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t\t&#125;) </span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandleRegister: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;\tusername,\tpassword,\tnickname, user_level&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!username || !password || !nickname || !user_level) &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;缺少必要欄位!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tbcrypt.genSalt(saltRounds, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, salt</span>) </span>&#123;</span><br><span class=\"line\">\t\t\tbcrypt.hash(password, salt, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, hash</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(user_level, <span class=\"keyword\">typeof</span> user_level)</span><br><span class=\"line\">\t\t\t\tlevel = <span class=\"built_in\">Number</span>(user_level)</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(level, <span class=\"keyword\">typeof</span> level)</span><br><span class=\"line\">\t\t\t\tUser.create(&#123;</span><br><span class=\"line\">\t\t\t\t\tusername: username,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"comment\">// nickname: nickname,</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"comment\">// user_level: 1,\t</span></span><br><span class=\"line\">\t\t\t\t\tuser_level: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t\t\t\tnickname: nickname,</span><br><span class=\"line\">\t\t\t\t\tpassword: hash</span><br><span class=\"line\">\t\t\t\t&#125;).then(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t\treq.session.userId = user.id</span><br><span class=\"line\">\t\t\t\t\treq.session.username = user.username</span><br><span class=\"line\">\t\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tlogin: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.render(<span class=\"string\">&#x27;login&#x27;</span>)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\thandleLogin: <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;username,password&#125; = req.body</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!username || !password) &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;該填未填!&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tUser.findOne(&#123;</span><br><span class=\"line\">\t\t\twhere: &#123;</span><br><span class=\"line\">\t\t\t\tusername: username</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;).then(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (!user) &#123;</span><br><span class=\"line\">\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;無此帳號!&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tbcrypt.compare(password, user.password, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, isSuccess</span>) </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (err || (!isSuccess)) &#123;</span><br><span class=\"line\">\t\t\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, <span class=\"string\">&#x27;密碼錯誤!&#x27;</span>)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// console.log(user)</span></span><br><span class=\"line\">\t\t\t\treq.session.userId = user.id</span><br><span class=\"line\">\t\t\t\treq.session.username = user.username</span><br><span class=\"line\">\t\t\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\treq.flash(<span class=\"string\">&#x27;errorMessage&#x27;</span>, err.toString())</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> next()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tlogout: <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\treq.session.userId = <span class=\"literal\">null</span></span><br><span class=\"line\">\t\treq.session.username = <span class=\"literal\">null</span></span><br><span class=\"line\">\t\tres.redirect(<span class=\"string\">&#x27;/&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = userController</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"tes-DB\"><a href=\"#tes-DB\" class=\"headerlink\" title=\"tes DB\"></a>tes DB</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">INSERT INTO `lotteries` (`id`, `<span class=\"built_in\">type</span>`, `index`, `prize`, `description`, `url`, `probability`, `createdAt`, `updatedAt`) VALUES</span><br><span class=\"line\">(4, <span class=\"string\">&#x27;lottery&#x27;</span>, 4, <span class=\"string\">&#x27;NONE&#x27;</span>, <span class=\"string\">&#x27;銘謝惠顧!&#x27;</span>, <span class=\"string\">&#x27;https://upload.cc/i1/2021/08/22/0Nvx17.jpg&#x27;</span>, 0, <span class=\"string\">&#x27;2021-08-21 12:28:17&#x27;</span>, <span class=\"string\">&#x27;2021-08-22 01:33:43&#x27;</span>),</span><br><span class=\"line\">(5, <span class=\"string\">&#x27;lottery&#x27;</span>, 3, <span class=\"string\">&#x27;THIRD&#x27;</span>, <span class=\"string\">&#x27;恭喜你抽中三獎：知名 YouTuber 簽名握手會入場券一張，bang！&#x27;</span>, <span class=\"string\">&#x27;https://upload.cc/i1/2021/08/22/Hbqtd8.jpg&#x27;</span>, 50, <span class=\"string\">&#x27;2021-08-21 12:36:24&#x27;</span>, <span class=\"string\">&#x27;2021-08-22 01:22:01&#x27;</span>),</span><br><span class=\"line\">(6, <span class=\"string\">&#x27;lottery&#x27;</span>, 2, <span class=\"string\">&#x27;SECOND&#x27;</span>, <span class=\"string\">&#x27;二獎！90 吋電視一台！&#x27;</span>, <span class=\"string\">&#x27;https://upload.cc/i1/2021/08/22/r30doC.jpg&#x27;</span>, 20, <span class=\"string\">&#x27;2021-08-21 12:37:16&#x27;</span>, <span class=\"string\">&#x27;2021-08-22 01:21:46&#x27;</span>),</span><br><span class=\"line\">(7, <span class=\"string\">&#x27;lottery&#x27;</span>, 1, <span class=\"string\">&#x27;FIRST&#x27;</span>, <span class=\"string\">&#x27;恭喜你中頭獎了！日本東京來回雙人遊!&#x27;</span>, <span class=\"string\">&#x27;https://upload.cc/i1/2021/08/22/yjaht9.jpg&#x27;</span>, 10, <span class=\"string\">&#x27;2021-08-21 12:38:27&#x27;</span>, <span class=\"string\">&#x27;2021-08-22 01:21:30&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"develop-to-heroku\"><a href=\"#develop-to-heroku\" class=\"headerlink\" title=\"develop to heroku\"></a>develop to heroku</h4><h5 id=\"package-json-add-“script”-and-“engines”\"><a href=\"#package-json-add-“script”-and-“engines”\" class=\"headerlink\" title=\"package.json add “script” and “engines”\"></a>package.json add “script” and “engines”</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku -v</span><br><span class=\"line\">node -v</span><br></pre></td></tr></table></figure>\n\n<p>package.json</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">  &quot;db:migrate&quot;: &quot;npx sequelize db:migrate&quot;,</span><br><span class=\"line\">  &quot;start&quot;: &quot;npm run db:migrate &amp;&amp; node index.js&quot;,</span><br><span class=\"line\">  &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&quot;engines&quot;: &#123;</span><br><span class=\"line\">  &quot;node&quot;: &quot;14.x&quot;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"set-env-port\"><a href=\"#set-env-port\" class=\"headerlink\" title=\"set env port\"></a>set env port</h5><p>index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">5000</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"run-heroku-local-test\"><a href=\"#run-heroku-local-test\" class=\"headerlink\" title=\"run heroku local test\"></a>run heroku local test</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku <span class=\"built_in\">local</span> web</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"set-config-config-json-for-DB\"><a href=\"#set-config-config-json-for-DB\" class=\"headerlink\" title=\"set config/config.json for DB\"></a>set config/config.json for DB</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;production&quot;: &#123;</span><br><span class=\"line\">  &quot;username&quot;: &quot;root&quot;,</span><br><span class=\"line\">  &quot;password&quot;: null,</span><br><span class=\"line\">  &quot;database&quot;: &quot;database_production&quot;,</span><br><span class=\"line\">  &quot;host&quot;: &quot;127.0.0.1&quot;,</span><br><span class=\"line\">  &quot;dialect&quot;: &quot;mysql&quot;,</span><br><span class=\"line\">  &quot;use_env_variable&quot;: &quot;CLEARDB_DATABASE_URL&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"push-to-heroku\"><a href=\"#push-to-heroku\" class=\"headerlink\" title=\"push to heroku\"></a>push to heroku</h5><p>add .gitignore</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">node_modules&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>git init and commit</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git status</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;1st commit&quot;</span></span><br><span class=\"line\">git show-ref</span><br></pre></td></tr></table></figure>\n\n<p>heroku create and push</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># login - if never login</span></span><br><span class=\"line\"><span class=\"comment\"># heroku login</span></span><br><span class=\"line\"><span class=\"comment\"># create app</span></span><br><span class=\"line\">heroku create</span><br><span class=\"line\"><span class=\"comment\"># add db</span></span><br><span class=\"line\">heroku addons:create cleardb:ignite</span><br><span class=\"line\"><span class=\"comment\"># list app - if want to see other app</span></span><br><span class=\"line\"><span class=\"comment\"># delete app - if need detele other app</span></span><br><span class=\"line\"><span class=\"comment\"># heroku lis</span></span><br><span class=\"line\">git remote -v</span><br><span class=\"line\">\theroku  https://git.heroku.com/mysterious-ravine-06292.git (fetch)</span><br><span class=\"line\">\theroku  https://git.heroku.com/mysterious-ravine-06292.git (push)</span><br><span class=\"line\"><span class=\"comment\"># push to heroku</span></span><br><span class=\"line\">git push heroku master</span><br><span class=\"line\"><span class=\"comment\"># open by local browser</span></span><br><span class=\"line\">heroku open</span><br></pre></td></tr></table></figure>\n","categories":["Back End"],"tags":["node.js","express"]},{"title":"React","url":"/2021/08/22/react-1/","content":"<h3 id=\"名詞\"><a href=\"#名詞\" class=\"headerlink\" title=\"名詞\"></a>名詞</h3><p>web component : Web Components is a suite of different technologies allowing you to create reusable custom elements<br>JSX : 是一個 JavaScript 的語法擴充, 允許我們在 JS 的檔案中使用 HTML 的標籤<br>Virtual DOM :<br>Reconciliation : 找出哪些樹節點哪些需要變化<br>Immutability : 不可變性<br>Mutation : 修改<br>JSON Web Token (JWT) : 用來在 身份提供者 和 服務提供者 間傳遞被 認證 的用戶身份訊息，以便於從資源伺服器獲取資源</p>\n<span id=\"more\"></span>\n\n<h3 id=\"常用-list\"><a href=\"#常用-list\" class=\"headerlink\" title=\"常用 list\"></a>常用 list</h3><ul>\n<li>useState : react 使用的 state, 更動後就會 re-render</li>\n<li>useEffect : 可控制 render 後要做什麼</li>\n<li>useLayoutEffect :  可控制 render 前要做什麼</li>\n<li>useRef : 近似於 useState,但更動後不會 re-render</li>\n<li>memo : 把 component 包起來, 雖然 parents rerender 但本身未改變就不 rerender</li>\n<li>useMemo : 把 data 記起來,未改變就不產生新的</li>\n<li>useCallback : 把 function 記起來,未改變就不產生新的</li>\n<li>useContext : 資料跨多層傳送</li>\n<li>react router : 處理網頁的 route</li>\n<li>useParams : 取得網頁的資訊</li>\n<li>useHistory : 控制網頁跳頁</li>\n<li>styled components : 方便輸入 css</li>\n<li>ThemeProvider : set for theme</li>\n<li>Link : 近似於 a tag</li>\n<li>useLocation : 取得 path name</li>\n<li>Fragment : 一個 component 讓你一次 render 多個 element 而不需要額外的 wrapper</li>\n<li>useReducer : 可執行 dispatch</li>\n</ul>\n<h3 id=\"todolist-simulate\"><a href=\"#todolist-simulate\" class=\"headerlink\" title=\"todolist simulate\"></a>todolist simulate</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">integrity</span>=<span class=\"string\">&quot;sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l&quot;</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">&quot;anonymous&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ====== change todo and button to component ====== --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ====== add data dump ====== --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ====== render by data chang ====== --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container mt-2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card mx-auto&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 30rem;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Simple Todo list<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mb-2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-dump btn btn-primary&quot;</span>&gt;</span>Dump<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;input-group mb-3&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;input-todo form-control&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;你想要新增的事項&quot;</span>&quot; <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot; Recipient&#x27;s username&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t\t\t<span class=\"attr\">aria-describedby</span>=<span class=\"string\">&quot;button-addon2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-create btn btn-primary&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;button-addon2&quot;</span>&gt;</span>新增<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;todos list-group&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://code.jquery.com/jquery-3.5.1.slim.min.js&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">integrity</span>=<span class=\"string\">&quot;sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj&quot;</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">&quot;anonymous&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> id = <span class=\"number\">0</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> state = &#123;</span></span><br><span class=\"line\">\t\t\ttodos: []</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&#x27;.btn-create&#x27;</span>).click(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">const</span> content = $(<span class=\"string\">&#x27;.input-todo&#x27;</span>).val()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">if</span> (!content) <span class=\"keyword\">return</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(<span class=\"string\">&#x27;.input-todo&#x27;</span>).val(<span class=\"string\">&#x27;&#x27;</span>)</span></span><br><span class=\"line\">\t\t\tstate.todos.push(</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tid,</span><br><span class=\"line\">\t\t\t\t\tcontent,</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\tisDone: <span class=\"literal\">false</span></span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t)</span><br><span class=\"line\">\t\t\trender()</span><br><span class=\"line\">\t\t\tid++</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&#x27;.btn-dump&#x27;</span>).click(<span class=\"function\">()=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(state)</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;.btn-delete&#x27;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">const</span> id = <span class=\"built_in\">Number</span>($(e.target).parents(<span class=\"string\">&#x27;.todo&#x27;</span>).attr(<span class=\"string\">&#x27;data-id&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tstate.todos = state.todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !==id)</span></span><br><span class=\"line\">\t\t\t\trender()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;.btn-undone&#x27;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">const</span> id = <span class=\"built_in\">Number</span>($(e.target).parents(<span class=\"string\">&#x27;.todo&#x27;</span>).attr(<span class=\"string\">&#x27;data-id&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\tstate.todos = state.todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">\t\t\t\t\t...todo,</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\tisDone: <span class=\"literal\">true</span></span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t\trender()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;.btn-done&#x27;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">const</span> id = <span class=\"built_in\">Number</span>($(e.target).parents(<span class=\"string\">&#x27;.todo&#x27;</span>).attr(<span class=\"string\">&#x27;data-id&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\tstate.todos = state.todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">\t\t\t\t\t...todo,</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\tisDone: <span class=\"literal\">false</span></span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t\trender()</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Todo</span>(<span class=\"params\">&#123;id, content, isDone&#125;</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">return</span> <span class=\"string\">`</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t&lt;li <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;todo list-group-item d-flex justify-content-between align-items-center&quot;</span> data-id=<span class=\"string\">&quot;$&#123;id&#125;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span>$&#123;content&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;control&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t$&#123;Button(&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t\t\tclassName: isDone ? <span class=\"string\">&#x27;btn-done btn-outline-success&#x27;</span> : <span class=\"string\">&#x27;btn-undone btn-outline-secondary&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t\t\tcontent: isDone ? <span class=\"string\">&#x27;已完成&#x27;</span> : <span class=\"string\">&#x27;未完成&#x27;</span></span></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;)&#125;</span><br><span class=\"line\">\t\t\t\t\t\t\t$&#123;Button(&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t\t\tclassName: <span class=\"string\">&#x27;btn-delete btn btn-outline-danger&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t\t\t\tcontent: <span class=\"string\">&#x27;刪除&#x27;</span></span></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;)&#125;</span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span>\t\t</span></span></span><br><span class=\"line\">\t\t`</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Button</span>(<span class=\"params\">props</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">return</span> <span class=\"string\">`</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn $&#123;props.className&#125;&quot;</span>&gt;</span>$&#123;props.content&#125;<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span><br><span class=\"line\">\t\t\t`</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).empty()</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(<span class=\"string\">&#x27;.todos&#x27;</span>).append(</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\tstate.todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> Todo(todo))</span></span><br><span class=\"line\">\t\t\t)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基礎\"><a href=\"#基礎\" class=\"headerlink\" title=\"基礎\"></a>基礎</h3><h4 id=\"注意事項\"><a href=\"#注意事項\" class=\"headerlink\" title=\"注意事項\"></a>注意事項</h4><ul>\n<li>Component 的字首須為大寫字母 : 小寫字母開頭的組件視為原始 DOM 標籤 </li>\n</ul>\n<h4 id=\"install-and-start\"><a href=\"#install-and-start\" class=\"headerlink\" title=\"install and start\"></a>install and start</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install </span></span><br><span class=\"line\">npx create-react-app my-app</span><br><span class=\"line\"><span class=\"comment\"># check versionm </span></span><br><span class=\"line\">npx create-react-app -V</span><br><span class=\"line\">\t4.0.3</span><br><span class=\"line\"><span class=\"comment\"># run react</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> my-app</span><br><span class=\"line\">npm start</span><br><span class=\"line\"><span class=\"comment\"># run --&gt; node node_modules/react-scripts/bin/react-scripts.js start</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Strict-Mode-and-measuring-performance\"><a href=\"#Strict-Mode-and-measuring-performance\" class=\"headerlink\" title=\"Strict Mode and measuring performance\"></a>Strict Mode and measuring performance</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; StrictMode &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> reportWebVitals <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./reportWebVitals&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> rootElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>);</span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t<span class=\"comment\">// strict mode 可移除</span></span><br><span class=\"line\">  &lt;StrictMode&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/StrictMode&gt;,</span><br><span class=\"line\">  rootElement</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// measuring performance</span></span><br><span class=\"line\"><span class=\"comment\">// If you want to start measuring performance in your app, pass a function</span></span><br><span class=\"line\"><span class=\"comment\">// to log results (for example: reportWebVitals(console.log))</span></span><br><span class=\"line\"><span class=\"comment\">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span></span><br><span class=\"line\">reportWebVitals();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"export-and-export-default\"><a href=\"#export-and-export-default\" class=\"headerlink\" title=\"export and export default\"></a>export and export default</h4><p>一個js只有一個回傳值,用export default, 有多個回傳值就用export </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> todos <span class=\"keyword\">from</span> <span class=\"string\">&quot;./todos&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> users <span class=\"keyword\">from</span> <span class=\"string\">&quot;./users&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> combineReducers(&#123;</span><br><span class=\"line\">\ttodoState: todos,\t<span class=\"comment\">//todos: todos </span></span><br><span class=\"line\">\tusers,\t<span class=\"comment\">//users: users</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actionTypes.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_TODO =  <span class=\"string\">&quot;add_todo&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> DELETE_TODO = <span class=\"string\">&quot;delete_todo&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_USER = <span class=\"string\">&quot;add_user&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actions.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_TODO, DELETE_TODO, ADD_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// action creator</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name: name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deleteTodo</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: DELETE_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      id: id,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addUser</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_USER,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1st-React-include-Inline-styling\"><a href=\"#1st-React-include-Inline-styling\" class=\"headerlink\" title=\"1st React - include Inline styling\"></a>1st React - include Inline styling</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./index.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t&lt;App /&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"comment\">// import css file</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Creating a style object variable for Inline styling </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> titleStyle = &#123;</span><br><span class=\"line\">\tcolor: <span class=\"string\">&#x27;red&#x27;</span>,</span><br><span class=\"line\">\tfontWeight: <span class=\"string\">&#x27;bold&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Title</span>(<span class=\"params\">&#123;size&#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (size === <span class=\"string\">&#x27;XL&#x27;</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// Creating a style object variable for Inline styling </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;titleStyle&#125;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// Inline styling</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span></span></span></span><br><span class=\"line\"><span class=\"xml\">\t\t\tcolor: &#x27;blue&#x27;</span></span><br><span class=\"line\"><span class=\"xml\">\t\t&#125;&#125;&gt;hello<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Description</span>(<span class=\"params\">&#123;children&#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;p&gt;</span><br><span class=\"line\">\t\t\t&#123;children&#125;</span><br><span class=\"line\">\t\t&lt;/p&gt;</span><br><span class=\"line\">\t)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t<span class=\"comment\">// class 改為 className</span></span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* add function  */</span>&#125;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* add parameter */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;Title size=<span class=\"string\">&#x27;L&#x27;</span>&gt;&lt;/Title&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* add some data to function, its name is children */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;Description&gt;</span><br><span class=\"line\">\t\t\t\tThis is 1st react.</span><br><span class=\"line\">\t\t\t\twelcome to here.</span><br><span class=\"line\">\t\t\t&lt;/Description&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* App.css */</span></span><br><span class=\"line\"><span class=\"selector-class\">.App</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"styled-components\"><a href=\"#styled-components\" class=\"headerlink\" title=\"styled components\"></a>styled components</h4><h5 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install styled-components</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Example-1\"><a href=\"#Example-1\" class=\"headerlink\" title=\"Example 1\"></a>Example 1</h5><ul>\n<li>styled-compoents 代替 function</li>\n<li>可以包下一層, set hover</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"comment\">// import css file</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import styled components</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Creating a style object variable for Inline styling </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> titleStyle = &#123;</span><br><span class=\"line\">\tcolor: <span class=\"string\">&#x27;red&#x27;</span>,</span><br><span class=\"line\">\tfontWeight: <span class=\"string\">&#x27;bold&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 可以包下一層, set hover</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> TitleWrapper = styled.h2<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  color: blue;</span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  span &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: yellow;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Title</span>(<span class=\"params\">&#123;size&#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (size === <span class=\"string\">&#x27;XL&#x27;</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// Creating a style object variable for Inline styling </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;titleStyle&#125;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// Inline styling</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// return &lt;h2 style=&#123;&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//    dislay: &#x27;flex&#x27;;</span></span><br><span class=\"line\">    <span class=\"comment\">//   color: &#x27;blue&#x27;,</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;&#125;&gt;hello&lt;/h2&gt;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;TitleWrapper&gt;hello &lt;span&gt;yo&lt;<span class=\"regexp\">/span&gt; &lt;/</span>TitleWrapper&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// styled components 代替 function </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Description = styled.p<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 20px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// function Description(&#123;children&#125;) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \treturn (</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t\t&#123;children&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// \t)</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> titleSize = <span class=\"string\">&#x27;M&#x27;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t<span class=\"comment\">// class 改為 className</span></span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* add function  */</span>&#125;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* add parameter */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;Title size=&#123;titleSize&#125;&gt;&lt;/Title&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* add some data to function, its name is children */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;Description&gt;</span><br><span class=\"line\">\t\t\t\tThis is 1st react.</span><br><span class=\"line\">\t\t\t\twelcome to here.</span><br><span class=\"line\">\t\t\t&lt;/Description&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Example-2\"><a href=\"#Example-2\" class=\"headerlink\" title=\"Example 2\"></a>Example 2</h5><ul>\n<li>&amp; + &amp; (相連之 component)</li>\n<li>傳入props</li>\n<li>TodoItem 移出成為一個 component</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"comment\">// import css file</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoItemWrapper = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 12px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoContent = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">\tcolor: rgb(2,40,77);</span></span><br><span class=\"line\"><span class=\"string\">\t// 可依傳入之 props 做不同設定</span></span><br><span class=\"line\"><span class=\"string\">  // font-size: <span class=\"subst\">$&#123;props =&gt; props.size === <span class=\"string\">&#x27;XL&#x27;</span> ? <span class=\"string\">&#x27;20px&#x27;</span> : <span class=\"string\">&#x27;12px&#x27;</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">  font-size: 12px;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 可依傳入之 props 重新設定</span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;props =&gt; props.size ===<span class=\"string\">&#x27;XL&#x27;</span> &amp;&amp; <span class=\"string\">`</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">    font-size: 20px;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">  `</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoButtonWrapper= styled.div<span class=\"string\">``</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 相連之 component</span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TodoItem</span>(<span class=\"params\">&#123; size, content&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;TodoItemWrapper&gt;</span><br><span class=\"line\">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class=\"line\">          &lt;Button&gt;刪除&lt;/Button&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* TodoItem 移出成為一個 component */</span>&#125;</span><br><span class=\"line\">      &lt;TodoItem content=<span class=\"string\">&quot;123&quot;</span>&gt;&lt;/TodoItem&gt;</span><br><span class=\"line\">      &lt;TodoItem content=<span class=\"string\">&quot;456&quot;</span> size=<span class=\"string\">&quot;XL&quot;</span>&gt;&lt;/TodoItem&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// function App() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   return (</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&lt;div className=&quot;App&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//       &lt;TodoItemWrapper&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//         &lt;TodoContent size=&#x27;XL&#x27;&gt;I am todo&lt;/TodoContent&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//         &lt;TodoButtonWrapper&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//           &lt;Button&gt;已完成&lt;/Button&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//           &lt;Button&gt;刪除&lt;/Button&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//         &lt;/TodoButtonWrapper&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//       &lt;/TodoItemWrapper&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//   );</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Example-3\"><a href=\"#Example-3\" class=\"headerlink\" title=\"Example 3\"></a>Example 3</h5><ul>\n<li>media query  <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$&#123;MEDIA_QUERY_MD&#125; &#123;</span><br><span class=\"line\">\tfont-size: 16px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>re-styled  <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 對原本存在 function,再做 re-styled</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> BlackTodoItem = styled(TodoItem)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">\tbackground: black;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&lt;TodoItem content=<span class=\"string\">&quot;123&quot;</span>/&gt;</span><br><span class=\"line\">\t\t\t&lt;TodoItem content=<span class=\"string\">&quot;456&quot;</span> size=<span class=\"string\">&quot;XL&quot;</span>/&gt;</span><br><span class=\"line\">\t\t\t&lt;BlackTodoItem content=<span class=\"string\">&quot;456&quot;</span> size=<span class=\"string\">&quot;XL&quot;</span>/&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>theme : 使用 ThemeProvider 內層可用 props 取用</li>\n<li>TodoItem component 另存一個 file</li>\n</ul>\n<h6 id=\"index-js\"><a href=\"#index-js\" class=\"headerlink\" title=\"index.js\"></a>index.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./index.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;ThemeProvider&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> theme = &#123;</span><br><span class=\"line\">\tcolors: &#123;</span><br><span class=\"line\">\t\tprimary_300: <span class=\"string\">&#x27;#ff7979&#x27;</span>,</span><br><span class=\"line\">\t\tprimary_400: <span class=\"string\">&#x27;#e33e3e&#x27;</span>,</span><br><span class=\"line\">\t\tprimary_500: <span class=\"string\">&#x27;#af0505&#x27;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t<span class=\"comment\">// theme傳入</span></span><br><span class=\"line\">\t&lt;ThemeProvider theme=&#123;theme&#125;&gt;</span><br><span class=\"line\">\t\t&lt;App /&gt;</span><br><span class=\"line\">\t&lt;/ThemeProvider&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"App-js\"><a href=\"#App-js\" class=\"headerlink\" title=\"App.js\"></a>App.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"comment\">// import css file</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 對原本存在 function,再做 re-styled</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> BlackTodoItem = styled(TodoItem)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  background: black;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">      &lt;TodoItem content=<span class=\"string\">&quot;123&quot;</span>/&gt;</span><br><span class=\"line\">\t\t\t&lt;TodoItem content=<span class=\"string\">&quot;456&quot;</span> size=<span class=\"string\">&quot;XL&quot;</span>/&gt;</span><br><span class=\"line\">      &lt;BlackTodoItem content=<span class=\"string\">&quot;456&quot;</span> size=<span class=\"string\">&quot;XL&quot;</span>/&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"constants-style-js\"><a href=\"#constants-style-js\" class=\"headerlink\" title=\"./constants/style.js\"></a>./constants/style.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ./constants/style.js */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> MEDIA_QUERY_MD = <span class=\"string\">&#x27;@media screen and (min-width: 768px)&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> MEDIA_QUERY_LG = <span class=\"string\">&#x27;@media screen and (min-width: 1000px)&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h6 id=\"TodoItem-js\"><a href=\"#TodoItem-js\" class=\"headerlink\" title=\"TodoItem.js\"></a>TodoItem.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TodoItem.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./constants/style&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoItemWrapper = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 12px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoContent = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">// 取用 theme</span></span><br><span class=\"line\"><span class=\"string\">\tcolor: <span class=\"subst\">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">  font-size: <span class=\"subst\">$&#123;props =&gt; props.size === <span class=\"string\">&#x27;XL&#x27;</span> ? <span class=\"string\">&#x27;20px&#x27;</span> : <span class=\"string\">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoButtonWrapper= styled.div<span class=\"string\">``</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// ***** media change *****</span></span><br><span class=\"line\"><span class=\"string\">\t// @media screen and (min-width: 768px) &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t// \tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t// &#125;</span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 20px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 相連之 component</span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 對原本存在styled-component,再做 re-styled</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> RedButton = styled(Button)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// for other import</span></span><br><span class=\"line\"><span class=\"comment\">// 因為 function re-style, 增加 class </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TodoItem</span>(<span class=\"params\">&#123; className, size, content&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;TodoItemWrapper className=&#123;className&#125;&gt;</span><br><span class=\"line\">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class=\"line\">          &lt;RedButton&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Example-4-對原本存在-function-再做-re-styled\"><a href=\"#Example-4-對原本存在-function-再做-re-styled\" class=\"headerlink\" title=\"Example 4 - 對原本存在 function,再做 re-styled\"></a>Example 4 - 對原本存在 function,再做 re-styled</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Element = <span class=\"function\">(<span class=\"params\">&#123; red, className &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=&#123;className&#125;&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;element__img&quot;</span> /&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;element__info&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;element__title&quot;</span> skyblue&gt;</span><br><span class=\"line\">          Cute Puppy</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;element__description&quot;</span>&gt;</span><br><span class=\"line\">          Sed ut voluptatem neque cumque. Qui sed ut itaque est doloribus qui.</span><br><span class=\"line\">          Eos perferendis autem qui fugiat.</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> StyledElement = styled(Element)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 80%;</span></span><br><span class=\"line\"><span class=\"string\">  height: 300px;</span></span><br><span class=\"line\"><span class=\"string\">  box-shadow: 0 0 5px 2px #ccc;</span></span><br><span class=\"line\"><span class=\"string\">  .element__img &#123;</span></span><br><span class=\"line\"><span class=\"string\">    display: inline-block;</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">    height: 100%;</span></span><br><span class=\"line\"><span class=\"string\">    background-image: url(&#x27;this is background url&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">  .element__info &#123;</span></span><br><span class=\"line\"><span class=\"string\">    display: inline-block;</span></span><br><span class=\"line\"><span class=\"string\">    vertical-align: top;</span></span><br><span class=\"line\"><span class=\"string\">    width: calc(100% - 300px);</span></span><br><span class=\"line\"><span class=\"string\">    height: 100%;</span></span><br><span class=\"line\"><span class=\"string\">    text-align: left;</span></span><br><span class=\"line\"><span class=\"string\">    .element__title &#123;</span></span><br><span class=\"line\"><span class=\"string\">      padding: 20px 0 0 20px;</span></span><br><span class=\"line\"><span class=\"string\">      font-size: 48px;</span></span><br><span class=\"line\"><span class=\"string\">      color: <span class=\"subst\">$&#123;props =&gt; (props.red ? <span class=\"string\">&#x27;red&#x27;</span> : <span class=\"string\">&#x27;black&#x27;</span>)&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    .element__description &#123;</span></span><br><span class=\"line\"><span class=\"string\">      padding: 20px;</span></span><br><span class=\"line\"><span class=\"string\">      font-size: 30px;</span></span><br><span class=\"line\"><span class=\"string\">      font-style: italic;</span></span><br><span class=\"line\"><span class=\"string\">      color: #888888;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> StyledElement</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JSX-to-react-by-Babel-example\"><a href=\"#JSX-to-react-by-Babel-example\" class=\"headerlink\" title=\"JSX to react by Babel example\"></a>JSX to react by Babel example</h4><ul>\n<li>JSX Prevents Injection Attacks</li>\n<li>dangerouslySetInnerHTML</li>\n<li>tag a run javascript: add encode URI<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"comment\">/* javascript:alert(1) */</span>&#125;</span><br><span class=\"line\"> &#123;<span class=\"comment\">/* &lt;a href=&#123;todo.content&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class=\"line\"> &lt;a href=&#123;<span class=\"built_in\">window</span>.encodeURIComponent(todo.content)&#125;&gt;click me&lt;/a&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;button size=<span class=\"string\">&quot;XL&quot;</span>&gt;hello!&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/*#__PURE__*/</span></span><br><span class=\"line\">React.createElement(<span class=\"string\">&quot;button&quot;</span>, &#123;</span><br><span class=\"line\">  size: <span class=\"string\">&quot;XL&quot;</span></span><br><span class=\"line\">&#125;, <span class=\"string\">&quot;hello!&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;button size=<span class=\"string\">&quot;XL&quot;</span> onClick=&#123;<span class=\"function\">()=&gt;</span> &#123;alert(<span class=\"number\">1</span>)&#125; &#125;&gt;hello!&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/*#__PURE__*/</span></span><br><span class=\"line\">React.createElement(<span class=\"string\">&quot;button&quot;</span>, &#123;</span><br><span class=\"line\">  size: <span class=\"string\">&quot;XL&quot;</span>,</span><br><span class=\"line\">  onClick: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    alert(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;, <span class=\"string\">&quot;hello!&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;button size=<span class=\"string\">&quot;XL&quot;</span> onClick=&#123;<span class=\"function\">()=&gt;</span>&#123;alert(<span class=\"number\">1</span>)&#125; &#125;&gt;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>hello!<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/*#__PURE__*/</span></span><br><span class=\"line\">React.createElement(<span class=\"string\">&quot;button&quot;</span>, &#123;</span><br><span class=\"line\">  size: <span class=\"string\">&quot;XL&quot;</span>,</span><br><span class=\"line\">  onClick: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    alert(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;, <span class=\"comment\">/*#__PURE__*/</span>React.createElement(<span class=\"string\">&quot;div&quot;</span>, <span class=\"literal\">null</span>, <span class=\"string\">&quot;hello!&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"State\"><a href=\"#State\" class=\"headerlink\" title=\"State\"></a>State</h4><h5 id=\"example-1\"><a href=\"#example-1\" class=\"headerlink\" title=\"example 1\"></a>example 1</h5><ul>\n<li>state init : const [counter, setCounter] = React.useState(0); </li>\n<li>state ange : setCounter(counter + 1)</li>\n<li>ui upadte : counter: {counter}</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"comment\">// import css file</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Hook &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;tapable&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// for State</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 對原本存在 function,再做 re-styled</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> BlackTodoItem = styled(TodoItem)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  background: black;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Hook</span></span><br><span class=\"line\"><span class=\"comment\">// function comment</span></span><br><span class=\"line\"><span class=\"comment\">// class comment</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// for State</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [counter, setCounter] = React.useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;render&#x27;</span>, counter)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// function HandleButtonClick() &#123;&#125;</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> HandleButtonClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;button click&#x27;</span>)</span><br><span class=\"line\">\t\tsetCounter(counter + <span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* for State */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;div&gt;counter: &#123;counter&#125;&lt;/div&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;HandleButtonClick&#125;&gt;increment&lt;/button&gt;</span><br><span class=\"line\">      &lt;TodoItem content=<span class=\"string\">&quot;123&quot;</span>/&gt;</span><br><span class=\"line\">\t\t\t&lt;TodoItem content=<span class=\"string\">&quot;456&quot;</span> size=<span class=\"string\">&quot;XL&quot;</span>/&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-2-多欄位\"><a href=\"#example-2-多欄位\" class=\"headerlink\" title=\"example 2 - 多欄位\"></a>example 2 - 多欄位</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [fullName, setFullName] = useState(&#123;</span><br><span class=\"line\">    fName: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    lName: <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 利用 setState 傳回改變前值</span></span><br><span class=\"line\">  <span class=\"comment\">// function handleChange(e) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   const &#123; value, name &#125; = e.target;</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"comment\">//   // setState 可傳回改變前值</span></span><br><span class=\"line\">  <span class=\"comment\">//   setFullName((prevValue) =&gt; &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//     if (name === &quot;fName&quot;) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       return &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//         fName: value,</span></span><br><span class=\"line\">  <span class=\"comment\">//         lName: prevValue.lName</span></span><br><span class=\"line\">  <span class=\"comment\">//       &#125;;</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125; else if (name === &quot;lName&quot;) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       return &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//         fName: prevValue.fName,</span></span><br><span class=\"line\">  <span class=\"comment\">//         lName: value</span></span><br><span class=\"line\">  <span class=\"comment\">//       &#125;;</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//   &#125;);</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 利用 ES6 解構</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; value, name &#125; = e.target;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// setState 可傳回改變前值</span></span><br><span class=\"line\">    setFullName(&#123;</span><br><span class=\"line\">      ...fullName,</span><br><span class=\"line\">      [name]: value</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;container&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h1&gt;</span><br><span class=\"line\">        Hello &#123;fullName.fName&#125; &#123;fullName.lName&#125;</span><br><span class=\"line\">      &lt;/h1&gt;</span><br><span class=\"line\">      &lt;form&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          name=<span class=\"string\">&quot;fName&quot;</span></span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          placeholder=<span class=\"string\">&quot;First Name&quot;</span></span><br><span class=\"line\">          value=&#123;fullName.fName&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          name=<span class=\"string\">&quot;lName&quot;</span></span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          placeholder=<span class=\"string\">&quot;Last Name&quot;</span></span><br><span class=\"line\">          value=&#123;fullName.lName&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;button&gt;Submit&lt;/button&gt;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-3-todos\"><a href=\"#example-3-todos\" class=\"headerlink\" title=\"example 3 - todos\"></a>example 3 - todos</h5><ul>\n<li>key</li>\n<li>setTodos for array</li>\n<li>todos.map</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"comment\">// import css file</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// for State</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// immutable 不可變的</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState([</span><br><span class=\"line\">\t\t<span class=\"number\">1</span></span><br><span class=\"line\">\t]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\tsetTodos([<span class=\"built_in\">Math</span>.random(), ...todos])</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\">(<span class=\"params\">todo, index</span>) =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;index&#125;</span> <span class=\"attr\">content</span>=<span class=\"string\">&#123;todo&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-4-todos-add-item\"><a href=\"#example-4-todos-add-item\" class=\"headerlink\" title=\"example 4 - todos add item\"></a>example 4 - todos add item</h5><ul>\n<li>controlled component</li>\n<li>uncontrolled component #1</li>\n<li>uncontrolled component #2 (Ref)</li>\n<li>todo change to object</li>\n</ul>\n<h6 id=\"App-js-1\"><a href=\"#App-js-1\" class=\"headerlink\" title=\"App.js\"></a>App.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"comment\">// import css file</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// for State</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// uncontrolled component #2 -&gt; ref</span></span><br><span class=\"line\"><span class=\"comment\">// import &#123; useState, useRef &#125; from &#x27;react&#x27;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> id =<span class=\"number\">2</span> ;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// immutable 不可變的</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState([</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tid: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t\tcontent: <span class=\"string\">&#x27;abc&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]);</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// uncontrolled component #2 -&gt; ref</span></span><br><span class=\"line\">\t<span class=\"comment\">// const inputRef = useRef()</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// uncontrolled component #1 -&gt; get value</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// document.querySelector(&#x27;.input-todo&#x27;).value</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// uncontrolled component #2 -&gt; ref</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(inputRef.current.value)</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid,</span><br><span class=\"line\">\t\t\tcontent: value</span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\tid++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleInputChange = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(e.target.value)</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// controlled component</span></span><br><span class=\"line\">\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* controlled component */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* uncontrolled component #1 -&gt; get value */</span>&#125;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* &lt;input className=&quot;input-todo&quot; type=&quot;text&quot; placeholder=&quot;todo&quot;/&gt; */</span>&#125;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* uncontrolled component #2 -&gt; ref */</span>&#125;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* &lt;input ref=&#123;inputRef&#125; type=&quot;text&quot; placeholder=&quot;todo&quot;/&gt; */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"TodoItem-js-1\"><a href=\"#TodoItem-js-1\" class=\"headerlink\" title=\"TodoItem.js\"></a>TodoItem.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TodoItem.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./constants/style&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// react direct</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoItemWrapper = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 12px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoContent = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">// 取用 theme</span></span><br><span class=\"line\"><span class=\"string\">\tcolor: <span class=\"subst\">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">  font-size: <span class=\"subst\">$&#123;props =&gt; props.size === <span class=\"string\">&#x27;XL&#x27;</span> ? <span class=\"string\">&#x27;20px&#x27;</span> : <span class=\"string\">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoButtonWrapper= styled.div<span class=\"string\">``</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// ***** media change *****</span></span><br><span class=\"line\"><span class=\"string\">\t// @media screen and (min-width: 768px) &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t// \tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t// &#125;</span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 20px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 相連之 component</span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 對原本存在styled-component,再做 re-styled</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> RedButton = styled(Button)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// for other import</span></span><br><span class=\"line\"><span class=\"comment\">// 因為 function re-style, 增加 class </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TodoItem</span>(<span class=\"params\">&#123; className, size, todo&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">       &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class=\"line\">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class=\"line\">          &lt;RedButton&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-5-todos-delete\"><a href=\"#example-5-todos-delete\" class=\"headerlink\" title=\"example 5 - todos delete\"></a>example 5 - todos delete</h5><ul>\n<li>todo delete</li>\n</ul>\n<h6 id=\"App-js-2\"><a href=\"#App-js-2\" class=\"headerlink\" title=\"App.js\"></a>App.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> id =<span class=\"number\">2</span> ;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState([</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tid: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t\tcontent: <span class=\"string\">&#x27;abc&#x27;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]);</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid,</span><br><span class=\"line\">\t\t\tcontent: value</span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\tid++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleInputChange = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"TodoItem-js-2\"><a href=\"#TodoItem-js-2\" class=\"headerlink\" title=\"TodoItem.js\"></a>TodoItem.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TodoItem.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./constants/style&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// react direct</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoItemWrapper = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 12px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoContent = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">// 取用 theme</span></span><br><span class=\"line\"><span class=\"string\">\tcolor: <span class=\"subst\">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">  font-size: <span class=\"subst\">$&#123;props =&gt; props.size === <span class=\"string\">&#x27;XL&#x27;</span> ? <span class=\"string\">&#x27;20px&#x27;</span> : <span class=\"string\">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoButtonWrapper= styled.div<span class=\"string\">``</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 20px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 相連之 component</span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> RedButton = styled(Button)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// for other import</span></span><br><span class=\"line\"><span class=\"comment\">// 因為 function re-style, 增加 class </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TodoItem</span>(<span class=\"params\">&#123; className, size, todo, handleDeleteTodo&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">       &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class=\"line\">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">          &lt;RedButton onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            handleDeleteTodo(todo.id)</span><br><span class=\"line\">          &#125;&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-6-todos-change-state\"><a href=\"#example-6-todos-change-state\" class=\"headerlink\" title=\"example 6 - todos change state\"></a>example 6 - todos change state</h5><ul>\n<li>todo change state</li>\n</ul>\n<h6 id=\"App-js-3\"><a href=\"#App-js-3\" class=\"headerlink\" title=\"App.js\"></a>App.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// import &#123; useState &#125; from &#x27;react&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">// use ref</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> id =<span class=\"number\">3</span> ;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState([</span><br><span class=\"line\">\t\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t\t&#123;\t<span class=\"attr\">id</span>: <span class=\"number\">1</span>, <span class=\"attr\">content</span>: <span class=\"string\">&#x27;abc&#x27;</span>, <span class=\"attr\">isDone</span>: <span class=\"literal\">true</span>&#125;,</span><br><span class=\"line\">\t\t&#123;\t<span class=\"attr\">id</span>: <span class=\"number\">2</span>, <span class=\"attr\">content</span>: <span class=\"string\">&#x27;xxx&#x27;</span>, <span class=\"attr\">isDone</span>: <span class=\"literal\">false</span>&#125;,</span><br><span class=\"line\">\t]);</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">3</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleInputChange = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"TodoItem-js-3\"><a href=\"#TodoItem-js-3\" class=\"headerlink\" title=\"TodoItem.js\"></a>TodoItem.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TodoItem.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./constants/style&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// react direct</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoItemWrapper = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 12px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoContent = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">// 取用 theme</span></span><br><span class=\"line\"><span class=\"string\">\tcolor: <span class=\"subst\">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">  font-size: <span class=\"subst\">$&#123;props =&gt; props.size === <span class=\"string\">&#x27;XL&#x27;</span> ? <span class=\"string\">&#x27;20px&#x27;</span> : <span class=\"string\">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  // todo change state</span></span><br><span class=\"line\"><span class=\"string\">  // props.isDone show text-decoration: line-through;</span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;props =&gt; props.isDone &amp;&amp; <span class=\"string\">`</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">    text-decoration: line-through;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">  `</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoButtonWrapper= styled.div<span class=\"string\">``</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 20px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 相連之 component</span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> RedButton = styled(Button)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// for other import</span></span><br><span class=\"line\"><span class=\"comment\">// 因為 function re-style, 增加 class </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TodoItem</span>(<span class=\"params\">&#123; className, size, todo, handleDeleteTodo, handleToggleIsDone&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//  todo change state</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleToggleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handleToggleIsDone(todo.id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// todo delete</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDeleteClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handleDeleteTodo(todo.id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* todo change state */</span>&#125;</span><br><span class=\"line\">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* todo change state */</span>&#125;</span><br><span class=\"line\">          &lt;Button onClick=&#123;handleToggleClick&#125;&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* &#123; todo.isDone ? &#x27;已完成&#x27; : &#x27;未完成&#x27;&#125; */</span>&#125;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* todo.isDone 顯示已完成  */</span>&#125;</span><br><span class=\"line\">            &#123; todo.isDone &amp;&amp; <span class=\"string\">&#x27;已完成&#x27;</span>&#125;</span><br><span class=\"line\">            &#123; !todo.isDone &amp;&amp; <span class=\"string\">&#x27;未完成&#x27;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">          &lt;/Button&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">          &lt;RedButton onClick=&#123;handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"useEffect\"><a href=\"#useEffect\" class=\"headerlink\" title=\"useEffect\"></a>useEffect</h4><ul>\n<li>render 後,你想做什麼</li>\n</ul>\n<h5 id=\"exampl-1-add-useEffect\"><a href=\"#exampl-1-add-useEffect\" class=\"headerlink\" title=\"exampl 1 - add useEffect\"></a>exampl 1 - add useEffect</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// add useEffect-1 </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add useEffect-1</span></span><br><span class=\"line\">useEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;after render!&quot;</span>)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"exampl-2-run-useEffect-when-todos-change\"><a href=\"#exampl-2-run-useEffect-when-todos-change\" class=\"headerlink\" title=\"exampl 2 - run useEffect when todos change\"></a>exampl 2 - run useEffect when todos change</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add useEffect - after render --&gt; when todos change -2</span></span><br><span class=\"line\">useEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">&#125;, [todos]);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"exampl-3-run-useEffect-1st-render\"><a href=\"#exampl-3-run-useEffect-1st-render\" class=\"headerlink\" title=\"exampl 3 - run useEffect 1st render\"></a>exampl 3 - run useEffect 1st render</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// import &#123; useState &#125; from &#x27;react&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">// use ref</span></span><br><span class=\"line\"><span class=\"comment\">// add useEffect-1 </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// let id =3 ;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> isInit = <span class=\"literal\">true</span> ;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState([</span><br><span class=\"line\">\t\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t\t&#123;\t<span class=\"attr\">id</span>: <span class=\"number\">1</span>, <span class=\"attr\">content</span>: <span class=\"string\">&#x27;abc&#x27;</span>, <span class=\"attr\">isDone</span>: <span class=\"literal\">true</span>&#125;,</span><br><span class=\"line\">\t\t&#123;\t<span class=\"attr\">id</span>: <span class=\"number\">2</span>, <span class=\"attr\">content</span>: <span class=\"string\">&#x27;xxx&#x27;</span>, <span class=\"attr\">isDone</span>: <span class=\"literal\">false</span>&#125;,</span><br><span class=\"line\">\t]);</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">3</span>)</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// add useEffect-1</span></span><br><span class=\"line\">\t<span class=\"comment\">// useEffect( () =&gt; &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">// \tconsole.log(&quot;after render!&quot;)</span></span><br><span class=\"line\">\t<span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// add useEffect - after render --&gt; when todos change -2</span></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 1st load do not save to local storage</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!isInit) &#123;</span><br><span class=\"line\">\t\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;todos change :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// add useEffect - after render --&gt; just 1st time render -3</span></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// alert(1);</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// load from localStorage - 3</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> todoData = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&quot;todos&quot;</span>) || <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (todoData) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// writeTodosToLocalStorage(todos);</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// console.log(JSON.stringify(todos));</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;1st :&quot;</span>, todoData)</span><br><span class=\"line\">\t\t\tisInit = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// count correct id</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">JSON</span>.parse(todoData).map(　<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class=\"number\">1</span> :　id.current );</span><br><span class=\"line\">\t\t\tsetTodos(<span class=\"built_in\">JSON</span>.parse(todoData));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// writeTodosToLocalStorage([&#123;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tid: id.current,</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tcontent: value,</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tisDone: false</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// &#125;, ...todos]);</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleInputChange = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"exampl-4-set-local-storage-to-init-todos\"><a href=\"#exampl-4-set-local-storage-to-init-todos\" class=\"headerlink\" title=\"exampl 4 -  set local storage to init todos\"></a>exampl 4 -  set local storage to init todos</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// add useEffect</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> todoData = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&quot;todos&quot;</span>) || <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// set local storage to init todos </span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState(<span class=\"built_in\">JSON</span>.parse(todoData));</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">3</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// count correct id</span></span><br><span class=\"line\">\t<span class=\"built_in\">JSON</span>.parse(todoData).map(　<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class=\"number\">1</span> :　id.current );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;todos change :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleInputChange = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"exampl-5-clear-up-LayoutEffects\"><a href=\"#exampl-5-clear-up-LayoutEffects\" class=\"headerlink\" title=\"exampl 5 -  clear up LayoutEffects\"></a>exampl 5 -  clear up LayoutEffects</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// add useEffect</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;run 1st render!&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// unmount</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;unmount!&#x27;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;useEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// 下一次 render 前執行,內容與前次render相同</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// 可應用於 user disconnect</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;clearEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"改寫成自己的-hook\"><a href=\"#改寫成自己的-hook\" class=\"headerlink\" title=\"改寫成自己的 hook\"></a>改寫成自己的 hook</h4><h5 id=\"App-js-4\"><a href=\"#App-js-4\" class=\"headerlink\" title=\"App.js\"></a>App.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// useTodos hook</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> useTodos <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./useTodos&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">\t\ttodos,</span><br><span class=\"line\">\t\thandleTodosClick,</span><br><span class=\"line\">\t\thandleToggleIsDone,</span><br><span class=\"line\">\t\thandleDeleteTodo,</span><br><span class=\"line\">\t\tvalue,</span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125; = useTodos()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"useInput-js\"><a href=\"#useInput-js\" class=\"headerlink\" title=\"useInput.js\"></a>useInput.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useInput.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">useInput</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleChange = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\tvalue, </span><br><span class=\"line\">\t\tsetValue, </span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"useTodos-js\"><a href=\"#useTodos-js\" class=\"headerlink\" title=\"useTodos.js\"></a>useTodos.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useTodos.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> useInput <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./useInput&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">useTodos</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// set local storage to init todos </span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;init&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> todoData = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&quot;todos&quot;</span>) || <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(todoData) &#123;</span><br><span class=\"line\">\t\t\ttodoData = <span class=\"built_in\">JSON</span>.parse(todoData);</span><br><span class=\"line\">\t\t\tid.current = todoData[<span class=\"number\">0</span>].id + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\ttodoData = [] ;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> todoData;</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> &#123;value, setValue, handleChange &#125; = useInput()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;run 1st render!&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// unmount</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;unmount!&#x27;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;useEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;clearEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\ttodos,</span><br><span class=\"line\">\t\thandleTodosClick,</span><br><span class=\"line\">\t\thandleToggleIsDone,</span><br><span class=\"line\">\t\thandleDeleteTodo,</span><br><span class=\"line\">\t\tvalue,</span><br><span class=\"line\">\t\tsetValue,</span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"memo-useMemo-useCallback\"><a href=\"#memo-useMemo-useCallback\" class=\"headerlink\" title=\"memo, useMemo, useCallback\"></a>memo, useMemo, useCallback</h4><ul>\n<li>memo - 把 component 包起來, 雖然 parents rerender 但本身未改變就不 rerender<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// add memo - 傳入不變,即不 re-render</span></span><br><span class=\"line\"><span class=\"comment\">// 但每次 render 會 new handleTodosClick</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> MemoButton = memo(Button);</span><br></pre></td></tr></table></figure></li>\n<li>useMemo - 把 data 記起來,未改變就不產生新的<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// add useMemo - for data </span></span><br><span class=\"line\"><span class=\"comment\">// todos change no run </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> s = useMemo(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;calculate s&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> value ? redStyle : blueStyle;</span><br><span class=\"line\">&#125;, [value])</span><br></pre></td></tr></table></figure></li>\n<li>useCallback - 把 function 記起來,未改變就不產生新的<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add useCallback - [] 表沒東西會造成改變</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> handleTodosClick = useCallback(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(value);</span><br><span class=\"line\">\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\tsetTodos([&#123;</span><br><span class=\"line\">\t\tid: id.current,</span><br><span class=\"line\">\t\tcontent: value,</span><br><span class=\"line\">\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t&#125;, ...todos])</span><br><span class=\"line\">\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\tid.current++</span><br><span class=\"line\">&#125;, [setValue, value, todos]);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// useTodos hook</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> useTodos <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./useTodos&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add memo - 把 component 包起來 </span></span><br><span class=\"line\"><span class=\"comment\">// add useMemo - for data</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; memo, useMemo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Button</span>(<span class=\"params\">&#123; onClick, children &#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;render button&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> \t(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;onClick&#125;</span>&gt;</span>&#123;children&#125;<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add memo - 傳入不變,即不 re-render</span></span><br><span class=\"line\"><span class=\"comment\">// 但每次 render 會 new handleTodosClick</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> MemoButton = memo(Button);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Test</span>(<span class=\"params\">&#123; style &#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;test render&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;style&#125;</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> redStyle = &#123;</span><br><span class=\"line\">\tcolor: <span class=\"string\">&#x27;red&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> blueStyle = &#123;</span><br><span class=\"line\">\tcolor: <span class=\"string\">&#x27;blue&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">\t\ttodos,</span><br><span class=\"line\">\t\thandleTodosClick,</span><br><span class=\"line\">\t\thandleToggleIsDone,</span><br><span class=\"line\">\t\thandleDeleteTodo,</span><br><span class=\"line\">\t\tvalue,</span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125; = useTodos()</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// add useMemo - for data </span></span><br><span class=\"line\">\t<span class=\"comment\">// todos change no run </span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> s = useMemo(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;calculate s&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> value ? redStyle : blueStyle;</span><br><span class=\"line\">\t&#125;, [value])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* // add useMemo - for data */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;Test style=&#123;s&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* input change 不會造成 Button re-render */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> /&gt;</span><br><span class=\"line\">\t\t\t&lt;MemoButton onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/MemoButton&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useTodos.js</span></span><br><span class=\"line\"><span class=\"comment\">// add useCallback - 把 function 記起來 </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect, useCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> useInput <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./useInput&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">useTodos</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// set local storage to init todos </span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;init&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> todoData = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&quot;todos&quot;</span>) || <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(todoData) &#123;</span><br><span class=\"line\">\t\t\ttodoData = <span class=\"built_in\">JSON</span>.parse(todoData);</span><br><span class=\"line\">\t\t\tid.current = todoData[<span class=\"number\">0</span>].id + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\ttodoData = [] ;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> todoData;</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> &#123;value, setValue, handleChange &#125; = useInput()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;run 1st render!&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// unmount</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;unmount!&#x27;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;useEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;clearEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// add useCallback - [] 表沒東西會造成改變</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = useCallback(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(value);</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;, [setValue, value, todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\ttodos,</span><br><span class=\"line\">\t\thandleTodosClick,</span><br><span class=\"line\">\t\thandleToggleIsDone,</span><br><span class=\"line\">\t\thandleDeleteTodo,</span><br><span class=\"line\">\t\tvalue,</span><br><span class=\"line\">\t\tsetValue,</span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"lazy-initializer-useState-加-function-僅第一次執行\"><a href=\"#lazy-initializer-useState-加-function-僅第一次執行\" class=\"headerlink\" title=\"lazy initializer - useState() 加 function 僅第一次執行\"></a>lazy initializer - useState() 加 function 僅第一次執行</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// add useEffect</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// set local storage to init todos </span></span><br><span class=\"line\">\t<span class=\"comment\">// lazy initializer - just run 1st time</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;init&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> todoData = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&quot;todos&quot;</span>) || <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(todoData) &#123;</span><br><span class=\"line\">\t\t\ttodoData = <span class=\"built_in\">JSON</span>.parse(todoData);</span><br><span class=\"line\">\t\t\tid.current = todoData[<span class=\"number\">0</span>].id + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\ttodoData = [] ;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> todoData;</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// count correct id</span></span><br><span class=\"line\">\ttodos.map(　<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class=\"number\">1</span> :　id.current );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;todos change :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleInputChange = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"useLayoutEffect\"><a href=\"#useLayoutEffect\" class=\"headerlink\" title=\"useLayoutEffect\"></a>useLayoutEffect</h4><ul>\n<li>render 前你想做什麼</li>\n</ul>\n<h5 id=\"exampl-1\"><a href=\"#exampl-1\" class=\"headerlink\" title=\"exampl 1\"></a>exampl 1</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// import &#123; useState &#125; from &#x27;react&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">// use ref</span></span><br><span class=\"line\"><span class=\"comment\">// add useEffect-1 </span></span><br><span class=\"line\"><span class=\"comment\">// add useLayoutEffect</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect, useLayoutEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// let id =3 ;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> isInit = <span class=\"literal\">true</span> ;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState([</span><br><span class=\"line\">\t\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t\t&#123;\t<span class=\"attr\">id</span>: <span class=\"number\">1</span>, <span class=\"attr\">content</span>: <span class=\"string\">&#x27;abc&#x27;</span>, <span class=\"attr\">isDone</span>: <span class=\"literal\">true</span>&#125;,</span><br><span class=\"line\">\t\t&#123;\t<span class=\"attr\">id</span>: <span class=\"number\">2</span>, <span class=\"attr\">content</span>: <span class=\"string\">&#x27;xxx&#x27;</span>, <span class=\"attr\">isDone</span>: <span class=\"literal\">false</span>&#125;,</span><br><span class=\"line\">\t]);</span><br><span class=\"line\">\t<span class=\"comment\">// add value</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">3</span>)</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// add useEffect-1</span></span><br><span class=\"line\">\t<span class=\"comment\">// useEffect( () =&gt; &#123;</span></span><br><span class=\"line\">\t<span class=\"comment\">// \tconsole.log(&quot;after render!&quot;)</span></span><br><span class=\"line\">\t<span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// add useEffect - after render --&gt; when todos change -2</span></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 1st load do not save to local storage</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!isInit) &#123;</span><br><span class=\"line\">\t\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;todos change :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// add useEffect - after render --&gt; just 1st time render -3</span></span><br><span class=\"line\">\t<span class=\"comment\">// add useLayoutEffect</span></span><br><span class=\"line\">\tuseLayoutEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// alert(1);</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// load from localStorage - 3</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> todoData = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&quot;todos&quot;</span>) || <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (todoData) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// writeTodosToLocalStorage(todos);</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// console.log(JSON.stringify(todos));</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;1st :&quot;</span>, todoData)</span><br><span class=\"line\">\t\t\tisInit = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// count correct id</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">JSON</span>.parse(todoData).map(　<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class=\"number\">1</span> :　id.current );</span><br><span class=\"line\">\t\t\tsetTodos(<span class=\"built_in\">JSON</span>.parse(todoData));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// writeTodosToLocalStorage([&#123;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tid: id.current,</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tcontent: value,</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tisDone: false</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// &#125;, ...todos]);</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleInputChange = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetValue(e.target.value)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"class-component\"><a href=\"#class-component\" class=\"headerlink\" title=\"class component\"></a>class component</h4><h5 id=\"example-1-1\"><a href=\"#example-1-1\" class=\"headerlink\" title=\"example 1\"></a>example 1</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// useTodos hook</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> useTodos <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./useTodos&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add memo - 把 component 包起來 </span></span><br><span class=\"line\"><span class=\"comment\">// add useMemo - for data</span></span><br><span class=\"line\"><span class=\"comment\">// add class component</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; memo, useMemo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// function Button(&#123; onClick, children &#125;) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \tconsole.log(&#x27;render button&#x27;);</span></span><br><span class=\"line\"><span class=\"comment\">// \treturn \t(&lt;button onClick=&#123;onClick&#125;&gt;&#123;children&#125;&lt;/button&gt;);</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add class component</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123;onClick, children &#125; = <span class=\"built_in\">this</span>.props</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;onClick&#125;</span>&gt;</span>&#123;children&#125;<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add memo - 傳入不變,即不 re-render</span></span><br><span class=\"line\"><span class=\"comment\">// 但每次 render 會 new handleTodosClick</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> MemoButton = memo(Button);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Test</span>(<span class=\"params\">&#123; style &#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;test render&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;style&#125;</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> redStyle = &#123;</span><br><span class=\"line\">\tcolor: <span class=\"string\">&#x27;red&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> blueStyle = &#123;</span><br><span class=\"line\">\tcolor: <span class=\"string\">&#x27;blue&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">\t\ttodos,</span><br><span class=\"line\">\t\thandleTodosClick,</span><br><span class=\"line\">\t\thandleToggleIsDone,</span><br><span class=\"line\">\t\thandleDeleteTodo,</span><br><span class=\"line\">\t\tvalue,</span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125; = useTodos()</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// add useMemo - for data </span></span><br><span class=\"line\">\t<span class=\"comment\">// todos change no run </span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> s = useMemo(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;calculate s&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> value ? redStyle : blueStyle;</span><br><span class=\"line\">\t&#125;, [value])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* // add useMemo - for data */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;Test style=&#123;s&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* input change 不會造成 Button re-render */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> /&gt;</span><br><span class=\"line\">\t\t\t&lt;MemoButton onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/MemoButton&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TodoItem.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./constants/style&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// react direct</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoItemWrapper = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 12px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoContent = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">// 取用 theme</span></span><br><span class=\"line\"><span class=\"string\">\tcolor: <span class=\"subst\">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">  font-size: <span class=\"subst\">$&#123;props =&gt; props.size === <span class=\"string\">&#x27;XL&#x27;</span> ? <span class=\"string\">&#x27;20px&#x27;</span> : <span class=\"string\">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  // todo change state</span></span><br><span class=\"line\"><span class=\"string\">  // props.isDone show text-decoration: line-through;</span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;props =&gt; props.isDone &amp;&amp; <span class=\"string\">`</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">    text-decoration: line-through;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">  `</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoButtonWrapper= styled.div<span class=\"string\">``</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 20px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 相連之 component</span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> RedButton = styled(Button)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add class component</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">todoItem</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// case #1 fix for handleToggleClick, handleDeleteClick&#x27;s this</span></span><br><span class=\"line\">  <span class=\"comment\">// constructor(props) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   super(props)</span></span><br><span class=\"line\">  <span class=\"comment\">//   this.handleToggleClick = this.handleToggleClick.bind(this)</span></span><br><span class=\"line\">  <span class=\"comment\">//   this.handleDeleteTodo = this.handleDeleteClick.bind(this)</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// handleToggleClick() &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   const &#123;handleToggleIsDone, todo&#125; = this.props;</span></span><br><span class=\"line\">  <span class=\"comment\">//   handleToggleIsDone(todo.id)</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"comment\">// handleDeleteClick() &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   const &#123;handleDeleteTodo, todo&#125; = this.props;</span></span><br><span class=\"line\">  <span class=\"comment\">//   handleDeleteTodo(todo.id)</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// use state (class component)</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      counter: <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// case #2 fix for handleToggleClick, handleDeleteClick&#x27;s this</span></span><br><span class=\"line\">  handleToggleClick= <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;handleToggleIsDone, todo&#125; = <span class=\"built_in\">this</span>.props;</span><br><span class=\"line\">    handleToggleIsDone(todo.id)</span><br><span class=\"line\">    <span class=\"comment\">// use state (class component)</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      counter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  handleDeleteClick= <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;handleDeleteTodo, todo&#125; = <span class=\"built_in\">this</span>.props;</span><br><span class=\"line\">    handleDeleteTodo(todo.id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">      className, </span><br><span class=\"line\">      size, </span><br><span class=\"line\">      todo</span><br><span class=\"line\">    &#125; = <span class=\"built_in\">this</span>.props;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span>  (</span><br><span class=\"line\">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class=\"line\">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &lt;Button onClick=&#123;<span class=\"built_in\">this</span>.handleToggleClick&#125;&gt;</span><br><span class=\"line\">            &#123; todo.isDone &amp;&amp; <span class=\"string\">&#x27;已完成&#x27;</span>&#125;</span><br><span class=\"line\">            &#123; !todo.isDone &amp;&amp; <span class=\"string\">&#x27;未完成&#x27;</span>&#125;</span><br><span class=\"line\">          &lt;/Button&gt;</span><br><span class=\"line\">          &lt;RedButton onClick=&#123;<span class=\"built_in\">this</span>.handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// for other import</span></span><br><span class=\"line\"><span class=\"comment\">// 因為 function re-style, 增加 class </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TodoItemF</span>(<span class=\"params\">&#123; className, size, todo, handleDeleteTodo, handleToggleIsDone&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//  todo change state</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleToggleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handleToggleIsDone(todo.id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// todo delete</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDeleteClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handleDeleteTodo(todo.id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* todo change state */</span>&#125;</span><br><span class=\"line\">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* javascript:alert(1) */</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;a href=&#123;todo.content&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;a href=&#123;window.encodeURIComponent(todo.content)&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* todo change state */</span>&#125;</span><br><span class=\"line\">          &lt;Button onClick=&#123;handleToggleClick&#125;&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* &#123; todo.isDone ? &#x27;已完成&#x27; : &#x27;未完成&#x27;&#125; */</span>&#125;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* todo.isDone 顯示已完成  */</span>&#125;</span><br><span class=\"line\">            &#123; todo.isDone &amp;&amp; <span class=\"string\">&#x27;已完成&#x27;</span>&#125;</span><br><span class=\"line\">            &#123; !todo.isDone &amp;&amp; <span class=\"string\">&#x27;未完成&#x27;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">          &lt;/Button&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">          &lt;RedButton onClick=&#123;handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-2-class-component-lifeCycle-生命週期\"><a href=\"#example-2-class-component-lifeCycle-生命週期\" class=\"headerlink\" title=\"example 2 - class component lifeCycle 生命週期\"></a>example 2 - class component lifeCycle 生命週期</h5><ul>\n<li>PureComponent : same as memo(props 有變動才update)</li>\n<li>shouldComponentUpdate : return false not update</li>\n<li>componentDidMount : mount</li>\n<li>componentDidUpdate : update </li>\n<li>componentWillUnmount : before unmount(not render the component)</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./index.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Counter <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Counter&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t\t&lt;Counter /&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Counter.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// componentDidMount : mount</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;test mount&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// componentWillUnmount : before unmount(not render the component)</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">componentWillUnmount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;test umount&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>123<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// export default class Counter extends React.PureComponent &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// PureComponent : same as memo(props 有變動才update)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Counter</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">super</span>(props)</span><br><span class=\"line\">\t\t<span class=\"comment\">// add state</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">\t\t\tcounter: <span class=\"number\">1</span></span><br><span class=\"line\">\t\t&#125;;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;constructor&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// shouldComponentUpdate : return false not update</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">shouldComponentUpdate</span>(<span class=\"params\">nextProps, nextState</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (nextState.counter &gt; <span class=\"number\">5</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// componentDidMount : mount</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;did mount&#x27;</span>, <span class=\"built_in\">this</span>.state)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// componentDidUpdate : update </span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">componentDidUpdate</span>(<span class=\"params\">prevProps, prevState</span>)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;update prevState:&#x27;</span>, prevState)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// componentWillUnmount : before unmount(not render the component)</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">componentWillUnmount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;unmount&#x27;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tcompont</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\thandleClick= <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">\t\t\tcounter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span></span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\trender () &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// add state</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">const</span> &#123; counter&#125; = <span class=\"built_in\">this</span>.state;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;render&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t\t&lt;div&gt;</span><br><span class=\"line\">\t\t\t\t&lt;button onClick=&#123;<span class=\"built_in\">this</span>.handleClick&#125;&gt;+<span class=\"number\">1</span>&lt;/button&gt;</span><br><span class=\"line\">\t\t\t\tcounetr: &#123;counter&#125;</span><br><span class=\"line\">\t\t\t\t&#123;counter === <span class=\"number\">1</span> &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Test</span> /&gt;</span></span>&#125;</span><br><span class=\"line\">\t\t\t&lt;/div&gt;</span><br><span class=\"line\">\t\t)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"useContext\"><a href=\"#useContext\" class=\"headerlink\" title=\"useContext\"></a>useContext</h4><h5 id=\"prop-Drilling-資料跨多層傳送\"><a href=\"#prop-Drilling-資料跨多層傳送\" class=\"headerlink\" title=\"prop Drilling : 資料跨多層傳送\"></a>prop Drilling : 資料跨多層傳送</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./index.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Demo <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Demo&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t\t&lt;Demo /&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DemoInnerBoxContent</span>(<span class=\"params\">&#123;setTitle&#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123; <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tsetTitle(<span class=\"built_in\">Math</span>.random())</span><br><span class=\"line\">\t\t\t\t&#125;&#125;</span><br><span class=\"line\">\t\t\t&gt;</span><br><span class=\"line\">\t\t\tUpdate Title</span><br><span class=\"line\">\t\t&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DemoInnerBox</span>(<span class=\"params\">&#123;setTitle&#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">DemoInnerBoxContent</span> <span class=\"attr\">setTitle</span>=<span class=\"string\">&#123;setTitle&#125;</span> /&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DemoInner</span>(<span class=\"params\">&#123;setTitle&#125;</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">DemoInnerBox</span> <span class=\"attr\">setTitle</span>=<span class=\"string\">&#123;setTitle&#125;</span> /&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Demo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [title, setTitle] = useState(<span class=\"string\">&quot;I am title!&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div&gt;</span><br><span class=\"line\">\t\t\ttitle: &#123;title&#125;</span><br><span class=\"line\">\t\t\t&lt;DemoInner setTitle=&#123;setTitle&#125; /&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useContext-example-1\"><a href=\"#useContext-example-1\" class=\"headerlink\" title=\"useContext example 1\"></a>useContext example 1</h5><ul>\n<li><p>./App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ContentExample <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ContentExample&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ContentExample /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>./ContentExample</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./ContentExample</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; createContext, useContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> slogan = <span class=\"string\">&quot;super star&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Content = createContext();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SideBarButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// get context</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> title = useContext(Content);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;title&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SideBar</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// get context</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> bt = useContext(Content);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button&gt;&#123;bt&#125;&lt;/button&gt;</span><br><span class=\"line\">      &lt;SideBarButton /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ContentExample</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"comment\">// set Context</span></span><br><span class=\"line\">    &lt;Content.Provider value=&#123;slogan&#125;&gt;</span><br><span class=\"line\">      &lt;SideBar /&gt;</span><br><span class=\"line\">    &lt;/Content.Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"useContext-example-2\"><a href=\"#useContext-example-2\" class=\"headerlink\" title=\"useContext example 2\"></a>useContext example 2</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// add useContext(also import createContext ) </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useContext, createContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>; </span><br><span class=\"line\"><span class=\"keyword\">const</span> ColorContext = createContext()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DemoInnerBoxContent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 取出 colors</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> colors = useContext(ColorContext)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t<span class=\"comment\">// colors 透過 createContext 傳送</span></span><br><span class=\"line\">\t&lt;ColorContext.Provider value=&#123;colors&#125; &gt;</span><br><span class=\"line\">\t\t......</span><br><span class=\"line\">\t&lt;/ColorContext.Provider&gt;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure></li>\n<li><p>useContext for array</p>\n</li>\n<li><p>useContext 可動態改變</p>\n</li>\n<li><p>useContext 中間層可改變</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./index.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Demo <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Demo&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t\t&lt;Demo /&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Demo.js</span></span><br><span class=\"line\"><span class=\"comment\">// add useContext(also import createContext ) </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useContext, createContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>; </span><br><span class=\"line\"><span class=\"keyword\">const</span> TitleContext = createContext()</span><br><span class=\"line\"><span class=\"keyword\">const</span> ColorContext = createContext()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DemoInnerBoxContent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// add useContext</span></span><br><span class=\"line\">\t<span class=\"comment\">// const setTitle = useContext(TitleContext)</span></span><br><span class=\"line\">\t<span class=\"comment\">// add useContext for array</span></span><br><span class=\"line\">\t<span class=\"comment\">// const [title, setTitle] = useContext(TitleContext)</span></span><br><span class=\"line\">\t<span class=\"comment\">// add useContext - ColorContext</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> colors = useContext(ColorContext)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* &lt;button </span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tstyle=&#123;&#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\tcolor: colors.primary</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&#125;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tonClick=&#123; () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\tsetTitle(Math.random())</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&#125;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&gt; */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;button </span><br><span class=\"line\">\t\t\t\tstyle=&#123;&#123;</span><br><span class=\"line\">\t\t\t\t\tcolor: colors.primary</span><br><span class=\"line\">\t\t\t\t&#125;&#125;</span><br><span class=\"line\">\t\t\t&gt;</span><br><span class=\"line\">\t\t\tUpdate Title</span><br><span class=\"line\">\t\t&lt;/button&gt;</span><br><span class=\"line\">\t\t&#123;<span class=\"comment\">/* &#123;title&#125; */</span>&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DemoInnerBox</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t<span class=\"comment\">// add useContext - 中間層可改變</span></span><br><span class=\"line\">\t\t&lt;ColorContext.Provider value=&#123;&#123;</span><br><span class=\"line\">\t\t\t\tprimary: <span class=\"string\">&quot;#00ff00&quot;</span></span><br><span class=\"line\">\t\t\t&#125;&#125; &gt;</span><br><span class=\"line\">\t\t\t&lt;DemoInnerBoxContent /&gt;</span><br><span class=\"line\">\t\t&lt;/ColorContext.Provider&gt;</span><br><span class=\"line\">\t)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DemoInner</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">DemoInnerBox</span> /&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Demo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [title, setTitle] = useState(<span class=\"string\">&quot;I am title!&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [colors, setColors] = useState(&#123;</span><br><span class=\"line\">\t\tprimary: <span class=\"string\">&quot;#ff0000&quot;</span>,</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t<span class=\"comment\">// add useContext - ColorContext</span></span><br><span class=\"line\">\t\t&lt;ColorContext.Provider value=&#123;colors&#125; &gt;</span><br><span class=\"line\">\t\t&#123;<span class=\"comment\">/* add useContext - 可動態改變 */</span>&#125;</span><br><span class=\"line\">\t\t&lt;button onClick=&#123;<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">\t\t\tsetColors(&#123;</span><br><span class=\"line\">\t\t\t\tprimary: <span class=\"string\">&quot;#0000ff&quot;</span></span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;&#125;&gt;click me&lt;/button&gt;</span><br><span class=\"line\">\t\t&#123;<span class=\"comment\">/* // add useContext</span></span><br><span class=\"line\"><span class=\"comment\">\t\t// &lt;TitleContext.Provider value=&#123;setTitle&#125;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t// add useContext for array */</span>&#125;</span><br><span class=\"line\">\t\t&#123;<span class=\"comment\">/* &lt;TitleContext.Provider value=&#123;[title, setTitle]&#125;&gt; */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;div&gt;</span><br><span class=\"line\">\t\t\t\ttitle: &#123;title&#125;</span><br><span class=\"line\">\t\t\t\t&lt;DemoInner /&gt;</span><br><span class=\"line\">\t\t\t&lt;/div&gt;</span><br><span class=\"line\">\t\t&#123;<span class=\"comment\">/* &lt;/TitleContext.Provider&gt; */</span>&#125;</span><br><span class=\"line\">\t\t&lt;/ColorContext.Provider&gt;</span><br><span class=\"line\">\t)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"propTypes-驗證-props\"><a href=\"#propTypes-驗證-props\" class=\"headerlink\" title=\"propTypes 驗證 props\"></a>propTypes 驗證 props</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 雖然 create-react-app 已安裝, 建議要安裝(因為 React 隨時都有可能更新內部 dependency 的版號，甚至移除 node module)</span></span><br><span class=\"line\">npm install prop-types</span><br></pre></td></tr></table></figure>\n\n<p>add file ./.eslintrc.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">&quot;extends&quot;</span>: [<span class=\"string\">&quot;react-app&quot;</span>],</span><br><span class=\"line\">\t<span class=\"attr\">&quot;rules&quot;</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;react/prop-types&quot;</span>: <span class=\"string\">&quot;warn&quot;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./App.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoItem <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./TodoItem&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// useTodos hook</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> useTodos <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./useTodos&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">\t\ttodos,</span><br><span class=\"line\">\t\thandleTodosClick,</span><br><span class=\"line\">\t\thandleToggleIsDone,</span><br><span class=\"line\">\t\thandleDeleteTodo,</span><br><span class=\"line\">\t\tvalue,</span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125; = useTodos()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">\t\t&lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">\t\t\t&#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">\t\t\t&lt;input type=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class=\"line\">\t\t\t&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class=\"line\">\t\t\t&#123;todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoItem</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;todo.id&#125;</span> <span class=\"attr\">todo</span>=<span class=\"string\">&#123;todo&#125;</span> <span class=\"attr\">handleDeleteTodo</span>=<span class=\"string\">&#123;handleDeleteTodo&#125;</span> <span class=\"attr\">handleToggleIsDone</span>=<span class=\"string\">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TodoItem.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./constants/style&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// react direct</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add propTypes</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> PropTypes <span class=\"keyword\">from</span> <span class=\"string\">&quot;prop-types&quot;</span>; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoItemWrapper = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 12px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoContent = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">// 取用 theme</span></span><br><span class=\"line\"><span class=\"string\">\tcolor: <span class=\"subst\">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">\t</span></span><br><span class=\"line\"><span class=\"string\">  font-size: <span class=\"subst\">$&#123;props =&gt; props.size === <span class=\"string\">&#x27;XL&#x27;</span> ? <span class=\"string\">&#x27;20px&#x27;</span> : <span class=\"string\">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  // todo change state</span></span><br><span class=\"line\"><span class=\"string\">  // props.isDone show text-decoration: line-through;</span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;props =&gt; props.isDone &amp;&amp; <span class=\"string\">`</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">    text-decoration: line-through;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">  `</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> TodoButtonWrapper= styled.div<span class=\"string\">``</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t<span class=\"subst\">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">\t\tfont-size: 20px;</span></span><br><span class=\"line\"><span class=\"string\">\t&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">\t// 相連之 component</span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> RedButton = styled(Button)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// for other import</span></span><br><span class=\"line\"><span class=\"comment\">// 因為 function re-style, 增加 class </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">TodoItem</span>(<span class=\"params\">&#123; </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    className, </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    size, </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    todo, </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    handleDeleteTodo, </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    handleToggleIsDone</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//  todo change state</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleToggleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handleToggleIsDone(todo.id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// todo delete</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDeleteClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handleDeleteTodo(todo.id)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* todo change state */</span>&#125;</span><br><span class=\"line\">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* javascript:alert(1) */</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;a href=&#123;todo.content&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;a href=&#123;window.encodeURIComponent(todo.content)&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class=\"line\">        &lt;TodoButtonWrapper&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* todo change state */</span>&#125;</span><br><span class=\"line\">          &lt;Button onClick=&#123;handleToggleClick&#125;&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* &#123; todo.isDone ? &#x27;已完成&#x27; : &#x27;未完成&#x27;&#125; */</span>&#125;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* todo.isDone 顯示已完成  */</span>&#125;</span><br><span class=\"line\">            &#123; todo.isDone &amp;&amp; <span class=\"string\">&#x27;已完成&#x27;</span>&#125;</span><br><span class=\"line\">            &#123; !todo.isDone &amp;&amp; <span class=\"string\">&#x27;未完成&#x27;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">          &lt;/Button&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* todo delete */</span>&#125;</span><br><span class=\"line\">          &lt;RedButton onClick=&#123;handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\">        &lt;/TodoButtonWrapper&gt;</span><br><span class=\"line\">      &lt;/TodoItemWrapper&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add propTypes</span></span><br><span class=\"line\">TodoItem.propTypes = &#123;</span><br><span class=\"line\">  className: PropTypes.string, </span><br><span class=\"line\">  size: PropTypes.string, </span><br><span class=\"line\">  todo: PropTypes.shape(&#123;</span><br><span class=\"line\">    id: PropTypes.number.isRequired,</span><br><span class=\"line\">    content: PropTypes.string,</span><br><span class=\"line\">    isDone: PropTypes.bool</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;), </span><br><span class=\"line\">  handleDeleteTodo: PropTypes.func, </span><br><span class=\"line\">  handleToggleIsDone: PropTypes.func</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useTodos.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useRef, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> useInput <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./useInput&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">useTodos</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> id = useRef(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// set local storage to init todos </span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> [todos, setTodos] = useState( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;init&#x27;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> todoData = <span class=\"built_in\">window</span>.localStorage.getItem(<span class=\"string\">&quot;todos&quot;</span>) || <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(todoData) &#123;</span><br><span class=\"line\">\t\t\ttodoData = <span class=\"built_in\">JSON</span>.parse(todoData);</span><br><span class=\"line\">\t\t\tid.current = todoData[<span class=\"number\">0</span>].id + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\ttodoData = [] ;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> todoData;</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> &#123;value, setValue, handleChange &#125; = useInput()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// save to localStorage after update-1+</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeTodosToLocalStorage</span>(<span class=\"params\">todos</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">window</span>.localStorage.setItem(<span class=\"string\">&quot;todos&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;run 1st render!&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// unmount</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;unmount!&#x27;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">\tuseEffect( <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\twriteTodosToLocalStorage(todos);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;useEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// clear up LayoutEffects</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;clearEffect todos :&#x27;</span>,<span class=\"built_in\">JSON</span>.stringify(todos));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;, [todos]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleTodosClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// set input value </span></span><br><span class=\"line\">\t\tsetTodos([&#123;</span><br><span class=\"line\">\t\t\tid: id.current,</span><br><span class=\"line\">\t\t\tcontent: value,</span><br><span class=\"line\">\t\t\tisDone: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;, ...todos])</span><br><span class=\"line\">\t\tsetValue(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">\t\t<span class=\"comment\">// use ref</span></span><br><span class=\"line\">\t\tid.current++</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo delete</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleDeleteTodo = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.filter(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// todo change state</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> handleToggleIsDone = <span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tsetTodos(todos.map(<span class=\"function\"><span class=\"params\">todo</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (todo.id !== id) <span class=\"keyword\">return</span> todo</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t\t...todo,</span><br><span class=\"line\">\t\t\t\tisDone: !todo.isDone</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\ttodos,</span><br><span class=\"line\">\t\thandleTodosClick,</span><br><span class=\"line\">\t\thandleToggleIsDone,</span><br><span class=\"line\">\t\thandleDeleteTodo,</span><br><span class=\"line\">\t\tvalue,</span><br><span class=\"line\">\t\tsetValue,</span><br><span class=\"line\">\t\thandleChange</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"deployment\"><a href=\"#deployment\" class=\"headerlink\" title=\"deployment\"></a>deployment</h4><h5 id=\"local\"><a href=\"#local\" class=\"headerlink\" title=\"local\"></a>local</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># build </span></span><br><span class=\"line\">npm run build</span><br><span class=\"line\"><span class=\"comment\"># run</span></span><br><span class=\"line\">npm install -g serve</span><br><span class=\"line\">serve -s build</span><br><span class=\"line\"><span class=\"comment\"># set port</span></span><br><span class=\"line\"><span class=\"comment\"># serve -s build -l 4000</span></span><br><span class=\"line\"><span class=\"comment\"># !!!!! 執行 deploy to github 後再執行就會有問題 !!!!! </span></span><br><span class=\"line\"><span class=\"comment\"># 要移除 deploy to github&#x27;s json 設定再執行</span></span><br><span class=\"line\"><span class=\"comment\"># npm run build</span></span><br><span class=\"line\"><span class=\"comment\"># serve -s build</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"deploy-to-github\"><a href=\"#deploy-to-github\" class=\"headerlink\" title=\"deploy to github\"></a>deploy to github</h5><h6 id=\"add-scripts-and-homepage\"><a href=\"#add-scripts-and-homepage\" class=\"headerlink\" title=\"add scripts and homepage\"></a>add scripts and homepage</h6><p>package.json</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\"> &quot;scripts&quot;: &#123;</span><br><span class=\"line\">   &quot;predeploy&quot;: &quot;npm run build&quot;,</span><br><span class=\"line\">   &quot;deploy&quot;: &quot;gh-pages -d build&quot;,</span><br><span class=\"line\">\t.....</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"> &quot;homepage&quot;: &quot;https://hot5656.github.io/react-comments-test2&quot;,</span><br></pre></td></tr></table></figure>\n<h6 id=\"insatll-gh-pages\"><a href=\"#insatll-gh-pages\" class=\"headerlink\" title=\"insatll gh-pages\"></a>insatll gh-pages</h6><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install --save gh-pages</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"github-add-repository-react-comments-test2\"><a href=\"#github-add-repository-react-comments-test2\" class=\"headerlink\" title=\"github add repository - react-comments-test2\"></a>github add repository - react-comments-test2</h6><h6 id=\"deploy-to-github-1\"><a href=\"#deploy-to-github-1\" class=\"headerlink\" title=\"deploy to github\"></a>deploy to github</h6><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># git init and commit</span></span><br><span class=\"line\">git init</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;init&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># add remote repository </span></span><br><span class=\"line\">git remote add origin https://github.com/hot5656/react-comments-test2.git</span><br><span class=\"line\"><span class=\"comment\"># run deploy</span></span><br><span class=\"line\">npm run deploy</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"open-by-browser\"><a href=\"#open-by-browser\" class=\"headerlink\" title=\"open by browser\"></a>open by browser</h6><p><a href=\"https://hot5656.github.io/react-comments-test2/\">https://hot5656.github.io/react-comments-test2/</a></p>\n<h4 id=\"react-router\"><a href=\"#react-router\" class=\"headerlink\" title=\"react router\"></a>react router</h4><h5 id=\"install-1\"><a href=\"#install-1\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install react-router-dom</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useParams\"><a href=\"#useParams\" class=\"headerlink\" title=\"useParams\"></a>useParams</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/BlogPost/BlogPost.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BlogPost</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; slug &#125; = useParams();</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ./component/App/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;AuthContext.Provider value=&#123;&#123;user, setUser&#125;&#125;&gt;</span><br><span class=\"line\">      &lt;Root&gt;</span><br><span class=\"line\">        &lt;Header done=&#123;isDone&#125; /&gt;</span><br><span class=\"line\">        &lt;Switch&gt;</span><br><span class=\"line\">          &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            &lt;HomePage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/posts/:slug&quot;</span>&gt;</span><br><span class=\"line\">            &lt;BlogPost /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/new-post&quot;</span>&gt;</span><br><span class=\"line\">            &lt;CreatePage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/login&quot;</span>&gt;</span><br><span class=\"line\">            &lt;LoginPage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">        &lt;/Switch&gt;</span><br><span class=\"line\">      &lt;/Root&gt;</span><br><span class=\"line\">    &lt;/AuthContext.Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useHistory-useLocation\"><a href=\"#useHistory-useLocation\" class=\"headerlink\" title=\"useHistory, useLocation\"></a>useHistory, useLocation</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useLocation, useHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, setUser &#125; = useContext(AuthContext); </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleLogout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setAuthToken(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">    setUser(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location.pathname !==  <span class=\"string\">&quot;/&quot;</span>) &#123;</span><br><span class=\"line\">      history.push(<span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-1-2\"><a href=\"#example-1-2\" class=\"headerlink\" title=\"example #1\"></a>example #1</h5><h6 id=\"component-App\"><a href=\"#component-App\" class=\"headerlink\" title=\"./component/App\"></a>./component/App</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HomePage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/HomePage&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> LoginPage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/LoginPage&quot;</span>; </span><br><span class=\"line\"><span class=\"keyword\">import</span> Header <span class=\"keyword\">from</span> <span class=\"string\">&quot;../Header&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// BrowserRouter as Router,</span></span><br><span class=\"line\">  <span class=\"comment\">// for SPA</span></span><br><span class=\"line\">  HashRouter <span class=\"keyword\">as</span> Router,</span><br><span class=\"line\">  Switch,</span><br><span class=\"line\">  Route,</span><br><span class=\"line\">  Link</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root =  styled.div<span class=\"string\">``</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &lt;Router&gt;</span><br><span class=\"line\">        &lt;Header /&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;ul&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/login&quot;</span>&gt;Login&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/ul&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">          &lt;hr /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">          &lt;Switch&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* exact 完全比對 */</span>&#125;</span><br><span class=\"line\">            &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">              &lt;HomePage /&gt;</span><br><span class=\"line\">            &lt;/Route&gt;</span><br><span class=\"line\">            &lt;Route path=<span class=\"string\">&quot;/login&quot;</span>&gt;</span><br><span class=\"line\">              &lt;LoginPage /&gt;</span><br><span class=\"line\">            &lt;/Route&gt;</span><br><span class=\"line\">          &lt;/Switch&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/Router&gt;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"component-Header\"><a href=\"#component-Header\" class=\"headerlink\" title=\"./component/Header\"></a>./component/Header</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/Header/Header.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Header<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/Header/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Header&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"Pages-HomePage\"><a href=\"#Pages-HomePage\" class=\"headerlink\" title=\"./Pages/HomePage\"></a>./Pages/HomePage</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/HomePage/HomePage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HomePage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Homepage<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/HomePage/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./HomePage&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"Pages-LoginPage\"><a href=\"#Pages-LoginPage\" class=\"headerlink\" title=\"./Pages/LoginPage\"></a>./Pages/LoginPage</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/LoginPage/LoginPage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LoginPage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>LoginPage<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/LoginPage/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./LoginPage&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"react-event\"><a href=\"#react-event\" class=\"headerlink\" title=\"react event\"></a>react event</h4><ul>\n<li>onClick</li>\n<li>onChange</li>\n<li>onBlur : 離開表單</li>\n</ul>\n<h3 id=\"prettier-ESLint\"><a href=\"#prettier-ESLint\" class=\"headerlink\" title=\"prettier ESLint\"></a>prettier ESLint</h3><h4 id=\"create-react-app-default-include-ESLint-configuration\"><a href=\"#create-react-app-default-include-ESLint-configuration\" class=\"headerlink\" title=\"create-react-app default include ESLint configuration\"></a>create-react-app default include ESLint configuration</h4><p>.\\node_modules\\react-scripts\\config\\webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">!disableESLintPlugin &amp;&amp;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> ESLintPlugin(&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Plugin options</span></span><br><span class=\"line\">    extensions: [<span class=\"string\">&#x27;js&#x27;</span>, <span class=\"string\">&#x27;mjs&#x27;</span>, <span class=\"string\">&#x27;jsx&#x27;</span>, <span class=\"string\">&#x27;ts&#x27;</span>, <span class=\"string\">&#x27;tsx&#x27;</span>],</span><br><span class=\"line\">    formatter: <span class=\"built_in\">require</span>.resolve(<span class=\"string\">&#x27;react-dev-utils/eslintFormatter&#x27;</span>),</span><br><span class=\"line\">    eslintPath: <span class=\"built_in\">require</span>.resolve(<span class=\"string\">&#x27;eslint&#x27;</span>),</span><br><span class=\"line\">    failOnError: !(isEnvDevelopment &amp;&amp; emitErrorsAsWarnings),</span><br><span class=\"line\">    context: paths.appSrc,</span><br><span class=\"line\">    cache: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    cacheLocation: path.resolve(</span><br><span class=\"line\">      paths.appNodeModules,</span><br><span class=\"line\">      <span class=\"string\">&#x27;.cache/.eslintcache&#x27;</span></span><br><span class=\"line\">    ),</span><br><span class=\"line\">    <span class=\"comment\">// ESLint class options</span></span><br><span class=\"line\">    cwd: paths.appPath,</span><br><span class=\"line\">    resolvePluginsRelativeTo: __dirname,</span><br><span class=\"line\">    baseConfig: &#123;</span><br><span class=\"line\">      <span class=\"keyword\">extends</span>: [<span class=\"built_in\">require</span>.resolve(<span class=\"string\">&#x27;eslint-config-react-app/base&#x27;</span>)],</span><br><span class=\"line\">      rules: &#123;</span><br><span class=\"line\">        ...(!hasJsxRuntime &amp;&amp; &#123;</span><br><span class=\"line\">          <span class=\"string\">&#x27;react/react-in-jsx-scope&#x27;</span>: <span class=\"string\">&#x27;error&#x27;</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;),</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"vscode-ESlint-configuration-ESLint\"><a href=\"#vscode-ESlint-configuration-ESLint\" class=\"headerlink\" title=\"vscode ESlint configuration - ESLint\"></a>vscode ESlint configuration - ESLint</h4><p>./.eslintrc.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">&quot;extends&quot;</span>: [<span class=\"string\">&quot;react-app&quot;</span>],</span><br><span class=\"line\">\t<span class=\"attr\">&quot;rules&quot;</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;react/prop-types&quot;</span>: <span class=\"string\">&quot;warn&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;semi&quot;</span>: <span class=\"string\">&quot;error&quot;</span>  <span class=\"comment\">// 結尾要加分號</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"prettier-Prettier-Code-formatter-Prettier\"><a href=\"#prettier-Prettier-Code-formatter-Prettier\" class=\"headerlink\" title=\"prettier - Prettier - Code formatter (Prettier)\"></a>prettier - Prettier - Code formatter (Prettier)</h4><p>settings.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;editor.tabSize&quot;</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;emmet.includeLanguages&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;javascript&quot;</span>: <span class=\"string\">&quot;javascriptreact&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">&quot;emmet.triggerExpansionOnTab&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;editor.formatOnSave&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;editor.defaultFormatter&quot;</span>: <span class=\"string\">&quot;esbenp.prettier-vscode&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;files.associations&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;*.js&quot;</span>: <span class=\"string\">&quot;javascriptreact&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 雙引號</span><br><span class=\"line\"><span class=\"comment\">/* eslint jsx-quotes: [&quot;error&quot;, &quot;prefer-double&quot;] */</span></span><br><span class=\"line\"># 定要有分號</span><br><span class=\"line\"><span class=\"comment\">/* eslint semi: [&quot;error&quot;, &quot;always&quot;] */</span></span><br><span class=\"line\"># function 與 () 不要有空格</span><br><span class=\"line\"><span class=\"comment\">/* eslint space-before-function-paren: [&quot;error&quot;, &quot;never&quot;] */</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"測試\"><a href=\"#測試\" class=\"headerlink\" title=\"測試\"></a>測試</h3><h4 id=\"react-testing-library-測試-React-component\"><a href=\"#react-testing-library-測試-React-component\" class=\"headerlink\" title=\"react-testing-library : 測試 React component\"></a>react-testing-library : 測試 React component</h4><h4 id=\"Cypress-end-ot-end-test\"><a href=\"#Cypress-end-ot-end-test\" class=\"headerlink\" title=\"Cypress : end ot end test\"></a>Cypress : end ot end test</h4><h3 id=\"Developer-Tools\"><a href=\"#Developer-Tools\" class=\"headerlink\" title=\"Developer Tools\"></a>Developer Tools</h3><ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\">React Developer Tool</a></li>\n<li><a href=\"https://storybook.js.org/\">Storybook</a></li>\n<li><a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer\">Bundle Analyzer</a></li>\n<li><a href=\"https://github.com/welldone-software/why-did-you-render\">Why Did You Render</a></li>\n<li><a href=\"https://jestjs.io/\">React Testing Library With Jest</a></li>\n<li><a href=\"https://formik.org/\">Formik</a> and <a href=\"https://www.npmjs.com/package/yup\">Yup</a></li>\n<li><a href=\"https://react-hook-form.com/\">React Hook Form</a></li>\n<li><a href=\"https://www.reactsight.com/\">React Sight</a></li>\n<li><a href=\"https://react-proto.github.io/react-proto/\">React Proto</a></li>\n</ul>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://styled-components.com/docs/basics\">styled components</a></li>\n<li><a href=\"https://pjchender.blogspot.com/2017/01/javascript-es6-template-literalstagged.html\">tagged template</a></li>\n<li>   <a href=\"https://babeljs.io/\">Babel is a JavaScript compiler</a></li>\n<li><a href=\"https://prettier.io/\">Prettier</a></li>\n<li><a href=\"https://create-react-app.dev/docs/setting-up-your-editor\">React Setting Up Your Editor</a></li>\n<li><a href=\"https://reactjs.org/docs/introducing-jsx.html\">Introducing JSX</a></li>\n<li><a href=\"https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml\">dangerouslySetInnerHTML</a></li>\n<li><a href=\"https://github.com/donavon/hook-flow\">hook-flow</a></li>\n<li><a href=\"https://overreacted.io/a-complete-guide-to-useeffect/\">A Complete Guide to useEffect</a></li>\n<li><a href=\"https://usehooks.com/useLocalStorage/\">useLocalStorage</a></li>\n<li><a href=\"https://blog.techbridge.cc/2019/02/04/vdom-from-scratch/\">從頭打造一個簡單的 Virtual DOM</a></li>\n<li><a href=\"https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/build-a-simple-virtual-dom-5cf12ccf379f\">為了瞭解原理，那就來實作一個簡易 Virtual DOM 吧！</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10234998\">React lifeCycle 生命週期</a></li>\n<li><a href=\"https://create-react-app.dev/docs/deployment/\">react deployment</a></li>\n<li><a href=\"https://reactrouter.com/web/guides/quick-start\">react router</a></li>\n<li><a href=\"https://jwt.io/\">JWT</a></li>\n<li><a href=\"https://testing-library.com/docs/bs-react-testing-library/intro\">react-testing-library</a></li>\n<li><a href=\"https://www.cypress.io/\">cypress</a></li>\n<li><a href=\"https://github.com/kdchang/reactjs101\">從零開始學 ReactJS(ReactJS 101)</a></li>\n<li><a href=\"https://overreacted.io/\">Overreacted(Dan Abramov)</a></li>\n<li><a href=\"https://zh-hant.reactjs.org/docs/react-dom-server.html#rendertostring\">ReactDOMServer</a> : SSR reffence</li>\n<li><a href=\"https://prerender.io/\">PRERENDER io</a> : SSR reference</li>\n<li><a href=\"https://nextjs.org/\">*** Next.js</a> : The React Framework for Production (內建 SSR)</li>\n<li><a href=\"https://www.typescriptlang.org/\">TypeScript</a>: .ts, JavaScript 加型態, 需編譯後才能執行</li>\n<li><a href=\"https://github.com/sudheerj/reactjs-interview-questions\">React Interview Questions &amp; Answers</a></li>\n</ul>\n","categories":["Framework"],"tags":["react"]},{"title":"React 練習","url":"/2021/09/13/react-2/","content":"<h3 id=\"留言板\"><a href=\"#留言板\" class=\"headerlink\" title=\"留言板\"></a>留言板</h3><h4 id=\"package-json\"><a href=\"#package-json\" class=\"headerlink\" title=\"package.json\"></a>package.json</h4><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\"> &quot;scripts&quot;: &#123;</span><br><span class=\"line\">   &quot;predeploy&quot;: &quot;npm run build&quot;,</span><br><span class=\"line\">   &quot;deploy&quot;: &quot;gh-pages -d build&quot;,</span><br><span class=\"line\">   &quot;start&quot;: &quot;react-scripts start&quot;,</span><br><span class=\"line\">   &quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class=\"line\">   &quot;test&quot;: &quot;react-scripts test&quot;,</span><br><span class=\"line\">   &quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class=\"line\"> &#125;,</span><br><span class=\"line\">&quot;homepage&quot;: &quot;https://hot5656.github.io/react-comments-test2&quot;,</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"index-js\"><a href=\"#index-js\" class=\"headerlink\" title=\"index.js\"></a>index.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./components/App&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t&lt;App /&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"component-App-index-js\"><a href=\"#component-App-index-js\" class=\"headerlink\" title=\"./component/App/index.js\"></a>./component/App/index.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/index.js</span></span><br><span class=\"line\"><span class=\"comment\">// import App from &#x27;./App&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">// export default App;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// re-export</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"component-App-App-js\"><a href=\"#component-App-App-js\" class=\"headerlink\" title=\"./component/App/App.js\"></a>./component/App/App.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> PropTypes <span class=\"keyword\">from</span> <span class=\"string\">&#x27;prop-types&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> API_ENDPOINT = <span class=\"string\">&#x27;https://student-json-api.lidemy.me/comments?_sort=createdAt&amp;_order=desc&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Page = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 360px;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> Title = styled.h1<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: #333;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageForm = styled.form<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  margin-top: 16px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> ErrorMessage = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  marge-top: 16px;</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageTextArea = styled.textarea<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: block;</span></span><br><span class=\"line\"><span class=\"string\">  width: 100%;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> SubmitButton = styled.button<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  margin-top: 8px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageList = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  margin-top: 16px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageContainer = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 8px 16px;</span></span><br><span class=\"line\"><span class=\"string\">  border-radius: 8px;</span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  // &amp;:not(:first-child) &#123;</span></span><br><span class=\"line\"><span class=\"string\">  //   margin-top: 8px;</span></span><br><span class=\"line\"><span class=\"string\">  // &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  &amp; + &amp; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 8px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageHead = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-item: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  padding-bottom: 4px;</span></span><br><span class=\"line\"><span class=\"string\">  border-bottom: 1px solid rgba(0, 0, 0, 0.3)</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageAuthor = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: rgba(23, 78, 55, 0.3)</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageTime = styled.div<span class=\"string\">``</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MessageBody = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  margin-top: 16px;</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Loading = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  position: fixed;</span></span><br><span class=\"line\"><span class=\"string\">  top: 0;</span></span><br><span class=\"line\"><span class=\"string\">  left: 0;</span></span><br><span class=\"line\"><span class=\"string\">  right: 0;</span></span><br><span class=\"line\"><span class=\"string\">  bottom: 0;</span></span><br><span class=\"line\"><span class=\"string\">  background: rgba(0, 0, 0, 0.5);</span></span><br><span class=\"line\"><span class=\"string\">  color: white;</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 30px;</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: center;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Message</span>(<span class=\"params\">&#123;author, time, children&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;MessageContainer&gt;</span><br><span class=\"line\">      &lt;MessageHead&gt;</span><br><span class=\"line\">        &lt;MessageAuthor&gt;&#123;author&#125;&lt;/MessageAuthor&gt;</span><br><span class=\"line\">        &lt;MessageTime&gt;&#123;time&#125;&lt;/MessageTime&gt;</span><br><span class=\"line\">      &lt;/MessageHead&gt;</span><br><span class=\"line\">      &lt;MessageBody&gt;&#123;children&#125;&lt;/MessageBody&gt;</span><br><span class=\"line\">    &lt;/MessageContainer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Message.propTypes = &#123;</span><br><span class=\"line\">  author: PropTypes.string,</span><br><span class=\"line\">  time: PropTypes.string,</span><br><span class=\"line\">  children: PropTypes.node</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// api https://github.com/Lidemy/lidemy-student-json-api-server</span></span><br><span class=\"line\"><span class=\"comment\">// https://student-json-api.lidemy.me/comments?_sort=createdAt&amp;_order=desc</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [messages, setMessages] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [messageApiError, setMessageApiError] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [value, setValue] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [postMessageError, setPostMessageError] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [isLoadingPostMessage, SetIsLoadingPostMessage] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchMessahe = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetch(API_ENDPOINT)</span><br><span class=\"line\">    .then( <span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.json())</span><br><span class=\"line\">    .then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      setMessages(data);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      setMessageApiError(err.message);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleTextAreaChange = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setValue(e.target.value);</span><br><span class=\"line\">  &#125;; </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handelTextAreaFocus = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setPostMessageError(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  &#125;; </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleFormSubmit = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isLoadingPostMessage) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;no send&#x27;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    SetIsLoadingPostMessage(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    fetch(<span class=\"string\">&#x27;https://student-json-api.lidemy.me/comments&#x27;</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&#x27;POST&#x27;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(&#123;</span><br><span class=\"line\">        nickname: <span class=\"string\">&#x27;Hi&#x27;</span>,</span><br><span class=\"line\">        body: value</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.json())</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      SetIsLoadingPostMessage(<span class=\"literal\">false</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ( data.ok === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        setPostMessageError(data.message);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      setValue(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">      fetchMessahe();</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      SetIsLoadingPostMessage(<span class=\"literal\">false</span>);</span><br><span class=\"line\">      setPostMessageError(err.message);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">    fetchMessahe();</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">     &lt;Page&gt;</span><br><span class=\"line\">       &#123;isLoadingPostMessage &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Loading</span>&gt;</span>Loading...<span class=\"tag\">&lt;/<span class=\"name\">Loading</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;Title&gt;留言板&lt;/Title&gt;</span><br><span class=\"line\">      &lt;MessageForm onSubmit=&#123;handleFormSubmit&#125;&gt;</span><br><span class=\"line\">        &lt;MessageTextArea value=&#123;value&#125; onChange=&#123;handleTextAreaChange&#125; onFocus=&#123;handelTextAreaFocus&#125; rows=<span class=\"string\">&quot;10&quot;</span> /&gt;</span><br><span class=\"line\">        &lt;SubmitButton&gt;送出留言&lt;/SubmitButton&gt;</span><br><span class=\"line\">        &#123;postMessageError &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>&#123;postMessageError&#125;<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;/MessageForm&gt;</span><br><span class=\"line\">      &#123;messageApiError &amp;&amp; (</span><br><span class=\"line\">        &lt;ErrorMessage&gt;</span><br><span class=\"line\">          Something went wrong. &#123;messageApiError.toString()&#125;</span><br><span class=\"line\">        &lt;/ErrorMessage&gt;</span><br><span class=\"line\">      )&#125;</span><br><span class=\"line\">      &#123;messages &amp;&amp; messages.length === <span class=\"number\">0</span> &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>No Messahe<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;MessageList&gt;</span><br><span class=\"line\">        &#123;messages &amp;&amp; messages.map(<span class=\"function\"><span class=\"params\">message</span> =&gt;</span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> (</span><br><span class=\"line\">          &lt;Message key=&#123;message.id&#125; author=&#123;message.nickname&#125; time=&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(message.createdAt).toLocaleString() &#125;&gt;</span><br><span class=\"line\">            &#123;message.body&#125;</span><br><span class=\"line\">          &lt;/Message&gt;</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;)&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;/MessageList&gt;</span><br><span class=\"line\">    &lt;/Page&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"部落格\"><a href=\"#部落格\" class=\"headerlink\" title=\"部落格\"></a>部落格</h3><h4 id=\"src\"><a href=\"#src\" class=\"headerlink\" title=\"./src\"></a>./src</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./components/App&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// BrowserRouter as Router,</span></span><br><span class=\"line\">  <span class=\"comment\">// for SPA</span></span><br><span class=\"line\">  HashRouter <span class=\"keyword\">as</span> Router,</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t&lt;Router&gt;</span><br><span class=\"line\">\t\t&lt;App /&gt;</span><br><span class=\"line\">\t&lt;/Router&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// contexts.js </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> AuthContext = createContext(<span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> TOKEN_NAME = <span class=\"string\">&#x27;token&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> setAuthToken = <span class=\"function\"><span class=\"params\">token</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">localStorage</span>.setItem(TOKEN_NAME, token);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getAuthToken = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">localStorage</span>.getItem(TOKEN_NAME);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// WebApi.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getAuthToken &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./utils&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> BASE_URL = <span class=\"string\">&quot;https://student-json-api.lidemy.me&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// api https://github.com/Lidemy/lidemy-student-json-api-server</span></span><br><span class=\"line\"><span class=\"comment\">// https://student-json-api.lidemy.me/posts?userId=1&amp;_expand=user</span></span><br><span class=\"line\"><span class=\"comment\">// https://student-json-api.lidemy.me/posts?id=1</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getPosts = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;BASE_URL&#125;</span>/posts?_sort=createdAt&amp;_order=desc`</span>)</span><br><span class=\"line\">\t\t.then( <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.json());</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getPostId = <span class=\"function\">(<span class=\"params\">id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;BASE_URL&#125;</span>/posts?id=<span class=\"subst\">$&#123;id&#125;</span>`</span>)</span><br><span class=\"line\">\t\t.then( <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.json());</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// https://student-json-api.lidemy.me/login</span></span><br><span class=\"line\"><span class=\"comment\">// user01 Lidemy</span></span><br><span class=\"line\"><span class=\"comment\">// JWT </span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> login = <span class=\"function\">(<span class=\"params\">username, password</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;BASE_URL&#125;</span>/login`</span>, &#123;</span><br><span class=\"line\">\t\tmethod: <span class=\"string\">&#x27;POST&#x27;</span>,</span><br><span class=\"line\">\t\theaders: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tbody: <span class=\"built_in\">JSON</span>.stringify(&#123;</span><br><span class=\"line\">\t\t\tusername,</span><br><span class=\"line\">\t\t\tpassword</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.json());</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getMe = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> token = getAuthToken();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;BASE_URL&#125;</span>/me`</span>, &#123;</span><br><span class=\"line\">\t\theaders: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;authorization&#x27;</span>: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.json());</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// https://student-json-api.lidemy.me/posts</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> create = <span class=\"function\">(<span class=\"params\">title , body </span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> token = getAuthToken();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;BASE_URL&#125;</span>/posts`</span>, &#123;</span><br><span class=\"line\">\t\tmethod: <span class=\"string\">&#x27;POST&#x27;</span>,</span><br><span class=\"line\">\t\theaders: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&#x27;authorization&#x27;</span>: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tbody: <span class=\"built_in\">JSON</span>.stringify(&#123;</span><br><span class=\"line\">\t\t\ttitle,</span><br><span class=\"line\">\t\t\tbody</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\t.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.json());</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-components-App\"><a href=\"#src-components-App\" class=\"headerlink\" title=\"./src/components/App\"></a>./src/components/App</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  Switch,</span><br><span class=\"line\">  Route,</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HomePage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/HomePage&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> LoginPage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/LoginPage&quot;</span>; </span><br><span class=\"line\"><span class=\"keyword\">import</span> BlogPost <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/BlogPost&quot;</span>; </span><br><span class=\"line\"><span class=\"keyword\">import</span> CreatePage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/CreatePage&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Header <span class=\"keyword\">from</span> <span class=\"string\">&quot;../Header&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getMe &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../WebApi&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; AuthContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../contexts&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getAuthToken &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../utils&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root =  styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding-top: 64px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [user, setUser] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [isDone, setIsDone] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"comment\">// const isDone = useRef(false);</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = getAuthToken();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (token) &#123;</span><br><span class=\"line\">      getMe().then(<span class=\"function\"><span class=\"params\">resp</span> =&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (resp.ok === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">          setUser(resp.data);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    setIsDone(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;AuthContext.Provider value=&#123;&#123;user, setUser&#125;&#125;&gt;</span><br><span class=\"line\">      &lt;Root&gt;</span><br><span class=\"line\">        &lt;Header done=&#123;isDone&#125; /&gt;</span><br><span class=\"line\">        &lt;Switch&gt;</span><br><span class=\"line\">          &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            &lt;HomePage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/posts/:slug&quot;</span>&gt;</span><br><span class=\"line\">            &lt;BlogPost /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/new-post&quot;</span>&gt;</span><br><span class=\"line\">            &lt;CreatePage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/login&quot;</span>&gt;</span><br><span class=\"line\">            &lt;LoginPage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">        &lt;/Switch&gt;</span><br><span class=\"line\">      &lt;/Root&gt;</span><br><span class=\"line\">    &lt;/AuthContext.Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-components-Header\"><a href=\"#src-components-Header\" class=\"headerlink\" title=\"./src/components/Header\"></a>./src/components/Header</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/Header/Header.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useLocation, useHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; AuthContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../contexts&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; setAuthToken &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> PropTypes <span class=\"keyword\">from</span> <span class=\"string\">&#x27;prop-types&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> HeaderConainer = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  height: 64px;</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  position: fixed;</span></span><br><span class=\"line\"><span class=\"string\">  top: 0;</span></span><br><span class=\"line\"><span class=\"string\">  left: 0;</span></span><br><span class=\"line\"><span class=\"string\">  right: 0;</span></span><br><span class=\"line\"><span class=\"string\">  right: 0;</span></span><br><span class=\"line\"><span class=\"string\">  border-bottom: 1px solid rgba(0, 0, 0, 0.2);</span></span><br><span class=\"line\"><span class=\"string\">  padding: 0px 32px;</span></span><br><span class=\"line\"><span class=\"string\">  background: white;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> NavbarList = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-utems: center;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> LeftContainer = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;NavbarList&#125;</span> &#123;</span></span><br><span class=\"line\"><span class=\"string\">    margin-left: 64px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Brand = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 32px;</span></span><br><span class=\"line\"><span class=\"string\">  font-weight: bold;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set to link</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Nav = styled(Link)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: center;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: center;</span></span><br><span class=\"line\"><span class=\"string\">  height: 64px;</span></span><br><span class=\"line\"><span class=\"string\">  box-sizing: border-box;</span></span><br><span class=\"line\"><span class=\"string\">  width: 100px;</span></span><br><span class=\"line\"><span class=\"string\">  cursor: pointer;</span></span><br><span class=\"line\"><span class=\"string\">  color: black;</span></span><br><span class=\"line\"><span class=\"string\">  text-decoration: none;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;(props) =&gt;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">    props.$active &amp;&amp; </span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">    <span class=\"string\">`</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">      background: rgba(0, 0, 0, 0.1);</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">    `</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\">&#123;done&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, setUser &#125; = useContext(AuthContext); </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleLogout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setAuthToken(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">    setUser(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location.pathname !==  <span class=\"string\">&quot;/&quot;</span>) &#123;</span><br><span class=\"line\">      history.push(<span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;HeaderConainer&gt;</span><br><span class=\"line\">      &lt;LeftContainer&gt;</span><br><span class=\"line\">        &lt;Brand &gt;部落格&lt;/Brand&gt;</span><br><span class=\"line\">        &lt;NavbarList&gt;</span><br><span class=\"line\">          &lt;Nav to=<span class=\"string\">&quot;/&quot;</span> $active=&#123;location.pathname ===  <span class=\"string\">&quot;/&quot;</span>&#125; &gt;首頁&lt;/Nav&gt;</span><br><span class=\"line\">          &#123; (user &amp;&amp; done)&amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Nav</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/new-post&quot;</span> $<span class=\"attr\">active</span>=<span class=\"string\">&#123;location.pathname</span> ===  <span class=\"string\">&quot;/new-post&quot;</span>&#125; &gt;</span>發佈文章<span class=\"tag\">&lt;/<span class=\"name\">Nav</span>&gt;</span></span>&#125;</span><br><span class=\"line\">        &lt;/NavbarList&gt;</span><br><span class=\"line\">      &lt;/LeftContainer&gt;</span><br><span class=\"line\">      &lt;NavbarList&gt;</span><br><span class=\"line\">        &#123;(!user &amp;&amp; done) &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Nav</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/login&quot;</span> $<span class=\"attr\">active</span>=<span class=\"string\">&#123;location.pathname</span> ===  <span class=\"string\">&quot;/login&quot;</span>&#125;&gt;</span>登入<span class=\"tag\">&lt;/<span class=\"name\">Nav</span>&gt;</span></span>&#125;</span><br><span class=\"line\">        &#123;(user &amp;&amp; done)  &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Nav</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleLogout&#125;</span>&gt;</span>登出<span class=\"tag\">&lt;/<span class=\"name\">Nav</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;/NavbarList&gt;</span><br><span class=\"line\">    &lt;/HeaderConainer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Header.propTypes = &#123;</span><br><span class=\"line\">  done: PropTypes.bool</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/Header/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Header&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-Pages-BlogsPost\"><a href=\"#src-Pages-BlogsPost\" class=\"headerlink\" title=\"./src/Pages/BlogsPost\"></a>./src/Pages/BlogsPost</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/BlogPost/BlogPost.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getPostId &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../WebApi&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> PostContainer = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    width: 80%;</span></span><br><span class=\"line\"><span class=\"string\">    margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">  `</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> PostTitle = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  text-align: center;</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 24px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> PostBody = styled.div<span class=\"string\">``</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BlogPost</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; slug &#125; = useParams();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [ post, setPost ] = useState(&#123;</span><br><span class=\"line\">    title: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    body: <span class=\"string\">&quot;&quot;</span> </span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getPostId(slug).then( <span class=\"function\"><span class=\"params\">post</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (post.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        setPost(post[<span class=\"number\">0</span>]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;, [slug]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;PostContainer&gt;</span><br><span class=\"line\">      &lt;PostTitle&gt;&#123;post.title&#125;&lt;/PostTitle&gt;</span><br><span class=\"line\">      &lt;PostBody&gt;&#123;post.body&#125;&lt;/PostBody&gt;</span><br><span class=\"line\">    &lt;/PostContainer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/BlogPost/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./BlogPost&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-Pages-CreatePage\"><a href=\"#src-Pages-CreatePage\" class=\"headerlink\" title=\"./src/Pages/CreatePage\"></a>./src/Pages/CreatePage</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/CreatePage/CreatePage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-router-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; create &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../WebApi&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 80%;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Title = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 5px 0;</span></span><br><span class=\"line\"><span class=\"string\">  input &#123;</span></span><br><span class=\"line\"><span class=\"string\">    width: 100%;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  div &#123;</span></span><br><span class=\"line\"><span class=\"string\">    padding-bottom: 5px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Content = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding-bottom: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  </span></span><br><span class=\"line\"><span class=\"string\">  textarea &#123;</span></span><br><span class=\"line\"><span class=\"string\">    width: 100%;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  div &#123;</span></span><br><span class=\"line\"><span class=\"string\">    padding-bottom: 5px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ErrorMessage = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CreatePage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [title, setTitle] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [content, setContent] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [errorMessage, setErrorMessage] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory(); </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSubmit = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    create(title, content).then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.ok === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> setErrorMessage(data.message);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      history.push(<span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &lt;form onSubmit=&#123;handleSubmit&#125;&gt;</span><br><span class=\"line\">        &lt;Title&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            Title</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;input type=<span class=\"string\">&quot;text&quot;</span> value=&#123;title&#125; onChange=&#123; <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> setTitle(e.target.value)&#125; /&gt;</span><br><span class=\"line\">        &lt;/Title&gt;</span><br><span class=\"line\">        &lt;Content&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            Content</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;textarea rows=<span class=\"string\">&quot;10&quot;</span> value=&#123;content&#125; onChange=&#123; <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> setContent(e.target.value)&#125;&gt;</span><br><span class=\"line\">          &lt;/textarea&gt;</span><br><span class=\"line\">        &lt;/Content&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;button type=<span class=\"string\">&quot;submit&quot;</span>&gt;新增&lt;/button&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &#123; errorMessage &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>&#123;errorMessage&#125;<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/CreatePage/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./CreatePage&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-Pages-HomePage\"><a href=\"#src-Pages-HomePage\" class=\"headerlink\" title=\"./src/Pages/HomePage\"></a>./src/Pages/HomePage</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/HomePage/HomePage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; PropTypes &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;prop-types&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getPosts &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../WebApi&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 80%;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> PostContainer = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  border-bottom: 1px solid rgba(0, 12, 34, 0.2);</span></span><br><span class=\"line\"><span class=\"string\">  padding: 16px;</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  align-items: flex-end;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: space-between;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> PostTitle = styled(Link)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 24px;</span></span><br><span class=\"line\"><span class=\"string\">  color: #333;</span></span><br><span class=\"line\"><span class=\"string\">  text-decoration: none;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> PostDate = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: rgba(0, 0, 0, 0.3);</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Post</span> (<span class=\"params\">&#123;post&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;PostContainer &gt;</span><br><span class=\"line\">      &lt;PostTitle to=&#123;<span class=\"string\">`/posts/<span class=\"subst\">$&#123;post.id&#125;</span>`</span>&#125; &gt;&#123;post.title&#125;&lt;/PostTitle&gt;</span><br><span class=\"line\">      &lt;PostDate&gt;&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(post.createdAt).toLocaleString()&#125;&lt;/PostDate&gt;</span><br><span class=\"line\">    &lt;/PostContainer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Post.propTypes = &#123;</span><br><span class=\"line\">  post: PropTypes.object</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HomePage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [ posts, setPosts ] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getPosts().then( <span class=\"function\"><span class=\"params\">posts</span> =&gt;</span> &#123;</span><br><span class=\"line\">      setPosts(posts);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &#123;posts.map( <span class=\"function\"><span class=\"params\">post</span> =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Post</span> <span class=\"attr\">post</span>=<span class=\"string\">&#123;post&#125;</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;post.id&#125;/</span>&gt;</span></span>)&#125;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/HomePage/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./HomePage&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-Pages-LoginPage\"><a href=\"#src-Pages-LoginPage\" class=\"headerlink\" title=\"./src/Pages/LoginPage\"></a>./src/Pages/LoginPage</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/LoginPage/LoginPage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-router-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; setAuthToken &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; login, getMe &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../WebApi&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; AuthContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../contexts&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 400px;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 10px auto;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 10px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> UserName = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  margin-bottom: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  input &#123;</span></span><br><span class=\"line\"><span class=\"string\">    width: 320px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> Password = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  margin-bottom: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  input &#123;</span></span><br><span class=\"line\"><span class=\"string\">    width: 320px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ErrorMessage = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LoginPage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;setUser&#125; = useContext(AuthContext);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [username, setUsername] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [password, setPassword] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [errorMessage, setErrorMessage] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory(); </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSubmit = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    login(username, password).then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.ok === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> setErrorMessage(data.message);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      setAuthToken(data.token);</span><br><span class=\"line\">      setErrorMessage(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      getMe().then(<span class=\"function\"><span class=\"params\">resp</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (resp.ok !==<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">          setAuthToken(<span class=\"literal\">null</span>);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> setErrorMessage(resp.toString());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        setUser(resp.data);</span><br><span class=\"line\">        history.push(<span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &lt;form onSubmit=&#123;handleSubmit&#125;&gt;</span><br><span class=\"line\">        &lt;UserName&gt;</span><br><span class=\"line\">          username: <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&#123;username&#125;</span> <span class=\"attr\">onChange</span>=<span class=\"string\">&#123;</span> <span class=\"attr\">e</span> =&gt;</span> setUsername(e.target.value)&#125; /&gt;</span></span><br><span class=\"line\">        &lt;/UserName&gt;</span><br><span class=\"line\">        &lt;Password&gt;</span><br><span class=\"line\">          password: <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&#123;password&#125;</span> <span class=\"attr\">onChange</span>=<span class=\"string\">&#123;</span> <span class=\"attr\">e</span> =&gt;</span> setPassword(e.target.value)&#125; /&gt;</span></span><br><span class=\"line\">        &lt;/Password&gt;</span><br><span class=\"line\">        &lt;button type=<span class=\"string\">&quot;submit&quot;</span>&gt;登入&lt;/button&gt;</span><br><span class=\"line\">        &#123; errorMessage &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>&#123;errorMessage&#125;<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/LoginPage/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./LoginPage&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"報名表單\"><a href=\"#報名表單\" class=\"headerlink\" title=\"報名表單\"></a>報名表單</h3><h4 id=\"App-css\"><a href=\"#App-css\" class=\"headerlink\" title=\"./App.css\"></a>./App.css</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#b2b2b2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"App-js\"><a href=\"#App-js\" class=\"headerlink\" title=\"./App.js\"></a>./App.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./App.css&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 645px;</span></span><br><span class=\"line\"><span class=\"string\">  border-top: 5px solid #fad312;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 10px auto;</span></span><br><span class=\"line\"><span class=\"string\">  background: #fff;</span></span><br><span class=\"line\"><span class=\"string\">  padding: 50px 32px;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  .h1 &#123;</span></span><br><span class=\"line\"><span class=\"string\">    font-size: 36px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  .input-middle-note &#123;</span></span><br><span class=\"line\"><span class=\"string\">    font-size: 14px;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 20px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  .input-note &#123;</span></span><br><span class=\"line\"><span class=\"string\">    font-size: 14px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  .input-label &#123;</span></span><br><span class=\"line\"><span class=\"string\">    font-size: 20px;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 50px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  .input-middle &#123;</span></span><br><span class=\"line\"><span class=\"string\">    font-size: 18px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  button &#123;</span></span><br><span class=\"line\"><span class=\"string\">    font-size: 16px;</span></span><br><span class=\"line\"><span class=\"string\">    background: #fad312;</span></span><br><span class=\"line\"><span class=\"string\">    border-width: 0;</span></span><br><span class=\"line\"><span class=\"string\">    padding: 12px 32px;</span></span><br><span class=\"line\"><span class=\"string\">    cursor: pointer;</span></span><br><span class=\"line\"><span class=\"string\">    margin: 30px 0 20px 0;</span></span><br><span class=\"line\"><span class=\"string\">    border-radius: 5px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  input &#123;</span></span><br><span class=\"line\"><span class=\"string\">    padding: 8px;</span></span><br><span class=\"line\"><span class=\"string\">    margin-top: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  .required::after &#123;</span></span><br><span class=\"line\"><span class=\"string\">    position: relative;</span></span><br><span class=\"line\"><span class=\"string\">    top: 2px;</span></span><br><span class=\"line\"><span class=\"string\">    left: 2px;</span></span><br><span class=\"line\"><span class=\"string\">    content: &quot;*&quot;;</span></span><br><span class=\"line\"><span class=\"string\">    color: red;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ErrorMessage = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [submit, setSumbit] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [name, setName] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [email, setEmail] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [phone, setPhone] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [submitMode, setSubmitMode] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [how, setHow] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [suggest, setSuggest] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(name, email, phone, submitMode, how, suggest);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> submitString = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (submitMode === <span class=\"string\">&quot;bed&quot;</span>) &#123;</span><br><span class=\"line\">      submitString = <span class=\"string\">&quot;躺在床上用想像力實作&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (submitMode === <span class=\"string\">&quot;mobile&quot;</span>) &#123;</span><br><span class=\"line\">      submitString = <span class=\"string\">&quot;趴在地上滑手機找現成的&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    setSumbit(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!name || !email || !phone || !submitMode) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> report =</span><br><span class=\"line\">      <span class=\"string\">`暱稱 : <span class=\"subst\">$&#123;name&#125;</span>\\n`</span> +</span><br><span class=\"line\">      <span class=\"string\">`電子郵件 : <span class=\"subst\">$&#123;email&#125;</span>\\n`</span> +</span><br><span class=\"line\">      <span class=\"string\">`手機號碼 : <span class=\"subst\">$&#123;phone&#125;</span>\\n`</span> +</span><br><span class=\"line\">      <span class=\"string\">`報名類型 : <span class=\"subst\">$&#123;submitString&#125;</span>\\n`</span> +</span><br><span class=\"line\">      <span class=\"string\">`來源 :  <span class=\"subst\">$&#123;how&#125;</span>\\n`</span> +</span><br><span class=\"line\">      <span class=\"string\">`建議 :  <span class=\"subst\">$&#123;suggest&#125;</span>`</span>;</span><br><span class=\"line\">    alert(report);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">window</span>.location.reload();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &lt;form onSubmit=&#123;handleSubmit&#125;&gt;</span><br><span class=\"line\">        &lt;h1&gt;新拖延運動報名表單&lt;/h1&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-note&quot;</span>&gt;活動日期：<span class=\"number\">2020</span>/<span class=\"number\">12</span>/<span class=\"number\">10</span> ~ <span class=\"number\">2020</span>/<span class=\"number\">12</span>/<span class=\"number\">11</span>&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-note&quot;</span>&gt;活動地點：台北市大安區新生南路二段<span class=\"number\">1</span>號&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-middle-note&quot;</span>&gt;* 必填&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-label required&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label htmlFor=<span class=\"string\">&quot;&quot;</span>&gt;暱稱&lt;/label&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          name=<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">          value=&#123;name&#125;</span><br><span class=\"line\">          onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setName(e.target.value)&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &#123;!name &amp;&amp; submit &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>不可為空白!<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-label required&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label htmlFor=<span class=\"string\">&quot;&quot;</span>&gt;電子郵件&lt;/label&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          type=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">          name=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">          value=&#123;email&#125;</span><br><span class=\"line\">          onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setEmail(e.target.value)&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &#123;!email &amp;&amp; submit &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>不可為空白!<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-label  required&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label htmlFor=<span class=\"string\">&quot;&quot;</span>&gt;手機號碼&lt;/label&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          type=<span class=\"string\">&quot;tel&quot;</span></span><br><span class=\"line\">          nampe=<span class=\"string\">&quot;phone&quot;</span></span><br><span class=\"line\">          value=&#123;phone&#125;</span><br><span class=\"line\">          onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setPhone(e.target.value)&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &#123;!phone &amp;&amp; submit &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>不可為空白!<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-label required&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label htmlFor=<span class=\"string\">&quot;&quot;</span>&gt;報名類型&lt;/label&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              className=<span class=\"string\">&quot;input-middle&quot;</span></span><br><span class=\"line\">              type=<span class=\"string\">&quot;radio&quot;</span></span><br><span class=\"line\">              name=<span class=\"string\">&quot;submit-mode&quot;</span></span><br><span class=\"line\">              value=<span class=\"string\">&quot;bed&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setSubmitMode(e.target.value)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            躺在床上用想像力實作</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              className=<span class=\"string\">&quot;input-middle&quot;</span></span><br><span class=\"line\">              type=<span class=\"string\">&quot;radio&quot;</span></span><br><span class=\"line\">              name=<span class=\"string\">&quot;submit-mode&quot;</span></span><br><span class=\"line\">              value=<span class=\"string\">&quot;mobile&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setSubmitMode(e.target.value)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            趴在地上滑手機找現成的</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &#123;!submitMode &amp;&amp; submit &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>不可不選!<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-label&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label htmlFor=<span class=\"string\">&quot;&quot;</span>&gt;怎麼知道這個活動的？ &lt;/label&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          name=<span class=\"string\">&quot;how&quot;</span></span><br><span class=\"line\">          value=&#123;how&#125;</span><br><span class=\"line\">          onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setHow(e.target.value)&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-label&quot;</span>&gt;其他&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;input-note&quot;</span>&gt;對活動的一些建議&lt;/div&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          name=<span class=\"string\">&quot;suggest&quot;</span></span><br><span class=\"line\">          value=&#123;suggest&#125;</span><br><span class=\"line\">          onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setSuggest(e.target.value)&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;button type=<span class=\"string\">&quot;submit&quot;</span>&gt;提交&lt;/button&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;input-note&quot;</span>&gt;請勿透過表單送出您的密碼。&lt;/div&gt;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"五子棋\"><a href=\"#五子棋\" class=\"headerlink\" title=\"五子棋\"></a>五子棋</h3><h4 id=\"App-js-1\"><a href=\"#App-js-1\" class=\"headerlink\" title=\"./App.js\"></a>./App.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> PropTypes <span class=\"keyword\">from</span> <span class=\"string\">&quot;prop-types&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Board <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Board&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Game = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  background: #f9cc9d;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> SequareContentB = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  height: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  background: black;</span></span><br><span class=\"line\"><span class=\"string\">  border-radius: 50%;</span></span><br><span class=\"line\"><span class=\"string\">  box-sizing: border-box;</span></span><br><span class=\"line\"><span class=\"string\">  position: relative;</span></span><br><span class=\"line\"><span class=\"string\">  left: 1px;</span></span><br><span class=\"line\"><span class=\"string\">  top: 1px;</span></span><br><span class=\"line\"><span class=\"string\">  margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  margin-top: 5px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> SequareContentW = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  height: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  background: white;</span></span><br><span class=\"line\"><span class=\"string\">  // border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\">  border-radius: 50%;</span></span><br><span class=\"line\"><span class=\"string\">  box-sizing: border-box;</span></span><br><span class=\"line\"><span class=\"string\">  position: relative;</span></span><br><span class=\"line\"><span class=\"string\">  left: 1px;</span></span><br><span class=\"line\"><span class=\"string\">  top: 1px;</span></span><br><span class=\"line\"><span class=\"string\">  margin-left: 10px;</span></span><br><span class=\"line\"><span class=\"string\">  margin-top: 5px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> StatusLine = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  height: 40px;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: center;</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 30px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Status</span>(<span class=\"params\">&#123; blackNext, winner &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> status;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!winner) &#123;</span><br><span class=\"line\">    status = <span class=\"string\">&quot;Next player:&quot;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    status = <span class=\"string\">&quot;Winner:&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;StatusLine&gt;</span><br><span class=\"line\">      &#123;status&#125;</span><br><span class=\"line\">      &#123;blackNext &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">SequareContentB</span> /&gt;</span></span>&#125;</span><br><span class=\"line\">      &#123;!blackNext &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">SequareContentW</span> /&gt;</span></span>&#125;</span><br><span class=\"line\">    &lt;/StatusLine&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Status.propTypes = &#123;</span><br><span class=\"line\">  blackNext: PropTypes.bool,</span><br><span class=\"line\">  winner: PropTypes.bool,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Next player: X</span></span><br><span class=\"line\"><span class=\"comment\">// Winner: X</span></span><br><span class=\"line\"><span class=\"comment\">// Draw</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [squares, setSquares] = useState(<span class=\"built_in\">Array</span>(<span class=\"number\">19</span> * <span class=\"number\">19</span>).fill(<span class=\"literal\">null</span>));</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [blackNext, setBlackNext] = useState(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [winner, setWinner] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;app..&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(squares);</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (squares[<span class=\"number\">0</span>] !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (squares[<span class=\"number\">0</span>] === <span class=\"string\">&quot;b&quot;</span>) &#123;</span><br><span class=\"line\">        setBlackNext(<span class=\"literal\">true</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setBlackNext(<span class=\"literal\">false</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      setWinner(<span class=\"literal\">true</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Winner...&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [squares]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Game&gt;</span><br><span class=\"line\">      &lt;Status blackNext=&#123;blackNext&#125; winner=&#123;winner&#125;&gt;&lt;/Status&gt;</span><br><span class=\"line\">      &lt;Board</span><br><span class=\"line\">        squares=&#123;squares&#125;</span><br><span class=\"line\">        setSquares=&#123;setSquares&#125;</span><br><span class=\"line\">        blackNext=&#123;blackNext&#125;</span><br><span class=\"line\">        setBlackNext=&#123;setBlackNext&#125;</span><br><span class=\"line\">        setWinner=&#123;setWinner&#125;</span><br><span class=\"line\">        winner=&#123;winner&#125;</span><br><span class=\"line\">      &gt;&lt;/Board&gt;</span><br><span class=\"line\">    &lt;/Game&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Board-js\"><a href=\"#Board-js\" class=\"headerlink\" title=\"./Board.js\"></a>./Board.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> PropTypes <span class=\"keyword\">from</span> <span class=\"string\">&quot;prop-types&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> MAX_BOARD_WIDTH = <span class=\"number\">19</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> MIN_POSITION = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> MAX_POSITION = <span class=\"number\">18</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> WIN_COUNT = <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  display: flex;</span></span><br><span class=\"line\"><span class=\"string\">  width: 610px;</span></span><br><span class=\"line\"><span class=\"string\">  justify-content: start;</span></span><br><span class=\"line\"><span class=\"string\">  flex-wrap: wrap;</span></span><br><span class=\"line\"><span class=\"string\">  box-sizing: border-box;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> SquareBlock = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  border: 1px solid black;</span></span><br><span class=\"line\"><span class=\"string\">  width: 32px;</span></span><br><span class=\"line\"><span class=\"string\">  height: 32px;</span></span><br><span class=\"line\"><span class=\"string\">  display: block;</span></span><br><span class=\"line\"><span class=\"string\">  box-sizing: border-box;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> SequareContentB = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  height: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  background: black;</span></span><br><span class=\"line\"><span class=\"string\">  border-radius: 50%;</span></span><br><span class=\"line\"><span class=\"string\">  box-sizing: border-box;</span></span><br><span class=\"line\"><span class=\"string\">  position: relative;</span></span><br><span class=\"line\"><span class=\"string\">  left: 1px;</span></span><br><span class=\"line\"><span class=\"string\">  top: 1px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> SequareContentW = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  height: 26px;</span></span><br><span class=\"line\"><span class=\"string\">  background: white;</span></span><br><span class=\"line\"><span class=\"string\">  border-radius: 50%;</span></span><br><span class=\"line\"><span class=\"string\">  box-sizing: border-box;</span></span><br><span class=\"line\"><span class=\"string\">  position: relative;</span></span><br><span class=\"line\"><span class=\"string\">  left: 1px;</span></span><br><span class=\"line\"><span class=\"string\">  top: 1px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Square</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  index,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  squares,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  setSquares,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  blackNext,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  setBlackNext,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  setWinner,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  winner,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> winCount = <span class=\"function\">(<span class=\"params\">x, y, square, ox, oy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> count = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(`($&#123;x&#125;,$&#123;y&#125;) : $&#123;square&#125;`);</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> tempX = x + i * ox;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> tempY = y + i * oy;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (</span><br><span class=\"line\">        tempX &lt; MIN_POSITION ||</span><br><span class=\"line\">        tempX &gt; MAX_POSITION ||</span><br><span class=\"line\">        tempY &lt; MIN_POSITION ||</span><br><span class=\"line\">        tempY &gt; MAX_POSITION</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (squares[tempX + tempY * MAX_BOARD_WIDTH] === square) &#123;</span><br><span class=\"line\">        count = count + <span class=\"number\">1</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(`($&#123;tempX&#125;,$&#123;tempY&#125;)`, tempX + tempY * MAX_BOARD_WIDTH);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> tempX = x + i * -ox;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> tempY = y + i * -oy;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (</span><br><span class=\"line\">        tempX &lt; MIN_POSITION ||</span><br><span class=\"line\">        tempX &gt; MAX_POSITION ||</span><br><span class=\"line\">        tempY &lt; MIN_POSITION ||</span><br><span class=\"line\">        tempY &gt; MAX_POSITION</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (squares[tempX + tempY * MAX_BOARD_WIDTH] === square) &#123;</span><br><span class=\"line\">        count = count + <span class=\"number\">1</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(`($&#123;tempX&#125;,$&#123;tempY&#125;)`, tempX + tempY * MAX_BOARD_WIDTH);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> count;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> win = <span class=\"function\">(<span class=\"params\">x, y, square</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> count1 = winCount(x, y, square, <span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> count2 = winCount(x, y, square, <span class=\"number\">0</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> count3 = winCount(x, y, square, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> count4 = winCount(x, y, square, <span class=\"number\">1</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`(<span class=\"subst\">$&#123;x&#125;</span>,<span class=\"subst\">$&#123;y&#125;</span>) : <span class=\"subst\">$&#123;square&#125;</span>`</span>, count1, count2, count3, count4);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      count1 &gt;= WIN_COUNT ||</span><br><span class=\"line\">      count2 &gt;= WIN_COUNT ||</span><br><span class=\"line\">      count3 &gt;= WIN_COUNT ||</span><br><span class=\"line\">      count4 &gt;= WIN_COUNT</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// console.log(`($&#123;x&#125;,$&#123;y&#125;) : $&#123;square&#125;`);</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x + i&#125;,$&#123;y&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x - i&#125;,$&#123;y&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;-----&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x&#125;,$&#123;y + i&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x&#125;,$&#123;y - i&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;-----&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x + i&#125;,$&#123;y + i&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x - i&#125;,$&#123;y - i&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;-----&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x + i&#125;,$&#123;y - i&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// for (let i = 0; i &lt; 5; i++) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   console.log(`($&#123;x - i&#125;,$&#123;y + i&#125;)`);</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;-----&quot;);</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (squares[index] !== <span class=\"literal\">null</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (winner) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> x = index % MAX_BOARD_WIDTH;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> y = <span class=\"built_in\">Math</span>.floor(index / MAX_BOARD_WIDTH);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> player = blackNext ? <span class=\"string\">&quot;b&quot;</span> : <span class=\"string\">&quot;w&quot;</span>;</span><br><span class=\"line\">    setSquares(</span><br><span class=\"line\">      squares.map(<span class=\"function\">(<span class=\"params\">item, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i !== index) <span class=\"keyword\">return</span> item;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> player;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    );</span><br><span class=\"line\">    setBlackNext(!blackNext);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (win(x, y, player)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (player === <span class=\"string\">&quot;b&quot;</span>) &#123;</span><br><span class=\"line\">        setBlackNext(<span class=\"literal\">true</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setBlackNext(<span class=\"literal\">false</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      setWinner(<span class=\"literal\">true</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Winner...&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;SquareBlock onClick=&#123;handleClick&#125;&gt;</span><br><span class=\"line\">      &#123;squares[index] === <span class=\"string\">&quot;b&quot;</span> &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">SequareContentB</span> /&gt;</span></span>&#125;</span><br><span class=\"line\">      &#123;squares[index] === <span class=\"string\">&quot;w&quot;</span> &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">SequareContentW</span> /&gt;</span></span>&#125;</span><br><span class=\"line\">    &lt;/SquareBlock&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Square.propTypes = &#123;</span><br><span class=\"line\">  index: PropTypes.number,</span><br><span class=\"line\">  squares: PropTypes.array,</span><br><span class=\"line\">  setSquares: PropTypes.func,</span><br><span class=\"line\">  blackNext: PropTypes.bool,</span><br><span class=\"line\">  setBlackNext: PropTypes.func,</span><br><span class=\"line\">  setWinner: PropTypes.func,</span><br><span class=\"line\">  winner: PropTypes.bool,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Board</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  squares,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  setSquares,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  blackNext,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  setBlackNext,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  setWinner,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  winner,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &#123;squares.map(<span class=\"function\">(<span class=\"params\">point, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (</span><br><span class=\"line\">          &lt;Square</span><br><span class=\"line\">            key=&#123;index&#125;</span><br><span class=\"line\">            index=&#123;index&#125;</span><br><span class=\"line\">            squares=&#123;squares&#125;</span><br><span class=\"line\">            setSquares=&#123;setSquares&#125;</span><br><span class=\"line\">            blackNext=&#123;blackNext&#125;</span><br><span class=\"line\">            setBlackNext=&#123;setBlackNext&#125;</span><br><span class=\"line\">            setWinner=&#123;setWinner&#125;</span><br><span class=\"line\">            winner=&#123;winner&#125;</span><br><span class=\"line\">          &gt;&lt;/Square&gt;</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;)&#125;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Board.propTypes = &#123;</span><br><span class=\"line\">  squares: PropTypes.array,</span><br><span class=\"line\">  setSquares: PropTypes.func,</span><br><span class=\"line\">  blackNext: PropTypes.bool,</span><br><span class=\"line\">  setBlackNext: PropTypes.func,</span><br><span class=\"line\">  setWinner: PropTypes.func,</span><br><span class=\"line\">  winner: PropTypes.bool,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["Framework"],"tags":["react"]},{"title":"React Issue","url":"/2021/09/17/react-3/","content":"<h3 id=\"use-useLocation-found-error-“TypeError-Cannot-read-properties-of-undefined-reading-‘location’-”\"><a href=\"#use-useLocation-found-error-“TypeError-Cannot-read-properties-of-undefined-reading-‘location’-”\" class=\"headerlink\" title=\"use useLocation found error “TypeError: Cannot read properties of undefined (reading ‘location’)”\"></a>use useLocation found error “TypeError: Cannot read properties of undefined (reading ‘location’)”</h3><p>use useLocation doesn’t put same component as Router</p>\n<span id=\"more\"></span>\n\n<h4 id=\"issue-code\"><a href=\"#issue-code\" class=\"headerlink\" title=\"issue code\"></a>issue code</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./components/App&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t&lt;App /&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HomePage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/HomePage&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> LoginPage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/LoginPage&quot;</span>; </span><br><span class=\"line\"><span class=\"keyword\">import</span> Header <span class=\"keyword\">from</span> <span class=\"string\">&quot;../Header&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// BrowserRouter as Router,</span></span><br><span class=\"line\">  <span class=\"comment\">// for SPA</span></span><br><span class=\"line\">  HashRouter <span class=\"keyword\">as</span> Router,</span><br><span class=\"line\">  Switch,</span><br><span class=\"line\">  useLocation,</span><br><span class=\"line\">  Route,</span><br><span class=\"line\">  <span class=\"comment\">// useLocation</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root =  styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding-top: 64px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> location = useLocation();</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(location);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &lt;Router&gt;</span><br><span class=\"line\">        &lt;Header /&gt;</span><br><span class=\"line\">          &lt;Switch&gt;</span><br><span class=\"line\">            &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">              &lt;HomePage /&gt;</span><br><span class=\"line\">            &lt;/Route&gt;</span><br><span class=\"line\">            &lt;Route path=<span class=\"string\">&quot;/login&quot;</span>&gt;</span><br><span class=\"line\">              &lt;LoginPage /&gt;</span><br><span class=\"line\">            &lt;/Route&gt;</span><br><span class=\"line\">          &lt;/Switch&gt;</span><br><span class=\"line\">      &lt;/Router&gt;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"fixed-code\"><a href=\"#fixed-code\" class=\"headerlink\" title=\"fixed code\"></a>fixed code</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./components/App&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// BrowserRouter as Router,</span></span><br><span class=\"line\">  <span class=\"comment\">// for SPA</span></span><br><span class=\"line\">  HashRouter <span class=\"keyword\">as</span> Router,</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">\t&lt;Router&gt;</span><br><span class=\"line\">\t\t&lt;App /&gt;</span><br><span class=\"line\">\t&lt;/Router&gt;</span><br><span class=\"line\">\t,</span><br><span class=\"line\">\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./component/App/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HomePage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/HomePage&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> LoginPage <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../Pages/LoginPage&quot;</span>; </span><br><span class=\"line\"><span class=\"keyword\">import</span> Header <span class=\"keyword\">from</span> <span class=\"string\">&quot;../Header&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&#x27;styled-components&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  Switch,</span><br><span class=\"line\">  useLocation,</span><br><span class=\"line\">  Route,</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root =  styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding-top: 64px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> location = useLocation();</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(location.pathname);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">    \t&lt;Header /&gt;</span><br><span class=\"line\">      &lt;Switch&gt;</span><br><span class=\"line\">        &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">          &lt;HomePage /&gt;</span><br><span class=\"line\">        &lt;/Route&gt;</span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">&quot;/login&quot;</span>&gt;</span><br><span class=\"line\">          &lt;LoginPage /&gt;</span><br><span class=\"line\">        &lt;/Route&gt;</span><br><span class=\"line\">      &lt;/Switch&gt;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":["Framework"],"tags":["issue","react"]},{"title":"Redux","url":"/2021/09/23/react-4/","content":"<h3 id=\"名詞\"><a href=\"#名詞\" class=\"headerlink\" title=\"名詞\"></a>名詞</h3><span id=\"more\"></span>\n\n<h3 id=\"常用-list\"><a href=\"#常用-list\" class=\"headerlink\" title=\"常用 list\"></a>常用 list</h3><ul>\n<li>createStore : 產生 store</li>\n<li>useSelector : Redux store 中的狀態提取數據</li>\n<li>useDispatch : 回傳一個 dispatch 方法, 產生 action</li>\n<li>Provider : 讓整個react applicaiton都能取得Redux store的資料</li>\n<li>combineReducers : 由多個不同 reducer 函數作為 value 的 object，合併成一個最終的 reducer 函數，然後就可以對這個 reducer 調用 createStore</li>\n<li>connect : 將傳入 components 的 states 和 actions 進行篩選或初步處理</li>\n</ul>\n<h3 id=\"基礎\"><a href=\"#基礎\" class=\"headerlink\" title=\"基礎\"></a>基礎</h3><h4 id=\"Redux-基本操作\"><a href=\"#Redux-基本操作\" class=\"headerlink\" title=\"Redux 基本操作\"></a>Redux 基本操作</h4><h5 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir plain-redux</span><br><span class=\"line\">cd plain-redux</span><br><span class=\"line\">npm init</span><br><span class=\"line\">npm install redux</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Data-Flow\"><a href=\"#Data-Flow\" class=\"headerlink\" title=\"Data Flow\"></a>Data Flow</h5><div style=\"width:500px;\">\n    <img src=\"/2021/09/23/react-4/ReduxDataFlowDiagram-49fa8c3968371d9ef6f2a1486bd40a26.gif\" class=\"\">\n</div>\n\n<h5 id=\"example-1-simple-flow\"><a href=\"#example-1-simple-flow\" class=\"headerlink\" title=\"example #1 - simple flow\"></a>example #1 - simple flow</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// node.js not simple support import</span></span><br><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; createStore &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  value: <span class=\"number\">0</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// #2 initiation store state, accept dispatch by type</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">counterReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;reciver action&quot;</span>, action);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;plus&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        value: state.value + <span class=\"number\">1</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;milus&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        value: state.value - <span class=\"number\">1</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// #1 產生 store </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(counterReducer);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// #3 get state</span></span><br><span class=\"line\"><span class=\"comment\">// console.log(store);</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot; first state:&quot;</span>, store.getState());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// #4 trigger by dispatch</span></span><br><span class=\"line\">store.dispatch(&#123;</span><br><span class=\"line\">  type: <span class=\"string\">&quot;plus&quot;</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">store.dispatch(&#123;</span><br><span class=\"line\">  type: <span class=\"string\">&quot;plus&quot;</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// #5 get state</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot; second state:&quot;</span>, store.getState());</span><br><span class=\"line\"></span><br><span class=\"line\">store.dispatch(&#123;</span><br><span class=\"line\">  type: <span class=\"string\">&quot;milus&quot;</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// srtore get state</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot; third state:&quot;</span>, store.getState());</span><br></pre></td></tr></table></figure>\n\n<p>run</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">plain-redux&gt;node app.js</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;@@redux/INITg.f.3.1.7&#x27;</span> &#125;</span><br><span class=\"line\"> first state: &#123; value: 0 &#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;plus&#x27;</span> &#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;plus&#x27;</span> &#125;</span><br><span class=\"line\"> second state: &#123; value: 2 &#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;milus&#x27;</span> &#125;</span><br><span class=\"line\"> third state: &#123; value: 1 &#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-2-todos-create-and-delete\"><a href=\"#example-2-todos-create-and-delete\" class=\"headerlink\" title=\"example #2 - todos create and delete\"></a>example #2 - todos create and delete</h5><ul>\n<li>store subscribe</li>\n<li>process state additional data</li>\n<li>action constants</li>\n<li>action creator</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// node.js not simple support import</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; createStore &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// action constants</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ActionTypes = &#123;</span><br><span class=\"line\">  ADD_TDDO: <span class=\"string\">&quot;add_toto&quot;</span>,</span><br><span class=\"line\">  DELETE_TODO: <span class=\"string\">&quot;delete_todo&quot;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  email: <span class=\"string\">&quot;12345&quot;</span>,</span><br><span class=\"line\">  todos: [],</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add id</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> todoId = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">counterReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;reciver action&quot;</span>, action);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ActionTypes.ADD_TDDO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// process state additional data</span></span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        todos: [</span><br><span class=\"line\">          ...state.todos,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"comment\">// add id</span></span><br><span class=\"line\">            id: todoId++,</span><br><span class=\"line\">            name: action.payload.name,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"comment\">// delete todo</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> ActionTypes.DELETE_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        todos: state.todos.filter(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> todo.id !== action.payload.id),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(counterReducer);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add store subscribe</span></span><br><span class=\"line\">store.subscribe(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot; changed : &quot;</span>, store.getState());</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// action creator</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ActionTypes.ADD_TDDO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name: name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deleteTodo</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ActionTypes.DELETE_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      id: id,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add tdod</span></span><br><span class=\"line\">store.dispatch(addTodo(<span class=\"string\">&quot;todo0&quot;</span>));</span><br><span class=\"line\">store.dispatch(addTodo(<span class=\"string\">&quot;todo1&quot;</span>));</span><br><span class=\"line\">store.dispatch(addTodo(<span class=\"string\">&quot;todo2&quot;</span>));</span><br><span class=\"line\">store.dispatch(addTodo(<span class=\"string\">&quot;todo3&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// delete todo</span></span><br><span class=\"line\">store.dispatch(deleteTodo(<span class=\"number\">2</span>));</span><br></pre></td></tr></table></figure>\n\n<p>run</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt;node app.js</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;@@redux/INIT1.n.3.f.v.b&#x27;</span> &#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;add_toto&#x27;</span>, payload: &#123; name: <span class=\"string\">&#x27;todo0&#x27;</span> &#125; &#125;</span><br><span class=\"line\"> changed :  &#123; email: <span class=\"string\">&#x27;12345&#x27;</span>, todos: [ &#123; id: 0, name: <span class=\"string\">&#x27;todo0&#x27;</span> &#125; ] &#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;add_toto&#x27;</span>, payload: &#123; name: <span class=\"string\">&#x27;todo1&#x27;</span> &#125; &#125;</span><br><span class=\"line\"> changed :  &#123;</span><br><span class=\"line\">  email: <span class=\"string\">&#x27;12345&#x27;</span>,</span><br><span class=\"line\">  todos: [ &#123; id: 0, name: <span class=\"string\">&#x27;todo0&#x27;</span> &#125;, &#123; id: 1, name: <span class=\"string\">&#x27;todo1&#x27;</span> &#125; ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;add_toto&#x27;</span>, payload: &#123; name: <span class=\"string\">&#x27;todo2&#x27;</span> &#125; &#125;</span><br><span class=\"line\"> changed :  &#123;</span><br><span class=\"line\">  email: <span class=\"string\">&#x27;12345&#x27;</span>,</span><br><span class=\"line\">  todos: [</span><br><span class=\"line\">    &#123; id: 0, name: <span class=\"string\">&#x27;todo0&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; id: 1, name: <span class=\"string\">&#x27;todo1&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; id: 2, name: <span class=\"string\">&#x27;todo2&#x27;</span> &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;add_toto&#x27;</span>, payload: &#123; name: <span class=\"string\">&#x27;todo3&#x27;</span> &#125; &#125;</span><br><span class=\"line\"> changed :  &#123;</span><br><span class=\"line\">  email: <span class=\"string\">&#x27;12345&#x27;</span>,</span><br><span class=\"line\">  todos: [</span><br><span class=\"line\">    &#123; id: 0, name: <span class=\"string\">&#x27;todo0&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; id: 1, name: <span class=\"string\">&#x27;todo1&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; id: 2, name: <span class=\"string\">&#x27;todo2&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; id: 3, name: <span class=\"string\">&#x27;todo3&#x27;</span> &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">reciver action &#123; <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;delete_todo&#x27;</span>, payload: &#123; id: 2 &#125; &#125;</span><br><span class=\"line\"> changed :  &#123;</span><br><span class=\"line\">  email: <span class=\"string\">&#x27;12345&#x27;</span>,</span><br><span class=\"line\">  todos: [</span><br><span class=\"line\">    &#123; id: 0, name: <span class=\"string\">&#x27;todo0&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; id: 1, name: <span class=\"string\">&#x27;todo1&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; id: 3, name: <span class=\"string\">&#x27;todo3&#x27;</span> &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"react-redux\"><a href=\"#react-redux\" class=\"headerlink\" title=\"react-redux\"></a>react-redux</h4><h5 id=\"install-1\"><a href=\"#install-1\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npx create-react-app react-dedux-demo --template redux</span><br><span class=\"line\"><span class=\"built_in\">cd</span> react-dedux-demo</span><br><span class=\"line\"><span class=\"comment\"># 已安裝</span></span><br><span class=\"line\"><span class=\"comment\"># npm install react-redux</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-1-todos\"><a href=\"#example-1-todos\" class=\"headerlink\" title=\"example #1 - todos\"></a>example #1 - todos</h5><h6 id=\"src\"><a href=\"#src\" class=\"headerlink\" title=\"./src\"></a>./src</h6><ul>\n<li><p>./src/index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #2 store patch</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; store &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/store&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  <span class=\"comment\">// step #1 Provider 綁定,使整個react applicaiton都能取得 store</span></span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectTodos &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/selectors&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector, useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/actions&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> state = useSelector(<span class=\"function\">(<span class=\"params\">state</span>) =&gt;</span> state);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;state:&quot;</span>, state);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// step #7 useSelector 取得 store 內的植</span></span><br><span class=\"line\">  <span class=\"comment\">// todos = useSelector((store) =&gt; store.todoState.todos)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> todos = useSelector(selectTodos);</span><br><span class=\"line\">  <span class=\"comment\">// step #9 useDispatch 可 trigger action</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch();</span><br><span class=\"line\">  <span class=\"comment\">// step #32 若已執行修改後會顯示,但直接執行(或重整畫面)則不會顯示 ???</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;todos&quot;</span>, todos);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button</span><br><span class=\"line\">        <span class=\"comment\">// step #11 dispatch 呼叫 action creator, 產生 action</span></span><br><span class=\"line\">        onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          dispatch(addTodo(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        add todo</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;ul&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* step #12 show todos */</span>&#125;</span><br><span class=\"line\">        &#123;todos.map(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;li key=&#123;todo.id&#125;&gt;</span><br><span class=\"line\">            &#123;todo.id&#125; &#123;todo.name&#125;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h6 id=\"src-redux\"><a href=\"#src-redux\" class=\"headerlink\" title=\"./src/redux\"></a>./src/redux</h6><ul>\n<li><p>./src/redux/actionTypes.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actionTypes.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_TODO = <span class=\"string\">&quot;add_todo&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> DELETE_TODO = <span class=\"string\">&quot;delete_todo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_USER = <span class=\"string\">&quot;add_user&quot;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actions.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_TODO, DELETE_TODO, ADD_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #10 做成 action creator(function) 方便使用</span></span><br><span class=\"line\"><span class=\"comment\">// action creator</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name: name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deleteTodo</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: DELETE_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      id: id,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addUser</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_USER,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/store.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/store.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> rootReducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #3 產生 store(from ./reducers )</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  rootReducer,</span><br><span class=\"line\">  <span class=\"comment\">// step #31 add for redux devtool</span></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/selectors.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/selectors.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #8 selectot 另開成檔案</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> selectTodos = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> store.todoState.todos;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h6 id=\"src-redux-reducers\"><a href=\"#src-redux-reducers\" class=\"headerlink\" title=\"./src/redux/reducers\"></a>./src/redux/reducers</h6><ul>\n<li><p>./src/redux/reducers/index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> todos <span class=\"keyword\">from</span> <span class=\"string\">&quot;./todos&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> users <span class=\"keyword\">from</span> <span class=\"string\">&quot;./users&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #4 combineReducers 可包含 多個 reducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> combineReducers(&#123;</span><br><span class=\"line\">  todoState: todos, <span class=\"comment\">//todos: todos</span></span><br><span class=\"line\">  users, <span class=\"comment\">//users: users</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/reducers/todos.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/todos.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_TODO, DELETE_TODO &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> todoId = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  todos: [],</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #5 todosReducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todosReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;reciver action(todos)&quot;</span>, action);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// process state additional data</span></span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        todos: [</span><br><span class=\"line\">          ...state.todos,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"comment\">// add id</span></span><br><span class=\"line\">            id: todoId++,</span><br><span class=\"line\">            name: action.payload.name,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"comment\">// delete todo</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> DELETE_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        todos: state.todos.filter(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> todo.id !== action.payload.id),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/reducers/users.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/users.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  users: [],</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #6 usersReducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">usersReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;reciver action(users)&quot;</span>, action);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_USER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// process state additional data</span></span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        users: [</span><br><span class=\"line\">          ...state.users,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: action.payload.name,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"example-2-button-create-component\"><a href=\"#example-2-button-create-component\" class=\"headerlink\" title=\"example #2 - button create component\"></a>example #2 - button create component</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectTodos &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/selectors&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddTodo <span class=\"keyword\">from</span> <span class=\"string\">&quot;./AddTodo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> todos = useSelector(selectTodos);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;todos&quot;</span>, todos);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;AddTodo /&gt;</span><br><span class=\"line\">      &lt;ul&gt;</span><br><span class=\"line\">        &#123;todos.map(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;li key=&#123;todo.id&#125;&gt;</span><br><span class=\"line\">            &#123;todo.id&#125; &#123;todo.name&#125;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AddTodo.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/actions&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AddTodo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;button</span><br><span class=\"line\">      onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        dispatch(addTodo(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">      &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      add todo</span><br><span class=\"line\">    &lt;/button&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"example-3-use-connect-無-hook-前使用的方法\"><a href=\"#example-3-use-connect-無-hook-前使用的方法\" class=\"headerlink\" title=\"example #3 - use connect(無 hook 前使用的方法)\"></a>example #3 - use connect(無 hook 前使用的方法)</h5><h6 id=\"src-1\"><a href=\"#src-1\" class=\"headerlink\" title=\"./src\"></a>./src</h6><ul>\n<li><p>./src/index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #2 store patch</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; store &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/store&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  <span class=\"comment\">// step #1 Provider 綁定,使整個react applicaiton都能取得 store</span></span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectTodos &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/selectors&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddTodo <span class=\"keyword\">from</span> <span class=\"string\">&quot;./containers/AddTodo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// step #7 useSelector 取得 store 內的植</span></span><br><span class=\"line\">  <span class=\"comment\">// todos = useSelector((store) =&gt; store.todoState.todos)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> todos = useSelector(selectTodos);</span><br><span class=\"line\">  <span class=\"comment\">// step #42 若已執行修改後會顯示,但直接執行(或重整畫面)則不會顯示 ???</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;todos&quot;</span>, todos);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* call step #21 addTodo component */</span>&#125;</span><br><span class=\"line\">      &lt;AddTodo /&gt;</span><br><span class=\"line\">      &lt;ul&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* step #9 show todos */</span>&#125;</span><br><span class=\"line\">        &#123;todos.map(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;li key=&#123;todo.id&#125;&gt;</span><br><span class=\"line\">            &#123;todo.id&#125; &#123;todo.name&#125;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h6 id=\"src-redux-1\"><a href=\"#src-redux-1\" class=\"headerlink\" title=\"./src/redux\"></a>./src/redux</h6><ul>\n<li><p>./src/redux/store.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/store.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> rootReducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #3 產生 store(from ./reducers )</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  rootReducer,</span><br><span class=\"line\">  <span class=\"comment\">// step #41 add for redux devtool</span></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/selectors.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/selectors.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #8 selectot 另開成檔案</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> selectTodos = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> store.todoState.todos;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/actionTypes.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actionTypes.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_TODO = <span class=\"string\">&quot;add_todo&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> DELETE_TODO = <span class=\"string\">&quot;delete_todo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_USER = <span class=\"string\">&quot;add_user&quot;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actions.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_TODO, DELETE_TODO, ADD_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #10 做成 action creator(function) 方便使用</span></span><br><span class=\"line\"><span class=\"comment\">// action creator</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name: name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deleteTodo</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: DELETE_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      id: id,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addUser</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_USER,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h6 id=\"src-redux-reducers-1\"><a href=\"#src-redux-reducers-1\" class=\"headerlink\" title=\"./src/redux/reducers\"></a>./src/redux/reducers</h6><ul>\n<li><p>./src/redux/reducers/index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> todos <span class=\"keyword\">from</span> <span class=\"string\">&quot;./todos&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> users <span class=\"keyword\">from</span> <span class=\"string\">&quot;./users&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #4 combineReducers 可包含 多個 reducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> combineReducers(&#123;</span><br><span class=\"line\">  todoState: todos, <span class=\"comment\">//todos: todos</span></span><br><span class=\"line\">  users, <span class=\"comment\">//users: users</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/reducers/todos.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/todos.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_TODO, DELETE_TODO &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> todoId = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  todos: [],</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #5 todosReducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">todosReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;reciver action(todos)&quot;</span>, action);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// process state additional data</span></span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        todos: [</span><br><span class=\"line\">          ...state.todos,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"comment\">// add id</span></span><br><span class=\"line\">            id: todoId++,</span><br><span class=\"line\">            name: action.payload.name,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"comment\">// delete todo</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> DELETE_TODO:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        todos: state.todos.filter(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> todo.id !== action.payload.id),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/reducers/users.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/users.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  users: [],</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #6 usersReducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">usersReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;reciver action(users)&quot;</span>, action);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_USER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// process state additional data</span></span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        users: [</span><br><span class=\"line\">          ...state.users,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: action.payload.name,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h6 id=\"src-containers\"><a href=\"#src-containers\" class=\"headerlink\" title=\"./src/containers\"></a>./src/containers</h6><ul>\n<li>./src/containers/AddTodo.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/containers/AddTodo.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../redux/actions&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddTodo <span class=\"keyword\">from</span> <span class=\"string\">&quot;../components/AddTodo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #23  connect parameter 1 ,使用 connect 來取得 Redux 中的 states(store 內的值)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapStateToProps = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    todos: store.todoState.todos,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #24 connect parameter 2 , 使用 connect 來 dispatch actions</span></span><br><span class=\"line\"><span class=\"comment\">// const mapDispatchToProps = (dispatch) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   return &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     addTodo: (payload) =&gt; dispatch(addTodo(payload)),</span></span><br><span class=\"line\"><span class=\"comment\">//   &#125;;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;;</span></span><br><span class=\"line\"><span class=\"comment\">// step #26 上面簡化(因 props 與 action 同名)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapDispatchToProps = &#123;</span><br><span class=\"line\">  addTodo,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #22 利用 connect 處理</span></span><br><span class=\"line\"><span class=\"comment\">// const connectToStore = connect(mapStateToProps, mapDispatchToProps);</span></span><br><span class=\"line\"><span class=\"comment\">// step #25 link addTodo component</span></span><br><span class=\"line\"><span class=\"comment\">// const ConnectedAddTodo = connectToStore(AddTodo);</span></span><br><span class=\"line\"><span class=\"comment\">// // HOC(Higher Order Component)</span></span><br><span class=\"line\"><span class=\"comment\">// // smart component or container(知道 redux)</span></span><br><span class=\"line\"><span class=\"comment\">// export default ConnectedAddTodo;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #27 等同上面三行 command</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(mapStateToProps, mapDispatchToProps)(AddTodo);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h6 id=\"src-components\"><a href=\"#src-components\" class=\"headerlink\" title=\"./src/components\"></a>./src/components</h6><ul>\n<li>./src/components/AddTodo.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/components/AddTodo.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #28 addTodo component</span></span><br><span class=\"line\"><span class=\"comment\">// dump component(不知 redux)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AddTodo</span>(<span class=\"params\">&#123; addTodo &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;button</span><br><span class=\"line\">      <span class=\"comment\">// step #29 dispatch 呼叫 action creator, 產生 action</span></span><br><span class=\"line\">      onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        addTodo(<span class=\"built_in\">Math</span>.random());</span><br><span class=\"line\">      &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      add todo</span><br><span class=\"line\">    &lt;/button&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"example-4-todos-example\"><a href=\"#example-4-todos-example\" class=\"headerlink\" title=\"example #4 - todos example\"></a>example #4 - todos example</h5><ul>\n<li>./src/components/AddTodo.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/components/AddTodo.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, Fragment &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #28 addTodo component</span></span><br><span class=\"line\"><span class=\"comment\">// dump component(不知 redux)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AddTodo</span>(<span class=\"params\">&#123; addTodo &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// step #52 add state</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [value, setValue] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"comment\">// step #51 add Fragment for multi element</span></span><br><span class=\"line\">    <span class=\"comment\">// &lt;Fragment&gt;&lt;/Fragment&gt;  簡寫</span></span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* step #53 add todo input */</span>&#125;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">        value=&#123;value&#125;</span><br><span class=\"line\">        onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setValue(e.target.value)&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">      &lt;button</span><br><span class=\"line\">        <span class=\"comment\">// step #29 dispatch 呼叫 action creator, 產生 action</span></span><br><span class=\"line\">        <span class=\"comment\">// step #54 input put to todos</span></span><br><span class=\"line\">        onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          addTodo(value);</span><br><span class=\"line\">          setValue(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        add todo</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>./src/App.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectTodos &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/selectors&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useDispatch, useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddTodo <span class=\"keyword\">from</span> <span class=\"string\">&quot;./containers/AddTodo&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; deleteTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/actions&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// step #7 useSelector 取得 store 內的植</span></span><br><span class=\"line\">  <span class=\"comment\">// todos = useSelector((store) =&gt; store.todoState.todos)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> todos = useSelector(selectTodos);</span><br><span class=\"line\">  <span class=\"comment\">// step #42 若已執行修改後會顯示,但直接執行(或重整畫面)則不會顯示 ???</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;todos&quot;</span>, todos);</span><br><span class=\"line\">  <span class=\"comment\">// step #56 add delete button - add dispatch</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* call step #21 addTodo component */</span>&#125;</span><br><span class=\"line\">      &lt;AddTodo /&gt;</span><br><span class=\"line\">      &lt;ul&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* step #9 show todos */</span>&#125;</span><br><span class=\"line\">        &#123;todos.map(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;li key=&#123;todo.id&#125;&gt;</span><br><span class=\"line\">            &#123;todo.id&#125; &#123;todo.name&#125;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* step #55 add delete button */</span>&#125;</span><br><span class=\"line\">            &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> dispatch(deleteTodo(todo.id))&#125;&gt;</span><br><span class=\"line\">              <span class=\"keyword\">delete</span></span><br><span class=\"line\">            &lt;/button&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"react-redux-Redux-Toolkit\"><a href=\"#react-redux-Redux-Toolkit\" class=\"headerlink\" title=\"react-redux(Redux Toolkit )\"></a>react-redux(Redux Toolkit )</h4><p>boilerplate : 樣板<br>immer : 一个 immutable library，利用 ES6 的 proxy，以最小的成本實现了 js 的不可變數據結構 </p>\n<h5 id=\"install-2\"><a href=\"#install-2\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 已自動安裝 Redux Toolkit</span></span><br><span class=\"line\">npx create-react-app react-dedux-demo --template redux</span><br><span class=\"line\"><span class=\"comment\"># 若不安裝 template</span></span><br><span class=\"line\">npx create-react-app my-app</span><br><span class=\"line\"><span class=\"built_in\">cd</span>  my-app</span><br><span class=\"line\">npm install @reduxjs/toolkit</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"進階\"><a href=\"#進階\" class=\"headerlink\" title=\"進階\"></a>進階</h3><h4 id=\"redux-middleware\"><a href=\"#redux-middleware\" class=\"headerlink\" title=\"redux middleware\"></a>redux middleware</h4><h5 id=\"Data-Flow-1\"><a href=\"#Data-Flow-1\" class=\"headerlink\" title=\"Data Flow\"></a>Data Flow</h5><div style=\"width:500px;\">\n    <img src=\"/2021/09/23/react-4/ReduxAsyncDataFlowDiagram-d97ff38a0f4da0f327163170ccc13e80.gif\" class=\"\">\n</div>\n\n<h5 id=\"middleware-example-and-add-redux-devtool\"><a href=\"#middleware-example-and-add-redux-devtool\" class=\"headerlink\" title=\"middleware example and add redux devtool\"></a>middleware example and add redux devtool</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/store.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #61 add middleware - import</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #71 add for redux devtool with middle - import</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; compose &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> rootReducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #72 add for redux devtool with middle - variable</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> composeEnhancers = <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #62 add middleware - middleware 1</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> logMiddleWare1 = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">next</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Middleware1:&quot;</span>, action);</span><br><span class=\"line\">  next(action);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #63 add middleware - middleware 2</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> logMiddleWare2 = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">next</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Middleware2:&quot;</span>, action);</span><br><span class=\"line\">  next(action);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #3 產生 store(from ./reducers )</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  rootReducer,</span><br><span class=\"line\">  <span class=\"comment\">// step #73 add for redux devtool with middle - add</span></span><br><span class=\"line\">  <span class=\"comment\">// step #64 add middleware - add</span></span><br><span class=\"line\">  composeEnhancers(applyMiddleware(logMiddleWare1, logMiddleWare2))</span><br><span class=\"line\">  <span class=\"comment\">// step #41 add for redux devtool</span></span><br><span class=\"line\">  <span class=\"comment\">// window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"thunk-example-by-async-todos-and-fetch-redux-logger\"><a href=\"#thunk-example-by-async-todos-and-fetch-redux-logger\" class=\"headerlink\" title=\"thunk - example by async todos and fetch + redux-logger\"></a>thunk - example by async todos and fetch + redux-logger</h5><p>Redux Thunk middleware 讓你可以撰寫一個回傳 function 而非 action 的 action creators，透過 thunk 可以讓你控制發送（dispatch）一個 action 的時間點，因此適合用來處理非同步取得的資料狀態，或者是在特定條件符合的情況下才發送。</p>\n<h6 id=\"install-redux-logger\"><a href=\"#install-redux-logger\" class=\"headerlink\" title=\"install redux-logger\"></a>install redux-logger</h6><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install redux-logger</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"src-App-js\"><a href=\"#src-App-js\" class=\"headerlink\" title=\"./src/App.js\"></a>./src/App.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectTodos &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/selectors&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useDispatch, useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import AddTodo from &quot;./containers/AddTodo&quot;;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/actions&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #65 thunk - import async action creator</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addTodoAsync, AddTodoFetchPosts &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/actions&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; deleteTodo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/actions&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// step #7 useSelector 取得 store 內的植</span></span><br><span class=\"line\">  <span class=\"comment\">// todos = useSelector((store) =&gt; store.todoState.todos)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> todos = useSelector(selectTodos);</span><br><span class=\"line\">  <span class=\"comment\">// step #42 若已執行修改後會顯示,但直接執行(或重整畫面)則不會顯示 ???</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;todos&quot;</span>, todos);</span><br><span class=\"line\">  <span class=\"comment\">// step #56 add delete button - add dispatch</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* call step #21 addTodo component */</span>&#125;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* &lt;AddTodo /&gt; */</span>&#125;</span><br><span class=\"line\">      &lt;button</span><br><span class=\"line\">        <span class=\"comment\">// step #11 dispatch 呼叫 action creator, 產生 action</span></span><br><span class=\"line\">        onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          dispatch(addTodo(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        add todo</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;button</span><br><span class=\"line\">        onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// step #66 thunk - dispatch 呼叫 async action creator</span></span><br><span class=\"line\">          dispatch(addTodoAsync(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        add todo <span class=\"keyword\">async</span></span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;button</span><br><span class=\"line\">        onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// step #67 thunk - dispatch 呼叫 fetch action creator</span></span><br><span class=\"line\">          dispatch(AddTodoFetchPosts());</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        add toto fetch</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;ul&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* step #9 show todos */</span>&#125;</span><br><span class=\"line\">        &#123;todos.map(<span class=\"function\">(<span class=\"params\">todo</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;li key=&#123;todo.id&#125;&gt;</span><br><span class=\"line\">            &#123;todo.id&#125; &#123;todo.name&#125;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* step #55 add delete button */</span>&#125;</span><br><span class=\"line\">            &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> dispatch(deleteTodo(todo.id))&#125;&gt;</span><br><span class=\"line\">              <span class=\"keyword\">delete</span></span><br><span class=\"line\">            &lt;/button&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"src-redux-actions-js\"><a href=\"#src-redux-actions-js\" class=\"headerlink\" title=\"./src/redux/actions.js\"></a>./src/redux/actions.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actions.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ADD_TODO, DELETE_TODO, ADD_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #10 做成 action creator(function) 方便使用</span></span><br><span class=\"line\"><span class=\"comment\">// action creator</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodo</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name: name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deleteTodo</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: DELETE_TODO,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      id: id,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addUser</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: ADD_USER,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      name,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #63 thunk - async action</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addTodoAsync</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 一秒後dispatch addTask()</span></span><br><span class=\"line\">      dispatch(addTodo(name));</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #64 thunk - fetch action</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AddTodoFetchPosts</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fetch(</span><br><span class=\"line\">      <span class=\"string\">&quot;https://api.kcg.gov.tw/api/service/Get/b4e6ae98-39b7-469b-8c68-56492cad3b71&quot;</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">json</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(json.data[0]);</span></span><br><span class=\"line\">        <span class=\"comment\">// console.log(typeof json.data[0]);</span></span><br><span class=\"line\">        dispatch(addTodo(json.data[<span class=\"number\">0</span>][<span class=\"string\">&quot;市場地址&quot;</span>]));</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"src-redux-store-js\"><a href=\"#src-redux-store-js\" class=\"headerlink\" title=\"./src/redux/store.js\"></a>./src/redux/store.js</h6><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/store.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> rootReducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #61 thunk - import thunk</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux-thunk&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #71 redux-logger - import</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createLogger &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux-logger&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #72 redux-logger</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> loggerMiddleware = createLogger();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #3 產生 store(from ./reducers )</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  rootReducer,</span><br><span class=\"line\">  <span class=\"comment\">// step #62 thunk - set at middleware</span></span><br><span class=\"line\">  <span class=\"comment\">// step #73 redux-logger - add to middle</span></span><br><span class=\"line\">  applyMiddleware(thunk, loggerMiddleware)</span><br><span class=\"line\">  <span class=\"comment\">// step #41 add for redux devtool</span></span><br><span class=\"line\">  <span class=\"comment\">// window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Redux-thunk-example-from-template\"><a href=\"#Redux-thunk-example-from-template\" class=\"headerlink\" title=\"Redux thunk example from template\"></a>Redux thunk example from template</h5><ul>\n<li><p>./src/feature/counter/counterSlice.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">....</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// The function below is called a thunk and allows us to perform async logic. It</span></span><br><span class=\"line\"><span class=\"comment\">// can be dispatched like a regular action: `dispatch(incrementAsync(10))`. This</span></span><br><span class=\"line\"><span class=\"comment\">// will call the thunk with the `dispatch` function as the first argument. Async</span></span><br><span class=\"line\"><span class=\"comment\">// code can then be executed and other actions can be dispatched. Thunks are</span></span><br><span class=\"line\"><span class=\"comment\">// typically used to make async requests.</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> incrementAsync = createAsyncThunk(</span><br><span class=\"line\">  <span class=\"string\">&#x27;counter/fetchCount&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">async</span> (amount) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> fetchCount(amount);</span><br><span class=\"line\">    <span class=\"comment\">// The value we return becomes the `fulfilled` action payload</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.data;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">....</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/feature/counter/counterAPI.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// A mock function to mimic making an async request for data</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchCount</span>(<span class=\"params\">amount = <span class=\"number\">1</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> resolve(&#123; <span class=\"attr\">data</span>: amount &#125;), <span class=\"number\">500</span>)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"blog-use-redux-example-顯示單篇文章\"><a href=\"#blog-use-redux-example-顯示單篇文章\" class=\"headerlink\" title=\"blog use redux example - 顯示單篇文章\"></a>blog use redux example - 顯示單篇文章</h4><h5 id=\"src-index-js\"><a href=\"#src-index-js\" class=\"headerlink\" title=\"./src/index.js\"></a>./src/index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"comment\">// step #21 redux(get post) - do for blog(顯示單篇文章)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import App from &quot;./components/Signup&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">// step #1 change to blog</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/App&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #21 redux(get post) - import store, Provider</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; store &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/store&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  <span class=\"comment\">// step #22 redux(get post) - Provider store</span></span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-Pages-BlogPost-BlogPost-js\"><a href=\"#src-Pages-BlogPost-BlogPost-js\" class=\"headerlink\" title=\"./src/Pages/BlogPost/BlogPost.js\"></a>./src/Pages/BlogPost/BlogPost.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/BlogPost/BlogPost.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #29 redux(get post) - import useSelector, useSelector, actions, selectors</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useDispatch, useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addPostFromFetch, deletePostFromFetch &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../redux/actions&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectPost &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../redux/selectors&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> PostContainer = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 80%;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> PostTitle = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  text-align: center;</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 24px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> PostBody = styled.div<span class=\"string\">``</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BlogPost</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; id &#125; = useParams();</span><br><span class=\"line\">  <span class=\"comment\">// const state = useSelector((state) =&gt; state);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;state:&quot;, state);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> post = useSelector(selectPost);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch();</span><br><span class=\"line\">  <span class=\"comment\">// console.log(post);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// step #30 redux - trigger dispatch addPostFromFetch action</span></span><br><span class=\"line\">    dispatch(addPostFromFetch(id));</span><br><span class=\"line\">  &#125;, [dispatch, id]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// step #42 add delete blog item - handel function</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDelete = <span class=\"keyword\">async</span> (e) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> dispatch(deletePostFromFetch(id));</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"built_in\">console</span>.log(id);</span><br><span class=\"line\">    <span class=\"comment\">// step #45 add delete blog item - jump to home page</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"built_in\">window</span>.location.assign(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;PostContainer&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* step #41 add delete blog item - button */</span>&#125;</span><br><span class=\"line\">      &lt;button onClick=&#123;handleDelete&#125;&gt;刪除&lt;/button&gt;</span><br><span class=\"line\">      &lt;PostTitle&gt;&#123;post.title&#125;&lt;/PostTitle&gt;</span><br><span class=\"line\">      &lt;PostBody&gt;&#123;post.body&#125;&lt;/PostBody&gt;</span><br><span class=\"line\">    &lt;/PostContainer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-redux-2\"><a href=\"#src-redux-2\" class=\"headerlink\" title=\"./src/redux\"></a>./src/redux</h5><ul>\n<li><p>./src/redux/actionTypes.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actionTypes.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #25 redux(get post) - add actionTypes</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> GET_POST = <span class=\"string\">&quot;get_post&quot;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actions.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; GET_POST &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actionTypes&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getPostId, deletePost &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../WebApi&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #26 redux(get post) - add action addPost</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addPost</span>(<span class=\"params\">title, body</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: GET_POST,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      title,</span><br><span class=\"line\">      body,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #27 redux(get post) - add action addPostFromFetch</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addPostFromFetch</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getPostId(id).then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(post);</span></span><br><span class=\"line\">      <span class=\"comment\">// console.log(post[0]);</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (post.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        dispatch(addPost(post[<span class=\"number\">0</span>].title, post[<span class=\"number\">0</span>].body));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #44 add delete blog item - action</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deletePostFromFetch</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> deletePost(id)</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;deletePostFromFetch&quot;</span>, res);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;error=&quot;</span>, e));</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<ul>\n<li><p>./src/redux/store.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/store.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> postReducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers/postReducer&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #23 redux(get post) - import applyMiddleware, thunk, compose(redux devtool for middleware)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux-thunk&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; compose &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> composeEnhancers = <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #24 redux(get post) - add store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  postReducer,</span><br><span class=\"line\">  composeEnhancers(applyMiddleware(thunk))</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/selectors.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/selectors.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #27 redux(get post) - add selector for get data</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> selectPost = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> store.post;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"src-redux-reducers-2\"><a href=\"#src-redux-reducers-2\" class=\"headerlink\" title=\"./src/redux/reducers\"></a>./src/redux/reducers</h5><ul>\n<li>./src/redux/reducers/postReducer.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/postReducer.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; GET_POST &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  post: &#123;</span><br><span class=\"line\">    title: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    body: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #28 redux(get post) - add postReducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;receive action(post)&quot;</span>, action);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> GET_POST:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        post: &#123;</span><br><span class=\"line\">          title: action.payload.title,</span><br><span class=\"line\">          body: action.payload.body,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"blog-use-redux-example-發表文章\"><a href=\"#blog-use-redux-example-發表文章\" class=\"headerlink\" title=\"blog use redux example - 發表文章\"></a>blog use redux example - 發表文章</h4><h5 id=\"src-index-js-1\"><a href=\"#src-index-js-1\" class=\"headerlink\" title=\"./src/index.js\"></a>./src/index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"comment\">// step #20 redux(get post) - do for blog(顯示單篇文章)</span></span><br><span class=\"line\"><span class=\"comment\">// step #50 redux(add blog) - 發表文章</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import App from &quot;./components/Signup&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">// step #1 change to blog</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/App&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #21 redux(get post) - import store, Provider</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; store &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./redux/store&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  <span class=\"comment\">// step #22 redux(get post) - Provider store</span></span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Pages-CreatePage-CreatePage-js\"><a href=\"#Pages-CreatePage-CreatePage-js\" class=\"headerlink\" title=\"./Pages/CreatePage/CreatePage.js\"></a>./Pages/CreatePage/CreatePage.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/CreatePage/CreatePage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useDispatch, useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addPostFromFetch, clearPost &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../redux/actions&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectPost, selectIsLoad &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../redux/selectors&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Root = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 80%;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Title = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding: 5px 0;</span></span><br><span class=\"line\"><span class=\"string\">  input &#123;</span></span><br><span class=\"line\"><span class=\"string\">    width: 100%;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  div &#123;</span></span><br><span class=\"line\"><span class=\"string\">    padding-bottom: 5px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Content = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  padding-bottom: 10px;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  textarea &#123;</span></span><br><span class=\"line\"><span class=\"string\">    width: 100%;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  div &#123;</span></span><br><span class=\"line\"><span class=\"string\">    padding-bottom: 5px;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ErrorMessage = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CreatePage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [title, setTitle] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [content, setContent] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [errorMessage] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    <span class=\"comment\">// step #59 redux(add blog) - submit add post</span></span><br><span class=\"line\">    dispatch(addPostFromFetch(title, content));</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;handleSubmit&quot;);</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// step #58 redux(add blog) - clear state when add post mount</span></span><br><span class=\"line\">    dispatch(clearPost());</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;creat mount..&quot;);</span></span><br><span class=\"line\">  &#125;, [dispatch]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> post = useSelector(selectPost);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> isLoad = useSelector(selectIsLoad);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;create effect :&quot;, post);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;isLoad:&quot;, isLoad);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;creat update &quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// step #60 redux(add blog) - show post after add post</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isLoad) &#123;</span><br><span class=\"line\">      history.push(<span class=\"string\">&quot;/posts/&quot;</span> + post.id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [post, isLoad, history]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Root&gt;</span><br><span class=\"line\">      &lt;form onSubmit=&#123;handleSubmit&#125;&gt;</span><br><span class=\"line\">        &lt;Title&gt;</span><br><span class=\"line\">          &lt;div&gt;Title&lt;/div&gt;</span><br><span class=\"line\">          &lt;input</span><br><span class=\"line\">            type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">            value=&#123;title&#125;</span><br><span class=\"line\">            onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setTitle(e.target.value)&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Title&gt;</span><br><span class=\"line\">        &lt;Content&gt;</span><br><span class=\"line\">          &lt;div&gt;Content&lt;/div&gt;</span><br><span class=\"line\">          &lt;textarea</span><br><span class=\"line\">            rows=<span class=\"string\">&quot;10&quot;</span></span><br><span class=\"line\">            value=&#123;content&#125;</span><br><span class=\"line\">            onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> setContent(e.target.value)&#125;</span><br><span class=\"line\">          &gt;&lt;/textarea&gt;</span><br><span class=\"line\">        &lt;/Content&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;button type=<span class=\"string\">&quot;submit&quot;</span>&gt;新增&lt;/button&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &#123;errorMessage &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ErrorMessage</span>&gt;</span>&#123;errorMessage&#125;<span class=\"tag\">&lt;/<span class=\"name\">ErrorMessage</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">    &lt;/Root&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Pages-BlogPost-BlogPost-js\"><a href=\"#Pages-BlogPost-BlogPost-js\" class=\"headerlink\" title=\"./Pages/BlogPost/BlogPost.js\"></a>./Pages/BlogPost/BlogPost.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Pages/BlogPost/BlogPost.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #29 redux(get post) - import useSelector, useSelector, actions, selectors</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useDispatch, useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  getPostFromFetch,</span><br><span class=\"line\">  deletePostFromFetch,</span><br><span class=\"line\">  clearPost,</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../redux/actions&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; selectPost, selectIsLoad &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../redux/selectors&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> PostContainer = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 80%;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 auto;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> PostTitle = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  text-align: center;</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 24px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> PostBody = styled.div<span class=\"string\">``</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BlogPost</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; id &#125; = useParams();</span><br><span class=\"line\">  <span class=\"comment\">// const state = useSelector((state) =&gt; state);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;state:&quot;, state);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> post = useSelector(selectPost);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> isLoad = useSelector(selectIsLoad);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch();</span><br><span class=\"line\">  <span class=\"comment\">// console.log(post);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;isLoad:&quot;, isLoad);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// step #57 redux(add blog) - clear state when get post unmount</span></span><br><span class=\"line\">      dispatch(clearPost());</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, [dispatch]);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// step #30 redux(get post) - trigger dispatch getPostFromFetch action</span></span><br><span class=\"line\">    dispatch(getPostFromFetch(id));</span><br><span class=\"line\">  &#125;, [dispatch, id]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// step #42 add delete blog item - handel function</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDelete = <span class=\"keyword\">async</span> (e) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> dispatch(deletePostFromFetch(id));</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"built_in\">console</span>.log(id);</span><br><span class=\"line\">    <span class=\"comment\">// step #45 add delete blog item - jump to home page</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"built_in\">window</span>.location.assign(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;PostContainer&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* step #41 add delete blog item - button */</span>&#125;</span><br><span class=\"line\">      &lt;button onClick=&#123;handleDelete&#125;&gt;刪除&lt;/button&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* step #31 redux(get post) - add no data options */</span>&#125;</span><br><span class=\"line\">      &#123;isLoad &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">PostTitle</span>&gt;</span>&#123;post.title&#125;<span class=\"tag\">&lt;/<span class=\"name\">PostTitle</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &#123;isLoad &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">PostBody</span>&gt;</span>&#123;post.body&#125;<span class=\"tag\">&lt;/<span class=\"name\">PostBody</span>&gt;</span></span>&#125;</span><br><span class=\"line\">    &lt;/PostContainer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-redux-3\"><a href=\"#src-redux-3\" class=\"headerlink\" title=\"./src/redux\"></a>./src/redux</h5><ul>\n<li><p>./src/redux/actionTypes.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #25 redux(get post) - add actionTypes</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> GET_POST = <span class=\"string\">&quot;get_post&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #51 redux(add blog) - add actionTypes</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_POST = <span class=\"string\">&quot;add_post&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> CLEAR_POST = <span class=\"string\">&quot;clear_post&quot;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/actions.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; CLEAR_POST, GET_POST &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actionTypes&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getPostId, deletePost, create &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../WebApi&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #26 redux(get post) - add action getPost</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPost</span>(<span class=\"params\">post</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: GET_POST,</span><br><span class=\"line\">    payload: post,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">clearPost</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: CLEAR_POST,</span><br><span class=\"line\">    payload: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #27 redux(get post) - add action getPostFromFetch</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPostFromFetch</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getPostId(id).then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(post);</span></span><br><span class=\"line\">      <span class=\"comment\">// console.log(post[0]);</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (post.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        dispatch(getPost(post[<span class=\"number\">0</span>]));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #44 add delete blog item - action</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deletePostFromFetch</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> deletePost(id)</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;deletePostFromFetch&quot;</span>, res);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;error=&quot;</span>, e));</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #52 redux(add blog) - add action</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addPostFromFetch</span>(<span class=\"params\">title, body</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> create(title, body).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;create:&quot;, data);</span></span><br><span class=\"line\">      dispatch(getPost(data));</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/redux/store.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/store.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> postReducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers/postReducer&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// step #23 redux(get post) - import applyMiddleware, thunk, compose(redux devtool for middleware)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux-thunk&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; compose &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> composeEnhancers = <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #24 redux(get post) - add store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  postReducer,</span><br><span class=\"line\">  composeEnhancers(applyMiddleware(thunk))</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<ul>\n<li>./src/redux/selectors.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/selectors.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #28 redux(get post) - add selector for get data</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> selectPost = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> store.post;</span><br><span class=\"line\"><span class=\"comment\">// step #56 redux(add blog) - add selector for isLoad flag</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> selectIsLoad = <span class=\"function\">(<span class=\"params\">store</span>) =&gt;</span> store.isLoad;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"src-redux-reducers-3\"><a href=\"#src-redux-reducers-3\" class=\"headerlink\" title=\"./src/redux/reducers\"></a>./src/redux/reducers</h5><ul>\n<li>./src/redux/reducers/postReducer.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/reducers/postReducer.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; CLEAR_POST, GET_POST, ADD_POST &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../actionTypes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// step #55 redux(add blog) - change state parameter</span></span><br><span class=\"line\">  isLoad: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  post: <span class=\"literal\">null</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #28 redux(get post) - add postReducer</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postReducer</span>(<span class=\"params\">state = initialState, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;receive action(post)&quot;, action);</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// step #53 redux(add blog) - add reducer</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> CLEAR_POST:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        isLoad: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        post: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"comment\">// step #54 redux(add blog) - add reducer</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> GET_POST:</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ADD_POST:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        isLoad: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        post: action.payload,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"redux-devtool\"><a href=\"#redux-devtool\" class=\"headerlink\" title=\"redux devtool\"></a>redux devtool</h3><ul>\n<li><p>chrome install <a href=\"https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=zh-TW\">Redux DevTools</a></p>\n</li>\n<li><p>add code as bellow for restore</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/redux/store.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;redux&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> rootReducer <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./reducers&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">\trootReducer,</span><br><span class=\"line\">\t<span class=\"comment\">// add for redux devtool </span></span><br><span class=\"line\">\t<span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://redux.js.org/\">Redux</a></li>\n<li><a href=\"https://chentsulin.github.io/redux/index.html\">Redux 中文</a></li>\n<li><a href=\"https://facebook.github.io/flux/\">Flux</a></li>\n<li><a href=\"https://react-redux.js.org/introduction/getting-started\">react-redux</a></li>\n<li><a href=\"https://redux.js.org/usage/configuring-your-store\">Configuring Your Store</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0\">Presentational and Container Components</a></li>\n<li><a href=\"https://react-redux.js.org/tutorials/connect\">A Todo List Example(Using the connect API)</a></li>\n<li><a href=\"https://redux-toolkit.js.org/\">Redux Toolkit</a></li>\n<li><a href=\"https://www.reduxjs.cn/recipes/recipe-index/\">Redux 中文網</a></li>\n<li><a href=\"https://zh-hant.reactjs.org/docs/hooks-faq.html\">Hooks 常見問題</a></li>\n<li><a href=\"https://redux-saga.js.org/\">Redux-Saga</a></li>\n<li><a href=\"https://redux-observable.js.org/\">redux-observable</a></li>\n</ul>\n<h3 id=\"圖檔來源\"><a href=\"#圖檔來源\" class=\"headerlink\" title=\"圖檔來源\"></a>圖檔來源</h3><ul>\n<li><a href=\"https://redux.js.org/tutorials/essentials/part-1-overview-concepts\">Redux Essentials, Part 1: Redux Overview and Concepts</a></li>\n<li><a href=\"https://redux.js.org/tutorials/essentials/part-5-async-logic\">Redux Essentials, Part 5: Async Logic and Data Fetching</a></li>\n</ul>\n","categories":["Framework"],"tags":["react","redux"]},{"title":"JavaScript review","url":"/2021/09/23/review-1/","content":"<h3 id=\"Entry\"><a href=\"#Entry\" class=\"headerlink\" title=\"Entry\"></a>Entry</h3><h4 id=\"何謂-JavaScript\"><a href=\"#何謂-JavaScript\" class=\"headerlink\" title=\"何謂 JavaScript\"></a>何謂 JavaScript</h4><p>JavaScript 是一種直譯的程式語言,原本是設計給瀏覽器使用,現在已被應用到不同的環境,含 Server 也有使用到</p>\n<span id=\"more\"></span>\n\n<h4 id=\"何謂-ECMAScript\"><a href=\"#何謂-ECMAScript\" class=\"headerlink\" title=\"何謂 ECMAScript\"></a>何謂 ECMAScript</h4><p>定義 JavaScript 的規格</p>\n<h4 id=\"和-的差異\"><a href=\"#和-的差異\" class=\"headerlink\" title=\"== 和 === 的差異\"></a>== 和 === 的差異</h4><p>== 比較値, === 比較値和資料型態</p>\n<h4 id=\"promise-是什麼\"><a href=\"#promise-是什麼\" class=\"headerlink\" title=\"promise 是什麼\"></a>promise 是什麼</h4><p>一種 JavaScript 的 object, 一般用於處理非同步的程序</p>\n<h4 id=\"Strict-mode-嚴格模式-JavaScript\"><a href=\"#Strict-mode-嚴格模式-JavaScript\" class=\"headerlink\" title=\"Strict mode(嚴格模式) JavaScript\"></a>Strict mode(嚴格模式) JavaScript</h4><p>JS 引擎會用嚴格的標準來讀你的 code,避免你寫出不穩定或不夠嚴謹的 code, 讓你寫出的 Javascript 更安全</p>\n<h4 id=\"null-和-undefined-的差別\"><a href=\"#null-和-undefined-的差別\" class=\"headerlink\" title=\"null 和 undefined 的差別\"></a>null 和 undefined 的差別</h4><p>undefined : 變數宣告但為賦值<br>null : 變數設定代表無值</p>\n<h4 id=\"AJAX\"><a href=\"#AJAX\" class=\"headerlink\" title=\"AJAX\"></a>AJAX</h4><p>Asynchronous JavaScript and XML,AJAX向伺服器傳送要求取回必須的資料，並在客戶端採用JavaScript處理來自伺服器的回應.</p>\n<h4 id=\"synchronous-同步-與-asynchronous-非同步的-差異\"><a href=\"#synchronous-同步-與-asynchronous-非同步的-差異\" class=\"headerlink\" title=\"synchronous(同步) 與 asynchronous(非同步的) 差異\"></a>synchronous(同步) 與 asynchronous(非同步的) 差異</h4><p>同步為執行完成目前的程序再執行後面的程序,非同步則不等待執行完成繼續往後執行,如執行 AJAX 就要使用非同步,不然就有可能出現網頁卡住的現象</p>\n<h4 id=\"var-let-和-const-的差別\"><a href=\"#var-let-和-const-的差別\" class=\"headerlink\" title=\"var, let 和 const 的差別\"></a>var, let 和 const 的差別</h4><ul>\n<li>var 是 function scope, let 和 const 是 block scope</li>\n<li>var,let 設定後可更改, const 不可更改</li>\n</ul>\n<h4 id=\"DOM-文件物件模型-是什麼\"><a href=\"#DOM-文件物件模型-是什麼\" class=\"headerlink\" title=\"DOM(文件物件模型) 是什麼\"></a>DOM(文件物件模型) 是什麼</h4><p>Document Object Model,提供了一個文件（樹）的結構化表示法，並定義讓程式可以存取並改變文件架構、風格和內容的方法。 </p>\n<div style=\"width:500px; background:#fff;\">\n    <img src=\"/2021/09/23/review-1/naw1u0v.png\" class=\"\">\n</div>\n-------------------\n\n<h4 id=\"資料型別-Primitiv-原始-and-Object-物件\"><a href=\"#資料型別-Primitiv-原始-and-Object-物件\" class=\"headerlink\" title=\"資料型別 Primitiv(原始) and Object(物件)\"></a>資料型別 Primitiv(原始) and Object(物件)</h4><p>JavaScript 的資料型別有 Primitiv value(原始值) 和 Object(物件) 兩類<br>Primitiv value : </p>\n<ul>\n<li>Boolean type</li>\n<li>Null type</li>\n<li>Undefined type</li>\n<li> Number type</li>\n<li>BigInt type</li>\n<li>String type</li>\n<li>Symbol type</li>\n</ul>\n<p>Object :</p>\n<ul>\n<li>Function</li>\n<li>Array</li>\n<li>Date</li>\n<li>….</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Primitive</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> value = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> value2 = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> value3 = value</span><br><span class=\"line\"><span class=\"comment\">// 存值,比較時比較值</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( value === value2)\t\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( value === value3)\t\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// 修改時不會影響其他變數</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;value=&#x27;</span>,value,<span class=\"string\">&#x27;value3=&#x27;</span>,value3)\t<span class=\"comment\">// value= 1 value3= 1</span></span><br><span class=\"line\">value3=<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;value=&#x27;</span>,value,<span class=\"string\">&#x27;value3=&#x27;</span>,value3)\t<span class=\"comment\">// value= 1 value3= 2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Object</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> fruits  = [<span class=\"string\">&#x27;apple&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> fruits2 =  [<span class=\"string\">&#x27;apple&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> fruits3 = fruits</span><br><span class=\"line\"><span class=\"comment\">// 存位置,比較時比較位置</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( fruits === fruits2)\t<span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( fruits === fruits)\t\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// 修改時會影響其他關聯變數</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;fruits=&#x27;</span>,fruits,<span class=\"string\">&#x27;fruits3=&#x27;</span>,fruits3)\t<span class=\"comment\">// fruits= [ &#x27;apple&#x27; ] fruits3= [ &#x27;apple&#x27; ]</span></span><br><span class=\"line\">fruits3.push(<span class=\"string\">&quot;orange&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;fruits=&#x27;</span>,fruits,<span class=\"string\">&#x27;fruits3=&#x27;</span>,fruits3)\t<span class=\"comment\">// fruits= [ &#x27;apple&#x27; ] fruits3= [ &#x27;apple&#x27;, &#x27;orange&#x27; ]</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"window-onload-和-document-ready\"><a href=\"#window-onload-和-document-ready\" class=\"headerlink\" title=\"window.onload 和 $(document).ready()\"></a>window.onload 和 $(document).ready()</h4><ul>\n<li>window.onload 會等網頁的全部內容，包括圖片，CSS及&lt;iframe&gt;等外部內容載入後才會觸發<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\tfunc1();</span><br><span class=\"line\">\tfunc2();</span><br><span class=\"line\">\t....</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 若只需要執行單一 function </span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.onload=Func;</span><br></pre></td></tr></table></figure></li>\n<li>$(document).ready()在Document Object Model (DOM) 載入後就會觸發，所以順序上$(document).ready()會比window.onload先執行。<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"Middle\"><a href=\"#Middle\" class=\"headerlink\" title=\"Middle\"></a>Middle</h3><h4 id=\"closure-閉包\"><a href=\"#closure-閉包\" class=\"headerlink\" title=\"closure(閉包)\"></a>closure(閉包)</h4><ul>\n<li><p>closure(閉包) 是一個 function 在另一個 function 的內部, 內部的 function 有 access function scope 的資料,雖然外部function 已 return,但還可以 aeecss 到 function 的資料</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> a = <span class=\"number\">10</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">inner</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\ta++</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(a)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> inner</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = test()</span><br><span class=\"line\">func()\t<span class=\"comment\">// 11</span></span><br><span class=\"line\">func()\t<span class=\"comment\">// 12</span></span><br><span class=\"line\">func()\t<span class=\"comment\">// 13</span></span><br></pre></td></tr></table></figure></li>\n<li><p>應用 #1 - 複雜計算自動記憶不用重算</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">complex</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;calculate&#x27;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> num*num*num</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cache</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> ans = &#123;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (ans[num]) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> ans[num]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tans[num] = func(num)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ans[num]</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(complex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(complex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(complex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cacheComplex = cache(complex)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cacheComplex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// calculate 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cacheComplex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// 8000</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cacheComplex(<span class=\"number\">20</span>))\t\t<span class=\"comment\">// 8000</span></span><br></pre></td></tr></table></figure></li>\n<li><p>應用 #2 - 隱藏資訊</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createWallet</span>(<span class=\"params\">init</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> money = init</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\tadd: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t\t\tmoney += num</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tsub: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num</span>) </span>&#123;</span><br><span class=\"line\">\t\t\tmoney -= num</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\tgetMoney: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> money</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> myWallet = createWallet(<span class=\"number\">99</span>)</span><br><span class=\"line\">myWallet.add(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myWallet.getMoney())\t<span class=\"comment\">// 100</span></span><br><span class=\"line\">myWallet.sub(<span class=\"number\">20</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myWallet.getMoney())\t<span class=\"comment\">// 80</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"函數原型內建函式-call-apply-and-bind-的差別\"><a href=\"#函數原型內建函式-call-apply-and-bind-的差別\" class=\"headerlink\" title=\"函數原型內建函式 call, apply, and bind 的差別\"></a>函數原型內建函式 call, apply, and bind 的差別</h4><ul>\n<li><p>call,apply 立即執行, bind 產生一個新函數提供之後使用(可更改 this 值)</p>\n</li>\n<li><p>call 的參數為個別傳入, apply 為 array 傳入</p>\n</li>\n<li><p>this 用不到可填入 null</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">a, b, c</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a, b, c)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)\t\t\t\t<span class=\"comment\">// undefined 1 2 3</span></span><br><span class=\"line\">test.call(<span class=\"number\">123</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)\t\t<span class=\"comment\">// 123 1 2 3</span></span><br><span class=\"line\">test.apply(<span class=\"number\">123</span>, [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])\t<span class=\"comment\">// 123 1 2 3</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> testBind = test.bind(<span class=\"number\">123</span>, <span class=\"number\">9</span> , <span class=\"number\">7</span>)</span><br><span class=\"line\">testBind(<span class=\"number\">99</span>)\t<span class=\"comment\">// 123 9 7 99</span></span><br></pre></td></tr></table></figure></li>\n<li><p>應用 #1 - apply 填入 this</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// apply </span></span><br><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">log</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = &#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>, <span class=\"attr\">log</span>:log &#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = &#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>, <span class=\"attr\">log</span>:log &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">log()\t\t<span class=\"comment\">// undefined</span></span><br><span class=\"line\">a.log()\t\t<span class=\"comment\">// &#123; a: 1, log: [Function: log] &#125;</span></span><br><span class=\"line\">b.log()\t\t<span class=\"comment\">// &#123; a: 2, log: [Function: log] &#125;</span></span><br><span class=\"line\">b.log.apply(a)\t<span class=\"comment\">// 代入 a 為 this -&gt; &#123; a: 1, log: [Function: log] &#125;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>應用 #2 - apply 參數轉為 array</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>));\t<span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( <span class=\"built_in\">Math</span>.min.apply(<span class=\"literal\">null</span>,arr));\t<span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Event-Loop-事件循環\"><a href=\"#Event-Loop-事件循環\" class=\"headerlink\" title=\"Event Loop(事件循環)\"></a>Event Loop(事件循環)</h4><p>JavaScript 的 Call stack 是擺放待執行的程序,JavaScript 對於不能馬上執行的動作,會呼叫對應的Wep Api(如setTimeout, AJAX …), 當 Web API 執行完後,會被堆放到callback queue,當 Call stack 已無待執行的程序,會順序從 callback queue 抓取程序到 Call stack 執行,順序從 callback queue 抓取程序到 Call stack 執行的流程及稱為 Event Loop</p>\n<img src=\"/2021/09/23/review-1/javascript-event-loop-step-1.png\" class=\"\" title=\"event-loop-step\">\n\n<h4 id=\"currying-柯里化）function\"><a href=\"#currying-柯里化）function\" class=\"headerlink\" title=\"currying(柯里化）function\"></a>currying(柯里化）function</h4><ul>\n<li><p>currying function 指的是將多參數函數轉為順序接收單一參數的函數</p>\n</li>\n<li><p>可簡化程式及提高程式的重用性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// discount function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">discount</span>(<span class=\"params\">price, discount</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * discount</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 10% discount</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(discount(<span class=\"number\">500</span>,<span class=\"number\">0.1</span>));\t\t<span class=\"comment\">// 50</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(discount(<span class=\"number\">1000</span>,<span class=\"number\">0.1</span>));\t<span class=\"comment\">// 100</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(discount(<span class=\"number\">2000</span>,<span class=\"number\">0.1</span>));\t<span class=\"comment\">// 200</span></span><br><span class=\"line\"><span class=\"comment\">// 20% discount</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(discount(<span class=\"number\">2000</span>,<span class=\"number\">0.2</span>));\t<span class=\"comment\">// 400</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// discount currying function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">discountCurrying</span>(<span class=\"params\">discount</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">price</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> price *  discount;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> tenPercentDiscouint = discountCurrying(<span class=\"number\">0.1</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> twentyPercentDiscouint = discountCurrying(<span class=\"number\">0.2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 10% discount by currying function</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(tenPercentDiscouint(<span class=\"number\">500</span>));\t\t<span class=\"comment\">// 50</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(tenPercentDiscouint(<span class=\"number\">1000</span>));\t\t<span class=\"comment\">// 100</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(tenPercentDiscouint(<span class=\"number\">2000</span>));\t\t<span class=\"comment\">// 200</span></span><br><span class=\"line\"><span class=\"comment\">// 20% discount by currying function</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(twentyPercentDiscouint(<span class=\"number\">2000</span>));\t<span class=\"comment\">// 400</span></span><br></pre></td></tr></table></figure></li>\n<li><p>General(通用) Currying Function</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// General Currying Function</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">curry</span>(<span class=\"params\">fn, ...args</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">..._arg</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fn(...args, ..._arg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">multiply</span>(<span class=\"params\">a, b, c</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a * b * c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// multiply currying function</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> multiplyBase2 = curry(multiply,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(multiplyBase2(<span class=\"number\">4</span>,<span class=\"number\">6</span>)); \t\t<span class=\"comment\">// 48</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">discount</span>(<span class=\"params\">price, discount</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * discount</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 10% discount by currying function</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> tenPercentDiscouint = curry(discount,<span class=\"number\">0.1</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(tenPercentDiscouint(<span class=\"number\">500</span>));\t<span class=\"comment\">// 50</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Constructor-建構-Function\"><a href=\"#Constructor-建構-Function\" class=\"headerlink\" title=\"Constructor(建構) Function\"></a>Constructor(建構) Function</h4><ul>\n<li>Constructor Function 可建立包含不同屬性(properties)的物件(object)<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\"><span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\"><span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> is eating.`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype.sleep = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> is sleeping.`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype.walk =<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> is walking.`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> Bob = <span class=\"keyword\">new</span> Person(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"number\">23</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> Bill = <span class=\"keyword\">new</span> Person(<span class=\"string\">&quot;Bill&quot;</span>, <span class=\"number\">40</span>);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"JavaScript-prototype-原型\"><a href=\"#JavaScript-prototype-原型\" class=\"headerlink\" title=\"JavaScript prototype (原型)\"></a>JavaScript prototype (原型)</h4><ul>\n<li>prototype 是 JavaScript function 的一個 屬性</li>\n<li>prototype 內有一個屬性 constructor 會指到原函數,也可利用 constructor 產生新的物件,新產生的物件可以利用__proto__指回原函數的內部函數<div style=\"width:700px; background:#fff;\">\n  <img src=\"/2021/09/23/review-1/1_-BEeuzTDD3LajJF772fpOw.png\" class=\"\" title=\"function_prototype_block\">\n</div></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">\t<span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> is eating.`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype.sleep = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> is sleeping.`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Person.prototype.walk = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> is walking.`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;-- Person --&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Person.prototype.__proto__)\t\t\t\t\t\t\t\t<span class=\"comment\">// [Object: null prototype] &#123;&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Person.prototype.constructor) \t\t\t\t\t\t<span class=\"comment\">// [Function: Person]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Person.prototype.constructor === Person)\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Person.prototype) </span><br><span class=\"line\">\t\t<span class=\"comment\">// &#123;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \teat: [Function(anonymous)],</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tsleep: [Function(anonymous)],</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \twalk: [Function(anonymous)]</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> Bob = <span class=\"keyword\">new</span> Person(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"number\">23</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;-- Bob --&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Bob.__proto__.constructor === Person)\t\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Bob.__proto__) </span><br><span class=\"line\">\t\t<span class=\"comment\">// &#123;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \teat: [Function(anonymous)],</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \tsleep: [Function(anonymous)],</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// \twalk: [Function(anonymous)]</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JavaScript-prototype-chain-原型鏈\"><a href=\"#JavaScript-prototype-chain-原型鏈\" class=\"headerlink\" title=\"JavaScript prototype chain(原型鏈)\"></a>JavaScript prototype chain(原型鏈)</h4><h5 id=\"prototype-chain-是-JavaScript-的-繼承機制\"><a href=\"#prototype-chain-是-JavaScript-的-繼承機制\" class=\"headerlink\" title=\"prototype chain 是 JavaScript 的 繼承機制\"></a>prototype chain 是 JavaScript 的 繼承機制</h5><h5 id=\"Object-prototype-let-apple-與-let-apple-new-Object-相同\"><a href=\"#Object-prototype-let-apple-與-let-apple-new-Object-相同\" class=\"headerlink\" title=\"Object prototype : let apple = {} 與 let apple = new Object() 相同\"></a>Object prototype : let apple = {} 與 let apple = new Object() 相同</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> orange = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> apple = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.__proto__)\t\t\t\t\t\t<span class=\"comment\">// null</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype)\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">// [Object: null prototype] &#123;&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype == apple.__proto__)\t<span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype.toString)\t\t\t\t\t\t<span class=\"comment\">// [Function: toString]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">Object</span>.prototype == orange.__proto__)\t<span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<div style=\"width:700px; background:#fff;\">\n    <img src=\"/2021/09/23/review-1/1_jnQajbOpNPHWXKgHslrZxw.png\" class=\"\">\n</div>\n\n<h5 id=\"prototype-chain-Function-prototype-Object-prototype\"><a href=\"#prototype-chain-Function-prototype-Object-prototype\" class=\"headerlink\" title=\"prototype chain : Function prototype + Object prototype\"></a>prototype chain : Function prototype + Object prototype</h5><div style=\"maxwidth:900px; background:#fff;\">\n    <img src=\"/2021/09/23/review-1/1_DBHDoUyVxoTy76iFsGcOkw.png\" class=\"\">\n</div>\n\n<h5 id=\"prototype-chain-Array-Object-prototype\"><a href=\"#prototype-chain-Array-Object-prototype\" class=\"headerlink\" title=\"prototype chain : Array + Object prototype\"></a>prototype chain : Array + Object prototype</h5><div style=\"width:700px; background:#fff;\">\n    <img src=\"/2021/09/23/review-1/1_fcoaBBBDhy8eCxqBvHU0jQ.png\" class=\"\">\n</div>\n\n<h5 id=\"prototype-chain-for-all\"><a href=\"#prototype-chain-for-all\" class=\"headerlink\" title=\"prototype chain for all\"></a>prototype chain for all</h5><div style=\"maxwidth:1000px; background:#fff;\">\n    <img src=\"/2021/09/23/review-1/1_Evoq9q8LCyxKteA9e-_31w.png\" class=\"\">\n</div>\n\n\n<h4 id=\"Memoization\"><a href=\"#Memoization\" class=\"headerlink\" title=\"Memoization\"></a>Memoization</h4><ul>\n<li><p>Memoization是一種優化技術,透過儲存曾計算的的結果,來增加應用程序的執行</p>\n</li>\n<li><p>一般費式數列遞迴計算(傳回第幾個費式樹列直)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;count:&quot;</span>, n);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fibonacci(n - <span class=\"number\">1</span>) + fibonacci(n - <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">0</span>&#125;</span> --&gt;`</span>, fibonacci(<span class=\"number\">0</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">1</span>&#125;</span> --&gt;`</span>, fibonacci(<span class=\"number\">1</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">2</span>&#125;</span> --&gt;`</span>, fibonacci(<span class=\"number\">2</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">3</span>&#125;</span> --&gt;`</span>, fibonacci(<span class=\"number\">3</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">5</span>&#125;</span> --&gt;`</span>, fibonacci(<span class=\"number\">5</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// result ----</span></span><br><span class=\"line\"><span class=\"comment\">// &gt;node fibonacci.js</span></span><br><span class=\"line\"><span class=\"comment\">// count: 0</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci0 --&gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci1 --&gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 2</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 0</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci2 --&gt; 2</span></span><br><span class=\"line\"><span class=\"comment\">// count: 3</span></span><br><span class=\"line\"><span class=\"comment\">// count: 2</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 0</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci3 --&gt; 3</span></span><br><span class=\"line\"><span class=\"comment\">// count: 5</span></span><br><span class=\"line\"><span class=\"comment\">// count: 4</span></span><br><span class=\"line\"><span class=\"comment\">// count: 3</span></span><br><span class=\"line\"><span class=\"comment\">// count: 2</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 0</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 2</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 0</span></span><br><span class=\"line\"><span class=\"comment\">// count: 3</span></span><br><span class=\"line\"><span class=\"comment\">// count: 2</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">// count: 0</span></span><br><span class=\"line\"><span class=\"comment\">// count: 1</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci5 --&gt; 8</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n<li><p>Memoization費式數列(傳回第幾個費式樹列直)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">memolizedFibonacci</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> memo = &#123;&#125;;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fibonacci</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (memo[n]) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> memo[n];</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;count : &quot;</span>,n);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t \t<span class=\"keyword\">return</span> memo[n] = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> memo[n] = fibonacci(\tn-<span class=\"number\">1</span>) + fibonacci(n-<span class=\"number\">2</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fibonacci;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> countFibonacci = memolizedFibonacci();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">0</span>&#125;</span> --&gt;`</span>, countFibonacci(<span class=\"number\">0</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">1</span>&#125;</span> --&gt;`</span>, countFibonacci(<span class=\"number\">1</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">2</span>&#125;</span> --&gt;`</span>, countFibonacci(<span class=\"number\">2</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">3</span>&#125;</span> --&gt;`</span>, countFibonacci(<span class=\"number\">3</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">` fibonacci<span class=\"subst\">$&#123;<span class=\"number\">5</span>&#125;</span> --&gt;`</span>, countFibonacci(<span class=\"number\">5</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// result ----</span></span><br><span class=\"line\"><span class=\"comment\">// &gt;node fibonacci2.js</span></span><br><span class=\"line\"><span class=\"comment\">// count :  0</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci0 --&gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">// count :  1</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci1 --&gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">// count :  2</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci2 --&gt; 2</span></span><br><span class=\"line\"><span class=\"comment\">// count :  3</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci3 --&gt; 3</span></span><br><span class=\"line\"><span class=\"comment\">// count :  5</span></span><br><span class=\"line\"><span class=\"comment\">// count :  4</span></span><br><span class=\"line\"><span class=\"comment\">//  fibonacci5 --&gt; 8</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Higher-order-function\"><a href=\"#Higher-order-function\" class=\"headerlink\" title=\"Higher-order function\"></a>Higher-order function</h4><ul>\n<li>接收函式做為引數的函式(callback function) 或 回傳結果為函式的函式</li>\n<li>map, filter 和 reduce 即為內建的Higher-order function(傳回函數) </li>\n</ul>\n<h4 id=\"Event-delegation-事件代理-事件委派\"><a href=\"#Event-delegation-事件代理-事件委派\" class=\"headerlink\" title=\"Event delegation(事件代理,事件委派)\"></a>Event delegation(事件代理,事件委派)</h4><ul>\n<li>Event listen 放在父元素,而非個別的元素,如此可精簡程式及處理動態產生的元素</li>\n</ul>\n<h4 id=\"事件傳遞機制：捕獲與冒泡\"><a href=\"#事件傳遞機制：捕獲與冒泡\" class=\"headerlink\" title=\"事件傳遞機制：捕獲與冒泡\"></a>事件傳遞機制：捕獲與冒泡</h4><ul>\n<li>DOM 事件傳遞機制分成 3 階段：<ul>\n<li>Capturing Phase 捕獲階段</li>\n<li>Target Phase 傳遞到元素本身</li>\n<li>ubbling Phase 冒泡階段</li>\n</ul>\n</li>\n<li>事件傳遞的兩個原則<ul>\n<li>先捕獲，再冒泡</li>\n<li>當事件傳到 target 本身，沒有分捕獲跟冒泡</li>\n</ul>\n</li>\n<li>當使用 event.stopPropagation()，事件傳遞就會停在設置的地方<ul>\n<li>若在捕獲階段：阻止事件往下傳遞</li>\n<li>若在冒泡階段：阻止事件向上傳遞</li>\n</ul>\n</li>\n<li>如果要讓同一層的事件也要停止，就用 stopImmediatePropagation()</li>\n</ul>\n<div style=\"width:700px\">\n    <img src=\"/2021/09/23/review-1/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<p>圖片來自 <a href=\"https://www.w3.org/TR/DOM-Level-3-Events/#event-flow\">W3C</a></p>\n<h4 id=\"preventDefault-與-stopPropagation-的差異\"><a href=\"#preventDefault-與-stopPropagation-的差異\" class=\"headerlink\" title=\"preventDefault 與 stopPropagation 的差異\"></a>preventDefault 與 stopPropagation 的差異</h4><ul>\n<li>preventDefault() 停止元素預設事件發生，如果只是要預防 &lt;a href=”#”&gt; 回到頁首，可加上這個函數</li>\n<li>stopPropagation() 停止作用的元素冒泡</li>\n</ul>\n<h4 id=\"JavaScript-asynchronous-非同步-operation-處理方式\"><a href=\"#JavaScript-asynchronous-非同步-operation-處理方式\" class=\"headerlink\" title=\"JavaScript asynchronous(非同步) operation 處理方式\"></a>JavaScript asynchronous(非同步) operation 處理方式</h4><ul>\n<li><p>Callback : 藉由參數（argument）傳入一個函式,以便完成某件程序後執行必要的程式</p>\n</li>\n<li><p>Promise :<br>  promise 為 ES6 增加的 object(物件)<br>  他有三種狀態,</p>\n<blockquote>\n<p>pending(初始狀態)<br>fulfilled(事件完成)<br>rejected(事件失敗)</p>\n</blockquote>\n<p>  狀態的改變只有兩種可能 </p>\n<blockquote>\n<p>   從 pending 變成 fulfilled<br>   從 pending 變成 rejected</p>\n</blockquote>\n<p>  一但狀態改變就會固定，永遠不會再改變狀態.</p>\n</li>\n<li><p>async/await :  ES2017(ES8) 增加的語法, 使非同步的程式看起來像是同步的程式</p>\n</li>\n</ul>\n<h4 id=\"recursion-遞迴\"><a href=\"#recursion-遞迴\" class=\"headerlink\" title=\"recursion(遞迴)\"></a>recursion(遞迴)</h4><ul>\n<li>透過函式重複呼叫自己最終得到計算結果的一種方法</li>\n<li>這是一個常用處理排序或遍歷(traversing)的方法</li>\n</ul>\n<h4 id=\"Hoisting-提升\"><a href=\"#Hoisting-提升\" class=\"headerlink\" title=\"Hoisting (提升)\"></a>Hoisting (提升)</h4><ul>\n<li>var 宣告提升,但賦值不會提升</li>\n<li>let, const 有提升,但賦值前不能使用(所以外部宣告的變數不能使用)</li>\n<li>TDZ (Temporal Dead Zone)暫時性死區: let、const 在設定值前不能使用</li>\n<li>function 也會提升,所以可以將 function 寫在呼叫之後</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// var 宣告提升,但賦值不會提升</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SayHello</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello #1 <span class=\"subst\">$&#123;name&#125;</span>.`</span>); \t\t<span class=\"comment\">//Hello #1 undefined.</span></span><br><span class=\"line\">\t<span class=\"comment\">// console.log(`Hello #1 $&#123;guest&#125;.`);\t// guest is not defined</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> name = <span class=\"string\">&quot;Bob&quot;</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello #2 <span class=\"subst\">$&#123;name&#125;</span>.`</span>);\t\t\t<span class=\"comment\">// Hello #2 Bob.</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">SayHello();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// let, const 有提升,但賦值前不能使用(所以外部宣告的變數不能使用)</span></span><br><span class=\"line\"><span class=\"comment\">// TDZ (Temporal Dead Zone)暫時性死區: let、const 在設定值前不能使用</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> girl = <span class=\"string\">&quot;Mery&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> boy = <span class=\"string\">&quot;Bill&quot;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SayHello2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello #1 <span class=\"subst\">$&#123;girl&#125;</span> <span class=\"subst\">$&#123;boy&#125;</span>.`</span>);  <span class=\"comment\">// Cannot access &#x27;girl&#x27; before initialization, Cannot access &#x27;boy&#x27; before initialization</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> girl = <span class=\"string\">&quot;Angel&quot;</span>;\t\t\t\t\t\t\t\t</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> boy = <span class=\"string\">&quot;Jack&quot;</span></span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello #2 <span class=\"subst\">$&#123;girl&#125;</span> <span class=\"subst\">$&#123;boy&#125;</span>.`</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">SayHello2();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JavaScript-的繼承\"><a href=\"#JavaScript-的繼承\" class=\"headerlink\" title=\"JavaScript 的繼承\"></a>JavaScript 的繼承</h4><h5 id=\"prototype-範例\"><a href=\"#prototype-範例\" class=\"headerlink\" title=\"prototype 範例\"></a>prototype 範例</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// inheritance2.js</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dog</span>(<span class=\"params\">name, color</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">\t<span class=\"built_in\">this</span>.color = color;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Dog.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Dog.prototype.getColor = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.color;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// DogSell 繼承 Dog</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DogSell</span>(<span class=\"params\">name, color, price</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 繼承原型的參數</span></span><br><span class=\"line\">\tDog.call(<span class=\"built_in\">this</span>, name, color);</span><br><span class=\"line\">\t<span class=\"built_in\">this</span>.price = price;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 繼承原型的函數</span></span><br><span class=\"line\">DogSell.prototype = <span class=\"built_in\">Object</span>.create(Dog.prototype);</span><br><span class=\"line\"><span class=\"comment\">// 加入新的函數</span></span><br><span class=\"line\">DogSell.prototype.getInfo = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"string\">`The dog name is <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.getName()&#125;</span> and sell $<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.price&#125;</span>.`</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> dog1 = <span class=\"keyword\">new</span> Dog(<span class=\"string\">&quot;Momo&quot;</span>, <span class=\"string\">&quot;black&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`The dog #1 name is <span class=\"subst\">$&#123;dog1.getName()&#125;</span> and color is <span class=\"subst\">$&#123;dog1.getColor()&#125;</span>.`</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> dogsell1 = <span class=\"keyword\">new</span> DogSell(<span class=\"string\">&quot;WaWa&quot;</span>, <span class=\"string\">&quot;white&quot;</span>, <span class=\"number\">1000</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dogsell1.getInfo());</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"class-範例\"><a href=\"#class-範例\" class=\"headerlink\" title=\"class 範例\"></a>class 範例</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// inheritance.js</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name, color</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.color = color;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">getName</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.name;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">getColor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.color;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// DogSell 繼承 Dog</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DogSell</span> <span class=\"keyword\">extends</span> <span class=\"title\">Dog</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name, color, price</span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">super</span>(name, color);</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.price = price;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"title\">getInfo</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">`The dog name is <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.getName()&#125;</span> and sell $<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.price&#125;</span>.`</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> dog1 = <span class=\"keyword\">new</span> Dog(<span class=\"string\">&quot;Momo&quot;</span>, <span class=\"string\">&quot;black&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`The dog #1 name is <span class=\"subst\">$&#123;dog1.getName()&#125;</span> and color is <span class=\"subst\">$&#123;dog1.getColor()&#125;</span>.`</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> dogsell1 = <span class=\"keyword\">new</span> DogSell(<span class=\"string\">&quot;WaWa&quot;</span>, <span class=\"string\">&quot;white&quot;</span>, <span class=\"number\">1000</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dogsell1.getInfo());</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Fetch-API\"><a href=\"#Fetch-API\" class=\"headerlink\" title=\"Fetch API\"></a>Fetch API</h4><p>fetch()是 XMLHttpRequest 的升级版,提供了一個能獲取包含跨網路資源在的資源介面。它有點像我們所熟悉的 XMLHttpRequest ，但這個新的 API 提供了更強更彈性的功能。</p>\n<h4 id=\"Logical-Operator-vs-Nullish-Coalescing-Operator\"><a href=\"#Logical-Operator-vs-Nullish-Coalescing-Operator\" class=\"headerlink\" title=\"Logical Operator vs Nullish Coalescing Operator\"></a>Logical Operator vs Nullish Coalescing Operator</h4><ul>\n<li><p>Logical Operator:當值為 undefined, null, false 或 0 則傳回右邊的值 </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">false</span> || <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns Hello</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">undefined</span> || <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns Hello</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> || <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns Hello</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">0</span> || <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns Hello</span></span><br></pre></td></tr></table></figure></li>\n<li><p>Nullish Coalescing Operator::當值為 undefined 或 null 則傳回右邊的值</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">false</span> ?? <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns false</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">undefined</span> ?? <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns Hello</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">null</span> ?? <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns Hello</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">0</span> ?? <span class=\"string\">&#x27;Hello&#x27;</span>); <span class=\"comment\">//Returns 0</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><pre><code>+ [Fetch API 教程](https://www.ruanyifeng.com/blog/2020/12/fetch-tutorial.html)\n</code></pre>\n<p>圖片 from <a href=\"https://chamikakasun.medium.com/javascript-prototype-and-prototype-chain-explained-fdc2ec17dd04\">JavaScript Prototype and Prototype Chain explained</a></p>\n","categories":["Coding"],"tags":["javascript","review"]},{"title":"CSS Review","url":"/2021/09/23/review-2/","content":"<h3 id=\"CSS-Box-model\"><a href=\"#CSS-Box-model\" class=\"headerlink\" title=\"CSS Box model\"></a>CSS Box model</h3><p>Box model 規範 HTML 每個元素(element)的基本設計規範<br>Box model 包含 content, padding, border and margin</p>\n<ul>\n<li>content : 放文字或圖像的地方</li>\n<li>border : 為 element 的邊框</li>\n<li>padding : content 與 border 間的區域</li>\n<li>margin : element 與鄰近 element 的距離</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"CSS-sprite\"><a href=\"#CSS-sprite\" class=\"headerlink\" title=\"CSS sprite\"></a>CSS sprite</h3><p>將多個小圖合併成一張大圖,以節省圖檔load的時間</p>\n<h3 id=\"CSS-preprocessor-預處理器\"><a href=\"#CSS-preprocessor-預處理器\" class=\"headerlink\" title=\"CSS preprocessor(預處理器)\"></a>CSS preprocessor(預處理器)</h3><ul>\n<li>CSS preprocessor 可以使用自訂的語法,經過 compile 產生 CSS</li>\n<li>CSS preprocessor 可提供一些 CSS 未支援的功能,如 變數, 巢狀 selector,使得CSS可讀性較高,也較易維護</li>\n<li>常見的 CSS preprocessor 有 Sass/SCSS, Less</li>\n</ul>\n<h3 id=\"CSS-specificity-權重\"><a href=\"#CSS-specificity-權重\" class=\"headerlink\" title=\"CSS specificity(權重)\"></a>CSS specificity(權重)</h3><ul>\n<li>權重就是指 css 的優先權,相同權重為後令押前令,以最後設定為其設定值</li>\n<li>權重大小 inline style &gt; ID &gt; Class &gt; Element &gt; *</li>\n<li>!important 可蓋過所有的權重</li>\n<li>另外還有 psuedo-class(偽類) =&gt; :nth-child(),:link, :hover, :focus 及 attribute（屬性選擇器）= [type:checkbox],,[attr] 都相當於 class</li>\n</ul>\n<h3 id=\"Pseudo-classes-偽類-and-pseudo-elements-偽元素\"><a href=\"#Pseudo-classes-偽類-and-pseudo-elements-偽元素\" class=\"headerlink\" title=\"Pseudo-classes(偽類) and pseudo-elements(偽元素)\"></a>Pseudo-classes(偽類) and pseudo-elements(偽元素)</h3><ul>\n<li>偽類是應用於一個元素處於特定的狀態,如 :link,:hover</li>\n<li>偽元素的作用就像您在標記中添加了一個全新的 HTML 元素, 如 ::before , ::after</li>\n</ul>\n<h3 id=\"什麼是-important\"><a href=\"#什麼是-important\" class=\"headerlink\" title=\"什麼是 !important\"></a>什麼是 !important</h3><p>!important 擁有 CSS 最高的權重,可壓過 CSS 前面所有的設定</p>\n<h3 id=\"visibility-hidden-和-display-none-的差別\"><a href=\"#visibility-hidden-和-display-none-的差別\" class=\"headerlink\" title=\"visibility: hidden 和 display: none 的差別\"></a>visibility: hidden 和 display: none 的差別</h3><ul>\n<li>visibility: hidden 隱藏 element 佔有空間</li>\n<li>display: none 隱藏 element 不佔空間</li>\n</ul>\n<h3 id=\"position-屬性\"><a href=\"#position-屬性\" class=\"headerlink\" title=\"position 屬性\"></a>position 屬性</h3><ul>\n<li>static 為 default position 值, top, right, bottom, left 和 z-index 皆無作用</li>\n<li>relative 可相對自己原本的位置調整位置,不會影原本對應的位置</li>\n<li>absolute 會被從原本頁面layout移除,不會占用特定的位置,參考位置是最接近自己但position 不是 static(default position 值) 的父層</li>\n<li>fixed 與 absolute 相似,但參考位置 Viewport(用戶網頁的可視區域)</li>\n<li>sticky : 是 relative 和 fixed 的混和屬性,會排在一搬排列的位置,但移動到設定位置就不會再移動<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"comment\">/* css */</span></span></span><br><span class=\"line\">\t\t.container &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">overflow</span>: scroll;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t.box &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">80%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t.red &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background-color</span>: red;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t.blue &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background-color</span>: blue;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t.green &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background-color</span>: green;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">position</span>: sticky;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">top</span>: <span class=\"number\">20px</span> ;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box red&quot;</span>&gt;</span>red<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box green&quot;</span>&gt;</span>green<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box blue&quot;</span>&gt;</span>blue<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<!-- set style  -->\n<style>\n    /* css */\n    .container {\n        overflow: scroll;\n        margin: 50px;\n        width: 200px;\n        height: 300px;\n        border: 1px solid black\n    }\n    .box {\n        padding: 10px;\n        margin: 0 auto;\n        text-align: center;\n        width: 80%;\n        height: 100px;\n    }\n    .red {\n        background-color: red;\n    }\n    .blue {\n        background-color: blue;\n        height: 300px;\n    }\n    .green {\n        background-color: green;\n        position: sticky;\n        top: 20px ;\n        left: 0;\n    }\n</style>\n\n<!-- html -->\n<div class=\"container\">\n    <div class=\"box red\">red</div>\n    <div class=\"box green\">green</div>\n    <div class=\"box blue\">blue</div>\n</div>\n\n\n<h3 id=\"box-sizing-border-box-的作用\"><a href=\"#box-sizing-border-box-的作用\" class=\"headerlink\" title=\"box-sizing:border-box 的作用\"></a>box-sizing:border-box 的作用</h3><ul>\n<li>告訴 browser width,height 包含 padding 及 border</li>\n<li>設定 border-box 使得在調整畫面時,較不易產生跑版</li>\n</ul>\n<h3 id=\"inline-inline-block-和-block-的差異\"><a href=\"#inline-inline-block-和-block-的差異\" class=\"headerlink\" title=\"inline, inline-block 和 block 的差異\"></a>inline, inline-block 和 block 的差異</h3><ul>\n<li>block 會列在新的一行,並占有整行的空間</li>\n<li>inline 不會列在新的一行,與前一元素列在同一行<ul>\n<li>height,width 不可調</li>\n<li>margin 左右可調,上下不可調, </li>\n<li>padding 左右可調,上下可調但不影響隔壁元件(會影響 background)</li>\n</ul>\n</li>\n<li>inline-block 與 inline 相似但可以設定 height, width, margin 和 padding 皆可調</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t.debug &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">600px</span>;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t.wrap &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span></span><br><span class=\"line\"><span class=\"css\">    \t<span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">    \t<span class=\"attribute\">line-height</span>: normal;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t/* display: block;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">div</span> deafult is  &quot;<span class=\"attribute\">display</span>: block;&quot;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>,<span class=\"attribute\">width</span>  可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>,<span class=\"attribute\">padding</span> 可調 */</span></span><br><span class=\"line\">\t\t.box1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">display</span>: block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">120px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">line-height</span>: normal;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t/* display: inline;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>,<span class=\"attribute\">width</span>  不可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span> 左右可調,上下不可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span> 左右可調,上下可調但不影響隔壁元件(會影響 <span class=\"attribute\">background</span>) */</span></span><br><span class=\"line\">\t\t.box2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">display</span>: inline;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">120px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">line-height</span>: normal;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t/* inline-block</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span> 可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>  可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span> 可調</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span> 可調 */</span></span><br><span class=\"line\">\t\t.box3 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">background</span>: yellow;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">width</span>: <span class=\"number\">120px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">height</span>: <span class=\"number\">120px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">padding</span>: <span class=\"number\">5px</span> <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"attribute\">line-height</span>: normal;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;debug&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>111 block<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>222 block<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span>333 block<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>111 inline<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>222 inline<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span>333 inline<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrap&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>111 inline-block<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>222 inline-block<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span>333 inline-block<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<!-- set style  -->\n<style>\n    .debug {\n        border: 1px solid black;\n        width: 600px;\n    }\n    .wrap {\n        border: 1px solid black;\n        margin: 10px;\n        font-size: 24px;\n    padding: 0;\n    line-height: normal;\n    }\n\n    /* display: block;\n        div deafult is  \"display: block;\"\n        height,width  可調\n        margin,padding 可調 */\n    .box1 {\n        border: 1px solid black;\n        display: block;\n        background: yellow;\n        width: 120px;\n        height: 100px;\n        margin: 5px 5px;\n        padding: 5px 5px;\n        line-height: normal;\n    }\n\n    /* display: inline;\n        height,width  不可調\n        margin 左右可調,上下不可調\n        padding 左右可調,上下可調但不影響隔壁元件(會影響 background) */\n    .box2 {\n        border: 1px solid black;\n        display: inline;\n        background: yellow;\n        width: 120px;\n        height: 100px;\n        margin: 5px 5px;\n        padding: 5px 5px;\n        line-height: normal;\n    }\n\n    /* inline-block\n        height 可調\n        width  可調\n        margin 可調\n        padding 可調 */\n    .box3 {\n        border: 1px solid black;\n        display: inline-block;\n        background: yellow;\n        width: 120px;\n        height: 120px;\n        margin: 5px 5px;\n        padding: 5px 5px;\n        line-height: normal;\n    }\n</style>\n\n<!-- html -->\n<div class=\"debug\">\n    <div class=\"wrap\">\n        <div class=\"box1\">111 block</div>\n        <div class=\"box1\">222 block</div>\n        <div class=\"box1\">333 block</div>\n    </div>\n    <div class=\"wrap\">\n        <div class=\"box2\">111 inline</div>\n        <div class=\"box2\">222 inline</div>\n        <div class=\"box2\">333 inline</div>\n    </div>\n    <div class=\"wrap\">\n        <div class=\"box3\">111 inline-block</div>\n        <div class=\"box3\">222 inline-block</div>\n        <div class=\"box3\">333 inline-block</div>\n    </div>\n</div>\n\n\n<h3 id=\"Flexbox-與-Grid-的差異\"><a href=\"#Flexbox-與-Grid-的差異\" class=\"headerlink\" title=\"Flexbox 與 Grid 的差異\"></a>Flexbox 與 Grid 的差異</h3><ul>\n<li>Flexbox 是一維的 layout設計, 可選擇水平或垂直排列</li>\n<li>Grid 是二維的 layout設計,有如填表格</li>\n<li>這兩種方式相對於一搬的設計都可減少CSS的數量</li>\n<li>這兩種設計可混合使用</li>\n</ul>\n<h3 id=\"現代置中的方法\"><a href=\"#現代置中的方法\" class=\"headerlink\" title=\"現代置中的方法\"></a>現代置中的方法</h3><h4 id=\"transform-translate\"><a href=\"#transform-translate\" class=\"headerlink\" title=\"transform/translate\"></a>transform/translate</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.container1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: white;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">600px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">400px</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.child1 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">transform</span>: <span class=\"built_in\">translate</span>(-<span class=\"number\">50%</span>, -<span class=\"number\">50%</span>);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>:<span class=\"number\">50px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container1&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;child1&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<style>\n    .container1 {\n        position: relative;\n\n        border: 1px solid black;\n        background: white;\n        width: 600px;\n        height: 400px\n    }\n\n    .child1 {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n\n        border: 1px solid black;\n        width: 50px;\n        height:50px;\n    }\n</style>\n\n<div class=\"container1\">\n    <div class=\"child1\">\n    </div>\n</div>\n\n<h4 id=\"flexbox\"><a href=\"#flexbox\" class=\"headerlink\" title=\"flexbox\"></a>flexbox</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.container2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">justify-content</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">align-items</span>: center;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: white;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">600px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">400px</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.child2 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>:<span class=\"number\">50px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container2&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;child2&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<style>\n    .container2 {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        border: 1px solid black;\n        background: white;\n        width: 600px;\n        height: 400px\n    }\n\n    .child2 {\n        border: 1px solid black;\n        width: 50px;\n        height:50px;\n    }\n</style>\n\n<div class=\"container2\">\n    <div class=\"child2\">\n    </div>\n</div>\n\n<h4 id=\"grid\"><a href=\"#grid\" class=\"headerlink\" title=\"grid\"></a>grid</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t.container3 &#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">display</span>: grid;</span></span><br><span class=\"line\"><span class=\"css\">  place-items: center;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: white;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">600px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: <span class=\"number\">400px</span></span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t.child3 &#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>:<span class=\"number\">50px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container3&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;child3&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<style>\n    .container3 {\n  display: grid;\n  place-items: center;\n\n        border: 1px solid black;\n        background: white;\n        width: 600px;\n        height: 400px\n    }\n\n    .child3 {\n        border: 1px solid black;\n        width: 50px;\n        height:50px;\n    }\n</style>\n\n<div class=\"container3\">\n    <div class=\"child3\">\n    </div>\n</div>\n\n\n<h3 id=\"CSS-水平置中\"><a href=\"#CSS-水平置中\" class=\"headerlink\" title=\"CSS 水平置中\"></a>CSS 水平置中</h3><h4 id=\"text-align-center\"><a href=\"#text-align-center\" class=\"headerlink\" title=\"text-align: center\"></a>text-align: center</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t葡萄美酒夜光杯</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"margin-0-auto\"><a href=\"#margin-0-auto\" class=\"headerlink\" title=\"margin: 0 auto\"></a>margin: 0 auto</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"comment\">/* text-align: center; */</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.content &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"relative-translateX\"><a href=\"#relative-translateX\" class=\"headerlink\" title=\"relative + translateX\"></a>relative + translateX</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.content &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(-<span class=\"number\">50%</span>);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"absolute-translateX\"><a href=\"#absolute-translateX\" class=\"headerlink\" title=\"absolute + translateX\"></a>absolute + translateX</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.content &#123;</span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">width</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(-<span class=\"number\">50%</span>);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"CSS-垂直置中\"><a href=\"#CSS-垂直置中\" class=\"headerlink\" title=\"CSS 垂直置中\"></a>CSS 垂直置中</h3><h4 id=\"line-height-單行文字置中\"><a href=\"#line-height-單行文字置中\" class=\"headerlink\" title=\"line-height 單行文字置中\"></a>line-height 單行文字置中</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.content&#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">line-height</span>:<span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\tLorem ipsam.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Line-height-inline-block-多行文字置中\"><a href=\"#Line-height-inline-block-多行文字置中\" class=\"headerlink\" title=\"Line-height + inline-block 多行文字置中\"></a>Line-height + inline-block 多行文字置中</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"selector-tag\">h2</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.box&#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">line-height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t.content&#123;</span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">height</span>: auto;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">line-height</span>:<span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t\t<span class=\"attribute\">vertical-align</span>: middle;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>涼 州 曲<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯，欲飲琵琶馬上催。醉臥沙場君莫笑，古來征戰幾人回。</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"僞元素-before-inline-block\"><a href=\"#僞元素-before-inline-block\" class=\"headerlink\" title=\"僞元素::before + inline-block\"></a>僞元素::before + inline-block</h4><p>藉由 僞元素::before,將外框撐開 </p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-tag\">h2</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-class\">.box</span><span class=\"selector-pseudo\">::before</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">content</span>:<span class=\"string\">&#x27;&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">vertical-align</span>: middle;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box .content&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">vertical-align</span>: middle;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>涼 州 曲<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯，欲飲琵琶馬上催。醉臥沙場君莫笑，古來征戰幾人回。</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"absolute-translate\"><a href=\"#absolute-translate\" class=\"headerlink\" title=\"absolute + translate\"></a>absolute + translate</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">h2&#123;</span><br><span class=\"line\">  text-align: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\">  width: 500px;</span><br><span class=\"line\">  border: 1px solid #f00;</span><br><span class=\"line\">  margin: auto;</span><br><span class=\"line\">  height: 200px;</span><br><span class=\"line\"></span><br><span class=\"line\">  position: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box .content&#123;</span><br><span class=\"line\">  width: 400px;</span><br><span class=\"line\">  background: #ccc;</span><br><span class=\"line\">  position: absolute;</span><br><span class=\"line\">  top:50%;</span><br><span class=\"line\">  left: 50%;</span><br><span class=\"line\">  transform: translate(-50%, -50%);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>涼 州 曲<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯，欲飲琵琶馬上催。醉臥沙場君莫笑，古來征戰幾人回。</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"flex-align-items\"><a href=\"#flex-align-items\" class=\"headerlink\" title=\"flex + align-items\"></a>flex + align-items</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-tag\">h2</span>&#123;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">justify-content</span>: center;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">align-items</span>: center; </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.content&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>涼 州 曲<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯，欲飲琵琶馬上催。醉臥沙場君莫笑，古來征戰幾人回。</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"calc-對固定高度內容\"><a href=\"#calc-對固定高度內容\" class=\"headerlink\" title=\"calc 對固定高度內容\"></a>calc 對固定高度內容</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.content&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">top</span>:<span class=\"built_in\">calc</span>((<span class=\"number\">100%</span> - <span class=\"number\">70px</span>) / <span class=\"number\">2</span>);</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>:auto;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">70px</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯，欲飲琵琶馬上催。醉臥沙場君莫笑，古來征戰幾人回。</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"relative-translateY\"><a href=\"#relative-translateY\" class=\"headerlink\" title=\"relative + translateY\"></a>relative + translateY</h4><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">.box&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">height</span>: <span class=\"number\">250px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#f00</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.content&#123;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">background</span>: <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(-<span class=\"number\">50%</span>);</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"attribute\">margin</span>: auto;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t葡萄美酒夜光杯，欲飲琵琶馬上催。醉臥沙場君莫笑，古來征戰幾人回。</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n","categories":["Front End"],"tags":["css","review"]},{"title":"HTML review","url":"/2021/09/23/review-3/","content":"<h3 id=\"HTML-Entities-實體-是什麼\"><a href=\"#HTML-Entities-實體-是什麼\" class=\"headerlink\" title=\"HTML Entities(實體) 是什麼\"></a>HTML Entities(實體) 是什麼</h3><p>HTML Entities是以&amp;開頭;結束的字串,這常用來顯示一些保留字元,不可見字元或鍵盤難以輸入的字元<br><a href=\"https://unicode-table.com/en/html-entities/\">常用 Entity</a></p>\n<table>\n<thead>\n<tr>\n<th>Symbol</th>\n<th>Description</th>\n<th>Entity Name</th>\n<th>Number Code</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>“</td>\n<td>quotation mark</td>\n<td>&amp;quot;</td>\n<td>&amp;#34;</td>\n</tr>\n<tr>\n<td>‘</td>\n<td>apostrophe</td>\n<td>&amp;apos;</td>\n<td>&amp;#39;</td>\n</tr>\n<tr>\n<td>&amp;</td>\n<td>ampersand</td>\n<td>&amp;amp;</td>\n<td>&amp;#38;</td>\n</tr>\n<tr>\n<td>&lt;</td>\n<td>less-than</td>\n<td>&amp;lt;</td>\n<td>&amp;#60;</td>\n</tr>\n<tr>\n<td>&gt;</td>\n<td>greater-than</td>\n<td>&amp;gt;</td>\n<td>&amp;#62;</td>\n</tr>\n<tr>\n<td>~</td>\n<td>tilde operator</td>\n<td>&amp;sim;</td>\n<td>&amp;#8764;</td>\n</tr>\n<tr>\n<td>*</td>\n<td>Asterisk</td>\n<td>&amp;ast;</td>\n<td>&amp;#42;</td>\n</tr>\n</tbody></table>\n<span id=\"more\"></span>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>HTML Entities<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"symbol\">&amp;lt;</span>div id = <span class=\"symbol\">&amp;quot;</span>character<span class=\"symbol\">&amp;quot;</span><span class=\"symbol\">&amp;gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<body>\n  &lt;div id = &quot;character&quot;&gt;\n</body>\n\n<h3 id=\"HTML-Semantic-Elements-語意標籤\"><a href=\"#HTML-Semantic-Elements-語意標籤\" class=\"headerlink\" title=\"HTML Semantic Elements(語意標籤)\"></a>HTML Semantic Elements(語意標籤)</h3><p>一些有代表意義的 HTML Element,如以下</p>\n<ul>\n<li>&lt;article&gt;</li>\n<li>&lt;aside&gt;</li>\n<li>&lt;details&gt;</li>\n<li>&lt;figcaption&gt;</li>\n<li>&lt;figure&gt;</li>\n<li>&lt;footer&gt;</li>\n<li>&lt;header&gt;</li>\n<li>&lt;main&gt;</li>\n<li>&lt;mark&gt;</li>\n<li>&lt;nav&gt;</li>\n<li>&lt;section&gt;</li>\n<li>&lt;summary&gt;</li>\n<li>&lt;time&gt;</li>\n</ul>\n<div style=\"width:400px;\">\n    <img src=\"/2021/09/23/review-3/img_sem_elements.gif\" class=\"\">\n</div>\n\n<h3 id=\"meta-tag\"><a href=\"#meta-tag\" class=\"headerlink\" title=\"meta tag\"></a>meta tag</h3><p>meta tag 是 HTML 的 tag 包含於網頁中,包含對網頁的描述,它不會顯示於網頁中,但會提供給搜尋引擎及網路爬蟲讀取</p>\n<h3 id=\"HTML5-Web-Storage\"><a href=\"#HTML5-Web-Storage\" class=\"headerlink\" title=\"HTML5 Web Storage\"></a>HTML5 Web Storage</h3><ul>\n<li>Session Storage : 儲存資料於瀏覽器,當網頁關閉或還原(restore)即會清除</li>\n<li>Local Storage : 儲存資料於瀏覽器,甚至當瀏覽器關掉再開都還會存在</li>\n</ul>\n<h3 id=\"Web-Workers\"><a href=\"#Web-Workers\" class=\"headerlink\" title=\"Web Workers\"></a>Web Workers</h3><p>一搬 JavaScript 是 Main Thread 執行，但若把程式碼放在 Web Workers 就可另開 Worker Thread，兩條線互不影響，讓 JavaScript 在背景執行，並且兩線可由訊息溝通-使用 postMessage 發送訊息、onmessage 接收訊息。通常我們會將需要長時間運算且不含 Window 或 DOM Element 操作的程式碼放在 Web Workers，好處是不阻塞 Main Thread。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.Worker) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> myWorker = <span class=\"keyword\">new</span> Worker(<span class=\"string\">&#x27;worker.js&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  first.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    myWorker.postMessage([first.value, second.value]);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Message posted to worker&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  second.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    myWorker.postMessage([first.value, second.value]);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Message posted to worker&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  myWorker.onmessage = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    result.textContent = e.data;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;Message received from worker&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HTML\"><a href=\"#HTML\" class=\"headerlink\" title=\"HTML\"></a>HTML</h3><p>HyperText Markup Language(超文本標記語言)是一種用於建立網頁的標記語言</p>\n<h3 id=\"HTML-attributes-屬性\"><a href=\"#HTML-attributes-屬性\" class=\"headerlink\" title=\"HTML attributes(屬性)\"></a>HTML attributes(屬性)</h3><p>HTML attributes 是 HTML tag 附加的訊息,位於 tag 名稱之後 結束尖括號之前,可以設定或調整屬性,以達到使用者預期之行為</p>\n<h3 id=\"data-attributes-的作用\"><a href=\"#data-attributes-的作用\" class=\"headerlink\" title=\"data-attributes 的作用\"></a>data-attributes 的作用</h3><p>使用者自定義屬性,依開發者需求設定使用</p>\n<h3 id=\"id-與-class-的差別\"><a href=\"#id-與-class-的差別\" class=\"headerlink\" title=\"id 與 class 的差別\"></a>id 與 class 的差別</h3><p>單一網頁id僅能設在單一個element, class 則可設定於多個 element,</p>\n<h3 id=\"alt-attribute-在-images-的功能\"><a href=\"#alt-attribute-在-images-的功能\" class=\"headerlink\" title=\"alt attribute 在 images 的功能\"></a>alt attribute 在 images 的功能</h3><p>當 images 無法顯示時即會顯示 alt 的內容,alt 也有助於搜尋引擎更了解圖片的意義</p>\n<h3 id=\"如何在-HTML-建立超連結-hyperlink\"><a href=\"#如何在-HTML-建立超連結-hyperlink\" class=\"headerlink\" title=\"如何在 HTML 建立超連結(hyperlink)\"></a>如何在 HTML 建立超連結(hyperlink)</h3><p>使用 a tag.</p>\n<h3 id=\"HTML-的3種-list\"><a href=\"#HTML-的3種-list\" class=\"headerlink\" title=\"HTML 的3種 list\"></a>HTML 的3種 list</h3><ul>\n<li><p>無序列表（Unordered list）:無數字編號的清單</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>香蕉<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>芭樂<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>鳳梨<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n  <li>香蕉</li>\n  <li>芭樂</li>\n  <li>鳳梨</li>\n</ul></li>\n<li><p>有序列表（Ordered list）: 有數字編號的清單</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ol</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>香蕉<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>芭樂<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>鳳梨<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol>\n  <li>香蕉</li>\n  <li>芭樂</li>\n  <li>鳳梨</li>\n</ol></li>\n<li><p>定義列表（Definition list）: 表示一系列的特殊名詞定義</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dl</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>HTML<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>This stands for Hyper Text Markup Language<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>HTTP<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>This stands for Hyper Text Transfer Protocol<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<dl>\n<dt>HTML</dt>\n<dd>This stands for Hyper Text Markup Language</dd>\n<dt>HTTP</dt>\n<dd>This stands for Hyper Text Transfer Protocol</dd>\n</dl></li>\n</ul>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://dev.to/polgarj/a-short-guide-to-help-you-pick-the-correct-html-tag-56l9\">A short guide to help you pick the correct HTML tag</a></li>\n</ul>\n","categories":["Front End"],"tags":["html","review"]},{"title":"專有名詞 review","url":"/2021/10/04/review-4/","content":"<h3 id=\"網頁設計\"><a href=\"#網頁設計\" class=\"headerlink\" title=\"網頁設計\"></a>網頁設計</h3><h4 id=\"SPA-single-page-application-單頁面應用程式\"><a href=\"#SPA-single-page-application-單頁面應用程式\" class=\"headerlink\" title=\"SPA(single-page application)單頁面應用程式\"></a>SPA(single-page application)單頁面應用程式</h4><p>是一種網站設計的模型，它通過動態重寫當前頁面來與使用者互動，而非傳統的從伺服器重新載入整個新頁面。這種方法避免了頁面之間切換打斷使用者體驗。</p>\n<ul>\n<li>因 SPA 網頁是動態產生,對SEO不友好</li>\n</ul>\n<span id=\"more\"></span>\n\n<h4 id=\"SSR-Server-Side-Render-伺服器渲染\"><a href=\"#SSR-Server-Side-Render-伺服器渲染\" class=\"headerlink\" title=\"SSR(Server Side Render)伺服器渲染\"></a>SSR(Server Side Render)伺服器渲染</h4><p>HTML的內容全部由Server產生</p>\n<h4 id=\"CSR-Client-side-Render-客戶端渲染\"><a href=\"#CSR-Client-side-Render-客戶端渲染\" class=\"headerlink\" title=\"CSR(Client-side Render)客戶端渲染\"></a>CSR(Client-side Render)客戶端渲染</h4><p>渲染過程全部由 client 的瀏覽器去處理</p>\n<h4 id=\"Prerender-預渲染\"><a href=\"#Prerender-預渲染\" class=\"headerlink\" title=\"Prerender 預渲染\"></a>Prerender 預渲染</h4><p>預先渲染出內容，讓爬蟲爬取頁面時爬取預先渲染的內容，而一般user還是走SPA的頁面。</p>\n<h4 id=\"MVC-Model-View-Controller\"><a href=\"#MVC-Model-View-Controller\" class=\"headerlink\" title=\"MVC(Model-View-Controller)\"></a>MVC(Model-View-Controller)</h4><p>是一種軟體架構模式,主要目的是用來簡化應用程式的開發與增強程式的可維護性, 其做法是將應用程式分割成以下三個邏輯的元件 :</p>\n<ul>\n<li>模型(Model) : 程式設計師編寫程式應有的功能（實現演算法等等）,資料庫專家進行資料管理和資料庫設計</li>\n<li>視圖(View) : 圖形介面設計</li>\n<li>控制器(Controller) : 負責轉發請求,對請求進行處理</li>\n</ul>\n<h4 id=\"RESETful-API\"><a href=\"#RESETful-API\" class=\"headerlink\" title=\"RESETful API\"></a>RESETful API</h4><ul>\n<li>RESTful API，表示符合 REST(Representational State Transfer) 架構的 API </li>\n<li>RESTful API是一種設計風格，這種風格使API設計具有整體一致性</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># API 設計舉例</span></span><br><span class=\"line\">新增使用者 \t\t\tPOST \t\t/user</span><br><span class=\"line\">刪除使用者 \t\t\tDELETE \t/user/n</span><br><span class=\"line\">查詢使用者 \t\t\tGET\t\t\t/user/n</span><br><span class=\"line\">更改使用者 \t\t\tPATCH\t\t/user/n</span><br><span class=\"line\">查詢使用者列表\t  GET\t\t /users</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"BOM-vs-DOM\"><a href=\"#BOM-vs-DOM\" class=\"headerlink\" title=\"BOM vs DOM\"></a>BOM vs DOM</h4><ul>\n<li>BOM (Browser Object Model，瀏覽器物件模型) 是瀏覽器提供的物件，我們可以透過 JavaScript 直接跟瀏覽器溝通或做操作。</li>\n<li>DOM (Document Object Model，文件物件模型)，是一個將 HTML 文件以樹狀的結構來表示的模型，而組合起來的樹狀圖<div style=\"width:650px\">\n  <img src=\"/2021/10/04/review-4/pic1.png\" class=\"\" title=\"pic1\">\n</div></li>\n</ul>\n<h4 id=\"MERN-MongoDB-Express-js-React-js-and-Node-js\"><a href=\"#MERN-MongoDB-Express-js-React-js-and-Node-js\" class=\"headerlink\" title=\"MERN :  MongoDB, Express.js, React.js and Node.js\"></a>MERN :  MongoDB, Express.js, React.js and Node.js</h4><h3 id=\"Tool-and-program\"><a href=\"#Tool-and-program\" class=\"headerlink\" title=\"Tool and program\"></a>Tool and program</h3><h4 id=\"Server-Application\"><a href=\"#Server-Application\" class=\"headerlink\" title=\"Server Application\"></a>Server Application</h4><h5 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h5><p>Nginx 發音同 “engine X”是非同步框架的網頁伺服器，也可以用作反向代理、負載平衡器和HTTP快取。</p>\n<h5 id=\"PM2\"><a href=\"#PM2\" class=\"headerlink\" title=\"PM2\"></a>PM2</h5><p>pm2 是一個 node 的程序管理器,可開啟多程序 </p>\n<h4 id=\"App\"><a href=\"#App\" class=\"headerlink\" title=\"App\"></a>App</h4><h5 id=\"XAMPP\"><a href=\"#XAMPP\" class=\"headerlink\" title=\"XAMPP\"></a>XAMPP</h5><p>XAMPP 是跨平台 (X (Cross)) 可在 Windows、Linux 與 Mac OS 系統上執行，套件包含有 Appache + MariaDB(舊平台是 MySQL) + PHP + Perl 等套件。</p>\n<h5 id=\"phpMyAdmin\"><a href=\"#phpMyAdmin\" class=\"headerlink\" title=\"phpMyAdmin\"></a>phpMyAdmin</h5><p>phpMyAdmin 是一個以PHP為基礎，以Web-Base方式架構在網站主機上的MySQL的資料庫管理工具，讓管理者可用Web介面管理MySQL資料庫。</p>\n<h5 id=\"HeidiSQL\"><a href=\"#HeidiSQL\" class=\"headerlink\" title=\"HeidiSQL\"></a>HeidiSQL</h5><p>HeidiSQL是一個自由開源的資料庫管理工具，用於MySQL及其分支，以及Microsoft SQL Server和PostgreSQL。</p>\n<h5 id=\"JMeter\"><a href=\"#JMeter\" class=\"headerlink\" title=\"JMeter\"></a>JMeter</h5><p>壓力測試工具</p>\n<h4 id=\"language-and-relative-module\"><a href=\"#language-and-relative-module\" class=\"headerlink\" title=\"language and relative module\"></a>language and relative module</h4><h5 id=\"node-js\"><a href=\"#node-js\" class=\"headerlink\" title=\"node.js\"></a>node.js</h5><p>能夠在伺服器端運行 JavaScript 的開放原始碼</p>\n<h5 id=\"Express\"><a href=\"#Express\" class=\"headerlink\" title=\"Express\"></a>Express</h5><p>Express.js 或簡稱 Express，Express 是 Node.js Web 應用程式架構。</p>\n<h5 id=\"Sequelize-ORM-串接資料庫\"><a href=\"#Sequelize-ORM-串接資料庫\" class=\"headerlink\" title=\"Sequelize (ORM 串接資料庫)\"></a>Sequelize (ORM 串接資料庫)</h5><ul>\n<li>ORM(Object Relational Mapping)物件關聯對映。是一種將關聯式資料庫（MySQL）映射（mapping）至物件導向（OOP）的資料抽象化技術。</li>\n<li>ORM 扮演資料庫系統和 Model 資料容器的中間橋梁，讓我們能透過程式語言（JavaScript）去操作資料庫語言（SQL），是實作物件導向概念的一種工具模式。</li>\n<li>Sequelize，這是一款基於 Node.js 的非同步 ORM 框架，讓我們能透過 ORM（物件關聯對映）來開發網頁，以物件導向的概念來操作資料庫。</li>\n</ul>\n<h4 id=\"Automatic-tool\"><a href=\"#Automatic-tool\" class=\"headerlink\" title=\"Automatic tool\"></a>Automatic tool</h4><h5 id=\"Gulp\"><a href=\"#Gulp\" class=\"headerlink\" title=\"Gulp\"></a>Gulp</h5><p>Gulp 是前端自動化建構工具，開發者可以使用它構建自動化工作流程，可以編譯 Sass、編譯 JavaScript 語法至相容性較高的 ES5、圖片優化壓縮、打包程式碼等等的事情。</p>\n<h5 id=\"Webpack\"><a href=\"#Webpack\" class=\"headerlink\" title=\"Webpack\"></a>Webpack</h5><p>Webpack 是一個前端打包工具,將眾多模組與資源打包成一包檔案，生成優化過的程式碼。</p>\n<h5 id=\"Babel\"><a href=\"#Babel\" class=\"headerlink\" title=\"Babel\"></a>Babel</h5><p>Babel 為 一個 JavaScript 編譯器,可以將較新語法寫成的 JS 編譯成較舊的 JS 的語法,如 ES6 to ES5</p>\n<h3 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h3><h4 id=\"cookie\"><a href=\"#cookie\" class=\"headerlink\" title=\"cookie\"></a>cookie</h4><p>伺服器（Server）傳送給瀏覽器（Client）的一小片段資料,瀏覽器會保存起來,往後向相同的伺服器發送請求時,附上這 Cookie 的資料. </p>\n<ul>\n<li>儲存用戶登入資料,購物車資訊 …</li>\n<li>若 cookie 被修改,有可能會形成 Server 端的漏洞</li>\n</ul>\n<h4 id=\"session\"><a href=\"#session\" class=\"headerlink\" title=\"session\"></a>session</h4><p>Server 將 新建獨特 Session ID 的 cookie 傳給 Clinet, 當 Server 收到由 Client 傳來的 Session ID 就可知道 Client 的身份,而 Client 的資訊如購物車等資料存放在 Server </p>\n<h4 id=\"CORS-Cross-Origin-Resource-Sharing-跨源資源共享\"><a href=\"#CORS-Cross-Origin-Resource-Sharing-跨源資源共享\" class=\"headerlink\" title=\"CORS(Cross-Origin Resource Sharing)跨源資源共享\"></a>CORS(Cross-Origin Resource Sharing)跨源資源共享</h4><p>網頁伺服器跨網域的存取控制 </p>\n<ul>\n<li>Server 要 enable CORS<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">header(<span class=\"string\">&#x27;Access-Control-Allow-Origin: *&#x27;</span>);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"同源政策（Same-origin-policy）\"><a href=\"#同源政策（Same-origin-policy）\" class=\"headerlink\" title=\"同源政策（Same-origin policy）\"></a>同源政策（Same-origin policy）</h4><p>同源政策控制了兩個不同網域來源互動</p>\n<ul>\n<li><p>跨來源寫(Cross-origin writes)通常被允許，例如連結 (links) 、重新導向 (redirect) 、或是表單 (form) 送出等等，是被允許的。</p>\n</li>\n<li><p>跨來源嵌入(Cross-origin embedding)通常被允許。</p>\n</li>\n<li><p>跨來源讀取(Cross-origin read) 通常不被允許。</p>\n<table>\n<thead>\n<tr>\n<th>URL</th>\n<th>Outcome</th>\n<th>Reason</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"http://store.company.com/dir2/other.html\">http://store.company.com/dir2/other.html</a></td>\n<td>同源</td>\n<td></td>\n</tr>\n<tr>\n<td><a href=\"http://store.company.com/dir/inner/another.html\">http://store.company.com/dir/inner/another.html</a></td>\n<td>同源</td>\n<td></td>\n</tr>\n<tr>\n<td><a href=\"https://store.company.com/secure.html\">https://store.company.com/secure.html</a></td>\n<td>不同源</td>\n<td>協定不同</td>\n</tr>\n<tr>\n<td><a href=\"http://store.company.com:81/dir/etc.html\">http://store.company.com:81/dir/etc.html</a></td>\n<td>不同源</td>\n<td>埠號不同</td>\n</tr>\n<tr>\n<td><a href=\"http://news.company.com/dir/other.html\">http://news.company.com/dir/other.html</a></td>\n<td>不同源</td>\n<td>主機位置不同</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n<h4 id=\"SEO-search-engine-optimization-搜尋引擎最佳化\"><a href=\"#SEO-search-engine-optimization-搜尋引擎最佳化\" class=\"headerlink\" title=\"SEO(search engine optimization)搜尋引擎最佳化\"></a>SEO(search engine optimization)搜尋引擎最佳化</h4><p>透過了解搜尋引擎的運作規則來調整網站,以及提高目的網站在有關搜尋引擎內排名的方式.</p>\n<h4 id=\"SSL-Secure-Sockets-Layer-安全通訊端層\"><a href=\"#SSL-Secure-Sockets-Layer-安全通訊端層\" class=\"headerlink\" title=\"SSL(Secure Sockets Layer)安全通訊端層\"></a>SSL(Secure Sockets Layer)安全通訊端層</h4><p>是一種標準的技術,用於保持網際網路連線安全以及防止在兩個系統之間發送的所有敏感資料被罪犯讀取及修改任何傳輸的資訊. </p>\n<h4 id=\"TSL-Transport-Layer-Security-傳輸層安全性\"><a href=\"#TSL-Transport-Layer-Security-傳輸層安全性\" class=\"headerlink\" title=\"TSL(Transport Layer Security)傳輸層安全性\"></a>TSL(Transport Layer Security)傳輸層安全性</h4><p>是更新,更安全的 SSL 版本,一般仍將安全性憑證稱為 SSL,因為這是較常用的詞彙,不過當您透過 SSL 時，您所購買的其實是最新的 TLS 憑證.</p>\n<h4 id=\"HTTP-常用-method\"><a href=\"#HTTP-常用-method\" class=\"headerlink\" title=\"HTTP 常用 method\"></a>HTTP 常用 method</h4><ul>\n<li>GET : 取得資料</li>\n<li>POST : 新增一筆資料</li>\n<li>PUT : 替換資料(未填資料欄位會被清空)</li>\n<li>PATCH : 更新資料(未填資料欄位會保留)</li>\n<li>DELETE : 刪除資料</li>\n</ul>\n<h4 id=\"HTTP-常用-status-code\"><a href=\"#HTTP-常用-status-code\" class=\"headerlink\" title=\"HTTP 常用 status code\"></a>HTTP 常用 status code</h4><ul>\n<li>1xx訊息</li>\n<li>2xx 成功<br>  200 OK<br>  201 Created<br>  202 Accepted<br>  204 No Content : 成功狀態碼表明請求成功，但客戶端不需要更新目前的頁面</li>\n<li>3xx 重新導向<br>  301 永久導向<br>  302 暫時導向<br>  304 未改變,不需要再傳輸請求的內容，可以使用緩存的內容</li>\n<li>4xx客戶端錯誤<br>  400 Bad Request<br>  401 Unauthorized(未認證)<br>  404 Not Found<br>  405 Method Not Allowed<br>  410 Gone - 表示所請求的資源不再可用，將不再可用 </li>\n<li>5xx伺服器錯誤<br>  500 Internal Server Error<br>  501 Not Implemented<br>  503 Service Unavailable</li>\n</ul>\n<h3 id=\"資訊安全\"><a href=\"#資訊安全\" class=\"headerlink\" title=\"資訊安全\"></a>資訊安全</h3><h4 id=\"XSS-Cross-site-scripting-跨網站指令碼\"><a href=\"#XSS-Cross-site-scripting-跨網站指令碼\" class=\"headerlink\" title=\"XSS(Cross-site scripting) 跨網站指令碼\"></a>XSS(Cross-site scripting) 跨網站指令碼</h4><p>是一種網站應用程式的安全漏洞攻擊,代碼注入的一種,它將程式碼注入到網頁上,以達到攻擊的方法</p>\n<ul>\n<li>預防方式為排除所有可能的代碼注入<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 測試網站是否有正確處理特殊字元： --&gt;</span></span><br><span class=\"line\">&gt;<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">=&#x27;&gt;<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">&quot;&gt;<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"string\">&#x27;vulnerable&#x27;</span>)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">%3Cscript%3Ealert(&#x27;XSS&#x27;)%3C/script%3E</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"string\">&#x27;XSS&#x27;</span>)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 可導到釣魚網站或dump cookie --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">location.href=<span class=\"string\">&quot;https://google.com&quot;</span></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\">alert(<span class=\"built_in\">document</span>.cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"CSRF-Cross-Site-Request-Forgery-跨站請求偽造\"><a href=\"#CSRF-Cross-Site-Request-Forgery-跨站請求偽造\" class=\"headerlink\" title=\"CSRF(Cross Site Request Forgery) 跨站請求偽造\"></a>CSRF(Cross Site Request Forgery) 跨站請求偽造</h4><p>當你登入某網站,觸發對另一個你已登入未登出的網站發出命令(如你已登入銀行卻未登出)</p>\n<ul>\n<li>現在有些 Framework 都有內建防禦 CSRF 的功能，可以很簡單的開啟</li>\n<li>使用者每次使用完網站就登出，就可以避免掉 CSRF</li>\n<li>Server 的防禦 :<ul>\n<li>檢查 Referer 可確認來源非跨站請求(有些軟體或瀏覽器可以控制傳送或停用Referer,所以這種方式有風險)</li>\n<li>加上圖形驗證碼, 簡訊驗證碼等等</li>\n<li>加上 CSRF token<br>在 form 裡面加上一個 hidden 的欄位，叫做csrftoken，這裡面填的值由 server 隨機產生，並且存在 server 的 session 中。<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;https://small-min.blog.com/delete&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;3&quot;</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;csrftoken&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;fj1iro2jro12ijoi1&quot;</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;刪除文章&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Database\"><a href=\"#Database\" class=\"headerlink\" title=\"Database\"></a>Database</h3><h4 id=\"SQL-injection\"><a href=\"#SQL-injection\" class=\"headerlink\" title=\"SQL injection\"></a>SQL injection</h4><p>也稱SQL隱碼或SQL注碼,是發生於應用程式與資料庫層的安全漏洞。就是在輸入的字串之中夾帶SQL指令，在設計不良的程式當中忽略了字元檢查，那麼這些夾帶進去的惡意指令就會被資料庫伺服器誤認為是正常的SQL指令而執行，因此遭到破壞或是入侵。也稱為駭客的填字遊戲.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 原命令碼</span></span><br><span class=\"line\">strSQL = <span class=\"string\">&quot;SELECT * FROM users WHERE (name = &#x27;&quot;</span> + userName + <span class=\"string\">&quot;&#x27;) and (pw = &#x27;&quot;</span>+ passWord +<span class=\"string\">&quot;&#x27;);&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// 惡意填入</span></span><br><span class=\"line\">userName = <span class=\"string\">&quot;1&#x27; OR &#x27;1&#x27;=&#x27;1&quot;</span>;</span><br><span class=\"line\">passWord = <span class=\"string\">&quot;1&#x27; OR &#x27;1&#x27;=&#x27;1&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 最後命令</span></span><br><span class=\"line\">strSQL = <span class=\"string\">&quot;SELECT * FROM users WHERE (name = &#x27;1&#x27; OR &#x27;1&#x27;=&#x27;1&#x27;) and (pw = &#x27;1&#x27; OR &#x27;1&#x27;=&#x27;1&#x27;);&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// 與以下命令相同,無帳號密碼，亦可登入網站</span></span><br><span class=\"line\">strSQL = <span class=\"string\">&quot;SELECT * FROM users;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CRUD\"><a href=\"#CRUD\" class=\"headerlink\" title=\"CRUD\"></a>CRUD</h4><p>新增(Create)、讀取(Read)、更新(Update)、刪除(Delete)</p>\n<h4 id=\"ACID-Atomicity-Consistency-Isolation-Durability\"><a href=\"#ACID-Atomicity-Consistency-Isolation-Durability\" class=\"headerlink\" title=\"ACID (Atomicity, Consistency, Isolation, Durability)\"></a>ACID (Atomicity, Consistency, Isolation, Durability)</h4><ul>\n<li>Atomicity (原子性) : 資料操作不能只有部分完成。一次的 transaction 只能有兩種結果：成功或失敗</li>\n<li>Consistency (一致性)：在交易中會產生資料或者驗證狀態，然而當錯誤發生，所有已更改的資料或狀態將會恢復至交易之前。</li>\n<li>Isolation (隔離性)： 資料庫允許多筆交易同時進行，交易進行時未完成的交易資料並不會被其他交易使用，直到此筆交易完成。</li>\n<li>Durability (耐久性)：交易完成後對資料的修改是永久性的，資料不會因為系統重啟或錯誤而改變。</li>\n</ul>\n<h4 id=\"Transaction-與-lock\"><a href=\"#Transaction-與-lock\" class=\"headerlink\" title=\"Transaction 與 lock\"></a>Transaction 與 lock</h4><ul>\n<li>一個 transaction ,是為了特定需求的一組連續對資料庫 Read 和 Write 的動作</li>\n<li>為了保持資料的一致性,在執行 transaction 時,會將資料 lock 住,不讓其他 transaction 使用</li>\n</ul>\n<h4 id=\"N-1-problem\"><a href=\"#N-1-problem\" class=\"headerlink\" title=\"N+1 problem\"></a>N+1 problem</h4><p>當要由 DB 列出訂單含客戶名稱,可能查出訂單後,再由訂單內的客戶代號查詢客戶名稱,若有100筆訂單,就要執行 100 + 1 次查詢才能得到需要的資料,若改變查詢方法以使用較少的查詢次數,就能減少查詢的時間.</p>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://tw.alphacamp.co/blog/mvc-model-view-controller\">MVC架構是什麼?</a></li>\n</ul>\n","categories":["Front End"],"tags":["review"]},{"title":"React review","url":"/2021/10/21/review-5/","content":"<h3 id=\"什麼是-React\"><a href=\"#什麼是-React\" class=\"headerlink\" title=\"什麼是 React\"></a>什麼是 React</h3><p>React 是一個由 facebook 開發的前端 JavaScript library.</p>\n<ul>\n<li>透過設計重複利用的元件的概念,設計一個個小元件，組裝成一個較大的元件，最終打造成一個的完整專案</li>\n<li>使用於開發複雜的互動式網頁</li>\n<li>使用 VirtualDOM 來提昇 render 的效率</li>\n<li>使用  Unidirectional data flow(單向資料的流動):更改狀態觸發畫面更新</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"Virtual-DOM\"><a href=\"#Virtual-DOM\" class=\"headerlink\" title=\"Virtual DOM\"></a>Virtual DOM</h3><ul>\n<li>Virtual DOM 是以 JavaScript 物件模擬特定 DOM 結構而產生的樹狀結構。</li>\n<li>不直接操作 DOM，而改操作這些物件。待一個段落後，再將這些變更更新回真實的 DOM 上，以期提升效能。</li>\n</ul>\n<h3 id=\"event-in-React-vs-JavaCsript\"><a href=\"#event-in-React-vs-JavaCsript\" class=\"headerlink\" title=\"event in React vs JavaCsript\"></a>event in React vs JavaCsript</h3><ul>\n<li>event name 改成小駝峰寫法</li>\n<li>event function 僅寫 string 未加入 ()<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// React #1 </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> HandleButtonClick = <span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;button click&#x27;</span>)</span><br><span class=\"line\">\tsetCounter(counter + <span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;button onClick=&#123;HandleButtonClick&#125;&gt;increment&lt;/button&gt;</span><br><span class=\"line\"><span class=\"comment\">// React #2</span></span><br><span class=\"line\">&lt;RedButton onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\thandleDeleteTodo(todo.id)</span><br><span class=\"line\">&#125;&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// JavaScript</span></span><br><span class=\"line\">&lt;button onclick=<span class=\"string\">&quot;myFunction()&quot;</span>&gt;Click me&lt;/button&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"JSX\"><a href=\"#JSX\" class=\"headerlink\" title=\"JSX\"></a>JSX</h3><p>JSX是一個 JavaScript的語法擴充，使用於 React 來描述使用者介面的外觀，browser 不具有解析 JSX 的能力,所以使用前要使用像 Bable 的預處理器轉換為 Javascript</p>\n<h3 id=\"React-component’s-lifecycle\"><a href=\"#React-component’s-lifecycle\" class=\"headerlink\" title=\"React component’s lifecycle\"></a>React component’s lifecycle</h3><p>Component 有以下三種生命週期的狀態 </p>\n<ul>\n<li>Mounting：已插入真實的 DOM<ul>\n<li>componentWillMount()</li>\n<li>componentDidMount()</li>\n</ul>\n</li>\n<li>Updating：正在被重新渲染<ul>\n<li>componentWillReceiveProps(object nextProps)</li>\n<li>shouldComponentUpdate(object nextProps, object nextState)</li>\n<li>componentWillUpdate(object nextProps, object nextState)</li>\n<li>componentDidUpdate(object prevProps, object prevState)</li>\n</ul>\n</li>\n<li>Unmounting：已移出真實的 DOM<ul>\n<li>componentWillUnmount()</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"class-component-example\"><a href=\"#class-component-example\" class=\"headerlink\" title=\"class component example\"></a>class component example</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> isExample = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;AExamplep mount&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidUpdate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Example update&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentWillUnmount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Example unmount&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Example Title<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      count: <span class=\"number\">0</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.state.count&#125;</span> times`</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;App mount count=&quot;</span>, <span class=\"built_in\">this</span>.state.count);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidUpdate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.state.count&#125;</span> times`</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;App update count=&quot;</span>, <span class=\"built_in\">this</span>.state.count);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.state.count === <span class=\"number\">1</span>) isExample = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentWillUnmount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;App unmount&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &#123;isExample &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Example</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Example</span>&gt;</span></span>&#125;</span><br><span class=\"line\">        &lt;p&gt;You clicked &#123;<span class=\"built_in\">this</span>.state.count&#125; times&lt;/p&gt;</span><br><span class=\"line\">        &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.setState(&#123; <span class=\"attr\">count</span>: <span class=\"built_in\">this</span>.state.count + <span class=\"number\">1</span> &#125;)&#125;&gt;</span><br><span class=\"line\">          Click me</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># console show</span></span><br><span class=\"line\">Examplep mount</span><br><span class=\"line\">App mount count= 0</span><br><span class=\"line\">Example update</span><br><span class=\"line\">App update count= 1</span><br><span class=\"line\">Example unmount</span><br><span class=\"line\">App update count= 2</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"function-component-example\"><a href=\"#function-component-example\" class=\"headerlink\" title=\"function component example\"></a>function component example</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> isExample = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mount</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Example mount&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// unmount - clear up LayoutEffects</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Example unmount&quot;</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Example Title<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mount</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;App mount&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// unmount - clear up LayoutEffects</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;App unmount&quot;</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// current state</span></span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;count&#125;</span> times`</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;App update(current) count=&quot;</span>, count);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (count === <span class=\"number\">1</span>) isExample = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// previous state</span></span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;App update(previous) count=&quot;</span>, count);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, [count]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &#123;isExample &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Example</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Example</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setCount(count + <span class=\"number\">1</span>)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># console show</span></span><br><span class=\"line\">Example mount</span><br><span class=\"line\">App mount</span><br><span class=\"line\">App update(current) count= 0</span><br><span class=\"line\">App update(previous) count= 0</span><br><span class=\"line\">App update(current) count= 1</span><br><span class=\"line\">Example unmount</span><br><span class=\"line\">App update(previous) count= 1</span><br><span class=\"line\">App update(current) count= 2</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"react-state\"><a href=\"#react-state\" class=\"headerlink\" title=\"react state\"></a>react state</h3><h3 id=\"react-props\"><a href=\"#react-props\" class=\"headerlink\" title=\"react props\"></a>react props</h3><h3 id=\"Reactjs-vs-React-Native\"><a href=\"#Reactjs-vs-React-Native\" class=\"headerlink\" title=\"Reactjs vs React Native\"></a>Reactjs vs React Native</h3>","categories":["Framework"],"tags":["react","review"]},{"title":"React simple 練習","url":"/2021/10/25/react-5/","content":"<h3 id=\"useInterval-useSatae-vs-useRef\"><a href=\"#useInterval-useSatae-vs-useRef\" class=\"headerlink\" title=\"useInterval - useSatae vs useRef\"></a>useInterval - useSatae vs useRef</h3><span id=\"more\"></span>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect, useRef &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">useInterval</span>(<span class=\"params\">callback, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> savedCallback = useRef();</span><br><span class=\"line\">  <span class=\"comment\">// useState 更動會觸發 re-render, 但 useRef 不會</span></span><br><span class=\"line\">  <span class=\"comment\">// const [savedCallback, SetSavedCallback] = useState();</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;useInterval start, delay=&quot;, delay);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// set callback function</span></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    savedCallback.current = callback;</span><br><span class=\"line\">    <span class=\"comment\">// SetSavedCallback(callback);</span></span><br><span class=\"line\">  &#125;, [callback]); <span class=\"comment\">// 要加 callback,因每一次都帶不同參數,重設 callback function 才能取到正確的參數</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// call setIntervale/clearInterval and call callback function</span></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tick</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      savedCallback.current();</span><br><span class=\"line\">      <span class=\"comment\">// savedCallback();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (delay !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> id = <span class=\"built_in\">setInterval</span>(tick, delay);</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;setInterval ....id=&quot;, id);</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 若離開此次更動,集會被呼叫</span></span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;clearInterval ....id=&quot;, id);</span></span><br><span class=\"line\">        <span class=\"built_in\">clearInterval</span>(id);</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [delay]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> [isPlaying, setIsPlaying] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleUseInterval = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;*** count=&quot;, count);</span></span><br><span class=\"line\">    setCount(count + <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// render 前的動作,不同於一般函數的呼叫,所以每一次 render 都對應一樣的內容</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;App start&quot;);</span></span><br><span class=\"line\">  useInterval(handleUseInterval, isPlaying ? <span class=\"number\">1000</span> : <span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setIsPlaying(!isPlaying)&#125;&gt;</span><br><span class=\"line\">        &#123;isPlaying ? <span class=\"string\">&quot;pause&quot;</span> : <span class=\"string\">&quot;play&quot;</span>&#125;</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;h1&gt;&#123;count&#125;&lt;/h1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"跨-component-傳送參數\"><a href=\"#跨-component-傳送參數\" class=\"headerlink\" title=\"跨 component 傳送參數\"></a>跨 component 傳送參數</h3><h4 id=\"createContext-amp-useContext\"><a href=\"#createContext-amp-useContext\" class=\"headerlink\" title=\"createContext &amp; useContext\"></a>createContext &amp; useContext</h4><h5 id=\"App-js\"><a href=\"#App-js\" class=\"headerlink\" title=\"./App.js\"></a>./App.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Child <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Child&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MyContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./context-manager&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      resolve(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [step, setStep] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [number, setNumber] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`render App step=<span class=\"subst\">$&#123;step&#125;</span>, number=<span class=\"subst\">$&#123;number&#125;</span>, count=<span class=\"subst\">$&#123;count&#125;</span>`</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;MyContext.Provider value=&#123;&#123; setStep, setCount, setNumber, fetchData &#125;&#125;&gt;</span><br><span class=\"line\">      &lt;Child step=&#123;step&#125; number=&#123;number&#125; count=&#123;count&#125; /&gt;</span><br><span class=\"line\">    &lt;/MyContext.Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Child-js\"><a href=\"#Child-js\" class=\"headerlink\" title=\"./Child.js\"></a>./Child.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Child</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MyContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./context-manager&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useEffect, useContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; setStep, setNumber, setCount, fetchData &#125; = useContext(MyContext);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;render Child&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData().then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`FETCH DATA: <span class=\"subst\">$&#123;res&#125;</span>`</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;step is : &#123;props.step&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;p&gt;number is : &#123;props.number&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;p&gt;count is : &#123;props.count&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;hr /&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">              <span class=\"string\">`button(1) step=<span class=\"subst\">$&#123;props.step&#125;</span>, number=<span class=\"subst\">$&#123;props.number&#125;</span>, count=<span class=\"subst\">$&#123;props.count&#125;</span>`</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">            setStep(props.step + <span class=\"number\">1</span>);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          step ++</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">              <span class=\"string\">`button(2) step=<span class=\"subst\">$&#123;props.step&#125;</span>, number=<span class=\"subst\">$&#123;props.number&#125;</span>, count=<span class=\"subst\">$&#123;props.count&#125;</span>`</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">            setNumber(props.number + <span class=\"number\">1</span>);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          number ++</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">              <span class=\"string\">`button(3) step=<span class=\"subst\">$&#123;props.step&#125;</span>, number=<span class=\"subst\">$&#123;props.number&#125;</span>, count=<span class=\"subst\">$&#123;props.count&#125;</span>`</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">            setCount(props.step + props.number);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          number + step</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"context-manager-js\"><a href=\"#context-manager-js\" class=\"headerlink\" title=\"./context-manager.js\"></a>./context-manager.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./context-manager.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// set and get 要參照同 variable 才有用(分開有問題)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> MyContext = React.createContext(<span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"createContext-amp-useContext-useReducer-state-send-by-createContext-useContext\"><a href=\"#createContext-amp-useContext-useReducer-state-send-by-createContext-useContext\" class=\"headerlink\" title=\"createContext&amp;useContext + useReducer + state send by createContext/ useContext\"></a>createContext&amp;useContext + useReducer + state send by createContext/ useContext</h4><p>可傳多個 state,執行 dispatch</p>\n<h5 id=\"App-js-1\"><a href=\"#App-js-1\" class=\"headerlink\" title=\"./App.js\"></a>./App.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useReducer &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Child <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Child&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MyContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./context-manager&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #2 useReducer : init state</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> initState = &#123;</span><br><span class=\"line\">  step: <span class=\"number\">0</span>,</span><br><span class=\"line\">  number: <span class=\"number\">0</span>,</span><br><span class=\"line\">  count: <span class=\"number\">0</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// step #1 useReducer : function</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> reducer = <span class=\"function\">(<span class=\"params\">state, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;stepInc&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        step: state.step + <span class=\"number\">1</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;numberInc&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        number: state.number + <span class=\"number\">1</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;count&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        count: state.step + state.number,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// step #3 useReducer : get reducer state and dispatch</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [state, dispatch] = useReducer(reducer, initState);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">    <span class=\"string\">`render App step=<span class=\"subst\">$&#123;state.step&#125;</span>, number=<span class=\"subst\">$&#123;state.number&#125;</span>, count=<span class=\"subst\">$&#123;state.count&#125;</span>`</span></span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"comment\">// step #4 useReducer : send reducer dispatch by createContext/useContext</span></span><br><span class=\"line\">    &lt;MyContext.Provider value=&#123;&#123; state, dispatch &#125;&#125;&gt;</span><br><span class=\"line\">      &lt;button</span><br><span class=\"line\">        onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;stepInc&quot;</span> &#125;);</span><br><span class=\"line\">        &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        parent step ++</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;Child /&gt;</span><br><span class=\"line\">    &lt;/MyContext.Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Child-js-1\"><a href=\"#Child-js-1\" class=\"headerlink\" title=\"./Child.js\"></a>./Child.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./Child.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; MyContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./context-manager&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// export default function Child(props) &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Child = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// step #5 useReducer : get reducer dispatch by createContext/useContext</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; state, dispatch &#125; = useContext(MyContext);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;render Child&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;step is : &#123;state.step&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;p&gt;number is : &#123;state.number&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;p&gt;count is : &#123;state.count&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;hr /&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">              <span class=\"string\">`button(1) step=<span class=\"subst\">$&#123;state.step&#125;</span>, number=<span class=\"subst\">$&#123;state.number&#125;</span>, count=<span class=\"subst\">$&#123;state.count&#125;</span>`</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">            <span class=\"comment\">// step #6 useReducer : call action by dispatch</span></span><br><span class=\"line\">            dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;stepInc&quot;</span> &#125;);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          step ++</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">              <span class=\"string\">`button(2) step=<span class=\"subst\">$&#123;state.step&#125;</span>, number=<span class=\"subst\">$&#123;state.number&#125;</span>, count=<span class=\"subst\">$&#123;state.count&#125;</span>`</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">            <span class=\"comment\">// step #7 useReducer : call action by dispatch</span></span><br><span class=\"line\">            dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;numberInc&quot;</span> &#125;);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          number ++</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">              <span class=\"string\">`button(3) step=<span class=\"subst\">$&#123;state.step&#125;</span>, number=<span class=\"subst\">$&#123;state.number&#125;</span>, count=<span class=\"subst\">$&#123;state.count&#125;</span>`</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">            <span class=\"comment\">// step #8 useReducer : call action by dispatch</span></span><br><span class=\"line\">            dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;count&quot;</span> &#125;);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          number + step</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Child;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"context-manager-js-1\"><a href=\"#context-manager-js-1\" class=\"headerlink\" title=\"./context-manager.js\"></a>./context-manager.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./context-manager.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// set and get 要參照同 variable 才有用(分開有問題)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> MyContext = React.createContext(<span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>","categories":["Framework"],"tags":["react"]},{"title":"React (Class component)","url":"/2021/10/26/react-6/","content":"<h3 id=\"環境建置\"><a href=\"#環境建置\" class=\"headerlink\" title=\"環境建置\"></a>環境建置</h3><h4 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h4><h5 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir react-self-app</span><br><span class=\"line\"><span class=\"built_in\">cd</span> react-self-app</span><br><span class=\"line\">npm init</span><br><span class=\"line\">yarn add webpack webpack-cli</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h5 id=\"webpack-config\"><a href=\"#webpack-config\" class=\"headerlink\" title=\"webpack config\"></a>webpack config</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// source file</span></span><br><span class=\"line\">  entry: <span class=\"string\">&quot;./src/index.js&quot;</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// output path</span></span><br><span class=\"line\">    path: path.join(__dirname, <span class=\"string\">&quot;/dist&quot;</span>),</span><br><span class=\"line\">    <span class=\"comment\">// output file name</span></span><br><span class=\"line\">    filename: <span class=\"string\">&quot;bundle.js&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"add-file\"><a href=\"#add-file\" class=\"headerlink\" title=\"add file\"></a>add file</h5><ul>\n<li><p>./index.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ./index.html --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\thello</span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- add webpack generate file  --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./dist/bundle.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>./src/index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; log &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./utils&quot;</span>;</span><br><span class=\"line\">log(<span class=\"string\">&quot;hello world&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/utils.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/utils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">log</span>(<span class=\"params\">str</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(str);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"add-webpack-script\"><a href=\"#add-webpack-script\" class=\"headerlink\" title=\"add webpack script\"></a>add webpack script</h5><p>package.json</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;react-self-app&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span>: <span class=\"string\">&quot;index.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;//1&quot;</span>: <span class=\"string\">&quot;development mode 打包&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;//2&quot;</span>: <span class=\"string\">&quot;production mode 打包&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;start&quot;</span>: <span class=\"string\">&quot;webpack --mode development&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;build&quot;</span>: <span class=\"string\">&quot;webpack --mode production&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span>: <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">\t....</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"run-webpack-script\"><a href=\"#run-webpack-script\" class=\"headerlink\" title=\"run webpack script\"></a>run webpack script</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run start</span><br><span class=\"line\">\t&gt; react-self-app@1.0.0 start</span><br><span class=\"line\">\t&gt; webpack --mode development</span><br><span class=\"line\">\tasset bundle.js 4.13 KiB [emitted] (name: main)</span><br><span class=\"line\">\truntime modules 670 bytes 3 modules</span><br><span class=\"line\">\tcacheable modules 124 bytes</span><br><span class=\"line\">\t\t./src/index.js 72 bytes [built] [code generated]</span><br><span class=\"line\">\t\t./src/utils.js 52 bytes [built] [code generated]</span><br><span class=\"line\">\twebpack 5.60.0 compiled successfully <span class=\"keyword\">in</span> 190 ms</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"load-index-html-from-browser\"><a href=\"#load-index-html-from-browser\" class=\"headerlink\" title=\"load index.html from browser\"></a>load index.html from browser</h5><p>console show -&gt; hello world</p>\n<h4 id=\"babel\"><a href=\"#babel\" class=\"headerlink\" title=\"babel\"></a>babel</h4><h5 id=\"install-babel\"><a href=\"#install-babel\" class=\"headerlink\" title=\"install babel\"></a>install babel</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># babel-loader use by webpack</span></span><br><span class=\"line\">yarn add @babel/core babel-loader @babel/preset-env</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"babel-config\"><a href=\"#babel-config\" class=\"headerlink\" title=\"babel config\"></a>babel config</h5><ul>\n<li><p>.babelrc</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .babelrc</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">// set babel  transfer condition</span></span><br><span class=\"line\">  <span class=\"string\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>./webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// source file</span></span><br><span class=\"line\">  entry: <span class=\"string\">&quot;./src/index.js&quot;</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// output path</span></span><br><span class=\"line\">    path: path.join(__dirname, <span class=\"string\">&quot;/dist&quot;</span>),</span><br><span class=\"line\">    <span class=\"comment\">// output file name</span></span><br><span class=\"line\">    filename: <span class=\"string\">&quot;bundle.js&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// 用 babel-loade 打包所有 .js 檔案,排除目錄 node_modules</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">&quot;babel-loader&quot;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"change-file\"><a href=\"#change-file\" class=\"headerlink\" title=\"change file\"></a>change file</h5><ul>\n<li>./src/index.js<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; log &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">  text: <span class=\"string\">&quot;hello world!!!&quot;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; text &#125; = obj;</span><br><span class=\"line\">log(text);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"run-webpack-script-1\"><a href=\"#run-webpack-script-1\" class=\"headerlink\" title=\"run webpack script\"></a>run webpack script</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run start</span><br><span class=\"line\">\t&gt; react-self-app@1.0.0 start</span><br><span class=\"line\">\t&gt; webpack --mode development</span><br><span class=\"line\">\tasset bundle.js 4.19 KiB [emitted] (name: main)</span><br><span class=\"line\">\truntime modules 670 bytes 3 modules</span><br><span class=\"line\">\tcacheable modules 186 bytes</span><br><span class=\"line\">\t\t./src/index.js 120 bytes [built] [code generated]</span><br><span class=\"line\">\t\t./src/utils.js 66 bytes [built] [code generated]</span><br><span class=\"line\">\twebpack 5.60.0 compiled successfully <span class=\"keyword\">in</span> 1094 ms</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"load-index-html-from-browser-1\"><a href=\"#load-index-html-from-browser-1\" class=\"headerlink\" title=\"load index.html from browser\"></a>load index.html from browser</h5><p>console show -&gt; hello world!!!</p>\n<h4 id=\"react\"><a href=\"#react\" class=\"headerlink\" title=\"react\"></a>react</h4><h5 id=\"install-1\"><a href=\"#install-1\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yarn add react react-dom @babel/preset-react</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"config\"><a href=\"#config\" class=\"headerlink\" title=\"config\"></a>config</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .babelrc</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">// set babel transfer condition</span></span><br><span class=\"line\">  <span class=\"comment\">// add @babel/preset-react</span></span><br><span class=\"line\">  <span class=\"string\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>, <span class=\"string\">&quot;@babel/preset-react&quot;</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"add-file-for-react\"><a href=\"#add-file-for-react\" class=\"headerlink\" title=\"add file for react\"></a>add file for react</h5><ul>\n<li><p>./index.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ./index.html --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- add for react --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;root&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- add webpack generate file  --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./dist/bundle.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>./src/index.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// App render to root</span></span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello React<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"run-webpack-script-2\"><a href=\"#run-webpack-script-2\" class=\"headerlink\" title=\"run webpack script\"></a>run webpack script</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run start</span><br><span class=\"line\">\t&gt; react-self-app@1.0.0 start</span><br><span class=\"line\">\t&gt; webpack --mode development</span><br><span class=\"line\">\tasset bundle.js 1020 KiB [emitted] (name: main)</span><br><span class=\"line\">\truntime modules 670 bytes 3 modules</span><br><span class=\"line\">\tmodules by path ./node_modules/ 974 KiB</span><br><span class=\"line\">\t\tmodules by path ./node_modules/scheduler/ 26.3 KiB</span><br><span class=\"line\">\t\t\tmodules by path ./node_modules/scheduler/*.js 412 bytes 2 modules</span><br><span class=\"line\">\t\t\tmodules by path ./node_modules/scheduler/cjs/*.js 25.9 KiB 2 modules</span><br><span class=\"line\">\t\tmodules by path ./node_modules/react/ 70.6 KiB</span><br><span class=\"line\">\t\t\t./node_modules/react/index.js 190 bytes [built] [code generated]</span><br><span class=\"line\">\t\t\t./node_modules/react/cjs/react.development.js 70.5 KiB [built] [code generated]</span><br><span class=\"line\">\t\tmodules by path ./node_modules/react-dom/ 875 KiB</span><br><span class=\"line\">\t\t\t./node_modules/react-dom/index.js 1.33 KiB [built] [code generated]</span><br><span class=\"line\">\t\t\t./node_modules/react-dom/cjs/react-dom.development.js 874 KiB [built] [code generated]</span><br><span class=\"line\">\t\t./node_modules/object-assign/index.js 2.06 KiB [built] [code generated]</span><br><span class=\"line\">\tmodules by path ./src/*.js 3.65 KiB</span><br><span class=\"line\">\t\t./src/index.js 222 bytes [built] [code generated]</span><br><span class=\"line\">\t\t./src/App.js 3.43 KiB [built] [code generated]</span><br><span class=\"line\">\twebpack 5.60.0 compiled successfully <span class=\"keyword\">in</span> 1732 ms</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"load-index-html-from-browser-2\"><a href=\"#load-index-html-from-browser-2\" class=\"headerlink\" title=\"load index.html from browser\"></a>load index.html from browser</h5><p>browser show -&gt; Hello React</p>\n<h4 id=\"setup-webpack-dev-derver\"><a href=\"#setup-webpack-dev-derver\" class=\"headerlink\" title=\"setup webpack dev derver\"></a>setup webpack dev derver</h4><h5 id=\"change-bundle-js-add-hash\"><a href=\"#change-bundle-js-add-hash\" class=\"headerlink\" title=\"change bundle.js add hash\"></a>change bundle.js add hash</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// source file</span></span><br><span class=\"line\">  entry: <span class=\"string\">&quot;./src/index.js&quot;</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// output path</span></span><br><span class=\"line\">    path: path.join(__dirname, <span class=\"string\">&quot;/dist&quot;</span>),</span><br><span class=\"line\">    <span class=\"comment\">// output file name</span></span><br><span class=\"line\">    <span class=\"comment\">// 預防 browser cache 住檔案</span></span><br><span class=\"line\">    filename: <span class=\"string\">&quot;bundle.[hash].js&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// 用 babel-loade 打包所有 .js 檔案,排除目錄 node_modules</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">&quot;babel-loader&quot;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"install-html-webpack-plugin\"><a href=\"#install-html-webpack-plugin\" class=\"headerlink\" title=\"install html-webpack-plugin\"></a>install html-webpack-plugin</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yarn add html-webpack-plugin</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"webpack-config-js-add-html-webpack-plugin\"><a href=\"#webpack-config-js-add-html-webpack-plugin\" class=\"headerlink\" title=\"./webpack.config.js add html-webpack-plugin\"></a>./webpack.config.js add html-webpack-plugin</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// use html-webpack-plugin</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;html-webpack-plugin&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// source file</span></span><br><span class=\"line\">  entry: <span class=\"string\">&quot;./src/index.js&quot;</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// output path</span></span><br><span class=\"line\">    path: path.join(__dirname, <span class=\"string\">&quot;/dist&quot;</span>),</span><br><span class=\"line\">    <span class=\"comment\">// output file name</span></span><br><span class=\"line\">    <span class=\"comment\">// 預防 browser cache 住檔案</span></span><br><span class=\"line\">    filename: <span class=\"string\">&quot;bundle.[hash].js&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// 用 babel-loade 打包所有 .js 檔案,排除目錄 node_modules</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">&quot;babel-loader&quot;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// use html-webpack-plugin</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      template: <span class=\"string\">&quot;./index.html&quot;</span>,</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"index-html-remove-lt-script-src-”-dist-bundle-js”-gt-lt-script-gt\"><a href=\"#index-html-remove-lt-script-src-”-dist-bundle-js”-gt-lt-script-gt\" class=\"headerlink\" title=\"./index.html remove &lt;script src=”./dist/bundle.js”&gt; &lt;/script&gt;\"></a>./index.html remove &lt;script src=”./dist/bundle.js”&gt; &lt;/script&gt;</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ./index.html --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- add for react --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;root&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"run-webpack-script-3\"><a href=\"#run-webpack-script-3\" class=\"headerlink\" title=\"run webpack script\"></a>run webpack script</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run start</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"load-dist-index-html-from-browser\"><a href=\"#load-dist-index-html-from-browser\" class=\"headerlink\" title=\"load ./dist/index.html from browser\"></a>load ./dist/index.html from browser</h5><p>browser show -&gt; Hello React</p>\n<h5 id=\"install-webpack-dev-server\"><a href=\"#install-webpack-dev-server\" class=\"headerlink\" title=\"install webpack dev server\"></a>install webpack dev server</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yarn add webpack-dev-server</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"change-webpack-script\"><a href=\"#change-webpack-script\" class=\"headerlink\" title=\"change webpack script\"></a>change webpack script</h5><p>package.json</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;name&quot;: &quot;react-self-app&quot;,</span><br><span class=\"line\">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class=\"line\">  &quot;description&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class=\"line\">  &quot;&#x2F;&#x2F;3&quot;: &quot;production mode 打包 run webpack dev server&quot;,</span><br><span class=\"line\">  &quot;&#x2F;&#x2F;2&quot;: &quot;production mode 打包&quot;,</span><br><span class=\"line\">  &quot;scripts&quot;: &#123;</span><br><span class=\"line\">    &quot;start&quot;: &quot;webpack-dev-server --mode development --open --hot&quot;,</span><br><span class=\"line\">    &quot;build&quot;: &quot;webpack --mode production&quot;,</span><br><span class=\"line\">    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">\t....</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"run-webpack-script-4\"><a href=\"#run-webpack-script-4\" class=\"headerlink\" title=\"run webpack script\"></a>run webpack script</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run start</span><br><span class=\"line\">\t&gt; react-self-app@1.0.0 start</span><br><span class=\"line\">\t&gt; webpack-dev-server --mode development --open --hot</span><br><span class=\"line\">\t&lt;i&gt; [webpack-dev-server] Project is running at:</span><br><span class=\"line\">\t&lt;i&gt; [webpack-dev-server] Loopback: http://localhost:8080/</span><br><span class=\"line\"><span class=\"comment\"># auto open http://localhost:8080/ by browser</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基礎\"><a href=\"#基礎\" class=\"headerlink\" title=\"基礎\"></a>基礎</h3><h4 id=\"Component\"><a href=\"#Component\" class=\"headerlink\" title=\"Component\"></a>Component</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Title</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Text</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;Title /&gt;</span><br><span class=\"line\">        &lt;Text /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Title</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// event</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHi</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      alert(<span class=\"string\">&quot;Hi!&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;sayHi&#125;</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Text</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>text<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;Title /&gt;</span><br><span class=\"line\">        &lt;Text /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"State\"><a href=\"#State\" class=\"headerlink\" title=\"State\"></a>State</h4><h5 id=\"使用-on-click-function-1\"><a href=\"#使用-on-click-function-1\" class=\"headerlink\" title=\"使用 on click function #1\"></a>使用 on click function #1</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// state</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      counter: <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 使用 on click function 要加</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handleClick = <span class=\"built_in\">this</span>.handleClick.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// on click function</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleClick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      counter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;h1 onClick=&#123;<span class=\"built_in\">this</span>.handleClick&#125;&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">        &lt;div&gt;&#123;<span class=\"built_in\">this</span>.state.counter&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"使用-on-click-function-2\"><a href=\"#使用-on-click-function-2\" class=\"headerlink\" title=\"使用 on click function #2\"></a>使用 on click function #2</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// state</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      counter: <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 使用 on click function 要加 example #1</span></span><br><span class=\"line\">    <span class=\"comment\">// this.handleClick = this.handleClick.bind(this);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// on click function</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleClick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      counter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* 使用 on click function 要加 example #2 */</span>&#125;</span><br><span class=\"line\">        &lt;h1 onClick=&#123;<span class=\"built_in\">this</span>.handleClick.bind(<span class=\"built_in\">this</span>)&#125;&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">        &lt;div&gt;&#123;<span class=\"built_in\">this</span>.state.counter&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"使用-箭頭函數-example\"><a href=\"#使用-箭頭函數-example\" class=\"headerlink\" title=\"使用 箭頭函數 example\"></a>使用 箭頭函數 example</h5><ul>\n<li>箭頭函數 的 this, 為呼叫時之 this</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// state</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      counter: <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 使用 on click function 要加 example #1</span></span><br><span class=\"line\">    <span class=\"comment\">// this.handleClick = this.handleClick.bind(this);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// on click function</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleClick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      counter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* 使用 箭頭函數 example */</span>&#125;</span><br><span class=\"line\">        &lt;h1</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">              counter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span>,</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          Hello</span><br><span class=\"line\">        &lt;/h1&gt;</span><br><span class=\"line\">        &lt;div&gt;&#123;<span class=\"built_in\">this</span>.state.counter&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"this-值-取決於如何被呼叫\"><a href=\"#this-值-取決於如何被呼叫\" class=\"headerlink\" title=\"this 值,取決於如何被呼叫\"></a>this 值,取決於如何被呼叫</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setName</span>(<span class=\"params\">name</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">say</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// state</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      counter: <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 使用 on click function 要加</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handleClick = <span class=\"built_in\">this</span>.handleClick.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// on click function</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleClick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this 值,取決於如何被呼叫</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> t = <span class=\"keyword\">new</span> Test();</span><br><span class=\"line\">    t.setName(<span class=\"string\">&quot;Robert&quot;</span>);</span><br><span class=\"line\">    t.say(); <span class=\"comment\">// name: &quot;Robert&quot; ..</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> func = t.say;</span><br><span class=\"line\">    func(); <span class=\"comment\">// undefine</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      counter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;h1 onClick=&#123;<span class=\"built_in\">this</span>.handleClick&#125;&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">        &lt;div&gt;&#123;<span class=\"built_in\">this</span>.state.counter&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"props-and-event-溝通\"><a href=\"#props-and-event-溝通\" class=\"headerlink\" title=\"props and event 溝通\"></a>props and event 溝通</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Title</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;this.props.handleClick&#125;</span>&gt;</span>&#123;this.props.children&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Counter</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;this.props.number&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// state</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      counter: <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 使用 on click function 要加</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handleClick = <span class=\"built_in\">this</span>.handleClick.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// on click function</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleClick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      counter: <span class=\"built_in\">this</span>.state.counter + <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;h1 onClick=&#123;this.handleClick&#125;&gt;Hello&lt;/h1&gt; */</span>&#125;</span><br><span class=\"line\">        &lt;Title handleClick=&#123;<span class=\"built_in\">this</span>.handleClick&#125;&gt;Hello&lt;/Title&gt;</span><br><span class=\"line\">        &lt;Counter number=&#123;<span class=\"built_in\">this</span>.state.counter&#125; /&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;div&gt;&#123;this.state.counter&#125;&lt;/div&gt; */</span>&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"載入-CSS\"><a href=\"#載入-CSS\" class=\"headerlink\" title=\"載入 CSS\"></a>載入 CSS</h4><h5 id=\"install-2\"><a href=\"#install-2\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install style-loader css-loader</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"modify-webpack-config-js\"><a href=\"#modify-webpack-config-js\" class=\"headerlink\" title=\"modify ./webpack.config.js\"></a>modify ./webpack.config.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./webpack.config.js</span></span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// 用 babel-loade 打包所有 .js 檔案,排除目錄 node_modules</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">&quot;babel-loader&quot;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;, <span class=\"comment\">// load css-loader and style-loader</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">&quot;style-loader&quot;</span>, <span class=\"string\">&quot;css-loader&quot;</span>],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"import-css\"><a href=\"#import-css\" class=\"headerlink\" title=\"import css\"></a>import css</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import css</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./style.css&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">....</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"add-css\"><a href=\"#add-css\" class=\"headerlink\" title=\"add css\"></a>add css</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* .&#x2F;style.css *&#x2F;</span><br><span class=\"line\"></span><br><span class=\"line\">h1 &#123;</span><br><span class=\"line\">  color: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h4 id=\"styleds-components\"><a href=\"#styleds-components\" class=\"headerlink\" title=\"styleds-components\"></a>styleds-components</h4><h5 id=\"install-3\"><a href=\"#install-3\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install styled-components</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"use-styled-components\"><a href=\"#use-styled-components\" class=\"headerlink\" title=\"use styled-components\"></a>use styled-components</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import styled-component</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">&quot;styled-components&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> H1 = styled.h1<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  color: red;</span></span><br><span class=\"line\"><span class=\"string\">  font-size: 50px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Title</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">H1</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;this.props.handleClick&#125;</span>&gt;</span>&#123;this.props.children&#125;<span class=\"tag\">&lt;/<span class=\"name\">H1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Ref\"><a href=\"#Ref\" class=\"headerlink\" title=\"Ref\"></a>Ref</h4><ul>\n<li><p>Ref 是藉由使用 React.createRef() 所產生的，它藉由 ref 參數被依附在 React element。Ref 常常會在一個 component 被建立出來的時候，被賦值在某個 instance 屬性，這樣一來他們就可以在整個 component 裡面被參考。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">APP</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// 產生一個可以儲存 textInput DOM element 的 ref</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.textInput = React.createRef();</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.focusTextInput = <span class=\"built_in\">this</span>.focusTextInput.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">focusTextInput</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 特別利用原生的 DOM API 來關注文字的輸入</span></span><br><span class=\"line\">    <span class=\"comment\">// 注意：我們正利用「current」來取得 DOM 節點</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.textInput.current.focus();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 告訴 React 我們想要將 &lt;input&gt; ref</span></span><br><span class=\"line\">    <span class=\"comment\">// 和我們在 constructor 產生的 `textInput` 連結</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;input type=<span class=\"string\">&quot;text&quot;</span> ref=&#123;<span class=\"built_in\">this</span>.textInput&#125; /&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          type=<span class=\"string\">&quot;button&quot;</span></span><br><span class=\"line\">          value=<span class=\"string\">&quot;Focus the text input&quot;</span></span><br><span class=\"line\">          onClick=&#123;<span class=\"built_in\">this</span>.focusTextInput&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>你不能在 function component 上使用 ref，因為他們沒有 instance。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MyFunctionComponent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Parent</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.textInput = React.createRef();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// This will *not* work!</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;MyFunctionComponent ref=&#123;<span class=\"built_in\">this</span>.textInput&#125; /&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"React-的生命週期\"><a href=\"#React-的生命週期\" class=\"headerlink\" title=\"React 的生命週期\"></a><a href=\"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\">React 的生命週期</a></h3><div style=\"maxwidth:1000px\">\n    <img src=\"/2021/10/26/react-6/pic1.jpg\" class=\"\" title=\"pic1\">\n</div>\n\n<h3 id=\"進階\"><a href=\"#進階\" class=\"headerlink\" title=\"進階\"></a>進階</h3><h4 id=\"input-共用-onChnage\"><a href=\"#input-共用-onChnage\" class=\"headerlink\" title=\"input 共用 onChnage\"></a>input 共用 onChnage</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Hello = React.createClass(&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">      <span class=\"comment\">// state</span></span><br><span class=\"line\">      <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">        input1: <span class=\"number\">0</span>, </span><br><span class=\"line\">        input2: <span class=\"number\">0</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"built_in\">this</span>.handleChange = <span class=\"built_in\">this</span>.handleChange.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    handleChange (e) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.setState(&#123;[e.target.name]: e.target.value&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    render: &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> total = <span class=\"built_in\">this</span>.state.input1 + <span class=\"built_in\">this</span>.state.input2;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (</span><br><span class=\"line\">            &lt;div&gt;&#123;total&#125;&lt;br/&gt;</span><br><span class=\"line\">                &lt;input type=<span class=\"string\">&quot;text&quot;</span> value=&#123;<span class=\"built_in\">this</span>.state.input1&#125; name=<span class=\"string\">&quot;input1&quot;</span> onChange=&#123;<span class=\"built_in\">this</span>.handleChange&#125; /&gt;</span><br><span class=\"line\">                &lt;input type=<span class=\"string\">&quot;text&quot;</span> value=&#123;<span class=\"built_in\">this</span>.state.input2&#125; name=<span class=\"string\">&quot;input2&quot;</span> onChange=&#123;<span class=\"built_in\">this</span>.handleChange&#125; /&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"練習\"><a href=\"#練習\" class=\"headerlink\" title=\"練習\"></a>練習</h3><h4 id=\"Form-報名表單\"><a href=\"#Form-報名表單\" class=\"headerlink\" title=\"Form 報名表單\"></a>Form 報名表單</h4><ul>\n<li><p>./style.css */</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ./style.css */</span></span><br><span class=\"line\"><span class=\"selector-class\">.App</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span> auto;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>./src/App.js - form</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js - form</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./style.css&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CheckBox</span>(<span class=\"params\">&#123; value, id, label, checked, onChange &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;span&gt;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        id=&#123;id&#125;</span><br><span class=\"line\">        type=<span class=\"string\">&quot;checkbox&quot;</span></span><br><span class=\"line\">        value=&#123;value&#125;</span><br><span class=\"line\">        name=<span class=\"string\">&quot;time&quot;</span></span><br><span class=\"line\">        checked=&#123;checked&#125;</span><br><span class=\"line\">        onChange=&#123;onChange&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">      &lt;label htmlFor=&#123;id&#125;&gt;&#123;label&#125;&lt;/label&gt;</span><br><span class=\"line\">    &lt;/span&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      name: <span class=\"string\">&quot;123&quot;</span>,</span><br><span class=\"line\">      address: <span class=\"string\">&quot;sdsd&quot;</span>,</span><br><span class=\"line\">      review: <span class=\"string\">&quot;ds&quot;</span>,</span><br><span class=\"line\">      gender: <span class=\"string\">&quot;female&quot;</span>,</span><br><span class=\"line\">      city: <span class=\"string\">&quot;taipei&quot;</span>,</span><br><span class=\"line\">      time: [<span class=\"string\">&quot;2&quot;</span>],</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handleSubmit = <span class=\"built_in\">this</span>.handleSubmit.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handelInputChange = <span class=\"built_in\">this</span>.handelInputChange.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handleCheckboxChange = <span class=\"built_in\">this</span>.handleCheckboxChange.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>)</span> &#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.state);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handelInputChange</span>(<span class=\"params\">e</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e.target.value);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e.target);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123; [e.target.name]: e.target.value &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleCheckboxChange</span>(<span class=\"params\">e</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; time &#125; = <span class=\"built_in\">this</span>.state;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = e.target.value;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> newTime = time.filter(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> item !== value);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      time: newTime.length != time.length ? newTime : [...time, value],</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// onBlur 離開表單</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleVerify</span>(<span class=\"params\">e</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;onBlur name:&quot;</span>, e.target.name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, address, review, gender, city, time &#125; = <span class=\"built_in\">this</span>.state;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">        &lt;form onSubmit=&#123;<span class=\"built_in\">this</span>.handleSubmit&#125;&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            姓名 :&#123;<span class=\"string\">&quot; &quot;</span>&#125;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              name=<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">              type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">              value=&#123;name&#125;</span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handelInputChange&#125;</span><br><span class=\"line\">              onBlur=&#123;<span class=\"built_in\">this</span>.handleVerify&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            地址 :&#123;<span class=\"string\">&quot; &quot;</span>&#125;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              name=<span class=\"string\">&quot;address&quot;</span></span><br><span class=\"line\">              type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">              value=&#123;address&#125;</span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handelInputChange&#125;</span><br><span class=\"line\">              onBlur=&#123;<span class=\"built_in\">this</span>.handleVerify&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            心得 :&#123;<span class=\"string\">&quot; &quot;</span>&#125;</span><br><span class=\"line\">            &lt;textarea</span><br><span class=\"line\">              name=<span class=\"string\">&quot;review&quot;</span></span><br><span class=\"line\">              value=&#123;review&#125;</span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handelInputChange&#125;</span><br><span class=\"line\">              onBlur=&#123;<span class=\"built_in\">this</span>.handleVerify&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            性別:</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              id=<span class=\"string\">&quot;gender_male&quot;</span></span><br><span class=\"line\">              checked=&#123;gender === <span class=\"string\">&quot;male&quot;</span>&#125;</span><br><span class=\"line\">              type=<span class=\"string\">&quot;radio&quot;</span></span><br><span class=\"line\">              value=<span class=\"string\">&quot;male&quot;</span></span><br><span class=\"line\">              name=<span class=\"string\">&quot;gender&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handelInputChange&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            &lt;label htmlFor=<span class=\"string\">&quot;gender_male&quot;</span>&gt;男&lt;/label&gt;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              id=<span class=\"string\">&quot;gender_female&quot;</span></span><br><span class=\"line\">              checked=&#123;gender === <span class=\"string\">&quot;female&quot;</span>&#125;</span><br><span class=\"line\">              type=<span class=\"string\">&quot;radio&quot;</span></span><br><span class=\"line\">              value=<span class=\"string\">&quot;female&quot;</span></span><br><span class=\"line\">              name=<span class=\"string\">&quot;gender&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handelInputChange&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            &lt;label htmlFor=<span class=\"string\">&quot;gender_female&quot;</span>&gt;女&lt;/label&gt;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              id=<span class=\"string\">&quot;gender_other&quot;</span></span><br><span class=\"line\">              checked=&#123;gender === <span class=\"string\">&quot;other&quot;</span>&#125;</span><br><span class=\"line\">              type=<span class=\"string\">&quot;radio&quot;</span></span><br><span class=\"line\">              value=<span class=\"string\">&quot;other&quot;</span></span><br><span class=\"line\">              name=<span class=\"string\">&quot;gender&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handelInputChange&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            &lt;label htmlFor=<span class=\"string\">&quot;gender_other&quot;</span>&gt;其他&lt;/label&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            縣市:</span><br><span class=\"line\">            &lt;select</span><br><span class=\"line\">              name=<span class=\"string\">&quot;city&quot;</span></span><br><span class=\"line\">              value=&#123;city&#125;</span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handelInputChange&#125;</span><br><span class=\"line\">              onBlur=&#123;<span class=\"built_in\">this</span>.handleVerify&#125;</span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              &lt;option value=<span class=\"string\">&quot;taipei&quot;</span>&gt;台北市&lt;/option&gt;</span><br><span class=\"line\">              &lt;option value=<span class=\"string\">&quot;new_taipei&quot;</span>&gt;新北市&lt;/option&gt;</span><br><span class=\"line\">              &lt;option value=<span class=\"string\">&quot;other&quot;</span>&gt;其他&lt;/option&gt;</span><br><span class=\"line\">            &lt;/select&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            有空時間:</span><br><span class=\"line\">            &lt;CheckBox</span><br><span class=\"line\">              value=<span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\">              id=<span class=\"string\">&quot;week_1&quot;</span></span><br><span class=\"line\">              checked=&#123;time.indexOf(<span class=\"string\">&quot;1&quot;</span>) &gt;= <span class=\"number\">0</span>&#125;</span><br><span class=\"line\">              label=<span class=\"string\">&quot;星期一&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handleCheckboxChange&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            &lt;CheckBox</span><br><span class=\"line\">              value=<span class=\"string\">&quot;2&quot;</span></span><br><span class=\"line\">              id=<span class=\"string\">&quot;week_2&quot;</span></span><br><span class=\"line\">              checked=&#123;time.indexOf(<span class=\"string\">&quot;2&quot;</span>) &gt;= <span class=\"number\">0</span>&#125;</span><br><span class=\"line\">              label=<span class=\"string\">&quot;星期二&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handleCheckboxChange&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            &lt;CheckBox</span><br><span class=\"line\">              value=<span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">              id=<span class=\"string\">&quot;week_3&quot;</span></span><br><span class=\"line\">              checked=&#123;time.indexOf(<span class=\"string\">&quot;3&quot;</span>) &gt;= <span class=\"number\">0</span>&#125;</span><br><span class=\"line\">              label=<span class=\"string\">&quot;星期三&quot;</span></span><br><span class=\"line\">              onChange=&#123;<span class=\"built_in\">this</span>.handleCheckboxChange&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            &lt;input type=<span class=\"string\">&quot;submit&quot;</span> /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/form&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure></li>\n</ul>\n","categories":["Framework"],"tags":["react"]},{"title":"React module","url":"/2021/10/28/react-7/","content":"<h3 id=\"material-ui\"><a href=\"#material-ui\" class=\"headerlink\" title=\"material-ui\"></a><a href=\"https://v4.mui.com/\">material-ui</a></h3><h4 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install material core</span></span><br><span class=\"line\">npm i @material-ui/core </span><br><span class=\"line\"><span class=\"comment\"># install material icons</span></span><br><span class=\"line\">npm i @material-ui/icons</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// icon</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> AddIcon <span class=\"keyword\">from</span> <span class=\"string\">&quot;@material-ui/icons/Add&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// Floating action button</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Fab <span class=\"keyword\">from</span> <span class=\"string\">&quot;@material-ui/core/Fab&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 顯示/消失</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Zoom <span class=\"keyword\">from</span> <span class=\"string\">&quot;@material-ui/core/Zoom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CreateArea</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;form className=<span class=\"string\">&quot;create-note&quot;</span>&gt;</span><br><span class=\"line\">        &#123;isInput &amp;&amp; (</span><br><span class=\"line\">          &lt;input</span><br><span class=\"line\">            name=<span class=\"string\">&quot;title&quot;</span></span><br><span class=\"line\">            onChange=&#123;handleChange&#125;</span><br><span class=\"line\">            value=&#123;note.title&#125;</span><br><span class=\"line\">            placeholder=<span class=\"string\">&quot;Title&quot;</span></span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">        &lt;textarea</span><br><span class=\"line\">          name=<span class=\"string\">&quot;content&quot;</span></span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          value=&#123;note.content&#125;</span><br><span class=\"line\">          placeholder=<span class=\"string\">&quot;Take a note...&quot;</span></span><br><span class=\"line\">          rows=&#123;isInput ? <span class=\"number\">3</span> : <span class=\"number\">1</span>&#125;</span><br><span class=\"line\">          onFocus=&#123;handleFocs&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;Zoom <span class=\"keyword\">in</span>=&#123;isInput&#125;&gt;</span><br><span class=\"line\">          &lt;Fab onClick=&#123;submitNote&#125;&gt;</span><br><span class=\"line\">            &lt;AddIcon /&gt;</span><br><span class=\"line\">          &lt;/Fab&gt;</span><br><span class=\"line\">        &lt;/Zoom&gt;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Ant-Design-antd\"><a href=\"#Ant-Design-antd\" class=\"headerlink\" title=\"Ant Design - antd\"></a><a href=\"https://ant.design/docs/react/introduce\">Ant Design - antd</a></h3><h4 id=\"install-1\"><a href=\"#install-1\" class=\"headerlink\" title=\"install\"></a>install</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install antd</span><br><span class=\"line\">yarn add antd</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"first-example\"><a href=\"#first-example\" class=\"headerlink\" title=\"first example\"></a>first example</h4><ul>\n<li>version</li>\n<li>DatePicker</li>\n<li>Button</li>\n</ul>\n<h5 id=\"src-App-js\"><a href=\"#src-App-js\" class=\"headerlink\" title=\"./src/App.js\"></a>./src/App.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Button, DatePicker, version &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;antd&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;antd/dist/antd.css&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;App&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h1&gt;antd version: &#123;version&#125;&lt;/h1&gt;</span><br><span class=\"line\">      &lt;DatePicker /&gt;</span><br><span class=\"line\">      &lt;Button type=<span class=\"string\">&quot;primary&quot;</span> style=&#123;&#123; <span class=\"attr\">marginLeft</span>: <span class=\"number\">8</span> &#125;&#125;&gt;</span><br><span class=\"line\">        Primary Button</span><br><span class=\"line\">      &lt;/Button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-index-js\"><a href=\"#src-index-js\" class=\"headerlink\" title=\"./src/index.js\"></a>./src/index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"選擇日期\"><a href=\"#選擇日期\" class=\"headerlink\" title=\"選擇日期\"></a>選擇日期</h4><ul>\n<li>ConfigProvider</li>\n<li>message</li>\n<li>Alert</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ConfigProvider, DatePicker, message, Alert &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;antd&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 修成繁體中文 ??? 真的需要嗎?</span></span><br><span class=\"line\"><span class=\"comment\">// import zhTW from &quot;antd/lib/locale/zh_TW&quot;;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;antd/dist/antd.css&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [date, setDate] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDate = <span class=\"function\">(<span class=\"params\">value</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    message.info(</span><br><span class=\"line\">      <span class=\"string\">`你選擇的日期是: <span class=\"subst\">$&#123;value ? value.format(<span class=\"string\">&quot;YYYY年MM月DD日&quot;</span>) : <span class=\"string\">&quot;未選擇&quot;</span>&#125;</span>`</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    setDate(value);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"comment\">// 修成繁體中文 ??? 真的需要嗎?</span></span><br><span class=\"line\">    <span class=\"comment\">// &lt;ConfigProvider locate=&#123;zhTW&#125;&gt;</span></span><br><span class=\"line\">    &lt;ConfigProvider&gt;</span><br><span class=\"line\">      &lt;div</span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">width</span>: <span class=\"number\">400</span>, <span class=\"attr\">margin</span>: <span class=\"string\">&quot;100px auto&quot;</span>, <span class=\"attr\">border</span>: <span class=\"string\">&quot;1px solid black&quot;</span> &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        &lt;DatePicker onChange=&#123;handleDate&#125; /&gt;</span><br><span class=\"line\">        &lt;div style=&#123;&#123; <span class=\"attr\">marginTop</span>: <span class=\"number\">16</span> &#125;&#125;&gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* 日期: &#123;date ? date.format(&quot;YYYY年MM月DD日&quot;) : &quot;未選擇&quot;&#125; */</span>&#125;</span><br><span class=\"line\">          &lt;Alert</span><br><span class=\"line\">            message=<span class=\"string\">&quot;目前日期&quot;</span></span><br><span class=\"line\">            description=&#123;date ? date.format(<span class=\"string\">&quot;YYYY年MM月DD日&quot;</span>) : <span class=\"string\">&quot;未选择&quot;</span>&#125;</span><br><span class=\"line\">            type=<span class=\"string\">&quot;success&quot;</span></span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/ConfigProvider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Book-Store\"><a href=\"#Book-Store\" class=\"headerlink\" title=\"Book Store\"></a>Book Store</h4><ul>\n<li>Table</li>\n<li>Card : Search</li>\n<li>Select : Option</li>\n<li>Input</li>\n<li>Space</li>\n</ul>\n<h5 id=\"src-index-js-1\"><a href=\"#src-index-js-1\" class=\"headerlink\" title=\"./src/index.js\"></a>./src/index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/App&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-columns-App-js\"><a href=\"#src-columns-App-js\" class=\"headerlink\" title=\"./src/columns/App.js\"></a>./src/columns/App.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/columns/App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Table, Card, Select, Input, Space &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;antd&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getBooks &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../books&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;antd/dist/antd.css&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Option &#125; = Select;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Search &#125; = Input;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> columns = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    title: <span class=\"string\">&quot;書名&quot;</span>,</span><br><span class=\"line\">    dataIndex: <span class=\"string\">&quot;title&quot;</span>,</span><br><span class=\"line\">    key: <span class=\"string\">&quot;title&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    title: <span class=\"string\">&quot;價格&quot;</span>,</span><br><span class=\"line\">    dataIndex: <span class=\"string\">&quot;price&quot;</span>,</span><br><span class=\"line\">    key: <span class=\"string\">&quot;price&quot;</span>,</span><br><span class=\"line\">    sorter: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    title: <span class=\"string\">&quot;分類&quot;</span>,</span><br><span class=\"line\">    dataIndex: <span class=\"string\">&quot;category&quot;</span>,</span><br><span class=\"line\">    key: <span class=\"string\">&quot;category&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    title: <span class=\"string\">&quot;出版日期&quot;</span>,</span><br><span class=\"line\">    dataIndex: <span class=\"string\">&quot;publishedAt&quot;</span>,</span><br><span class=\"line\">    key: <span class=\"string\">&quot;publishedAt&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> DEFAULT_PAGINATION = &#123;</span><br><span class=\"line\">  position: [<span class=\"string\">&quot;bottomCenter&quot;</span>],</span><br><span class=\"line\">  pageSize: <span class=\"number\">2</span>,</span><br><span class=\"line\">  pageSizeOptions: [<span class=\"number\">2</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>],</span><br><span class=\"line\">  showSizeChanger: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [pagination, setPagination] = useState(DEFAULT_PAGINATION);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [category, setCategory] = useState(<span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [keyword, setKeyword] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [sort, setSort] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [filter, setFilter] = useState(&#123;</span><br><span class=\"line\">    category,</span><br><span class=\"line\">    keyword,</span><br><span class=\"line\">    sort,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> books = getBooks(filter);</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;App render&quot;, category, filter);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChangeCategory</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">    setKeyword(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">    setCategory(value);</span><br><span class=\"line\">    setFilter(&#123; ...filter, <span class=\"attr\">category</span>: value &#125;);</span><br><span class=\"line\">    setPagination(&#123; ...pagination, <span class=\"attr\">current</span>: <span class=\"number\">1</span> &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChangeKeyword</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    setKeyword(e.target.value);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handelSearchKeyword</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">    setCategory(<span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">    setFilter(&#123; ...filter, <span class=\"attr\">keyword</span>: keyword &#125;);</span><br><span class=\"line\">    setPagination(&#123; ...pagination, <span class=\"attr\">current</span>: <span class=\"number\">1</span> &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handelChange</span>(<span class=\"params\">_pagination, filters, sorter, extra</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (extra.action === <span class=\"string\">&quot;paginate&quot;</span>) &#123;</span><br><span class=\"line\">      setPagination(_pagination);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (extra.action === <span class=\"string\">&quot;sort&quot;</span>) &#123;</span><br><span class=\"line\">      setSort(sorter.order);</span><br><span class=\"line\">      setFilter(&#123; ...filter, <span class=\"attr\">sort</span>: sorter.order &#125;);</span><br><span class=\"line\">      setPagination(&#123; ...pagination, <span class=\"attr\">current</span>: <span class=\"number\">1</span> &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;handelChange #1:&quot;, _pagination);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;handelChange #2:&quot;, filters);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;handelChange #3:&quot;, sorter);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;handelChange #4:&quot;, extra);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Card style=&#123;&#123; <span class=\"attr\">margin</span>: <span class=\"number\">10</span> &#125;&#125;&gt;</span><br><span class=\"line\">        &lt;Space&gt;</span><br><span class=\"line\">          &lt;Select</span><br><span class=\"line\">            placeholder=<span class=\"string\">&quot;書籍分類&quot;</span></span><br><span class=\"line\">            defaultValue=<span class=\"string\">&quot;0&quot;</span></span><br><span class=\"line\">            value=&#123;category&#125;</span><br><span class=\"line\">            onChange=&#123;handleChangeCategory&#125;</span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            &lt;Option value=<span class=\"string\">&quot;0&quot;</span>&gt;全部分類&lt;/Option&gt;</span><br><span class=\"line\">            &lt;Option value=<span class=\"string\">&quot;1&quot;</span>&gt;社會科學&lt;/Option&gt;</span><br><span class=\"line\">            &lt;Option value=<span class=\"string\">&quot;2&quot;</span>&gt;商業理財&lt;/Option&gt;</span><br><span class=\"line\">          &lt;/Select&gt;</span><br><span class=\"line\">          &lt;Search</span><br><span class=\"line\">            placeholder=<span class=\"string\">&quot;搜尋書名、分類&quot;</span></span><br><span class=\"line\">            value=&#123;keyword&#125;</span><br><span class=\"line\">            onSearch=&#123;handelSearchKeyword&#125;</span><br><span class=\"line\">            onChange=&#123;handleChangeKeyword&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Space&gt;</span><br><span class=\"line\">        &lt;Table</span><br><span class=\"line\">          dataSource=&#123;books&#125;</span><br><span class=\"line\">          columns=&#123;columns&#125;</span><br><span class=\"line\">          pagination=&#123;&#123; ...pagination &#125;&#125;</span><br><span class=\"line\">          onChange=&#123;handelChange&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/Card&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-book-js\"><a href=\"#src-book-js\" class=\"headerlink\" title=\"./src/book.js\"></a>./src/book.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/book.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bookStore = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    key: <span class=\"string\">&quot;1&quot;</span>,</span><br><span class=\"line\">    title: <span class=\"string\">&quot;遊牧人生 1&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"number\">332</span>,</span><br><span class=\"line\">    category: <span class=\"string\">&quot;社會科學&quot;</span>,</span><br><span class=\"line\">    publishedAt: <span class=\"string\">&quot;2019/10/31&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    key: <span class=\"string\">&quot;2&quot;</span>,</span><br><span class=\"line\">    title: <span class=\"string\">&quot;韓國人不想讓你知道的事 2&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"number\">234</span>,</span><br><span class=\"line\">    category: <span class=\"string\">&quot;社會科學&quot;</span>,</span><br><span class=\"line\">    publishedAt: <span class=\"string\">&quot;2021/03/30&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    key: <span class=\"string\">&quot;3&quot;</span>,</span><br><span class=\"line\">    title: <span class=\"string\">&quot;您可不曾認識的和平 3&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"number\">224</span>,</span><br><span class=\"line\">    category: <span class=\"string\">&quot;社會科學&quot;</span>,</span><br><span class=\"line\">    publishedAt: <span class=\"string\">&quot;2019/10/1&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    key: <span class=\"string\">&quot;4&quot;</span>,</span><br><span class=\"line\">    title: <span class=\"string\">&quot;致富心態 4&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"number\">338</span>,</span><br><span class=\"line\">    category: <span class=\"string\">&quot;商業理財&quot;</span>,</span><br><span class=\"line\">    publishedAt: <span class=\"string\">&quot;2021/01/27&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    key: <span class=\"string\">&quot;5&quot;</span>,</span><br><span class=\"line\">    title: <span class=\"string\">&quot;原子習慣 5&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"number\">231</span>,</span><br><span class=\"line\">    category: <span class=\"string\">&quot;商業理財&quot;</span>,</span><br><span class=\"line\">    publishedAt: <span class=\"string\">&quot;2019/06/01&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    key: <span class=\"string\">&quot;6&quot;</span>,</span><br><span class=\"line\">    title: <span class=\"string\">&quot;如何避免氣候災難 6&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"number\">315</span>,</span><br><span class=\"line\">    category: <span class=\"string\">&quot;商業理財&quot;</span>,</span><br><span class=\"line\">    publishedAt: <span class=\"string\">&quot;2021/03/02&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> CATEGORY = &#123;</span><br><span class=\"line\">  <span class=\"number\">1</span>: <span class=\"string\">&quot;社會科學&quot;</span>,</span><br><span class=\"line\">  <span class=\"number\">2</span>: <span class=\"string\">&quot;商業理財&quot;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getBooks</span>(<span class=\"params\">filter</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> books = bookStore</span><br><span class=\"line\">    .filter(<span class=\"function\">(<span class=\"params\">book</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (filter.category === <span class=\"string\">&quot;0&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> book.category === CATEGORY[filter.category];</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .filter(<span class=\"function\">(<span class=\"params\">book</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (filter.keyword === <span class=\"string\">&quot;&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        book.title.indexOf(filter.keyword) !== -<span class=\"number\">1</span> ||</span><br><span class=\"line\">        book.category.indexOf(filter.keyword) !== -<span class=\"number\">1</span></span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .sort(<span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (filter.sort === <span class=\"string\">&quot;ascend&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> x.price - y.price;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (filter.sort === <span class=\"string\">&quot;descend&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> y.price - x.price;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;...&quot;, filter);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;books:&quot;, books);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> books;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"lodash\"><a href=\"#lodash\" class=\"headerlink\" title=\"lodash\"></a><a href=\"https://lodash.com/docs\">lodash</a></h3><p>modern JavaScript utility library</p>\n<ul>\n<li>install<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install lodash</span><br></pre></td></tr></table></figure></li>\n<li>isUndefined(value) : value 為 undefined<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">isUndefined(<span class=\"keyword\">void</span> <span class=\"number\">0</span>); <span class=\"comment\">// =&gt; true</span></span><br><span class=\"line\">isUndefined(<span class=\"literal\">null</span>); <span class=\"comment\">// =&gt; false</span></span><br></pre></td></tr></table></figure></li>\n<li>isEmpty(value): value 為 空值<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">isEmpty(<span class=\"literal\">null</span>); <span class=\"comment\">// =&gt; true</span></span><br><span class=\"line\">isEmpty(<span class=\"literal\">true</span>); <span class=\"comment\">// =&gt; true</span></span><br><span class=\"line\">isEmpty(<span class=\"number\">1</span>); <span class=\"comment\">// =&gt; true</span></span><br><span class=\"line\">isEmpty([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]); <span class=\"comment\">// =&gt; false</span></span><br><span class=\"line\">isEmpty(&#123; <span class=\"string\">&#x27;a&#x27;</span>: <span class=\"number\">1</span> &#125;); <span class=\"comment\">// =&gt; false</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"react-router-dom-v5-to-v6\"><a href=\"#react-router-dom-v5-to-v6\" class=\"headerlink\" title=\"react-router-dom v5 to v6\"></a>react-router-dom v5 to v6</h3><ul>\n<li>change Switch to Routes</li>\n<li>component put to element </li>\n<li>change useHistory to Navigate<h4 id=\"react-router-dom-v5\"><a href=\"#react-router-dom-v5\" class=\"headerlink\" title=\"react-router-dom v5\"></a>react-router-dom v5</h4><h5 id=\"Switch\"><a href=\"#Switch\" class=\"headerlink\" title=\"Switch\"></a>Switch</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  Switch,</span><br><span class=\"line\">  Route,</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [user, setUser] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [isDone, setIsDone] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"comment\">// const isDone = useRef(false);</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = getAuthToken();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (token) &#123;</span><br><span class=\"line\">      getMe().then(<span class=\"function\"><span class=\"params\">resp</span> =&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (resp.ok === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">          setUser(resp.data);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    setIsDone(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;AuthContext.Provider value=&#123;&#123;user, setUser&#125;&#125;&gt;</span><br><span class=\"line\">      &lt;Root&gt;</span><br><span class=\"line\">        &lt;Header done=&#123;isDone&#125; /&gt;</span><br><span class=\"line\">        &lt;Switch&gt;</span><br><span class=\"line\">          &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            &lt;HomePage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/posts/:slug&quot;</span>&gt;</span><br><span class=\"line\">            &lt;BlogPost /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/new-post&quot;</span>&gt;</span><br><span class=\"line\">            &lt;CreatePage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/login&quot;</span>&gt;</span><br><span class=\"line\">            &lt;LoginPage /&gt;</span><br><span class=\"line\">          &lt;/Route&gt;</span><br><span class=\"line\">        &lt;/Switch&gt;</span><br><span class=\"line\">      &lt;/Root&gt;</span><br><span class=\"line\">    &lt;/AuthContext.Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"useHistory\"><a href=\"#useHistory\" class=\"headerlink\" title=\"useHistory\"></a>useHistory</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useLocation, useHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\">&#123;done&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, setUser &#125; = useContext(AuthContext); </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleLogout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setAuthToken(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">    setUser(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location.pathname !==  <span class=\"string\">&quot;/&quot;</span>) &#123;</span><br><span class=\"line\">      history.push(<span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;HeaderConainer&gt;</span><br><span class=\"line\">      &lt;LeftContainer&gt;</span><br><span class=\"line\">        &lt;Brand &gt;部落格&lt;/Brand&gt;</span><br><span class=\"line\">        &lt;NavbarList&gt;</span><br><span class=\"line\">          &lt;Nav to=<span class=\"string\">&quot;/&quot;</span> $active=&#123;location.pathname ===  <span class=\"string\">&quot;/&quot;</span>&#125; &gt;首頁&lt;/Nav&gt;</span><br><span class=\"line\">          &#123; (user &amp;&amp; done)&amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Nav</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/new-post&quot;</span> $<span class=\"attr\">active</span>=<span class=\"string\">&#123;location.pathname</span> ===  <span class=\"string\">&quot;/new-post&quot;</span>&#125; &gt;</span>發佈文章<span class=\"tag\">&lt;/<span class=\"name\">Nav</span>&gt;</span></span>&#125;</span><br><span class=\"line\">        &lt;/NavbarList&gt;</span><br><span class=\"line\">      &lt;/LeftContainer&gt;</span><br><span class=\"line\">      &lt;NavbarList&gt;</span><br><span class=\"line\">        &#123;(!user &amp;&amp; done) &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Nav</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/login&quot;</span> $<span class=\"attr\">active</span>=<span class=\"string\">&#123;location.pathname</span> ===  <span class=\"string\">&quot;/login&quot;</span>&#125;&gt;</span>登入<span class=\"tag\">&lt;/<span class=\"name\">Nav</span>&gt;</span></span>&#125;</span><br><span class=\"line\">        &#123;(user &amp;&amp; done)  &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Nav</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleLogout&#125;</span>&gt;</span>登出<span class=\"tag\">&lt;/<span class=\"name\">Nav</span>&gt;</span></span>&#125;</span><br><span class=\"line\">      &lt;/NavbarList&gt;</span><br><span class=\"line\">    &lt;/HeaderConainer&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Redirect\"><a href=\"#Redirect\" class=\"headerlink\" title=\"Redirect\"></a>Redirect</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Switch, Route, Redirect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Switch&gt;</span><br><span class=\"line\">      &lt;Route path=<span class=\"string\">&quot;/home&quot;</span>&gt;</span><br><span class=\"line\">        &lt;HomePage /&gt;</span><br><span class=\"line\">      &lt;/Route&gt;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// if path &quot;&quot; redirect to &quot;/home</span></span><br><span class=\"line\">      &lt;Redirect <span class=\"keyword\">from</span>=<span class=\"string\">&quot;/&quot;</span> to=<span class=\"string\">&quot;/home&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;/Switch&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"get-parameter-need-route-apos-s-component\"><a href=\"#get-parameter-need-route-apos-s-component\" class=\"headerlink\" title=\"get parameter ( need route&apos;s component)\"></a>get parameter ( need route&apos;s component)</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span> (<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">    useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// get parameter</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> productId = props.match.params.productId;</span><br><span class=\"line\">        loadSingleProduct(productId);</span><br><span class=\"line\">    &#125;, [props]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"react-router-dom-v6\"><a href=\"#react-router-dom-v6\" class=\"headerlink\" title=\"react-router-dom v6\"></a>react-router-dom v6</h4><h5 id=\"BrowserRouter-Routes-element\"><a href=\"#BrowserRouter-Routes-element\" class=\"headerlink\" title=\"BrowserRouter +  Routes + element\"></a>BrowserRouter +  Routes + element</h5> <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  react-router-dom V6</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route, Navigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          <span class=\"comment\">// Redirect</span></span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/home&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">replace</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/&quot;</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useNavigate\"><a href=\"#useNavigate\" class=\"headerlink\" title=\"useNavigate\"></a>useNavigate</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  react-router-dom V6</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Fragment &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useNavigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Menu = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// add history</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = createBrowserHistory(props);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> navigate = useNavigate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSignout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 指執行 callback function next</span></span><br><span class=\"line\">    signout(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      navigate(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Manu render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;nav nav-tabs bg-primary&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> style=&#123;isActive(history, <span class=\"string\">&quot;/&quot;</span>)&#125; to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            Home</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;!isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;Fragment&gt;</span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signup&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signup&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signup</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signin&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signin&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signin</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/Fragment&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* 因直接執行而不是切到另一頁,使用 span 即可 */</span>&#125;</span><br><span class=\"line\">            &lt;span</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;&#123; <span class=\"attr\">cursor</span>: <span class=\"string\">&quot;pointer&quot;</span>, <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;&#125;</span><br><span class=\"line\">              onClick=&#123;handleSignout&#125;</span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Signout</span><br><span class=\"line\">            &lt;/span&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Authentication\"><a href=\"#Authentication\" class=\"headerlink\" title=\"Authentication\"></a>Authentication</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 驗證 function()</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UserRequireAuth</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;: &#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children: JSX.Element,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isAuthenticated()) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Redirect them to the /login page, but save the current location they were</span></span><br><span class=\"line\">    <span class=\"comment\">// trying to go to when they were redirected. This allows us to send them</span></span><br><span class=\"line\">    <span class=\"comment\">// along to that page after they login, which is a nicer user experience</span></span><br><span class=\"line\">    <span class=\"comment\">// than dropping them off on the home page.</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/signin&quot;</span> <span class=\"attr\">state</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">from:</span> <span class=\"attr\">location</span> &#125;&#125; /&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> children;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 顯示內容</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UserDashboard</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (&lt;h2&gt;User Dashboard&lt;h2&gt;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"get-parameter\"><a href=\"#get-parameter\" class=\"headerlink\" title=\"get parameter\"></a>get parameter</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Product = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = useParams();</span><br><span class=\"line\">  </span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// react-router-dom v6 get parameter</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> productId = params.productId;</span><br><span class=\"line\">    locaSingleProduct(productId);</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  retrun (...);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"history\"><a href=\"#history\" class=\"headerlink\" title=\"history\"></a><a href=\"https://github.com/remix-run/history/blob/8bef6f4d50548f46ab7c97e171b3d8634093e7a7/docs/installation.md\">history</a></h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createBrowserHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;history&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isActive = <span class=\"function\">(<span class=\"params\">history, path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (history.location.pathname === path) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ff9900&quot;</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Menu = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// add history</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = createBrowserHistory(props);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> navigate = useNavigate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSignout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 指執行 callback function next</span></span><br><span class=\"line\">    signout(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      navigate(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Manu render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;nav nav-tabs bg-primary&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> style=&#123;isActive(history, <span class=\"string\">&quot;/&quot;</span>)&#125; to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            Home</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;!isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;Fragment&gt;</span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signup&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signup&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signup</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signin&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signin&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signin</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/Fragment&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* 因直接執行而不是切到另一頁,使用 span 即可 */</span>&#125;</span><br><span class=\"line\">            &lt;span</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;&#123; <span class=\"attr\">cursor</span>: <span class=\"string\">&quot;pointer&quot;</span>, <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;&#125;</span><br><span class=\"line\">              onClick=&#123;handleSignout&#125;</span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Signout</span><br><span class=\"line\">            &lt;/span&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"braintree-web-drop-in-react-React-component-that-wraps-braintree-web-drop-in\"><a href=\"#braintree-web-drop-in-react-React-component-that-wraps-braintree-web-drop-in\" class=\"headerlink\" title=\"braintree-web-drop-in-react : React component that wraps braintree-web-drop-in\"></a><a href=\"https://www.npmjs.com/package/braintree-web-drop-in-react\">braintree-web-drop-in-react</a> : React component that wraps braintree-web-drop-in</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> DropIn <span class=\"keyword\">from</span> <span class=\"string\">&quot;braintree-web-drop-in-react&quot;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Store</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  instance;</span><br><span class=\"line\"> </span><br><span class=\"line\">  state = &#123;</span><br><span class=\"line\">    clientToken: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Get a client token for authorization from your server</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> fetch(<span class=\"string\">&quot;server.test/client_token&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> clientToken = <span class=\"keyword\">await</span> response.json(); <span class=\"comment\">// If returned as JSON string</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      clientToken,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">buy</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Send the nonce to your server</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; nonce &#125; = <span class=\"keyword\">await</span> <span class=\"built_in\">this</span>.instance.requestPaymentMethod();</span><br><span class=\"line\">    <span class=\"keyword\">await</span> fetch(<span class=\"string\">`server.test/purchase/<span class=\"subst\">$&#123;nonce&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">this</span>.state.clientToken) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;h1&gt;Loading...&lt;/h1&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;DropIn</span><br><span class=\"line\">            options=&#123;&#123; <span class=\"attr\">authorization</span>: <span class=\"built_in\">this</span>.state.clientToken &#125;&#125;</span><br><span class=\"line\">            onInstance=&#123;<span class=\"function\">(<span class=\"params\">instance</span>) =&gt;</span> (<span class=\"built_in\">this</span>.instance = instance)&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;button onClick=&#123;<span class=\"built_in\">this</span>.buy.bind(<span class=\"built_in\">this</span>)&#125;&gt;Buy&lt;/button&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://reactrouter.com/docs/en/v6\">react-router-dom v6 document</a></li>\n<li><a href=\"https://v5.reactrouter.com/web/guides/quick-start\">react-router-dom v5 document</a></li>\n</ul>\n","categories":["Framework"],"tags":["react"]},{"title":"mongoDB","url":"/2021/11/06/db-3/","content":"<h3 id=\"Robo-3T-MongoDB-GUI-工具\"><a href=\"#Robo-3T-MongoDB-GUI-工具\" class=\"headerlink\" title=\"Robo 3T : MongoDB GUI 工具\"></a><a href=\"https://robomongo.org/\">Robo 3T</a> : MongoDB GUI 工具</h3><span id=\"more\"></span>\n\n<h4 id=\"download-RoBo-3T-for-windows-zip-version-即可\"><a href=\"#download-RoBo-3T-for-windows-zip-version-即可\" class=\"headerlink\" title=\"download RoBo 3T (for windows .zip version 即可)\"></a>download RoBo 3T (for windows .zip version 即可)</h4><div style=\"max-width:500px\">\n    <img src=\"/2021/11/06/db-3/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n\n<div style=\"max-width:500px\">\n    <img src=\"/2021/11/06/db-3/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n\n<h4 id=\"解壓縮後執行-robo3t-exe\"><a href=\"#解壓縮後執行-robo3t-exe\" class=\"headerlink\" title=\"解壓縮後執行 robo3t.exe\"></a>解壓縮後執行 robo3t.exe</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<h4 id=\"選擇-I-agree-Next\"><a href=\"#選擇-I-agree-Next\" class=\"headerlink\" title=\"選擇 I agree , Next\"></a>選擇 I agree , Next</h4><div style=\"max-width:500px\">\n    <img src=\"/2021/11/06/db-3/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<h4 id=\"選擇-Finish\"><a href=\"#選擇-Finish\" class=\"headerlink\" title=\"選擇 Finish\"></a>選擇 Finish</h4><div style=\"max-width:500px\">\n    <img src=\"/2021/11/06/db-3/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<h4 id=\"選擇-Create-填入由MongoDB-atlas-取得-url-Node-js-4-0-or-later-版本即可-選-Form-URI\"><a href=\"#選擇-Create-填入由MongoDB-atlas-取得-url-Node-js-4-0-or-later-版本即可-選-Form-URI\" class=\"headerlink\" title=\"選擇 Create, 填入由MongoDB atlas 取得 url(Node.js 4.0 or later 版本即可), 選 Form URI\"></a>選擇 Create, 填入由MongoDB atlas 取得 url(Node.js 4.0 or later 版本即可), 選 Form URI</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<h4 id=\"選擇-Save\"><a href=\"#選擇-Save\" class=\"headerlink\" title=\"選擇 Save\"></a>選擇 Save</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<h4 id=\"選擇-Connect-即可見到-DB-畫面\"><a href=\"#選擇-Connect-即可見到-DB-畫面\" class=\"headerlink\" title=\"選擇 Connect 即可見到 DB 畫面\"></a>選擇 Connect 即可見到 DB 畫面</h4><div style=\"max-width:500px\">\n    <img src=\"/2021/11/06/db-3/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<div style=\"max-width:500px\">\n    <img src=\"/2021/11/06/db-3/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n\n<h3 id=\"MongoDB-Altas-add-project\"><a href=\"#MongoDB-Altas-add-project\" class=\"headerlink\" title=\"MongoDB Altas add project\"></a>MongoDB Altas add project</h3><h4 id=\"選擇-New-Project-Next-Create-Project\"><a href=\"#選擇-New-Project-Next-Create-Project\" class=\"headerlink\" title=\"選擇 New Project, Next, Create Project\"></a>選擇 New Project, Next, Create Project</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic11.png\" class=\"\" title=\"pic11\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic12.png\" class=\"\" title=\"pic12\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic13.png\" class=\"\" title=\"pic13\">\n</div>\n\n<h4 id=\"Databases-Build-a-Database-Shared-Create-select-position-Create-Cluster\"><a href=\"#Databases-Build-a-Database-Shared-Create-select-position-Create-Cluster\" class=\"headerlink\" title=\"Databases : Build a Database, Shared(Create), select position+Create Cluster\"></a>Databases : Build a Database, Shared(Create), select position+Create Cluster</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic14.png\" class=\"\" title=\"pic14\">\n</div>\n\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic15.png\" class=\"\" title=\"pic15\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic16.png\" class=\"\" title=\"pic16\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic17.png\" class=\"\" title=\"pic17\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic18.png\" class=\"\" title=\"pic18\">\n</div>\n\n<h4 id=\"Network-Access-Add-IP-Address-0-0-0-0-0-表不限制-Confirm\"><a href=\"#Network-Access-Add-IP-Address-0-0-0-0-0-表不限制-Confirm\" class=\"headerlink\" title=\"Network Access : Add IP Address, 0.0.0.0/0(表不限制), Confirm\"></a>Network Access : Add IP Address, 0.0.0.0/0(表不限制), Confirm</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic19.png\" class=\"\" title=\"pic19\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic20.png\" class=\"\" title=\"pic20\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n\n<h4 id=\"Database-Access-add-New-DataBase-User-set-user-info-add-User\"><a href=\"#Database-Access-add-New-DataBase-User-set-user-info-add-User\" class=\"headerlink\" title=\"Database Access: add New DataBase User, set user info, add User\"></a>Database Access: add New DataBase User, set user info, add User</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic22.png\" class=\"\" title=\"pic22\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic23.png\" class=\"\" title=\"pic23\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic24.png\" class=\"\" title=\"pic24\">\n</div>\n\n<h4 id=\"get-link-url-Databases-Connect-Connect-your-application\"><a href=\"#get-link-url-Databases-Connect-Connect-your-application\" class=\"headerlink\" title=\"get link url, Databases: Connect, Connect your application,\"></a>get link url, Databases: Connect, Connect your application,</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic25.png\" class=\"\" title=\"pic25\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic26.png\" class=\"\" title=\"pic26\">\n</div>\n\n<h4 id=\"NOde-js-4-0-or-later-driver\"><a href=\"#NOde-js-4-0-or-later-driver\" class=\"headerlink\" title=\"NOde.js 4.0 or later driver\"></a>NOde.js 4.0 or later driver</h4><p>使用時要填入正確的 password<br>myFirstDataBase 為 default DB name, 可改為其他名稱</p>\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic27.png\" class=\"\" title=\"pic27\">\n</div>\n\n<h4 id=\"NOde-js-2-2-12-or-later-driver-某些applicat要使用這個版本才能使用\"><a href=\"#NOde-js-2-2-12-or-later-driver-某些applicat要使用這個版本才能使用\" class=\"headerlink\" title=\"NOde.js 2.2.12 or later driver(某些applicat要使用這個版本才能使用)\"></a>NOde.js 2.2.12 or later driver(某些applicat要使用這個版本才能使用)</h4><p>使用時要填入正確的 password<br>myFirstDataBase 為 default DB name, 可改為其他名稱</p>\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic28.png\" class=\"\" title=\"pic28\">\n</div>\n\n<h4 id=\"加入-database-Databases-add-My-Own-data-database-info-Create\"><a href=\"#加入-database-Databases-add-My-Own-data-database-info-Create\" class=\"headerlink\" title=\"加入 database, Databases : add My Own data, database info+Create\"></a>加入 database, Databases : add My Own data, database info+Create</h4><div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic29.png\" class=\"\" title=\"pic29\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic30.png\" class=\"\" title=\"pic30\">\n</div>\n\n<div style=\"max-width:700px\">\n    <img src=\"/2021/11/06/db-3/pic31.png\" class=\"\" title=\"pic31\">\n</div>\n\n<h3 id=\"MongoDB\"><a href=\"#MongoDB\" class=\"headerlink\" title=\"MongoDB\"></a>MongoDB</h3><h4 id=\"Schema\"><a href=\"#Schema\" class=\"headerlink\" title=\"Schema\"></a>Schema</h4><h5 id=\"type\"><a href=\"#type\" class=\"headerlink\" title=\"type\"></a>type</h5><ul>\n<li>String</li>\n<li>Number</li>\n<li>Array</li>\n<li>ObjectId</li>\n<li>Boolean</li>\n</ul>\n<h5 id=\"special\"><a href=\"#special\" class=\"headerlink\" title=\"special\"></a>special</h5><ul>\n<li><p>map to other </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">category: &#123;</span><br><span class=\"line\">  type: ObjectId,</span><br><span class=\"line\">  ref: <span class=\"string\">&quot;Category&quot;</span>,</span><br><span class=\"line\">  required: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li><p>photo</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">photo: &#123;</span><br><span class=\"line\">  data: Buffer,</span><br><span class=\"line\">  contentType: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li><p>simple string</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">salt: <span class=\"built_in\">String</span>,</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"default\"><a href=\"#default\" class=\"headerlink\" title=\"default\"></a>default</h5><ul>\n<li>0</li>\n<li>[]</li>\n</ul>\n<h5 id=\"othert-field\"><a href=\"#othert-field\" class=\"headerlink\" title=\"othert field\"></a>othert field</h5><ul>\n<li>trim : true</li>\n<li>required: true</li>\n<li>maxlength: 32</li>\n<li>unique: 32</li>\n<li>timestamps: true</li>\n</ul>\n<h4 id=\"regex\"><a href=\"#regex\" class=\"headerlink\" title=\"$regex\"></a>$regex</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> query = &#123;&#125;;</span><br><span class=\"line\">query.name = &#123; <span class=\"attr\">$regex</span>: req.query.search, <span class=\"attr\">$options</span>: <span class=\"string\">&quot;i&quot;</span> &#125;;</span><br><span class=\"line\">Product.find(query, <span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"control\"><a href=\"#control\" class=\"headerlink\" title=\"control\"></a>control</h4><ul>\n<li>Category.find().exec((err, data) =&gt; {}) : find all</li>\n<li>Product.find({ _id: { $ne: req.product }, category: req.product.category }): find by consition, $ne: not include</li>\n<li>Product.find(query, (err, products) =&gt; {}) : find direct run, not run exec</li>\n<li>findById(id).exec((err, product) =&gt; {} ) : find by id</li>\n<li>select(“-photo”) : remove field</li>\n<li>populate(“category”) : link to another table</li>\n<li>sort([[sortBy, order]]) : sort</li>\n<li>skip(skip) : set skip</li>\n<li>limit(limit) : set limit</li>\n<li>remove((err, deletedProduct) =&gt; {} ) : remove</li>\n<li>findOneAndUpdate() : find + update <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">.findOneAndUpdate(</span><br><span class=\"line\">  &#123; <span class=\"attr\">_id</span>: req.profile._id &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">$set</span>: req.body &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">new</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">  (err, user) =&gt; &#123;&#125;)</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"mongoose-mongoDB-object-modeling-tool-to-work-in-an-asynchronous-environment-Mongoose-supports-both-promises-and-callbacks\"><a href=\"#mongoose-mongoDB-object-modeling-tool-to-work-in-an-asynchronous-environment-Mongoose-supports-both-promises-and-callbacks\" class=\"headerlink\" title=\"mongoose : mongoDB object modeling tool to work in an asynchronous environment. Mongoose supports both promises and callbacks.\"></a><a href=\"https://www.npmjs.com/package/mongoose\">mongoose</a> : mongoDB object modeling tool to work in an asynchronous environment. Mongoose supports both promises and callbacks.</h3><h4 id=\"example-code\"><a href=\"#example-code\" class=\"headerlink\" title=\"example code\"></a>example code</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> uri =</span><br><span class=\"line\">  <span class=\"string\">&quot;mongodb://robert2:&#123;password&#125;@cluster0-shard-00-00.bscvu.mongodb.net:27017,cluster0-shard-00-01.bscvu.mongodb.net:27017,cluster0-shard-00-02.bscvu.mongodb.net:27017/myFirstDatabase?ssl=true&amp;replicaSet=atlas-11cyyj-shard-0&amp;authSource=admin&amp;retryWrites=true&amp;w=majority&quot;</span>;</span><br><span class=\"line\">mongoose</span><br><span class=\"line\">  .connect(uri, &#123;</span><br><span class=\"line\">    useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;MongoDB Connected…&quot;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// save data</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = mongoose.model(<span class=\"string\">&quot;User&quot;</span>, userSchema);</span><br><span class=\"line\"><span class=\"keyword\">new</span> User(req.body).save;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get data </span></span><br><span class=\"line\">User.findOne(&#123; email &#125;)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Deprecation-Warnings\"><a href=\"#Deprecation-Warnings\" class=\"headerlink\" title=\"Deprecation Warnings\"></a><a href=\"https://mongoosejs.com/docs/deprecations.html\">Deprecation Warnings</a></h4><h5 id=\"update\"><a href=\"#update\" class=\"headerlink\" title=\"update()\"></a>update()</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Replace this:</span></span><br><span class=\"line\">MyModel.update(&#123; <span class=\"attr\">foo</span>: <span class=\"string\">&#x27;bar&#x27;</span> &#125;, &#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// With this:</span></span><br><span class=\"line\">MyModel.updateOne(&#123; <span class=\"attr\">foo</span>: <span class=\"string\">&#x27;bar&#x27;</span> &#125;, &#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// If you use `overwrite: true`, you should use `replaceOne()` instead:</span></span><br><span class=\"line\">MyModel.update(filter, update, &#123; <span class=\"attr\">overwrite</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// Replace with this:</span></span><br><span class=\"line\">MyModel.replaceOne(filter, update);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// If you use `multi: true`, you should use `updateMany()` instead:</span></span><br><span class=\"line\">MyModel.update(filter, update, &#123; <span class=\"attr\">multi</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// Replace with this:</span></span><br><span class=\"line\">MyModel.updateMany(filter, update);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"remove\"><a href=\"#remove\" class=\"headerlink\" title=\"remove()\"></a>remove()</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Replace this:</span></span><br><span class=\"line\">MyModel.remove(&#123; <span class=\"attr\">foo</span>: <span class=\"string\">&#x27;bar&#x27;</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// With this:</span></span><br><span class=\"line\">MyModel.deleteMany(&#123; <span class=\"attr\">foo</span>: <span class=\"string\">&#x27;bar&#x27;</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Replace this:</span></span><br><span class=\"line\">MyModel.remove(&#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;, &#123; <span class=\"attr\">single</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// With this:</span></span><br><span class=\"line\">MyModel.deleteOne(&#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"count\"><a href=\"#count\" class=\"headerlink\" title=\"count()\"></a>count()</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Replace this:</span></span><br><span class=\"line\">MyModel.count(&#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// With this:</span></span><br><span class=\"line\">MyModel.countDocuments(&#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// If you&#x27;re counting all documents in the collection, use</span></span><br><span class=\"line\"><span class=\"comment\">// `estimatedDocumentCount()` instead.</span></span><br><span class=\"line\">MyModel.count();</span><br><span class=\"line\"><span class=\"comment\">// Replace with:</span></span><br><span class=\"line\">MyModel.estimatedDocumentCount();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Replace this:</span></span><br><span class=\"line\">MyModel.find(&#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;).count().exec();</span><br><span class=\"line\"><span class=\"comment\">// With this:</span></span><br><span class=\"line\">MyModel.find(&#123; <span class=\"attr\">answer</span>: <span class=\"number\">42</span> &#125;).countDocuments().exec();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Replace this:</span></span><br><span class=\"line\">MyModel.find().count().exec();</span><br><span class=\"line\"><span class=\"comment\">// With this, since there&#x27;s no filter</span></span><br><span class=\"line\">MyModel.find().estimatedDocumentCount().exec();</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://mongoosejs.com/docs/\">mongoose document</a></li>\n</ul>\n","categories":["Back End"],"tags":["database","mongoDB"]},{"title":"PCIe","url":"/2021/11/18/pcie-1/","content":"<h3 id=\"名詞\"><a href=\"#名詞\" class=\"headerlink\" title=\"名詞\"></a>名詞</h3><ul>\n<li>Common clocking : 使用相同的 clock</li>\n<li>SRNS(separate reference clock no SSC) : no SSC (須要求 clock 準確度)</li>\n<li>SRIS(separate reference clock independent SSC)</li>\n<li>SSC(spread spectrum clock) isolation</li>\n<li>PSW(Program Status Word)</li>\n</ul>\n<span id=\"more\"></span>\n\n<h4 id=\"PCIE-clock-mode\"><a href=\"#PCIE-clock-mode\" class=\"headerlink\" title=\"PCIE clock mode\"></a>PCIE clock mode</h4><ul>\n<li>Common Reference clock</li>\n<li>Separate Reference Clock<ul>\n<li>With No SSC(SRNS)<br>SRNS allows worst case of 600 ppm</li>\n<li>With Independent SSC(SRIS)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://www.truechip.net/articles-details/clocking-architectures-in-pci-express/1114382405\">Clocking Architectures in PCI Express</a></li>\n<li><a href=\"https://www.abbreviationfinder.org/\">Abbreviation Finder</a></li>\n</ul>\n","categories":["HW"],"tags":["pcie"]},{"title":"React tricky","url":"/2021/11/25/react-8/","content":"<h3 id=\"event-include-parameter\"><a href=\"#event-include-parameter\" class=\"headerlink\" title=\"event include parameter\"></a>event include parameter</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Checkbox</span>(<span class=\"params\">&#123; categories, handleFilters &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [checked, setChecked] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; event include parameter</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleToggle = <span class=\"function\">(<span class=\"params\">c</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return the first index or -1</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> currentCategoryId = checked.indexOf(c);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> newCheckedCategoryId = [...checked];</span><br><span class=\"line\">    <span class=\"comment\">// if current checked was not already in checked state &gt; push</span></span><br><span class=\"line\">    <span class=\"comment\">// else pull/take off</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (currentCategoryId === -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      newCheckedCategoryId.push(c);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      newCheckedCategoryId.splice(currentCategoryId, <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    setChecked(newCheckedCategoryId);</span><br><span class=\"line\">    handleFilters(newCheckedCategoryId);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> categories.map(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> (</span><br><span class=\"line\">    &lt;li key=&#123;i&#125; className=<span class=\"string\">&quot;list-unstyled&quot;</span>&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* ***---&gt;&gt;&gt; event include parameter */</span>&#125;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        onChange=&#123;handleToggle(c._id)&#125;</span><br><span class=\"line\">        value=&#123;checked.indexOf(c._id) === -<span class=\"number\">1</span>&#125;</span><br><span class=\"line\">        type=<span class=\"string\">&quot;checkbox&quot;</span></span><br><span class=\"line\">        className=<span class=\"string\">&quot;form-check-input&quot;</span></span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">      &lt;label htmlFor=<span class=\"string\">&quot;form-check-label&quot;</span>&gt;&#123;c.name&#125;&lt;/label&gt;</span><br><span class=\"line\">    &lt;/li&gt;</span><br><span class=\"line\">  ));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h3 id=\"call-API-function-要加-return-才能-then\"><a href=\"#call-API-function-要加-return-才能-then\" class=\"headerlink\" title=\"call API function 要加 return 才能 then\"></a>call API function 要加 return 才能 then</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">  setValues(&#123;</span><br><span class=\"line\">    ...values,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// make request to api to create category</span></span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; call API function 要加 return 才能 then 處理</span></span><br><span class=\"line\">  createCategory(user._id, token, &#123; name &#125;).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">      setValues(&#123;</span><br><span class=\"line\">        ...values,</span><br><span class=\"line\">        error: data.error,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      setValues(&#123;</span><br><span class=\"line\">        ...values,</span><br><span class=\"line\">        error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">        success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createCategory = <span class=\"function\">(<span class=\"params\">userId, token, category</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; call API function 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/category/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(category),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"使用-arrow-函數-可省略-return\"><a href=\"#使用-arrow-函數-可省略-return\" class=\"headerlink\" title=\"使用 arrow 函數,可省略 return\"></a>使用 arrow 函數,可省略 return</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AdmintDashboard</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    user: &#123; name, email, role &#125;,</span><br><span class=\"line\">  &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; 使用 arrow 函數,可省略 return</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> adminInfo = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;<span class=\"string\">`G&#x27;Day <span class=\"subst\">$&#123;name&#125;</span>!`</span>&#125;&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;name&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;email&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &#123;role === <span class=\"number\">1</span> ? <span class=\"string\">&quot;Admin&quot;</span> : <span class=\"string\">&quot;Registrred User&quot;</span>&#125;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Dashboard Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Admin Dashboard&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* ***---&gt;&gt;&gt; 使用 arrow 函數,可省略 return */</span>&#125;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;&#123;adminLinks()&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-9&quot;</span>&gt;&#123;adminInfo()&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n","categories":["Framework"],"tags":["tricky","react"]},{"title":"金流","url":"/2021/12/07/js-5/","content":"<h3 id=\"Briantree-sandbox\"><a href=\"#Briantree-sandbox\" class=\"headerlink\" title=\"Briantree sandbox\"></a>Briantree sandbox</h3><h4 id=\"setup-Briantree-account\"><a href=\"#setup-Briantree-account\" class=\"headerlink\" title=\"setup Briantree account\"></a>setup Briantree account</h4><h5 id=\"generate-API-Key-get-Merchant-ID-Public-Key-Private-Key\"><a href=\"#generate-API-Key-get-Merchant-ID-Public-Key-Private-Key\" class=\"headerlink\" title=\"generate API Key( get Merchant ID, Public Key, Private Key)\"></a>generate API Key( get Merchant ID, Public Key, Private Key)</h5><p>login Briantree –&gt; API –&gt; Generate New API Key –&gt; get API key</p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic1.png\" class=\"\" title=\"pic1\">\n</div>\n\n<span id=\"more\"></span>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic2.png\" class=\"\" title=\"pic2\">\n</div>\n\n<h5 id=\"set-CVV\"><a href=\"#set-CVV\" class=\"headerlink\" title=\"set CVV\"></a>set CVV</h5><p>Fraud Management –&gt; CVV –&gt; CVV does not match (when provided) (N) –&gt; For Any Transaction</p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic3.png\" class=\"\" title=\"pic3\">\n</div>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic4.png\" class=\"\" title=\"pic4\">\n</div>\n\n<h5 id=\"new-Merchant-Account-ID\"><a href=\"#new-Merchant-Account-ID\" class=\"headerlink\" title=\"new Merchant Account ID\"></a>new Merchant Account ID</h5><p>Business –&gt; new Sandbox Merchant Account –&gt; set Merchant Account ID + currency</p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic5.png\" class=\"\" title=\"pic5\">\n</div>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic6.png\" class=\"\" title=\"pic6\">\n</div>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic7.png\" class=\"\" title=\"pic7\">\n</div>\n\n\n<h4 id=\"example-code\"><a href=\"#example-code\" class=\"headerlink\" title=\"example code\"></a>example code</h4><ul>\n<li>Merchant Account ID 是用來設定不同幣別</li>\n<li>clientToken 設定 merchantAccountId 可但若要顯示 支援 payment 的方式 </li>\n<li>transaction 設定 merchantAccountId 才會歸到設定帳戶,若未指定 merchantAccountId 會使用 default account 和 貨幣<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/braintree.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> braintree = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;braintree&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> gateway = <span class=\"keyword\">new</span> braintree.BraintreeGateway(&#123;</span><br><span class=\"line\">  environment: braintree.Environment.Sandbox,</span><br><span class=\"line\">  merchantId: process.env.BRAINTREE_MERCHANT_ID,</span><br><span class=\"line\">  publicKey: process.env.BRAINTREE_PUBLIC_KEY,</span><br><span class=\"line\">  privateKey: process.env.BRAINTREE_PRIVATE_KEY,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.generateToken = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// transaction 設定 merchantAccountId 就好,clientToken 可以不用設</span></span><br><span class=\"line\">  <span class=\"comment\">// 但若要顯示 payment 的方式,就要設定</span></span><br><span class=\"line\">  <span class=\"comment\">// gateway.clientToken.generate(&#123;&#125;, function (err, response) &#123;</span></span><br><span class=\"line\">  gateway.clientToken.generate(</span><br><span class=\"line\">    &#123; <span class=\"attr\">merchantAccountId</span>: process.env.BRAINTREE_MERCHANT_ACCOUNT_ID &#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, response</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">500</span>).send(err);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(response);</span></span><br><span class=\"line\">        res.send(response);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.processPayment = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> nonceFromTheClient = req.body.paymentMethodNonce;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> amountFromTheClient = req.body.amount;</span><br><span class=\"line\">  <span class=\"comment\">// charge</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> newTransaction = gateway.transaction.sale(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      amount: amountFromTheClient,</span><br><span class=\"line\">      paymentMethodNonce: nonceFromTheClient,</span><br><span class=\"line\">      <span class=\"comment\">// 可設定不同的 merchantAccountId( for 不同的貨幣)</span></span><br><span class=\"line\">      merchantAccountId: process.env.BRAINTREE_MERCHANT_ACCOUNT_ID,</span><br><span class=\"line\">      options: &#123;</span><br><span class=\"line\">        submitForSettlement: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    (error, result) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">500</span>).json(error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        res.json(result);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"set-paypal\"><a href=\"#set-paypal\" class=\"headerlink\" title=\"set paypal\"></a>set paypal</h4><p>Processing –&gt; paypal –&gt; set PayPal Email, PayPal Client Id, PayPal Client Secret –&gt; Link PayPal Sandbox</p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic8.png\" class=\"\" title=\"pic8\">\n</div>\n\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic9.png\" class=\"\" title=\"pic9\">\n</div>\n\n<h4 id=\"add-paypal-example-code\"><a href=\"#add-paypal-example-code\" class=\"headerlink\" title=\"add paypal example code\"></a>add paypal example code</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showDropIn</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div onBlur=&#123;<span class=\"function\">() =&gt;</span> setData(&#123; ...data, <span class=\"attr\">error</span>: <span class=\"string\">&quot;&quot;</span> &#125;)&#125;&gt;</span><br><span class=\"line\">      &#123;data.clientToken != <span class=\"literal\">null</span> &amp;&amp; products.length &gt; <span class=\"number\">0</span> ? (</span><br><span class=\"line\">        &lt;DropIn</span><br><span class=\"line\">          options=&#123;&#123;</span><br><span class=\"line\">            authorization: data.clientToken,</span><br><span class=\"line\">            <span class=\"comment\">// ad paypal option</span></span><br><span class=\"line\">            paypal: &#123;</span><br><span class=\"line\">              flow: <span class=\"string\">&quot;vault&quot;</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">          onInstance=&#123;<span class=\"function\">(<span class=\"params\">instance</span>) =&gt;</span> (data.instance = instance)&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      ) : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">      &lt;button onClick=&#123;handleBuy&#125; className=<span class=\"string\">&quot;btn btn-success btn-block&quot;</span>&gt;</span><br><span class=\"line\">        Pay</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"PayPal-sandbox-需先申請正式-paypal帳號\"><a href=\"#PayPal-sandbox-需先申請正式-paypal帳號\" class=\"headerlink\" title=\"PayPal sandbox(需先申請正式 paypal帳號)\"></a>PayPal sandbox(需先申請正式 paypal帳號)</h3><h4 id=\"get-paypal-merchant-account\"><a href=\"#get-paypal-merchant-account\" class=\"headerlink\" title=\"get paypal merchant account\"></a>get paypal merchant account</h4><p>My Apps &amp; Credentials –&gt; Create App –&gt; get payapl merchant account information</p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic11.png\" class=\"\" title=\"pic11\">\n</div>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic12.png\" class=\"\" title=\"pic12\">\n</div>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic16.png\" class=\"\" title=\"pic16\">\n</div>\n\n<h4 id=\"get-paypal-personal-account\"><a href=\"#get-paypal-personal-account\" class=\"headerlink\" title=\"get paypal personal account\"></a>get paypal personal account</h4><p>SANDBOX –&gt; Accounts –&gt; Create account –&gt; get pernal account information</p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic13.png\" class=\"\" title=\"pic13\">\n</div>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic14.png\" class=\"\" title=\"pic14\">\n</div>\n\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-5/pic15.png\" class=\"\" title=\"pic15\">\n</div>\n\n\n<h3 id=\"Test-Credit-Card-Account-Numbers\"><a href=\"#Test-Credit-Card-Account-Numbers\" class=\"headerlink\" title=\"Test Credit Card Account Numbers\"></a>Test Credit Card Account Numbers</h3><table>\n<thead>\n<tr>\n<th>Type</th>\n<th>account #1</th>\n<th>account #2</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>American Express</td>\n<td>378282246310005</td>\n<td>371449635398431</td>\n</tr>\n<tr>\n<td>JCB</td>\n<td>3530111333300000</td>\n<td>3566002020360505</td>\n</tr>\n<tr>\n<td>Visa</td>\n<td>4111111111111111</td>\n<td>4012888888881881</td>\n</tr>\n<tr>\n<td>MasterCard</td>\n<td>5555555555554444</td>\n<td>5105105105105100</td>\n</tr>\n</tbody></table>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://rubygarage.org/blog/stripe-vs-braintree-vs-paypal-how-do-these-payment-platforms-compare\">Stripe vs PayPal vs Braintree</a></li>\n<li><a href=\"https://www.merchantmaverick.com/stripe-vs-braintree/\">Stripe VS Braintree</a></li>\n<li><a href=\"https://medium.com/kkdaytech/%E5%81%9A%E7%82%BA%E9%9B%BB%E5%95%86-pm-%E6%88%91%E6%98%AF%E5%A6%82%E4%BD%95%E9%81%B8%E6%93%87%E9%87%91%E6%B5%81%E6%9C%8D%E5%8B%99%E5%95%86-a81bc651f6a6\">做為電商 PM，我是如何選擇金流服務商</a></li>\n<li><a href=\"https://www.braintreepayments.com/sandbox\">Sandbox | Braintree Payments</a></li>\n<li><a href=\"https://developer.paypal.com/braintree/docs/start/hello-server/node\">Send a client token to your client</a></li>\n<li><a href=\"https://www.paypal.com/tw/webapps/mpp/home\">Paypal</a> </li>\n<li><a href=\"ttps://developer.paypal.com/developer/accountsh/\">Paypal Sandbox</a></li>\n</ul>\n","categories":["Coding"],"tags":["javascript"]},{"title":"JavaScript Issue","url":"/2021/12/07/js-6/","content":"<h3 id=\"Braintree\"><a href=\"#Braintree\" class=\"headerlink\" title=\"Braintree\"></a>Braintree</h3><h4 id=\"TypeError-braintree-connect-is-not-a-function\"><a href=\"#TypeError-braintree-connect-is-not-a-function\" class=\"headerlink\" title=\"TypeError: braintree.connect is not a function\"></a>TypeError: braintree.connect is not a function</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 修正前 connect()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> gateway = braintree.connect(&#123;</span><br><span class=\"line\">  environment: braintree.Environment.Sandbox,</span><br><span class=\"line\">  merchantId: process.env.BRAINTREE_MERCHANT_ID,</span><br><span class=\"line\">  publicKey: process.env.BRAINTREE_PUBLIC_KEY,</span><br><span class=\"line\">  privateKey: process.env.BRAINTREE_PRIVATE_KEY,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 修正後 BraintreeGateway()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> gateway = <span class=\"keyword\">new</span> braintree.BraintreeGateway(&#123;</span><br><span class=\"line\">  environment: braintree.Environment.Sandbox,</span><br><span class=\"line\">  merchantId: process.env.BRAINTREE_MERCHANT_ID,</span><br><span class=\"line\">  publicKey: process.env.BRAINTREE_PUBLIC_KEY,</span><br><span class=\"line\">  privateKey: process.env.BRAINTREE_PRIVATE_KEY,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"A-linked-PayPal-Sandbox-account-is-required-to-use…ls-on-linking-your-PayPal-sandbox-with-Braintree\"><a href=\"#A-linked-PayPal-Sandbox-account-is-required-to-use…ls-on-linking-your-PayPal-sandbox-with-Braintree\" class=\"headerlink\" title=\"A linked PayPal Sandbox account is required to use…ls on linking your PayPal sandbox with Braintree.\"></a>A linked PayPal Sandbox account is required to use…ls on linking your PayPal sandbox with Braintree.</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// flow: &quot;vault&quot;, 設錯</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showDropIn</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div onBlur=&#123;<span class=\"function\">() =&gt;</span> setData(&#123; ...data, <span class=\"attr\">error</span>: <span class=\"string\">&quot;&quot;</span> &#125;)&#125;&gt;</span><br><span class=\"line\">      &#123;data.clientToken != <span class=\"literal\">null</span> &amp;&amp; products.length &gt; <span class=\"number\">0</span> ? (</span><br><span class=\"line\">        &lt;DropIn</span><br><span class=\"line\">          options=&#123;&#123;</span><br><span class=\"line\">            authorization: data.clientToken,</span><br><span class=\"line\">            <span class=\"comment\">// ad paypal option</span></span><br><span class=\"line\">            paypal: &#123;</span><br><span class=\"line\">              flow: <span class=\"string\">&quot;vault&quot;</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">          onInstance=&#123;<span class=\"function\">(<span class=\"params\">instance</span>) =&gt;</span> (data.instance = instance)&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        ) : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">      &lt;button onClick=&#123;handleBuy&#125; className=<span class=\"string\">&quot;btn btn-success btn-block&quot;</span>&gt;</span><br><span class=\"line\">        Pay</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-payapl-chrome-developer-tools-show-Violation\"><a href=\"#add-payapl-chrome-developer-tools-show-Violation\" class=\"headerlink\" title=\"add payapl chrome developer tools show [Violation]\"></a>add payapl chrome developer tools show [Violation]</h4><ul>\n<li>[Violation] Added synchronous DOM mutation listener to a ‘DOMNodeInserted’ event. Consider using MutationObserver to make the page more responsive.<br>  –&gt; 因 chrome versbose enabel, chrome 給的建議, don’t care,設定 versbose disable 即可</li>\n</ul>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/07/js-6/pic1.png\" class=\"\" title=\"pic1\">\n</div>","categories":["Coding"],"tags":["issue","javascript"]},{"title":"Bootstrap 4","url":"/2021/12/13/bootstrap-1/","content":"<h3 id=\"Layout\"><a href=\"#Layout\" class=\"headerlink\" title=\"Layout\"></a><a href=\"/bootstrap-1/layout\">Layout</a></h3><h4 id=\"Container\"><a href=\"#Container\" class=\"headerlink\" title=\"Container\"></a>Container</h4><table>\n<thead>\n<tr>\n<th></th>\n<th>Extra small</th>\n<th>Small</th>\n<th>Medium</th>\n<th>Large</th>\n<th>Extra l</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>&lt;576px</td>\n<td>≥576px</td>\n<td>≥768px</td>\n<td>≥992px</td>\n<td>≥1200px</td>\n</tr>\n<tr>\n<td>.container</td>\n<td>100%</td>\n<td>540px</td>\n<td>720px</td>\n<td>960px</td>\n<td>1140px</td>\n</tr>\n<tr>\n<td>.container-sm</td>\n<td>100%</td>\n<td>540px</td>\n<td>720px</td>\n<td>960px</td>\n<td>1140px</td>\n</tr>\n<tr>\n<td>.container-md</td>\n<td>100%</td>\n<td>100%</td>\n<td>720px</td>\n<td>960px</td>\n<td>1140px</td>\n</tr>\n<tr>\n<td>.container-lg</td>\n<td>100%</td>\n<td>100%</td>\n<td>100%</td>\n<td>960px</td>\n<td>1140px</td>\n</tr>\n<tr>\n<td>.container-xl</td>\n<td>100%</td>\n<td>100%</td>\n<td>100%</td>\n<td>100%</td>\n<td>1140px</td>\n</tr>\n<tr>\n<td>.container-fluid</td>\n<td>100%</td>\n<td>100%</td>\n<td>100%</td>\n<td>100%</td>\n<td>100%</td>\n</tr>\n</tbody></table>\n<span id=\"more\"></span>\n\n<h4 id=\"Grid-options\"><a href=\"#Grid-options\" class=\"headerlink\" title=\"Grid options\"></a>Grid options</h4><table>\n<thead>\n<tr>\n<th></th>\n<th>Extra small</th>\n<th>Small</th>\n<th>Medium</th>\n<th>Large</th>\n<th>Extra l</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>&lt;576px</td>\n<td>≥576px</td>\n<td>≥768px</td>\n<td>≥992px</td>\n<td>≥1200px</td>\n</tr>\n<tr>\n<td>Max container width</td>\n<td>None (auto)</td>\n<td>540px</td>\n<td>720px</td>\n<td>960px</td>\n<td>1140px</td>\n</tr>\n<tr>\n<td>Class prefix</td>\n<td>.col-</td>\n<td>.col-sm-</td>\n<td>.col-md-</td>\n<td>.col-lg-</td>\n<td>.col-xl-</td>\n</tr>\n</tbody></table>\n<p>ps : Gutter width    30px (15px on each side of a column)</p>\n<h3 id=\"Content\"><a href=\"#Content\" class=\"headerlink\" title=\"Content\"></a>Content</h3><h4 id=\"Reboot\"><a href=\"#Reboot\" class=\"headerlink\" title=\"Reboot\"></a>Reboot</h4><h5 id=\"font-family\"><a href=\"#font-family\" class=\"headerlink\" title=\"font family\"></a>font family</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$font-family-sans-serif:</span><br><span class=\"line\">  <span class=\"comment\">// Safari for macOS and iOS (San Francisco)</span></span><br><span class=\"line\">  -apple-system,</span><br><span class=\"line\">  <span class=\"comment\">// Chrome &lt; 56 for macOS (San Francisco)</span></span><br><span class=\"line\">  BlinkMacSystemFont,</span><br><span class=\"line\">  <span class=\"comment\">// Windows</span></span><br><span class=\"line\">  <span class=\"string\">&quot;Segoe UI&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// Android</span></span><br><span class=\"line\">  Roboto,</span><br><span class=\"line\">  <span class=\"comment\">// Basic web fallback</span></span><br><span class=\"line\">  <span class=\"string\">&quot;Helvetica Neue&quot;</span>, Arial,</span><br><span class=\"line\">  <span class=\"comment\">// Linux</span></span><br><span class=\"line\">  <span class=\"string\">&quot;Noto Sans&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;Liberation Sans&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// Sans serif fallback</span></span><br><span class=\"line\">  sans-serif,</span><br><span class=\"line\">  <span class=\"comment\">// Emoji fonts</span></span><br><span class=\"line\">  <span class=\"string\">&quot;Apple Color Emoji&quot;</span>, <span class=\"string\">&quot;Segoe UI Emoji&quot;</span>, <span class=\"string\">&quot;Segoe UI Symbol&quot;</span>, <span class=\"string\">&quot;Noto Color Emoji&quot;</span> !<span class=\"keyword\">default</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Typography-排版\"><a href=\"#Typography-排版\" class=\"headerlink\" title=\"Typography 排版\"></a><a href=\"/bootstrap-1/typography\">Typography</a> 排版</h4><h5 id=\"Headings\"><a href=\"#Headings\" class=\"headerlink\" title=\"Headings\"></a>Headings</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- small, .small: font-size: 80%;, font-weight: 400; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>h1. Bootstrap heading <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span>text1<span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- text-muted: color: #6c757d!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>h1. Bootstrap heading <span class=\"tag\">&lt;<span class=\"name\">small</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-muted&quot;</span>&gt;</span>text1<span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>h2. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>h3. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h4</span>&gt;</span>h4. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">h4</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h5</span>&gt;</span>h5. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h6</span>&gt;</span>h6. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">h6</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Headings-Class\"><a href=\"#Headings-Class\" class=\"headerlink\" title=\"Headings Class\"></a>Headings Class</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h1&quot;</span>&gt;</span>h1. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h2&quot;</span>&gt;</span>h2. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h3&quot;</span>&gt;</span>h3. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h4&quot;</span>&gt;</span>h4. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h5&quot;</span>&gt;</span>h5. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h6&quot;</span>&gt;</span>h6. Bootstrap heading<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Display-headings\"><a href=\"#Display-headings\" class=\"headerlink\" title=\"Display headings\"></a>Display headings</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;display-1&quot;</span>&gt;</span>Display 1<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;display-2&quot;</span>&gt;</span>Display 2<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;display-3&quot;</span>&gt;</span>Display 3<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;display-4&quot;</span>&gt;</span>Display 4<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Lead-突出文字\"><a href=\"#Lead-突出文字\" class=\"headerlink\" title=\"Lead 突出文字\"></a>Lead 突出文字</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .lead: font-size: 1.25rem;, font-weight: 300; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;lead&quot;</span>&gt;</span>Lorem ipsum dolor sit amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Inline-text-elements\"><a href=\"#Inline-text-elements\" class=\"headerlink\" title=\"Inline text elements\"></a>Inline text elements</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- mark, .mark: padding: 0.2em;, background-color: #fcf8e3; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem <span class=\"tag\">&lt;<span class=\"name\">mark</span>&gt;</span>ipsum dolor<span class=\"tag\">&lt;/<span class=\"name\">mark</span>&gt;</span> sit amet consectetur adipisicing elit. Similique, amet.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- del(browser): text-decoration: line-through; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem <span class=\"tag\">&lt;<span class=\"name\">del</span>&gt;</span>ipsum dolor sit<span class=\"tag\">&lt;/<span class=\"name\">del</span>&gt;</span> amet consectetur adipisicing elit. Quo, voluptatem!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- s(browser): text-decoration: line-through; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem <span class=\"tag\">&lt;<span class=\"name\">s</span>&gt;</span>ipsum, dolor<span class=\"tag\">&lt;/<span class=\"name\">s</span>&gt;</span> sit amet consectetur adipisicing elit. Nisi, nesciunt.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ins(browser):　text-decoration: underline; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem <span class=\"tag\">&lt;<span class=\"name\">ins</span>&gt;</span>ipsum dolor<span class=\"tag\">&lt;/<span class=\"name\">ins</span>&gt;</span> sit, amet consectetur adipisicing elit. Nisi, expedita!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ｕ(browser):　text-decoration: underline; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem <span class=\"tag\">&lt;<span class=\"name\">u</span>&gt;</span>ipsum dolor,<span class=\"tag\">&lt;/<span class=\"name\">u</span>&gt;</span> sit amet consectetur adipisicing elit. Possimus, magni.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- small, .small: font-size: 80%;, font-weight: 400; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span>ipsum dolor<span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span> sit, amet consectetur adipisicing elit. Tempora, voluptates.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- b, strong: font-weight: bolder; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem, <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>ipsum dolor<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> sit amet consectetur adipisicing elit. Velit, accusamus?<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- em(browser): font-style: italic; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem <span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>ipsum dolor<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span> sit amet consectetur adipisicing elit. Sequi, facilis?<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Id, exercitationem.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Abbreviations-縮寫\"><a href=\"#Abbreviations-縮寫\" class=\"headerlink\" title=\"Abbreviations 縮寫\"></a>Abbreviations 縮寫</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- abbr : </span></span><br><span class=\"line\"><span class=\"comment\">\ttext-decoration: underline dotted;</span></span><br><span class=\"line\"><span class=\"comment\">\tcursor: help; (?)</span></span><br><span class=\"line\"><span class=\"comment\">\tborder-bottom: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\ttext-decoration-skip-ink: none; (畫 上畫線,下畫線 不受其他條件影響)--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- title=&quot;attribute&quot;: 顯示文字 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">abbr</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;attribute&quot;</span>&gt;</span>attr<span class=\"tag\">&lt;/<span class=\"name\">abbr</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .initialism: font-size: 90%;, text-transform: uppercase; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">abbr</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;HyperText Markup Language&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;initialism&quot;</span>&gt;</span>html<span class=\"tag\">&lt;/<span class=\"name\">abbr</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Blockquotes-引用\"><a href=\"#Blockquotes-引用\" class=\"headerlink\" title=\"Blockquotes 引用\"></a>Blockquotes 引用</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum, iste!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- blockquote:\tmargin: 0 0 1rem; --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .blockquote: margin-bottom: 1rem;, font-size: 1.25rem; --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- blockquote(agent) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tdisplay: block;</span></span><br><span class=\"line\"><span class=\"comment\">\tmargin-block-start: 1em;</span></span><br><span class=\"line\"><span class=\"comment\">\tmargin-block-end: 1em;</span></span><br><span class=\"line\"><span class=\"comment\">\tmargin-inline-start: 40px;</span></span><br><span class=\"line\"><span class=\"comment\">\tmargin-inline-end: 40px;</span></span><br><span class=\"line\"><span class=\"comment\">&#125; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">blockquote</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;blockquote&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mb-0&quot;</span>&gt;</span>A well-known quote, contained in a blockquote element.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- footer: display: block; --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- .blockquote-footer: display: block; , font-size: 80%; , color: #6c757d; --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- cite(browser):font-style: italic; --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- .blockquote-footer::before (橫線) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tcontent: &quot;\\2014\\00A0&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">footer</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;blockquote-footer&quot;</span>&gt;</span>Someone famous in <span class=\"tag\">&lt;<span class=\"name\">cite</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;Source Title&quot;</span>&gt;</span>Source Title<span class=\"tag\">&lt;/<span class=\"name\">cite</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione, commodi.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- .list-unstyled: padding-left: 0; , list-style: none; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;list-unstyled&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>This is a list.<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>It appears completely unstyled.<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>Structurally, it&#x27;s still a list.<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .list-inline: padding-left: 0; , list-style: none; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;list-inline&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- .list-inline-item: display: inline-block; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;list-inline-item&quot;</span>&gt;</span>This is a list item.<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;list-inline-item&quot;</span>&gt;</span>And another one.<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;list-inline-item&quot;</span>&gt;</span>But they&#x27;re displayed inline.<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Description-list-alignment\"><a href=\"#Description-list-alignment\" class=\"headerlink\" title=\"Description list alignment\"></a>Description list alignment</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dl</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- dt: font-weight: 700; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dt</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-3&quot;</span>&gt;</span>Description lists<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- dd:\tmargin-bottom: 0.5rem; , margin-left: 0; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dd</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-9&quot;</span>&gt;</span>A description list is perfect for defining terms.<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dt</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-3&quot;</span>&gt;</span>Term<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dd</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-9&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Definition for the term.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>And some more placeholder definition text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dt</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-3&quot;</span>&gt;</span>Another term<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dd</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-9&quot;</span>&gt;</span>This definition is short, so no extra paragraphs or anything.<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dt</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-3 text-truncate&quot;</span>&gt;</span>Truncated term is truncated<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dd</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-9&quot;</span>&gt;</span>This can be useful when space is tight. Adds an ellipsis at the end.<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dt</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-3&quot;</span>&gt;</span>Nesting<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dd</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-9&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- dl, ol, ul : margin-top: 0; , margin-bottom: 1rem; --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">dl</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">dt</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-4&quot;</span>&gt;</span>Nested definition list<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">dd</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-sm-8&quot;</span>&gt;</span>I heard you like definition lists. Let me put a definition list inside your definition list.<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">dl</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Utilities\"><a href=\"#Utilities\" class=\"headerlink\" title=\"Utilities\"></a>Utilities</h3><h4 id=\"Text\"><a href=\"#Text\" class=\"headerlink\" title=\"Text\"></a><a href=\"/bootstrap-1/text\">Text</a></h4><h5 id=\"Text-alignment\"><a href=\"#Text-alignment\" class=\"headerlink\" title=\"Text alignment\"></a>Text alignment</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Some placeholder text to demonstrate justified text alignment. Will you do the same for me? It&#x27;s time to face the music I&#x27;m no longer your muse. Heard it&#x27;s beautiful, be the judge and my girls gonna take a vote. I can feel a phoenix inside of me. Heaven is jealous of our love, angels are crying from up above. Yeah, you take me to utopia.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .text-justify: text-align: justify!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-justify&quot;</span>&gt;</span>Some placeholder text to demonstrate justified text alignment. Will you do the same for me? It&#x27;s time to face the music I&#x27;m no longer your muse. Heard it&#x27;s beautiful, be the judge and my girls gonna take a vote. I can feel a phoenix inside of me. Heaven is jealous of our love, angels are crying from up above. Yeah, you take me to utopia.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .text-left : text-align: left!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-left&quot;</span>&gt;</span>Left aligned text on all viewport sizes.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-center&quot;</span>&gt;</span>Center aligned text on all viewport sizes.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-right&quot;</span>&gt;</span>Right aligned text on all viewport sizes.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Text-transform\"><a href=\"#Text-transform\" class=\"headerlink\" title=\"Text transform\"></a>Text transform</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- text-transform: lowercase!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-lowercase&quot;</span>&gt;</span>Lowercased text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-uppercase&quot;</span>&gt;</span>Uppercased text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-capitalize&quot;</span>&gt;</span>CapiTaliZed text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Font-weight-and-italics\"><a href=\"#Font-weight-and-italics\" class=\"headerlink\" title=\"Font weight and italics\"></a>Font weight and italics</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- .font-weight-bold:\tfont-weight: 700!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;font-weight-bold&quot;</span>&gt;</span>Bold text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .font-weight-bolder: font-weight: bolder!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;font-weight-bolder&quot;</span>&gt;</span>Bolder weight text (relative to the parent element).<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .font-weight-normal: font-weight: 400!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;font-weight-normal&quot;</span>&gt;</span>Normal weight text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .font-weight-light: font-weight: 300!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;font-weight-light&quot;</span>&gt;</span>Light weight text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .font-weight-lighter:\tfont-weight: lighter!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;font-weight-lighter&quot;</span>&gt;</span>Lighter weight text (relative to the parent element).<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .font-italic: font-style: italic!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;font-italic&quot;</span>&gt;</span>Italic text.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Text-wrapping-and-overflow\"><a href=\"#Text-wrapping-and-overflow\" class=\"headerlink\" title=\"Text wrapping and overflow\"></a>Text wrapping and overflow</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- .text-wrap:\twhite-space: normal!important; (空白換行) --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;badge badge-primary text-wrap&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 6rem;&quot;</span>&gt;</span></span><br><span class=\"line\">\tThis text should wrap.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .text-nowrap:\twhite-space: nowrap!important; (不換行) --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-nowrap bd-highlight&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 8rem;&quot;</span>&gt;</span></span><br><span class=\"line\">\tThis text should overflow the parent. Lorem ipsum dolor sit amet consectetur adipisicing elit. Reprehenderit deserunt necessitatibus itaque veniam! Nam, officia vero. Fugit eos natus numquam ipsa? Voluptas voluptate natus doloribus molestiae quod perspiciatis provident ipsa.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Block level --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- .text-truncate :</span></span><br><span class=\"line\"><span class=\"comment\">\t\toverflow: hidden;</span></span><br><span class=\"line\"><span class=\"comment\">\t\ttext-overflow: ellipsis; (over show ...省略符號)</span></span><br><span class=\"line\"><span class=\"comment\">\t\twhite-space: nowrap; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col-2 text-truncate&quot;</span>&gt;</span></span><br><span class=\"line\">\t\tPraeterea iter est quasdam res quas ex communi.</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Inline level --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- .d-inline-block: display: inline-block!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;d-inline-block text-truncate&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;max-width: 150px;&quot;</span>&gt;</span></span><br><span class=\"line\">\tPraeterea iter est quasdam res quas ex communi.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>\t</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Word-break-防止長字影響-layout\"><a href=\"#Word-break-防止長字影響-layout\" class=\"headerlink\" title=\"Word break : 防止長字影響 layout\"></a>Word break : 防止長字影響 layout</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- .text-break: </span></span><br><span class=\"line\"><span class=\"comment\">\tword-break: break-word!important; (word 可分開)</span></span><br><span class=\"line\"><span class=\"comment\">\tword-wrap: break-word!important; (word 可換行) --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-break&quot;</span>&gt;</span>mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Monospace-等寬\"><a href=\"#Monospace-等寬\" class=\"headerlink\" title=\"Monospace 等寬\"></a>Monospace 等寬</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- .text-monospace:</span></span><br><span class=\"line\"><span class=\"comment\">\tfont-family: SFMono-Regular,Menlo,Monaco,Consolas,&quot;Liberation Mono&quot;,&quot;Courier New&quot;,monospace!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-monospace&quot;</span>&gt;</span>This is in monospace<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Reset-color-force-color-繼承-parent-text-reset\"><a href=\"#Reset-color-force-color-繼承-parent-text-reset\" class=\"headerlink\" title=\"Reset color : force color 繼承 parent(.text-reset)\"></a>Reset color : force color 繼承 parent(.text-reset)</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-muted&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- .text-reset: color: inherit!important; --&gt;</span></span><br><span class=\"line\">\tMuted text with a <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-reset&quot;</span>&gt;</span>reset link<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Text-decoration-Remove-a-text-decoration-with-a-text-decoration-none\"><a href=\"#Text-decoration-Remove-a-text-decoration-with-a-text-decoration-none\" class=\"headerlink\" title=\"Text decoration : Remove a text decoration with a .text-decoration-none\"></a>Text decoration : Remove a text decoration with a .text-decoration-none</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- .text-decoration-none: text-decoration: none!important; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-decoration-none&quot;</span>&gt;</span>Non-underlined link<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Colors\"><a href=\"#Colors\" class=\"headerlink\" title=\"Colors\"></a><a href=\"/bootstrap-1/colors\">Colors</a></h4><h5 id=\"Color\"><a href=\"#Color\" class=\"headerlink\" title=\"Color\"></a>Color</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-primary&quot;</span>&gt;</span>.text-primary<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-secondary&quot;</span>&gt;</span>.text-secondary<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-success&quot;</span>&gt;</span>.text-success<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-danger&quot;</span>&gt;</span>.text-danger<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-warning&quot;</span>&gt;</span>.text-warning<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-info&quot;</span>&gt;</span>.text-info<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-light bg-dark&quot;</span>&gt;</span>.text-light<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-dark&quot;</span>&gt;</span>.text-dark<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-body&quot;</span>&gt;</span>.text-body<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-muted&quot;</span>&gt;</span>.text-muted<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-white bg-dark&quot;</span>&gt;</span>.text-white<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-black-50&quot;</span>&gt;</span>.text-black-50<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text-white-50 bg-dark&quot;</span>&gt;</span>.text-white-50<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Background-color\"><a href=\"#Background-color\" class=\"headerlink\" title=\"Background color\"></a>Background color</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-primary text-white&quot;</span>&gt;</span>.bg-primary<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-secondary text-white&quot;</span>&gt;</span>.bg-secondary<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-success text-white&quot;</span>&gt;</span>.bg-success<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-danger text-white&quot;</span>&gt;</span>.bg-danger<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-warning text-dark&quot;</span>&gt;</span>.bg-warning<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-info text-white&quot;</span>&gt;</span>.bg-info<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-light text-dark&quot;</span>&gt;</span>.bg-light<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-dark text-white&quot;</span>&gt;</span>.bg-dark<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-white text-dark&quot;</span>&gt;</span>.bg-white<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;p-3 mb-2 bg-transparent text-dark&quot;</span>&gt;</span>.bg-transparent<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Spacing\"><a href=\"#Spacing\" class=\"headerlink\" title=\"Spacing\"></a><a href=\"/bootstrap-1/space\">Spacing</a></h4><p>type:</p>\n<ul>\n<li>m - for classes that set margin</li>\n<li>p - for classes that set padding</li>\n</ul>\n<p>side: </p>\n<ul>\n<li>t - for classes that set margin-top or padding-top</li>\n<li>b - for classes that set margin-bottom or padding-bottom</li>\n<li>l - for classes that set margin-left or padding-left</li>\n<li>r - for classes that set margin-right or padding-right</li>\n<li>x - for classes that set both *-left and *-right</li>\n<li>y - for classes that set both *-top and *-bottom</li>\n<li>blank - for classes that set a margin or padding on all 4 sides of the element</li>\n</ul>\n<p>size:</p>\n<ul>\n<li>0 - for classes that eliminate the margin or padding by setting it to 0</li>\n<li>1 - (by default) for classes that set the margin or padding to $spacer * .25(4px)</li>\n<li>2 - (by default) for classes that set the margin or padding to $spacer * .5(8px)</li>\n<li>3 - (by default) for classes that set the margin or padding to $spacer(16px)</li>\n<li>4 - (by default) for classes that set the margin or padding to $spacer * 1.5(24px)</li>\n<li>5 - (by default) for classes that set the margin or padding to $spacer * 3(48px)</li>\n<li>auto - for classes that set the margin to auto</li>\n</ul>\n<p>Negative margin(padding not support) :</p>\n<ul>\n<li>n1 - (by default) for classes that set the margin to -$spacer * .25(4px)</li>\n<li>n2 - (by default) for classes that set the margin to -$spacer * .5(8px)</li>\n<li>n3 - (by default) for classes that set the margin to -$spacer(16px)</li>\n<li>n4 - (by default) for classes that set the margin to -$spacer * 1.5(24px)</li>\n<li>n5 - (by default) for classes that set the margin to -$spacer * 3(48px)</li>\n</ul>\n<h5 id=\"Margin\"><a href=\"#Margin\" class=\"headerlink\" title=\"Margin\"></a>Margin</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mb-0 bg-primary text-white&quot;</span>&gt;mb-<span class=\"number\">0</span> Lorem ipsum dolor sit amet consectetur&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mb-1 bg-secondary text-white&quot;</span>&gt;mb-<span class=\"number\">1</span> Lorem ipsum dolor sit amet consectetur&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mb-2 bg-success text-white&quot;</span>&gt;mb-<span class=\"number\">2</span> Lorem ipsum dolor sit amet consectetur&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mb-3 bg-danger text-white&quot;</span>&gt;mb-<span class=\"number\">3</span> Lorem ipsum dolor sit amet consectetu&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mb-4 bg-warning text-dark&quot;</span>&gt;mb-<span class=\"number\">4</span> Lorem ipsum dolor sit amet consectetu&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mb-5 bg-info text-white&quot;</span>&gt;mb-<span class=\"number\">5</span> Lorem ipsum dolor sit amet consectetu&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mx-auto text-white bg-dark&quot;</span> style=<span class=\"string\">&quot;width: 300px;&quot;</span>&gt;mx-auto(width: 300px;) Lorem ipsum dolor sit amet consectetu&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;ml-n3 bg-primary text-white&quot;</span>&gt;ml-n3 Lorem ipsum dolor sit amet consectetur&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Padding\"><a href=\"#Padding\" class=\"headerlink\" title=\"Padding\"></a>Padding</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;p-0 bg-primary text-white&quot;</span>&gt;p-<span class=\"number\">0</span> Lorem ipsum dolor sit amet consectetur&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;p-1 bg-secondary text-white&quot;</span>&gt;p-<span class=\"number\">1</span> Lorem ipsum dolor sit amet consectetur&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;p-2 bg-success text-white&quot;</span>&gt;p-<span class=\"number\">2</span> Lorem ipsum dolor sit amet consectetur&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;p-3 bg-danger text-white&quot;</span>&gt;p-<span class=\"number\">3</span> Lorem ipsum dolor sit amet consectetu&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;p-4 bg-warning text-dark&quot;</span>&gt;p-<span class=\"number\">4</span> Lorem ipsum dolor sit amet consectetu&lt;/div&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;p-5 bg-info text-white&quot;</span>&gt;p-<span class=\"number\">5</span> Lorem ipsum dolor sit amet consectetu&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Size\"><a href=\"#Size\" class=\"headerlink\" title=\"Size\"></a><a href=\"/bootstrap-1/size\">Size</a></h4><h5 id=\"Width\"><a href=\"#Width\" class=\"headerlink\" title=\"Width\"></a>Width</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;w-25 p-3&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background-color: #eee;&quot;</span>&gt;</span>Width 25%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;w-50 p-3&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background-color: #eee;&quot;</span>&gt;</span>Width 50%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;w-75 p-3&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background-color: #eee;&quot;</span>&gt;</span>Width 75%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;w-100 p-3&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background-color: #eee;&quot;</span>&gt;</span>Width 100%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;w-auto p-3&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background-color: #eee;&quot;</span>&gt;</span>Width auto<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Height\"><a href=\"#Height\" class=\"headerlink\" title=\"Height\"></a>Height</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height: 100px; background-color: rgba(255,0,0,0.1);&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h-25 d-inline-block&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 120px; background-color: rgba(0,0,255,.1)&quot;</span>&gt;</span>Height 25%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h-50 d-inline-block&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 120px; background-color: rgba(0,0,255,.1)&quot;</span>&gt;</span>Height 50%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h-75 d-inline-block&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 120px; background-color: rgba(0,0,255,.1)&quot;</span>&gt;</span>Height 75%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h-100 d-inline-block&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 120px; background-color: rgba(0,0,255,.1)&quot;</span>&gt;</span>Height 100%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;h-auto d-inline-block&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 120px; background-color: rgba(0,0,255,.1)&quot;</span>&gt;</span>Height auto<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Max-Height\"><a href=\"#Max-Height\" class=\"headerlink\" title=\"Max Height\"></a>Max Height</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height: 100px; background-color: rgba(255,0,0,0.1);&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mh-100&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 100px; height: 200px; background-color: rgba(0,0,255,0.1);&quot;</span>&gt;</span>Max-height 100%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Max-Width\"><a href=\"#Max-Width\" class=\"headerlink\" title=\"Max Width\"></a>Max Width</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height: 100px; background-color: rgba(255,0,0,0.5);&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mw-100&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 1300px; height: 70px; background-color: rgba(0,0,255,0.1);&quot;</span>&gt;</span>Max-width 100%<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Relative-to-the-viewport\"><a href=\"#Relative-to-the-viewport\" class=\"headerlink\" title=\"Relative to the viewport\"></a>Relative to the viewport</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;min-vw-100&quot;</span>&gt;</span>Min-width 100vw<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;min-vh-100&quot;</span>&gt;</span>Min-height 100vh<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;vw-100&quot;</span>&gt;</span>Width 100vw<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;vh-100&quot;</span>&gt;</span>Height 100vh<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Float\"><a href=\"#Float\" class=\"headerlink\" title=\"Float\"></a><a href=\"/bootstrap-1/float\">Float</a></h4><ul>\n<li>float-left</li>\n<li>float-right</li>\n<li>float-none</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">.clearfix::after &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tdisplay: block;</span></span><br><span class=\"line\"><span class=\"comment\">\tclear: both;</span></span><br><span class=\"line\"><span class=\"comment\">\tcontent: &quot;&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">&#125; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bg-secondary text-center p-2 clearfix&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- float-left: float: left!important; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bg-success p-2 float-left&quot;</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- float-right: float: right!important; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bg-primary p-2 float-right&quot;</span>&gt;</span>World<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Position\"><a href=\"#Position\" class=\"headerlink\" title=\"Position\"></a><a href=\"/bootstrap-1/position\">Position</a></h4><ul>\n<li>position-static</li>\n<li>position-relative</li>\n<li>position-absolute</li>\n<li>position-fixed</li>\n<li>position-sticky</li>\n<li>fixed-top</li>\n<li>fixed-bottom</li>\n<li>sticky-top</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span> &gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- .fixed-top &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tposition: fixed;</span></span><br><span class=\"line\"><span class=\"comment\">\t\ttop: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tright: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tleft: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tz-index: 1030;</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125; --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- &lt;h1 class=&quot;bg-success p-2 fixed-top&quot; &gt;Hello&lt;/h1&gt; --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">\t.fixed-bottom &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tposition: fixed;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tright: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tbottom: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tleft: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tz-index: 1030;</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bg-primary p-2 fixed-bottom&quot;</span> &gt;</span>World<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Deleniti doloribus dolorum sint animi, eligendi ut....<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">\t.sticky-top &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tposition: sticky;</span></span><br><span class=\"line\"><span class=\"comment\">\t\ttop: 0;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tz-index: 1020;</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125; --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bg-info p-2 sticky-top&quot;</span>&gt;</span>test line...<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit. ...<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Componets\"><a href=\"#Componets\" class=\"headerlink\" title=\"Componets\"></a>Componets</h3><h4 id=\"Form\"><a href=\"#Form\" class=\"headerlink\" title=\"Form\"></a>Form</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;form &gt;</span><br><span class=\"line\">  &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">    &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Name&lt;/label&gt;</span><br><span class=\"line\">    &lt;input</span><br><span class=\"line\">      onChange=&#123;handleChange&#125;</span><br><span class=\"line\">      name=<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">      type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">    /&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">  &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary&quot;</span>&gt;Create Category&lt;/button&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;Primary&lt;/button&gt;</span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-secondary&quot;</span>&gt;Secondary&lt;/button&gt;</span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-success&quot;</span>&gt;Success&lt;/button&gt;</span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-danger&quot;</span>&gt;Danger&lt;/button&gt;</span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-warning&quot;</span>&gt;Warning&lt;/button&gt;</span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-info&quot;</span>&gt;Info&lt;/button&gt;</span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-light&quot;</span>&gt;Light&lt;/button&gt;</span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-dark&quot;</span>&gt;Dark&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-link&quot;</span>&gt;Link&lt;/button&gt;</span><br></pre></td></tr></table></figure>\n\n<!--more-->\n\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://getbootstrap.com/docs/4.6/getting-started/introduction/\">Bootstrop 4</a></li>\n<li><a href=\"https://bootswatch.com/\">Bootswatch</a> : free themes for Bootstrap</li>\n<li><a href=\"https://bootsnipp.com/\">Bootsnipp for Bootstrop</a></li>\n<li><a href=\"https://www.awwwards.com/websites/bootstrap/\">Best Website Examples of Bootstrap</a></li>\n<li><a href=\"https://colorlib.com/wp/cat/bootstrap/\">200+ Best Bootstrap Templates 2021 - Colorlib</a></li>\n<li><a href=\"https://bootstraptaste.com/\">BootstrapTaste:Best Bootstrap Templates and Themes 2021</a></li>\n<li><a href=\"/ref/bootstrap-1\">Bootstrap 4 demo</a> : local demo bootstrap 4</li>\n</ul>\n","categories":["Front End"],"tags":["bootstrap"]},{"title":"Practice React Ecommerce - Back End","url":"/2021/11/05/practice-1-1/","content":"<h3 id=\"Express\"><a href=\"#Express\" class=\"headerlink\" title=\"Express\"></a>Express</h3><h4 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h4><ul>\n<li>express</li>\n<li>dotenv : env 設定</li>\n<li>nodemon : node 修改自動重啟</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># npm init</span></span><br><span class=\"line\">npm init -y</span><br><span class=\"line\"><span class=\"comment\"># install module </span></span><br><span class=\"line\">npm install express dotenv nodemon</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"simple-example\"><a href=\"#simple-example\" class=\"headerlink\" title=\"simple example\"></a>simple example</h4><h5 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\".env\"></a>.env</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">PORT=<span class=\"number\">8000</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"gitignore\"><a href=\"#gitignore\" class=\"headerlink\" title=\".gitignore\"></a>.gitignore</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">node_modules</span><br><span class=\"line\">.env</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"package-json-script\"><a href=\"#package-json-script\" class=\"headerlink\" title=\"package.json - script\"></a>package.json - script</h5><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">  &quot;start&quot;: &quot;nodemon app.js&quot;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"app-js\"><a href=\"#app-js\" class=\"headerlink\" title=\"app.js\"></a>app.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&quot;/&quot;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.send(<span class=\"string\">&quot;hello from node !!&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install mongodb</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"change-to-routes-middleware\"><a href=\"#change-to-routes-middleware\" class=\"headerlink\" title=\"change to routes middleware\"></a>change to routes middleware</h4><h5 id=\"app-js-1\"><a href=\"#app-js-1\" class=\"headerlink\" title=\"./app.js\"></a>./app.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"><span class=\"comment\">// import routes</span></span><br><span class=\"line\"><span class=\"comment\">// const userRoutes = require(&quot;./routes/user&quot;);</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> userRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// routes middleware</span></span><br><span class=\"line\">app.use(userRoutes);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"routes-user-js\"><a href=\"#routes-user-js\" class=\"headerlink\" title=\"./routes/user.js\"></a>./routes/user.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/&quot;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.send(<span class=\"string\">&quot;hello from routers&#x27;s user.js&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"connect-mongoDB-altas\"><a href=\"#connect-mongoDB-altas\" class=\"headerlink\" title=\"connect mongoDB altas\"></a>connect mongoDB altas</h4><h5 id=\"env-1\"><a href=\"#env-1\" class=\"headerlink\" title=\".env\"></a>.env</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">PORT=<span class=\"number\">8000</span></span><br><span class=\"line\">DATABASE=mongodb:<span class=\"comment\">//robert2:&#123;password&#125;@cluster0-shard-00-00.bscvu.mongodb.net:27017,cluster0-shard-00-01.bscvu.mongodb.net:27017,cluster0-shard-00-02.bscvu.mongodb.net:27017/myFirstDatabase?ssl=true&amp;replicaSet=atlas-11cyyj-shard-0&amp;authSource=admin&amp;retryWrites=true&amp;w=majority</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"app-js-2\"><a href=\"#app-js-2\" class=\"headerlink\" title=\"./app.js\"></a>./app.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// import routes</span></span><br><span class=\"line\"><span class=\"comment\">// const userRoutes = require(&quot;./routes/user&quot;);</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> userRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\">mongoose</span><br><span class=\"line\">  .connect(process.env.DATABASE, &#123;</span><br><span class=\"line\">    useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// useCreateIndex not support - 課程示範</span></span><br><span class=\"line\">    <span class=\"comment\">// useCreateIndex: true,</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;MongoDB Connected…&quot;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// routes middleware</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, userRoutes);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"分離出-controller\"><a href=\"#分離出-controller\" class=\"headerlink\" title=\"分離出 controller\"></a>分離出 controller</h4><h5 id=\"routes-user-js-1\"><a href=\"#routes-user-js-1\" class=\"headerlink\" title=\"./routes/user.js\"></a>./routes/user.js</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; .&#x2F;routes&#x2F;user.js</span><br><span class=\"line\">const express &#x3D; require(&quot;express&quot;);</span><br><span class=\"line\">const router &#x3D; express.Router();</span><br><span class=\"line\">&#x2F;&#x2F; add controller</span><br><span class=\"line\">const &#123; sayHi &#125; &#x3D; require(&quot;..&#x2F;controllers&#x2F;user&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(&quot;&#x2F;&quot;, sayHi);</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports &#x3D; router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-user-js\"><a href=\"#controller-user-js\" class=\"headerlink\" title=\"./controller/user.js\"></a>./controller/user.js</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; .&#x2F;controller&#x2F;user.js</span><br><span class=\"line\">&#x2F;&#x2F; http:&#x2F;&#x2F;localhost:8000&#x2F;api --&gt; &#123;&quot;message&quot;:&quot;hello there!&quot;&#125;</span><br><span class=\"line\">exports.sayHi &#x3D; (req, res) &#x3D;&gt; &#123;</span><br><span class=\"line\">  res.json(&#123; message: &quot;hello there!&quot; &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"user-API\"><a href=\"#user-API\" class=\"headerlink\" title=\"user API\"></a>user API</h4><h5 id=\"install-1\"><a href=\"#install-1\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install uuid</span><br><span class=\"line\"><span class=\"comment\"># body-parser 被標記為棄用, 使用 express 之 app.use(express.json());</span></span><br><span class=\"line\"><span class=\"comment\"># npm install body-parser </span></span><br><span class=\"line\">npm install morgan</span><br><span class=\"line\">npm i cookie-parser</span><br><span class=\"line\"><span class=\"comment\"># version 6 會有 error : TypeError: expressValidator is not a function</span></span><br><span class=\"line\"><span class=\"comment\"># 使用 version 5</span></span><br><span class=\"line\">npm i express-validator@5.3.1</span><br><span class=\"line\">npm i express-jwt jsonwebtoken</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"app-js-program-entry\"><a href=\"#app-js-program-entry\" class=\"headerlink\" title=\"./app.js : program entry\"></a>./app.js : program entry</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import routes</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> userRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import morgan</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> morgan = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;morgan&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\"><span class=\"comment\">// const cookieParser = require(&quot;cookie-parser&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">// express-validator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expressValidator = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express-validator&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// env</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\">mongoose</span><br><span class=\"line\">  .connect(process.env.DATABASE, &#123;</span><br><span class=\"line\">    useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;MongoDB Connected…&quot;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// middlewares</span></span><br><span class=\"line\">app.use(morgan(<span class=\"string\">&quot;dev&quot;</span>)); <span class=\"comment\">// morgan - http request log</span></span><br><span class=\"line\">app.use(express.json()); <span class=\"comment\">// body parser</span></span><br><span class=\"line\"><span class=\"comment\">// app.use(cookieParser());\t// cookie-parser</span></span><br><span class=\"line\">app.use(expressValidator()); <span class=\"comment\">// express-validator</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// routes middleware</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, userRoutes);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"routes-user-js-route\"><a href=\"#routes-user-js-route\" class=\"headerlink\" title=\"./routes/user.js : route\"></a>./routes/user.js : route</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; signup, signin, signout &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// valid</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userSignupValidator &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../validator&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 註冊加驗證測試</span></span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/signup&quot;</span>, userSignupValidator, signup);</span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/signin&quot;</span>, signin);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/signout&quot;</span>, signout);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"validator-index-js-valid-field\"><a href=\"#validator-index-js-valid-field\" class=\"headerlink\" title=\"./validator/index.js - valid field\"></a>./validator/index.js - valid field</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./validator/index.js</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.userSignupValidator = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.check(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;Name is required&quot;</span>).notEmpty();</span><br><span class=\"line\">  req</span><br><span class=\"line\">    .check(<span class=\"string\">&quot;email&quot;</span>, <span class=\"string\">&quot;Email must be between 6 to 32 characters&quot;</span>)</span><br><span class=\"line\">    .matches(<span class=\"regexp\">/.+\\@.+\\..+/</span>)</span><br><span class=\"line\">    .withMessage(<span class=\"string\">&quot;Email must contain @ and .&quot;</span>)</span><br><span class=\"line\">    .isLength(&#123;</span><br><span class=\"line\">      min: <span class=\"number\">6</span>,</span><br><span class=\"line\">      max: <span class=\"number\">32</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  req.check(<span class=\"string\">&quot;password&quot;</span>, <span class=\"string\">&quot;Password is required&quot;</span>).notEmpty();</span><br><span class=\"line\">  req</span><br><span class=\"line\">    .check(<span class=\"string\">&quot;password&quot;</span>)</span><br><span class=\"line\">    .isLength(&#123; <span class=\"attr\">min</span>: <span class=\"number\">6</span> &#125;)</span><br><span class=\"line\">    .withMessage(<span class=\"string\">&quot;password must conatin at least 6 characters&quot;</span>)</span><br><span class=\"line\">    .matches(<span class=\"regexp\">/\\d/</span>)</span><br><span class=\"line\">    .withMessage(<span class=\"string\">&quot;Password must contain a number&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> errors = req.validationErrors();</span><br><span class=\"line\">  <span class=\"comment\">// console.log(errors);</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (errors) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> firstError = errors.map(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> error.msg)[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123; <span class=\"attr\">error</span>: firstError &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-user-js-control-every-page\"><a href=\"#controller-user-js-control-every-page\" class=\"headerlink\" title=\"./controller/user.js - control every page\"></a>./controller/user.js - control every page</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// jwt</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> jwt = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;jsonwebtoken&quot;</span>); <span class=\"comment\">// to generate signed token</span></span><br><span class=\"line\"><span class=\"comment\">// const express = require(&quot;express-jwt&quot;); // for authorization check</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.signup = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;req.body&quot;</span>, req.body);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> user = <span class=\"keyword\">new</span> User(req.body);</span><br><span class=\"line\">  user.save(<span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        err: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      user,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.signin = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// find the user based on email</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; email, password &#125; = req.body;</span><br><span class=\"line\">  User.findOne(&#123; email &#125;, <span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !user) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;User with that email does not exist. Please siginup&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// if user is found make sure the email and password match</span></span><br><span class=\"line\">    <span class=\"comment\">// create authenticate method in user model</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!user.authenticate(password)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">401</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Email and password don&#x27;t match&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// generate a signed token with user id and secret</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = jwt.sign(&#123; <span class=\"attr\">id</span>: user._id &#125;, process.env.JWT_SECRET);</span><br><span class=\"line\">    <span class=\"comment\">// persist the thken as &#x27;t&#x27; in cookie with expiry date</span></span><br><span class=\"line\">    res.cookie(<span class=\"string\">&quot;t&quot;</span>, token, &#123; <span class=\"attr\">expire</span>: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() + <span class=\"number\">9999</span> &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// return response with user and token to frontend client</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; _id, name, email, role &#125; = user;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.json(&#123; token, <span class=\"attr\">user</span>: &#123; _id, email, name, role &#125; &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.signout = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.clearCookie(<span class=\"string\">&quot;t&quot;</span>);</span><br><span class=\"line\">  res.json(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&quot;Signout success&quot;</span> &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"helpers-dbErrorHandler-js-翻譯-DB-error-message\"><a href=\"#helpers-dbErrorHandler-js-翻譯-DB-error-message\" class=\"headerlink\" title=\"./helpers/dbErrorHandler.js - 翻譯 DB error message\"></a>./helpers/dbErrorHandler.js - 翻譯 DB error message</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./helpers/dbErrorHandler.js</span></span><br><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Get unique error field name</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> uniqueMessage = <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> output;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fieldName = error.message.substring(</span><br><span class=\"line\">      error.message.lastIndexOf(<span class=\"string\">&quot;.$&quot;</span>) + <span class=\"number\">2</span>,</span><br><span class=\"line\">      error.message.lastIndexOf(<span class=\"string\">&quot;_1&quot;</span>)</span><br><span class=\"line\">    );</span><br><span class=\"line\">    output =</span><br><span class=\"line\">      fieldName.charAt(<span class=\"number\">0</span>).toUpperCase() +</span><br><span class=\"line\">      fieldName.slice(<span class=\"number\">1</span>) +</span><br><span class=\"line\">      <span class=\"string\">&quot; already exists&quot;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (ex) &#123;</span><br><span class=\"line\">    output = <span class=\"string\">&quot;Unique field already exists&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> output;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Get the erroror message from error object</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.errorHandler = <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> message = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 不知為何, 原來的內容如此(object),可提出 .message and .code</span></span><br><span class=\"line\">  <span class=\"comment\">// MongoServerError: E11000 duplicate key error collection: myFirstDatabase.users index: email_1 dup key: &#123; email: &quot;tony@gmail.com&quot; &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(`\\n\\rerror.message-&gt;$&#123;error.message&#125;=`);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(`\\n\\rerror.code-&gt;$&#123;error.code&#125;=`);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (error.code) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (error.code) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">11000</span>:</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">11001</span>:</span><br><span class=\"line\">        message = uniqueMessage(error);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        message = <span class=\"string\">&quot;Something went wrong&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> errorName <span class=\"keyword\">in</span> error.errorors) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error.errorors[errorName].message)</span><br><span class=\"line\">        message = error.errorors[errorName].message;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"models-user-js-access-DB\"><a href=\"#models-user-js-access-DB\" class=\"headerlink\" title=\"./models/user.js : access DB\"></a>./models/user.js : access DB</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./models/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> crypto = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;crypto&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// fix error for uuidv1</span></span><br><span class=\"line\"><span class=\"comment\">// const uuidv1 = require(&quot;uuid/v1&quot;);</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"attr\">v1</span>: uuidv1 &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;uuid&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> userSchema = <span class=\"keyword\">new</span> mongoose.Schema(</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      trim: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"built_in\">require</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      maxlength: <span class=\"number\">32</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    email: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      trim: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"built_in\">require</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      unique: <span class=\"number\">32</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    hashed_password: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      <span class=\"built_in\">require</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    about: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      trim: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    salt: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">    role: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    history: &#123;</span><br><span class=\"line\">      tyep: <span class=\"built_in\">Array</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: [],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    timestamps: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// virtual field</span></span><br><span class=\"line\">userSchema</span><br><span class=\"line\">  .virtual(<span class=\"string\">&quot;password&quot;</span>)</span><br><span class=\"line\">  .set(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">password</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._password = password;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.salt = uuidv1();</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.hashed_password = <span class=\"built_in\">this</span>.encryptPassword(password);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .get(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._password;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">userSchema.methods = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// verify password</span></span><br><span class=\"line\">  authenticate: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">plainText</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.encryptPassword(plainText) === <span class=\"built_in\">this</span>.hashed_password;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  encryptPassword: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">password</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!password) <span class=\"keyword\">return</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> crypto</span><br><span class=\"line\">        .createHmac(<span class=\"string\">&quot;sha1&quot;</span>, <span class=\"built_in\">this</span>.salt)</span><br><span class=\"line\">        .update(password)</span><br><span class=\"line\">        .digest(<span class=\"string\">&quot;hex&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = mongoose.model(<span class=\"string\">&quot;User&quot;</span>, userSchema);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Auth-and-Admin-middlewares\"><a href=\"#Auth-and-Admin-middlewares\" class=\"headerlink\" title=\"Auth and Admin middlewares\"></a>Auth and Admin middlewares</h4><ul>\n<li>./controllers/user.js 改為 auth.js</li>\n<li>./routers/user.js 改為 auth.js</li>\n</ul>\n<h5 id=\"app-js-add-app-use-“-api”-userRoutes-for-using-Auth\"><a href=\"#app-js-add-app-use-“-api”-userRoutes-for-using-Auth\" class=\"headerlink\" title=\"./app.js : add app.use(“/api”, userRoutes) for using Auth\"></a>./app.js : add app.use(“/api”, userRoutes) for using Auth</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import routes</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> authRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/auth&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import morgan</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> morgan = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;morgan&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cookieParser = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;cookie-parser&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// express-validator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expressValidator = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express-validator&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// env</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\">mongoose</span><br><span class=\"line\">  .connect(process.env.DATABASE, &#123;</span><br><span class=\"line\">    useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;MongoDB Connected…&quot;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// middlewares</span></span><br><span class=\"line\">app.use(morgan(<span class=\"string\">&quot;dev&quot;</span>)); <span class=\"comment\">// morgan - http request log</span></span><br><span class=\"line\">app.use(express.json()); <span class=\"comment\">// body parser</span></span><br><span class=\"line\">app.use(cookieParser()); <span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\">app.use(expressValidator()); <span class=\"comment\">// express-validator</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// routes middleware</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, authRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, userRoutes);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"routes-user-js-add-new-link-secrect-userId\"><a href=\"#routes-user-js-add-new-link-secrect-userId\" class=\"headerlink\" title=\"./routes/user.js : add new link /secrect/:userId\"></a>./routes/user.js : add new link /secrect/:userId</h5><ul>\n<li>../controllers/auth <ul>\n<li>requireSignin : check token</li>\n<li>isAuth : check user auth</li>\n<li>isAdmin : check admin(role == 1)</li>\n</ul>\n</li>\n<li>router.param(“userId”, userById) : if include parameter userId call userById</li>\n<li>add ./controllers/user.js for userById</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/secrect/:userId&quot;</span>, requireSignin, isAuth, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.json(&#123;</span><br><span class=\"line\">    user: req.profile,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-auth-js-add-requireSignin-isAuth-isAdmin\"><a href=\"#controller-auth-js-add-requireSignin-isAuth-isAdmin\" class=\"headerlink\" title=\"./controller/auth.js : add requireSignin, isAuth, isAdmin\"></a>./controller/auth.js : add requireSignin, isAuth, isAdmin</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/auth.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// jwt</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> jwt = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;jsonwebtoken&quot;</span>); <span class=\"comment\">// to generate signed token</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expressJWT = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express-jwt&quot;</span>); <span class=\"comment\">// for authorization check</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.signup = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;req.body&quot;</span>, req.body);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> user = <span class=\"keyword\">new</span> User(req.body);</span><br><span class=\"line\">  user.save(<span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        err: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      user,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.signin = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// find the user based on email</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; email, password &#125; = req.body;</span><br><span class=\"line\">  User.findOne(&#123; email &#125;, <span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !user) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>)(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;User with that email does not exist. Please siginup&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// if user is found make sure the email and password match</span></span><br><span class=\"line\">    <span class=\"comment\">// create authenticate method in user model</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!user.authenticate(password)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">401</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Email and password don&#x27;t match&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// generate a signed token with user id and secret</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = jwt.sign(&#123; <span class=\"attr\">_id</span>: user._id &#125;, process.env.JWT_SECRET);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;token:&quot;</span>, token);</span><br><span class=\"line\">    <span class=\"comment\">// persist the thken as &#x27;t&#x27; in cookie with expiry date</span></span><br><span class=\"line\">    res.cookie(<span class=\"string\">&quot;t&quot;</span>, token, &#123; <span class=\"attr\">expire</span>: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() + <span class=\"number\">9999</span> &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// return response with user and token to frontend client</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; _id, name, email, role &#125; = user;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.json(&#123; token, <span class=\"attr\">user</span>: &#123; _id, email, name, role &#125; &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.signout = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.clearCookie(<span class=\"string\">&quot;t&quot;</span>);</span><br><span class=\"line\">  res.json(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&quot;Signout success&quot;</span> &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// need have cookie-parser</span></span><br><span class=\"line\"><span class=\"comment\">// for authorization check</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.requireSignin = expressJWT(&#123;</span><br><span class=\"line\">  secret: process.env.JWT_SECRET,</span><br><span class=\"line\">  algorithms: [<span class=\"string\">&quot;HS256&quot;</span>], <span class=\"comment\">// added later</span></span><br><span class=\"line\">  userProperty: <span class=\"string\">&quot;auth&quot;</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.isAuth = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> user = req.profile &amp;&amp; req.auth &amp;&amp; req.profile._id == req.auth._id;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!user) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.status(<span class=\"number\">403</span>).json(&#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Access denied&quot;</span> &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.isAdmin = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.profile.role == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.status(<span class=\"number\">403</span>).json(&#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Admin resource! Access denied&quot;</span> &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers-user-js\"><a href=\"#controllers-user-js\" class=\"headerlink\" title=\"./controllers/user.js\"></a>./controllers/user.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.userById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  User.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !user) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;User not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.profile = user;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"add-Category-and-Product\"><a href=\"#add-Category-and-Product\" class=\"headerlink\" title=\"add Category and Product\"></a>add Category and Product</h4><h5 id=\"install-2\"><a href=\"#install-2\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i formidable lodash</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"app-js-3\"><a href=\"#app-js-3\" class=\"headerlink\" title=\"./app.js\"></a>./app.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import routes</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> authRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/auth&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// add Category and Product</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> categoryRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/category&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> productRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/product&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import morgan</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> morgan = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;morgan&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cookieParser = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;cookie-parser&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// express-validator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expressValidator = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express-validator&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// env</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\">mongoose</span><br><span class=\"line\">  .connect(process.env.DATABASE, &#123;</span><br><span class=\"line\">    useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;MongoDB Connected…&quot;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// middlewares</span></span><br><span class=\"line\">app.use(morgan(<span class=\"string\">&quot;dev&quot;</span>)); <span class=\"comment\">// morgan - http request log</span></span><br><span class=\"line\">app.use(express.json()); <span class=\"comment\">// body parser</span></span><br><span class=\"line\">app.use(cookieParser()); <span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\">app.use(expressValidator()); <span class=\"comment\">// express-validator</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// routes middleware</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, authRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, userRoutes);</span><br><span class=\"line\"><span class=\"comment\">// add Category and Product</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, categoryRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, productRoutes);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"routes-category-js\"><a href=\"#routes-category-js\" class=\"headerlink\" title=\"./routes/category.js\"></a>./routes/category.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/category.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  create,</span><br><span class=\"line\">  categoryById,</span><br><span class=\"line\">  read,</span><br><span class=\"line\">  remove,</span><br><span class=\"line\">  update,</span><br><span class=\"line\">  list,</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/category&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/category/:categoryId&quot;</span>, read);</span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/category/create/:userId&quot;</span>, requireSignin, isAuth, isAdmin, create);</span><br><span class=\"line\">router.delete(</span><br><span class=\"line\">  <span class=\"string\">&quot;/category/:categoryId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  remove</span><br><span class=\"line\">);</span><br><span class=\"line\">router.put(</span><br><span class=\"line\">  <span class=\"string\">&quot;/category/:categoryId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  update</span><br><span class=\"line\">);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/categories&quot;</span>, list);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// category/create</span></span><br><span class=\"line\"><span class=\"comment\">// userId 參數驗證</span></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\">router.param(<span class=\"string\">&quot;categoryId&quot;</span>, categoryById);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"routes-product-js\"><a href=\"#routes-product-js\" class=\"headerlink\" title=\"./routes/product.js\"></a>./routes/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  create,</span><br><span class=\"line\">  productById,</span><br><span class=\"line\">  read,</span><br><span class=\"line\">  remove,</span><br><span class=\"line\">  update,</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/product/:productId&quot;</span>, read);</span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/product/create/:userId&quot;</span>, requireSignin, isAuth, isAdmin, create);</span><br><span class=\"line\">router.delete(</span><br><span class=\"line\">  <span class=\"string\">&quot;/product/:productId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  remove</span><br><span class=\"line\">);</span><br><span class=\"line\">router.put(</span><br><span class=\"line\">  <span class=\"string\">&quot;/product/:productId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  update</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// product/create</span></span><br><span class=\"line\"><span class=\"comment\">// userId 參數驗證</span></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\">router.param(<span class=\"string\">&quot;productId&quot;</span>, productById);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-category-js\"><a href=\"#controller-category-js\" class=\"headerlink\" title=\"./controller/category.js\"></a>./controller/category.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/category.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Category = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/category&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.categoryById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Category.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, category</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !category) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Category does not exist&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.category = category;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;1:&quot;</span>, req.category);</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.category);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> category = <span class=\"keyword\">new</span> Ctegory(req.body);</span><br><span class=\"line\"></span><br><span class=\"line\">  category.save(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// fix 含 data 欄位</span></span><br><span class=\"line\">    res.json( data );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.remove = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> category = req.category;</span><br><span class=\"line\">  category.remove(<span class=\"function\">(<span class=\"params\">err, deletedCategory</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">&quot;Category deleted successly&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> category = req.category;</span><br><span class=\"line\"></span><br><span class=\"line\">  category.name = req.body.name;</span><br><span class=\"line\"></span><br><span class=\"line\">  category.save(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// fix 含 data 欄位</span></span><br><span class=\"line\">    res.json( data );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.list = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Category.find().exec(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// fix 含 data 欄位</span></span><br><span class=\"line\">    res.json( data );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-product-js\"><a href=\"#controller-product-js\" class=\"headerlink\" title=\"./controller/product.js\"></a>./controller/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;formidable&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> _ = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;lodash&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Product = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; runInNewContext &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;vm&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.productById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Product.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;productById...&quot;);</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !product) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Product does not exist&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.product = product;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.product.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.product);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"keyword\">new</span> Product(fields);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.remove = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">  product.remove(<span class=\"function\">(<span class=\"params\">err, deletedProduct</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">&quot;Product deleted successly&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">    <span class=\"comment\">// fields 蓋過 product</span></span><br><span class=\"line\">    product = _.extend(product, fields);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.type;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"models-category-js\"><a href=\"#models-category-js\" class=\"headerlink\" title=\"./models/category.js\"></a>./models/category.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./models/category.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> categorySchema = <span class=\"keyword\">new</span> mongoose.Schema(</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      trim: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"built_in\">require</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      maxlength: <span class=\"number\">32</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    timestamps: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = mongoose.model(<span class=\"string\">&quot;Category&quot;</span>, categorySchema);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"models-product-js\"><a href=\"#models-product-js\" class=\"headerlink\" title=\"./models/product.js\"></a>./models/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./models/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; ObjectId &#125; = mongoose.Schema;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> productSchema = <span class=\"keyword\">new</span> mongoose.Schema(</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      trim: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      required: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      maxlength: <span class=\"number\">32</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    description: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      required: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      maxlength: <span class=\"number\">2000</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    price: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">      trim: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      required: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      maxlength: <span class=\"number\">32</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    category: &#123;</span><br><span class=\"line\">      type: ObjectId,</span><br><span class=\"line\">      ref: <span class=\"string\">&quot;Category&quot;</span>,</span><br><span class=\"line\">      <span class=\"built_in\">require</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    quantity: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    photo: &#123;</span><br><span class=\"line\">      data: Buffer,</span><br><span class=\"line\">      contentType: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    shipping: &#123;</span><br><span class=\"line\">      required: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      type: <span class=\"built_in\">Boolean</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    timestamps: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = mongoose.model(<span class=\"string\">&quot;Product&quot;</span>, productSchema);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"add-some-for-product-and-user\"><a href=\"#add-some-for-product-and-user\" class=\"headerlink\" title=\"add some for product and user\"></a>add some for product and user</h4><ul>\n<li>product list all : get all product</li>\n<li>product list related : get other product same category</li>\n<li>product list category : list product incluse category</li>\n<li>product search : search product</li>\n<li>product photo : get product photo</li>\n<li>user read : read user info</li>\n<li>user update : update user info</li>\n</ul>\n<h5 id=\"routes-user-js-2\"><a href=\"#routes-user-js-2\" class=\"headerlink\" title=\"./routes/user.js\"></a>./routes/user.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById, read, update &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/secret/:userId&quot;</span>, requireSignin, isAuth, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.json(&#123;</span><br><span class=\"line\">    user: req.profile,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/user/:userId&quot;</span>, requireSignin, isAuth, read);</span><br><span class=\"line\">router.put(<span class=\"string\">&quot;/user/:userId&quot;</span>, requireSignin, isAuth, update);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// userId 參數驗證</span></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers-user-js-1\"><a href=\"#controllers-user-js-1\" class=\"headerlink\" title=\"./controllers/user.js\"></a>./controllers/user.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.userById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  User.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !user) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;User not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.profile = user;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.profile.hashed_password = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  req.profile.salt = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.profile);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  User.findOneAndUpdate(</span><br><span class=\"line\">    &#123; <span class=\"attr\">_id</span>: req.profile._id &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">$set</span>: req.body &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">new</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">    (err, user) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;You are not authorized to perform this action&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.profile.hashed_password = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      req.profile.salt = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(user);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"routes-product-js-1\"><a href=\"#routes-product-js-1\" class=\"headerlink\" title=\"./routes/product.js\"></a>./routes/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  create,</span><br><span class=\"line\">  productById,</span><br><span class=\"line\">  read,</span><br><span class=\"line\">  remove,</span><br><span class=\"line\">  update,</span><br><span class=\"line\">  list,</span><br><span class=\"line\">  listRelated,</span><br><span class=\"line\">  listCategories,</span><br><span class=\"line\">  listBySearch,</span><br><span class=\"line\">  photo,</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/product/:productId&quot;</span>, read);</span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/product/create/:userId&quot;</span>, requireSignin, isAuth, isAdmin, create);</span><br><span class=\"line\">router.delete(</span><br><span class=\"line\">  <span class=\"string\">&quot;/product/:productId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  remove</span><br><span class=\"line\">);</span><br><span class=\"line\">router.put(</span><br><span class=\"line\">  <span class=\"string\">&quot;/product/:productId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  update</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/products&quot;</span>, list);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/products/related/:productId&quot;</span>, listRelated);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/products/categories&quot;</span>, listCategories);</span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/products/by/search&quot;</span>, listBySearch);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/product/photo/:productId&quot;</span>, photo);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// product/create</span></span><br><span class=\"line\"><span class=\"comment\">// userId 參數驗證</span></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\">router.param(<span class=\"string\">&quot;productId&quot;</span>, productById);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-product-js-1\"><a href=\"#controller-product-js-1\" class=\"headerlink\" title=\"./controller/product.js\"></a>./controller/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;formidable&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> _ = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;lodash&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Product = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.productById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Product.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !product) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Product does not exist&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.product = product;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.product.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.product);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"keyword\">new</span> Product(fields);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.remove = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">  product.remove(<span class=\"function\">(<span class=\"params\">err, deletedProduct</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">&quot;Product deleted successly&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">    <span class=\"comment\">// fields 蓋過 product</span></span><br><span class=\"line\">    product = _.extend(product, fields);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * sel/arrival</span></span><br><span class=\"line\"><span class=\"comment\"> * bye sell = /products?sortBy=sold&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * bye arrival = /products?sortBy=createdAt&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * if no parameter are sent, then all products are returned</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.list = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.query.order ? req.query.order : <span class=\"string\">&quot;asc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.query.sortBy ? req.query.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find()</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>) <span class=\"comment\">// mapt to Category</span></span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * it will find the products based on the req product category</span></span><br><span class=\"line\"><span class=\"comment\"> * other products that has the same category, will be return</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listRelated = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// $ne: not include</span></span><br><span class=\"line\">  Product.find(&#123; <span class=\"attr\">_id</span>: &#123; <span class=\"attr\">$ne</span>: req.product &#125;, <span class=\"attr\">category</span>: req.product.category &#125;)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>, <span class=\"string\">&quot;_id name&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listCategories = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// distinct : 取出不同的 category</span></span><br><span class=\"line\">  <span class=\"comment\">// &#123;&#125; : 2nd parameter doesn&#x27;t need do no send value</span></span><br><span class=\"line\">  Product.distinct(<span class=\"string\">&quot;category&quot;</span>, &#123;&#125;, <span class=\"function\">(<span class=\"params\">err, categories</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Categories not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(categories);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * list products by search</span></span><br><span class=\"line\"><span class=\"comment\"> * we will implement product search in react frontend</span></span><br><span class=\"line\"><span class=\"comment\"> * we will show categories in checkbox and price range in radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * as the user clicks on those checkbox and radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * we will make api request and show the products to users based on what he wants</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;skip&quot; : &quot;1&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;limit&quot; : &quot;2&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">// \t&quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&quot;name&quot;: &quot;Note&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// &gt;=2 and &lt;=19</span></span><br><span class=\"line\"><span class=\"comment\">//  &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// &quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   &quot;price&quot;: [&quot;2&quot;, &quot;19&quot;]</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listBySearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.body.order ? req.body.order : <span class=\"string\">&quot;desc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.body.sortBy ? req.body.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.body.limit ? <span class=\"built_in\">parseInt</span>(req.body.limit) : <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> skip = req.body.skip ? <span class=\"built_in\">parseInt</span>(req.body.skip) : <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> findArgs = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> req.body.filters) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.body.filters[key].length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key === <span class=\"string\">&quot;price&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// gte - great than price</span></span><br><span class=\"line\">        <span class=\"comment\">// lte - less than</span></span><br><span class=\"line\">        findArgs[key] = &#123;</span><br><span class=\"line\">          $gte: req.body.filters[key][<span class=\"number\">0</span>],</span><br><span class=\"line\">          $lte: req.body.filters[key][<span class=\"number\">1</span>],</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        findArgs[key] = <span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(req.body.filters[key]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find(findArgs)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .skip(skip)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(&#123;</span><br><span class=\"line\">        size: data.length,</span><br><span class=\"line\">        data,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.photo = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.product.photo.data) &#123;</span><br><span class=\"line\">    res.set(<span class=\"string\">&quot;Content-Type&quot;</span>, req.product.photo.contentType);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.send(req.product.photo.data);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CORS\"><a href=\"#CORS\" class=\"headerlink\" title=\"CORS\"></a>CORS</h4><h5 id=\"install-3\"><a href=\"#install-3\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i cors</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"js-code\"><a href=\"#js-code\" class=\"headerlink\" title=\"js code\"></a>js code</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// cors</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;cors&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(cors()); <span class=\"comment\">// cors</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Error-message\"><a href=\"#Error-message\" class=\"headerlink\" title=\"Error message\"></a>Error message</h4><h5 id=\"invalid-token-error-message\"><a href=\"#invalid-token-error-message\" class=\"headerlink\" title=\"invalid token : error message\"></a>invalid token : error message</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">UnauthorizedError: invalid token</span><br><span class=\"line\">    at D:\\work\\git-test\\li\\project\\ecommerce\\express\\node_modules\\express-jwt\\lib\\index.js:105:22</span><br><span class=\"line\">\t\t......</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h3><h4 id=\"User\"><a href=\"#User\" class=\"headerlink\" title=\"User\"></a>User</h4><ul>\n<li><p>signup : 註冊</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">POST api/signup</span><br><span class=\"line\">Headers : [&#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;]</span><br><span class=\"line\">Body :</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;pen2&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;pen2@gmail.com&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;password&quot;</span>: <span class=\"string\">&quot;rrrrrr5&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>signin : 登入</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">POST api/signin</span><br><span class=\"line\">Headers : [&#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;]</span><br><span class=\"line\">Body :</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;pen2@gmail.com&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;password&quot;</span>: <span class=\"string\">&quot;rrrrrr5&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>signout :登出</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">GET api/signout</span><br><span class=\"line\">Headers : [&#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;]</span><br></pre></td></tr></table></figure></li>\n<li><p>secrect : get user information</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">GET api/secrect/&#123;userId&#125;</span><br><span class=\"line\">Headers : </span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Caegory\"><a href=\"#Caegory\" class=\"headerlink\" title=\"Caegory\"></a>Caegory</h4><ul>\n<li><p>create : 新增</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">POST /api/category/create/&#123;userId&#125;</span><br><span class=\"line\">Headers : </span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br><span class=\"line\">Body :</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;react2&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>read : 讀取一筆</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">GET /api/category/&#123;categoryID&#125;</span><br><span class=\"line\">Headers : [&#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;]</span><br></pre></td></tr></table></figure></li>\n<li><p>update : 更新</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">PUT /api/category/&#123;categoryID&#125;/&#123;userId&#125;</span><br><span class=\"line\">Headers : </span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br><span class=\"line\">Body :</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;react2&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>delete : 刪除</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">DEL /api/category/&#123;categoryID&#125;/&#123;userId&#125;</span><br><span class=\"line\">Headers : </span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li><p>list : 讀取全部</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">GET /api/categories</span><br><span class=\"line\">Headers : [&#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;]</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Product\"><a href=\"#Product\" class=\"headerlink\" title=\"Product\"></a>Product</h4><ul>\n<li><p>create : 新增</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">POST /api/product/create/&#123;userId&#125;</span><br><span class=\"line\">Headers : </span><br><span class=\"line\">[&#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;]</span><br><span class=\"line\">Body : form-data </span><br><span class=\"line\">  name:PHP update</span><br><span class=\"line\">  description:My second book on PHP update</span><br><span class=\"line\">  price:<span class=\"number\">20</span></span><br><span class=\"line\">  category:618cccaac104434a41b7e4e7</span><br><span class=\"line\">  shipping:<span class=\"literal\">false</span></span><br><span class=\"line\">  quantity:<span class=\"number\">100</span></span><br><span class=\"line\">  photo --&gt; file select</span><br></pre></td></tr></table></figure></li>\n<li><p>read : 讀取一筆</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">GET /api/product/&#123;ProductId&#125;</span><br><span class=\"line\">Headers : [&#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;] ??</span><br></pre></td></tr></table></figure></li>\n<li><p>update : 更新</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">PUT /api/product/&#123;productID&#125;/&#123;userId&#125;</span><br><span class=\"line\">Headers : </span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;, ??</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br><span class=\"line\">Body : form-data </span><br><span class=\"line\">  name:PHP update</span><br><span class=\"line\">  description:My second book on PHP update</span><br><span class=\"line\">  price:<span class=\"number\">20</span></span><br><span class=\"line\">  category:618cccaac104434a41b7e4e7</span><br><span class=\"line\">  shipping:<span class=\"literal\">false</span></span><br><span class=\"line\">  quantity:<span class=\"number\">100</span></span><br><span class=\"line\">  photo --&gt; file select</span><br></pre></td></tr></table></figure></li>\n<li><p>delete : 刪除</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">DEL /api/product/&#123;productID&#125;/&#123;userId&#125;</span><br><span class=\"line\">Headers : </span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;, ??</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"Postman\"><a href=\"#Postman\" class=\"headerlink\" title=\"Postman\"></a>Postman</h3><h4 id=\"user-api\"><a href=\"#user-api\" class=\"headerlink\" title=\"user api\"></a>user api</h4><h5 id=\"signup\"><a href=\"#signup\" class=\"headerlink\" title=\"signup\"></a>signup</h5><ul>\n<li><p>POST <a href=\"http://localhost:8000/api/signup\">http://localhost:8000/api/signup</a></p>\n<div style=\"max-width:1000px\">\n  <img src=\"/2021/11/05/practice-1-1/pic1.png\" class=\"\" title=\"pic1\">\n</div></li>\n<li><p>header application/json</p>\n<div style=\"max-width:1000px\">\n  <img src=\"/2021/11/05/practice-1-1/pic2.png\" class=\"\" title=\"pic2\">\n</div></li>\n<li><p>body </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;key2&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;key2@gmail.com&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;password&quot;</span>: <span class=\"string\">&quot;rrrrrr5&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<div style=\"max-width:1000px\">\n  <img src=\"/2021/11/05/practice-1-1/pic3.png\" class=\"\" title=\"pic3\">\n</div></li>\n<li><p>response </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 1st time</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;user&quot;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;key2&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;key2@gmail.com&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;hashed_password&quot;</span>: <span class=\"string\">&quot;f36f604f6b3f085dea51bc1686d8ff18d915d038&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;salt&quot;</span>: <span class=\"string\">&quot;1740b470-405f-11ec-af6d-67dd2756041e&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;role&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;history&quot;</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&quot;type&quot;</span>: [],</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&quot;default&quot;</span>: []</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;6188c6e92a5c350c58aa6d98&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-08T06:42:49.790Z&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-08T06:42:49.790Z&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># 2nd times</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;err&quot;</span>: <span class=\"string\">&quot;11000 duplicate key error collection: ecmm.users index: email already exists&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"signin\"><a href=\"#signin\" class=\"headerlink\" title=\"signin\"></a>signin</h5><ul>\n<li>POST <a href=\"http://localhost:8000/api/signin\">http://localhost:8000/api/signin</a></li>\n<li>header application/json</li>\n<li>body <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;key2@gmail.com&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;password&quot;</span>: <span class=\"string\">&quot;rrrrrr5&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>response <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;token&quot;</span>: <span class=\"string\">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxODc5NTU2YWIyYWVlNzIyYjI2YzI0NSIsImlhdCI6MTYzNjI5Nzg2OX0.jXzr0AMfA7Rwc-tMcljQUc2FKbxcPMAxzqddCaDoqFk&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;user&quot;</span>: &#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;61879556ab2aee722b26c245&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;key2@gmail.com&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;key2&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;role&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"signout\"><a href=\"#signout\" class=\"headerlink\" title=\"signout\"></a>signout</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/signout\">http://localhost:8000/api/signout</a></li>\n<li>header application/json</li>\n<li>response <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;message&quot;</span>: <span class=\"string\">&quot;Signout success&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"read\"><a href=\"#read\" class=\"headerlink\" title=\"read\"></a>read</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/user/618d278d9e3c6d80ff6d0bd6\">http://localhost:8000/api/user/618d278d9e3c6d80ff6d0bd6</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;user&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618b63c5e34b77bf26b6c8a1&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;key6&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;key6@gmail.com&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;hashed_password&quot;</span>: <span class=\"string\">&quot;887f81a60171906e267b37fc777d3e282fdffc7a&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;salt&quot;</span>: <span class=\"string\">&quot;c2c66800-41ed-11ec-97a8-83adda8782ce&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;role&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;history&quot;</span>: [],</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-10T06:16:37.259Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-10T06:16:37.259Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"update\"><a href=\"#update\" class=\"headerlink\" title=\"update\"></a>update</h5><ul>\n<li>PUT <a href=\"http://localhost:8000/api/user/618d278d9e3c6d80ff6d0bd6\">http://localhost:8000/api/user/618d278d9e3c6d80ff6d0bd6</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>body <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Pen2 update&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618d278d9e3c6d80ff6d0bd6&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Pen2 new&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;pen2@gmail.com&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;hashed_password&quot;</span>: <span class=\"string\">&quot;a696711c462e5dfd4526c8914dcb6bb286f4d08b&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;salt&quot;</span>: <span class=\"string\">&quot;0b6ead70-42fb-11ec-9c79-f353ea83f35d&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;role&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;history&quot;</span>: [],</span><br><span class=\"line\">    <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T14:24:13.767Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T01:25:40.367Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"secret-get-all-user-info\"><a href=\"#secret-get-all-user-info\" class=\"headerlink\" title=\"secret : get all user info\"></a>secret : get all user info</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/secret/618b63c5e34b77bf26b6c8a1\">http://localhost:8000/api/secret/618b63c5e34b77bf26b6c8a1</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;user&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618b63c5e34b77bf26b6c8a1&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;key6&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;email&quot;</span>: <span class=\"string\">&quot;key6@gmail.com&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;hashed_password&quot;</span>: <span class=\"string\">&quot;887f81a60171906e267b37fc777d3e282fdffc7a&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;salt&quot;</span>: <span class=\"string\">&quot;c2c66800-41ed-11ec-97a8-83adda8782ce&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;role&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;history&quot;</span>: [],</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-10T06:16:37.259Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-10T06:16:37.259Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"category\"><a href=\"#category\" class=\"headerlink\" title=\"category\"></a>category</h4><h5 id=\"create\"><a href=\"#create\" class=\"headerlink\" title=\"create\"></a>create</h5><ul>\n<li>POST <a href=\"http://localhost:8000/api/category/create/618a148152decc596ebad50e\">http://localhost:8000/api/category/create/618a148152decc596ebad50e</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>body <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Python&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Python&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;6191b9327a4a9765fa7ae859&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T01:34:42.504Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T01:34:42.504Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"read-1\"><a href=\"#read-1\" class=\"headerlink\" title=\"read\"></a>read</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/category/6191b9327a4a9765fa7ae859\">http://localhost:8000/api/category/6191b9327a4a9765fa7ae859</a></li>\n<li>Headers : []</li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;6191b9327a4a9765fa7ae859&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Python&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T01:34:42.504Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T01:34:42.504Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"update-1\"><a href=\"#update-1\" class=\"headerlink\" title=\"update\"></a>update</h5><ul>\n<li>PUT <a href=\"http://localhost:8000/api/category/6191b9327a4a9765fa7ae859/618a148152decc596ebad50e\">http://localhost:8000/api/category/6191b9327a4a9765fa7ae859/618a148152decc596ebad50e</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>body <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Python update&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;6191b9327a4a9765fa7ae859&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Python update&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T01:34:42.504Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T01:44:47.140Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"delet\"><a href=\"#delet\" class=\"headerlink\" title=\"delet\"></a>delet</h5><ul>\n<li>DEL <a href=\"http://localhost:8000/api/category/6191b9327a4a9765fa7ae859/618a148152decc596ebad50e\">http://localhost:8000/api/category/6191b9327a4a9765fa7ae859/618a148152decc596ebad50e</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;message&quot;</span>: <span class=\"string\">&quot;Category deleted successly&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"list-list-all-category\"><a href=\"#list-list-all-category\" class=\"headerlink\" title=\"list : list all category\"></a>list : list all category</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/categories\">http://localhost:8000/api/categories</a></li>\n<li>Headers : []</li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618d2aeb3cc4d2fb8b0ffa6c&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;python&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T14:38:35.706Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T14:38:35.706Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f0dd7e7a15a9c59fe3c5c&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;php&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T00:59:03.787Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T00:59:03.787Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"product\"><a href=\"#product\" class=\"headerlink\" title=\"product\"></a>product</h4><h5 id=\"create-1\"><a href=\"#create-1\" class=\"headerlink\" title=\"create\"></a>create</h5><ul>\n<li>POST <a href=\"http://localhost:8000/api/product/create/618a148152decc596ebad50e\">http://localhost:8000/api/product/create/618a148152decc596ebad50e</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>body : form-data<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">name:node</span><br><span class=\"line\">price:<span class=\"number\">2</span></span><br><span class=\"line\">category:618cccaac104434a41b7e4e7</span><br><span class=\"line\">shipping:<span class=\"literal\">false</span></span><br><span class=\"line\">quantity:<span class=\"number\">100</span></span><br><span class=\"line\">description:My second book on node</span><br><span class=\"line\">photo --&gt; file select</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;python&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;category&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;6191c890b0f8b1de8b7014f8&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T02:40:16.238Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T02:40:16.238Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"update-2\"><a href=\"#update-2\" class=\"headerlink\" title=\"update\"></a>update</h5><ul>\n<li>PUT <a href=\"http://localhost:8000/api/product/6191c9a31f6127dd22f091a9/618a148152decc596ebad50e\">http://localhost:8000/api/product/6191c9a31f6127dd22f091a9/618a148152decc596ebad50e</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>body <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">name:python update</span><br><span class=\"line\">price:<span class=\"number\">2</span></span><br><span class=\"line\">category:618cccaac104434a41b7e4e7</span><br><span class=\"line\">shipping:<span class=\"literal\">false</span></span><br><span class=\"line\">quantity:<span class=\"number\">100</span></span><br><span class=\"line\">description:My second book on node</span><br><span class=\"line\"> photo --&gt; file select</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;6191c9a31f6127dd22f091a9&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;python update&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;category&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T02:44:51.335Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T02:50:09.319Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"read-2\"><a href=\"#read-2\" class=\"headerlink\" title=\"read\"></a>read</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/product/6191c9a31f6127dd22f091a9\">http://localhost:8000/api/product/6191c9a31f6127dd22f091a9</a></li>\n<li>Headers : []</li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;6191c9a31f6127dd22f091a9&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;python update&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;category&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T02:44:51.335Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-15T02:50:09.319Z&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"delet-1\"><a href=\"#delet-1\" class=\"headerlink\" title=\"delet\"></a>delet</h5><ul>\n<li>DEL <a href=\"http://localhost:8000/api/product/6191c9a31f6127dd22f091a9/618a148152decc596ebad50e\">http://localhost:8000/api/product/6191c9a31f6127dd22f091a9/618a148152decc596ebad50e</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;,</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Authorization&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;Bearer token..&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;message&quot;</span>: <span class=\"string\">&quot;Product deleted successly&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"list-all\"><a href=\"#list-all\" class=\"headerlink\" title=\"list all\"></a>list all</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/products\">http://localhost:8000/api/products</a></li>\n<li>Headers : []</li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f0dd7e7a15a9c59fe3c5c&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;PHP&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on PHP &quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f0dd7e7a15a9c59fe3c5c&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;php&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T00:59:03.787Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T00:59:03.787Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-14T07:14:08.776Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-14T07:14:08.776Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f0e74d520011c21fee5be&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:01:40.218Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:01:40.218Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f1a5f5b6c11abb3d34d35&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:52:31.721Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:52:31.721Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"list-related\"><a href=\"#list-related\" class=\"headerlink\" title=\"list related\"></a>list related</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/products/related/6191c9a31f6127dd22f091a9\">http://localhost:8000/api/products/related/6191c9a31f6127dd22f091a9</a></li>\n<li>Headers : []</li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f0e74d520011c21fee5be&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:01:40.218Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:01:40.218Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f1a5f5b6c11abb3d34d35&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:52:31.721Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:52:31.721Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f1ce44737b63742b4e61b&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T02:03:16.637Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T02:03:16.637Z&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"list-category\"><a href=\"#list-category\" class=\"headerlink\" title=\"list category\"></a>list category</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/products/categories\">http://localhost:8000/api/products/categories</a></li>\n<li>Headers : []</li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">    <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;618d2aeb3cc4d2fb8b0ffa6c&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;618f0dd7e7a15a9c59fe3c5c&quot;</span></span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"search\"><a href=\"#search\" class=\"headerlink\" title=\"search\"></a>search</h5><ul>\n<li>POST <a href=\"http://localhost:8000/api/products/by/search\">http://localhost:8000/api/products/by/search</a></li>\n<li>Headers : <figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;key&quot;</span>:<span class=\"string\">&quot;Content-Type&quot;</span>,<span class=\"string\">&quot;value&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span>,<span class=\"string\">&quot;description&quot;</span>:<span class=\"string\">&quot;&quot;</span>&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li>\n<li>body <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// seach price</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;skip&quot;</span> : <span class=\"string\">&quot;0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;limit&quot;</span> : <span class=\"string\">&quot;100&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;filters&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;price&quot;</span>: [<span class=\"string\">&quot;3&quot;</span>, <span class=\"string\">&quot;20&quot;</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// search name</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;filters&quot;</span>: &#123;</span><br><span class=\"line\">\t  <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note&quot;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;size&quot;</span>: <span class=\"number\">4</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;data&quot;</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f39c32a40b25aab100325&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;PHP update&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on PHP update&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f0dd7e7a15a9c59fe3c5c&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;php&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T00:59:03.787Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T00:59:03.787Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T04:06:27.222Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T04:16:44.822Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f1ce44737b63742b4e61b&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T02:03:16.637Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T02:03:16.637Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f1a5f5b6c11abb3d34d35&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:52:31.721Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:52:31.721Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;sold&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618f0e74d520011c21fee5be&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Note Book #2&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;My second book on node js&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;price&quot;</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;category&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;_id&quot;</span>: <span class=\"string\">&quot;618cccaac104434a41b7e4e7&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;Node&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-11T07:56:26.487Z&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"string\">&quot;quantity&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;shipping&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:01:40.218Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span>: <span class=\"string\">&quot;2021-11-13T01:01:40.218Z&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"photo\"><a href=\"#photo\" class=\"headerlink\" title=\"photo\"></a>photo</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/product/photo/61911b28600004bfee6281f5\">http://localhost:8000/api/product/photo/61911b28600004bfee6281f5</a></li>\n<li>Headers : []</li>\n</ul>\n<h4 id=\"braintree\"><a href=\"#braintree\" class=\"headerlink\" title=\"braintree\"></a>braintree</h4><h5 id=\"get-token\"><a href=\"#get-token\" class=\"headerlink\" title=\"get token\"></a>get token</h5><ul>\n<li>GET <a href=\"http://localhost:8000/api/braintree/getToken/6188c8128db0e4691c2f6727\">http://localhost:8000/api/braintree/getToken/6188c8128db0e4691c2f6727</a></li>\n<li>Headers : <figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">Content-Type:application/json</span><br><span class=\"line\">Authorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTg4YzgxMjhkYjBlNDY5MWMyZjY3MjciLCJpYXQiOjE2Mzg0NTY1MDV9.7FWaG101Y0j3WhQdTMbO2-ew9pnb-S3tObemBH5DG28</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>response<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;clientToken&quot;</span>: <span class=\"string\">&quot;eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiJleUowZVhBaU9pSktWMVFpTENKaGJHY2lPaUpGVXpJMU5pSXNJbXRwWkNJNklqSXdNVGd3TkRJMk1UWXRjMkZ1WkdKdmVDSXNJbWx6Y3lJNkltaDBkSEJ6T2k4dllYQnBMbk5oYm1SaWIzZ3VZbkpoYVc1MGNtVmxaMkYwWlhkaGVTNWpiMjBpZlEuZXlKbGVIQWlPakUyTXpnNU16UTNOVElzSW1wMGFTSTZJbU15TUdRd1l6RXlMVE15T0RndE5HSm1OaTA0T0RJMkxXUTFaVGcwTVdFM01HSTFaaUlzSW5OMVlpSTZJblJpTlhaNVpIcHlNMjFrY0dRMGVXUWlMQ0pwYzNNaU9pSm9kSFJ3Y3pvdkwyRndhUzV6WVc1a1ltOTRMbUp5WVdsdWRISmxaV2RoZEdWM1lYa3VZMjl0SWl3aWJXVnlZMmhoYm5RaU9uc2ljSFZpYkdsalgybGtJam9pZEdJMWRubGtlbkl6YldSd1pEUjVaQ0lzSW5abGNtbG1lVjlqWVhKa1gySjVYMlJsWm1GMWJIUWlPbVpoYkhObGZTd2ljbWxuYUhSeklqcGJJbTFoYm1GblpWOTJZWFZzZENKZExDSnpZMjl3WlNJNld5SkNjbUZwYm5SeVpXVTZWbUYxYkhRaVhTd2liM0IwYVc5dWN5STZleUp0WlhKamFHRnVkRjloWTJOdmRXNTBYMmxrSWpvaVpHaGxkMmQwYUhSNUluMTkuaWxYeHJBQlJEOVlhVTBlb2pRU0d3MlNObFRYSkk3Wm5pRUtOVmlmVlNFUVZ6bUVHeGY0R3E2bG9DUzJWTW9yNHlFMTh2aTc1RHpNMHUzS216czV4MnciLCJjb25maWdVcmwiOiJodHRwczovL2FwaS5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tOjQ0My9tZXJjaGFudHMvdGI1dnlkenIzbWRwZDR5ZC9jbGllbnRfYXBpL3YxL2NvbmZpZ3VyYXRpb24iLCJtZXJjaGFudEFjY291bnRJZCI6ImRoZXdndGh0eSIsImdyYXBoUUwiOnsidXJsIjoiaHR0cHM6Ly9wYXltZW50cy5zYW5kYm94LmJyYWludHJlZS1hcGkuY29tL2dyYXBocWwiLCJkYXRlIjoiMjAxOC0wNS0wOCIsImZlYXR1cmVzIjpbInRva2VuaXplX2NyZWRpdF9jYXJkcyJdfSwiY2xpZW50QXBpVXJsIjoiaHR0cHM6Ly9hcGkuc2FuZGJveC5icmFpbnRyZWVnYXRld2F5LmNvbTo0NDMvbWVyY2hhbnRzL3RiNXZ5ZHpyM21kcGQ0eWQvY2xpZW50X2FwaSIsImVudmlyb25tZW50Ijoic2FuZGJveCIsIm1lcmNoYW50SWQiOiJ0YjV2eWR6cjNtZHBkNHlkIiwiYXNzZXRzVXJsIjoiaHR0cHM6Ly9hc3NldHMuYnJhaW50cmVlZ2F0ZXdheS5jb20iLCJhdXRoVXJsIjoiaHR0cHM6Ly9hdXRoLnZlbm1vLnNhbmRib3guYnJhaW50cmVlZ2F0ZXdheS5jb20iLCJ2ZW5tbyI6Im9mZiIsImNoYWxsZW5nZXMiOlsiY3Z2Il0sInRocmVlRFNlY3VyZUVuYWJsZWQiOnRydWUsImFuYWx5dGljcyI6eyJ1cmwiOiJodHRwczovL29yaWdpbi1hbmFseXRpY3Mtc2FuZC5zYW5kYm94LmJyYWludHJlZS1hcGkuY29tL3RiNXZ5ZHpyM21kcGQ0eWQifSwicGF5cGFsRW5hYmxlZCI6dHJ1ZSwicGF5cGFsIjp7ImJpbGxpbmdBZ3JlZW1lbnRzRW5hYmxlZCI6dHJ1ZSwiZW52aXJvbm1lbnROb05ldHdvcmsiOmZhbHNlLCJ1bnZldHRlZE1lcmNoYW50IjpmYWxzZSwiYWxsb3dIdHRwIjp0cnVlLCJkaXNwbGF5TmFtZSI6IlRyeUJ5U2VsZiIsImNsaWVudElkIjoiQWRNT2dfS2JXTmxmMTJ0ejFRUHMxYS1USHFDZFVHRWR2UTVXb0V0Q2NCSVM1U3FzdnFsLTZyU2JjWFUxWEQyUmhGc0EzeC1vSkEybXZJbjgiLCJwcml2YWN5VXJsIjoiaHR0cDovL2V4YW1wbGUuY29tL3BwIiwidXNlckFncmVlbWVudFVybCI6Imh0dHA6Ly9leGFtcGxlLmNvbS90b3MiLCJiYXNlVXJsIjoiaHR0cHM6Ly9hc3NldHMuYnJhaW50cmVlZ2F0ZXdheS5jb20iLCJhc3NldHNVcmwiOiJodHRwczovL2NoZWNrb3V0LnBheXBhbC5jb20iLCJkaXJlY3RCYXNlVXJsIjpudWxsLCJlbnZpcm9ubWVudCI6Im9mZmxpbmUiLCJicmFpbnRyZWVDbGllbnRJZCI6Im1hc3RlcmNsaWVudDMiLCJtZXJjaGFudEFjY291bnRJZCI6ImRoZXdndGh0eSIsImN1cnJlbmN5SXNvQ29kZSI6IlRXRCJ9fQ==&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;success&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://www.udemy.com/course/react-node-ecommerce/\">MERN Stack React Node Ecommerce from Scratch to Deployment</a></li>\n<li><a href=\"https://github.com/kaloraat/react-node-ecommerce\">react-node-ecommerce</a></li>\n<li><a href=\"https://www.mongodb.com/atlas/database\">MongoDB Atlas</a></li>\n<li><a href=\"https://docs.mongodb.com/manual/reference/operator/query/regex/\">MongoDB document($regex)</a></li>\n<li><a href=\"https://developer.ibm.com/patterns/build-a-mern-web-app/\">Build a MERN web app</a></li>\n</ul>\n","categories":["Project"],"tags":["react"]},{"title":"Practice React Ecommerce - Front End","url":"/2021/11/16/practice-1-2/","content":"<h3 id=\"Create-app-layout\"><a href=\"#Create-app-layout\" class=\"headerlink\" title=\"Create app + layout\"></a>Create app + layout</h3><h4 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npx create-react-app ecommerce-front</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ecommerce-front</span><br><span class=\"line\">yarn start</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"clear-doesn-apos-t-need-files\"><a href=\"#clear-doesn-apos-t-need-files\" class=\"headerlink\" title=\"clear doesn&apos;t need files\"></a>clear doesn&apos;t need files</h4><h5 id=\"src-Index-js\"><a href=\"#src-Index-js\" class=\"headerlink\" title=\"./src/Index.js\"></a>./src/Index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/Index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-App-js\"><a href=\"#src-App-js\" class=\"headerlink\" title=\"./src/App.js\"></a>./src/App.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/App.js</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Hello from React<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App</span><br></pre></td></tr></table></figure>\n<h3 id=\"add-Pages-layout-env\"><a href=\"#add-Pages-layout-env\" class=\"headerlink\" title=\"add Pages + layout + env\"></a>add Pages + layout + env</h3><h4 id=\"install-1\"><a href=\"#install-1\" class=\"headerlink\" title=\"install\"></a>install</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install for router</span></span><br><span class=\"line\">npm i react-router-dom</span><br><span class=\"line\"><span class=\"comment\"># Browserslist not support, install new version</span></span><br><span class=\"line\"><span class=\"comment\"># error -&gt; Browserslist: caniuse-lite is outdated. Please run:</span></span><br><span class=\"line\"><span class=\"comment\">#         npx browserslist@latest --update-db</span></span><br><span class=\"line\">npx browserslist@latest --update-db</span><br><span class=\"line\"><span class=\"comment\"># install for env</span></span><br><span class=\"line\">npm i dotenv</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"source\"><a href=\"#source\" class=\"headerlink\" title=\"source\"></a>source</h4><h5 id=\"public-index-html-add-bootstrapt\"><a href=\"#public-index-html-add-bootstrapt\" class=\"headerlink\" title=\"./public/index.html : add bootstrapt\"></a>./public/index.html : add bootstrapt</h5><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;%PUBLIC_URL%/favicon.ico&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;theme-color&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;#000000&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;description&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;Web site created using create-react-app&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;apple-touch-icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;%PUBLIC_URL%/logo192.png&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;manifest&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;%PUBLIC_URL%/manifest.json&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">integrity</span>=<span class=\"string\">&quot;sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn&quot;</span> <span class=\"attr\">crossorigin</span>=<span class=\"string\">&quot;anonymous&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>React App<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t......</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-Index-js-1\"><a href=\"#src-Index-js-1\" class=\"headerlink\" title=\"./src/Index.js\"></a>./src/Index.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/Index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AppRoutes <span class=\"keyword\">from</span> <span class=\"string\">&quot;./AppRoutes&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">AppRoutes</span> /&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-AppRoutes-js\"><a href=\"#src-AppRoutes-js\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import Menu from &quot;./core/Menu&quot;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;Menu /&gt; */</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-user-Signup-js\"><a href=\"#src-user-Signup-js\" class=\"headerlink\" title=\"./src/user/Signup.js\"></a>./src/user/Signup.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/user/Signup.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Singup</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Singup render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout title=<span class=\"string\">&quot;Singup Page&quot;</span> description=<span class=\"string\">&quot;Singup to Node React E-commerce &quot;</span>&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;&quot;</span>&gt;&#123;API&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;div&gt;&#123;process.env.REACT_APP_API_URL&#125;&lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-user-Signin-js\"><a href=\"#src-user-Signin-js\" class=\"headerlink\" title=\"./src/user/Signin.js\"></a>./src/user/Signin.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/user/Signin.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Singin</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Singin render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout title=<span class=\"string\">&quot;Singin Page&quot;</span> description=<span class=\"string\">&quot;Singin to Node React E-commerce &quot;</span>&gt;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Home-js\"><a href=\"#src-core-Home-js\" class=\"headerlink\" title=\"./src/core/Home.js\"></a>./src/core/Home.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Home.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Home render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout title=<span class=\"string\">&quot;Home Page&quot;</span> description=<span class=\"string\">&quot;Node React E-commerce &quot;</span>&gt;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Layout-js\"><a href=\"#src-core-Layout-js\" class=\"headerlink\" title=\"./src/core/Layout.js\"></a>./src/core/Layout.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* eslint-disable react/prop-types */</span></span><br><span class=\"line\"><span class=\"comment\">// ./src/core/Layout.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Menu <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Menu&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Layout</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  title = <span class=\"string\">&quot;Title&quot;</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  description = <span class=\"string\">&quot;Destription&quot;</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  className,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Menu /&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;jumbotron&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h2&gt;&#123;title&#125;&lt;/h2&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;lead&quot;</span>&gt;&#123;description&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=&#123;className&#125;&gt;&#123;children&#125;&lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Menu-js\"><a href=\"#src-core-Menu-js\" class=\"headerlink\" title=\"./src/core/Menu.js\"></a>./src/core/Menu.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Menu.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add history, doesn&#x27;t install</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createBrowserHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;history&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isActive = <span class=\"function\">(<span class=\"params\">history, path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (history.location.pathname === path) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ff9900&quot;</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Menu = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// add history</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = createBrowserHistory(props);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;nav nav-tabs bg-primary&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> style=&#123;isActive(history, <span class=\"string\">&quot;/&quot;</span>)&#125; to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            Home</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link</span><br><span class=\"line\">            className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">            style=&#123;isActive(history, <span class=\"string\">&quot;/signup&quot;</span>)&#125;</span><br><span class=\"line\">            to=<span class=\"string\">&quot;/signup&quot;</span></span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            Signup</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link</span><br><span class=\"line\">            className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">            style=&#123;isActive(history, <span class=\"string\">&quot;/signin&quot;</span>)&#125;</span><br><span class=\"line\">            to=<span class=\"string\">&quot;/signin&quot;</span></span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            Signin</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Menu;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"set-env\"><a href=\"#set-env\" class=\"headerlink\" title=\"set env\"></a>set env</h4><h5 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\"./.env\"></a>./.env</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">REACT_APP_API_URL=http://localhost:8000/api</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-config-js\"><a href=\"#src-config-js\" class=\"headerlink\" title=\"./src/config.js\"></a>./src/config.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/config.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> API = process.env.REACT_APP_API_URL;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-Singup-Singin-and-Singout\"><a href=\"#add-Singup-Singin-and-Singout\" class=\"headerlink\" title=\"add Singup, Singin and Singout\"></a>add Singup, Singin and Singout</h3><h4 id=\"src-core-Menu-js-1\"><a href=\"#src-core-Menu-js-1\" class=\"headerlink\" title=\"./src/core/Menu.js\"></a>./src/core/Menu.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Menu.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Fragment &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useNavigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add history, doesn&#x27;t install</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createBrowserHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;history&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; signout, isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isActive = <span class=\"function\">(<span class=\"params\">history, path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (history.location.pathname === path) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ff9900&quot;</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Menu = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// add history</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = createBrowserHistory(props);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> navigate = useNavigate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSignout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 指執行 callback function next</span></span><br><span class=\"line\">    signout(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      navigate(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Manu render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;nav nav-tabs bg-primary&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> style=&#123;isActive(history, <span class=\"string\">&quot;/&quot;</span>)&#125; to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            Home</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;!isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;Fragment&gt;</span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signup&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signup&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signup</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signin&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signin&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signin</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/Fragment&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* 因直接執行而不是切到另一頁,使用 span 即可 */</span>&#125;</span><br><span class=\"line\">            &lt;span</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;&#123; <span class=\"attr\">cursor</span>: <span class=\"string\">&quot;pointer&quot;</span>, <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;&#125;</span><br><span class=\"line\">              onClick=&#123;handleSignout&#125;</span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Signout</span><br><span class=\"line\">            &lt;/span&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Menu;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-auth-index-js\"><a href=\"#src-auth-index-js\" class=\"headerlink\" title=\"./src/auth/index.js\"></a>./src/auth/index.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/auth/index.js</span></span><br><span class=\"line\"><span class=\"comment\">// import &#123; getNodeText &#125; from &quot;@testing-library/react&quot;;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> signup = <span class=\"function\">(<span class=\"params\">user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/signup`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(user),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      <span class=\"comment\">// then 處理, 若有 check data 要加 retuen</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;data:&quot;, data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> signin = <span class=\"function\">(<span class=\"params\">user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/signin`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(user),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      <span class=\"comment\">// then 處理, 若有 check data 要加 retuen</span></span><br><span class=\"line\">      <span class=\"comment\">// .then((data) =&gt; &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//   console.log(&quot;data:&quot;, data);</span></span><br><span class=\"line\">      <span class=\"comment\">//   return data;</span></span><br><span class=\"line\">      <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> authenticate = <span class=\"function\">(<span class=\"params\">data, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;jwt&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(data));</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> signout = <span class=\"function\">(<span class=\"params\">next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">localStorage</span>.removeItem(<span class=\"string\">&quot;jwt&quot;</span>);</span><br><span class=\"line\">    next();</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/signout`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      <span class=\"comment\">// .then((response) =&gt; &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//   console.log(&quot;signout&quot;, response);</span></span><br><span class=\"line\">      <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> isAuthenticated = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> === <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;jwt&quot;</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;jwt&quot;</span>));</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// [DOM] Input elements should have autocomplete attributes (suggested: &quot;current-password&quot;): (More info: https://goo.gl/9p2vKq)</span></span><br><span class=\"line\"><span class=\"comment\">/* &lt;input type=&quot;password&quot; name=&quot;password&quot; autocomplete=&quot;on&quot;&gt;&lt;/input&gt; */</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-user-Signin-js-1\"><a href=\"#src-user-Signin-js-1\" class=\"headerlink\" title=\"./src/user/Signin.js\"></a>./src/user/Signin.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/user/Signin.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// v6 change Redirect to Navigate</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Navigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; signin, authenticate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Singin</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(&#123;</span><br><span class=\"line\">    email: <span class=\"string\">&quot;key6@gmail.com&quot;</span>,</span><br><span class=\"line\">    password: <span class=\"string\">&quot;rrrrrr5&quot;</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    redirectToReferrer: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; email, password, error, loading, redirectToReferrer &#125; = values;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      [e.target.name]: e.target.value,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      loading: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// catch 傳回用 .then 處理</span></span><br><span class=\"line\">    signin(&#123; email, password &#125;).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// undefidata === undefined 表 server 未回應</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;Server not response&quot;);</span></span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Server not response&quot;</span>,</span><br><span class=\"line\">          loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">          loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;data:&quot;, data);</span></span><br><span class=\"line\">        authenticate(data, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          setValues(&#123;</span><br><span class=\"line\">            ...values,</span><br><span class=\"line\">            error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">            redirectToReferrer: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> signInForm = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;form&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Email&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;email&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Password&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;password&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;handleSubmit&#125; className=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span><br><span class=\"line\">        Submit</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: error ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;error&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showLoading = <span class=\"function\">() =&gt;</span></span><br><span class=\"line\">    loading &amp;&amp; (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;alert alert-info&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h2&gt;Loading...&lt;/h2&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> redirectUser = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (redirectToReferrer) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Singup Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Singup to Node React E-commerce&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container col-md-6 col-md-3&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;showError()&#125;</span><br><span class=\"line\">      &#123;showLoading()&#125;</span><br><span class=\"line\">      &#123;signInForm()&#125;</span><br><span class=\"line\">      &#123;redirectUser()&#125;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-user-Signup-js-1\"><a href=\"#src-user-Signup-js-1\" class=\"headerlink\" title=\"./src/user/Signup.js\"></a>./src/user/Signup.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  ./src/user/Signup.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; signup &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Singup</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(&#123;</span><br><span class=\"line\">    name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    email: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    password: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; name, email, password, error, success &#125; = values;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      [e.target.name]: e.target.value,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    <span class=\"comment\">// catch 傳回用 .then 處理</span></span><br><span class=\"line\">    signup(&#123; name, email, password &#125;).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// undefidata === undefined 表 server 未回應</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;Server not response&quot;);</span></span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Server not response&quot;</span>,</span><br><span class=\"line\">          success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">          success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          email: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          password: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> signUpForm = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;form&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Name&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;name&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Email&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;email&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Password&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;password&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;handleSubmit&#125; className=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span><br><span class=\"line\">        Submit</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: error ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;error&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showSuccess = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-info&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: success ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      New acount is coreated. Please &lt;Link to=<span class=\"string\">&quot;/signin&quot;</span>&gt;Sigin&lt;/Link&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Singup Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Singup to Node React E-commerce&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container col-md-6 col-md-3&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;showError()&#125;</span><br><span class=\"line\">      &#123;showSuccess()&#125;</span><br><span class=\"line\">      &#123;signUpForm()&#125;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-Admin-user-Dashboard\"><a href=\"#add-Admin-user-Dashboard\" class=\"headerlink\" title=\"add Admin/user Dashboard\"></a>add Admin/user Dashboard</h3><h4 id=\"src-AppRoutes-js-1\"><a href=\"#src-AppRoutes-js-1\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-Menu-js-2\"><a href=\"#src-core-Menu-js-2\" class=\"headerlink\" title=\"./src/core/Menu.js\"></a>./src/core/Menu.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Menu.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Fragment &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useNavigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add history, doesn&#x27;t install</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createBrowserHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;history&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; signout, isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isActive = <span class=\"function\">(<span class=\"params\">history, path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (history.location.pathname === path) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ff9900&quot;</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Menu = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// add history</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = createBrowserHistory(props);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> navigate = useNavigate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSignout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 指執行 callback function next</span></span><br><span class=\"line\">    signout(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      navigate(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Manu render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;nav nav-tabs bg-primary&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> style=&#123;isActive(history, <span class=\"string\">&quot;/&quot;</span>)&#125; to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            Home</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; isAuthenticated().user.role === <span class=\"number\">0</span> &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;isActive(history, <span class=\"string\">&quot;/user/dashboard&quot;</span>)&#125;</span><br><span class=\"line\">              to=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Dashboard</span><br><span class=\"line\">            &lt;/Link&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; isAuthenticated().user.role === <span class=\"number\">1</span> &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;isActive(history, <span class=\"string\">&quot;/admin/dashboard&quot;</span>)&#125;</span><br><span class=\"line\">              to=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Dashboard</span><br><span class=\"line\">            &lt;/Link&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;!isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;Fragment&gt;</span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signup&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signup&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signup</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signin&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signin&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signin</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/Fragment&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* 因直接執行而不是切到另一頁,使用 span 即可 */</span>&#125;</span><br><span class=\"line\">            &lt;span</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;&#123; <span class=\"attr\">cursor</span>: <span class=\"string\">&quot;pointer&quot;</span>, <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;&#125;</span><br><span class=\"line\">              onClick=&#123;handleSignout&#125;</span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Signout</span><br><span class=\"line\">            &lt;/span&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Menu;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-user-Signin-js-2\"><a href=\"#src-user-Signin-js-2\" class=\"headerlink\" title=\"./src/user/Signin.js\"></a>./src/user/Signin.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/user/Signin.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// v6 change Redirect to Navigate</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Navigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; signin, authenticate, isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Singin</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(&#123;</span><br><span class=\"line\">    email: <span class=\"string\">&quot;key6@gmail.com&quot;</span>,</span><br><span class=\"line\">    password: <span class=\"string\">&quot;rrrrrr5&quot;</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    redirectToReferrer: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; email, password, error, loading, redirectToReferrer &#125; = values;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      [e.target.name]: e.target.value,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      loading: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// catch 傳回用 .then 處理</span></span><br><span class=\"line\">    signin(&#123; email, password &#125;).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// undefidata === undefined 表 server 未回應</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;Server not response&quot;);</span></span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Server not response&quot;</span>,</span><br><span class=\"line\">          loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">          loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;data:&quot;, data);</span></span><br><span class=\"line\">        authenticate(data, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          setValues(&#123;</span><br><span class=\"line\">            ...values,</span><br><span class=\"line\">            error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">            redirectToReferrer: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> signInForm = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;form&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Email&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;email&#125;</span><br><span class=\"line\">          autoComplete=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Password&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;password&#125;</span><br><span class=\"line\">          autoComplete=<span class=\"string\">&quot;new-password&quot;</span></span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;handleSubmit&#125; className=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span><br><span class=\"line\">        Submit</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: error ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;error&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showLoading = <span class=\"function\">() =&gt;</span></span><br><span class=\"line\">    loading &amp;&amp; (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;alert alert-info&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h2&gt;Loading...&lt;/h2&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> redirectUser = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (redirectToReferrer) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (user &amp;&amp; user.role === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/admin/dashboard&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/user/dashboard&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// loggin already, redirect to /</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isAuthenticated()) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Singup Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Singup to Node React E-commerce&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container col-md-6 col-md-3&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;showError()&#125;</span><br><span class=\"line\">      &#123;showLoading()&#125;</span><br><span class=\"line\">      &#123;signInForm()&#125;</span><br><span class=\"line\">      &#123;redirectUser()&#125;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-auth-AdminAuth-js\"><a href=\"#src-auth-AdminAuth-js\" class=\"headerlink\" title=\"./src/auth/AdminAuth.js\"></a>./src/auth/AdminAuth.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/auth/AdminAuth.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Navigate, useLocation &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./index&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// check children: JSX.Element</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AdimnRequireAuth</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;: &#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children: JSX.Element,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isAuthenticated() || isAuthenticated().user.role !== <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;not isAuthenticated&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// Redirect them to the /login page, but save the current location they were</span></span><br><span class=\"line\">    <span class=\"comment\">// trying to go to when they were redirected. This allows us to send them</span></span><br><span class=\"line\">    <span class=\"comment\">// along to that page after they login, which is a nicer user experience</span></span><br><span class=\"line\">    <span class=\"comment\">// than dropping them off on the home page.</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/signin&quot;</span> <span class=\"attr\">state</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">from:</span> <span class=\"attr\">location</span> &#125;&#125; /&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> children;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-auth-UserAuth-js\"><a href=\"#src-auth-UserAuth-js\" class=\"headerlink\" title=\"./src/auth/UserAuth.js\"></a>./src/auth/UserAuth.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/auth/UserAuth.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Navigate, useLocation &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./index&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// check children: JSX.Element</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UserRequireAuth</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;: &#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children: JSX.Element,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isAuthenticated()) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Redirect them to the /login page, but save the current location they were</span></span><br><span class=\"line\">    <span class=\"comment\">// trying to go to when they were redirected. This allows us to send them</span></span><br><span class=\"line\">    <span class=\"comment\">// along to that page after they login, which is a nicer user experience</span></span><br><span class=\"line\">    <span class=\"comment\">// than dropping them off on the home page.</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/signin&quot;</span> <span class=\"attr\">state</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">from:</span> <span class=\"attr\">location</span> &#125;&#125; /&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> children;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-AdminDashboard-js\"><a href=\"#src-core-AdminDashboard-js\" class=\"headerlink\" title=\"./src/core/AdminDashboard.js\"></a>./src/core/AdminDashboard.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/AdminDashboard.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AdmintDashboard</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    user: &#123; name, email, role &#125;,</span><br><span class=\"line\">  &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> adminLinks = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;Admin Links&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/create/category&quot;</span>&gt;</span><br><span class=\"line\">            Create Category</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/create/product&quot;</span>&gt;</span><br><span class=\"line\">            Create Product</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> adminInfo = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;<span class=\"string\">`G&#x27;Day <span class=\"subst\">$&#123;name&#125;</span>!`</span>&#125;&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;name&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;email&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &#123;role === <span class=\"number\">1</span> ? <span class=\"string\">&quot;Admin&quot;</span> : <span class=\"string\">&quot;Registrred User&quot;</span>&#125;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Dashboard Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;User Dashboard&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;&#123;adminLinks()&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-9&quot;</span>&gt;&#123;adminInfo()&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-UserDashboard-js\"><a href=\"#src-core-UserDashboard-js\" class=\"headerlink\" title=\"./src/core/UserDashboard.js\"></a>./src/core/UserDashboard.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/UserDashboard.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UsertDashboard</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    user: &#123; name, email, role &#125;,</span><br><span class=\"line\">  &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userLinks = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;User Links&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/cart&quot;</span>&gt;</span><br><span class=\"line\">            My Cart</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/profile/update&quot;</span>&gt;</span><br><span class=\"line\">            Update Profile</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userInfo = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;<span class=\"string\">`G&#x27;Day <span class=\"subst\">$&#123;name&#125;</span>!`</span>&#125;&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;name&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;email&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &#123;role === <span class=\"number\">1</span> ? <span class=\"string\">&quot;Admin&quot;</span> : <span class=\"string\">&quot;Registrred User&quot;</span>&#125;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> purchaseHistory = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;histtory&lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Dashboard Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;User Dashboard&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* &lt;div className=&quot;card md-5&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;h3 className=&quot;card-header&quot;&gt;User Information&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;ul className=&quot;list-group&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">          &lt;li className=&quot;list-group-item&quot;&gt;&#123;name&#125;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">          &lt;li className=&quot;list-group-item&quot;&gt;&#123;email&#125;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">          &lt;li className=&quot;list-group-item&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">            &#123;role === 1 ? &quot;Admin&quot; : &quot;Registrred User&quot;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">          &lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;/ul&gt;</span></span><br><span class=\"line\"><span class=\"comment\">      &lt;/div&gt; */</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;<span class=\"comment\">/* &lt;div className=&quot;card md-5&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;h3 className=&quot;card-header&quot;&gt;Purchase history&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;ul className=&quot;list-group&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">          &lt;li className=&quot;list-group-item&quot;&gt;histtory&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;/ul&gt;</span></span><br><span class=\"line\"><span class=\"comment\">      &lt;/div&gt; */</span>&#125;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;&#123;userLinks()&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-9&quot;</span>&gt;</span><br><span class=\"line\">          &#123;userInfo()&#125;</span><br><span class=\"line\">          &#123;purchaseHistory()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-category-product-show-products\"><a href=\"#add-category-product-show-products\" class=\"headerlink\" title=\"add category/product + show products\"></a>add category/product + show products</h3><h4 id=\"src-AppRoutes-js-2\"><a href=\"#src-AppRoutes-js-2\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddCategory <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddCategory&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddProduct&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/category&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddCategory /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/product&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-styles-css\"><a href=\"#src-styles-css\" class=\"headerlink\" title=\"./src/styles.css\"></a>./src/styles.css</h4><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ./src/styles.css */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">* board radis </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.btn</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.jumbotron</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.nav</span> <span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* product image on card </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.product-img</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">min-height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">* jumbotron animation</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.jumbotron</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">30</span>wh;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">30vh</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"built_in\">linear-gradient</span>(-<span class=\"number\">45deg</span>, <span class=\"number\">#ee7752</span>, <span class=\"number\">#e73c7e</span>, <span class=\"number\">#23a6d5</span>, <span class=\"number\">#23d5ab</span>);</span><br><span class=\"line\">  <span class=\"attribute\">background-size</span>: <span class=\"number\">400%</span> <span class=\"number\">400%</span>;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">animation</span>: Gradient <span class=\"number\">15s</span> ease infinite;</span><br><span class=\"line\">  -moz-<span class=\"attribute\">animation</span>: Gradient <span class=\"number\">15s</span> ease infinite;</span><br><span class=\"line\">  <span class=\"attribute\">animation</span>: Gradient <span class=\"number\">15s</span> ease infinite;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@-webkit-keyframes</span> Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">0%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">100%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">0%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@-moz-keyframes</span> Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">0%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">100%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">0%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@keyframes</span> Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">0%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">100%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100%</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: <span class=\"number\">0%</span> <span class=\"number\">50%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-Layout-js-1\"><a href=\"#src-core-Layout-js-1\" class=\"headerlink\" title=\"./src/core/Layout.js\"></a>./src/core/Layout.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Layout.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable react/prop-types */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Menu <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Menu&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;../styles.css&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Layout</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  title = <span class=\"string\">&quot;Title&quot;</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  description = <span class=\"string\">&quot;Destription&quot;</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  className,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  children,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Layout render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Menu /&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;jumbotron&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h2&gt;&#123;title&#125;&lt;/h2&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;lead&quot;</span>&gt;&#123;description&#125;&lt;/p&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=&#123;className&#125;&gt;&#123;children&#125;&lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-Home-js-1\"><a href=\"#src-core-Home-js-1\" class=\"headerlink\" title=\"./src/core/Home.js\"></a>./src/core/Home.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Home.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getProducts &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [productsBySell, setProductsBySell] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [productsByArrival, setProductsByArrival] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> loadProductsBySell = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getProducts(<span class=\"string\">&quot;sold&quot;</span>).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProductsBySell(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> loadProductsByArrival = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getProducts(<span class=\"string\">&quot;createdAt&quot;</span>).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProductsByArrival(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loadProductsBySell();</span><br><span class=\"line\">    loadProductsByArrival();</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Home Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Node React E-commerce&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Best Selles&lt;/h2&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;productsBySell.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;Card key=&#123;i&#125; product=&#123;product&#125; /&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;New Arrival&lt;/h2&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;productsByArrival.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;Card key=&#123;i&#125; product=&#123;product&#125; /&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-admin-ApiCore-js\"><a href=\"#src-admin-ApiCore-js\" class=\"headerlink\" title=\"./src/admin/ApiCore.js\"></a>./src/admin/ApiCore.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiCore.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProducts = <span class=\"function\">(<span class=\"params\">sortBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products?sortBy=<span class=\"subst\">$&#123;sortBy&#125;</span>&amp;order=desc&amp;limit=6`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-Card-js\"><a href=\"#src-core-Card-js\" class=\"headerlink\" title=\"./src/core/Card.js\"></a>./src/core/Card.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Card.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable react/prop-types */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ShowImage <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ShowImage&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Card</span>(<span class=\"params\">&#123; product &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;col-4 mb-3&quot;</span>&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;product.name&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span><br><span class=\"line\">          &lt;ShowImage item=&#123;product&#125; url=<span class=\"string\">&quot;product&quot;</span> /&gt;</span><br><span class=\"line\">          &lt;p&gt;&#123;product.description&#125;&lt;/p&gt;</span><br><span class=\"line\">          &lt;p&gt;$&#123;product.price&#125;&lt;/p&gt;</span><br><span class=\"line\">          &lt;Link to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary mt-2 mb-2 mr-2&quot;</span>&gt;</span><br><span class=\"line\">              View Product</span><br><span class=\"line\">            &lt;/button&gt;</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">          &lt;button className=<span class=\"string\">&quot;btn btn-outline-warning mt-2 mb-2&quot;</span>&gt;</span><br><span class=\"line\">            Add to card</span><br><span class=\"line\">          &lt;/button&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-ShowImage-js\"><a href=\"#src-core-ShowImage-js\" class=\"headerlink\" title=\"./src/core/ShowImage.js\"></a>./src/core/ShowImage.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/ShowImage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ShowImage</span>(<span class=\"params\">&#123; item, url &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;product-img&quot;</span>&gt;</span><br><span class=\"line\">      &lt;img</span><br><span class=\"line\">        src=&#123;<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/<span class=\"subst\">$&#123;url&#125;</span>/photo/<span class=\"subst\">$&#123;item._id&#125;</span>`</span>&#125;</span><br><span class=\"line\">        alt=&#123;item.name&#125;</span><br><span class=\"line\">        <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;mb-3&quot;</span></span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">maxHeight</span>: <span class=\"string\">&quot;100%&quot;</span>, <span class=\"attr\">maxWidth</span>: <span class=\"string\">&quot;100%&quot;</span> &#125;&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-admin-ApiAdmin-js\"><a href=\"#src-admin-ApiAdmin-js\" class=\"headerlink\" title=\"./src/admin/ApiAdmin.js\"></a>./src/admin/ApiAdmin.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiAdmin.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createCategory = <span class=\"function\">(<span class=\"params\">userId, token, category</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/category/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(category),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createProduct = <span class=\"function\">(<span class=\"params\">userId, token, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: product,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-admin-addCategory-js\"><a href=\"#src-admin-addCategory-js\" class=\"headerlink\" title=\"./src/admin/addCategory.js\"></a>./src/admin/addCategory.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  ./src/admin/addCategory.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createCategory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ApiAdmin&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AddCategory</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(&#123;</span><br><span class=\"line\">    name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// destructure user and token from localStorage</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, token &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; name, error, success &#125; = values;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      [e.target.name]: e.target.value,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// make request to api to create category</span></span><br><span class=\"line\">    createCategory(user._id, token, &#123; name &#125;).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> newCategoryForm = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;form onSubmit=&#123;handleSubmit&#125;&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Name&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;name&#125;</span><br><span class=\"line\">          autoFocus</span><br><span class=\"line\">          required</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary&quot;</span>&gt;Create Category&lt;/button&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showSuccess = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (success) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-success&quot;</span>&gt;</span>&#123;name&#125; is created<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-danger&quot;</span>&gt;</span>Category should be unique<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> goBack = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;mt-5&quot;</span>&gt;</span><br><span class=\"line\">      &lt;Link to=<span class=\"string\">&quot;/admin/dashboard&quot;</span> className=<span class=\"string\">&quot;text-warning&quot;</span>&gt;</span><br><span class=\"line\">        Back to DashBoard</span><br><span class=\"line\">      &lt;/Link&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Add a new category&quot;</span></span><br><span class=\"line\">      description=&#123;<span class=\"string\">`G&#x27;day <span class=\"subst\">$&#123;user.name&#125;</span>, ready to add a category?`</span>&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-md-8 offset-md-2&quot;</span>&gt;</span><br><span class=\"line\">          &#123;showSuccess()&#125;</span><br><span class=\"line\">          &#123;showError()&#125;</span><br><span class=\"line\">          &#123;newCategoryForm()&#125;</span><br><span class=\"line\">          &#123;goBack()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-admin-AddProduct-js\"><a href=\"#src-admin-AddProduct-js\" class=\"headerlink\" title=\"./src/admin/AddProduct.js\"></a>./src/admin/AddProduct.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  ./src/admin/AddProduct.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createProduct, getCategories &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ApiAdmin&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AddProduct</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(&#123;</span><br><span class=\"line\">    name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    description: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    categories: [],</span><br><span class=\"line\">    shipping: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    quantity: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    photo: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    createdProduct: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    redirectToProfile: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    formData: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// destructure user and token from localStorage</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, token &#125; = isAuthenticated();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    description,</span><br><span class=\"line\">    price,</span><br><span class=\"line\">    categories,</span><br><span class=\"line\">    <span class=\"comment\">// shipping,</span></span><br><span class=\"line\">    quantity,</span><br><span class=\"line\">    <span class=\"comment\">// photo,</span></span><br><span class=\"line\">    loading,</span><br><span class=\"line\">    error,</span><br><span class=\"line\">    createdProduct,</span><br><span class=\"line\">    <span class=\"comment\">// redirectToProfile,</span></span><br><span class=\"line\">    formData,</span><br><span class=\"line\">  &#125; = values;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// load categories and set from data.error</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> init = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getCategories().then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;****data:&quot;, data);</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// FormData 可建立表單資料中的欄位/值建立相對應的的鍵/值對（key/value）集合</span></span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          <span class=\"comment\">// 移除 含 data 欄位</span></span><br><span class=\"line\">          categories: data,</span><br><span class=\"line\">          formData: <span class=\"keyword\">new</span> FormData(),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    init();</span><br><span class=\"line\">    <span class=\"comment\">// FormData 可建立表單資料中的欄位/值建立相對應的的鍵/值對（key/value）集合</span></span><br><span class=\"line\">    <span class=\"comment\">// setValues(&#123; ...values, formData: new FormData() &#125;);</span></span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> name = e.target.name;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = name === <span class=\"string\">&quot;photo&quot;</span> ? e.target.files[<span class=\"number\">0</span>] : e.target.value;</span><br><span class=\"line\">    <span class=\"comment\">// set formData&#x27;s velue</span></span><br><span class=\"line\">    formData.set(name, value);</span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      [e.target.name]: value,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      loading: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    createProduct(user._id, token, formData).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          description: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          price: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          quantity: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          photo: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          createdProduct: data.name,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// // 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> newProductForm = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;form onSubmit=&#123;handleSubmit&#125; className=<span class=\"string\">&quot;mb-3&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h4&gt;Post Photo&lt;/h4&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;btn btn-secondary&quot;</span>&gt;</span><br><span class=\"line\">          &lt;input</span><br><span class=\"line\">            id=<span class=\"string\">&quot;photo_uploades&quot;</span></span><br><span class=\"line\">            onChange=&#123;handleChange&#125;</span><br><span class=\"line\">            name=<span class=\"string\">&quot;photo&quot;</span></span><br><span class=\"line\">            type=<span class=\"string\">&quot;file&quot;</span></span><br><span class=\"line\">            accepr=<span class=\"string\">&quot;image/*&quot;</span></span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/label&gt;</span><br><span class=\"line\">        &lt;br /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Name&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;name&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Description&lt;/label&gt;</span><br><span class=\"line\">        &lt;textarea</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;description&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;description&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Price&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;price&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;price&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Category&lt;/label&gt;</span><br><span class=\"line\">        &lt;select</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;category&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          &#123;<span class=\"comment\">/* &lt;option value=&quot;618cccaac104434a41b7e4e7&quot;&gt;Node&lt;/option&gt;</span></span><br><span class=\"line\"><span class=\"comment\">          &lt;option value=&quot;618d2aeb3cc4d2fb8b0ffa6c&quot;&gt;python&lt;/option&gt; */</span>&#125;</span><br><span class=\"line\">          &lt;option&gt;Please select&lt;/option&gt;</span><br><span class=\"line\">          &#123;categories &amp;&amp;</span><br><span class=\"line\">            categories.map(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> (</span><br><span class=\"line\">              &lt;option key=&#123;i&#125; value=&#123;c._id&#125;&gt;</span><br><span class=\"line\">                &#123;c.name&#125;</span><br><span class=\"line\">              &lt;/option&gt;</span><br><span class=\"line\">            ))&#125;</span><br><span class=\"line\">        &lt;/select&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Shipping&lt;/label&gt;</span><br><span class=\"line\">        &lt;select</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;shipping&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          &lt;option&gt;Please select&lt;/option&gt;</span><br><span class=\"line\">          &lt;option value=<span class=\"string\">&quot;0&quot;</span>&gt;No&lt;/option&gt;</span><br><span class=\"line\">          &lt;option value=<span class=\"string\">&quot;1&quot;</span>&gt;Yes&lt;/option&gt;</span><br><span class=\"line\">        &lt;/select&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Quantity&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;quantity&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;number&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;quantity&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary&quot;</span>&gt;Create Product&lt;/button&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: error ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;error&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showSuccess = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-info&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: createdProduct ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;h2&gt;&#123;<span class=\"string\">`<span class=\"subst\">$&#123;createdProduct&#125;</span>`</span>&#125; is created&lt;/h2&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showLoading = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loading &amp;&amp; (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;alert alert-success&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h2&gt;Loading...&lt;/h2&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Add a new product&quot;</span></span><br><span class=\"line\">      description=&#123;<span class=\"string\">`G&#x27;day <span class=\"subst\">$&#123;user.name&#125;</span>, ready to add a product?`</span>&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-md-8 offset-md-2&quot;</span>&gt;</span><br><span class=\"line\">          &#123;showLoading()&#125;</span><br><span class=\"line\">          &#123;showSuccess()&#125;</span><br><span class=\"line\">          &#123;showError()&#125;</span><br><span class=\"line\">          &#123;newProductForm()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"add-Shop-page-Category-Price-filter\"><a href=\"#add-Shop-page-Category-Price-filter\" class=\"headerlink\" title=\"add Shop page + Category, Price filter\"></a>add Shop page + Category, Price filter</h3><h4 id=\"src-AppRoutes-js-3\"><a href=\"#src-AppRoutes-js-3\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddCategory <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddCategory&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddProduct&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Shop <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Shop&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/shop&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Shop</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/category&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddCategory /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/product&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-core-Menu-js-3\"><a href=\"#src-core-Menu-js-3\" class=\"headerlink\" title=\"./src/core/Menu.js\"></a>./src/core/Menu.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Menu.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Fragment &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useNavigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add history, doesn&#x27;t install</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createBrowserHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;history&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; signout, isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isActive = <span class=\"function\">(<span class=\"params\">history, path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (history.location.pathname === path) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ff9900&quot;</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Menu = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// add history</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = createBrowserHistory(props);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> navigate = useNavigate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSignout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 指執行 callback function next</span></span><br><span class=\"line\">    signout(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      navigate(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Manu render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;nav nav-tabs bg-primary&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> style=&#123;isActive(history, <span class=\"string\">&quot;/&quot;</span>)&#125; to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            Home</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link</span><br><span class=\"line\">            className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">            style=&#123;isActive(history, <span class=\"string\">&quot;/shop&quot;</span>)&#125;</span><br><span class=\"line\">            to=<span class=\"string\">&quot;/shop&quot;</span></span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            Shop</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; isAuthenticated().user.role === <span class=\"number\">0</span> &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;isActive(history, <span class=\"string\">&quot;/user/dashboard&quot;</span>)&#125;</span><br><span class=\"line\">              to=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Dashboard</span><br><span class=\"line\">            &lt;/Link&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; isAuthenticated().user.role === <span class=\"number\">1</span> &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;isActive(history, <span class=\"string\">&quot;/admin/dashboard&quot;</span>)&#125;</span><br><span class=\"line\">              to=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Dashboard</span><br><span class=\"line\">            &lt;/Link&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;!isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;Fragment&gt;</span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signup&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signup&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signup</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signin&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signin&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signin</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/Fragment&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* 因直接執行而不是切到另一頁,使用 span 即可 */</span>&#125;</span><br><span class=\"line\">            &lt;span</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;&#123; <span class=\"attr\">cursor</span>: <span class=\"string\">&quot;pointer&quot;</span>, <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;&#125;</span><br><span class=\"line\">              onClick=&#123;handleSignout&#125;</span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Signout</span><br><span class=\"line\">            &lt;/span&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Menu;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-core-Shop-js\"><a href=\"#src-core-Shop-js\" class=\"headerlink\" title=\"./src/core/Shop.js\"></a>./src/core/Shop.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Shop.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getCategories, getFilteredProducts &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Checkbox <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Checkbox&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Radiobox <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Radiobox&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; prices &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./fixPrices&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Shop</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [categories, setCategories] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [myFilters, setMyFilters] = useState(&#123;</span><br><span class=\"line\">    filters: &#123;</span><br><span class=\"line\">      category: [],</span><br><span class=\"line\">      price: [],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"comment\">// eslint-disable-next-line no-unused-vars</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [limit, setLimit] = useState(<span class=\"number\">6</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [skip, setSkip] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [size, setSize] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [filteredResult, setFilteredResult] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> init = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getCategories().then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// FormData 可建立表單資料中的欄位/值建立相對應的的鍵/值對（key/value）集合</span></span><br><span class=\"line\">        setCategories(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loaderFilterResults</span>(<span class=\"params\">newFilters</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(newFilters);</span></span><br><span class=\"line\">    getFilteredProducts(skip, limit, newFilters).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">        setFilteredResult([]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setFilteredResult(data.data);</span><br><span class=\"line\">        setSize(data.size);</span><br><span class=\"line\">        setSkip(<span class=\"number\">0</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadMore</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> toSkip = skip + limit;</span><br><span class=\"line\">    getFilteredProducts(toSkip, limit, myFilters.filters).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">        setFilteredResult([]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setFilteredResult([...filteredResult, ...data.data]);</span><br><span class=\"line\">        setSize(data.size);</span><br><span class=\"line\">        setSkip(toSkip);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadMoreButton</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      size &gt; <span class=\"number\">0</span> &amp;&amp;</span><br><span class=\"line\">      size &gt;= limit &amp;&amp; (</span><br><span class=\"line\">        &lt;button onClick=&#123;loadMore&#125; className=<span class=\"string\">&quot;btn btn-warning mb-5&quot;</span>&gt;</span><br><span class=\"line\">          Load more</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    init();</span><br><span class=\"line\">    loaderFilterResults(myFilters.filters);</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleFilters = <span class=\"function\">(<span class=\"params\">filters, filterBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;Shop&quot;, filters, filterBy);</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> newFilters = &#123; ...myFilters &#125;;</span><br><span class=\"line\">    newFilters.filters[filterBy] = filters;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filterBy === <span class=\"string\">&quot;price&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> priceValue = handlePrice(filters);</span><br><span class=\"line\">      newFilters.filters[filterBy] = priceValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    loaderFilterResults(myFilters.filters);</span><br><span class=\"line\">    setMyFilters(newFilters);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handlePrice</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> data = prices;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> array = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> data) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data[key]._id === <span class=\"built_in\">parseInt</span>(value)) &#123;</span><br><span class=\"line\">        array = data[key].array;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-danger&quot;</span>&gt;</span>Category should be unique<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(filteredResult);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Shop Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Search and find books of your choice&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-4&quot;</span>&gt;</span><br><span class=\"line\">          &lt;h4&gt;Fillter by categories&lt;/h4&gt;</span><br><span class=\"line\">          &lt;ul&gt;</span><br><span class=\"line\">            &lt;Checkbox</span><br><span class=\"line\">              categories=&#123;categories&#125;</span><br><span class=\"line\">              handleFilters=&#123;<span class=\"function\">(<span class=\"params\">filters</span>) =&gt;</span> handleFilters(filters, <span class=\"string\">&quot;category&quot;</span>)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/ul&gt;</span><br><span class=\"line\">          &lt;h4&gt;Fillter by price range&lt;/h4&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            &lt;Radiobox</span><br><span class=\"line\">              prices=&#123;prices&#125;</span><br><span class=\"line\">              handleFilters=&#123;<span class=\"function\">(<span class=\"params\">filters</span>) =&gt;</span> handleFilters(filters, <span class=\"string\">&quot;price&quot;</span>)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-8&quot;</span>&gt;</span><br><span class=\"line\">          &#123;showError()&#125;</span><br><span class=\"line\">          &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Products&lt;/h2&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">            &#123;filteredResult.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">              &lt;Card key=&#123;i&#125; product=&#123;product&#125;&gt;&lt;/Card&gt;</span><br><span class=\"line\">            ))&#125;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;hr /&gt;</span><br><span class=\"line\">          &#123;loadMoreButton()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-core-Checkbox-js\"><a href=\"#src-core-Checkbox-js\" class=\"headerlink\" title=\"./src/core/Checkbox.js\"></a>./src/core/Checkbox.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Checkbox.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable array-callback-return */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Checkbox</span>(<span class=\"params\">&#123; categories, handleFilters &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [checked, setChecked] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; event include parameter</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleToggle = <span class=\"function\">(<span class=\"params\">c</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return the first index or -1</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> currentCategoryId = checked.indexOf(c);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> newCheckedCategoryId = [...checked];</span><br><span class=\"line\">    <span class=\"comment\">// if current checked was not already in checked state &gt; push</span></span><br><span class=\"line\">    <span class=\"comment\">// else pull/take off</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (currentCategoryId === -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      newCheckedCategoryId.push(c);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      newCheckedCategoryId.splice(currentCategoryId, <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(newCheckedCategoryId);</span></span><br><span class=\"line\">    setChecked(newCheckedCategoryId);</span><br><span class=\"line\">    handleFilters(newCheckedCategoryId);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> categories.map(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> (</span><br><span class=\"line\">    &lt;li key=&#123;i&#125; className=<span class=\"string\">&quot;list-unstyled&quot;</span>&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* value=false --&gt;not select  */</span>&#125;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* ***---&gt;&gt;&gt; event include parameter */</span>&#125;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        onChange=&#123;handleToggle(c._id)&#125;</span><br><span class=\"line\">        value=&#123;checked.indexOf(c._id) === -<span class=\"number\">1</span>&#125;</span><br><span class=\"line\">        type=<span class=\"string\">&quot;checkbox&quot;</span></span><br><span class=\"line\">        className=<span class=\"string\">&quot;form-check-input&quot;</span></span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">      &lt;label htmlFor=<span class=\"string\">&quot;form-check-label&quot;</span>&gt;&#123;c.name&#125;&lt;/label&gt;</span><br><span class=\"line\">    &lt;/li&gt;</span><br><span class=\"line\">  ));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-core-Radiobox-js\"><a href=\"#src-core-Radiobox-js\" class=\"headerlink\" title=\"./src/core/Radiobox.js\"></a>./src/core/Radiobox.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Radiobox.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable array-callback-return */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Radiobox</span>(<span class=\"params\">&#123; prices, handleFilters &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// const [value, setValue] = useState([]);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(e.target.value);</span></span><br><span class=\"line\">    handleFilters(e.target.value);</span><br><span class=\"line\">    <span class=\"comment\">// setValue(e.target.value);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> prices.map(<span class=\"function\">(<span class=\"params\">p, i</span>) =&gt;</span> (</span><br><span class=\"line\">    &lt;div key=&#123;i&#125; className=<span class=\"string\">&quot;list-unstyled&quot;</span>&gt;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        name=<span class=\"string\">&quot;price&quot;</span></span><br><span class=\"line\">        onChange=&#123;handleChange&#125;</span><br><span class=\"line\">        value=&#123;p._id&#125;</span><br><span class=\"line\">        type=<span class=\"string\">&quot;radio&quot;</span></span><br><span class=\"line\">        className=<span class=\"string\">&quot;mr-2 ml-4&quot;</span></span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">      &lt;label htmlFor=<span class=\"string\">&quot;form-check-label&quot;</span>&gt;&#123;p.name&#125;&lt;/label&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  ));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-core-fixPrices-js\"><a href=\"#src-core-fixPrices-js\" class=\"headerlink\" title=\"./src/core/fixPrices.js\"></a>./src/core/fixPrices.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/fixPrices.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> prices = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    _id: <span class=\"number\">0</span>,</span><br><span class=\"line\">    name: <span class=\"string\">&quot;Any&quot;</span>,</span><br><span class=\"line\">    array: [],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    _id: <span class=\"number\">1</span>,</span><br><span class=\"line\">    name: <span class=\"string\">&quot;$0 to $9&quot;</span>,</span><br><span class=\"line\">    array: [<span class=\"number\">0</span>, <span class=\"number\">9</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    _id: <span class=\"number\">2</span>,</span><br><span class=\"line\">    name: <span class=\"string\">&quot;$10 to $19&quot;</span>,</span><br><span class=\"line\">    array: [<span class=\"number\">10</span>, <span class=\"number\">19</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    _id: <span class=\"number\">3</span>,</span><br><span class=\"line\">    name: <span class=\"string\">&quot;$20 to $29&quot;</span>,</span><br><span class=\"line\">    array: [<span class=\"number\">20</span>, <span class=\"number\">29</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    _id: <span class=\"number\">4</span>,</span><br><span class=\"line\">    name: <span class=\"string\">&quot;$30 to $39&quot;</span>,</span><br><span class=\"line\">    array: [<span class=\"number\">30</span>, <span class=\"number\">39</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    _id: <span class=\"number\">5</span>,</span><br><span class=\"line\">    name: <span class=\"string\">&quot;More then $40&quot;</span>,</span><br><span class=\"line\">    array: [<span class=\"number\">40</span>, <span class=\"number\">99</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-admin-ApiCore-js-1\"><a href=\"#src-admin-ApiCore-js-1\" class=\"headerlink\" title=\"./src/admin/ApiCore.js\"></a>./src/admin/ApiCore.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiCore.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProducts = <span class=\"function\">(<span class=\"params\">sortBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products?sortBy=<span class=\"subst\">$&#123;sortBy&#125;</span>&amp;order=desc&amp;limit=6`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getFilteredProducts = <span class=\"function\">(<span class=\"params\">skip, limit, filters</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = &#123; limit, skip, filters &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/by/search`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"src-core-Card-js-1\"><a href=\"#src-core-Card-js-1\" class=\"headerlink\" title=\"./src/core/Card.js\"></a>./src/core/Card.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Card.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable react/prop-types */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ShowImage <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ShowImage&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Card</span>(<span class=\"params\">&#123; product &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(product);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;col-4 mb-3&quot;</span>&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;product.name&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span><br><span class=\"line\">          &lt;ShowImage item=&#123;product&#125; url=<span class=\"string\">&quot;product&quot;</span> /&gt;</span><br><span class=\"line\">          &lt;p&gt;&#123;<span class=\"string\">`&lt;&lt;<span class=\"subst\">$&#123;product.category.name&#125;</span>&gt;&gt;`</span>&#125;&lt;/p&gt;</span><br><span class=\"line\">          &lt;p&gt;&#123;product.description.substring(<span class=\"number\">0</span>, <span class=\"number\">10</span>)&#125;&lt;/p&gt;</span><br><span class=\"line\">          &lt;p&gt;$&#123;product.price&#125;&lt;/p&gt;</span><br><span class=\"line\">          &lt;Link to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary mt-2 mb-2 mr-2&quot;</span>&gt;</span><br><span class=\"line\">              View Product</span><br><span class=\"line\">            &lt;/button&gt;</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">          &lt;button className=<span class=\"string\">&quot;btn btn-outline-warning mt-2 mb-2&quot;</span>&gt;</span><br><span class=\"line\">            Add to card</span><br><span class=\"line\">          &lt;/button&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-Products-search\"><a href=\"#add-Products-search\" class=\"headerlink\" title=\"add Products search\"></a>add Products search</h3><h4 id=\"install-2\"><a href=\"#install-2\" class=\"headerlink\" title=\"install\"></a>install</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i query-string</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Front-End\"><a href=\"#Front-End\" class=\"headerlink\" title=\"Front End\"></a>Front End</h4><h5 id=\"src-core-Home-js-2\"><a href=\"#src-core-Home-js-2\" class=\"headerlink\" title=\"./src/core/Home.js\"></a>./src/core/Home.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Home.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getProducts &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Search <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Search&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [productsBySell, setProductsBySell] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [productsByArrival, setProductsByArrival] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> loadProductsBySell = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getProducts(<span class=\"string\">&quot;sold&quot;</span>).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProductsBySell(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> loadProductsByArrival = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getProducts(<span class=\"string\">&quot;createdAt&quot;</span>).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProductsByArrival(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loadProductsBySell();</span><br><span class=\"line\">    loadProductsByArrival();</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-danger&quot;</span>&gt;</span>&#123;error&#125;<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Home Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Node React E-commerce&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;Search /&gt;</span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Best Selles&lt;/h2&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;productsBySell.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;Card key=&#123;i&#125; product=&#123;product&#125; /&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;showError()&#125;</span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;New Arrival&lt;/h2&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;productsByArrival.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;Card key=&#123;i&#125; product=&#123;product&#125; /&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Search-js\"><a href=\"#src-core-Search-js\" class=\"headerlink\" title=\"./src/core/Search.js\"></a>./src/core/Search.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Search.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getCategories, list &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Search</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = useState(&#123;</span><br><span class=\"line\">    categories: [],</span><br><span class=\"line\">    category: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    search: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    results: [],</span><br><span class=\"line\">    searched: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; categories, category, search, results, searched &#125; = data;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> loadCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getCategories().then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (response.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(response.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setData(&#123; ...data, <span class=\"attr\">categories</span>: response &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loadCategories();</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">searchData</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(search, category);</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (search) &#123;</span><br><span class=\"line\">      list(&#123; <span class=\"attr\">search</span>: search || <span class=\"literal\">undefined</span>, <span class=\"attr\">category</span>: category &#125;).then(</span><br><span class=\"line\">        (response) =&gt; &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (response.error) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(response.error);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            setData(&#123; ...data, <span class=\"attr\">results</span>: response, <span class=\"attr\">searched</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSearch</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    searchData();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleChange = <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// setData(&#123; ...data, [name]: e.target.value, searched: false &#125;);</span></span><br><span class=\"line\">    setData(&#123; ...data, [name]: e.target.value &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">searchMessage</span>(<span class=\"params\">searched, results</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (searched &amp;&amp; results.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`Found <span class=\"subst\">$&#123;results.length&#125;</span> products`</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (searched &amp;&amp; results.length &lt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`No products found`</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">searchProducts</span>(<span class=\"params\">results</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;h2 className=<span class=\"string\">&quot;mt-4 mb-4&quot;</span>&gt;&#123;searchMessage(searched, results)&#125;&lt;/h2&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">          &#123;results.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">            &lt;Card key=&#123;i&#125; product=&#123;product&#125; /&gt;</span><br><span class=\"line\">          ))&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">searchForm</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;form onSubmit=&#123;handleSearch&#125;&gt;</span><br><span class=\"line\">        &lt;span className=<span class=\"string\">&quot;input-group-text&quot;</span>&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;input-group input-group-lg&quot;</span>&gt;</span><br><span class=\"line\">            &lt;div className=<span class=\"string\">&quot;input-group-prepend&quot;</span>&gt;</span><br><span class=\"line\">              &lt;select className=<span class=\"string\">&quot;btn mr-2&quot;</span> onChange=&#123;handleChange(<span class=\"string\">&quot;category&quot;</span>)&#125;&gt;</span><br><span class=\"line\">                &lt;option value=<span class=\"string\">&quot;All&quot;</span>&gt;All&lt;/option&gt;</span><br><span class=\"line\">                &#123;categories.map(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> (</span><br><span class=\"line\">                  &lt;option key=&#123;i&#125; value=&#123;c._id&#125;&gt;</span><br><span class=\"line\">                    &#123;c.name&#125;</span><br><span class=\"line\">                  &lt;/option&gt;</span><br><span class=\"line\">                ))&#125;</span><br><span class=\"line\">              &lt;/select&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              type=<span class=\"string\">&quot;search&quot;</span></span><br><span class=\"line\">              className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">              onChange=&#123;handleChange(<span class=\"string\">&quot;search&quot;</span>)&#125;</span><br><span class=\"line\">              placeholder=<span class=\"string\">&quot;Search by name&quot;</span></span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;btn inpu-group-append&quot;</span> style=&#123;&#123; <span class=\"attr\">border</span>: <span class=\"string\">&quot;none&quot;</span> &#125;&#125;&gt;</span><br><span class=\"line\">            &lt;button className=<span class=\"string\">&quot;input-group-text&quot;</span>&gt;Search&lt;/button&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/span&gt;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;container mb-3&quot;</span>&gt;&#123;searchForm()&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;container-fluid mb-3&quot;</span>&gt;&#123;searchProducts(results)&#125;&lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-ApiCore-js-2\"><a href=\"#src-admin-ApiCore-js-2\" class=\"headerlink\" title=\"./src/admin/ApiCore.js\"></a>./src/admin/ApiCore.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiCore.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> queryString <span class=\"keyword\">from</span> <span class=\"string\">&quot;query-string&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProducts = <span class=\"function\">(<span class=\"params\">sortBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products?sortBy=<span class=\"subst\">$&#123;sortBy&#125;</span>&amp;order=desc&amp;limit=6`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getFilteredProducts = <span class=\"function\">(<span class=\"params\">skip, limit, filters</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = &#123; limit, skip, filters &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/by/search`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> list = <span class=\"function\">(<span class=\"params\">params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = queryString.stringify(params);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/search?<span class=\"subst\">$&#123;query&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Bakc-End\"><a href=\"#Bakc-End\" class=\"headerlink\" title=\"Bakc End\"></a>Bakc End</h4><h5 id=\"routes-product-js\"><a href=\"#routes-product-js\" class=\"headerlink\" title=\"./routes/product.js\"></a>./routes/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  create,</span><br><span class=\"line\">  productById,</span><br><span class=\"line\">  read,</span><br><span class=\"line\">  remove,</span><br><span class=\"line\">  update,</span><br><span class=\"line\">  list,</span><br><span class=\"line\">  listSearch,</span><br><span class=\"line\">  listRelated,</span><br><span class=\"line\">  listCategories,</span><br><span class=\"line\">  listBySearch,</span><br><span class=\"line\">  photo,</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/product/:productId&quot;</span>, read);</span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/product/create/:userId&quot;</span>, requireSignin, isAuth, isAdmin, create);</span><br><span class=\"line\">router.delete(</span><br><span class=\"line\">  <span class=\"string\">&quot;/product/:productId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  remove</span><br><span class=\"line\">);</span><br><span class=\"line\">router.put(</span><br><span class=\"line\">  <span class=\"string\">&quot;/product/:productId/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  update</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/products&quot;</span>, list);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/products/search&quot;</span>, listSearch);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/products/related/:productId&quot;</span>, listRelated);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/products/categories&quot;</span>, listCategories);</span><br><span class=\"line\">router.post(<span class=\"string\">&quot;/products/by/search&quot;</span>, listBySearch);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/product/photo/:productId&quot;</span>, photo);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// product/create</span></span><br><span class=\"line\"><span class=\"comment\">// userId 參數驗證</span></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\">router.param(<span class=\"string\">&quot;productId&quot;</span>, productById);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-product-js\"><a href=\"#controller-product-js\" class=\"headerlink\" title=\"./controller/product.js\"></a>./controller/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;formidable&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> _ = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;lodash&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Product = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.productById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Product.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !product) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Product does not exist&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.product = product;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.product.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.product);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"keyword\">new</span> Product(fields);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;product:&quot;, result);</span></span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.remove = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">  product.remove(<span class=\"function\">(<span class=\"params\">err, deletedProduct</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">&quot;Product deleted successly&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">    <span class=\"comment\">// fields 蓋過 product</span></span><br><span class=\"line\">    product = _.extend(product, fields);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * sel/arrival</span></span><br><span class=\"line\"><span class=\"comment\"> * bye sell = /products?sortBy=sold&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * bye arrival = /products?sortBy=createdAt&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * if no parameter are sent, then all products are returned</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.list = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.query.order ? req.query.order : <span class=\"string\">&quot;asc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.query.sortBy ? req.query.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find()</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>) <span class=\"comment\">// mapt to Category</span></span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;product-list:&quot;, products);</span></span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * it will find the products based on the req product category</span></span><br><span class=\"line\"><span class=\"comment\"> * other products that has the same category, will be return</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listRelated = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// $ne: not include</span></span><br><span class=\"line\">  Product.find(&#123; <span class=\"attr\">_id</span>: &#123; <span class=\"attr\">$ne</span>: req.product &#125;, <span class=\"attr\">category</span>: req.product.category &#125;)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>, <span class=\"string\">&quot;_id name&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listCategories = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// distinct : 取出不同的 category</span></span><br><span class=\"line\">  <span class=\"comment\">// &#123;&#125; : 2nd parameter doesn&#x27;t need do no send value</span></span><br><span class=\"line\">  Product.distinct(<span class=\"string\">&quot;category&quot;</span>, &#123;&#125;, <span class=\"function\">(<span class=\"params\">err, categories</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Categories not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(categories);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * list products by search</span></span><br><span class=\"line\"><span class=\"comment\"> * we will implement product search in react frontend</span></span><br><span class=\"line\"><span class=\"comment\"> * we will show categories in checkbox and price range in radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * as the user clicks on those checkbox and radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * we will make api request and show the products to users based on what he wants</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;skip&quot; : &quot;1&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;limit&quot; : &quot;2&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">// \t&quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&quot;name&quot;: &quot;Note&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// &gt;=2 and &lt;=19</span></span><br><span class=\"line\"><span class=\"comment\">//  &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// &quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   &quot;price&quot;: [&quot;2&quot;, &quot;19&quot;]</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listBySearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.body.order ? req.body.order : <span class=\"string\">&quot;desc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.body.sortBy ? req.body.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.body.limit ? <span class=\"built_in\">parseInt</span>(req.body.limit) : <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> skip = req.body.skip ? <span class=\"built_in\">parseInt</span>(req.body.skip) : <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> findArgs = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(order, sortBy, limit, skip, req.body.filters);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(req.body);</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> req.body.filters) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.body.filters[key].length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key === <span class=\"string\">&quot;price&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// gte - great than price</span></span><br><span class=\"line\">        <span class=\"comment\">// lte - less than</span></span><br><span class=\"line\">        findArgs[key] = &#123;</span><br><span class=\"line\">          $gte: req.body.filters[key][<span class=\"number\">0</span>],</span><br><span class=\"line\">          $lte: req.body.filters[key][<span class=\"number\">1</span>],</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// findArgs[key] = new RegExp(req.body.filters[key]);</span></span><br><span class=\"line\">        findArgs[key] = req.body.filters[key];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;findArgs&quot;, findArgs);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find(findArgs)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .skip(skip)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(&#123;</span><br><span class=\"line\">        size: data.length,</span><br><span class=\"line\">        data,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.photo = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.product.photo.data) &#123;</span><br><span class=\"line\">    res.set(<span class=\"string\">&quot;Content-Type&quot;</span>, req.product.photo.contentType);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.send(req.product.photo.data);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listSearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// create query object to hole search value and category value</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// assign search value to query name</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.query.search) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mongodb regular expression</span></span><br><span class=\"line\">    query.name = &#123; <span class=\"attr\">$regex</span>: req.query.search, <span class=\"attr\">$options</span>: <span class=\"string\">&quot;i&quot;</span> &#125;;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(query.name);</span><br><span class=\"line\">    <span class=\"comment\">// assign category value to query.category</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.query.category &amp;&amp; req.query.category != <span class=\"string\">&quot;All&quot;</span>) &#123;</span><br><span class=\"line\">      query.category = req.query.category;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// find the product base on query object with 2 properties</span></span><br><span class=\"line\">    <span class=\"comment\">// search and category</span></span><br><span class=\"line\">    Product.find(query, <span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;).select(<span class=\"string\">&quot;-photo&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-Product-Page-with-Related-Products\"><a href=\"#add-Product-Page-with-Related-Products\" class=\"headerlink\" title=\"add Product Page with Related Products\"></a>add Product Page with Related Products</h3><h4 id=\"install-3\"><a href=\"#install-3\" class=\"headerlink\" title=\"install\"></a>install</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i moment</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Front-End-1\"><a href=\"#Front-End-1\" class=\"headerlink\" title=\"Front End\"></a>Front End</h4><h5 id=\"src-AppRoutes-js-4\"><a href=\"#src-AppRoutes-js-4\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddCategory <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddCategory&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddProduct&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Shop <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Shop&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Product <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Product&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/shop&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Shop</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/category&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddCategory /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/product&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/product/:productId&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Product</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Product-js\"><a href=\"#src-core-Product-js\" class=\"headerlink\" title=\"./src/core/Product.js\"></a>./src/core/Product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Product.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; read, listRelated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [product, setProduct] = useState(&#123;&#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [relatedProduct, setRelatedProduct] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, SetError] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = useParams();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(props);</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">locaSingleProduct</span>(<span class=\"params\">productId</span>) </span>&#123;</span><br><span class=\"line\">    read(productId).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        SetError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProduct(data);</span><br><span class=\"line\">        <span class=\"comment\">// fetch related products</span></span><br><span class=\"line\">        listRelated(data._id).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">            SetError(data.error);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            setRelatedProduct(data);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// react-router-dom v6 get parameter</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> productId = params.productId;</span><br><span class=\"line\">    locaSingleProduct(productId);</span><br><span class=\"line\">  &#125;, [params]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=&#123;product &amp;&amp; product.name&#125;</span><br><span class=\"line\">      description=&#123;</span><br><span class=\"line\">        product &amp;&amp; product.description &amp;&amp; product.description.substring(<span class=\"number\">0.1</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-8&quot;</span>&gt;</span><br><span class=\"line\">          &#123;product &amp;&amp; product.description &amp;&amp; (</span><br><span class=\"line\">            &lt;Card product=&#123;product&#125; showViewProductButton=&#123;<span class=\"literal\">false</span>&#125; /&gt;</span><br><span class=\"line\">          )&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-4&quot;</span>&gt;</span><br><span class=\"line\">          &lt;h4&gt;Rekated Products&lt;/h4&gt;</span><br><span class=\"line\">          &#123;relatedProduct.map(<span class=\"function\">(<span class=\"params\">p, i</span>) =&gt;</span> (</span><br><span class=\"line\">            &lt;div className=<span class=\"string\">&quot;mb-3&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Card key=&#123;i&#125; product=&#123;p&#125; /&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">          ))&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Card-js-2\"><a href=\"#src-core-Card-js-2\" class=\"headerlink\" title=\"./src/core/Card.js\"></a>./src/core/Card.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Card.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable react/prop-types */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> moment <span class=\"keyword\">from</span> <span class=\"string\">&quot;moment&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ShowImage <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ShowImage&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Card</span>(<span class=\"params\">&#123; product, showViewProductButton = <span class=\"literal\">true</span> &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(product);</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showViewButton</span>(<span class=\"params\">showViewProductButton</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      showViewProductButton &amp;&amp; (</span><br><span class=\"line\">        &lt;Link to=&#123;<span class=\"string\">`/product/<span class=\"subst\">$&#123;product._id&#125;</span>`</span>&#125; className=<span class=\"string\">&quot;mr-2&quot;</span>&gt;</span><br><span class=\"line\">          &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary mt-2 mb-2 mr-2&quot;</span>&gt;</span><br><span class=\"line\">            View Product</span><br><span class=\"line\">          &lt;/button&gt;</span><br><span class=\"line\">        &lt;/Link&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showAddToCardButton</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;button className=<span class=\"string\">&quot;btn btn-outline-warning mt-2 mb-2&quot;</span>&gt;Add to card&lt;/button&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showStock</span>(<span class=\"params\">quantity</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> quantity &gt; <span class=\"number\">0</span> ? (</span><br><span class=\"line\">      &lt;span className=<span class=\"string\">&quot;badge badge-primary badge-pill&quot;</span>&gt;In Stock&lt;/span&gt;</span><br><span class=\"line\">    ) : (</span><br><span class=\"line\">      &lt;span&gt;Out <span class=\"keyword\">of</span> Stock&lt;/span&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;card-header name&quot;</span>&gt;&#123;product.name&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span><br><span class=\"line\">        &lt;ShowImage item=&#123;product&#125; url=<span class=\"string\">&quot;product&quot;</span> /&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;p&gt;&#123;`&lt;&lt;$&#123;product.category.name&#125;&gt;&gt;`&#125;&lt;/p&gt; */</span>&#125;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;lead mt-2&quot;</span>&gt;&#123;product.description.substring(<span class=\"number\">0</span>, <span class=\"number\">100</span>)&#125;&lt;/p&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;black-10&quot;</span>&gt;$&#123;product.price&#125;&lt;/p&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;black-9&quot;</span>&gt;</span><br><span class=\"line\">          Category: &#123;product.category &amp;&amp; product.category.name&#125;</span><br><span class=\"line\">        &lt;/p&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;black-8&quot;</span>&gt;</span><br><span class=\"line\">          Added on &#123;moment(product.createdAt).fromNow()&#125;</span><br><span class=\"line\">        &lt;/p&gt;</span><br><span class=\"line\">        &#123;showStock(product.quantity)&#125;</span><br><span class=\"line\">        &lt;br /&gt;</span><br><span class=\"line\">        &#123;showViewButton(showViewProductButton)&#125;</span><br><span class=\"line\">        &#123;showAddToCardButton()&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-ApiCore-js-3\"><a href=\"#src-admin-ApiCore-js-3\" class=\"headerlink\" title=\"./src/admin/ApiCore.js\"></a>./src/admin/ApiCore.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiCore.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> queryString <span class=\"keyword\">from</span> <span class=\"string\">&quot;query-string&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProducts = <span class=\"function\">(<span class=\"params\">sortBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products?sortBy=<span class=\"subst\">$&#123;sortBy&#125;</span>&amp;order=desc&amp;limit=6`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getFilteredProducts = <span class=\"function\">(<span class=\"params\">skip, limit, filters</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = &#123; limit, skip, filters &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/by/search`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> list = <span class=\"function\">(<span class=\"params\">params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = queryString.stringify(params);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/search?<span class=\"subst\">$&#123;query&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> read = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;productid=&quot;</span>, productId);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/<span class=\"subst\">$&#123;productId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> listRelated = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/related/<span class=\"subst\">$&#123;productId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-styles-css-1\"><a href=\"#src-styles-css-1\" class=\"headerlink\" title=\"./src/styles.css\"></a>./src/styles.css</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ./src/styles.css */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">* board radis </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">.btn,</span><br><span class=\"line\">.jumbotron,</span><br><span class=\"line\">.nav :hover &#123;</span><br><span class=\"line\">  border-radius: 0px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* single product page - product name</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">.name &#123;</span><br><span class=\"line\">  background: indigo;</span><br><span class=\"line\">  color: #fff;</span><br><span class=\"line\">  font-weight: bold;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* black shade from 10-1</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">.black-<span class=\"number\">10</span> &#123;</span><br><span class=\"line\">  background: #f2f2f2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">9</span> &#123;</span><br><span class=\"line\">  background: #e6e6e6;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">8</span> &#123;</span><br><span class=\"line\">  background: #d9d9d9;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">7</span> &#123;</span><br><span class=\"line\">  background: #cccccc;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">6</span> &#123;</span><br><span class=\"line\">  background: #bfbfbf;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">5</span> &#123;</span><br><span class=\"line\">  background: #b3b3b3;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* product image on card </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">.product-img &#123;</span><br><span class=\"line\">  min-height: 100px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">* jumbotron animation</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">.jumbotron &#123;</span><br><span class=\"line\">  width: 30wh;</span><br><span class=\"line\">  height: 30vh;</span><br><span class=\"line\">  color: #fff;</span><br><span class=\"line\">  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);</span><br><span class=\"line\">  background-size: <span class=\"number\">400</span>% <span class=\"number\">400</span>%;</span><br><span class=\"line\">  -webkit-animation: Gradient 15s ease infinite;</span><br><span class=\"line\">  -moz-animation: Gradient 15s ease infinite;</span><br><span class=\"line\">  animation: Gradient 15s ease infinite;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@-webkit-keyframes Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">100</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@-moz-keyframes Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">100</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@keyframes Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">100</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Home-js-3\"><a href=\"#src-core-Home-js-3\" class=\"headerlink\" title=\"./src/core/Home.js\"></a>./src/core/Home.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Home.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getProducts &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Search <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Search&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [productsBySell, setProductsBySell] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [productsByArrival, setProductsByArrival] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> loadProductsBySell = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getProducts(<span class=\"string\">&quot;sold&quot;</span>).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProductsBySell(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> loadProductsByArrival = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getProducts(<span class=\"string\">&quot;createdAt&quot;</span>).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProductsByArrival(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loadProductsBySell();</span><br><span class=\"line\">    loadProductsByArrival();</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-danger&quot;</span>&gt;</span>&#123;error&#125;<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Home Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Node React E-commerce&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;Search /&gt;</span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Best Selles&lt;/h2&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;productsBySell.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;div key=&#123;i&#125; className=<span class=\"string\">&quot;col-4 mb-3&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Card product=&#123;product&#125; /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;showError()&#125;</span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;New Arrival&lt;/h2&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;productsByArrival.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;div key=&#123;i&#125; className=<span class=\"string\">&quot;col-4 mb-3&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Card product=&#123;product&#125; /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Shop-js-1\"><a href=\"#src-core-Shop-js-1\" class=\"headerlink\" title=\"./src/core/Shop.js\"></a>./src/core/Shop.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Shop.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getCategories, getFilteredProducts &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Checkbox <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Checkbox&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Radiobox <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Radiobox&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; prices &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./fixPrices&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Shop</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [categories, setCategories] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [myFilters, setMyFilters] = useState(&#123;</span><br><span class=\"line\">    filters: &#123;</span><br><span class=\"line\">      category: [],</span><br><span class=\"line\">      price: [],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  <span class=\"comment\">// eslint-disable-next-line no-unused-vars</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [limit, setLimit] = useState(<span class=\"number\">6</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [skip, setSkip] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [size, setSize] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [filteredResult, setFilteredResult] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> init = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getCategories().then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// FormData 可建立表單資料中的欄位/值建立相對應的的鍵/值對（key/value）集合</span></span><br><span class=\"line\">        setCategories(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loaderFilterResults</span>(<span class=\"params\">newFilters</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(newFilters);</span></span><br><span class=\"line\">    getFilteredProducts(skip, limit, newFilters).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">        setFilteredResult([]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setFilteredResult(data.data);</span><br><span class=\"line\">        setSize(data.size);</span><br><span class=\"line\">        setSkip(<span class=\"number\">0</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadMore</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> toSkip = skip + limit;</span><br><span class=\"line\">    getFilteredProducts(toSkip, limit, myFilters.filters).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setError(data.error);</span><br><span class=\"line\">        setFilteredResult([]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setFilteredResult([...filteredResult, ...data.data]);</span><br><span class=\"line\">        setSize(data.size);</span><br><span class=\"line\">        setSkip(toSkip);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadMoreButton</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      size &gt; <span class=\"number\">0</span> &amp;&amp;</span><br><span class=\"line\">      size &gt;= limit &amp;&amp; (</span><br><span class=\"line\">        &lt;button onClick=&#123;loadMore&#125; className=<span class=\"string\">&quot;btn btn-warning mb-5&quot;</span>&gt;</span><br><span class=\"line\">          Load more</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    init();</span><br><span class=\"line\">    loaderFilterResults(myFilters.filters);</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleFilters = <span class=\"function\">(<span class=\"params\">filters, filterBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;Shop&quot;, filters, filterBy);</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> newFilters = &#123; ...myFilters &#125;;</span><br><span class=\"line\">    newFilters.filters[filterBy] = filters;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (filterBy === <span class=\"string\">&quot;price&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> priceValue = handlePrice(filters);</span><br><span class=\"line\">      newFilters.filters[filterBy] = priceValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    loaderFilterResults(myFilters.filters);</span><br><span class=\"line\">    setMyFilters(newFilters);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handlePrice</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> data = prices;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> array = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> data) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data[key]._id === <span class=\"built_in\">parseInt</span>(value)) &#123;</span><br><span class=\"line\">        array = data[key].array;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-danger&quot;</span>&gt;</span>Category should be unique<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(filteredResult);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Shop Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Search and find books of your choice&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-4&quot;</span>&gt;</span><br><span class=\"line\">          &lt;h4&gt;Fillter by categories&lt;/h4&gt;</span><br><span class=\"line\">          &lt;ul&gt;</span><br><span class=\"line\">            &lt;Checkbox</span><br><span class=\"line\">              categories=&#123;categories&#125;</span><br><span class=\"line\">              handleFilters=&#123;<span class=\"function\">(<span class=\"params\">filters</span>) =&gt;</span> handleFilters(filters, <span class=\"string\">&quot;category&quot;</span>)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/ul&gt;</span><br><span class=\"line\">          &lt;h4&gt;Fillter by price range&lt;/h4&gt;</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            &lt;Radiobox</span><br><span class=\"line\">              prices=&#123;prices&#125;</span><br><span class=\"line\">              handleFilters=&#123;<span class=\"function\">(<span class=\"params\">filters</span>) =&gt;</span> handleFilters(filters, <span class=\"string\">&quot;price&quot;</span>)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-8&quot;</span>&gt;</span><br><span class=\"line\">          &#123;showError()&#125;</span><br><span class=\"line\">          &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Products&lt;/h2&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">            &#123;filteredResult.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">              &lt;div key=&#123;i&#125; className=<span class=\"string\">&quot;col-4 mb-3&quot;</span>&gt;</span><br><span class=\"line\">                &lt;Card product=&#123;product&#125; /&gt;</span><br><span class=\"line\">              &lt;/div&gt;</span><br><span class=\"line\">              <span class=\"comment\">// &lt;Card key=&#123;i&#125; product=&#123;product&#125;&gt;&lt;/Card&gt;</span></span><br><span class=\"line\">            ))&#125;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;hr /&gt;</span><br><span class=\"line\">          &#123;loadMoreButton()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Back-End\"><a href=\"#Back-End\" class=\"headerlink\" title=\"Back End\"></a>Back End</h4><h5 id=\"controller-product-js-1\"><a href=\"#controller-product-js-1\" class=\"headerlink\" title=\"./controller/product.js\"></a>./controller/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;formidable&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> _ = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;lodash&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Product = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.productById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Product.findById(id)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err || !product) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Product does not exist&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.product = product;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.product.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.product);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"keyword\">new</span> Product(fields);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;product:&quot;, result);</span></span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.remove = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">  product.remove(<span class=\"function\">(<span class=\"params\">err, deletedProduct</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">&quot;Product deleted successly&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">    <span class=\"comment\">// fields 蓋過 product</span></span><br><span class=\"line\">    product = _.extend(product, fields);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * sel/arrival</span></span><br><span class=\"line\"><span class=\"comment\"> * bye sell = /products?sortBy=sold&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * bye arrival = /products?sortBy=createdAt&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * if no parameter are sent, then all products are returned</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.list = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.query.order ? req.query.order : <span class=\"string\">&quot;asc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.query.sortBy ? req.query.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find()</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>) <span class=\"comment\">// mapt to Category</span></span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;product-list:&quot;, products);</span></span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * it will find the products based on the req product category</span></span><br><span class=\"line\"><span class=\"comment\"> * other products that has the same category, will be return</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listRelated = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// $ne: not include</span></span><br><span class=\"line\">  Product.find(&#123; <span class=\"attr\">_id</span>: &#123; <span class=\"attr\">$ne</span>: req.product &#125;, <span class=\"attr\">category</span>: req.product.category &#125;)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>, <span class=\"string\">&quot;_id name&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listCategories = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// distinct : 取出不同的 category</span></span><br><span class=\"line\">  <span class=\"comment\">// &#123;&#125; : 2nd parameter doesn&#x27;t need do no send value</span></span><br><span class=\"line\">  Product.distinct(<span class=\"string\">&quot;category&quot;</span>, &#123;&#125;, <span class=\"function\">(<span class=\"params\">err, categories</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Categories not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(categories);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * list products by search</span></span><br><span class=\"line\"><span class=\"comment\"> * we will implement product search in react frontend</span></span><br><span class=\"line\"><span class=\"comment\"> * we will show categories in checkbox and price range in radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * as the user clicks on those checkbox and radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * we will make api request and show the products to users based on what he wants</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;skip&quot; : &quot;1&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;limit&quot; : &quot;2&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">// \t&quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&quot;name&quot;: &quot;Note&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// &gt;=2 and &lt;=19</span></span><br><span class=\"line\"><span class=\"comment\">//  &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// &quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   &quot;price&quot;: [&quot;2&quot;, &quot;19&quot;]</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listBySearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.body.order ? req.body.order : <span class=\"string\">&quot;desc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.body.sortBy ? req.body.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.body.limit ? <span class=\"built_in\">parseInt</span>(req.body.limit) : <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> skip = req.body.skip ? <span class=\"built_in\">parseInt</span>(req.body.skip) : <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> findArgs = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(order, sortBy, limit, skip, req.body.filters);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(req.body);</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> req.body.filters) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.body.filters[key].length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key === <span class=\"string\">&quot;price&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// gte - great than price</span></span><br><span class=\"line\">        <span class=\"comment\">// lte - less than</span></span><br><span class=\"line\">        findArgs[key] = &#123;</span><br><span class=\"line\">          $gte: req.body.filters[key][<span class=\"number\">0</span>],</span><br><span class=\"line\">          $lte: req.body.filters[key][<span class=\"number\">1</span>],</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// findArgs[key] = new RegExp(req.body.filters[key]);</span></span><br><span class=\"line\">        findArgs[key] = req.body.filters[key];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;findArgs&quot;, findArgs);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find(findArgs)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .skip(skip)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(&#123;</span><br><span class=\"line\">        size: data.length,</span><br><span class=\"line\">        data,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.photo = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.product.photo.data) &#123;</span><br><span class=\"line\">    res.set(<span class=\"string\">&quot;Content-Type&quot;</span>, req.product.photo.contentType);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.send(req.product.photo.data);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listSearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// create query object to hole search value and category value</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// assign search value to query name</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.query.search) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mongodb regular expression</span></span><br><span class=\"line\">    query.name = &#123; <span class=\"attr\">$regex</span>: req.query.search, <span class=\"attr\">$options</span>: <span class=\"string\">&quot;i&quot;</span> &#125;;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(query.name);</span><br><span class=\"line\">    <span class=\"comment\">// assign category value to query.category</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.query.category &amp;&amp; req.query.category != <span class=\"string\">&quot;All&quot;</span>) &#123;</span><br><span class=\"line\">      query.category = req.query.category;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// find the product base on query object with 2 properties</span></span><br><span class=\"line\">    <span class=\"comment\">// search and category</span></span><br><span class=\"line\">    Product.find(query, <span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;).select(<span class=\"string\">&quot;-photo&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-Cart\"><a href=\"#add-Cart\" class=\"headerlink\" title=\"add Cart\"></a>add Cart</h3><h4 id=\"src-core-Cart-js\"><a href=\"#src-core-Cart-js\" class=\"headerlink\" title=\"./src/core/Cart.js\"></a>./src/core/Cart.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Cart.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getCart &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./cartHelpers&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Checkout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Checkout&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cart</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [items, setItems] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [updateScreen, setUpdateScreen] = useState(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setItems(getCart());</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, [updateScreen]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleUpdateScreen</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setUpdateScreen(!updateScreen);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showItems</span>(<span class=\"params\">items</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;h2&gt;Your cart has &#123;items.length&#125; items&lt;/h2&gt;</span><br><span class=\"line\">        &lt;hr /&gt;</span><br><span class=\"line\">        &#123;items.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;Card</span><br><span class=\"line\">            key=&#123;i&#125;</span><br><span class=\"line\">            product=&#123;product&#125;</span><br><span class=\"line\">            showAddCartButton=&#123;<span class=\"literal\">false</span>&#125;</span><br><span class=\"line\">            cartUpdate=&#123;<span class=\"literal\">true</span>&#125;</span><br><span class=\"line\">            showRemoveProductButton=&#123;<span class=\"literal\">true</span>&#125;</span><br><span class=\"line\">            handelUpdate=&#123;handleUpdateScreen&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">noItemsMessage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;h2&gt;</span><br><span class=\"line\">        Your cart is empty.</span><br><span class=\"line\">        &lt;br /&gt;</span><br><span class=\"line\">        &lt;Link to=<span class=\"string\">&quot;/shop&quot;</span>&gt; Continue shopping&lt;/Link&gt;</span><br><span class=\"line\">      &lt;/h2&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Shopping Cart&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Manage your cart items. Add remove checkout or continue shopping&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-6&quot;</span>&gt;</span><br><span class=\"line\">          &#123;items.length &gt; <span class=\"number\">0</span> ? showItems(items) : noItemsMessage()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-6&quot;</span>&gt;</span><br><span class=\"line\">          &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Your cart summy&lt;/h2&gt;</span><br><span class=\"line\">          &lt;hr /&gt;</span><br><span class=\"line\">          &lt;Checkout products=&#123;items&#125;&gt;&lt;/Checkout&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-AppRoutes-js-5\"><a href=\"#src-AppRoutes-js-5\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddCategory <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddCategory&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddProduct&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Shop <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Shop&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Product <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Product&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Cart <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Cart&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/shop&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Shop</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/category&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddCategory /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/product&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/product/:productId&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Product</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/cart&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Cart</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-Card-js-3\"><a href=\"#src-core-Card-js-3\" class=\"headerlink\" title=\"./src/core/Card.js\"></a>./src/core/Card.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Card.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable react/prop-types */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, Navigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> moment <span class=\"keyword\">from</span> <span class=\"string\">&quot;moment&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ShowImage <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ShowImage&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; addItem, updateItem, removeItem &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./cartHelpers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Card</span>(<span class=\"params\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  product,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  showViewProductButton = <span class=\"literal\">true</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  showAddCartButton = <span class=\"literal\">true</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  cartUpdate = <span class=\"literal\">false</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  showRemoveProductButton = <span class=\"literal\">false</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  handelUpdate,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [redirect, setRedirect] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(product.count);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showViewButton</span>(<span class=\"params\">showViewProductButton</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      showViewProductButton &amp;&amp; (</span><br><span class=\"line\">        &lt;Link to=&#123;<span class=\"string\">`/product/<span class=\"subst\">$&#123;product._id&#125;</span>`</span>&#125; className=<span class=\"string\">&quot;mr-2&quot;</span>&gt;</span><br><span class=\"line\">          &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary mt-2 mb-2 mr-2&quot;</span>&gt;</span><br><span class=\"line\">            View Product</span><br><span class=\"line\">          &lt;/button&gt;</span><br><span class=\"line\">        &lt;/Link&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addToCart</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    addItem(product, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      setRedirect(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shouldRedirect</span>(<span class=\"params\">redirect</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (redirect) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">replace</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/cart&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showAddToCard</span>(<span class=\"params\">showAddCartButton</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      showAddCartButton &amp;&amp; (</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;addToCart&#125;</span><br><span class=\"line\">          className=<span class=\"string\">&quot;btn btn-outline-warning mt-2 mb-2&quot;</span></span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          Add to card</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showRemoveButton</span>(<span class=\"params\">showRemoveProductButton</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      showRemoveProductButton &amp;&amp; (</span><br><span class=\"line\">        &lt;button</span><br><span class=\"line\">          onClick=&#123;<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            handelUpdate();</span><br><span class=\"line\">            removeItem(product._id);</span><br><span class=\"line\">          &#125;&#125;</span><br><span class=\"line\">          className=<span class=\"string\">&quot;btn btn-outline-danger mt-2 mb-2&quot;</span></span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          Remove Product</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showStock</span>(<span class=\"params\">quantity</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> quantity &gt; <span class=\"number\">0</span> ? (</span><br><span class=\"line\">      &lt;span className=<span class=\"string\">&quot;badge badge-primary badge-pill&quot;</span>&gt;In Stock&lt;/span&gt;</span><br><span class=\"line\">    ) : (</span><br><span class=\"line\">      &lt;span&gt;Out <span class=\"keyword\">of</span> Stock&lt;/span&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleChange = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(productId, e.target.value);</span></span><br><span class=\"line\">    handelUpdate();</span><br><span class=\"line\">    setCount(e.target.value &lt; <span class=\"number\">1</span> ? <span class=\"number\">1</span> : e.target.value);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (e.target.value &gt;= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      updateItem(productId, e.target.value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showCartUpdateotions</span>(<span class=\"params\">CartUpdate</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      cartUpdate &amp;&amp; (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;input-group mb-3&quot;</span>&gt;</span><br><span class=\"line\">            &lt;div className=<span class=\"string\">&quot;input-group-prepend&quot;</span>&gt;</span><br><span class=\"line\">              &lt;span className=<span class=\"string\">&quot;input-group-text&quot;</span>&gt;Adjust Quantity&lt;/span&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">            &lt;input</span><br><span class=\"line\">              type=<span class=\"string\">&quot;number&quot;</span></span><br><span class=\"line\">              className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">              value=&#123;count&#125;</span><br><span class=\"line\">              onChange=&#123;handleChange(product._id)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;card-header name&quot;</span>&gt;&#123;product.name&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;card-body&quot;</span>&gt;</span><br><span class=\"line\">        &#123;shouldRedirect(redirect)&#125;</span><br><span class=\"line\">        &lt;ShowImage item=&#123;product&#125; url=<span class=\"string\">&quot;product&quot;</span> /&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* &lt;p&gt;&#123;`&lt;&lt;$&#123;product.category.name&#125;&gt;&gt;`&#125;&lt;/p&gt; */</span>&#125;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;lead mt-2&quot;</span>&gt;&#123;product.description.substring(<span class=\"number\">0</span>, <span class=\"number\">100</span>)&#125;&lt;/p&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;black-10&quot;</span>&gt;$&#123;product.price&#125;&lt;/p&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;black-9&quot;</span>&gt;</span><br><span class=\"line\">          Category: &#123;product.category &amp;&amp; product.category.name&#125;</span><br><span class=\"line\">        &lt;/p&gt;</span><br><span class=\"line\">        &lt;p className=<span class=\"string\">&quot;black-8&quot;</span>&gt;</span><br><span class=\"line\">          Added on &#123;moment(product.createdAt).fromNow()&#125;</span><br><span class=\"line\">        &lt;/p&gt;</span><br><span class=\"line\">        &#123;showStock(product.quantity)&#125;</span><br><span class=\"line\">        &lt;br /&gt;</span><br><span class=\"line\">        &#123;showViewButton(showViewProductButton)&#125;</span><br><span class=\"line\">        &#123;showAddToCard(showAddCartButton)&#125;</span><br><span class=\"line\">        &#123;showRemoveButton(showRemoveProductButton)&#125;</span><br><span class=\"line\">        &#123;showCartUpdateotions(cartUpdate)&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-cartHelpers-js\"><a href=\"#src-core-cartHelpers-js\" class=\"headerlink\" title=\"./src/core/cartHelpers.js\"></a>./src/core/cartHelpers.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/cartHelpers.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addItem</span>(<span class=\"params\">item, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> cart = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      cart = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  cart.push(&#123;</span><br><span class=\"line\">    ...item,</span><br><span class=\"line\">    count: <span class=\"number\">1</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"> </span><br><span class=\"line\">  cart = <span class=\"built_in\">Array</span>.from(<span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>(cart.map(<span class=\"function\">(<span class=\"params\">p</span>) =&gt;</span> p._id))).map(<span class=\"function\">(<span class=\"params\">id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cart.find(<span class=\"function\">(<span class=\"params\">p</span>) =&gt;</span> p._id === id);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;cart&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(cart));</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">itemTotal</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)).length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCart</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateItem</span>(<span class=\"params\">productId, count</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> cart = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      cart = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line array-callback-return</span></span><br><span class=\"line\">    cart.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (product._id === productId) &#123;</span><br><span class=\"line\">        cart[i].count = count;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;cart&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(cart));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">removeItem</span>(<span class=\"params\">productId</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> cart = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      cart = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line array-callback-return</span></span><br><span class=\"line\">    cart.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (product._id === productId) &#123;</span><br><span class=\"line\">        cart.splice(i, <span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;cart&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(cart));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> cart;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-Menu-js-4\"><a href=\"#src-core-Menu-js-4\" class=\"headerlink\" title=\"./src/core/Menu.js\"></a>./src/core/Menu.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Menu.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Fragment &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link, useNavigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// add history, doesn&#x27;t install</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createBrowserHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;history&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; signout, isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; itemTotal &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./cartHelpers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isActive = <span class=\"function\">(<span class=\"params\">history, path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (history.location.pathname === path) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ff9900&quot;</span> &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Menu = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// add history</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = createBrowserHistory(props);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> navigate = useNavigate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleSignout = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 指執行 callback function next</span></span><br><span class=\"line\">    signout(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      navigate(<span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;Manu render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;nav nav-tabs bg-primary&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> style=&#123;isActive(history, <span class=\"string\">&quot;/&quot;</span>)&#125; to=<span class=\"string\">&quot;/&quot;</span>&gt;</span><br><span class=\"line\">            Home</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link</span><br><span class=\"line\">            className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">            style=&#123;isActive(history, <span class=\"string\">&quot;/shop&quot;</span>)&#125;</span><br><span class=\"line\">            to=<span class=\"string\">&quot;/shop&quot;</span></span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            Shop</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link</span><br><span class=\"line\">            className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">            style=&#123;isActive(history, <span class=\"string\">&quot;/cart&quot;</span>)&#125;</span><br><span class=\"line\">            to=<span class=\"string\">&quot;/cart&quot;</span></span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            Cart&#123;<span class=\"string\">&quot; &quot;</span>&#125;</span><br><span class=\"line\">            &lt;sup&gt;</span><br><span class=\"line\">              &lt;small className=<span class=\"string\">&quot;cart-badge&quot;</span>&gt;&#123;itemTotal()&#125;&lt;/small&gt;</span><br><span class=\"line\">            &lt;/sup&gt;</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; isAuthenticated().user.role === <span class=\"number\">0</span> &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;isActive(history, <span class=\"string\">&quot;/user/dashboard&quot;</span>)&#125;</span><br><span class=\"line\">              to=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Dashboard</span><br><span class=\"line\">            &lt;/Link&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; isAuthenticated().user.role === <span class=\"number\">1</span> &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;isActive(history, <span class=\"string\">&quot;/admin/dashboard&quot;</span>)&#125;</span><br><span class=\"line\">              to=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Dashboard</span><br><span class=\"line\">            &lt;/Link&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;!isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;Fragment&gt;</span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signup&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signup&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signup</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link</span><br><span class=\"line\">                className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">                style=&#123;isActive(history, <span class=\"string\">&quot;/signin&quot;</span>)&#125;</span><br><span class=\"line\">                to=<span class=\"string\">&quot;/signin&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Signin</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/Fragment&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">        &#123;isAuthenticated() &amp;&amp; (</span><br><span class=\"line\">          &lt;li className=<span class=\"string\">&quot;nav-item&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"comment\">/* 因直接執行而不是切到另一頁,使用 span 即可 */</span>&#125;</span><br><span class=\"line\">            &lt;span</span><br><span class=\"line\">              className=<span class=\"string\">&quot;nav-link&quot;</span></span><br><span class=\"line\">              style=&#123;&#123; <span class=\"attr\">cursor</span>: <span class=\"string\">&quot;pointer&quot;</span>, <span class=\"attr\">color</span>: <span class=\"string\">&quot;#ffffff&quot;</span> &#125;&#125;</span><br><span class=\"line\">              onClick=&#123;handleSignout&#125;</span><br><span class=\"line\">            &gt;</span><br><span class=\"line\">              Signout</span><br><span class=\"line\">            &lt;/span&gt;</span><br><span class=\"line\">          &lt;/li&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Menu;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-core-Checkbox-js-1\"><a href=\"#src-core-Checkbox-js-1\" class=\"headerlink\" title=\"./src/core/Checkbox.js\"></a>./src/core/Checkbox.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Checkbox.js</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable array-callback-return */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Checkbox</span>(<span class=\"params\">&#123; categories, handleFilters &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [checked, setChecked] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; event include parameter</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleToggle = <span class=\"function\">(<span class=\"params\">c</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// return the first index or -1</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> currentCategoryId = checked.indexOf(c);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> newCheckedCategoryId = [...checked];</span><br><span class=\"line\">    <span class=\"comment\">// if current checked was not already in checked state &gt; push</span></span><br><span class=\"line\">    <span class=\"comment\">// else pull/take off</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (currentCategoryId === -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      newCheckedCategoryId.push(c);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      newCheckedCategoryId.splice(currentCategoryId, <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(newCheckedCategoryId);</span></span><br><span class=\"line\">    setChecked(newCheckedCategoryId);</span><br><span class=\"line\">    handleFilters(newCheckedCategoryId);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> categories.map(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> (</span><br><span class=\"line\">    &lt;li key=&#123;i&#125; className=<span class=\"string\">&quot;list-unstyled&quot;</span>&gt;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* value=false --&gt;not select  */</span>&#125;</span><br><span class=\"line\">      &#123;<span class=\"comment\">/* ***---&gt;&gt;&gt; event include parameter */</span>&#125;</span><br><span class=\"line\">      &lt;input</span><br><span class=\"line\">        onChange=&#123;handleToggle(c._id)&#125;</span><br><span class=\"line\">        value=&#123;checked.indexOf(c._id) === -<span class=\"number\">1</span>&#125;</span><br><span class=\"line\">        type=<span class=\"string\">&quot;checkbox&quot;</span></span><br><span class=\"line\">        className=<span class=\"string\">&quot;form-check-input&quot;</span></span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">      &lt;label htmlFor=<span class=\"string\">&quot;form-check-label&quot;</span>&gt;&#123;c.name&#125;&lt;/label&gt;</span><br><span class=\"line\">    &lt;/li&gt;</span><br><span class=\"line\">  ));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"src-styles-css-2\"><a href=\"#src-styles-css-2\" class=\"headerlink\" title=\"./src/styles.css\"></a>./src/styles.css</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ./src/styles.css */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">* board radis </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">.btn,</span><br><span class=\"line\">.jumbotron,</span><br><span class=\"line\">.nav :hover &#123;</span><br><span class=\"line\">  border-radius: 0px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* cart badge */</span></span><br><span class=\"line\">.cart-badge,</span><br><span class=\"line\">.cart-badge:hover &#123;</span><br><span class=\"line\">  border-radius: <span class=\"number\">50</span>%;</span><br><span class=\"line\">  padding: 2px;</span><br><span class=\"line\">  font-size: 12px;</span><br><span class=\"line\">  font-style: italic;</span><br><span class=\"line\">  background: #000;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* single product page - product name</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">.name &#123;</span><br><span class=\"line\">  background: indigo;</span><br><span class=\"line\">  color: #fff;</span><br><span class=\"line\">  font-weight: bold;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* black shade from 10-1</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">.black-<span class=\"number\">10</span> &#123;</span><br><span class=\"line\">  background: #f2f2f2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">9</span> &#123;</span><br><span class=\"line\">  background: #e6e6e6;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">8</span> &#123;</span><br><span class=\"line\">  background: #d9d9d9;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">7</span> &#123;</span><br><span class=\"line\">  background: #cccccc;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">6</span> &#123;</span><br><span class=\"line\">  background: #bfbfbf;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.black-<span class=\"number\">5</span> &#123;</span><br><span class=\"line\">  background: #b3b3b3;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* product image on card </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">.product-img &#123;</span><br><span class=\"line\">  min-height: 100px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">* jumbotron animation</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">.jumbotron &#123;</span><br><span class=\"line\">  width: 30wh;</span><br><span class=\"line\">  height: 30vh;</span><br><span class=\"line\">  color: #fff;</span><br><span class=\"line\">  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);</span><br><span class=\"line\">  background-size: <span class=\"number\">400</span>% <span class=\"number\">400</span>%;</span><br><span class=\"line\">  -webkit-animation: Gradient 15s ease infinite;</span><br><span class=\"line\">  -moz-animation: Gradient 15s ease infinite;</span><br><span class=\"line\">  animation: Gradient 15s ease infinite;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@-webkit-keyframes Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">100</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@-moz-keyframes Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">100</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@keyframes Gradient &#123;</span><br><span class=\"line\">  <span class=\"number\">0</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">50</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">100</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"number\">100</span>% &#123;</span><br><span class=\"line\">    background-position: <span class=\"number\">0</span>% <span class=\"number\">50</span>%;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Payment-Gateway\"><a href=\"#Payment-Gateway\" class=\"headerlink\" title=\"Payment Gateway\"></a>Payment Gateway</h3><h4 id=\"Back-End-1\"><a href=\"#Back-End-1\" class=\"headerlink\" title=\"Back End\"></a>Back End</h4><h5 id=\"install-4\"><a href=\"#install-4\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install briantree</span></span><br><span class=\"line\">npm i braintree</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"app-js\"><a href=\"#app-js\" class=\"headerlink\" title=\"./app.js\"></a>./app.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import routes</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> authRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/auth&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// add Category and Product</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> categoryRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/category&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> productRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> braintreeRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/braintree&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import morgan</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> morgan = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;morgan&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cookieParser = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;cookie-parser&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// express-validator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expressValidator = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express-validator&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cors</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;cors&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// env</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\">mongoose</span><br><span class=\"line\">  .connect(process.env.DATABASE, &#123;</span><br><span class=\"line\">    useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;MongoDB Connected…&quot;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// middlewares</span></span><br><span class=\"line\">app.use(morgan(<span class=\"string\">&quot;dev&quot;</span>)); <span class=\"comment\">// morgan - http request log</span></span><br><span class=\"line\">app.use(express.json()); <span class=\"comment\">// body parser</span></span><br><span class=\"line\">app.use(cookieParser()); <span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\">app.use(expressValidator()); <span class=\"comment\">// express-validator</span></span><br><span class=\"line\">app.use(cors()); <span class=\"comment\">// cors</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// routes middleware</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, authRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, userRoutes);</span><br><span class=\"line\"><span class=\"comment\">// add Category and Product</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, categoryRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, productRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, braintreeRoutes);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"routes-braintree-js\"><a href=\"#routes-braintree-js\" class=\"headerlink\" title=\"./routes/braintree.js\"></a>./routes/braintree.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/braintree.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; generateToken, processPayment &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/braintree&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/braintree/getToken/:userId&quot;</span>, requireSignin, isAuth, generateToken);</span><br><span class=\"line\">router.post(</span><br><span class=\"line\">  <span class=\"string\">&quot;/braintree/payment/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  processPayment</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers-braintree-js\"><a href=\"#controllers-braintree-js\" class=\"headerlink\" title=\"./controllers/braintree.js\"></a>./controllers/braintree.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/braintree.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> braintree = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;braintree&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> gateway = <span class=\"keyword\">new</span> braintree.BraintreeGateway(&#123;</span><br><span class=\"line\">  environment: braintree.Environment.Sandbox,</span><br><span class=\"line\">  merchantId: process.env.BRAINTREE_MERCHANT_ID,</span><br><span class=\"line\">  publicKey: process.env.BRAINTREE_PUBLIC_KEY,</span><br><span class=\"line\">  privateKey: process.env.BRAINTREE_PRIVATE_KEY,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.generateToken = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// transaction 設定 merchantAccountId 就好,clientToken 可以不用設</span></span><br><span class=\"line\">  <span class=\"comment\">// 但若要顯示 payment 的方式,就要設定</span></span><br><span class=\"line\">  <span class=\"comment\">// gateway.clientToken.generate(&#123;&#125;, function (err, response) &#123;</span></span><br><span class=\"line\">  gateway.clientToken.generate(</span><br><span class=\"line\">    &#123; <span class=\"attr\">merchantAccountId</span>: process.env.BRAINTREE_MERCHANT_ACCOUNT_ID &#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, response</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">500</span>).send(err);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(response);</span></span><br><span class=\"line\">        res.send(response);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.processPayment = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> nonceFromTheClient = req.body.paymentMethodNonce;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> amountFromTheClient = req.body.amount;</span><br><span class=\"line\">  <span class=\"comment\">// charge</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> newTransaction = gateway.transaction.sale(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      amount: amountFromTheClient,</span><br><span class=\"line\">      paymentMethodNonce: nonceFromTheClient,</span><br><span class=\"line\">      <span class=\"comment\">// 可設定不同的 merchantAccountId( for 不同的貨幣)</span></span><br><span class=\"line\">      merchantAccountId: process.env.BRAINTREE_MERCHANT_ACCOUNT_ID,</span><br><span class=\"line\">      options: &#123;</span><br><span class=\"line\">        submitForSettlement: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    (error, result) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">500</span>).json(error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        res.json(result);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"env-1\"><a href=\"#env-1\" class=\"headerlink\" title=\".env\"></a>.env</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">PORT=<span class=\"number\">8000</span></span><br><span class=\"line\">DATABASE=mongodb:...</span><br><span class=\"line\">JWT_SECRET=...</span><br><span class=\"line\">BRAINTREE_MERCHANT_ID=...</span><br><span class=\"line\">BRAINTREE_PUBLIC_KEY=...</span><br><span class=\"line\">BRAINTREE_PRIVATE_KEY=...</span><br><span class=\"line\">BRAINTREE_MERCHANT_ACCOUNT_ID=...</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Front-End-2\"><a href=\"#Front-End-2\" class=\"headerlink\" title=\"Front End\"></a>Front End</h4><h5 id=\"install-5\"><a href=\"#install-5\" class=\"headerlink\" title=\"install\"></a>install</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># insatll braintree-web-drop-in-react</span></span><br><span class=\"line\">npm i braintree-web-drop-in-react</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"src-core-Checkout-js\"><a href=\"#src-core-Checkout-js\" class=\"headerlink\" title=\"./src/core/Checkout.js\"></a>./src/core/Checkout.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Checkout.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> DropIn <span class=\"keyword\">from</span> <span class=\"string\">&quot;braintree-web-drop-in-react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getBraintreeClientToken, processPayment &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; emptyCart &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./cartHelpers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Checkout</span>(<span class=\"params\">&#123; products, handelUpdate &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = useState(&#123;</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    clientToken: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    instance: &#123;&#125;,</span><br><span class=\"line\">    address: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userId = isAuthenticated() &amp;&amp; isAuthenticated().user._id;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> token = isAuthenticated() &amp;&amp; isAuthenticated().token;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getToken(userId, token);</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTotal</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> products.reduce(<span class=\"function\">(<span class=\"params\">currentValue, nextValue</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> currentValue + nextValue.count * nextValue.price;</span><br><span class=\"line\">    &#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getToken</span>(<span class=\"params\">userId, token</span>) </span>&#123;</span><br><span class=\"line\">    getBraintreeClientToken(userId, token).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (response.error) &#123;</span><br><span class=\"line\">        setData(&#123; ...data, <span class=\"attr\">error</span>: response.error &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// setData(&#123; ...data, clientToken: response.clientToken &#125;);</span></span><br><span class=\"line\">        setData(&#123; <span class=\"attr\">clientToken</span>: response.clientToken &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showCheckout</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> isAuthenticated() ? (</span><br><span class=\"line\">      &lt;div&gt;&#123;showDropIn()&#125;&lt;/div&gt;</span><br><span class=\"line\">    ) : (</span><br><span class=\"line\">      &lt;Link to=<span class=\"string\">&quot;/signin&quot;</span>&gt;</span><br><span class=\"line\">        &lt;button className=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;Sign <span class=\"keyword\">in</span> to checkout&lt;/button&gt;</span><br><span class=\"line\">      &lt;/Link&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleBuy</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setData(&#123; ...data, <span class=\"attr\">loading</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// send the nonce to your server</span></span><br><span class=\"line\">    <span class=\"comment\">// nunce = data.instance.requestPaymentMethod()</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> nonce;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;data&quot;, data);</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (products.length) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// let getNonce = data.instance</span></span><br><span class=\"line\">      data.instance</span><br><span class=\"line\">        .requestPaymentMethod()</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">          nonce = data.nonce;</span><br><span class=\"line\">          <span class=\"comment\">// once you have nonce (Card type, card number) send nonce as paymentMethodNonce</span></span><br><span class=\"line\">          <span class=\"comment\">// and also total to be charged</span></span><br><span class=\"line\">          <span class=\"comment\">// console.log(</span></span><br><span class=\"line\">          <span class=\"comment\">//   &quot;send nonce and total to process : &quot;,</span></span><br><span class=\"line\">          <span class=\"comment\">//   nonce,</span></span><br><span class=\"line\">          <span class=\"comment\">//   getTotal(products)</span></span><br><span class=\"line\">          <span class=\"comment\">// );</span></span><br><span class=\"line\">          <span class=\"keyword\">const</span> paymentData = &#123;</span><br><span class=\"line\">            paymentMethodNonce: nonce,</span><br><span class=\"line\">            amount: getTotal(products),</span><br><span class=\"line\">            <span class=\"comment\">// merchant_account_id: &quot;dhewgthty&quot;,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">          processPayment(userId, token, paymentData)</span><br><span class=\"line\">            .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"comment\">// console.log(response);</span></span><br><span class=\"line\">              setData(&#123; ...data, <span class=\"attr\">success</span>: response.success &#125;);</span><br><span class=\"line\">              <span class=\"comment\">// empty cart</span></span><br><span class=\"line\">              emptyCart(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// console.log(&quot;payment success and empty cart&quot;);</span></span><br><span class=\"line\">                setData(&#123; ...data, <span class=\"attr\">loading</span>: <span class=\"literal\">false</span> &#125;);</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">              handelUpdate();</span><br><span class=\"line\">              <span class=\"comment\">// create order</span></span><br><span class=\"line\">              <span class=\"comment\">// console.log(&quot;paymentData:&quot;, paymentData);</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">              setData(&#123; ...data, <span class=\"attr\">loading</span>: <span class=\"literal\">false</span> &#125;);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;dropin error: &quot;</span>, error);</span><br><span class=\"line\">          setData(&#123; ...data, <span class=\"attr\">error</span>: error.message &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shwoSucess</span>(<span class=\"params\">success</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div</span><br><span class=\"line\">        className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">display</span>: success ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        Thanks! Your Payment was successful!</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shwoLoading</span>(<span class=\"params\">loading</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> loading &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Loading...<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shwoError</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div</span><br><span class=\"line\">        className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">display</span>: error ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        &#123;error&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showDropIn</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div onBlur=&#123;<span class=\"function\">() =&gt;</span> setData(&#123; ...data, <span class=\"attr\">error</span>: <span class=\"string\">&quot;&quot;</span> &#125;)&#125;&gt;</span><br><span class=\"line\">        &#123;data.clientToken != <span class=\"literal\">null</span> &amp;&amp; products.length &gt; <span class=\"number\">0</span> ? (</span><br><span class=\"line\">          &lt;DropIn</span><br><span class=\"line\">            options=&#123;&#123;</span><br><span class=\"line\">              authorization: data.clientToken,</span><br><span class=\"line\">              <span class=\"comment\">// ad paypal option</span></span><br><span class=\"line\">              paypal: &#123;</span><br><span class=\"line\">                flow: <span class=\"string\">&quot;vault&quot;</span>,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">            &#125;&#125;</span><br><span class=\"line\">            onInstance=&#123;<span class=\"function\">(<span class=\"params\">instance</span>) =&gt;</span> (data.instance = instance)&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        ) : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">        &lt;button onClick=&#123;handleBuy&#125; className=<span class=\"string\">&quot;btn btn-success btn-block&quot;</span>&gt;</span><br><span class=\"line\">          Pay</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Total: $&#123;getTotal()&#125;&lt;/h2&gt;</span><br><span class=\"line\">      &#123;shwoLoading(data.loading)&#125;</span><br><span class=\"line\">      &#123;shwoSucess(data.success)&#125;</span><br><span class=\"line\">      &#123;shwoError(data.error)&#125;</span><br><span class=\"line\">      &#123;showCheckout()&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-ApiCore-js-4\"><a href=\"#src-admin-ApiCore-js-4\" class=\"headerlink\" title=\"./src/admin/ApiCore.js\"></a>./src/admin/ApiCore.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiCore.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> queryString <span class=\"keyword\">from</span> <span class=\"string\">&quot;query-string&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProducts = <span class=\"function\">(<span class=\"params\">sortBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products?sortBy=<span class=\"subst\">$&#123;sortBy&#125;</span>&amp;order=desc&amp;limit=6`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getFilteredProducts = <span class=\"function\">(<span class=\"params\">skip, limit, filters</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = &#123; limit, skip, filters &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/by/search`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> list = <span class=\"function\">(<span class=\"params\">params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = queryString.stringify(params);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/search?<span class=\"subst\">$&#123;query&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> read = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;productid=&quot;</span>, productId);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/<span class=\"subst\">$&#123;productId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> listRelated = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/related/<span class=\"subst\">$&#123;productId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getBraintreeClientToken = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/braintree/getToken/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> processPayment = <span class=\"function\">(<span class=\"params\">userId, token, paymentData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(userId, token, paymentData);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/braintree/payment/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: <span class=\"built_in\">JSON</span>.stringify(paymentData),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"src-core-Cart-js-1\"><a href=\"#src-core-Cart-js-1\" class=\"headerlink\" title=\"./src/core/Cart.js\"></a>./src/core/Cart.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Cart.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getCart &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./cartHelpers&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Card <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Card&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Checkout <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Checkout&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cart</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [items, setItems] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [updateScreen, setUpdateScreen] = useState(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setItems(getCart());</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, [updateScreen]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleUpdateScreen</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setUpdateScreen(!updateScreen);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showItems</span>(<span class=\"params\">items</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;h2&gt;Your cart has &#123;items.length&#125; items&lt;/h2&gt;</span><br><span class=\"line\">        &lt;hr /&gt;</span><br><span class=\"line\">        &#123;items.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> (</span><br><span class=\"line\">          &lt;Card</span><br><span class=\"line\">            key=&#123;i&#125;</span><br><span class=\"line\">            product=&#123;product&#125;</span><br><span class=\"line\">            showAddCartButton=&#123;<span class=\"literal\">false</span>&#125;</span><br><span class=\"line\">            cartUpdate=&#123;<span class=\"literal\">true</span>&#125;</span><br><span class=\"line\">            showRemoveProductButton=&#123;<span class=\"literal\">true</span>&#125;</span><br><span class=\"line\">            handelUpdate=&#123;handleUpdateScreen&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        ))&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">noItemsMessage</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;h2&gt;</span><br><span class=\"line\">        Your cart is empty.</span><br><span class=\"line\">        &lt;br /&gt;</span><br><span class=\"line\">        &lt;Link to=<span class=\"string\">&quot;/shop&quot;</span>&gt; Continue shopping&lt;/Link&gt;</span><br><span class=\"line\">      &lt;/h2&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Shopping Cart&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Manage your cart items. Add remove checkout or continue shopping&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-6&quot;</span>&gt;</span><br><span class=\"line\">          &#123;items.length &gt; <span class=\"number\">0</span> ? showItems(items) : noItemsMessage()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-6&quot;</span>&gt;</span><br><span class=\"line\">          &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Your cart summy&lt;/h2&gt;</span><br><span class=\"line\">          &lt;hr /&gt;</span><br><span class=\"line\">          &lt;Checkout</span><br><span class=\"line\">            products=&#123;items&#125;</span><br><span class=\"line\">            handelUpdate=&#123;handleUpdateScreen&#125;</span><br><span class=\"line\">          &gt;&lt;/Checkout&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-cartHelpers-js-1\"><a href=\"#src-core-cartHelpers-js-1\" class=\"headerlink\" title=\"./src/core/cartHelpers.js\"></a>./src/core/cartHelpers.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/cartHelpers.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addItem</span>(<span class=\"params\">item, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> cart = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      cart = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  cart.push(&#123;</span><br><span class=\"line\">    ...item,</span><br><span class=\"line\">    count: <span class=\"number\">1</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  cart = <span class=\"built_in\">Array</span>.from(<span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>(cart.map(<span class=\"function\">(<span class=\"params\">p</span>) =&gt;</span> p._id))).map(<span class=\"function\">(<span class=\"params\">id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cart.find(<span class=\"function\">(<span class=\"params\">p</span>) =&gt;</span> p._id === id);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// console.log(cart);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;cart&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(cart));</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">itemTotal</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)).length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCart</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateItem</span>(<span class=\"params\">productId, count</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> cart = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      cart = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line array-callback-return</span></span><br><span class=\"line\">    cart.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (product._id === productId) &#123;</span><br><span class=\"line\">        cart[i].count = count;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;cart&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(cart));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">removeItem</span>(<span class=\"params\">productId</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> cart = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>)) &#123;</span><br><span class=\"line\">      cart = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;cart&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line array-callback-return</span></span><br><span class=\"line\">    cart.map(<span class=\"function\">(<span class=\"params\">product, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (product._id === productId) &#123;</span><br><span class=\"line\">        cart.splice(i, <span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;cart&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(cart));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> cart;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">emptyCart</span>(<span class=\"params\">next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">localStorage</span>.removeItem(<span class=\"string\">&quot;cart&quot;</span>);</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-Order\"><a href=\"#add-Order\" class=\"headerlink\" title=\"add Order\"></a>add Order</h3><h4 id=\"Back-End-2\"><a href=\"#Back-End-2\" class=\"headerlink\" title=\"Back End\"></a>Back End</h4><h5 id=\"app-js-1\"><a href=\"#app-js-1\" class=\"headerlink\" title=\"./app.js\"></a>./app.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./app.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import routes</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> authRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/auth&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// add Category and Product</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> categoryRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/category&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> productRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> braintreeRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/braintree&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> orderRoutes = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./routes/order&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// import morgan</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> morgan = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;morgan&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cookieParser = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;cookie-parser&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// express-validator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expressValidator = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express-validator&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cors</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;cors&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// env</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;dotenv&quot;</span>).config();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// app</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// connect mangoDB altas</span></span><br><span class=\"line\"><span class=\"comment\">// using 2.2.12 or later&#x27;s uri</span></span><br><span class=\"line\">mongoose</span><br><span class=\"line\">  .connect(process.env.DATABASE, &#123;</span><br><span class=\"line\">    useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;MongoDB Connected…&quot;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// middlewares</span></span><br><span class=\"line\">app.use(morgan(<span class=\"string\">&quot;dev&quot;</span>)); <span class=\"comment\">// morgan - http request log</span></span><br><span class=\"line\">app.use(express.json()); <span class=\"comment\">// body parser</span></span><br><span class=\"line\">app.use(cookieParser()); <span class=\"comment\">// cookie-parser</span></span><br><span class=\"line\">app.use(expressValidator()); <span class=\"comment\">// express-validator</span></span><br><span class=\"line\">app.use(cors()); <span class=\"comment\">// cors</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// routes middleware</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, authRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, userRoutes);</span><br><span class=\"line\"><span class=\"comment\">// add Category and Product</span></span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, categoryRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, productRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, braintreeRoutes);</span><br><span class=\"line\">app.use(<span class=\"string\">&quot;/api&quot;</span>, orderRoutes);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = process.env.PORT || <span class=\"number\">8080</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Server is running on port <span class=\"subst\">$&#123;port&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"routes-order-js\"><a href=\"#routes-order-js\" class=\"headerlink\" title=\"./routes/order.js\"></a>./routes/order.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/order.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; userById, addOrderToUserHistory &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  create,</span><br><span class=\"line\">  listOrders,</span><br><span class=\"line\">  getStatusValues,</span><br><span class=\"line\">  orderById,</span><br><span class=\"line\">  updateOrderStatus,</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/order&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; descreaseQuantity &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/product&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.post(</span><br><span class=\"line\">  <span class=\"string\">&quot;/order/create/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  addOrderToUserHistory,</span><br><span class=\"line\">  descreaseQuantity,</span><br><span class=\"line\">  create</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/order/list/:userId&quot;</span>, requireSignin, isAuth, isAdmin, listOrders);</span><br><span class=\"line\">router.get(</span><br><span class=\"line\">  <span class=\"string\">&quot;/order/status-values/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  getStatusValues</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">router.put(</span><br><span class=\"line\">  <span class=\"string\">&quot;/order/:orderId/status/:userId&quot;</span>,</span><br><span class=\"line\">  requireSignin,</span><br><span class=\"line\">  isAuth,</span><br><span class=\"line\">  isAdmin,</span><br><span class=\"line\">  updateOrderStatus</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\">router.param(<span class=\"string\">&quot;orderId&quot;</span>, orderById);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"models-orders-js\"><a href=\"#models-orders-js\" class=\"headerlink\" title=\"./models/orders.js\"></a>./models/orders.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./models/orders.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mongoose&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Schema = mongoose.Schema;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; ObjectId &#125; = mongoose.Schema;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> CartItemSchema = <span class=\"keyword\">new</span> mongoose.Schema(</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    product: &#123; <span class=\"attr\">type</span>: ObjectId, <span class=\"attr\">ref</span>: <span class=\"string\">&quot;Product&quot;</span> &#125;,</span><br><span class=\"line\">    name: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">    price: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">    count: <span class=\"built_in\">Number</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">timestamps</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> CartItem = mongoose.model(<span class=\"string\">&quot;CartItem&quot;</span>, CartItemSchema);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> OrderSchema = <span class=\"keyword\">new</span> mongoose.Schema(</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    products: [CartItemSchema],</span><br><span class=\"line\">    transaction_id: &#123;&#125;,</span><br><span class=\"line\">    amount: &#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Number</span> &#125;,</span><br><span class=\"line\">    address: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">    status: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: <span class=\"string\">&quot;Not processed&quot;</span>,</span><br><span class=\"line\">      enum: [<span class=\"string\">&quot;Not processed&quot;</span>, <span class=\"string\">&quot;Processing&quot;</span>, <span class=\"string\">&quot;Shipped&quot;</span>, <span class=\"string\">&quot;Delivered&quot;</span>],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    updated: <span class=\"built_in\">Date</span>,</span><br><span class=\"line\">    user: &#123; <span class=\"attr\">type</span>: ObjectId, <span class=\"attr\">ref</span>: <span class=\"string\">&quot;User&quot;</span> &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">timestamps</span>: <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Order = mongoose.model(<span class=\"string\">&quot;Order&quot;</span>, OrderSchema);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123; Order, CartItem &#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers-order-js\"><a href=\"#controllers-order-js\" class=\"headerlink\" title=\"./controllers/order.js\"></a>./controllers/order.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/order.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Order, CartItem &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/order&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.orderById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Order.findById(id)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;products.product&quot;</span>, <span class=\"string\">&quot;name price&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">error, order</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(error),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.order = order;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.body.order.user = req.profile;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> order = <span class=\"keyword\">new</span> Order(req.body.order);</span><br><span class=\"line\">  order.save(<span class=\"function\">(<span class=\"params\">error, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(error),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listOrders = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Order.find()</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;user&quot;</span>, <span class=\"string\">&quot;_id name address&quot;</span>)</span><br><span class=\"line\">    .sort(<span class=\"string\">&quot;-created&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">error, orders</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(error),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(orders);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.getStatusValues = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.json(Order.schema.path(<span class=\"string\">&quot;status&quot;</span>).enumValues);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.updateOrderStatus = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(req);</span><br><span class=\"line\">  Order.update(</span><br><span class=\"line\">    &#123; <span class=\"attr\">_id</span>: req.body.orderId &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">$set</span>: &#123; <span class=\"attr\">status</span>: req.body.status &#125; &#125;,</span><br><span class=\"line\">    (error, order) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;????&quot;</span>, error);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(error),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(order);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers-user-js\"><a href=\"#controllers-user-js\" class=\"headerlink\" title=\"./controllers/user.js\"></a>./controllers/user.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.userById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  User.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !user) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;User not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.profile = user;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.profile.hashed_password = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  req.profile.salt = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.profile);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  User.findOneAndUpdate(</span><br><span class=\"line\">    &#123; <span class=\"attr\">_id</span>: req.profile._id &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">$set</span>: req.body &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">new</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">    (err, user) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;You are not authorized to perform this action&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.profile.hashed_password = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      req.profile.salt = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(user);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.addOrderToUserHistory = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> history = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  req.body.order.products.forEach(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    history.push(&#123;</span><br><span class=\"line\">      _id: item._id,</span><br><span class=\"line\">      name: item.name,</span><br><span class=\"line\">      description: item.description,</span><br><span class=\"line\">      category: item.category,</span><br><span class=\"line\">      quantity: item.count,</span><br><span class=\"line\">      transcation_id: req.body.order.transaction_id,</span><br><span class=\"line\">      amount: req.body.order.amount,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  User.findOneAndUpdate(</span><br><span class=\"line\">    &#123; <span class=\"attr\">_id</span>: req.profile._id &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">$push</span>: &#123; <span class=\"attr\">history</span>: history &#125; &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">new</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">    (error, data) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Could not update user purchase history&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controller-product-js-2\"><a href=\"#controller-product-js-2\" class=\"headerlink\" title=\"./controller/product.js\"></a>./controller/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;formidable&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> _ = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;lodash&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Product = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.productById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Product.findById(id)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err || !product) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Product does not exist&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.product = product;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.product.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.product);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"keyword\">new</span> Product(fields);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;product:&quot;, result);</span></span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.remove = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">  product.remove(<span class=\"function\">(<span class=\"params\">err, deletedProduct</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">&quot;Product deleted successly&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">    <span class=\"comment\">// fields 蓋過 product</span></span><br><span class=\"line\">    product = _.extend(product, fields);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * sel/arrival</span></span><br><span class=\"line\"><span class=\"comment\"> * bye sell = /products?sortBy=sold&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * bye arrival = /products?sortBy=createdAt&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * if no parameter are sent, then all products are returned</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.list = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.query.order ? req.query.order : <span class=\"string\">&quot;asc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.query.sortBy ? req.query.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find()</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>) <span class=\"comment\">// mapt to Category</span></span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;product-list:&quot;, products);</span></span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * it will find the products based on the req product category</span></span><br><span class=\"line\"><span class=\"comment\"> * other products that has the same category, will be return</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listRelated = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// $ne: not include</span></span><br><span class=\"line\">  Product.find(&#123; <span class=\"attr\">_id</span>: &#123; <span class=\"attr\">$ne</span>: req.product &#125;, <span class=\"attr\">category</span>: req.product.category &#125;)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>, <span class=\"string\">&quot;_id name&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listCategories = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// distinct : 取出不同的 category</span></span><br><span class=\"line\">  <span class=\"comment\">// &#123;&#125; : 2nd parameter doesn&#x27;t need do no send value</span></span><br><span class=\"line\">  Product.distinct(<span class=\"string\">&quot;category&quot;</span>, &#123;&#125;, <span class=\"function\">(<span class=\"params\">err, categories</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Categories not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(categories);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * list products by search</span></span><br><span class=\"line\"><span class=\"comment\"> * we will implement product search in react frontend</span></span><br><span class=\"line\"><span class=\"comment\"> * we will show categories in checkbox and price range in radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * as the user clicks on those checkbox and radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * we will make api request and show the products to users based on what he wants</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;skip&quot; : &quot;1&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;limit&quot; : &quot;2&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">// \t&quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&quot;name&quot;: &quot;Note&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// &gt;=2 and &lt;=19</span></span><br><span class=\"line\"><span class=\"comment\">//  &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// &quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   &quot;price&quot;: [&quot;2&quot;, &quot;19&quot;]</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listBySearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.body.order ? req.body.order : <span class=\"string\">&quot;desc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.body.sortBy ? req.body.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.body.limit ? <span class=\"built_in\">parseInt</span>(req.body.limit) : <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> skip = req.body.skip ? <span class=\"built_in\">parseInt</span>(req.body.skip) : <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> findArgs = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(order, sortBy, limit, skip, req.body.filters);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(req.body);</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> req.body.filters) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.body.filters[key].length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key === <span class=\"string\">&quot;price&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// gte - great than price</span></span><br><span class=\"line\">        <span class=\"comment\">// lte - less than</span></span><br><span class=\"line\">        findArgs[key] = &#123;</span><br><span class=\"line\">          $gte: req.body.filters[key][<span class=\"number\">0</span>],</span><br><span class=\"line\">          $lte: req.body.filters[key][<span class=\"number\">1</span>],</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// findArgs[key] = new RegExp(req.body.filters[key]);</span></span><br><span class=\"line\">        findArgs[key] = req.body.filters[key];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;findArgs&quot;, findArgs);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find(findArgs)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .skip(skip)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(&#123;</span><br><span class=\"line\">        size: data.length,</span><br><span class=\"line\">        data,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.photo = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.product.photo.data) &#123;</span><br><span class=\"line\">    res.set(<span class=\"string\">&quot;Content-Type&quot;</span>, req.product.photo.contentType);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.send(req.product.photo.data);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listSearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// create query object to hole search value and category value</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// assign search value to query name</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.query.search) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mongodb regular expression</span></span><br><span class=\"line\">    query.name = &#123; <span class=\"attr\">$regex</span>: req.query.search, <span class=\"attr\">$options</span>: <span class=\"string\">&quot;i&quot;</span> &#125;;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(query.name);</span><br><span class=\"line\">    <span class=\"comment\">// assign category value to query.category</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.query.category &amp;&amp; req.query.category != <span class=\"string\">&quot;All&quot;</span>) &#123;</span><br><span class=\"line\">      query.category = req.query.category;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// find the product base on query object with 2 properties</span></span><br><span class=\"line\">    <span class=\"comment\">// search and category</span></span><br><span class=\"line\">    Product.find(query, <span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;).select(<span class=\"string\">&quot;-photo&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.descreaseQuantity = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> bulkOps = req.body.order.products.map(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      updateOne: &#123;</span><br><span class=\"line\">        filter: &#123; <span class=\"attr\">_id</span>: item._id &#125;,</span><br><span class=\"line\">        update: &#123; <span class=\"attr\">$inc</span>: &#123; <span class=\"attr\">quantity</span>: -item.count, <span class=\"attr\">sold</span>: +item.count &#125; &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.bulkWrite(bulkOps, &#123;&#125;, <span class=\"function\">(<span class=\"params\">error, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Could not update product&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Front-End-3\"><a href=\"#Front-End-3\" class=\"headerlink\" title=\"Front End\"></a>Front End</h4><h5 id=\"src-AppRoutes-js-6\"><a href=\"#src-AppRoutes-js-6\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddCategory <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddCategory&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddProduct&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Shop <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Shop&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Product <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Product&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Cart <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Cart&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Orders <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/Orders&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/shop&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Shop</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/category&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddCategory /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/product&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/product/:productId&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Product</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/cart&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Cart</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/orders&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;Orders /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-Orders-js\"><a href=\"#src-admin-Orders-js\" class=\"headerlink\" title=\"./src/admin/Orders.js\"></a>./src/admin/Orders.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  ./src/admin/Orders.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; listOrders, getStatusValues, updateOrderStatus &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ApiAdmin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> moment <span class=\"keyword\">from</span> <span class=\"string\">&quot;moment&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Orders</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [orders, setOrders] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [statusValues, setStatusValues] = useState([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, token &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadOrders</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    listOrders(user._id, token).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setOrders(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadStatusValue</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    getStatusValues(user._id, token).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setStatusValues(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loadOrders();</span><br><span class=\"line\">    loadStatusValue();</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showOrdersLength</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (orders.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;h1 className=<span class=\"string\">&quot;text-danger display-2&quot;</span>&gt;Total orders: &#123;orders.length&#125;&lt;/h1&gt;</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      &lt;h1 className=<span class=\"string\">&quot;text-danger&quot;</span>&gt;No orders&lt;/h1&gt;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleStatusChange</span>(<span class=\"params\">e, orderId</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;update order status&quot;</span>);</span><br><span class=\"line\">    updateOrderStatus(user._id, token, orderId, e.target.value).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;status update field&quot;</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        loadOrders();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showStatus</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(statusValues);</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;from-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h3 className=<span class=\"string\">&quot;mark mb-4&quot;</span>&gt;Status: &#123;o.status&#125;&lt;/h3&gt;</span><br><span class=\"line\">        &lt;select</span><br><span class=\"line\">          className=<span class=\"string\">&quot;from-control&quot;</span></span><br><span class=\"line\">          onChange=&#123;<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> handleStatusChange(e, o._id)&#125;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          &lt;option&gt;Update Status&lt;/option&gt;</span><br><span class=\"line\">          &#123;statusValues.map(<span class=\"function\">(<span class=\"params\">status, index</span>) =&gt;</span> (</span><br><span class=\"line\">            &lt;option key=&#123;index&#125; value=&#123;status&#125;&gt;</span><br><span class=\"line\">              &#123;status&#125;</span><br><span class=\"line\">            &lt;/option&gt;</span><br><span class=\"line\">          ))&#125;</span><br><span class=\"line\">        &lt;/select&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Orsers&quot;</span></span><br><span class=\"line\">      description=&#123;<span class=\"string\">`G&#x27;day <span class=\"subst\">$&#123;user.name&#125;</span>, you can manage all the orders here`</span>&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-md-8 offset-md-2&quot;</span>&gt;</span><br><span class=\"line\">          &#123;showOrdersLength()&#125;</span><br><span class=\"line\">          &#123;orders.map(<span class=\"function\">(<span class=\"params\">o, oIndex</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (</span><br><span class=\"line\">              &lt;div</span><br><span class=\"line\">                className=<span class=\"string\">&quot;mt-5&quot;</span></span><br><span class=\"line\">                key=&#123;oIndex&#125;</span><br><span class=\"line\">                style=&#123;&#123; <span class=\"attr\">borderBottom</span>: <span class=\"string\">&quot;5px solid indigo&quot;</span> &#125;&#125;</span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                &lt;h2 className=<span class=\"string\">&quot;mb-5&quot;</span>&gt;</span><br><span class=\"line\">                  &lt;span className=<span class=\"string\">&quot;bg-primary&quot;</span>&gt;Order:&#123;o._id&#125;&lt;/span&gt;</span><br><span class=\"line\">                &lt;/h2&gt;</span><br><span class=\"line\">                &lt;ul className=<span class=\"string\">&quot;list-group mb-2&quot;</span>&gt;</span><br><span class=\"line\">                  &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">                    &#123;o.status&#125;</span><br><span class=\"line\">                    &#123;showStatus(o)&#125;</span><br><span class=\"line\">                  &lt;/li&gt;</span><br><span class=\"line\">                  &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">                    Transaction ID: &#123;o.transaction_id&#125;</span><br><span class=\"line\">                  &lt;/li&gt;</span><br><span class=\"line\">                  &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;Amount: &#123;o.amount&#125;&lt;/li&gt;</span><br><span class=\"line\">                  &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;Order By: &#123;o.user.name&#125;&lt;/li&gt;</span><br><span class=\"line\">                  &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">                    Ordered on: &#123;moment(o.createdAt).fromNow()&#125;</span><br><span class=\"line\">                  &lt;/li&gt;</span><br><span class=\"line\">                  &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">                    Delivery address: &#123;o.address&#125;</span><br><span class=\"line\">                  &lt;/li&gt;</span><br><span class=\"line\">                &lt;/ul&gt;</span><br><span class=\"line\">                &lt;h3 className=<span class=\"string\">&quot;mt-4 mb-4 font-italic&quot;</span>&gt;</span><br><span class=\"line\">                  Total products <span class=\"keyword\">in</span> the orders: &#123;o.products.length&#125;</span><br><span class=\"line\">                &lt;/h3&gt;</span><br><span class=\"line\">              &lt;/div&gt;</span><br><span class=\"line\">            );</span><br><span class=\"line\">          &#125;)&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-UserDashboard-js-1\"><a href=\"#src-core-UserDashboard-js-1\" class=\"headerlink\" title=\"./src/core/UserDashboard.js\"></a>./src/core/UserDashboard.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/UserDashboard.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UserDashboard</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    user: &#123; name, email, role &#125;,</span><br><span class=\"line\">  &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userLinks = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;User Links&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/cart&quot;</span>&gt;</span><br><span class=\"line\">            My Cart</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/profile/update&quot;</span>&gt;</span><br><span class=\"line\">            Update Profile</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userInfo = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;<span class=\"string\">`G&#x27;Day <span class=\"subst\">$&#123;name&#125;</span>!`</span>&#125;&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;name&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;email&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &#123;role === <span class=\"number\">1</span> ? <span class=\"string\">&quot;Admin&quot;</span> : <span class=\"string\">&quot;Registrred User&quot;</span>&#125;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> purchaseHistory = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;histtory&lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Dashboard Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;User Dashboard&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;&#123;userLinks()&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-9&quot;</span>&gt;</span><br><span class=\"line\">          &#123;userInfo()&#125;</span><br><span class=\"line\">          &#123;purchaseHistory()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-Checkout-js-1\"><a href=\"#src-core-Checkout-js-1\" class=\"headerlink\" title=\"./src/core/Checkout.js\"></a>./src/core/Checkout.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/Checkout.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> DropIn <span class=\"keyword\">from</span> <span class=\"string\">&quot;braintree-web-drop-in-react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  getBraintreeClientToken,</span><br><span class=\"line\">  processPayment,</span><br><span class=\"line\">  createOrder,</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiCore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; emptyCart &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./cartHelpers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Checkout</span>(<span class=\"params\">&#123; products, handelUpdate &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = useState(&#123;</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    clientToken: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    instance: &#123;&#125;,</span><br><span class=\"line\">    address: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userId = isAuthenticated() &amp;&amp; isAuthenticated().user._id;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> token = isAuthenticated() &amp;&amp; isAuthenticated().token;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getToken(userId, token);</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTotal</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> products.reduce(<span class=\"function\">(<span class=\"params\">currentValue, nextValue</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> currentValue + nextValue.count * nextValue.price;</span><br><span class=\"line\">    &#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getToken</span>(<span class=\"params\">userId, token</span>) </span>&#123;</span><br><span class=\"line\">    getBraintreeClientToken(userId, token).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (response.error) &#123;</span><br><span class=\"line\">        setData(&#123; ...data, <span class=\"attr\">error</span>: response.error &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// setData(&#123; ...data, clientToken: response.clientToken &#125;);</span></span><br><span class=\"line\">        setData(&#123; <span class=\"attr\">clientToken</span>: response.clientToken &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showCheckout</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> isAuthenticated() ? (</span><br><span class=\"line\">      &lt;div&gt;&#123;showDropIn()&#125;&lt;/div&gt;</span><br><span class=\"line\">    ) : (</span><br><span class=\"line\">      &lt;Link to=<span class=\"string\">&quot;/signin&quot;</span>&gt;</span><br><span class=\"line\">        &lt;button className=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;Sign <span class=\"keyword\">in</span> to checkout&lt;/button&gt;</span><br><span class=\"line\">      &lt;/Link&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> deliveryAddress = data.address;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleBuy</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setData(&#123; ...data, <span class=\"attr\">loading</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// send the nonce to your server</span></span><br><span class=\"line\">    <span class=\"comment\">// nunce = data.instance.requestPaymentMethod()</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> nonce;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;data&quot;, data);</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (products.length) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// let getNonce = data.instance</span></span><br><span class=\"line\">      data.instance</span><br><span class=\"line\">        .requestPaymentMethod()</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">          nonce = data.nonce;</span><br><span class=\"line\">          <span class=\"comment\">// once you have nonce (Card type, card number) send nonce as paymentMethodNonce</span></span><br><span class=\"line\">          <span class=\"comment\">// and also total to be charged</span></span><br><span class=\"line\">          <span class=\"comment\">// console.log(</span></span><br><span class=\"line\">          <span class=\"comment\">//   &quot;send nonce and total to process : &quot;,</span></span><br><span class=\"line\">          <span class=\"comment\">//   nonce,</span></span><br><span class=\"line\">          <span class=\"comment\">//   getTotal(products)</span></span><br><span class=\"line\">          <span class=\"comment\">// );</span></span><br><span class=\"line\">          <span class=\"keyword\">const</span> paymentData = &#123;</span><br><span class=\"line\">            paymentMethodNonce: nonce,</span><br><span class=\"line\">            amount: getTotal(products),</span><br><span class=\"line\">            <span class=\"comment\">// merchant_account_id: &quot;dhewgthty&quot;,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">          processPayment(userId, token, paymentData)</span><br><span class=\"line\">            .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"comment\">// create order</span></span><br><span class=\"line\">              <span class=\"keyword\">const</span> createOrderData = &#123;</span><br><span class=\"line\">                products: products,</span><br><span class=\"line\">                transaction_id: response.transaction.id,</span><br><span class=\"line\">                amount: response.transaction.amount,</span><br><span class=\"line\">                address: deliveryAddress,</span><br><span class=\"line\">              &#125;;</span><br><span class=\"line\">              createOrder(userId, token, createOrderData).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                emptyCart(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">                  handelUpdate();</span><br><span class=\"line\">                  <span class=\"comment\">// console.log(&quot;payment success and empty cart&quot;);</span></span><br><span class=\"line\">                  setData(&#123; ...data, <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>, <span class=\"attr\">success</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">              setData(&#123; ...data, <span class=\"attr\">loading</span>: <span class=\"literal\">false</span> &#125;);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;dropin error: &quot;</span>, error);</span><br><span class=\"line\">          setData(&#123; ...data, <span class=\"attr\">error</span>: error.message &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shwoSucess</span>(<span class=\"params\">success</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div</span><br><span class=\"line\">        className=<span class=\"string\">&quot;alert alert-info&quot;</span></span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">display</span>: success ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        Thanks! Your Payment was successful!</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shwoLoading</span>(<span class=\"params\">loading</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> loading &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Loading...<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shwoError</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div</span><br><span class=\"line\">        className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">display</span>: error ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">        &#123;error&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleAddress</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    setData(&#123; ...data, <span class=\"attr\">address</span>: e.target.value &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showDropIn</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div onBlur=&#123;<span class=\"function\">() =&gt;</span> setData(&#123; ...data, <span class=\"attr\">error</span>: <span class=\"string\">&quot;&quot;</span> &#125;)&#125;&gt;</span><br><span class=\"line\">        &#123;data.clientToken != <span class=\"literal\">null</span> &amp;&amp; products.length &gt; <span class=\"number\">0</span> ? (</span><br><span class=\"line\">          &lt;div&gt;</span><br><span class=\"line\">            &lt;div className=<span class=\"string\">&quot;gorm-grop mb-3&quot;</span>&gt;</span><br><span class=\"line\">              &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Delivery address:&lt;/label&gt;</span><br><span class=\"line\">              &lt;textarea</span><br><span class=\"line\">                onChange=&#123;handleAddress&#125;</span><br><span class=\"line\">                className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">                value=&#123;data.address&#125;</span><br><span class=\"line\">                placeholder=<span class=\"string\">&quot;Type your deliver address here ...&quot;</span></span><br><span class=\"line\">              /&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">            &lt;DropIn</span><br><span class=\"line\">              options=&#123;&#123;</span><br><span class=\"line\">                authorization: data.clientToken,</span><br><span class=\"line\">                <span class=\"comment\">// ad paypal option</span></span><br><span class=\"line\">                paypal: &#123;</span><br><span class=\"line\">                  flow: <span class=\"string\">&quot;vault&quot;</span>,</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">              &#125;&#125;</span><br><span class=\"line\">              onInstance=&#123;<span class=\"function\">(<span class=\"params\">instance</span>) =&gt;</span> (data.instance = instance)&#125;</span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\">            &lt;button onClick=&#123;handleBuy&#125; className=<span class=\"string\">&quot;btn btn-success btn-block&quot;</span>&gt;</span><br><span class=\"line\">              Pay</span><br><span class=\"line\">            &lt;/button&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        ) : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Total: $&#123;getTotal()&#125;&lt;/h2&gt;</span><br><span class=\"line\">      &#123;shwoLoading(data.loading)&#125;</span><br><span class=\"line\">      &#123;shwoSucess(data.success)&#125;</span><br><span class=\"line\">      &#123;shwoError(data.error)&#125;</span><br><span class=\"line\">      &#123;showCheckout()&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-ApiCore-js-5\"><a href=\"#src-admin-ApiCore-js-5\" class=\"headerlink\" title=\"./src/admin/ApiCore.js\"></a>./src/admin/ApiCore.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiCore.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> queryString <span class=\"keyword\">from</span> <span class=\"string\">&quot;query-string&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProducts = <span class=\"function\">(<span class=\"params\">sortBy</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products?sortBy=<span class=\"subst\">$&#123;sortBy&#125;</span>&amp;order=desc&amp;limit=6`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getFilteredProducts = <span class=\"function\">(<span class=\"params\">skip, limit, filters</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = &#123; limit, skip, filters &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/by/search`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> list = <span class=\"function\">(<span class=\"params\">params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = queryString.stringify(params);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/search?<span class=\"subst\">$&#123;query&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> read = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;productid=&quot;</span>, productId);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/<span class=\"subst\">$&#123;productId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> listRelated = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products/related/<span class=\"subst\">$&#123;productId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getBraintreeClientToken = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/braintree/getToken/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> processPayment = <span class=\"function\">(<span class=\"params\">userId, token, paymentData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(userId, token, paymentData);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/braintree/payment/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: <span class=\"built_in\">JSON</span>.stringify(paymentData),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createOrder = <span class=\"function\">(<span class=\"params\">userId, token, createOrderData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/order/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: <span class=\"built_in\">JSON</span>.stringify(&#123; <span class=\"attr\">order</span>: createOrderData &#125;),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-ApiAdmin-js-1\"><a href=\"#src-admin-ApiAdmin-js-1\" class=\"headerlink\" title=\"./src/admin/ApiAdmin.js\"></a>./src/admin/ApiAdmin.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiAdmin.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createCategory = <span class=\"function\">(<span class=\"params\">userId, token, category</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; call API function 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/category/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(category),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createProduct = <span class=\"function\">(<span class=\"params\">userId, token, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; call API function 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: product,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> listOrders = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/order/list/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getStatusValues = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/order/status-values/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> updateOrderStatus = <span class=\"function\">(<span class=\"params\">userId, token, orderId, status</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/order/<span class=\"subst\">$&#123;orderId&#125;</span>/status/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;PUT&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: <span class=\"built_in\">JSON</span>.stringify(&#123; status, orderId &#125;),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-user-profile-user-purchase-history\"><a href=\"#add-user-profile-user-purchase-history\" class=\"headerlink\" title=\"add user profile + user purchase history\"></a>add user profile + user purchase history</h3><h4 id=\"Back-End-3\"><a href=\"#Back-End-3\" class=\"headerlink\" title=\"Back End\"></a>Back End</h4><h5 id=\"routes-user-js\"><a href=\"#routes-user-js\" class=\"headerlink\" title=\"./routes/user.js\"></a>./routes/user.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./routes/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router();</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  userById,</span><br><span class=\"line\">  read,</span><br><span class=\"line\">  update,</span><br><span class=\"line\">  purchaseHistory,</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/user&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// add controller</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; requireSignin, isAuth, isAdmin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../controllers/auth&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/secret/:userId&quot;</span>, requireSignin, isAuth, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.json(&#123;</span><br><span class=\"line\">    user: req.profile,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/user/:userId&quot;</span>, requireSignin, isAuth, read);</span><br><span class=\"line\">router.put(<span class=\"string\">&quot;/user/:userId&quot;</span>, requireSignin, isAuth, update);</span><br><span class=\"line\">router.get(<span class=\"string\">&quot;/orders/by/user/:userId&quot;</span>, requireSignin, isAuth, purchaseHistory);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// userId 參數驗證</span></span><br><span class=\"line\">router.param(<span class=\"string\">&quot;userId&quot;</span>, userById);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers-order-js-1\"><a href=\"#controllers-order-js-1\" class=\"headerlink\" title=\"./controllers/order.js\"></a>./controllers/order.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/order.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Order &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/order&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.orderById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Order.findById(id)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;products.product&quot;</span>, <span class=\"string\">&quot;name price&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">error, order</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(error),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.order = order;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.body.order.user = req.profile;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> order = <span class=\"keyword\">new</span> Order(req.body.order);</span><br><span class=\"line\">  order.save(<span class=\"function\">(<span class=\"params\">error, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(error),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listOrders = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Order.find()</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;user&quot;</span>, <span class=\"string\">&quot;_id name address&quot;</span>)</span><br><span class=\"line\">    .sort(<span class=\"string\">&quot;-created&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">error, orders</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(error),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(orders);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.getStatusValues = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.json(Order.schema.path(<span class=\"string\">&quot;status&quot;</span>).enumValues);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.updateOrderStatus = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Order.updateOne(</span><br><span class=\"line\">    &#123; <span class=\"attr\">_id</span>: req.body.orderId &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">$set</span>: &#123; <span class=\"attr\">status</span>: req.body.status &#125; &#125;,</span><br><span class=\"line\">    (error, order) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(error),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(order);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"controllers-user-js-1\"><a href=\"#controllers-user-js-1\" class=\"headerlink\" title=\"./controllers/user.js\"></a>./controllers/user.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/user&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Order &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/order&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.userById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  User.findById(id).exec(<span class=\"function\">(<span class=\"params\">err, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err || !user) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;User not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req.profile = user;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.profile.hashed_password = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  req.profile.salt = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.profile);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  User.findOneAndUpdate(</span><br><span class=\"line\">    &#123; <span class=\"attr\">_id</span>: req.profile._id &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">$set</span>: req.body &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">new</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">    (err, user) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;You are not authorized to perform this action&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.profile.hashed_password = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      req.profile.salt = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(user);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.addOrderToUserHistory = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> history = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  req.body.order.products.forEach(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    history.push(&#123;</span><br><span class=\"line\">      _id: item._id,</span><br><span class=\"line\">      name: item.name,</span><br><span class=\"line\">      description: item.description,</span><br><span class=\"line\">      category: item.category,</span><br><span class=\"line\">      quantity: item.count,</span><br><span class=\"line\">      transcation_id: req.body.order.transaction_id,</span><br><span class=\"line\">      amount: req.body.order.amount,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  User.findOneAndUpdate(</span><br><span class=\"line\">    &#123; <span class=\"attr\">_id</span>: req.profile._id &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">$push</span>: &#123; <span class=\"attr\">history</span>: history &#125; &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">new</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">    (error, data) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Could not update user purchase history&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.purchaseHistory = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Order.find(&#123; <span class=\"attr\">user</span>: req.profile._id &#125;)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;user&quot;</span>, <span class=\"string\">&quot;_id name&quot;</span>)</span><br><span class=\"line\">    .sort(<span class=\"string\">&quot;-created&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, orders</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(orders);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Front-End-4\"><a href=\"#Front-End-4\" class=\"headerlink\" title=\"Front End\"></a>Front End</h4><h5 id=\"src-AppRoutes-js-7\"><a href=\"#src-AppRoutes-js-7\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddCategory <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddCategory&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddProduct&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Shop <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Shop&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Product <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Product&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Cart <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Cart&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Orders <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/Orders&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Profile <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Profile&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/shop&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Shop</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/category&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddCategory /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/product&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/product/:productId&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Product</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/cart&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Cart</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/orders&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;Orders /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/profile/:userId&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;Profile /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-UserDashboard-js-2\"><a href=\"#src-core-UserDashboard-js-2\" class=\"headerlink\" title=\"./src/core/UserDashboard.js\"></a>./src/core/UserDashboard.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/UserDashboard.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getPurchaseHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiUser&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> moment <span class=\"keyword\">from</span> <span class=\"string\">&quot;moment&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UserDashboard</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [history, setHistory] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    user: &#123; _id, name, email, role &#125;,</span><br><span class=\"line\">  &#125; = isAuthenticated();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> token = isAuthenticated().token;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\">userId, token</span>) </span>&#123;</span><br><span class=\"line\">    getPurchaseHistory(userId, token).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setHistory(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    init(_id, token);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userLinks = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;User Links&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/cart&quot;</span>&gt;</span><br><span class=\"line\">            My Cart</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=&#123;<span class=\"string\">`/profile/<span class=\"subst\">$&#123;_id&#125;</span>`</span>&#125;&gt;</span><br><span class=\"line\">            Update Profile</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> userInfo = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;<span class=\"string\">`G&#x27;Day <span class=\"subst\">$&#123;name&#125;</span>!`</span>&#125;&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;name&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;email&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &#123;role === <span class=\"number\">1</span> ? <span class=\"string\">&quot;Admin&quot;</span> : <span class=\"string\">&quot;Registrred User&quot;</span>&#125;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> purchaseHistory = <span class=\"function\">(<span class=\"params\">history</span>) =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card mb-5&quot;</span>&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;card-header&quot;</span>&gt;Purchase history&lt;/div&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &#123;history.map(<span class=\"function\">(<span class=\"params\">h, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (</span><br><span class=\"line\">              &lt;div&gt;</span><br><span class=\"line\">                &lt;hr /&gt;</span><br><span class=\"line\">                &#123;h.products.map(<span class=\"function\">(<span class=\"params\">p, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">                    &lt;div key=&#123;i&#125;&gt;</span><br><span class=\"line\">                      &lt;h6&gt;Product name: &#123;p.name&#125;&lt;/h6&gt;</span><br><span class=\"line\">                      &lt;h6&gt;Product price: $&#123;p.price&#125;&lt;/h6&gt;</span><br><span class=\"line\">                      &lt;h6&gt;Purchased date: &#123;moment(h.updatedAt).fromNow()&#125;&lt;/h6&gt;</span><br><span class=\"line\">                    &lt;/div&gt;</span><br><span class=\"line\">                  );</span><br><span class=\"line\">                &#125;)&#125;</span><br><span class=\"line\">              &lt;/div&gt;</span><br><span class=\"line\">            );</span><br><span class=\"line\">          &#125;)&#125;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Dashboard Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;User Dashboard&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;&#123;userLinks()&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-9&quot;</span>&gt;</span><br><span class=\"line\">          &#123;userInfo()&#125;</span><br><span class=\"line\">          &#123;purchaseHistory(history)&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-user-Profile-js\"><a href=\"#src-user-Profile-js\" class=\"headerlink\" title=\"./src/user/Profile.js\"></a>./src/user/Profile.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/user/Profile.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams, Navigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; read, update, updateUser &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./apiUser&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Profile</span>(<span class=\"params\">&#123; match &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(&#123;</span><br><span class=\"line\">    name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    email: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    password: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    error: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    success: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; token &#125; = isAuthenticated();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; name, email, password, error, success &#125; = values;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; userId &#125; = useParams(); <span class=\"comment\">// v6 react-router-dom</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\">userId</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(userId);</span></span><br><span class=\"line\">    read(userId, token).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123; ...values, <span class=\"attr\">error</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setValues(&#123; ...values, <span class=\"attr\">name</span>: data.name, <span class=\"attr\">email</span>: data.email &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// init(match.params.userId); // v5 react-router-dom</span></span><br><span class=\"line\">    init(userId); <span class=\"comment\">// v6 react-router-dom</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleChange = <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    setValues(&#123; ...values, <span class=\"attr\">error</span>: <span class=\"literal\">false</span>, [name]: e.target.value &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">redirectUser</span>(<span class=\"params\">success</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (success) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/cart&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    update(userId, token, &#123; name, email, password &#125;).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        updateUser(data, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          setValues(&#123;</span><br><span class=\"line\">            ...values,</span><br><span class=\"line\">            name: data.name,</span><br><span class=\"line\">            email: data.email,</span><br><span class=\"line\">            success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">profileUpdate</span>(<span class=\"params\">name, email, password</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;form&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Name&lt;/label&gt;</span><br><span class=\"line\">          &lt;input</span><br><span class=\"line\">            type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">            onChange=&#123;handleChange(<span class=\"string\">&quot;name&quot;</span>)&#125;</span><br><span class=\"line\">            className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">            value=&#123;name&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Email&lt;/label&gt;</span><br><span class=\"line\">          &lt;input</span><br><span class=\"line\">            type=<span class=\"string\">&quot;email&quot;</span></span><br><span class=\"line\">            onChange=&#123;handleChange(<span class=\"string\">&quot;email&quot;</span>)&#125;</span><br><span class=\"line\">            className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">            value=&#123;email&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">          &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Password&lt;/label&gt;</span><br><span class=\"line\">          &lt;input</span><br><span class=\"line\">            type=<span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">            onChange=&#123;handleChange(<span class=\"string\">&quot;password&quot;</span>)&#125;</span><br><span class=\"line\">            className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">            value=&#123;password&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;button onClick=&#123;handSubmit&#125; className=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;</span><br><span class=\"line\">          Submit</span><br><span class=\"line\">        &lt;/button&gt;</span><br><span class=\"line\">      &lt;/form&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Profile&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Update your profile&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;mb-4&quot;</span>&gt;Profile Update&lt;/h2&gt;</span><br><span class=\"line\">      &#123;profileUpdate(name, email, password)&#125;</span><br><span class=\"line\">      &#123;redirectUser(success)&#125;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-user-apiUser-js\"><a href=\"#src-user-apiUser-js\" class=\"headerlink\" title=\"./src/user/apiUser.js\"></a>./src/user/apiUser.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/user/apiUser.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> read = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/user/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> update = <span class=\"function\">(<span class=\"params\">userId, token, user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/user/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;PUT&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: <span class=\"built_in\">JSON</span>.stringify(user),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> updateUser = <span class=\"function\">(<span class=\"params\">user, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">&quot;undefined&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;jwt&quot;</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> auth = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;jwt&quot;</span>));</span><br><span class=\"line\">      auth.user = user;</span><br><span class=\"line\">      <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;jwt&quot;</span>, <span class=\"built_in\">JSON</span>.stringify(auth));</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getPurchaseHistory = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/orders/by/user/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-Manage-Orders-and-Products\"><a href=\"#add-Manage-Orders-and-Products\" class=\"headerlink\" title=\"add Manage Orders and Products\"></a>add Manage Orders and Products</h3><h4 id=\"Back-End-4\"><a href=\"#Back-End-4\" class=\"headerlink\" title=\"Back End\"></a>Back End</h4><h5 id=\"controller-product-js-3\"><a href=\"#controller-product-js-3\" class=\"headerlink\" title=\"./controller/product.js\"></a>./controller/product.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./controller/product.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;formidable&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> _ = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;lodash&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Product = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../models/product&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; errorHandler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;../helpers/dbErrorHandler&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.productById = <span class=\"function\">(<span class=\"params\">req, res, next, id</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  Product.findById(id)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err || !product) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Product does not exist&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      req.product = product;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.read = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.product.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> res.json(req.product);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// check for all fieldd</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name, description, price, category, quantity, shipping &#125; = fields;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      !name ||</span><br><span class=\"line\">      !description ||</span><br><span class=\"line\">      !price ||</span><br><span class=\"line\">      !category ||</span><br><span class=\"line\">      !quantity ||</span><br><span class=\"line\">      !shipping</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;All field are required&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = <span class=\"keyword\">new</span> Product(fields);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"comment\">// console.log(&quot;product:&quot;, result);</span></span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.remove = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">  product.remove(<span class=\"function\">(<span class=\"params\">err, deletedProduct</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: errorHandler(err),</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">&quot;Product deleted successly&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.update = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">  form.keepExtensions = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Image could not be uploaded&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> product = req.product;</span><br><span class=\"line\">    <span class=\"comment\">// fields 蓋過 product</span></span><br><span class=\"line\">    product = _.extend(product, fields);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.photo) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (files.photo.size &gt; <span class=\"number\">200000</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Image should be less 200k in size&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// change files.photo.file to files.photo.filepath</span></span><br><span class=\"line\">      product.photo.data = fs.readFileSync(files.photo.filepath);</span><br><span class=\"line\">      product.photo.contentType = files.photo.mimetype;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    product.save(<span class=\"function\">(<span class=\"params\">err, result</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      result.photo = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">      res.json(result);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * sel/arrival</span></span><br><span class=\"line\"><span class=\"comment\"> * bye sell = /products?sortBy=sold&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * bye arrival = /products?sortBy=createdAt&amp;order=desc&amp;limit=4</span></span><br><span class=\"line\"><span class=\"comment\"> * if no parameter are sent, then all products are returned</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.list = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.query.order ? req.query.order : <span class=\"string\">&quot;asc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.query.sortBy ? req.query.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">isNaN</span>(limit)) limit = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find()</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>) <span class=\"comment\">// mapt to Category</span></span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * it will find the products based on the req product category</span></span><br><span class=\"line\"><span class=\"comment\"> * other products that has the same category, will be return</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listRelated = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.query.limit ? <span class=\"built_in\">parseInt</span>(req.query.limit) : <span class=\"number\">6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// $ne: not include</span></span><br><span class=\"line\">  Product.find(&#123; <span class=\"attr\">_id</span>: &#123; <span class=\"attr\">$ne</span>: req.product &#125;, <span class=\"attr\">category</span>: req.product.category &#125;)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>, <span class=\"string\">&quot;_id name&quot;</span>)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;Products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listCategories = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// distinct : 取出不同的 category</span></span><br><span class=\"line\">  <span class=\"comment\">// &#123;&#125; : 2nd parameter doesn&#x27;t need do no send value</span></span><br><span class=\"line\">  Product.distinct(<span class=\"string\">&quot;category&quot;</span>, &#123;&#125;, <span class=\"function\">(<span class=\"params\">err, categories</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Categories not found&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    res.json(categories);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * list products by search</span></span><br><span class=\"line\"><span class=\"comment\"> * we will implement product search in react frontend</span></span><br><span class=\"line\"><span class=\"comment\"> * we will show categories in checkbox and price range in radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * as the user clicks on those checkbox and radio buttons</span></span><br><span class=\"line\"><span class=\"comment\"> * we will make api request and show the products to users based on what he wants</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;skip&quot; : &quot;1&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">//  &quot;limit&quot; : &quot;2&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">// \t&quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// \t\t&quot;name&quot;: &quot;Note&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// \t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// &gt;=2 and &lt;=19</span></span><br><span class=\"line\"><span class=\"comment\">//  &#123;</span></span><br><span class=\"line\"><span class=\"comment\">// &quot;filters&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   &quot;price&quot;: [&quot;2&quot;, &quot;19&quot;]</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listBySearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> order = req.body.order ? req.body.order : <span class=\"string\">&quot;desc&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sortBy = req.body.sortBy ? req.body.sortBy : <span class=\"string\">&quot;_id&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> limit = req.body.limit ? <span class=\"built_in\">parseInt</span>(req.body.limit) : <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> skip = req.body.skip ? <span class=\"built_in\">parseInt</span>(req.body.skip) : <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> findArgs = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// console.log(order, sortBy, limit, skip, req.body.filters);</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(req.body);</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> req.body.filters) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.body.filters[key].length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key === <span class=\"string\">&quot;price&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// gte - great than price</span></span><br><span class=\"line\">        <span class=\"comment\">// lte - less than</span></span><br><span class=\"line\">        findArgs[key] = &#123;</span><br><span class=\"line\">          $gte: req.body.filters[key][<span class=\"number\">0</span>],</span><br><span class=\"line\">          $lte: req.body.filters[key][<span class=\"number\">1</span>],</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// findArgs[key] = new RegExp(req.body.filters[key]);</span></span><br><span class=\"line\">        findArgs[key] = req.body.filters[key];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;findArgs&quot;, findArgs);</span></span><br><span class=\"line\"></span><br><span class=\"line\">  Product.find(findArgs)</span><br><span class=\"line\">    .select(<span class=\"string\">&quot;-photo&quot;</span>)</span><br><span class=\"line\">    .populate(<span class=\"string\">&quot;category&quot;</span>)</span><br><span class=\"line\">    .sort([[sortBy, order]])</span><br><span class=\"line\">    .skip(skip)</span><br><span class=\"line\">    .limit(limit)</span><br><span class=\"line\">    .exec(<span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: <span class=\"string\">&quot;products not found&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(&#123;</span><br><span class=\"line\">        size: data.length,</span><br><span class=\"line\">        data,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.photo = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.product.photo.data) &#123;</span><br><span class=\"line\">    res.set(<span class=\"string\">&quot;Content-Type&quot;</span>, req.product.photo.contentType);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.send(req.product.photo.data);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.listSearch = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// create query object to hole search value and category value</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// assign search value to query name</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (req.query.search) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mongodb regular expression</span></span><br><span class=\"line\">    query.name = &#123; <span class=\"attr\">$regex</span>: req.query.search, <span class=\"attr\">$options</span>: <span class=\"string\">&quot;i&quot;</span> &#125;;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(query.name);</span><br><span class=\"line\">    <span class=\"comment\">// assign category value to query.category</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.query.category &amp;&amp; req.query.category != <span class=\"string\">&quot;All&quot;</span>) &#123;</span><br><span class=\"line\">      query.category = req.query.category;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// find the product base on query object with 2 properties</span></span><br><span class=\"line\">    <span class=\"comment\">// search and category</span></span><br><span class=\"line\">    Product.find(query, <span class=\"function\">(<span class=\"params\">err, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">          error: errorHandler(err),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      res.json(products);</span><br><span class=\"line\">    &#125;).select(<span class=\"string\">&quot;-photo&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.descreaseQuantity = <span class=\"function\">(<span class=\"params\">req, res, next</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> bulkOps = req.body.order.products.map(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      updateOne: &#123;</span><br><span class=\"line\">        filter: &#123; <span class=\"attr\">_id</span>: item._id &#125;,</span><br><span class=\"line\">        update: &#123; <span class=\"attr\">$inc</span>: &#123; <span class=\"attr\">quantity</span>: -item.count, <span class=\"attr\">sold</span>: +item.count &#125; &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  Product.bulkWrite(bulkOps, &#123;&#125;, <span class=\"function\">(<span class=\"params\">error, products</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">        error: <span class=\"string\">&quot;Could not update product&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    next();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Front-End-5\"><a href=\"#Front-End-5\" class=\"headerlink\" title=\"Front End\"></a>Front End</h4><h5 id=\"src-AppRoutes-js-8\"><a href=\"#src-AppRoutes-js-8\" class=\"headerlink\" title=\"./src/AppRoutes.js\"></a>./src/AppRoutes.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/AppRoutes.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter, Routes, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Home&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signup <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Signup&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Signin <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Singin&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/UserDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminDashboard <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/AdminDashboard&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/UserAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AdminRequireAuth <span class=\"keyword\">from</span> <span class=\"string\">&quot;./auth/AdminAuth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddCategory <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddCategory&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> AddProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/AddProduct&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Shop <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Shop&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Product <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Product&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Cart <span class=\"keyword\">from</span> <span class=\"string\">&quot;./core/Cart&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Orders <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/Orders&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Profile <span class=\"keyword\">from</span> <span class=\"string\">&quot;./user/Profile&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ManageProducts <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/ManageProducts&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UpdateProduct <span class=\"keyword\">from</span> <span class=\"string\">&quot;./admin/UpdateProduct&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRoutes</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;APP render...&quot;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BrowserRouter&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* react-router-dom v6</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t   1. &quot;Switch&quot; is replaced by routes &quot;Routes&quot;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t 2. component put to element */</span>&#125;</span><br><span class=\"line\">        &lt;Routes&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/shop&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Shop</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signup&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signup</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/signin&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Signin</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/user/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;UserDashboard /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/dashboard&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AdminDashboard /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/category&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddCategory /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/create/product&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;AddProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/product/:productId&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Product</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route path=<span class=\"string\">&quot;/cart&quot;</span> element=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Cart</span> /&gt;</span></span>&#125; /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/orders&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;Orders /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/profile/:userId&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;Profile /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/products&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;UserRequireAuth&gt;</span><br><span class=\"line\">                &lt;ManageProducts /&gt;</span><br><span class=\"line\">              &lt;/UserRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">          &lt;Route</span><br><span class=\"line\">            path=<span class=\"string\">&quot;/admin/product/update/:productId&quot;</span></span><br><span class=\"line\">            element=&#123;</span><br><span class=\"line\">              &lt;AdminRequireAuth&gt;</span><br><span class=\"line\">                &lt;UpdateProduct /&gt;</span><br><span class=\"line\">              &lt;/AdminRequireAuth&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/Routes&gt;</span><br><span class=\"line\">      &lt;/BrowserRouter&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-core-AdminDashboard-js-1\"><a href=\"#src-core-AdminDashboard-js-1\" class=\"headerlink\" title=\"./src/core/AdminDashboard.js\"></a>./src/core/AdminDashboard.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/core/AdminDashboard.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AdmintDashboard</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    user: &#123; name, email, role &#125;,</span><br><span class=\"line\">  &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> adminLinks = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;Admin Links&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/create/category&quot;</span>&gt;</span><br><span class=\"line\">            Create Category</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/create/product&quot;</span>&gt;</span><br><span class=\"line\">            Create Product</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/admin/orders&quot;</span>&gt;</span><br><span class=\"line\">            View Orders</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;Link className=<span class=\"string\">&quot;nav-link&quot;</span> to=<span class=\"string\">&quot;/admin/products&quot;</span>&gt;</span><br><span class=\"line\">            Manage Products</span><br><span class=\"line\">          &lt;/Link&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; 使用 arrow 函數,可省略 return</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> adminInfo = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">&quot;card&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h3 className=<span class=\"string\">&quot;card-header&quot;</span>&gt;&#123;<span class=\"string\">`G&#x27;Day <span class=\"subst\">$&#123;name&#125;</span>!`</span>&#125;&lt;/h3&gt;</span><br><span class=\"line\">      &lt;ul className=<span class=\"string\">&quot;list-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;name&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;&#123;email&#125;&lt;/li&gt;</span><br><span class=\"line\">        &lt;li className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &#123;role === <span class=\"number\">1</span> ? <span class=\"string\">&quot;Admin&quot;</span> : <span class=\"string\">&quot;Registrred User&quot;</span>&#125;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Dashboard Page&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Admin Dashboard&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &#123;<span class=\"comment\">/* ***---&gt;&gt;&gt; 使用 arrow 函數,可省略 return */</span>&#125;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;&#123;adminLinks()&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-9&quot;</span>&gt;&#123;adminInfo()&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-ApiAdmin-js-2\"><a href=\"#src-admin-ApiAdmin-js-2\" class=\"headerlink\" title=\"./src/admin/ApiAdmin.js\"></a>./src/admin/ApiAdmin.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ./src/admin/ApiAdmin.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; API &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../config&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createCategory = <span class=\"function\">(<span class=\"params\">userId, token, category</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; call API function 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/category/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: <span class=\"built_in\">JSON</span>.stringify(category),</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(data);</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;signup err:&quot;</span>, err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createProduct = <span class=\"function\">(<span class=\"params\">userId, token, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ***---&gt;&gt;&gt; call API function 要加 return 才能 then 處理</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/create/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      method: <span class=\"string\">&quot;POST&quot;</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      body: product,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      <span class=\"comment\">// json format body 傳回要加 .json()</span></span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> response.json())</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/categories`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> listOrders = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/order/list/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getStatusValues = <span class=\"function\">(<span class=\"params\">userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/order/status-values/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> updateOrderStatus = <span class=\"function\">(<span class=\"params\">userId, token, orderId, status</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/order/<span class=\"subst\">$&#123;orderId&#125;</span>/status/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;PUT&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: <span class=\"built_in\">JSON</span>.stringify(&#123; status, orderId &#125;),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProducts = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/products?limit=undefined`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> deleteProduct = <span class=\"function\">(<span class=\"params\">productId, userId, token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/<span class=\"subst\">$&#123;productId&#125;</span>/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;DELETE&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getProduct = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/<span class=\"subst\">$&#123;productId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;GET&quot;</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> updateProduct = <span class=\"function\">(<span class=\"params\">productId, userId, token, product</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(productId, userId, token, product);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`<span class=\"subst\">$&#123;API&#125;</span>/product/<span class=\"subst\">$&#123;productId&#125;</span>/<span class=\"subst\">$&#123;userId&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    method: <span class=\"string\">&quot;PUT&quot;</span>,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      Accept: <span class=\"string\">&quot;application/json&quot;</span>,</span><br><span class=\"line\">      Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: product,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.json();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">error</span>: <span class=\"string\">&quot;Server not response&quot;</span> &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-ManageProducts-js\"><a href=\"#src-admin-ManageProducts-js\" class=\"headerlink\" title=\"./src/admin/ManageProducts.js\"></a>./src/admin/ManageProducts.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  ./src/admin/ManageProducts.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getProducts, deleteProduct &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ApiAdmin&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ManageProducts</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [products, setProducts] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, token &#125; = isAuthenticated();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadProducts</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    getProducts().then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data.log);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setProducts(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">destroy</span>(<span class=\"params\">productId</span>) </span>&#123;</span><br><span class=\"line\">    deleteProduct(productId, user._id, token).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data.error);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        loadProducts();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loadProducts();</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Manage Products&quot;</span></span><br><span class=\"line\">      description=<span class=\"string\">&quot;Perform CRUD on products&quot;</span></span><br><span class=\"line\">      className=<span class=\"string\">&quot;container-fluid&quot;</span></span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;h2 className=<span class=\"string\">&quot;text-center&quot;</span>&gt;Total &#123;products.length&#125; products&lt;/h2&gt;</span><br><span class=\"line\">      &lt;hr /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;products.map(<span class=\"function\">(<span class=\"params\">p, i</span>) =&gt;</span> (</span><br><span class=\"line\">        &lt;li key=&#123;i&#125; className=<span class=\"string\">&quot;list-group-item&quot;</span>&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">            &lt;div className=<span class=\"string\">&quot;col-6&quot;</span>&gt;</span><br><span class=\"line\">              &lt;strong&gt;&#123;p.name&#125;&lt;/strong&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">            &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;</span><br><span class=\"line\">              &lt;Link to=&#123;<span class=\"string\">`/admin/product/update/<span class=\"subst\">$&#123;p._id&#125;</span>`</span>&#125;&gt;</span><br><span class=\"line\">                &lt;span className=<span class=\"string\">&quot;badge badge-warning badge-pill&quot;</span>&gt;Update&lt;/span&gt;</span><br><span class=\"line\">              &lt;/Link&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">            &lt;div className=<span class=\"string\">&quot;col-3&quot;</span>&gt;</span><br><span class=\"line\">              &lt;span</span><br><span class=\"line\">                onClick=&#123;<span class=\"function\">() =&gt;</span> destroy(p._id)&#125;</span><br><span class=\"line\">                className=<span class=\"string\">&quot;badge badge-danger badge-pill&quot;</span></span><br><span class=\"line\">              &gt;</span><br><span class=\"line\">                Delete</span><br><span class=\"line\">              &lt;/span&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/li&gt;</span><br><span class=\"line\">      ))&#125;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"src-admin-UpdateProduct-js\"><a href=\"#src-admin-UpdateProduct-js\" class=\"headerlink\" title=\"./src/admin/UpdateProduct.js\"></a>./src/admin/UpdateProduct.js</h5><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  ./src/admin/UpdateProduct.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useParams, Navigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Layout <span class=\"keyword\">from</span> <span class=\"string\">&quot;../core/Layout&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; isAuthenticated &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../auth&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getProduct, getCategories, updateProduct &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ApiAdmin&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">UpdateProduct</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(&#123;</span><br><span class=\"line\">    name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    description: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    price: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    shipping: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    quantity: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    photo: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    createdProduct: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    redirectToProfile: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    formData: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [categories, setCategories] = useState([]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// destructure user and token from localStorage</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, token &#125; = isAuthenticated();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; productId &#125; = useParams();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    description,</span><br><span class=\"line\">    price,</span><br><span class=\"line\">    quantity,</span><br><span class=\"line\">    loading,</span><br><span class=\"line\">    error,</span><br><span class=\"line\">    createdProduct,</span><br><span class=\"line\">    redirectToProfile,</span><br><span class=\"line\">    formData,</span><br><span class=\"line\">  &#125; = values;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> init = <span class=\"function\">(<span class=\"params\">productId</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    getProduct(productId).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123; ...values, <span class=\"attr\">error</span>: data.error &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// populate the state</span></span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          name: data.name,</span><br><span class=\"line\">          description: data.description,</span><br><span class=\"line\">          price: data.price,</span><br><span class=\"line\">          category: data.category._id,</span><br><span class=\"line\">          shipping: data.shipping,</span><br><span class=\"line\">          quantity: data.quantity,</span><br><span class=\"line\">          formData: <span class=\"keyword\">new</span> FormData(),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">// load categories</span></span><br><span class=\"line\">        initCategories();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// load categories and set from data.error</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> initCategories = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    getCategories().then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setCategories(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    init(productId);</span><br><span class=\"line\">    <span class=\"comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> name = e.target.name;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = name === <span class=\"string\">&quot;photo&quot;</span> ? e.target.files[<span class=\"number\">0</span>] : e.target.value;</span><br><span class=\"line\">    <span class=\"comment\">// set formData&#x27;s velue</span></span><br><span class=\"line\">    formData.set(name, value);</span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      [e.target.name]: value,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleSubmit</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">    setValues(&#123;</span><br><span class=\"line\">      ...values,</span><br><span class=\"line\">      error: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      loading: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ***---&gt;&gt;&gt; call API function 要加 return 才能 then 處理</span></span><br><span class=\"line\">    updateProduct(productId, user._id, token, formData).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.error) &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          error: data.error,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        setValues(&#123;</span><br><span class=\"line\">          ...values,</span><br><span class=\"line\">          name: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          description: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          price: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          quantity: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          photo: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">          loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          redirectToProfile: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          createdProduct: data.name,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// // 使用此種寫法不用加 &#123;&#125; and retuen</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> newProductForm = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;form onSubmit=&#123;handleSubmit&#125; className=<span class=\"string\">&quot;mb-3&quot;</span>&gt;</span><br><span class=\"line\">      &lt;h4&gt;Post Photo&lt;/h4&gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;btn btn-secondary&quot;</span>&gt;</span><br><span class=\"line\">          &lt;input</span><br><span class=\"line\">            id=<span class=\"string\">&quot;photo_uploades&quot;</span></span><br><span class=\"line\">            onChange=&#123;handleChange&#125;</span><br><span class=\"line\">            name=<span class=\"string\">&quot;photo&quot;</span></span><br><span class=\"line\">            type=<span class=\"string\">&quot;file&quot;</span></span><br><span class=\"line\">            accepr=<span class=\"string\">&quot;image/*&quot;</span></span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        &lt;/label&gt;</span><br><span class=\"line\">        &lt;br /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Name&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;name&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;name&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Description&lt;/label&gt;</span><br><span class=\"line\">        &lt;textarea</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;description&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;description&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Price&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;price&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;text&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;price&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Category&lt;/label&gt;</span><br><span class=\"line\">        &lt;select</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;category&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          &lt;option&gt;Please select&lt;/option&gt;</span><br><span class=\"line\">          &#123;categories &amp;&amp;</span><br><span class=\"line\">            categories.map(<span class=\"function\">(<span class=\"params\">c, i</span>) =&gt;</span> (</span><br><span class=\"line\">              &lt;option key=&#123;i&#125; value=&#123;c._id&#125;&gt;</span><br><span class=\"line\">                &#123;c.name&#125;</span><br><span class=\"line\">              &lt;/option&gt;</span><br><span class=\"line\">            ))&#125;</span><br><span class=\"line\">        &lt;/select&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Shipping&lt;/label&gt;</span><br><span class=\"line\">        &lt;select</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;shipping&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          &lt;option&gt;Please select&lt;/option&gt;</span><br><span class=\"line\">          &lt;option value=<span class=\"string\">&quot;0&quot;</span>&gt;No&lt;/option&gt;</span><br><span class=\"line\">          &lt;option value=<span class=\"string\">&quot;1&quot;</span>&gt;Yes&lt;/option&gt;</span><br><span class=\"line\">        &lt;/select&gt;</span><br><span class=\"line\">        &lt;label className=<span class=\"string\">&quot;text-muted&quot;</span>&gt;Quantity&lt;/label&gt;</span><br><span class=\"line\">        &lt;input</span><br><span class=\"line\">          onChange=&#123;handleChange&#125;</span><br><span class=\"line\">          name=<span class=\"string\">&quot;quantity&quot;</span></span><br><span class=\"line\">          type=<span class=\"string\">&quot;number&quot;</span></span><br><span class=\"line\">          className=<span class=\"string\">&quot;form-control&quot;</span></span><br><span class=\"line\">          value=&#123;quantity&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;button className=<span class=\"string\">&quot;btn btn-outline-primary&quot;</span>&gt;Update Product&lt;/button&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showError = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-danger&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: error ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &#123;error&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showSuccess = <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      className=<span class=\"string\">&quot;alert alert-info&quot;</span></span><br><span class=\"line\">      style=&#123;&#123; <span class=\"attr\">display</span>: createdProduct ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;none&quot;</span> &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;h2&gt;&#123;<span class=\"string\">`<span class=\"subst\">$&#123;createdProduct&#125;</span>`</span>&#125; is updated!&lt;/h2&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> showLoading = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    loading &amp;&amp; (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;alert alert-success&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h2&gt;Loading...&lt;/h2&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> redirectUser = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (redirectToProfile) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!error) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Layout</span><br><span class=\"line\">      title=<span class=\"string\">&quot;Update the product&quot;</span></span><br><span class=\"line\">      description=&#123;<span class=\"string\">`G&#x27;day <span class=\"subst\">$&#123;user.name&#125;</span>, ready update the product?`</span>&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;col-md-8 offset-md-2&quot;</span>&gt;</span><br><span class=\"line\">          &#123;showLoading()&#125;</span><br><span class=\"line\">          &#123;showSuccess()&#125;</span><br><span class=\"line\">          &#123;showError()&#125;</span><br><span class=\"line\">          &#123;newProductForm()&#125;</span><br><span class=\"line\">          &#123;redirectUser()&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Layout&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofilling-form-controls%3A-the-autocomplete-attribute\">Autofilling form controls: the autocomplete attribute</a></li>\n</ul>\n","categories":["Project"],"tags":["react"]},{"title":"Practice React Ecommerce - Deployment","url":"/2021/12/13/practice-1-3/","content":"<h3 id=\"prepare-source-for-deployment\"><a href=\"#prepare-source-for-deployment\" class=\"headerlink\" title=\"prepare source for deployment\"></a>prepare source for deployment</h3><h4 id=\"ecommerce-front-add-server-js\"><a href=\"#ecommerce-front-add-server-js\" class=\"headerlink\" title=\"ecommerce front add server.js\"></a>ecommerce front add server.js</h4><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> compression = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;compression&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"> </span><br><span class=\"line\">app.use(compression());</span><br><span class=\"line\">app.use(express.static(path.join(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)));</span><br><span class=\"line\"> </span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;*&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.sendFile(path.join(__dirname, <span class=\"string\">&#x27;build&#x27;</span>, <span class=\"string\">&#x27;index.html&#x27;</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> PORT = process.env.PORT || <span class=\"number\">3000</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">app.listen(PORT, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`App is running on port <span class=\"subst\">$&#123;PORT&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"update-ecommerce-front-to-github\"><a href=\"#update-ecommerce-front-to-github\" class=\"headerlink\" title=\"update ecommerce-front to github\"></a>update ecommerce-front to github</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># github create repository ecommerce-front  </span></span><br><span class=\"line\">project\\ecommerce\\ecommerce-front&gt;git init</span><br><span class=\"line\">project\\ecommerce\\express&gt;git add .</span><br><span class=\"line\">project\\ecommerce\\express&gt;git commit -m <span class=\"string\">&quot;push to github&quot;</span></span><br><span class=\"line\">git remote add origin https://github.com/hot5656/ecommence-front.git</span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\"><span class=\"comment\"># set repository to private(if need) </span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"update-ecommerce-to-github\"><a href=\"#update-ecommerce-to-github\" class=\"headerlink\" title=\"update ecommerce to github\"></a>update ecommerce to github</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># github create repository ecommerce</span></span><br><span class=\"line\">project\\ecommerce\\express&gt;git init</span><br><span class=\"line\">project\\ecommerce\\express&gt;git add .</span><br><span class=\"line\">project\\ecommerce\\express&gt;git commit -m <span class=\"string\">&quot;push to github&quot;</span></span><br><span class=\"line\">git remote add origin https://github.com/hot5656/ecommence.git</span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\"><span class=\"comment\"># set repository to private(if need) </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Deploy-to-DigitalOcean\"><a href=\"#Deploy-to-DigitalOcean\" class=\"headerlink\" title=\"Deploy to DigitalOcean\"></a>Deploy to DigitalOcean</h3><h4 id=\"Create-Droplet\"><a href=\"#Create-Droplet\" class=\"headerlink\" title=\"Create Droplet\"></a>Create Droplet</h4><div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic31.png\" class=\"\" title=\"pic31\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic32.png\" class=\"\" title=\"pic32\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic33.png\" class=\"\" title=\"pic33\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic34.png\" class=\"\" title=\"pic34\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic35.png\" class=\"\" title=\"pic35\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic36.png\" class=\"\" title=\"pic36\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic37.png\" class=\"\" title=\"pic37\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic38.png\" class=\"\" title=\"pic38\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic39.png\" class=\"\" title=\"pic39\">\n</div>\n\n\n<h4 id=\"login-to-Droplet\"><a href=\"#login-to-Droplet\" class=\"headerlink\" title=\"login to Droplet\"></a>login to Droplet</h4><div style=\"max-width:500px\">\n    <img src=\"/2021/12/13/practice-1-3/pic40.png\" class=\"\" title=\"pic40\">\n</div>\n<div style=\"max-width:500px\">\n    <img src=\"/2021/12/13/practice-1-3/pic41.png\" class=\"\" title=\"pic41\">\n</div>\n<div style=\"max-width:700px\">\n    <img src=\"/2021/12/13/practice-1-3/pic42.png\" class=\"\" title=\"pic42\">\n</div>\n\n<h4 id=\"add-new-user-and-set-to-sudo-user\"><a href=\"#add-new-user-and-set-to-sudo-user\" class=\"headerlink\" title=\"add new user and set to sudo user\"></a>add new user and set to sudo user</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># after login to server </span></span><br><span class=\"line\"><span class=\"comment\"># add user </span></span><br><span class=\"line\">adduser ecomadmin</span><br><span class=\"line\"><span class=\"comment\"># add ecomadmin to sudo user </span></span><br><span class=\"line\">sudo adduser ecomadmin sudo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># after login by ecomadmin</span></span><br><span class=\"line\"><span class=\"comment\"># disable root login</span></span><br><span class=\"line\">sudo vim /etc/ssh/sshd_config</span><br><span class=\"line\"><span class=\"comment\"># PermitRootLogin yes --&gt; no </span></span><br><span class=\"line\">sudo service ssh restart</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-nodejs\"><a href=\"#install-nodejs\" class=\"headerlink\" title=\"install nodejs\"></a>install nodejs</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install nodejs by linux default version (not use this)</span></span><br><span class=\"line\"><span class=\"comment\"># sudo apt update</span></span><br><span class=\"line\"><span class=\"comment\"># sudo apt install nodejs</span></span><br><span class=\"line\"><span class=\"comment\"># node -v</span></span><br><span class=\"line\"><span class=\"comment\"># sudo apt remove nodejs</span></span><br><span class=\"line\"><span class=\"comment\"># install nodejs latest version(now is 16)</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">curl -sL https://deb.nodesource.com/setup_16.x -o nodesource_setup.sh</span><br><span class=\"line\"><span class=\"comment\"># check nodesource_setup.sh load already</span></span><br><span class=\"line\">ls nodesource_setup.sh</span><br><span class=\"line\"><span class=\"comment\"># run nodesource_setup.sh</span></span><br><span class=\"line\">sudo bash nodesource_setup.sh</span><br><span class=\"line\"><span class=\"comment\"># install nodejs</span></span><br><span class=\"line\">sudo apt install nodejs</span><br><span class=\"line\"><span class=\"comment\"># found as below ..</span></span><br><span class=\"line\"><span class=\"comment\">## Run `sudo apt-get install -y nodejs` to install Node.js 16.x and npm</span></span><br><span class=\"line\">sudo apt-get install -y nodejs</span><br><span class=\"line\"><span class=\"comment\"># check version</span></span><br><span class=\"line\">node -v</span><br><span class=\"line\">\tv16.13.1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-nginx\"><a href=\"#install-nginx\" class=\"headerlink\" title=\"install nginx\"></a>install nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install nginx</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /etc/nginx/sites-available</span><br><span class=\"line\">ls</span><br><span class=\"line\">\tdefault</span><br><span class=\"line\"><span class=\"comment\"># how to run node in digitalocean</span></span><br><span class=\"line\">sudo vim default</span><br><span class=\"line\"><span class=\"comment\"># location /api &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#   proxy_set_header X-Real-IP $remote_addr;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_set_header X-NginX-Proxy true;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_pass http://localhost:8000;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_set_header Host $http_host;</span></span><br><span class=\"line\"><span class=\"comment\">#   p proxy_cache_bypass $http_upgrade;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_redirect off;</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># location / &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#   proxy_set_header X-Real-IP $remote_addr;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_set_header X-NginX-Proxy true;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_pass http://localhost:3000;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_set_header Host $http_host;</span></span><br><span class=\"line\"><span class=\"comment\">#   p proxy_cache_bypass $http_upgrade;</span></span><br><span class=\"line\"><span class=\"comment\">#   pproxy_redirect off;</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># test nginx </span></span><br><span class=\"line\">sudo nginx -t</span><br><span class=\"line\">\tnginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class=\"line\">\tnginx: configuration file /etc/nginx/nginx.conf <span class=\"built_in\">test</span> is successful</span><br><span class=\"line\">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"clone-sources\"><a href=\"#clone-sources\" class=\"headerlink\" title=\"clone sources\"></a>clone sources</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">mkdir project</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/hot5656/ecommence-front.git</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/hot5656/ecommence.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ecommence</span><br><span class=\"line\">sudo touch .env</span><br><span class=\"line\">sudo vim .env</span><br><span class=\"line\"><span class=\"comment\"># set ecommence .env</span></span><br><span class=\"line\">PORT=8000</span><br><span class=\"line\">DATABASE=mongodb://127.0.0.1:27017/ecommerce</span><br><span class=\"line\">JWT_SECRET=...</span><br><span class=\"line\">BRAINTREE_MERCHANT_ID=...</span><br><span class=\"line\">BRAINTREE_PUBLIC_KEY=...</span><br><span class=\"line\">BRAINTREE_PRIVATE_KEY=...</span><br><span class=\"line\">BRAINTREE_MERCHANT_ACCOUNT_ID=...</span><br><span class=\"line\"><span class=\"comment\"># cd to ecommence-front</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ../ecommence-front</span><br><span class=\"line\">sudo touch .env</span><br><span class=\"line\">sudo vim .env</span><br><span class=\"line\"><span class=\"comment\"># set ecommence-front .env</span></span><br><span class=\"line\">REACT_APP_API_URL=/api</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-mongoDB\"><a href=\"#install-mongoDB\" class=\"headerlink\" title=\"install mongoDB\"></a>install mongoDB</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install mongodb in digitalocean</span></span><br><span class=\"line\">curl -fsSL https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add -</span><br><span class=\"line\">apt-key list</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.4 multiverse&quot;</span> | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list</span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install mongodb-org</span><br><span class=\"line\">sudo systemctl start mongod.service</span><br><span class=\"line\">sudo systemctl status mongod</span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> mongod</span><br><span class=\"line\">mongo --<span class=\"built_in\">eval</span> <span class=\"string\">&#x27;db.runCommand(&#123; connectionStatus: 1 &#125;)&#x27;</span></span><br><span class=\"line\">\tMongoDB shell version v4.4.10</span><br><span class=\"line\">\tconnecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb</span><br><span class=\"line\">\tImplicit session: session &#123; <span class=\"string\">&quot;id&quot;</span> : UUID(<span class=\"string\">&quot;d69b3786-0246-494e-a573-6a0726ebf2d6&quot;</span>) &#125;</span><br><span class=\"line\">\tMongoDB server version: 4.4.10</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&quot;authInfo&quot;</span> : &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"string\">&quot;authenticatedUsers&quot;</span> : [ ],</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"string\">&quot;authenticatedUserRoles&quot;</span> : [ ]</span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">&quot;ok&quot;</span> : 1</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"><span class=\"comment\"># check momgodb </span></span><br><span class=\"line\">mongo</span><br><span class=\"line\">&gt; show dbs</span><br><span class=\"line\">  admin   0.000GB</span><br><span class=\"line\">  config  0.000GB</span><br><span class=\"line\">  <span class=\"built_in\">local</span>   0.000GB</span><br><span class=\"line\">&gt; use ecommerce</span><br><span class=\"line\">  switched to db ecommerce</span><br><span class=\"line\">&gt; <span class=\"built_in\">exit</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"install-and-run-pm2\"><a href=\"#install-and-run-pm2\" class=\"headerlink\" title=\"install and run pm2\"></a>install and run pm2</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install pm2</span></span><br><span class=\"line\">npm i pm2 g</span><br><span class=\"line\">sudo npm i -g pm2</span><br><span class=\"line\"><span class=\"comment\"># run ecommence (backend end)</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/project/ecommence</span><br><span class=\"line\">npm install</span><br><span class=\"line\">pm2 start app.js</span><br><span class=\"line\"><span class=\"comment\"># run browser - check it&#x27;s working --&gt; response []</span></span><br><span class=\"line\">http://xx.xx.xx.202/api/products</span><br><span class=\"line\"><span class=\"comment\"># run ecommence-front (front end) </span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ../ecommence-front</span><br><span class=\"line\">npm install</span><br><span class=\"line\"><span class=\"comment\"># build react</span></span><br><span class=\"line\">npm run build</span><br><span class=\"line\">pm2 start server.js</span><br><span class=\"line\"><span class=\"comment\"># run browser - verify it&#x27;s working</span></span><br><span class=\"line\">http://xx.xx.xx.202/</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"set-user-role-1-admin\"><a href=\"#set-user-role-1-admin\" class=\"headerlink\" title=\"set user role = 1 (admin)\"></a>set user role = 1 (admin)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># add user key1@gmail.com from ecommerce front</span></span><br><span class=\"line\">mongo</span><br><span class=\"line\">&gt; show dbs</span><br><span class=\"line\">    admin      0.000GB</span><br><span class=\"line\">    config     0.000GB</span><br><span class=\"line\">    ecommerce  0.000GB</span><br><span class=\"line\">    <span class=\"built_in\">local</span>      0.000GB</span><br><span class=\"line\">&gt; use ecommerce</span><br><span class=\"line\">    switched to db ecommerce</span><br><span class=\"line\">&gt; show collections</span><br><span class=\"line\">    cartitems</span><br><span class=\"line\">    categories</span><br><span class=\"line\">    orders</span><br><span class=\"line\">    products</span><br><span class=\"line\">    users</span><br><span class=\"line\">&gt; db.users.find().pretty();</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span> : ObjectId(<span class=\"string\">&quot;61b9fb27ab69c8a07dd86b2d&quot;</span>),</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;key1&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;email&quot;</span> : <span class=\"string\">&quot;key1@gmail.com&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;hashed_password&quot;</span> : <span class=\"string\">&quot;da975a7c93e9abf2a4d24729372865afbc6bc3a3&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;salt&quot;</span> : <span class=\"string\">&quot;094ec890-5db3-11ec-920a-cf7ca48b09d9&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;role&quot;</span> : 0,</span><br><span class=\"line\">            <span class=\"string\">&quot;history&quot;</span> : [ ],</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span> : ISODate(<span class=\"string\">&quot;2021-12-15T14:26:47.837Z&quot;</span>),</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span> : ISODate(<span class=\"string\">&quot;2021-12-15T14:26:47.837Z&quot;</span>),</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span> : 0</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&gt; db.users.update(&#123;_id: ObjectId(<span class=\"string\">&quot;61b9fb27ab69c8a07dd86b2d&quot;</span>)&#125; , &#123;<span class=\"variable\">$set</span>: &#123;role:1&#125;&#125;);</span><br><span class=\"line\">    WriteResult(&#123; <span class=\"string\">&quot;nMatched&quot;</span> : 1, <span class=\"string\">&quot;nUpserted&quot;</span> : 0, <span class=\"string\">&quot;nModified&quot;</span> : 1 &#125;)</span><br><span class=\"line\">&gt; db.users.find().pretty();</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;_id&quot;</span> : ObjectId(<span class=\"string\">&quot;61b9fb27ab69c8a07dd86b2d&quot;</span>),</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span> : <span class=\"string\">&quot;key1&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;email&quot;</span> : <span class=\"string\">&quot;key1@gmail.com&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;hashed_password&quot;</span> : <span class=\"string\">&quot;da975a7c93e9abf2a4d24729372865afbc6bc3a3&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;salt&quot;</span> : <span class=\"string\">&quot;094ec890-5db3-11ec-920a-cf7ca48b09d9&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;role&quot;</span> : 1,</span><br><span class=\"line\">            <span class=\"string\">&quot;history&quot;</span> : [ ],</span><br><span class=\"line\">            <span class=\"string\">&quot;createdAt&quot;</span> : ISODate(<span class=\"string\">&quot;2021-12-15T14:26:47.837Z&quot;</span>),</span><br><span class=\"line\">            <span class=\"string\">&quot;updatedAt&quot;</span> : ISODate(<span class=\"string\">&quot;2021-12-15T14:26:47.837Z&quot;</span>),</span><br><span class=\"line\">            <span class=\"string\">&quot;__v&quot;</span> : 0</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&gt; <span class=\"built_in\">exit</span></span><br><span class=\"line\">    <span class=\"built_in\">bye</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"update-code\"><a href=\"#update-code\" class=\"headerlink\" title=\"update code\"></a>update code</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git status</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;update home title&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"update-web-site-from-git\"><a href=\"#update-web-site-from-git\" class=\"headerlink\" title=\"update web site from git\"></a>update web site from git</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo git pull</span><br><span class=\"line\"><span class=\"comment\"># rebuild react (react)</span></span><br><span class=\"line\">npm run build</span><br><span class=\"line\">pm2 delete server</span><br><span class=\"line\">pm2 start server.js</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"pm2-command\"><a href=\"#pm2-command\" class=\"headerlink\" title=\"pm2 command\"></a>pm2 command</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># list process</span></span><br><span class=\"line\">pm2 list </span><br><span class=\"line\"><span class=\"comment\"># show logs</span></span><br><span class=\"line\">pm2 logs</span><br><span class=\"line\"><span class=\"comment\"># show logs for id</span></span><br><span class=\"line\">pm2 logs 0 </span><br><span class=\"line\"><span class=\"comment\"># clear logs</span></span><br><span class=\"line\">pm2 flush</span><br><span class=\"line\"><span class=\"comment\"># pm2 start </span></span><br><span class=\"line\">pm2 start server.js</span><br><span class=\"line\"><span class=\"comment\"># pm2 stop </span></span><br><span class=\"line\">pm2 stop 4</span><br><span class=\"line\"><span class=\"comment\"># pl2 restart</span></span><br><span class=\"line\">pm2 restart 4</span><br><span class=\"line\"><span class=\"comment\"># pm2 delete</span></span><br><span class=\"line\">pm2 delete server</span><br><span class=\"line\">pm2 delete 4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Set-SSL-by-Cloudflare\"><a href=\"#Set-SSL-by-Cloudflare\" class=\"headerlink\" title=\"Set SSL by Cloudflare\"></a>Set SSL by Cloudflare</h4><div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic11.png\" class=\"\" title=\"pic11\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic12.png\" class=\"\" title=\"pic12\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic13.png\" class=\"\" title=\"pic13\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic14.png\" class=\"\" title=\"pic14\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic15.png\" class=\"\" title=\"pic15\">\n</div>\n\n<p>Change DNS at domain register </p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic16.png\" class=\"\" title=\"pic16\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic17.png\" class=\"\" title=\"pic17\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic18.png\" class=\"\" title=\"pic18\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic19.png\" class=\"\" title=\"pic19\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic20.png\" class=\"\" title=\"pic20\">\n</div>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic21.png\" class=\"\" title=\"pic21\">\n</div>\n\n<p>Wait some hours then it&apos;s woking</p>\n<div style=\"max-width:1000px\">\n    <img src=\"/2021/12/13/practice-1-3/pic22.png\" class=\"\" title=\"pic22\">\n</div>\n\n\n<h3 id=\"Send-email-by-sendgrid\"><a href=\"#Send-email-by-sendgrid\" class=\"headerlink\" title=\"Send email by sendgrid\"></a>Send email by sendgrid</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># install</span></span><br><span class=\"line\">npm i @sendgrid/mail</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// controllers/order.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// require on top</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sgMail = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;@sendgrid/mail&#x27;</span>);</span><br><span class=\"line\">sgMail.setApiKey(<span class=\"string\">&#x27;SG.pUkng3dsa2NQdsfsdseUXSMdo9gvo7g.-mksH0CTsdfs02l7egWVyP2R3KxmVEy7YpC62dsffrb3xG8CFEHv4Z-4&#x27;</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// your create order method with email capabilities</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.create = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;CREATE ORDER: &#x27;</span>, req.body);</span><br><span class=\"line\">    req.body.order.user = req.profile;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> order = <span class=\"keyword\">new</span> Order(req.body.order);</span><br><span class=\"line\">    order.save(<span class=\"function\">(<span class=\"params\">error, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> res.status(<span class=\"number\">400</span>).json(&#123;</span><br><span class=\"line\">                error: errorHandler(error)</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// User.find(&#123; categories: &#123; $in: categories &#125; &#125;).exec((err, users) =&gt; &#123;&#125;</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ORDER IS JUST SAVED &gt;&gt;&gt; &#x27;</span>, order);</span><br><span class=\"line\">        <span class=\"comment\">// send email alert to admin</span></span><br><span class=\"line\">        <span class=\"comment\">// order.address</span></span><br><span class=\"line\">        <span class=\"comment\">// order.products.length</span></span><br><span class=\"line\">        <span class=\"comment\">// order.amount</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> emailData = &#123;</span><br><span class=\"line\">            to: <span class=\"string\">&#x27;kaloraat@gmail.com&#x27;</span>, <span class=\"comment\">// admin</span></span><br><span class=\"line\">            <span class=\"keyword\">from</span>: <span class=\"string\">&#x27;noreply@ecommerce.com&#x27;</span>,</span><br><span class=\"line\">            subject: <span class=\"string\">`A new order is received`</span>,</span><br><span class=\"line\">            html: <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h1&gt;Hey Admin, Somebody just made a purchase in your ecommerce store&lt;/h1&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Customer name: <span class=\"subst\">$&#123;order.user.name&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Customer address: <span class=\"subst\">$&#123;order.address&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;User&#x27;s purchase history: <span class=\"subst\">$&#123;order.user.history.length&#125;</span> purchase&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;User&#x27;s email: <span class=\"subst\">$&#123;order.user.email&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Total products: <span class=\"subst\">$&#123;order.products.length&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Transaction ID: <span class=\"subst\">$&#123;order.transaction_id&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Order status: <span class=\"subst\">$&#123;order.status&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Product details:&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;hr /&gt;</span></span><br><span class=\"line\"><span class=\"string\">            <span class=\"subst\">$&#123;order.products</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                .map(p =&gt; &#123;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                    <span class=\"keyword\">return</span> <span class=\"string\">`&lt;div&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                        &lt;h3&gt;Product Name: <span class=\"subst\">$&#123;p.name&#125;</span>&lt;/h3&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                        &lt;h3&gt;Product Price: <span class=\"subst\">$&#123;p.price&#125;</span>&lt;/h3&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                        &lt;h3&gt;Product Quantity: <span class=\"subst\">$&#123;p.count&#125;</span>&lt;/h3&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                &lt;/div&gt;`</span>;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                &#125;)</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                .join(<span class=\"string\">&#x27;--------------------&#x27;</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Total order cost: <span class=\"subst\">$&#123;order.amount&#125;</span>&lt;h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;p&gt;Login to your dashboard&lt;/a&gt; to see the order in detail.&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"string\">        `</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        sgMail</span><br><span class=\"line\">            .send(emailData)</span><br><span class=\"line\">            .then(<span class=\"function\"><span class=\"params\">sent</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;SENT &gt;&gt;&gt;&#x27;</span>, sent))</span><br><span class=\"line\">            .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ERR &gt;&gt;&gt;&#x27;</span>, err));</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"comment\">// email to buyer</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> emailData2 = &#123;</span><br><span class=\"line\">            to: order.user.email,</span><br><span class=\"line\">            <span class=\"keyword\">from</span>: <span class=\"string\">&#x27;noreply@ecommerce.com&#x27;</span>,</span><br><span class=\"line\">            subject: <span class=\"string\">`You order is in process`</span>,</span><br><span class=\"line\">            html: <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h1&gt;Hey <span class=\"subst\">$&#123;req.profile.name&#125;</span>, Thank you for shopping with us.&lt;/h1&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Total products: <span class=\"subst\">$&#123;order.products.length&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Transaction ID: <span class=\"subst\">$&#123;order.transaction_id&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Order status: <span class=\"subst\">$&#123;order.status&#125;</span>&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Product details:&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;hr /&gt;</span></span><br><span class=\"line\"><span class=\"string\">            <span class=\"subst\">$&#123;order.products</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                .map(p =&gt; &#123;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                    <span class=\"keyword\">return</span> <span class=\"string\">`&lt;div&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                        &lt;h3&gt;Product Name: <span class=\"subst\">$&#123;p.name&#125;</span>&lt;/h3&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                        &lt;h3&gt;Product Price: <span class=\"subst\">$&#123;p.price&#125;</span>&lt;/h3&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                        &lt;h3&gt;Product Quantity: <span class=\"subst\">$&#123;p.count&#125;</span>&lt;/h3&gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">                &lt;/div&gt;`</span>;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                &#125;)</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">                .join(<span class=\"string\">&#x27;--------------------&#x27;</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">            &lt;h2&gt;Total order cost: <span class=\"subst\">$&#123;order.amount&#125;</span>&lt;h2&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;p&gt;Thank your for shopping with us.&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"string\">        `</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        sgMail</span><br><span class=\"line\">            .send(emailData2)</span><br><span class=\"line\">            .then(<span class=\"function\"><span class=\"params\">sent</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;SENT 2 &gt;&gt;&gt;&#x27;</span>, sent))</span><br><span class=\"line\">            .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ERR 2 &gt;&gt;&gt;&#x27;</span>, err));</span><br><span class=\"line\"> </span><br><span class=\"line\">        res.json(data);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h3><ul>\n<li><a href=\"https://tn710617.github.io/zh-tw/pm2/\">pm2 - 用法大全</a></li>\n<li><a href=\"https://www.cloudflare.com/zh-tw/\">CloudFlare</a> : suport SSL …</li>\n<li><a href=\"https://sendgrid.com/\">SendGrid</a> : send mail</li>\n<li><a href=\"https://www.sendinblue.com/\">Sendinblue</a> : send mail</li>\n</ul>\n","categories":["Project"],"tags":["deployment"]}]