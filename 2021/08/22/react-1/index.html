<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hot5656.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"},"path":"/search.json","localsearch":{"enable":"enable","trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="名詞web component : Web Components is a suite of different technologies allowing you to create reusable custom elementsJSX : 是一個 JavaScript 的語法擴充, 允許我們在 JS 的檔案中使用 HTML 的標籤Virtual DOM :Reconciliation : 找">
<meta property="og:type" content="article">
<meta property="og:title" content="React">
<meta property="og:url" content="https://hot5656.github.io/2021/08/22/react-1/index.html">
<meta property="og:site_name" content="Robert 雜記">
<meta property="og:description" content="名詞web component : Web Components is a suite of different technologies allowing you to create reusable custom elementsJSX : 是一個 JavaScript 的語法擴充, 允許我們在 JS 的檔案中使用 HTML 的標籤Virtual DOM :Reconciliation : 找">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2021-08-22T08:05:45.000Z">
<meta property="article:modified_time" content="2021-12-22T14:09:14.413Z">
<meta property="article:author" content="Robert Kao">
<meta property="article:tag" content="react">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hot5656.github.io/2021/08/22/react-1/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>
<title>React | Robert 雜記</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Robert 雜記</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔列表</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8D%E8%A9%9E"><span class="nav-number">1.</span> <span class="nav-text">名詞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8-list"><span class="nav-number">2.</span> <span class="nav-text">常用 list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#todolist-simulate"><span class="nav-number">3.</span> <span class="nav-text">todolist simulate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A4%8E"><span class="nav-number">4.</span> <span class="nav-text">基礎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85"><span class="nav-number">4.1.</span> <span class="nav-text">注意事項</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#install-and-start"><span class="nav-number">4.2.</span> <span class="nav-text">install and start</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Strict-Mode-and-measuring-performance"><span class="nav-number">4.3.</span> <span class="nav-text">Strict Mode and measuring performance</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#export-and-export-default"><span class="nav-number">4.4.</span> <span class="nav-text">export and export default</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1st-React-include-Inline-styling"><span class="nav-number">4.5.</span> <span class="nav-text">1st React - include Inline styling</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#styled-components"><span class="nav-number">4.6.</span> <span class="nav-text">styled components</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#install"><span class="nav-number">4.6.1.</span> <span class="nav-text">install</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-1"><span class="nav-number">4.6.2.</span> <span class="nav-text">Example 1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-2"><span class="nav-number">4.6.3.</span> <span class="nav-text">Example 2</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-3"><span class="nav-number">4.6.4.</span> <span class="nav-text">Example 3</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#index-js"><span class="nav-number">4.6.4.1.</span> <span class="nav-text">index.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#App-js"><span class="nav-number">4.6.4.2.</span> <span class="nav-text">App.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#constants-style-js"><span class="nav-number">4.6.4.3.</span> <span class="nav-text">.&#x2F;constants&#x2F;style.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#TodoItem-js"><span class="nav-number">4.6.4.4.</span> <span class="nav-text">TodoItem.js</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-4-%E5%B0%8D%E5%8E%9F%E6%9C%AC%E5%AD%98%E5%9C%A8-function-%E5%86%8D%E5%81%9A-re-styled"><span class="nav-number">4.6.5.</span> <span class="nav-text">Example 4 - 對原本存在 function,再做 re-styled</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSX-to-react-by-Babel-example"><span class="nav-number">4.7.</span> <span class="nav-text">JSX to react by Babel example</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#State"><span class="nav-number">4.8.</span> <span class="nav-text">State</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#example-1"><span class="nav-number">4.8.1.</span> <span class="nav-text">example 1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#example-2-%E5%A4%9A%E6%AC%84%E4%BD%8D"><span class="nav-number">4.8.2.</span> <span class="nav-text">example 2 - 多欄位</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#example-3-todos"><span class="nav-number">4.8.3.</span> <span class="nav-text">example 3 - todos</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#example-4-todos-add-item"><span class="nav-number">4.8.4.</span> <span class="nav-text">example 4 - todos add item</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#App-js-1"><span class="nav-number">4.8.4.1.</span> <span class="nav-text">App.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#TodoItem-js-1"><span class="nav-number">4.8.4.2.</span> <span class="nav-text">TodoItem.js</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#example-5-todos-delete"><span class="nav-number">4.8.5.</span> <span class="nav-text">example 5 - todos delete</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#App-js-2"><span class="nav-number">4.8.5.1.</span> <span class="nav-text">App.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#TodoItem-js-2"><span class="nav-number">4.8.5.2.</span> <span class="nav-text">TodoItem.js</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#example-6-todos-change-state"><span class="nav-number">4.8.6.</span> <span class="nav-text">example 6 - todos change state</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#App-js-3"><span class="nav-number">4.8.6.1.</span> <span class="nav-text">App.js</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#TodoItem-js-3"><span class="nav-number">4.8.6.2.</span> <span class="nav-text">TodoItem.js</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useEffect"><span class="nav-number">4.9.</span> <span class="nav-text">useEffect</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#exampl-1-add-useEffect"><span class="nav-number">4.9.1.</span> <span class="nav-text">exampl 1 - add useEffect</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#exampl-2-run-useEffect-when-todos-change"><span class="nav-number">4.9.2.</span> <span class="nav-text">exampl 2 - run useEffect when todos change</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#exampl-3-run-useEffect-1st-render"><span class="nav-number">4.9.3.</span> <span class="nav-text">exampl 3 - run useEffect 1st render</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#exampl-4-set-local-storage-to-init-todos"><span class="nav-number">4.9.4.</span> <span class="nav-text">exampl 4 -  set local storage to init todos</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#exampl-5-clear-up-LayoutEffects"><span class="nav-number">4.9.5.</span> <span class="nav-text">exampl 5 -  clear up LayoutEffects</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%B9%E5%AF%AB%E6%88%90%E8%87%AA%E5%B7%B1%E7%9A%84-hook"><span class="nav-number">4.10.</span> <span class="nav-text">改寫成自己的 hook</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#App-js-4"><span class="nav-number">4.10.1.</span> <span class="nav-text">App.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#useInput-js"><span class="nav-number">4.10.2.</span> <span class="nav-text">useInput.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#useTodos-js"><span class="nav-number">4.10.3.</span> <span class="nav-text">useTodos.js</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#memo-useMemo-useCallback"><span class="nav-number">4.11.</span> <span class="nav-text">memo, useMemo, useCallback</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lazy-initializer-useState-%E5%8A%A0-function-%E5%83%85%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%9F%B7%E8%A1%8C"><span class="nav-number">4.12.</span> <span class="nav-text">lazy initializer - useState() 加 function 僅第一次執行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useLayoutEffect"><span class="nav-number">4.13.</span> <span class="nav-text">useLayoutEffect</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#exampl-1"><span class="nav-number">4.13.1.</span> <span class="nav-text">exampl 1</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#class-component"><span class="nav-number">4.14.</span> <span class="nav-text">class component</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#example-1-1"><span class="nav-number">4.14.1.</span> <span class="nav-text">example 1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#example-2-class-component-lifeCycle-%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F"><span class="nav-number">4.14.2.</span> <span class="nav-text">example 2 - class component lifeCycle 生命週期</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useContext"><span class="nav-number">4.15.</span> <span class="nav-text">useContext</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#prop-Drilling-%E8%B3%87%E6%96%99%E8%B7%A8%E5%A4%9A%E5%B1%A4%E5%82%B3%E9%80%81"><span class="nav-number">4.15.1.</span> <span class="nav-text">prop Drilling : 資料跨多層傳送</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#useContext-example-1"><span class="nav-number">4.15.2.</span> <span class="nav-text">useContext example 1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#useContext-example-2"><span class="nav-number">4.15.3.</span> <span class="nav-text">useContext example 2</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#propTypes-%E9%A9%97%E8%AD%89-props"><span class="nav-number">4.16.</span> <span class="nav-text">propTypes 驗證 props</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#deployment"><span class="nav-number">4.17.</span> <span class="nav-text">deployment</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#local"><span class="nav-number">4.17.1.</span> <span class="nav-text">local</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#deploy-to-github"><span class="nav-number">4.17.2.</span> <span class="nav-text">deploy to github</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#add-scripts-and-homepage"><span class="nav-number">4.17.2.1.</span> <span class="nav-text">add scripts and homepage</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#insatll-gh-pages"><span class="nav-number">4.17.2.2.</span> <span class="nav-text">insatll gh-pages</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#github-add-repository-react-comments-test2"><span class="nav-number">4.17.2.3.</span> <span class="nav-text">github add repository - react-comments-test2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#deploy-to-github-1"><span class="nav-number">4.17.2.4.</span> <span class="nav-text">deploy to github</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#open-by-browser"><span class="nav-number">4.17.2.5.</span> <span class="nav-text">open by browser</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#react-router"><span class="nav-number">4.18.</span> <span class="nav-text">react router</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#install-1"><span class="nav-number">4.18.1.</span> <span class="nav-text">install</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#useParams"><span class="nav-number">4.18.2.</span> <span class="nav-text">useParams</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#useHistory-useLocation"><span class="nav-number">4.18.3.</span> <span class="nav-text">useHistory, useLocation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#example-1-2"><span class="nav-number">4.18.4.</span> <span class="nav-text">example #1</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#component-App"><span class="nav-number">4.18.4.1.</span> <span class="nav-text">.&#x2F;component&#x2F;App</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#component-Header"><span class="nav-number">4.18.4.2.</span> <span class="nav-text">.&#x2F;component&#x2F;Header</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Pages-HomePage"><span class="nav-number">4.18.4.3.</span> <span class="nav-text">.&#x2F;Pages&#x2F;HomePage</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Pages-LoginPage"><span class="nav-number">4.18.4.4.</span> <span class="nav-text">.&#x2F;Pages&#x2F;LoginPage</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#react-event"><span class="nav-number">4.19.</span> <span class="nav-text">react event</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#prettier-ESLint"><span class="nav-number">5.</span> <span class="nav-text">prettier ESLint</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#create-react-app-default-include-ESLint-configuration"><span class="nav-number">5.1.</span> <span class="nav-text">create-react-app default include ESLint configuration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vscode-ESlint-configuration-ESLint"><span class="nav-number">5.2.</span> <span class="nav-text">vscode ESlint configuration - ESLint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prettier-Prettier-Code-formatter-Prettier"><span class="nav-number">5.3.</span> <span class="nav-text">prettier - Prettier - Code formatter (Prettier)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%AC%E8%A9%A6"><span class="nav-number">6.</span> <span class="nav-text">測試</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#react-testing-library-%E6%B8%AC%E8%A9%A6-React-component"><span class="nav-number">6.1.</span> <span class="nav-text">react-testing-library : 測試 React component</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cypress-end-ot-end-test"><span class="nav-number">6.2.</span> <span class="nav-text">Cypress : end ot end test</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Developer-Tools"><span class="nav-number">7.</span> <span class="nav-text">Developer Tools</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99"><span class="nav-number">8.</span> <span class="nav-text">參考資料</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Robert Kao"
      src="/images/head.png">
  <p class="site-author-name" itemprop="name">Robert Kao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">91</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://hot5656.github.io/2021/08/22/react-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.png">
      <meta itemprop="name" content="Robert Kao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Robert 雜記">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          React
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2021-08-22 16:05:45" itemprop="dateCreated datePublished" datetime="2021-08-22T16:05:45+08:00">2021-08-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-12-22 22:09:14" itemprop="dateModified" datetime="2021-12-22T22:09:14+08:00">2021-12-22</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Framework/" itemprop="url" rel="index"><span itemprop="name">Framework</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/08/22/react-1/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/08/22/react-1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>74k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>1:07</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h3 id="名詞"><a href="#名詞" class="headerlink" title="名詞"></a>名詞</h3><p>web component : Web Components is a suite of different technologies allowing you to create reusable custom elements<br>JSX : 是一個 JavaScript 的語法擴充, 允許我們在 JS 的檔案中使用 HTML 的標籤<br>Virtual DOM :<br>Reconciliation : 找出哪些樹節點哪些需要變化<br>Immutability : 不可變性<br>Mutation : 修改<br>JSON Web Token (JWT) : 用來在 身份提供者 和 服務提供者 間傳遞被 認證 的用戶身份訊息，以便於從資源伺服器獲取資源</p>
<span id="more"></span>

<h3 id="常用-list"><a href="#常用-list" class="headerlink" title="常用 list"></a>常用 list</h3><ul>
<li>useState : react 使用的 state, 更動後就會 re-render</li>
<li>useEffect : 可控制 render 後要做什麼</li>
<li>useLayoutEffect :  可控制 render 前要做什麼</li>
<li>useRef : 近似於 useState,但更動後不會 re-render</li>
<li>memo : 把 component 包起來, 雖然 parents rerender 但本身未改變就不 rerender</li>
<li>useMemo : 把 data 記起來,未改變就不產生新的</li>
<li>useCallback : 把 function 記起來,未改變就不產生新的</li>
<li>useContext : 資料跨多層傳送</li>
<li>react router : 處理網頁的 route</li>
<li>useParams : 取得網頁的資訊</li>
<li>useHistory : 控制網頁跳頁</li>
<li>styled components : 方便輸入 css</li>
<li>ThemeProvider : set for theme</li>
<li>Link : 近似於 a tag</li>
<li>useLocation : 取得 path name</li>
<li>Fragment : 一個 component 讓你一次 render 多個 element 而不需要額外的 wrapper</li>
<li>useReducer : 可執行 dispatch</li>
</ul>
<h3 id="todolist-simulate"><a href="#todolist-simulate" class="headerlink" title="todolist simulate"></a>todolist simulate</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">integrity</span>=<span class="string">&quot;sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- ====== change todo and button to component ====== --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- ====== add data dump ====== --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- ====== render by data chang ====== --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container mt-2&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card mx-auto&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 30rem;&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Simple Todo list<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-2&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn-dump btn btn-primary&quot;</span>&gt;</span>Dump<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-group mb-3&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;input-todo form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;你想要新增的事項&quot;</span>&quot; <span class="attr">aria-label</span>=<span class="string">&quot; Recipient&#x27;s username&quot;</span></span></span><br><span class="line"><span class="tag">						<span class="attr">aria-describedby</span>=<span class="string">&quot;button-addon2&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn-create btn btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;button-addon2&quot;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;todos list-group&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.5.1.slim.min.js&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">integrity</span>=<span class="string">&quot;sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">let</span> id = <span class="number">0</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">let</span> state = &#123;</span></span><br><span class="line">			todos: []</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">		$(<span class="string">&#x27;.btn-create&#x27;</span>).click(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">const</span> content = $(<span class="string">&#x27;.input-todo&#x27;</span>).val()</span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (!content) <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript">			$(<span class="string">&#x27;.input-todo&#x27;</span>).val(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line">			state.todos.push(</span><br><span class="line">				&#123;</span><br><span class="line">					id,</span><br><span class="line">					content,</span><br><span class="line"><span class="javascript">					isDone: <span class="literal">false</span></span></span><br><span class="line">				&#125;</span><br><span class="line">			)</span><br><span class="line">			render()</span><br><span class="line">			id++</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"><span class="javascript">		$(<span class="string">&#x27;.btn-dump&#x27;</span>).click(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(state)</span></span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"><span class="javascript">		$(<span class="string">&#x27;.todos&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.btn-delete&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">const</span> id = <span class="built_in">Number</span>($(e.target).parents(<span class="string">&#x27;.todo&#x27;</span>).attr(<span class="string">&#x27;data-id&#x27;</span>))</span></span><br><span class="line"><span class="javascript">				state.todos = state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !==id)</span></span><br><span class="line">				render()</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"><span class="javascript">		$(<span class="string">&#x27;.todos&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.btn-undone&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">const</span> id = <span class="built_in">Number</span>($(e.target).parents(<span class="string">&#x27;.todo&#x27;</span>).attr(<span class="string">&#x27;data-id&#x27;</span>))</span></span><br><span class="line"><span class="javascript">			state.todos = state.todos.map(<span class="function"><span class="params">todo</span> =&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span> &#123;</span></span><br><span class="line">					...todo,</span><br><span class="line"><span class="javascript">					isDone: <span class="literal">true</span></span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">			render()</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"><span class="javascript">		$(<span class="string">&#x27;.todos&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.btn-done&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">const</span> id = <span class="built_in">Number</span>($(e.target).parents(<span class="string">&#x27;.todo&#x27;</span>).attr(<span class="string">&#x27;data-id&#x27;</span>))</span></span><br><span class="line"><span class="javascript">			state.todos = state.todos.map(<span class="function"><span class="params">todo</span> =&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span> &#123;</span></span><br><span class="line">					...todo,</span><br><span class="line"><span class="javascript">					isDone: <span class="literal">false</span></span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">			render()</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">Todo</span>(<span class="params">&#123;id, content, isDone&#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="string">`</span></span></span><br><span class="line"><span class="javascript">				&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;todo list-group-item d-flex justify-content-between align-items-center&quot;</span> data-id=<span class="string">&quot;$&#123;id&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>$&#123;content&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">						&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;control&quot;</span>&gt;</span></span><br><span class="line">							$&#123;Button(&#123;</span><br><span class="line"><span class="javascript">								className: isDone ? <span class="string">&#x27;btn-done btn-outline-success&#x27;</span> : <span class="string">&#x27;btn-undone btn-outline-secondary&#x27;</span>,</span></span><br><span class="line"><span class="javascript">								content: isDone ? <span class="string">&#x27;已完成&#x27;</span> : <span class="string">&#x27;未完成&#x27;</span></span></span><br><span class="line">							&#125;)&#125;</span><br><span class="line">							$&#123;Button(&#123;</span><br><span class="line"><span class="javascript">								className: <span class="string">&#x27;btn-delete btn btn-outline-danger&#x27;</span>,</span></span><br><span class="line"><span class="javascript">								content: <span class="string">&#x27;刪除&#x27;</span></span></span><br><span class="line">							&#125;)&#125;</span><br><span class="line"><span class="handlebars"><span class="xml">						<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">					<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span>		</span></span></span><br><span class="line">		`</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params">props</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="string">`</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn $&#123;props.className&#125;&quot;</span>&gt;</span>$&#123;props.content&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line">			`</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			$(<span class="string">&#x27;.todos&#x27;</span>).empty()</span></span><br><span class="line"><span class="javascript">			$(<span class="string">&#x27;.todos&#x27;</span>).append(</span></span><br><span class="line"><span class="javascript">				state.todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> Todo(todo))</span></span><br><span class="line">			)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="基礎"><a href="#基礎" class="headerlink" title="基礎"></a>基礎</h3><h4 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h4><ul>
<li>Component 的字首須為大寫字母 : 小寫字母開頭的組件視為原始 DOM 標籤 </li>
</ul>
<h4 id="install-and-start"><a href="#install-and-start" class="headerlink" title="install and start"></a>install and start</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install </span></span><br><span class="line">npx create-react-app my-app</span><br><span class="line"><span class="comment"># check versionm </span></span><br><span class="line">npx create-react-app -V</span><br><span class="line">	4.0.3</span><br><span class="line"><span class="comment"># run react</span></span><br><span class="line"><span class="built_in">cd</span> my-app</span><br><span class="line">npm start</span><br><span class="line"><span class="comment"># run --&gt; node node_modules/react-scripts/bin/react-scripts.js start</span></span><br></pre></td></tr></table></figure>

<h4 id="Strict-Mode-and-measuring-performance"><a href="#Strict-Mode-and-measuring-performance" class="headerlink" title="Strict Mode and measuring performance"></a>Strict Mode and measuring performance</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; StrictMode &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">&#x27;./reportWebVitals&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rootElement = <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">ReactDOM.render(</span><br><span class="line">	<span class="comment">// strict mode 可移除</span></span><br><span class="line">  &lt;StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/StrictMode&gt;,</span><br><span class="line">  rootElement</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// measuring performance</span></span><br><span class="line"><span class="comment">// If you want to start measuring performance in your app, pass a function</span></span><br><span class="line"><span class="comment">// to log results (for example: reportWebVitals(console.log))</span></span><br><span class="line"><span class="comment">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span></span><br><span class="line">reportWebVitals();</span><br></pre></td></tr></table></figure>

<h4 id="export-and-export-default"><a href="#export-and-export-default" class="headerlink" title="export and export default"></a>export and export default</h4><p>一個js只有一個回傳值,用export default, 有多個回傳值就用export </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./src/redux/reducers/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> todos <span class="keyword">from</span> <span class="string">&quot;./todos&quot;</span></span><br><span class="line"><span class="keyword">import</span> users <span class="keyword">from</span> <span class="string">&quot;./users&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</span><br><span class="line">	todoState: todos,	<span class="comment">//todos: todos </span></span><br><span class="line">	users,	<span class="comment">//users: users</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./src/redux/actionTypes.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO =  <span class="string">&quot;add_todo&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DELETE_TODO = <span class="string">&quot;delete_todo&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_USER = <span class="string">&quot;add_user&quot;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./src/redux/actions.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; ADD_TODO, DELETE_TODO, ADD_USER &#125; <span class="keyword">from</span> <span class="string">&quot;./actionTypes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// action creator</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: ADD_TODO,</span><br><span class="line">    payload: &#123;</span><br><span class="line">      name: name,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteTodo</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: DELETE_TODO,</span><br><span class="line">    payload: &#123;</span><br><span class="line">      id: id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addUser</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: ADD_USER,</span><br><span class="line">    payload: &#123;</span><br><span class="line">      name,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1st-React-include-Inline-styling"><a href="#1st-React-include-Inline-styling" class="headerlink" title="1st React - include Inline styling"></a>1st React - include Inline styling</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">	&lt;App /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="comment">// import css file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Creating a style object variable for Inline styling </span></span><br><span class="line"><span class="keyword">const</span> titleStyle = &#123;</span><br><span class="line">	color: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">	fontWeight: <span class="string">&#x27;bold&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Title</span>(<span class="params">&#123;size&#125;</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (size === <span class="string">&#x27;XL&#x27;</span>) &#123;</span><br><span class="line">		<span class="comment">// Creating a style object variable for Inline styling </span></span><br><span class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;titleStyle&#125;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// Inline styling</span></span><br><span class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="xml">			color: &#x27;blue&#x27;</span></span><br><span class="line"><span class="xml">		&#125;&#125;&gt;hello<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Description</span>(<span class="params">&#123;children&#125;</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		&lt;p&gt;</span><br><span class="line">			&#123;children&#125;</span><br><span class="line">		&lt;/p&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		<span class="comment">// class 改為 className</span></span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* add function  */</span>&#125;</span><br><span class="line">			&#123;<span class="comment">/* add parameter */</span>&#125;</span><br><span class="line">			&lt;Title size=<span class="string">&#x27;L&#x27;</span>&gt;&lt;/Title&gt;</span><br><span class="line">			&#123;<span class="comment">/* add some data to function, its name is children */</span>&#125;</span><br><span class="line">			&lt;Description&gt;</span><br><span class="line">				This is 1st react.</span><br><span class="line">				welcome to here.</span><br><span class="line">			&lt;/Description&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* App.css */</span></span><br><span class="line"><span class="selector-class">.App</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="styled-components"><a href="#styled-components" class="headerlink" title="styled components"></a>styled components</h4><h5 id="install"><a href="#install" class="headerlink" title="install"></a>install</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install styled-components</span><br></pre></td></tr></table></figure>

<h5 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h5><ul>
<li>styled-compoents 代替 function</li>
<li>可以包下一層, set hover</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="comment">// import css file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="comment">// import styled components</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Creating a style object variable for Inline styling </span></span><br><span class="line"><span class="keyword">const</span> titleStyle = &#123;</span><br><span class="line">	color: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">	fontWeight: <span class="string">&#x27;bold&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以包下一層, set hover</span></span><br><span class="line"><span class="keyword">const</span> TitleWrapper = styled.h2<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  color: blue;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  span &#123;</span></span><br><span class="line"><span class="string">    color: yellow;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Title</span>(<span class="params">&#123;size&#125;</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (size === <span class="string">&#x27;XL&#x27;</span>) &#123;</span><br><span class="line">		<span class="comment">// Creating a style object variable for Inline styling </span></span><br><span class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;titleStyle&#125;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// Inline styling</span></span><br><span class="line">		<span class="comment">// return &lt;h2 style=&#123;&#123;</span></span><br><span class="line">    <span class="comment">//    dislay: &#x27;flex&#x27;;</span></span><br><span class="line">    <span class="comment">//   color: &#x27;blue&#x27;,</span></span><br><span class="line">    <span class="comment">// &#125;&#125;&gt;hello&lt;/h2&gt;</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;TitleWrapper&gt;hello &lt;span&gt;yo&lt;<span class="regexp">/span&gt; &lt;/</span>TitleWrapper&gt;</span><br><span class="line">    )</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// styled components 代替 function </span></span><br><span class="line"><span class="keyword">const</span> Description = styled.p<span class="string">`</span></span><br><span class="line"><span class="string">  color: red;</span></span><br><span class="line"><span class="string">  padding: 20px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function Description(&#123;children&#125;) &#123;</span></span><br><span class="line"><span class="comment">// 	return (</span></span><br><span class="line"><span class="comment">// 		&lt;p&gt;</span></span><br><span class="line"><span class="comment">// 			&#123;children&#125;</span></span><br><span class="line"><span class="comment">// 		&lt;/p&gt;</span></span><br><span class="line"><span class="comment">// 	)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> titleSize = <span class="string">&#x27;M&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		<span class="comment">// class 改為 className</span></span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* add function  */</span>&#125;</span><br><span class="line">			&#123;<span class="comment">/* add parameter */</span>&#125;</span><br><span class="line">			&lt;Title size=&#123;titleSize&#125;&gt;&lt;/Title&gt;</span><br><span class="line">			&#123;<span class="comment">/* add some data to function, its name is children */</span>&#125;</span><br><span class="line">			&lt;Description&gt;</span><br><span class="line">				This is 1st react.</span><br><span class="line">				welcome to here.</span><br><span class="line">			&lt;/Description&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h5><ul>
<li>&amp; + &amp; (相連之 component)</li>
<li>傳入props</li>
<li>TodoItem 移出成為一個 component</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="comment">// import css file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoItemWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  align-items: center;</span></span><br><span class="line"><span class="string">  justify-content: space-between;</span></span><br><span class="line"><span class="string">  padding: 8px 16px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-top: 12px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoContent = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">	color: rgb(2,40,77);</span></span><br><span class="line"><span class="string">	// 可依傳入之 props 做不同設定</span></span><br><span class="line"><span class="string">  // font-size: <span class="subst">$&#123;props =&gt; props.size === <span class="string">&#x27;XL&#x27;</span> ? <span class="string">&#x27;20px&#x27;</span> : <span class="string">&#x27;12px&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="string">  font-size: 12px;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 可依傳入之 props 重新設定</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;props =&gt; props.size ===<span class="string">&#x27;XL&#x27;</span> &amp;&amp; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    font-size: 20px;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  `</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoButtonWrapper= styled.div<span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button = styled.button<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 4px;</span></span><br><span class="line"><span class="string">  color: black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 相連之 component</span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-left: 10px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoItem</span>(<span class="params">&#123; size, content&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;TodoItemWrapper&gt;</span><br><span class="line">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class="line">          &lt;Button&gt;刪除&lt;/Button&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* TodoItem 移出成為一個 component */</span>&#125;</span><br><span class="line">      &lt;TodoItem content=<span class="string">&quot;123&quot;</span>&gt;&lt;/TodoItem&gt;</span><br><span class="line">      &lt;TodoItem content=<span class="string">&quot;456&quot;</span> size=<span class="string">&quot;XL&quot;</span>&gt;&lt;/TodoItem&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function App() &#123;</span></span><br><span class="line"><span class="comment">//   return (</span></span><br><span class="line"><span class="comment">// 		&lt;div className=&quot;App&quot;&gt;</span></span><br><span class="line"><span class="comment">//       &lt;TodoItemWrapper&gt;</span></span><br><span class="line"><span class="comment">//         &lt;TodoContent size=&#x27;XL&#x27;&gt;I am todo&lt;/TodoContent&gt;</span></span><br><span class="line"><span class="comment">//         &lt;TodoButtonWrapper&gt;</span></span><br><span class="line"><span class="comment">//           &lt;Button&gt;已完成&lt;/Button&gt;</span></span><br><span class="line"><span class="comment">//           &lt;Button&gt;刪除&lt;/Button&gt;</span></span><br><span class="line"><span class="comment">//         &lt;/TodoButtonWrapper&gt;</span></span><br><span class="line"><span class="comment">//       &lt;/TodoItemWrapper&gt;</span></span><br><span class="line"><span class="comment">// 		&lt;/div&gt;</span></span><br><span class="line"><span class="comment">//   );</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="Example-3"><a href="#Example-3" class="headerlink" title="Example 3"></a>Example 3</h5><ul>
<li>media query  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$&#123;MEDIA_QUERY_MD&#125; &#123;</span><br><span class="line">	font-size: 16px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>re-styled  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 對原本存在 function,再做 re-styled</span></span><br><span class="line"><span class="keyword">const</span> BlackTodoItem = styled(TodoItem)<span class="string">`</span></span><br><span class="line"><span class="string">	background: black;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&lt;TodoItem content=<span class="string">&quot;123&quot;</span>/&gt;</span><br><span class="line">			&lt;TodoItem content=<span class="string">&quot;456&quot;</span> size=<span class="string">&quot;XL&quot;</span>/&gt;</span><br><span class="line">			&lt;BlackTodoItem content=<span class="string">&quot;456&quot;</span> size=<span class="string">&quot;XL&quot;</span>/&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>theme : 使用 ThemeProvider 內層可用 props 取用</li>
<li>TodoItem component 另存一個 file</li>
</ul>
<h6 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js </span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;ThemeProvider&#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> theme = &#123;</span><br><span class="line">	colors: &#123;</span><br><span class="line">		primary_300: <span class="string">&#x27;#ff7979&#x27;</span>,</span><br><span class="line">		primary_400: <span class="string">&#x27;#e33e3e&#x27;</span>,</span><br><span class="line">		primary_500: <span class="string">&#x27;#af0505&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">	<span class="comment">// theme傳入</span></span><br><span class="line">	&lt;ThemeProvider theme=&#123;theme&#125;&gt;</span><br><span class="line">		&lt;App /&gt;</span><br><span class="line">	&lt;/ThemeProvider&gt;</span><br><span class="line">	,</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h6 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="comment">// import css file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 對原本存在 function,再做 re-styled</span></span><br><span class="line"><span class="keyword">const</span> BlackTodoItem = styled(TodoItem)<span class="string">`</span></span><br><span class="line"><span class="string">  background: black;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;TodoItem content=<span class="string">&quot;123&quot;</span>/&gt;</span><br><span class="line">			&lt;TodoItem content=<span class="string">&quot;456&quot;</span> size=<span class="string">&quot;XL&quot;</span>/&gt;</span><br><span class="line">      &lt;BlackTodoItem content=<span class="string">&quot;456&quot;</span> size=<span class="string">&quot;XL&quot;</span>/&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h6 id="constants-style-js"><a href="#constants-style-js" class="headerlink" title="./constants/style.js"></a>./constants/style.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ./constants/style.js */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MEDIA_QUERY_MD = <span class="string">&#x27;@media screen and (min-width: 768px)&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MEDIA_QUERY_LG = <span class="string">&#x27;@media screen and (min-width: 1000px)&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="TodoItem-js"><a href="#TodoItem-js" class="headerlink" title="TodoItem.js"></a>TodoItem.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TodoItem.js</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class="keyword">from</span> <span class="string">&#x27;./constants/style&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoItemWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  align-items: center;</span></span><br><span class="line"><span class="string">  justify-content: space-between;</span></span><br><span class="line"><span class="string">  padding: 8px 16px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-top: 12px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoContent = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">// 取用 theme</span></span><br><span class="line"><span class="string">	color: <span class="subst">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">  font-size: <span class="subst">$&#123;props =&gt; props.size === <span class="string">&#x27;XL&#x27;</span> ? <span class="string">&#x27;20px&#x27;</span> : <span class="string">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoButtonWrapper= styled.div<span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button = styled.button<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 4px;</span></span><br><span class="line"><span class="string">  color: black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// ***** media change *****</span></span><br><span class="line"><span class="string">	// @media screen and (min-width: 768px) &#123;</span></span><br><span class="line"><span class="string">	// 	font-size: 16px;</span></span><br><span class="line"><span class="string">	// &#125;</span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 16px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 20px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 相連之 component</span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-left: 10px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 對原本存在styled-component,再做 re-styled</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RedButton = styled(Button)<span class="string">`</span></span><br><span class="line"><span class="string">  color: red;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for other import</span></span><br><span class="line"><span class="comment">// 因為 function re-style, 增加 class </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoItem</span>(<span class="params">&#123; className, size, content&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;TodoItemWrapper className=&#123;className&#125;&gt;</span><br><span class="line">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class="line">          &lt;RedButton&gt;刪除&lt;/RedButton&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Example-4-對原本存在-function-再做-re-styled"><a href="#Example-4-對原本存在-function-再做-re-styled" class="headerlink" title="Example 4 - 對原本存在 function,再做 re-styled"></a>Example 4 - 對原本存在 function,再做 re-styled</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Element = <span class="function">(<span class="params">&#123; red, className &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;className&#125;&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;element__img&quot;</span> /&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;element__info&quot;</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;element__title&quot;</span> skyblue&gt;</span><br><span class="line">          Cute Puppy</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;element__description&quot;</span>&gt;</span><br><span class="line">          Sed ut voluptatem neque cumque. Qui sed ut itaque est doloribus qui.</span><br><span class="line">          Eos perferendis autem qui fugiat.</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> StyledElement = styled(Element)<span class="string">`</span></span><br><span class="line"><span class="string">  width: 80%;</span></span><br><span class="line"><span class="string">  height: 300px;</span></span><br><span class="line"><span class="string">  box-shadow: 0 0 5px 2px #ccc;</span></span><br><span class="line"><span class="string">  .element__img &#123;</span></span><br><span class="line"><span class="string">    display: inline-block;</span></span><br><span class="line"><span class="string">    width: 300px;</span></span><br><span class="line"><span class="string">    height: 100%;</span></span><br><span class="line"><span class="string">    background-image: url(&#x27;this is background url&#x27;);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  .element__info &#123;</span></span><br><span class="line"><span class="string">    display: inline-block;</span></span><br><span class="line"><span class="string">    vertical-align: top;</span></span><br><span class="line"><span class="string">    width: calc(100% - 300px);</span></span><br><span class="line"><span class="string">    height: 100%;</span></span><br><span class="line"><span class="string">    text-align: left;</span></span><br><span class="line"><span class="string">    .element__title &#123;</span></span><br><span class="line"><span class="string">      padding: 20px 0 0 20px;</span></span><br><span class="line"><span class="string">      font-size: 48px;</span></span><br><span class="line"><span class="string">      color: <span class="subst">$&#123;props =&gt; (props.red ? <span class="string">&#x27;red&#x27;</span> : <span class="string">&#x27;black&#x27;</span>)&#125;</span>;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .element__description &#123;</span></span><br><span class="line"><span class="string">      padding: 20px;</span></span><br><span class="line"><span class="string">      font-size: 30px;</span></span><br><span class="line"><span class="string">      font-style: italic;</span></span><br><span class="line"><span class="string">      color: #888888;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> StyledElement</span><br></pre></td></tr></table></figure>

<h4 id="JSX-to-react-by-Babel-example"><a href="#JSX-to-react-by-Babel-example" class="headerlink" title="JSX to react by Babel example"></a>JSX to react by Babel example</h4><ul>
<li>JSX Prevents Injection Attacks</li>
<li>dangerouslySetInnerHTML</li>
<li>tag a run javascript: add encode URI<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">/* javascript:alert(1) */</span>&#125;</span><br><span class="line"> &#123;<span class="comment">/* &lt;a href=&#123;todo.content&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class="line"> &lt;a href=&#123;<span class="built_in">window</span>.encodeURIComponent(todo.content)&#125;&gt;click me&lt;/a&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button size=<span class="string">&quot;XL&quot;</span>&gt;hello!&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="comment">/*#__PURE__*/</span></span><br><span class="line">React.createElement(<span class="string">&quot;button&quot;</span>, &#123;</span><br><span class="line">  size: <span class="string">&quot;XL&quot;</span></span><br><span class="line">&#125;, <span class="string">&quot;hello!&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;button size=<span class="string">&quot;XL&quot;</span> onClick=&#123;<span class="function">()=&gt;</span> &#123;alert(<span class="number">1</span>)&#125; &#125;&gt;hello!&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="comment">/*#__PURE__*/</span></span><br><span class="line">React.createElement(<span class="string">&quot;button&quot;</span>, &#123;</span><br><span class="line">  size: <span class="string">&quot;XL&quot;</span>,</span><br><span class="line">  onClick: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="string">&quot;hello!&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;button size=<span class="string">&quot;XL&quot;</span> onClick=&#123;<span class="function">()=&gt;</span>&#123;alert(<span class="number">1</span>)&#125; &#125;&gt;<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="comment">/*#__PURE__*/</span></span><br><span class="line">React.createElement(<span class="string">&quot;button&quot;</span>, &#123;</span><br><span class="line">  size: <span class="string">&quot;XL&quot;</span>,</span><br><span class="line">  onClick: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="comment">/*#__PURE__*/</span>React.createElement(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;hello!&quot;</span>));</span><br></pre></td></tr></table></figure>

<h4 id="State"><a href="#State" class="headerlink" title="State"></a>State</h4><h5 id="example-1"><a href="#example-1" class="headerlink" title="example 1"></a>example 1</h5><ul>
<li>state init : const [counter, setCounter] = React.useState(0); </li>
<li>state ange : setCounter(counter + 1)</li>
<li>ui upadte : counter: {counter}</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="comment">// import css file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Hook &#125; <span class="keyword">from</span> <span class="string">&#x27;tapable&#x27;</span>;</span><br><span class="line"><span class="comment">// for State</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 對原本存在 function,再做 re-styled</span></span><br><span class="line"><span class="keyword">const</span> BlackTodoItem = styled(TodoItem)<span class="string">`</span></span><br><span class="line"><span class="string">  background: black;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Hook</span></span><br><span class="line"><span class="comment">// function comment</span></span><br><span class="line"><span class="comment">// class comment</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// for State</span></span><br><span class="line">	<span class="keyword">const</span> [counter, setCounter] = React.useState(<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;render&#x27;</span>, counter)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// function HandleButtonClick() &#123;&#125;</span></span><br><span class="line">	<span class="keyword">const</span> HandleButtonClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;button click&#x27;</span>)</span><br><span class="line">		setCounter(counter + <span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* for State */</span>&#125;</span><br><span class="line">			&lt;div&gt;counter: &#123;counter&#125;&lt;/div&gt;</span><br><span class="line">			&lt;button onClick=&#123;HandleButtonClick&#125;&gt;increment&lt;/button&gt;</span><br><span class="line">      &lt;TodoItem content=<span class="string">&quot;123&quot;</span>/&gt;</span><br><span class="line">			&lt;TodoItem content=<span class="string">&quot;456&quot;</span> size=<span class="string">&quot;XL&quot;</span>/&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="example-2-多欄位"><a href="#example-2-多欄位" class="headerlink" title="example 2 - 多欄位"></a>example 2 - 多欄位</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [fullName, setFullName] = useState(&#123;</span><br><span class="line">    fName: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    lName: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 利用 setState 傳回改變前值</span></span><br><span class="line">  <span class="comment">// function handleChange(e) &#123;</span></span><br><span class="line">  <span class="comment">//   const &#123; value, name &#125; = e.target;</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">//   // setState 可傳回改變前值</span></span><br><span class="line">  <span class="comment">//   setFullName((prevValue) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//     if (name === &quot;fName&quot;) &#123;</span></span><br><span class="line">  <span class="comment">//       return &#123;</span></span><br><span class="line">  <span class="comment">//         fName: value,</span></span><br><span class="line">  <span class="comment">//         lName: prevValue.lName</span></span><br><span class="line">  <span class="comment">//       &#125;;</span></span><br><span class="line">  <span class="comment">//     &#125; else if (name === &quot;lName&quot;) &#123;</span></span><br><span class="line">  <span class="comment">//       return &#123;</span></span><br><span class="line">  <span class="comment">//         fName: prevValue.fName,</span></span><br><span class="line">  <span class="comment">//         lName: value</span></span><br><span class="line">  <span class="comment">//       &#125;;</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//   &#125;);</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 利用 ES6 解構</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value, name &#125; = e.target;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// setState 可傳回改變前值</span></span><br><span class="line">    setFullName(&#123;</span><br><span class="line">      ...fullName,</span><br><span class="line">      [name]: value</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">      &lt;h1&gt;</span><br><span class="line">        Hello &#123;fullName.fName&#125; &#123;fullName.lName&#125;</span><br><span class="line">      &lt;/h1&gt;</span><br><span class="line">      &lt;form&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          name=<span class="string">&quot;fName&quot;</span></span><br><span class="line">          onChange=&#123;handleChange&#125;</span><br><span class="line">          placeholder=<span class="string">&quot;First Name&quot;</span></span><br><span class="line">          value=&#123;fullName.fName&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          name=<span class="string">&quot;lName&quot;</span></span><br><span class="line">          onChange=&#123;handleChange&#125;</span><br><span class="line">          placeholder=<span class="string">&quot;Last Name&quot;</span></span><br><span class="line">          value=&#123;fullName.lName&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;button&gt;Submit&lt;/button&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="example-3-todos"><a href="#example-3-todos" class="headerlink" title="example 3 - todos"></a>example 3 - todos</h5><ul>
<li>key</li>
<li>setTodos for array</li>
<li>todos.map</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="comment">// import css file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// for State</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// immutable 不可變的</span></span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState([</span><br><span class="line">		<span class="number">1</span></span><br><span class="line">	]);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		setTodos([<span class="built_in">Math</span>.random(), ...todos])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function">(<span class="params">todo, index</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">content</span>=<span class="string">&#123;todo&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="example-4-todos-add-item"><a href="#example-4-todos-add-item" class="headerlink" title="example 4 - todos add item"></a>example 4 - todos add item</h5><ul>
<li>controlled component</li>
<li>uncontrolled component #1</li>
<li>uncontrolled component #2 (Ref)</li>
<li>todo change to object</li>
</ul>
<h6 id="App-js-1"><a href="#App-js-1" class="headerlink" title="App.js"></a>App.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="comment">// import css file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// for State</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="comment">// uncontrolled component #2 -&gt; ref</span></span><br><span class="line"><span class="comment">// import &#123; useState, useRef &#125; from &#x27;react&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> id =<span class="number">2</span> ;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// immutable 不可變的</span></span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState([</span><br><span class="line">		&#123;</span><br><span class="line">			id: <span class="number">1</span>,</span><br><span class="line">			content: <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line">	]);</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">	<span class="comment">// uncontrolled component #2 -&gt; ref</span></span><br><span class="line">	<span class="comment">// const inputRef = useRef()</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// uncontrolled component #1 -&gt; get value</span></span><br><span class="line">		<span class="comment">// document.querySelector(&#x27;.input-todo&#x27;).value</span></span><br><span class="line">		<span class="comment">// uncontrolled component #2 -&gt; ref</span></span><br><span class="line">		<span class="comment">// console.log(inputRef.current.value)</span></span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id,</span><br><span class="line">			content: value</span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		id++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleInputChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// console.log(e.target.value)</span></span><br><span class="line">		<span class="comment">// controlled component</span></span><br><span class="line">		setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* controlled component */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&#123;<span class="comment">/* uncontrolled component #1 -&gt; get value */</span>&#125;</span><br><span class="line">			&#123;<span class="comment">/* &lt;input className=&quot;input-todo&quot; type=&quot;text&quot; placeholder=&quot;todo&quot;/&gt; */</span>&#125;</span><br><span class="line">			&#123;<span class="comment">/* uncontrolled component #2 -&gt; ref */</span>&#125;</span><br><span class="line">			&#123;<span class="comment">/* &lt;input ref=&#123;inputRef&#125; type=&quot;text&quot; placeholder=&quot;todo&quot;/&gt; */</span>&#125;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h6 id="TodoItem-js-1"><a href="#TodoItem-js-1" class="headerlink" title="TodoItem.js"></a>TodoItem.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TodoItem.js</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class="keyword">from</span> <span class="string">&#x27;./constants/style&#x27;</span></span><br><span class="line"><span class="comment">// react direct</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoItemWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  align-items: center;</span></span><br><span class="line"><span class="string">  justify-content: space-between;</span></span><br><span class="line"><span class="string">  padding: 8px 16px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-top: 12px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoContent = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">// 取用 theme</span></span><br><span class="line"><span class="string">	color: <span class="subst">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">  font-size: <span class="subst">$&#123;props =&gt; props.size === <span class="string">&#x27;XL&#x27;</span> ? <span class="string">&#x27;20px&#x27;</span> : <span class="string">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoButtonWrapper= styled.div<span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button = styled.button<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 4px;</span></span><br><span class="line"><span class="string">  color: black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// ***** media change *****</span></span><br><span class="line"><span class="string">	// @media screen and (min-width: 768px) &#123;</span></span><br><span class="line"><span class="string">	// 	font-size: 16px;</span></span><br><span class="line"><span class="string">	// &#125;</span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 16px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 20px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 相連之 component</span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-left: 10px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 對原本存在styled-component,再做 re-styled</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RedButton = styled(Button)<span class="string">`</span></span><br><span class="line"><span class="string">  color: red;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for other import</span></span><br><span class="line"><span class="comment">// 因為 function re-style, 增加 class </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoItem</span>(<span class="params">&#123; className, size, todo&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">       &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class="line">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class="line">          &lt;RedButton&gt;刪除&lt;/RedButton&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="example-5-todos-delete"><a href="#example-5-todos-delete" class="headerlink" title="example 5 - todos delete"></a>example 5 - todos delete</h5><ul>
<li>todo delete</li>
</ul>
<h6 id="App-js-2"><a href="#App-js-2" class="headerlink" title="App.js"></a>App.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> id =<span class="number">2</span> ;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState([</span><br><span class="line">		&#123;</span><br><span class="line">			id: <span class="number">1</span>,</span><br><span class="line">			content: <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line">	]);</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id,</span><br><span class="line">			content: value</span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		id++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleInputChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h6 id="TodoItem-js-2"><a href="#TodoItem-js-2" class="headerlink" title="TodoItem.js"></a>TodoItem.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TodoItem.js</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class="keyword">from</span> <span class="string">&#x27;./constants/style&#x27;</span></span><br><span class="line"><span class="comment">// react direct</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoItemWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  align-items: center;</span></span><br><span class="line"><span class="string">  justify-content: space-between;</span></span><br><span class="line"><span class="string">  padding: 8px 16px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-top: 12px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoContent = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">// 取用 theme</span></span><br><span class="line"><span class="string">	color: <span class="subst">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">  font-size: <span class="subst">$&#123;props =&gt; props.size === <span class="string">&#x27;XL&#x27;</span> ? <span class="string">&#x27;20px&#x27;</span> : <span class="string">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoButtonWrapper= styled.div<span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button = styled.button<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 4px;</span></span><br><span class="line"><span class="string">  color: black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 16px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 20px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 相連之 component</span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-left: 10px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RedButton = styled(Button)<span class="string">`</span></span><br><span class="line"><span class="string">  color: red;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for other import</span></span><br><span class="line"><span class="comment">// 因為 function re-style, 增加 class </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoItem</span>(<span class="params">&#123; className, size, todo, handleDeleteTodo&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">       &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class="line">        &lt;TodoContent size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &lt;Button&gt;已完成&lt;/Button&gt;</span><br><span class="line">          &#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">          &lt;RedButton onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            handleDeleteTodo(todo.id)</span><br><span class="line">          &#125;&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="example-6-todos-change-state"><a href="#example-6-todos-change-state" class="headerlink" title="example 6 - todos change state"></a>example 6 - todos change state</h5><ul>
<li>todo change state</li>
</ul>
<h6 id="App-js-3"><a href="#App-js-3" class="headerlink" title="App.js"></a>App.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// import &#123; useState &#125; from &#x27;react&#x27;;</span></span><br><span class="line"><span class="comment">// use ref</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> id =<span class="number">3</span> ;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState([</span><br><span class="line">		<span class="comment">// todo change state</span></span><br><span class="line">		&#123;	<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">content</span>: <span class="string">&#x27;abc&#x27;</span>, <span class="attr">isDone</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">		&#123;	<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">content</span>: <span class="string">&#x27;xxx&#x27;</span>, <span class="attr">isDone</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">	]);</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleInputChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h6 id="TodoItem-js-3"><a href="#TodoItem-js-3" class="headerlink" title="TodoItem.js"></a>TodoItem.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TodoItem.js</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class="keyword">from</span> <span class="string">&#x27;./constants/style&#x27;</span></span><br><span class="line"><span class="comment">// react direct</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoItemWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  align-items: center;</span></span><br><span class="line"><span class="string">  justify-content: space-between;</span></span><br><span class="line"><span class="string">  padding: 8px 16px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-top: 12px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoContent = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">// 取用 theme</span></span><br><span class="line"><span class="string">	color: <span class="subst">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">  font-size: <span class="subst">$&#123;props =&gt; props.size === <span class="string">&#x27;XL&#x27;</span> ? <span class="string">&#x27;20px&#x27;</span> : <span class="string">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // todo change state</span></span><br><span class="line"><span class="string">  // props.isDone show text-decoration: line-through;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;props =&gt; props.isDone &amp;&amp; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    text-decoration: line-through;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  `</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoButtonWrapper= styled.div<span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button = styled.button<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 4px;</span></span><br><span class="line"><span class="string">  color: black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 16px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 20px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 相連之 component</span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-left: 10px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RedButton = styled(Button)<span class="string">`</span></span><br><span class="line"><span class="string">  color: red;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for other import</span></span><br><span class="line"><span class="comment">// 因為 function re-style, 增加 class </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoItem</span>(<span class="params">&#123; className, size, todo, handleDeleteTodo, handleToggleIsDone&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//  todo change state</span></span><br><span class="line">  <span class="keyword">const</span> handleToggleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    handleToggleIsDone(todo.id)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// todo delete</span></span><br><span class="line">  <span class="keyword">const</span> handleDeleteClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    handleDeleteTodo(todo.id)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class="line">        &#123;<span class="comment">/* todo change state */</span>&#125;</span><br><span class="line">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &#123;<span class="comment">/* todo change state */</span>&#125;</span><br><span class="line">          &lt;Button onClick=&#123;handleToggleClick&#125;&gt;</span><br><span class="line">            &#123;<span class="comment">/* &#123; todo.isDone ? &#x27;已完成&#x27; : &#x27;未完成&#x27;&#125; */</span>&#125;</span><br><span class="line">            &#123;<span class="comment">/* todo.isDone 顯示已完成  */</span>&#125;</span><br><span class="line">            &#123; todo.isDone &amp;&amp; <span class="string">&#x27;已完成&#x27;</span>&#125;</span><br><span class="line">            &#123; !todo.isDone &amp;&amp; <span class="string">&#x27;未完成&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">          &lt;/Button&gt;</span><br><span class="line">          &#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">          &lt;RedButton onClick=&#123;handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h4><ul>
<li>render 後,你想做什麼</li>
</ul>
<h5 id="exampl-1-add-useEffect"><a href="#exampl-1-add-useEffect" class="headerlink" title="exampl 1 - add useEffect"></a>exampl 1 - add useEffect</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add useEffect-1 </span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add useEffect-1</span></span><br><span class="line">useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;after render!&quot;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="exampl-2-run-useEffect-when-todos-change"><a href="#exampl-2-run-useEffect-when-todos-change" class="headerlink" title="exampl 2 - run useEffect when todos change"></a>exampl 2 - run useEffect when todos change</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// save to localStorage after update-1+</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add useEffect - after render --&gt; when todos change -2</span></span><br><span class="line">useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	writeTodosToLocalStorage(todos);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">&#125;, [todos]);</span><br></pre></td></tr></table></figure>

<h5 id="exampl-3-run-useEffect-1st-render"><a href="#exampl-3-run-useEffect-1st-render" class="headerlink" title="exampl 3 - run useEffect 1st render"></a>exampl 3 - run useEffect 1st render</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// import &#123; useState &#125; from &#x27;react&#x27;;</span></span><br><span class="line"><span class="comment">// use ref</span></span><br><span class="line"><span class="comment">// add useEffect-1 </span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let id =3 ;</span></span><br><span class="line"><span class="keyword">let</span> isInit = <span class="literal">true</span> ;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState([</span><br><span class="line">		<span class="comment">// todo change state</span></span><br><span class="line">		&#123;	<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">content</span>: <span class="string">&#x27;abc&#x27;</span>, <span class="attr">isDone</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">		&#123;	<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">content</span>: <span class="string">&#x27;xxx&#x27;</span>, <span class="attr">isDone</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">	]);</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">3</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// add useEffect-1</span></span><br><span class="line">	<span class="comment">// useEffect( () =&gt; &#123;</span></span><br><span class="line">	<span class="comment">// 	console.log(&quot;after render!&quot;)</span></span><br><span class="line">	<span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add useEffect - after render --&gt; when todos change -2</span></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 1st load do not save to local storage</span></span><br><span class="line">		<span class="keyword">if</span> (!isInit) &#123;</span><br><span class="line">			writeTodosToLocalStorage(todos);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;todos change :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add useEffect - after render --&gt; just 1st time render -3</span></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// alert(1);</span></span><br><span class="line">		<span class="comment">// load from localStorage - 3</span></span><br><span class="line">		<span class="keyword">const</span> todoData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;todos&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (todoData) &#123;</span><br><span class="line">			<span class="comment">// writeTodosToLocalStorage(todos);</span></span><br><span class="line">			<span class="comment">// console.log(JSON.stringify(todos));</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&quot;1st :&quot;</span>, todoData)</span><br><span class="line">			isInit = <span class="literal">false</span>;</span><br><span class="line">			<span class="comment">// count correct id</span></span><br><span class="line">			<span class="built_in">JSON</span>.parse(todoData).map(　<span class="function"><span class="params">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class="number">1</span> :　id.current );</span><br><span class="line">			setTodos(<span class="built_in">JSON</span>.parse(todoData));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, []);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">		<span class="comment">// writeTodosToLocalStorage([&#123;</span></span><br><span class="line">		<span class="comment">// 	id: id.current,</span></span><br><span class="line">		<span class="comment">// 	content: value,</span></span><br><span class="line">		<span class="comment">// 	isDone: false</span></span><br><span class="line">		<span class="comment">// &#125;, ...todos]);</span></span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleInputChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="exampl-4-set-local-storage-to-init-todos"><a href="#exampl-4-set-local-storage-to-init-todos" class="headerlink" title="exampl 4 -  set local storage to init todos"></a>exampl 4 -  set local storage to init todos</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// add useEffect</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> todoData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;todos&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="comment">// set local storage to init todos </span></span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState(<span class="built_in">JSON</span>.parse(todoData));</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">3</span>)</span><br><span class="line">	<span class="comment">// count correct id</span></span><br><span class="line">	<span class="built_in">JSON</span>.parse(todoData).map(　<span class="function"><span class="params">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class="number">1</span> :　id.current );</span><br><span class="line"></span><br><span class="line">	<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		writeTodosToLocalStorage(todos);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;todos change :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleInputChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="exampl-5-clear-up-LayoutEffects"><a href="#exampl-5-clear-up-LayoutEffects" class="headerlink" title="exampl 5 -  clear up LayoutEffects"></a>exampl 5 -  clear up LayoutEffects</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// add useEffect</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	......</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;run 1st render!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="comment">// unmount</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;unmount!&#x27;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, []);</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		writeTodosToLocalStorage(todos);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;useEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="comment">// 下一次 render 前執行,內容與前次render相同</span></span><br><span class="line">		<span class="comment">// 可應用於 user disconnect</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;clearEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h4 id="改寫成自己的-hook"><a href="#改寫成自己的-hook" class="headerlink" title="改寫成自己的 hook"></a>改寫成自己的 hook</h4><h5 id="App-js-4"><a href="#App-js-4" class="headerlink" title="App.js"></a>App.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// useTodos hook</span></span><br><span class="line"><span class="keyword">import</span> useTodos <span class="keyword">from</span> <span class="string">&#x27;./useTodos&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123;</span><br><span class="line">		todos,</span><br><span class="line">		handleTodosClick,</span><br><span class="line">		handleToggleIsDone,</span><br><span class="line">		handleDeleteTodo,</span><br><span class="line">		value,</span><br><span class="line">		handleChange</span><br><span class="line">	&#125; = useTodos()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>


<h5 id="useInput-js"><a href="#useInput-js" class="headerlink" title="useInput.js"></a>useInput.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useInput.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useInput</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">	<span class="keyword">const</span> handleChange = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">			setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		value, </span><br><span class="line">		setValue, </span><br><span class="line">		handleChange</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="useTodos-js"><a href="#useTodos-js" class="headerlink" title="useTodos.js"></a>useTodos.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useTodos.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useInput <span class="keyword">from</span> <span class="string">&#x27;./useInput&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useTodos</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// set local storage to init todos </span></span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;init&#x27;</span>);</span><br><span class="line">		<span class="keyword">let</span> todoData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;todos&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span>(todoData) &#123;</span><br><span class="line">			todoData = <span class="built_in">JSON</span>.parse(todoData);</span><br><span class="line">			id.current = todoData[<span class="number">0</span>].id + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			todoData = [] ;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> todoData;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> &#123;value, setValue, handleChange &#125; = useInput()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;run 1st render!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="comment">// unmount</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;unmount!&#x27;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, []);</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		writeTodosToLocalStorage(todos);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;useEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;clearEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		todos,</span><br><span class="line">		handleTodosClick,</span><br><span class="line">		handleToggleIsDone,</span><br><span class="line">		handleDeleteTodo,</span><br><span class="line">		value,</span><br><span class="line">		setValue,</span><br><span class="line">		handleChange</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="memo-useMemo-useCallback"><a href="#memo-useMemo-useCallback" class="headerlink" title="memo, useMemo, useCallback"></a>memo, useMemo, useCallback</h4><ul>
<li>memo - 把 component 包起來, 雖然 parents rerender 但本身未改變就不 rerender<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add memo - 傳入不變,即不 re-render</span></span><br><span class="line"><span class="comment">// 但每次 render 會 new handleTodosClick</span></span><br><span class="line"><span class="keyword">const</span> MemoButton = memo(Button);</span><br></pre></td></tr></table></figure></li>
<li>useMemo - 把 data 記起來,未改變就不產生新的<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add useMemo - for data </span></span><br><span class="line"><span class="comment">// todos change no run </span></span><br><span class="line"><span class="keyword">const</span> s = useMemo(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;calculate s&#x27;</span>)</span><br><span class="line">	<span class="keyword">return</span> value ? redStyle : blueStyle;</span><br><span class="line">&#125;, [value])</span><br></pre></td></tr></table></figure></li>
<li>useCallback - 把 function 記起來,未改變就不產生新的<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// add useCallback - [] 表沒東西會造成改變</span></span><br><span class="line"><span class="keyword">const</span> handleTodosClick = useCallback(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(value);</span><br><span class="line">	<span class="comment">// set input value </span></span><br><span class="line">	setTodos([&#123;</span><br><span class="line">		id: id.current,</span><br><span class="line">		content: value,</span><br><span class="line">		isDone: <span class="literal">false</span></span><br><span class="line">	&#125;, ...todos])</span><br><span class="line">	setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	id.current++</span><br><span class="line">&#125;, [setValue, value, todos]);</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// useTodos hook</span></span><br><span class="line"><span class="keyword">import</span> useTodos <span class="keyword">from</span> <span class="string">&#x27;./useTodos&#x27;</span>;</span><br><span class="line"><span class="comment">// add memo - 把 component 包起來 </span></span><br><span class="line"><span class="comment">// add useMemo - for data</span></span><br><span class="line"><span class="keyword">import</span> &#123; memo, useMemo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params">&#123; onClick, children &#125;</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;render button&#x27;</span>);</span><br><span class="line">	<span class="keyword">return</span> 	(<span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add memo - 傳入不變,即不 re-render</span></span><br><span class="line"><span class="comment">// 但每次 render 會 new handleTodosClick</span></span><br><span class="line"><span class="keyword">const</span> MemoButton = memo(Button);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params">&#123; style &#125;</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;test render&#x27;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> redStyle = &#123;</span><br><span class="line">	color: <span class="string">&#x27;red&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> blueStyle = &#123;</span><br><span class="line">	color: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123;</span><br><span class="line">		todos,</span><br><span class="line">		handleTodosClick,</span><br><span class="line">		handleToggleIsDone,</span><br><span class="line">		handleDeleteTodo,</span><br><span class="line">		value,</span><br><span class="line">		handleChange</span><br><span class="line">	&#125; = useTodos()</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// add useMemo - for data </span></span><br><span class="line">	<span class="comment">// todos change no run </span></span><br><span class="line">	<span class="keyword">const</span> s = useMemo(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;calculate s&#x27;</span>)</span><br><span class="line">		<span class="keyword">return</span> value ? redStyle : blueStyle;</span><br><span class="line">	&#125;, [value])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&#123;<span class="comment">/* // add useMemo - for data */</span>&#125;</span><br><span class="line">			&lt;Test style=&#123;s&#125; /&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class="line">			&#123;<span class="comment">/* input change 不會造成 Button re-render */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> /&gt;</span><br><span class="line">			&lt;MemoButton onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/MemoButton&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useTodos.js</span></span><br><span class="line"><span class="comment">// add useCallback - 把 function 記起來 </span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect, useCallback &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useInput <span class="keyword">from</span> <span class="string">&#x27;./useInput&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useTodos</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// set local storage to init todos </span></span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;init&#x27;</span>);</span><br><span class="line">		<span class="keyword">let</span> todoData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;todos&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span>(todoData) &#123;</span><br><span class="line">			todoData = <span class="built_in">JSON</span>.parse(todoData);</span><br><span class="line">			id.current = todoData[<span class="number">0</span>].id + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			todoData = [] ;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> todoData;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> &#123;value, setValue, handleChange &#125; = useInput()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;run 1st render!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="comment">// unmount</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;unmount!&#x27;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, []);</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		writeTodosToLocalStorage(todos);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;useEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;clearEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add useCallback - [] 表沒東西會造成改變</span></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = useCallback(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(value);</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;, [setValue, value, todos]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		todos,</span><br><span class="line">		handleTodosClick,</span><br><span class="line">		handleToggleIsDone,</span><br><span class="line">		handleDeleteTodo,</span><br><span class="line">		value,</span><br><span class="line">		setValue,</span><br><span class="line">		handleChange</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="lazy-initializer-useState-加-function-僅第一次執行"><a href="#lazy-initializer-useState-加-function-僅第一次執行" class="headerlink" title="lazy initializer - useState() 加 function 僅第一次執行"></a>lazy initializer - useState() 加 function 僅第一次執行</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// add useEffect</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">// set local storage to init todos </span></span><br><span class="line">	<span class="comment">// lazy initializer - just run 1st time</span></span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;init&#x27;</span>);</span><br><span class="line">		<span class="keyword">let</span> todoData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;todos&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span>(todoData) &#123;</span><br><span class="line">			todoData = <span class="built_in">JSON</span>.parse(todoData);</span><br><span class="line">			id.current = todoData[<span class="number">0</span>].id + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			todoData = [] ;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> todoData;</span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// count correct id</span></span><br><span class="line">	todos.map(　<span class="function"><span class="params">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class="number">1</span> :　id.current );</span><br><span class="line"></span><br><span class="line">	<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		writeTodosToLocalStorage(todos);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;todos change :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleInputChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h4 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect"></a>useLayoutEffect</h4><ul>
<li>render 前你想做什麼</li>
</ul>
<h5 id="exampl-1"><a href="#exampl-1" class="headerlink" title="exampl 1"></a>exampl 1</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// import &#123; useState &#125; from &#x27;react&#x27;;</span></span><br><span class="line"><span class="comment">// use ref</span></span><br><span class="line"><span class="comment">// add useEffect-1 </span></span><br><span class="line"><span class="comment">// add useLayoutEffect</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect, useLayoutEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let id =3 ;</span></span><br><span class="line"><span class="keyword">let</span> isInit = <span class="literal">true</span> ;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState([</span><br><span class="line">		<span class="comment">// todo change state</span></span><br><span class="line">		&#123;	<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">content</span>: <span class="string">&#x27;abc&#x27;</span>, <span class="attr">isDone</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">		&#123;	<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">content</span>: <span class="string">&#x27;xxx&#x27;</span>, <span class="attr">isDone</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">	]);</span><br><span class="line">	<span class="comment">// add value</span></span><br><span class="line">	<span class="keyword">const</span> [value, setValue] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">3</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// add useEffect-1</span></span><br><span class="line">	<span class="comment">// useEffect( () =&gt; &#123;</span></span><br><span class="line">	<span class="comment">// 	console.log(&quot;after render!&quot;)</span></span><br><span class="line">	<span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add useEffect - after render --&gt; when todos change -2</span></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 1st load do not save to local storage</span></span><br><span class="line">		<span class="keyword">if</span> (!isInit) &#123;</span><br><span class="line">			writeTodosToLocalStorage(todos);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;todos change :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add useEffect - after render --&gt; just 1st time render -3</span></span><br><span class="line">	<span class="comment">// add useLayoutEffect</span></span><br><span class="line">	useLayoutEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// alert(1);</span></span><br><span class="line">		<span class="comment">// load from localStorage - 3</span></span><br><span class="line">		<span class="keyword">const</span> todoData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;todos&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (todoData) &#123;</span><br><span class="line">			<span class="comment">// writeTodosToLocalStorage(todos);</span></span><br><span class="line">			<span class="comment">// console.log(JSON.stringify(todos));</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&quot;1st :&quot;</span>, todoData)</span><br><span class="line">			isInit = <span class="literal">false</span>;</span><br><span class="line">			<span class="comment">// count correct id</span></span><br><span class="line">			<span class="built_in">JSON</span>.parse(todoData).map(　<span class="function"><span class="params">todo</span> =&gt;</span>　id.current = (todo.id &gt;= id.current) ?  todo.id + <span class="number">1</span> :　id.current );</span><br><span class="line">			setTodos(<span class="built_in">JSON</span>.parse(todoData));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, []);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">		<span class="comment">// writeTodosToLocalStorage([&#123;</span></span><br><span class="line">		<span class="comment">// 	id: id.current,</span></span><br><span class="line">		<span class="comment">// 	content: value,</span></span><br><span class="line">		<span class="comment">// 	isDone: false</span></span><br><span class="line">		<span class="comment">// &#125;, ...todos]);</span></span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleInputChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		setValue(e.target.value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleInputChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h4 id="class-component"><a href="#class-component" class="headerlink" title="class component"></a>class component</h4><h5 id="example-1-1"><a href="#example-1-1" class="headerlink" title="example 1"></a>example 1</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// useTodos hook</span></span><br><span class="line"><span class="keyword">import</span> useTodos <span class="keyword">from</span> <span class="string">&#x27;./useTodos&#x27;</span>;</span><br><span class="line"><span class="comment">// add memo - 把 component 包起來 </span></span><br><span class="line"><span class="comment">// add useMemo - for data</span></span><br><span class="line"><span class="comment">// add class component</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; memo, useMemo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function Button(&#123; onClick, children &#125;) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(&#x27;render button&#x27;);</span></span><br><span class="line"><span class="comment">// 	return 	(&lt;button onClick=&#123;onClick&#125;&gt;&#123;children&#125;&lt;/button&gt;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// add class component</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;onClick, children &#125; = <span class="built_in">this</span>.props</span><br><span class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add memo - 傳入不變,即不 re-render</span></span><br><span class="line"><span class="comment">// 但每次 render 會 new handleTodosClick</span></span><br><span class="line"><span class="keyword">const</span> MemoButton = memo(Button);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params">&#123; style &#125;</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;test render&#x27;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> redStyle = &#123;</span><br><span class="line">	color: <span class="string">&#x27;red&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> blueStyle = &#123;</span><br><span class="line">	color: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123;</span><br><span class="line">		todos,</span><br><span class="line">		handleTodosClick,</span><br><span class="line">		handleToggleIsDone,</span><br><span class="line">		handleDeleteTodo,</span><br><span class="line">		value,</span><br><span class="line">		handleChange</span><br><span class="line">	&#125; = useTodos()</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// add useMemo - for data </span></span><br><span class="line">	<span class="comment">// todos change no run </span></span><br><span class="line">	<span class="keyword">const</span> s = useMemo(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;calculate s&#x27;</span>)</span><br><span class="line">		<span class="keyword">return</span> value ? redStyle : blueStyle;</span><br><span class="line">	&#125;, [value])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&#123;<span class="comment">/* // add useMemo - for data */</span>&#125;</span><br><span class="line">			&lt;Test style=&#123;s&#125; /&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class="line">			&#123;<span class="comment">/* input change 不會造成 Button re-render */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> /&gt;</span><br><span class="line">			&lt;MemoButton onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/MemoButton&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TodoItem.js</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class="keyword">from</span> <span class="string">&#x27;./constants/style&#x27;</span></span><br><span class="line"><span class="comment">// react direct</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoItemWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  align-items: center;</span></span><br><span class="line"><span class="string">  justify-content: space-between;</span></span><br><span class="line"><span class="string">  padding: 8px 16px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-top: 12px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoContent = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">// 取用 theme</span></span><br><span class="line"><span class="string">	color: <span class="subst">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">  font-size: <span class="subst">$&#123;props =&gt; props.size === <span class="string">&#x27;XL&#x27;</span> ? <span class="string">&#x27;20px&#x27;</span> : <span class="string">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // todo change state</span></span><br><span class="line"><span class="string">  // props.isDone show text-decoration: line-through;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;props =&gt; props.isDone &amp;&amp; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    text-decoration: line-through;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  `</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoButtonWrapper= styled.div<span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button = styled.button<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 4px;</span></span><br><span class="line"><span class="string">  color: black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 16px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 20px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 相連之 component</span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-left: 10px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RedButton = styled(Button)<span class="string">`</span></span><br><span class="line"><span class="string">  color: red;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// add class component</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">todoItem</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// case #1 fix for handleToggleClick, handleDeleteClick&#x27;s this</span></span><br><span class="line">  <span class="comment">// constructor(props) &#123;</span></span><br><span class="line">  <span class="comment">//   super(props)</span></span><br><span class="line">  <span class="comment">//   this.handleToggleClick = this.handleToggleClick.bind(this)</span></span><br><span class="line">  <span class="comment">//   this.handleDeleteTodo = this.handleDeleteClick.bind(this)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">// handleToggleClick() &#123;</span></span><br><span class="line">  <span class="comment">//   const &#123;handleToggleIsDone, todo&#125; = this.props;</span></span><br><span class="line">  <span class="comment">//   handleToggleIsDone(todo.id)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="comment">// handleDeleteClick() &#123;</span></span><br><span class="line">  <span class="comment">//   const &#123;handleDeleteTodo, todo&#125; = this.props;</span></span><br><span class="line">  <span class="comment">//   handleDeleteTodo(todo.id)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// use state (class component)</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      counter: <span class="number">1</span></span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// case #2 fix for handleToggleClick, handleDeleteClick&#x27;s this</span></span><br><span class="line">  handleToggleClick= <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;handleToggleIsDone, todo&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    handleToggleIsDone(todo.id)</span><br><span class="line">    <span class="comment">// use state (class component)</span></span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      counter: <span class="built_in">this</span>.state.counter + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  handleDeleteClick= <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;handleDeleteTodo, todo&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    handleDeleteTodo(todo.id)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      className, </span><br><span class="line">      size, </span><br><span class="line">      todo</span><br><span class="line">    &#125; = <span class="built_in">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>  (</span><br><span class="line">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class="line">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &lt;Button onClick=&#123;<span class="built_in">this</span>.handleToggleClick&#125;&gt;</span><br><span class="line">            &#123; todo.isDone &amp;&amp; <span class="string">&#x27;已完成&#x27;</span>&#125;</span><br><span class="line">            &#123; !todo.isDone &amp;&amp; <span class="string">&#x27;未完成&#x27;</span>&#125;</span><br><span class="line">          &lt;/Button&gt;</span><br><span class="line">          &lt;RedButton onClick=&#123;<span class="built_in">this</span>.handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for other import</span></span><br><span class="line"><span class="comment">// 因為 function re-style, 增加 class </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoItemF</span>(<span class="params">&#123; className, size, todo, handleDeleteTodo, handleToggleIsDone&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//  todo change state</span></span><br><span class="line">  <span class="keyword">const</span> handleToggleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    handleToggleIsDone(todo.id)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// todo delete</span></span><br><span class="line">  <span class="keyword">const</span> handleDeleteClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    handleDeleteTodo(todo.id)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class="line">        &#123;<span class="comment">/* todo change state */</span>&#125;</span><br><span class="line">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &#123;<span class="comment">/* javascript:alert(1) */</span>&#125;</span><br><span class="line">        &#123;<span class="comment">/* &lt;a href=&#123;todo.content&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class="line">        &#123;<span class="comment">/* &lt;a href=&#123;window.encodeURIComponent(todo.content)&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &#123;<span class="comment">/* todo change state */</span>&#125;</span><br><span class="line">          &lt;Button onClick=&#123;handleToggleClick&#125;&gt;</span><br><span class="line">            &#123;<span class="comment">/* &#123; todo.isDone ? &#x27;已完成&#x27; : &#x27;未完成&#x27;&#125; */</span>&#125;</span><br><span class="line">            &#123;<span class="comment">/* todo.isDone 顯示已完成  */</span>&#125;</span><br><span class="line">            &#123; todo.isDone &amp;&amp; <span class="string">&#x27;已完成&#x27;</span>&#125;</span><br><span class="line">            &#123; !todo.isDone &amp;&amp; <span class="string">&#x27;未完成&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">          &lt;/Button&gt;</span><br><span class="line">          &#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">          &lt;RedButton onClick=&#123;handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="example-2-class-component-lifeCycle-生命週期"><a href="#example-2-class-component-lifeCycle-生命週期" class="headerlink" title="example 2 - class component lifeCycle 生命週期"></a>example 2 - class component lifeCycle 生命週期</h5><ul>
<li>PureComponent : same as memo(props 有變動才update)</li>
<li>shouldComponentUpdate : return false not update</li>
<li>componentDidMount : mount</li>
<li>componentDidUpdate : update </li>
<li>componentWillUnmount : before unmount(not render the component)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js </span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">&#x27;./Counter&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">		&lt;Counter /&gt;</span><br><span class="line">	,</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Counter.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="comment">// componentDidMount : mount</span></span><br><span class="line">	<span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;test mount&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// componentWillUnmount : before unmount(not render the component)</span></span><br><span class="line">	<span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;test umount&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export default class Counter extends React.PureComponent &#123;</span></span><br><span class="line"><span class="comment">// PureComponent : same as memo(props 有變動才update)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(props)</span><br><span class="line">		<span class="comment">// add state</span></span><br><span class="line">		<span class="built_in">this</span>.state = &#123;</span><br><span class="line">			counter: <span class="number">1</span></span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;constructor&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// shouldComponentUpdate : return false not update</span></span><br><span class="line">	<span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (nextState.counter &gt; <span class="number">5</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// componentDidMount : mount</span></span><br><span class="line">	<span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;did mount&#x27;</span>, <span class="built_in">this</span>.state)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// componentDidUpdate : update </span></span><br><span class="line">	<span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps, prevState</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;update prevState:&#x27;</span>, prevState)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// componentWillUnmount : before unmount(not render the component)</span></span><br><span class="line">	<span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;unmount&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	compont</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	handleClick= <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.setState(&#123;</span><br><span class="line">			counter: <span class="built_in">this</span>.state.counter + <span class="number">1</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	render () &#123;</span><br><span class="line">		<span class="comment">// add state</span></span><br><span class="line">		<span class="keyword">const</span> &#123; counter&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;render&#x27;</span>)</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;button onClick=&#123;<span class="built_in">this</span>.handleClick&#125;&gt;+<span class="number">1</span>&lt;/button&gt;</span><br><span class="line">				counetr: &#123;counter&#125;</span><br><span class="line">				&#123;counter === <span class="number">1</span> &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Test</span> /&gt;</span></span>&#125;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h4><h5 id="prop-Drilling-資料跨多層傳送"><a href="#prop-Drilling-資料跨多層傳送" class="headerlink" title="prop Drilling : 資料跨多層傳送"></a>prop Drilling : 資料跨多層傳送</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js </span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Demo <span class="keyword">from</span> <span class="string">&#x27;./Demo&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">		&lt;Demo /&gt;</span><br><span class="line">	,</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Demo.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DemoInnerBoxContent</span>(<span class="params">&#123;setTitle&#125;</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">			&lt;button onClick=&#123; <span class="function">() =&gt;</span> &#123;</span><br><span class="line">					setTitle(<span class="built_in">Math</span>.random())</span><br><span class="line">				&#125;&#125;</span><br><span class="line">			&gt;</span><br><span class="line">			Update Title</span><br><span class="line">		&lt;/button&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DemoInnerBox</span>(<span class="params">&#123;setTitle&#125;</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">DemoInnerBoxContent</span> <span class="attr">setTitle</span>=<span class="string">&#123;setTitle&#125;</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DemoInner</span>(<span class="params">&#123;setTitle&#125;</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">DemoInnerBox</span> <span class="attr">setTitle</span>=<span class="string">&#123;setTitle&#125;</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> [title, setTitle] = useState(<span class="string">&quot;I am title!&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">			title: &#123;title&#125;</span><br><span class="line">			&lt;DemoInner setTitle=&#123;setTitle&#125; /&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="useContext-example-1"><a href="#useContext-example-1" class="headerlink" title="useContext example 1"></a>useContext example 1</h5><ul>
<li><p>./App.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./App.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ContentExample <span class="keyword">from</span> <span class="string">&quot;./ContentExample&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;ContentExample /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>./ContentExample</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./ContentExample</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; createContext, useContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> slogan = <span class="string">&quot;super star&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Content = createContext();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SideBarButton</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// get context</span></span><br><span class="line">  <span class="keyword">const</span> title = useContext(Content);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SideBar</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// get context</span></span><br><span class="line">  <span class="keyword">const</span> bt = useContext(Content);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button&gt;&#123;bt&#125;&lt;/button&gt;</span><br><span class="line">      &lt;SideBarButton /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">ContentExample</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// set Context</span></span><br><span class="line">    &lt;Content.Provider value=&#123;slogan&#125;&gt;</span><br><span class="line">      &lt;SideBar /&gt;</span><br><span class="line">    &lt;/Content.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="useContext-example-2"><a href="#useContext-example-2" class="headerlink" title="useContext example 2"></a>useContext example 2</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add useContext(also import createContext ) </span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useContext, createContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; </span><br><span class="line"><span class="keyword">const</span> ColorContext = createContext()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DemoInnerBoxContent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 取出 colors</span></span><br><span class="line">	<span class="keyword">const</span> colors = useContext(ColorContext)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">	<span class="comment">// colors 透過 createContext 傳送</span></span><br><span class="line">	&lt;ColorContext.Provider value=&#123;colors&#125; &gt;</span><br><span class="line">		......</span><br><span class="line">	&lt;/ColorContext.Provider&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><p>useContext for array</p>
</li>
<li><p>useContext 可動態改變</p>
</li>
<li><p>useContext 中間層可改變</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js </span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Demo <span class="keyword">from</span> <span class="string">&#x27;./Demo&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">		&lt;Demo /&gt;</span><br><span class="line">	,</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Demo.js</span></span><br><span class="line"><span class="comment">// add useContext(also import createContext ) </span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useContext, createContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; </span><br><span class="line"><span class="keyword">const</span> TitleContext = createContext()</span><br><span class="line"><span class="keyword">const</span> ColorContext = createContext()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DemoInnerBoxContent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// add useContext</span></span><br><span class="line">	<span class="comment">// const setTitle = useContext(TitleContext)</span></span><br><span class="line">	<span class="comment">// add useContext for array</span></span><br><span class="line">	<span class="comment">// const [title, setTitle] = useContext(TitleContext)</span></span><br><span class="line">	<span class="comment">// add useContext - ColorContext</span></span><br><span class="line">	<span class="keyword">const</span> colors = useContext(ColorContext)</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">			&#123;<span class="comment">/* &lt;button </span></span><br><span class="line"><span class="comment">			style=&#123;&#123;</span></span><br><span class="line"><span class="comment">				color: colors.primary</span></span><br><span class="line"><span class="comment">			&#125;&#125;</span></span><br><span class="line"><span class="comment">			onClick=&#123; () =&gt; &#123;</span></span><br><span class="line"><span class="comment">					setTitle(Math.random())</span></span><br><span class="line"><span class="comment">				&#125;&#125;</span></span><br><span class="line"><span class="comment">			&gt; */</span>&#125;</span><br><span class="line">			&lt;button </span><br><span class="line">				style=&#123;&#123;</span><br><span class="line">					color: colors.primary</span><br><span class="line">				&#125;&#125;</span><br><span class="line">			&gt;</span><br><span class="line">			Update Title</span><br><span class="line">		&lt;/button&gt;</span><br><span class="line">		&#123;<span class="comment">/* &#123;title&#125; */</span>&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DemoInnerBox</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="comment">// add useContext - 中間層可改變</span></span><br><span class="line">		&lt;ColorContext.Provider value=&#123;&#123;</span><br><span class="line">				primary: <span class="string">&quot;#00ff00&quot;</span></span><br><span class="line">			&#125;&#125; &gt;</span><br><span class="line">			&lt;DemoInnerBoxContent /&gt;</span><br><span class="line">		&lt;/ColorContext.Provider&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DemoInner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">DemoInnerBox</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> [title, setTitle] = useState(<span class="string">&quot;I am title!&quot;</span>)</span><br><span class="line">	<span class="keyword">const</span> [colors, setColors] = useState(&#123;</span><br><span class="line">		primary: <span class="string">&quot;#ff0000&quot;</span>,</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="comment">// add useContext - ColorContext</span></span><br><span class="line">		&lt;ColorContext.Provider value=&#123;colors&#125; &gt;</span><br><span class="line">		&#123;<span class="comment">/* add useContext - 可動態改變 */</span>&#125;</span><br><span class="line">		&lt;button onClick=&#123;<span class="function">()=&gt;</span>&#123;</span><br><span class="line">			setColors(&#123;</span><br><span class="line">				primary: <span class="string">&quot;#0000ff&quot;</span></span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;&#125;&gt;click me&lt;/button&gt;</span><br><span class="line">		&#123;<span class="comment">/* // add useContext</span></span><br><span class="line"><span class="comment">		// &lt;TitleContext.Provider value=&#123;setTitle&#125;&gt;</span></span><br><span class="line"><span class="comment">		// add useContext for array */</span>&#125;</span><br><span class="line">		&#123;<span class="comment">/* &lt;TitleContext.Provider value=&#123;[title, setTitle]&#125;&gt; */</span>&#125;</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				title: &#123;title&#125;</span><br><span class="line">				&lt;DemoInner /&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&#123;<span class="comment">/* &lt;/TitleContext.Provider&gt; */</span>&#125;</span><br><span class="line">		&lt;/ColorContext.Provider&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="propTypes-驗證-props"><a href="#propTypes-驗證-props" class="headerlink" title="propTypes 驗證 props"></a>propTypes 驗證 props</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 雖然 create-react-app 已安裝, 建議要安裝(因為 React 隨時都有可能更新內部 dependency 的版號，甚至移除 node module)</span></span><br><span class="line">npm install prop-types</span><br></pre></td></tr></table></figure>

<p>add file ./.eslintrc.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;extends&quot;</span>: [<span class="string">&quot;react-app&quot;</span>],</span><br><span class="line">	<span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;react/prop-types&quot;</span>: <span class="string">&quot;warn&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoItem <span class="keyword">from</span> <span class="string">&#x27;./TodoItem&#x27;</span></span><br><span class="line"><span class="comment">// useTodos hook</span></span><br><span class="line"><span class="keyword">import</span> useTodos <span class="keyword">from</span> <span class="string">&#x27;./useTodos&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123;</span><br><span class="line">		todos,</span><br><span class="line">		handleTodosClick,</span><br><span class="line">		handleToggleIsDone,</span><br><span class="line">		handleDeleteTodo,</span><br><span class="line">		value,</span><br><span class="line">		handleChange</span><br><span class="line">	&#125; = useTodos()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">		&lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">			&#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">			&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;todo&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class="line">			&lt;button onClick=&#123;handleTodosClick&#125;&gt;add todo&lt;/button&gt;</span><br><span class="line">			&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">handleDeleteTodo</span>=<span class="string">&#123;handleDeleteTodo&#125;</span> <span class="attr">handleToggleIsDone</span>=<span class="string">&#123;handleToggleIsDone&#125;</span> /&gt;</span></span>)&#125;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TodoItem.js</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MEDIA_QUERY_MD, MEDIA_QUERY_LG&#125; <span class="keyword">from</span> <span class="string">&#x27;./constants/style&#x27;</span></span><br><span class="line"><span class="comment">// react direct</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="comment">// add propTypes</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&quot;prop-types&quot;</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoItemWrapper = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  align-items: center;</span></span><br><span class="line"><span class="string">  justify-content: space-between;</span></span><br><span class="line"><span class="string">  padding: 8px 16px;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-top: 12px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoContent = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">// 取用 theme</span></span><br><span class="line"><span class="string">	color: <span class="subst">$&#123;props =&gt; props.theme.colors.primary_300&#125;</span>;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">  font-size: <span class="subst">$&#123;props =&gt; props.size === <span class="string">&#x27;XL&#x27;</span> ? <span class="string">&#x27;20px&#x27;</span> : <span class="string">&#x27;12px&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // todo change state</span></span><br><span class="line"><span class="string">  // props.isDone show text-decoration: line-through;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;props =&gt; props.isDone &amp;&amp; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    text-decoration: line-through;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  `</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoButtonWrapper= styled.div<span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button = styled.button<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 4px;</span></span><br><span class="line"><span class="string">  color: black;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_MD&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 16px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	<span class="subst">$&#123;MEDIA_QUERY_LG&#125;</span> &#123;</span></span><br><span class="line"><span class="string">		font-size: 20px;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	// 相連之 component</span></span><br><span class="line"><span class="string">  &amp; + &amp; &#123;</span></span><br><span class="line"><span class="string">    margin-left: 10px;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RedButton = styled(Button)<span class="string">`</span></span><br><span class="line"><span class="string">  color: red;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for other import</span></span><br><span class="line"><span class="comment">// 因為 function re-style, 增加 class </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoItem</span>(<span class="params">&#123; </span></span></span><br><span class="line"><span class="function"><span class="params">    className, </span></span></span><br><span class="line"><span class="function"><span class="params">    size, </span></span></span><br><span class="line"><span class="function"><span class="params">    todo, </span></span></span><br><span class="line"><span class="function"><span class="params">    handleDeleteTodo, </span></span></span><br><span class="line"><span class="function"><span class="params">    handleToggleIsDone</span></span></span><br><span class="line"><span class="function"><span class="params">  &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//  todo change state</span></span><br><span class="line">  <span class="keyword">const</span> handleToggleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    handleToggleIsDone(todo.id)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// todo delete</span></span><br><span class="line">  <span class="keyword">const</span> handleDeleteClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    handleDeleteTodo(todo.id)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;TodoItemWrapper className=&#123;className&#125; data-tddo-id=&#123;todo.id&#125; &gt;</span><br><span class="line">        &#123;<span class="comment">/* todo change state */</span>&#125;</span><br><span class="line">        &lt;TodoContent isDone=&#123;todo.isDone&#125; size=&#123;size&#125;&gt;&#123;todo.content&#125;&lt;/TodoContent&gt;</span><br><span class="line">        &#123;<span class="comment">/* javascript:alert(1) */</span>&#125;</span><br><span class="line">        &#123;<span class="comment">/* &lt;a href=&#123;todo.content&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class="line">        &#123;<span class="comment">/* &lt;a href=&#123;window.encodeURIComponent(todo.content)&#125;&gt;click me&lt;/a&gt; */</span>&#125;</span><br><span class="line">        &lt;TodoButtonWrapper&gt;</span><br><span class="line">          &#123;<span class="comment">/* todo change state */</span>&#125;</span><br><span class="line">          &lt;Button onClick=&#123;handleToggleClick&#125;&gt;</span><br><span class="line">            &#123;<span class="comment">/* &#123; todo.isDone ? &#x27;已完成&#x27; : &#x27;未完成&#x27;&#125; */</span>&#125;</span><br><span class="line">            &#123;<span class="comment">/* todo.isDone 顯示已完成  */</span>&#125;</span><br><span class="line">            &#123; todo.isDone &amp;&amp; <span class="string">&#x27;已完成&#x27;</span>&#125;</span><br><span class="line">            &#123; !todo.isDone &amp;&amp; <span class="string">&#x27;未完成&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">          &lt;/Button&gt;</span><br><span class="line">          &#123;<span class="comment">/* todo delete */</span>&#125;</span><br><span class="line">          &lt;RedButton onClick=&#123;handleDeleteClick&#125;&gt;刪除&lt;/RedButton&gt;</span><br><span class="line">        &lt;/TodoButtonWrapper&gt;</span><br><span class="line">      &lt;/TodoItemWrapper&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add propTypes</span></span><br><span class="line">TodoItem.propTypes = &#123;</span><br><span class="line">  className: PropTypes.string, </span><br><span class="line">  size: PropTypes.string, </span><br><span class="line">  todo: PropTypes.shape(&#123;</span><br><span class="line">    id: PropTypes.number.isRequired,</span><br><span class="line">    content: PropTypes.string,</span><br><span class="line">    isDone: PropTypes.bool</span><br><span class="line"></span><br><span class="line">  &#125;), </span><br><span class="line">  handleDeleteTodo: PropTypes.func, </span><br><span class="line">  handleToggleIsDone: PropTypes.func</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useTodos.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useInput <span class="keyword">from</span> <span class="string">&#x27;./useInput&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useTodos</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// use ref</span></span><br><span class="line">	<span class="keyword">const</span> id = useRef(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// set local storage to init todos </span></span><br><span class="line">	<span class="keyword">const</span> [todos, setTodos] = useState( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;init&#x27;</span>);</span><br><span class="line">		<span class="keyword">let</span> todoData = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;todos&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span>(todoData) &#123;</span><br><span class="line">			todoData = <span class="built_in">JSON</span>.parse(todoData);</span><br><span class="line">			id.current = todoData[<span class="number">0</span>].id + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			todoData = [] ;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> todoData;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> &#123;value, setValue, handleChange &#125; = useInput()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// save to localStorage after update-1+</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">writeTodosToLocalStorage</span>(<span class="params">todos</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">window</span>.localStorage.setItem(<span class="string">&quot;todos&quot;</span>, <span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;run 1st render!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="comment">// unmount</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;unmount!&#x27;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, []);</span><br><span class="line"></span><br><span class="line">	useEffect( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		writeTodosToLocalStorage(todos);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;useEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear up LayoutEffects</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function">() =&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;clearEffect todos :&#x27;</span>,<span class="built_in">JSON</span>.stringify(todos));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, [todos]);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> handleTodosClick = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// set input value </span></span><br><span class="line">		setTodos([&#123;</span><br><span class="line">			id: id.current,</span><br><span class="line">			content: value,</span><br><span class="line">			isDone: <span class="literal">false</span></span><br><span class="line">		&#125;, ...todos])</span><br><span class="line">		setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		<span class="comment">// use ref</span></span><br><span class="line">		id.current++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo delete</span></span><br><span class="line">	<span class="keyword">const</span> handleDeleteTodo = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== id ))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// todo change state</span></span><br><span class="line">	<span class="keyword">const</span> handleToggleIsDone = <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">		setTodos(todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (todo.id !== id) <span class="keyword">return</span> todo</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				...todo,</span><br><span class="line">				isDone: !todo.isDone</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		todos,</span><br><span class="line">		handleTodosClick,</span><br><span class="line">		handleToggleIsDone,</span><br><span class="line">		handleDeleteTodo,</span><br><span class="line">		value,</span><br><span class="line">		setValue,</span><br><span class="line">		handleChange</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="deployment"><a href="#deployment" class="headerlink" title="deployment"></a>deployment</h4><h5 id="local"><a href="#local" class="headerlink" title="local"></a>local</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># build </span></span><br><span class="line">npm run build</span><br><span class="line"><span class="comment"># run</span></span><br><span class="line">npm install -g serve</span><br><span class="line">serve -s build</span><br><span class="line"><span class="comment"># set port</span></span><br><span class="line"><span class="comment"># serve -s build -l 4000</span></span><br><span class="line"><span class="comment"># !!!!! 執行 deploy to github 後再執行就會有問題 !!!!! </span></span><br><span class="line"><span class="comment"># 要移除 deploy to github&#x27;s json 設定再執行</span></span><br><span class="line"><span class="comment"># npm run build</span></span><br><span class="line"><span class="comment"># serve -s build</span></span><br></pre></td></tr></table></figure>

<h5 id="deploy-to-github"><a href="#deploy-to-github" class="headerlink" title="deploy to github"></a>deploy to github</h5><h6 id="add-scripts-and-homepage"><a href="#add-scripts-and-homepage" class="headerlink" title="add scripts and homepage"></a>add scripts and homepage</h6><p>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> &quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;predeploy&quot;: &quot;npm run build&quot;,</span><br><span class="line">   &quot;deploy&quot;: &quot;gh-pages -d build&quot;,</span><br><span class="line">	.....</span><br><span class="line">&#125;,</span><br><span class="line"> &quot;homepage&quot;: &quot;https://hot5656.github.io/react-comments-test2&quot;,</span><br></pre></td></tr></table></figure>
<h6 id="insatll-gh-pages"><a href="#insatll-gh-pages" class="headerlink" title="insatll gh-pages"></a>insatll gh-pages</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save gh-pages</span><br></pre></td></tr></table></figure>

<h6 id="github-add-repository-react-comments-test2"><a href="#github-add-repository-react-comments-test2" class="headerlink" title="github add repository - react-comments-test2"></a>github add repository - react-comments-test2</h6><h6 id="deploy-to-github-1"><a href="#deploy-to-github-1" class="headerlink" title="deploy to github"></a>deploy to github</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git init and commit</span></span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;init&quot;</span></span><br><span class="line"><span class="comment"># add remote repository </span></span><br><span class="line">git remote add origin https://github.com/hot5656/react-comments-test2.git</span><br><span class="line"><span class="comment"># run deploy</span></span><br><span class="line">npm run deploy</span><br></pre></td></tr></table></figure>

<h6 id="open-by-browser"><a href="#open-by-browser" class="headerlink" title="open by browser"></a>open by browser</h6><p><a href="https://hot5656.github.io/react-comments-test2/">https://hot5656.github.io/react-comments-test2/</a></p>
<h4 id="react-router"><a href="#react-router" class="headerlink" title="react router"></a>react router</h4><h5 id="install-1"><a href="#install-1" class="headerlink" title="install"></a>install</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react-router-dom</span><br></pre></td></tr></table></figure>

<h5 id="useParams"><a href="#useParams" class="headerlink" title="useParams"></a>useParams</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./Pages/BlogPost/BlogPost.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; useParams &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">BlogPost</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; slug &#125; = useParams();</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ./component/App/App.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;AuthContext.Provider value=&#123;&#123;user, setUser&#125;&#125;&gt;</span><br><span class="line">      &lt;Root&gt;</span><br><span class="line">        &lt;Header done=&#123;isDone&#125; /&gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">            &lt;HomePage /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/posts/:slug&quot;</span>&gt;</span><br><span class="line">            &lt;BlogPost /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/new-post&quot;</span>&gt;</span><br><span class="line">            &lt;CreatePage /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/login&quot;</span>&gt;</span><br><span class="line">            &lt;LoginPage /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/Root&gt;</span><br><span class="line">    &lt;/AuthContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="useHistory-useLocation"><a href="#useHistory-useLocation" class="headerlink" title="useHistory, useLocation"></a>useHistory, useLocation</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Link, useLocation, useHistory &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> history = useHistory();</span><br><span class="line">  <span class="keyword">const</span> &#123; user, setUser &#125; = useContext(AuthContext); </span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleLogout = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setAuthToken(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    setUser(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span> (location.pathname !==  <span class="string">&quot;/&quot;</span>) &#123;</span><br><span class="line">      history.push(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<h5 id="example-1-2"><a href="#example-1-2" class="headerlink" title="example #1"></a>example #1</h5><h6 id="component-App"><a href="#component-App" class="headerlink" title="./component/App"></a>./component/App</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./component/App/App.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> HomePage <span class="keyword">from</span> <span class="string">&quot;../../Pages/HomePage&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> LoginPage <span class="keyword">from</span> <span class="string">&quot;../../Pages/LoginPage&quot;</span>; </span><br><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">&quot;../Header&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="comment">// BrowserRouter as Router,</span></span><br><span class="line">  <span class="comment">// for SPA</span></span><br><span class="line">  HashRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Root =  styled.div<span class="string">``</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Root&gt;</span><br><span class="line">      &lt;Router&gt;</span><br><span class="line">        &lt;Header /&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;Link to=<span class="string">&quot;/login&quot;</span>&gt;Login&lt;/Link&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">          &lt;hr /&gt;</span><br><span class="line"></span><br><span class="line">          &lt;Switch&gt;</span><br><span class="line">            &#123;<span class="comment">/* exact 完全比對 */</span>&#125;</span><br><span class="line">            &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">              &lt;HomePage /&gt;</span><br><span class="line">            &lt;/Route&gt;</span><br><span class="line">            &lt;Route path=<span class="string">&quot;/login&quot;</span>&gt;</span><br><span class="line">              &lt;LoginPage /&gt;</span><br><span class="line">            &lt;/Route&gt;</span><br><span class="line">          &lt;/Switch&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/Router&gt;</span><br><span class="line">    &lt;/Root&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./component/App/index.js</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h6 id="component-Header"><a href="#component-Header" class="headerlink" title="./component/Header"></a>./component/Header</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./component/Header/Header.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Header</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./component/Header/index.js</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Header&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h6 id="Pages-HomePage"><a href="#Pages-HomePage" class="headerlink" title="./Pages/HomePage"></a>./Pages/HomePage</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./Pages/HomePage/HomePage.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">HomePage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Homepage<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./Pages/HomePage/index.js</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./HomePage&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h6 id="Pages-LoginPage"><a href="#Pages-LoginPage" class="headerlink" title="./Pages/LoginPage"></a>./Pages/LoginPage</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./Pages/LoginPage/LoginPage.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">LoginPage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>LoginPage<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./Pages/LoginPage/index.js</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./LoginPage&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="react-event"><a href="#react-event" class="headerlink" title="react event"></a>react event</h4><ul>
<li>onClick</li>
<li>onChange</li>
<li>onBlur : 離開表單</li>
</ul>
<h3 id="prettier-ESLint"><a href="#prettier-ESLint" class="headerlink" title="prettier ESLint"></a>prettier ESLint</h3><h4 id="create-react-app-default-include-ESLint-configuration"><a href="#create-react-app-default-include-ESLint-configuration" class="headerlink" title="create-react-app default include ESLint configuration"></a>create-react-app default include ESLint configuration</h4><p>.\node_modules\react-scripts\config\webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">!disableESLintPlugin &amp;&amp;</span><br><span class="line">  <span class="keyword">new</span> ESLintPlugin(&#123;</span><br><span class="line">    <span class="comment">// Plugin options</span></span><br><span class="line">    extensions: [<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;mjs&#x27;</span>, <span class="string">&#x27;jsx&#x27;</span>, <span class="string">&#x27;ts&#x27;</span>, <span class="string">&#x27;tsx&#x27;</span>],</span><br><span class="line">    formatter: <span class="built_in">require</span>.resolve(<span class="string">&#x27;react-dev-utils/eslintFormatter&#x27;</span>),</span><br><span class="line">    eslintPath: <span class="built_in">require</span>.resolve(<span class="string">&#x27;eslint&#x27;</span>),</span><br><span class="line">    failOnError: !(isEnvDevelopment &amp;&amp; emitErrorsAsWarnings),</span><br><span class="line">    context: paths.appSrc,</span><br><span class="line">    cache: <span class="literal">true</span>,</span><br><span class="line">    cacheLocation: path.resolve(</span><br><span class="line">      paths.appNodeModules,</span><br><span class="line">      <span class="string">&#x27;.cache/.eslintcache&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment">// ESLint class options</span></span><br><span class="line">    cwd: paths.appPath,</span><br><span class="line">    resolvePluginsRelativeTo: __dirname,</span><br><span class="line">    baseConfig: &#123;</span><br><span class="line">      <span class="keyword">extends</span>: [<span class="built_in">require</span>.resolve(<span class="string">&#x27;eslint-config-react-app/base&#x27;</span>)],</span><br><span class="line">      rules: &#123;</span><br><span class="line">        ...(!hasJsxRuntime &amp;&amp; &#123;</span><br><span class="line">          <span class="string">&#x27;react/react-in-jsx-scope&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br></pre></td></tr></table></figure>

<h4 id="vscode-ESlint-configuration-ESLint"><a href="#vscode-ESlint-configuration-ESLint" class="headerlink" title="vscode ESlint configuration - ESLint"></a>vscode ESlint configuration - ESLint</h4><p>./.eslintrc.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;extends&quot;</span>: [<span class="string">&quot;react-app&quot;</span>],</span><br><span class="line">	<span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;react/prop-types&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;semi&quot;</span>: <span class="string">&quot;error&quot;</span>  <span class="comment">// 結尾要加分號</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="prettier-Prettier-Code-formatter-Prettier"><a href="#prettier-Prettier-Code-formatter-Prettier" class="headerlink" title="prettier - Prettier - Code formatter (Prettier)"></a>prettier - Prettier - Code formatter (Prettier)</h4><p>settings.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;editor.tabSize&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">&quot;emmet.includeLanguages&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;javascript&quot;</span>: <span class="string">&quot;javascriptreact&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;emmet.triggerExpansionOnTab&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;editor.formatOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;files.associations&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;*.js&quot;</span>: <span class="string">&quot;javascriptreact&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 雙引號</span><br><span class="line"><span class="comment">/* eslint jsx-quotes: [&quot;error&quot;, &quot;prefer-double&quot;] */</span></span><br><span class="line"># 定要有分號</span><br><span class="line"><span class="comment">/* eslint semi: [&quot;error&quot;, &quot;always&quot;] */</span></span><br><span class="line"># function 與 () 不要有空格</span><br><span class="line"><span class="comment">/* eslint space-before-function-paren: [&quot;error&quot;, &quot;never&quot;] */</span></span><br></pre></td></tr></table></figure>

<h3 id="測試"><a href="#測試" class="headerlink" title="測試"></a>測試</h3><h4 id="react-testing-library-測試-React-component"><a href="#react-testing-library-測試-React-component" class="headerlink" title="react-testing-library : 測試 React component"></a>react-testing-library : 測試 React component</h4><h4 id="Cypress-end-ot-end-test"><a href="#Cypress-end-ot-end-test" class="headerlink" title="Cypress : end ot end test"></a>Cypress : end ot end test</h4><h3 id="Developer-Tools"><a href="#Developer-Tools" class="headerlink" title="Developer Tools"></a>Developer Tools</h3><ul>
<li><a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en">React Developer Tool</a></li>
<li><a target="_blank" rel="noopener" href="https://storybook.js.org/">Storybook</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/webpack-bundle-analyzer">Bundle Analyzer</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/welldone-software/why-did-you-render">Why Did You Render</a></li>
<li><a target="_blank" rel="noopener" href="https://jestjs.io/">React Testing Library With Jest</a></li>
<li><a target="_blank" rel="noopener" href="https://formik.org/">Formik</a> and <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/yup">Yup</a></li>
<li><a target="_blank" rel="noopener" href="https://react-hook-form.com/">React Hook Form</a></li>
<li><a target="_blank" rel="noopener" href="https://www.reactsight.com/">React Sight</a></li>
<li><a target="_blank" rel="noopener" href="https://react-proto.github.io/react-proto/">React Proto</a></li>
</ul>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ul>
<li><a target="_blank" rel="noopener" href="https://styled-components.com/docs/basics">styled components</a></li>
<li><a target="_blank" rel="noopener" href="https://pjchender.blogspot.com/2017/01/javascript-es6-template-literalstagged.html">tagged template</a></li>
<li>   <a target="_blank" rel="noopener" href="https://babeljs.io/">Babel is a JavaScript compiler</a></li>
<li><a target="_blank" rel="noopener" href="https://prettier.io/">Prettier</a></li>
<li><a target="_blank" rel="noopener" href="https://create-react-app.dev/docs/setting-up-your-editor">React Setting Up Your Editor</a></li>
<li><a target="_blank" rel="noopener" href="https://reactjs.org/docs/introducing-jsx.html">Introducing JSX</a></li>
<li><a target="_blank" rel="noopener" href="https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml">dangerouslySetInnerHTML</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/donavon/hook-flow">hook-flow</a></li>
<li><a target="_blank" rel="noopener" href="https://overreacted.io/a-complete-guide-to-useeffect/">A Complete Guide to useEffect</a></li>
<li><a target="_blank" rel="noopener" href="https://usehooks.com/useLocalStorage/">useLocalStorage</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.techbridge.cc/2019/02/04/vdom-from-scratch/">從頭打造一個簡單的 Virtual DOM</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/build-a-simple-virtual-dom-5cf12ccf379f">為了瞭解原理，那就來實作一個簡易 Virtual DOM 吧！</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10234998">React lifeCycle 生命週期</a></li>
<li><a target="_blank" rel="noopener" href="https://create-react-app.dev/docs/deployment/">react deployment</a></li>
<li><a target="_blank" rel="noopener" href="https://reactrouter.com/web/guides/quick-start">react router</a></li>
<li><a target="_blank" rel="noopener" href="https://jwt.io/">JWT</a></li>
<li><a target="_blank" rel="noopener" href="https://testing-library.com/docs/bs-react-testing-library/intro">react-testing-library</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cypress.io/">cypress</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kdchang/reactjs101">從零開始學 ReactJS(ReactJS 101)</a></li>
<li><a target="_blank" rel="noopener" href="https://overreacted.io/">Overreacted(Dan Abramov)</a></li>
<li><a target="_blank" rel="noopener" href="https://zh-hant.reactjs.org/docs/react-dom-server.html#rendertostring">ReactDOMServer</a> : SSR reffence</li>
<li><a target="_blank" rel="noopener" href="https://prerender.io/">PRERENDER io</a> : SSR reference</li>
<li><a target="_blank" rel="noopener" href="https://nextjs.org/">*** Next.js</a> : The React Framework for Production (內建 SSR)</li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/">TypeScript</a>: .ts, JavaScript 加型態, 需編譯後才能執行</li>
<li><a target="_blank" rel="noopener" href="https://github.com/sudheerj/reactjs-interview-questions">React Interview Questions &amp; Answers</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/react/" rel="tag"># react</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/08/14/express-2/" rel="prev" title="Express practice">
                  <i class="fa fa-chevron-left"></i> Express practice
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/09/13/react-2/" rel="next" title="React 練習">
                  React 練習 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Robert Kao</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="總字數">1.2m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">18:39</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>






  




  


<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://hot5656-blog.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://hot5656.github.io/2021/08/22/react-1/";
    this.page.identifier = "2021/08/22/react-1/";
    this.page.title = "React";
    };
  NexT.utils.loadComments('#disqus_thread', () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://hot5656-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
